function SettingPaymentsCtrl(a,b,c,d){function e(){d.getOneStepList().then(function(a){g.paypalList=a.data.paypal,g.stripeList=a.data.stripe})}function f(a,e,f){var h;"stripe"===f&&(h={stripe_id:a}),"paypal"===f&&(h={paypal_reference_id:a});var i=c.open({size:"md",backdrop:"static",template:'<div class="modal-header"><h4>Delete payment method <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button></h4></div><div class="modal-body"><p>Are you sure you want to remove from italki the selected payment methods?</p></div><div class="modal-footer"><button type="button" class="pull-left btn btn-default" ng-click="$dismiss()">Cancel</button><button type="button" ng-click="$close()" class="pull-right btn btn-primary">Confirm</button></div>'});i.result.then(function(){d.removeCard(h).then(function(){"stripe"===f&&g.stripeList.splice(e,1),"paypal"===f&&g.paypalList.splice(e,1),g.stripeList.length||(b.currentUser.hasStripeList=!1),g.paypalList.length||(b.currentUser.hasPaypalList=!1)})})}var g=this;g.paypalList=[],g.stripeList=[],g.removeCard=f,e()}function RechargeCtrl(a,b,c,d,e,f,g,h,i){var j=this;b.GlobalObject=i,b.ui={carousel:{noWrap:!0,slideIndex:1},coupon:{hide:!0,error:!1,errorCode:"VGC302"}},b.coupon={list:[],params:{available:1},selected:{voucher_value:0,voucher_sn:0},pagination:[{data:[{showCouponCode:!0}],id:0}],per:3,code:"",itc:0},b.itc_usd={value:d.itc/100||100},b.LessonAmount={promax:"",promin:"",trial:"",tutormax:"",tutormin:""},b.$watch("itc_usd.value",function(a,b){a!==b&&j.changeItc()}),b.goToCoupon=function(){function a(b){c||(c=b);var f=b-c,g=Math.min(f/200,1);window.scrollTo(0,d+e*g),200>f&&window.requestAnimationFrame(a)}b.showCoupon=!0;var c,d=window.pageYOffset,e=angular.element("#coupon")[0].offsetTop-d;window.requestAnimationFrame?window.requestAnimationFrame(a):window.scroll(0,angular.element("#coupon")[0].offsetTop)},b.changeCurrency=function(){b.currentUser&&b.data.currency!==b.currentUser.currency&&g.setUserProfile().post({currency:b.data.currency}).then(function(){b.currentUser.currency=b.data.currency,b.currentUser.currency_rate=b.currency[b.currentUser.currency]/10,b.amount_currency=b.getTotal2()})},b.reduceAmount=function(){b.itc_usd.value=parseInt(b.itc_usd.value)-10,b.coupon.selected.voucher_sn&&b.itc_usd.value<b.coupon.selected.use_limit_itc/100&&(b.coupon.selected={voucher_value:0,voucher_sn:0},b.coupon.itc=0),b.amount_currency=b.getTotal2()},b.addAmount=function(){b.itc_usd.value=parseInt(b.itc_usd.value)+10,b.coupon.selected.voucher_sn&&b.itc_usd.value>=b.coupon.selected.use_limit_itc/100&&(b.coupon.code="",b.ui.coupon.hide=!0,b.ui.coupon.error=!1,b.coupon.selected.enabled=!0,b.coupon.itc=b.coupon.selected.voucher_value),b.amount_currency=b.getTotal2()},b.checkNumber=function(){b.itc_usd.value=b.itc_usd.value.replace(/[^0-9]/g,""),b.coupon.selected.voucher_sn&&b.itc_usd.value<b.coupon.selected.use_limit_itc/100&&(b.coupon.selected={voucher_value:0,voucher_sn:0},b.coupon.itc=0),b.amount_currency=b.getTotal2()},b.payButton=function(){b.itc_usd.value>1e3||b.itc_usd.value<10?(b.itc_usd.value>1e3?(b.itc_usd.value=1e3,b.numbeInvalidMax=!0):(b.itc_usd.value=10,b.numbeInvalidMin=!0),b.amount_currency=b.getTotal2(),e.cancel(b.setTime),b.setTime=e(function(){b.numbeInvalidMin=!1,b.numbeInvalidMax=!1},3e3)):a.isOneStepPayment&&(a.currentUser.hasStripeList||a.currentUser.hasPaypalList)?c.go("oneStepCheckout",{min:100*b.itc_usd.value,voucherid:b.coupon.selected.enabled?b.coupon.selected.voucher_sn:"",code:b.coupon.code}):c.go("checkout",{min:100*b.itc_usd.value,voucherid:b.coupon.selected.enabled?b.coupon.selected.voucher_sn:"",code:b.coupon.code})},b.selectVoucher=function(a){b.coupon.code="",b.ui.coupon.hide=!0,b.coupon.selected=angular.copy(a),b.ui.coupon.error=!(a.use_limit_itc/100<=b.itc_usd.value&&!a.unstart),b.coupon.selected.enabled=a.use_limit_itc/100<=b.itc_usd.value&&!a.unstart,b.coupon.itc=a.use_limit_itc/100<=b.itc_usd.value&&!a.unstart?b.coupon.selected.voucher_value:0},b.redeem=function(a){if(a){b.coupon.selected={voucher_value:0,voucher_sn:0},b.ui.carousel.slideIndex=1,b.ui.coupon.hide=!0,b.ui.coupon.error=!1;var c={code:a,type:0,itc:100*b.itc_usd.value};angular.extend(c,{use_type:d.usetype}),h.getCommentCode().get(c).then(function(a){var c=a.data;c.limit_usd>b.price?(b.ui.coupon.hide=!1,b.ui.coupon.error=!0,b.coupon.itc=0):(b.coupon.itc=c.itc,b.ui.coupon.hide=!1,b.ui.coupon.error=!1)},function(a){var c="VC306";switch(a.type){case"1":c="VGC300";break;case"2":c="VGC301";break;case"3":c="VGC302";break;default:c="VGC302"}b.coupon.itc=0,b.ui.coupon.hide=!1,b.ui.coupon.error=!0,b.ui.coupon.errorCode=c})}},b.removeCoupon=function(){b.coupon.code="",b.coupon.selected={voucher_value:0,voucher_sn:0},b.ui.coupon.hide=!0,b.ui.coupon.error=!1,b.coupon.itc=0},j.init=function(){b.currentUser?(b.data={currency:b.currentUser.currency},b.getTotal2=function(){var a=b.itc_usd.value,c=(10*a*b.currentUser.currency_rate).toFixed(2);return c>0?c:0},h.getTrial().then(function(a){b.leftTrialAmount=a.data.success.left_trial_amount,j.changeItc()},function(){b.leftTrialAmount=3,j.changeItc()}),b.amount_currency=b.getTotal2(),j.loadCoupon()):e(j.init,500)},j.loadCoupon=function(){return h.getCoupons().get(b.coupon.params).then(function(a){var c=a.data.coupon_list,d=Math.ceil((c.length-1)/b.coupon.per);f.innerWidth<1200&&f.innerWidth>=768&&(b.coupon.per=2,d=Math.ceil((c.length-1)/b.coupon.per)),f.innerWidth<768&&(b.coupon.per=1,d=Math.ceil(c.length/b.coupon.per)),b.coupon.pagination[0].data=b.coupon.pagination[0].data.concat(c.slice(0,b.coupon.per-1));for(var e=[],g=1;d>=g;g++){var h=c.slice(g*b.coupon.per-1,(g+1)*b.coupon.per-1);h.length>0&&e.push({data:h,id:g})}e.length>0&&(b.coupon.pagination=b.coupon.pagination.concat(e)),b.coupon.list=c})},j.changeItc=function(){var a=0,c=0,d=0,e=0,f=0;for(b.currentUser&&"arabic"===b.currentUser.learning_language?(c=15,a=10,f=6,d=12.5,e=7):b.currentUser&&"chinese"===b.currentUser.learning_language?(c=18.9,a=12.9,f=6.8,d=12,e=5):b.currentUser&&"eaaanglish"===b.currentUser.learning_language?(c=22,a=14,f=8,d=15,e=9):b.currentUser&&"french"===b.currentUser.learning_language?(c=28,a=17,f=8.5,d=18,e=10):b.currentUser&&"german"===b.currentUser.learning_language?(c=32,a=18,f=10,d=18.5,e=10):b.currentUser&&"italian"===b.currentUser.learning_language?(c=20,a=14,f=7,d=15,e=8):b.currentUser&&"japanese"===b.currentUser.learning_language?(c=22,a=15,f=7,d=15,e=8):b.currentUser&&"korean"===b.currentUser.learning_language?(c=25,a=15,f=8,d=15,e=9):b.currentUser&&"portuguese"===b.currentUser.learning_language?(c=20,a=12,f=6,d=14,e=6):b.currentUser&&"russian"===b.currentUser.learning_language?(c=17,a=11,f=6,d=12,e=6):b.currentUser&&"spanish"===b.currentUser.learning_language?(c=20,a=12,f=6,d=13,e=7):(c=20,a=14,f=7,d=13,e=7),b.LessonAmount.promin=Math.floor(b.itc_usd.value/c),b.LessonAmount.promax=Math.floor(b.itc_usd.value/a),b.LessonAmount.tutormin=Math.floor(b.itc_usd.value/d),b.LessonAmount.tutormax=Math.floor(b.itc_usd.value/e),b.tutorRange=b.LessonAmount.tutormax-b.LessonAmount.tutormin,b.proRange=b.LessonAmount.promax-b.LessonAmount.promin,b.LessonAmount.trial=Math.min(b.leftTrialAmount,Math.floor(b.itc_usd.value/f));b.tutorRange>5;)b.LessonAmount.tutormin+=1,b.LessonAmount.tutormax-=1,b.tutorRange=b.LessonAmount.tutormax-b.LessonAmount.tutormin;for(;b.proRange>5;)b.LessonAmount.promin+=1,b.LessonAmount.promax-=1,b.proRange=b.LessonAmount.promax-b.LessonAmount.promin},j.resizeCallBack=function(){var a,c=b.coupon.list;if(a=f.innerWidth<1200&&f.innerWidth>=768?2:f.innerWidth<768?1:3,b.coupon.per!==a){b.coupon.per=a;var d=Math.ceil((c.length-1)/b.coupon.per);f.innerWidth<768&&(d=Math.ceil(c.length/b.coupon.per));var e=[];b.coupon.pagination=[{data:[{showCouponCode:!0}],id:0,active:!0}],b.coupon.pagination[0].data=b.coupon.pagination[0].data.concat(c.slice(0,b.coupon.per-1));for(var g=1;d>=g;g++)e.push({data:c.slice(g*b.coupon.per-1,(g+1)*b.coupon.per-1),id:g,active:!1});b.coupon.pagination=b.coupon.pagination.concat(e),b.$apply()}},angular.element(f).bind("resize",j.resizeCallBack),b.$on("$destroy",function(){angular.element(f).unbind("resize",j.resizeCallBack)}),j.init()}function CheckoutCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;d.noWrap=!0,d.bill_country_chosen=null,d.currentPaymentConfig={},d.card={},d.isGiftCard="giftcard"===f.type,d.moreCreditsUSD=0,f.img&&(d.img=f.img);var p=angular.copy(KP.COUNTRRY_ARR);angular.forEach(p,function(a){a.name=h.instant(a.l)}),d.countries=_.union(p),d.price=isNaN(parseInt(f.min))?1e4:parseInt(f.min),d.price<1e3&&(d.price=1e3),d.coupon={list:[],params:{available:1},selected:{voucher_value:0,voucher_sn:0},code:"",itc:0},d.ui={loading:!0,loaded:!1,stripe:{loading:!1,loaded:!1,error:!1},initialPayment:{number:!1,expiry:!1,cvc:!1,owner:!1},cardNumberError:!1,expiryError:!1,cvcError:!1,cardOwnerError:!1,cardType:"",cardSelected:!1,tabIndex:0,showOrderDetails:!1,payDisable:!0,helps:[{question:"PM449",value:1},{question:"PM461",value:2},{question:"PM463",value:3},{question:"PM465",value:4},{question:"PM467",value:5},{question:"PM469",value:6}],answers:["PM562","PM462","PM464","PM466","PM468",["PM470","PM471"]],processingFeeTip:h.instant("PM485")+"<br />"+h.instant("PM486"),subTotalTip:h.instant("PM487")},o.initStripe=function(){var a=b.defer();if(!(window.Stripe||d.ui.stripe.loading||d.ui.stripe.loaded||d.ui.stripe.error)){d.ui.stripe.loading=!0;var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src="https://js.stripe.com/v2/",c.onload=c.onreadystatechange=function(){Stripe.setPublishableKey(k.stripeKey),d.ui.stripe.loading=!1,d.ui.stripe.loaded=!0,a.resolve(!0)},c.onerror=function(){d.ui.stripe.loading=!1,d.ui.stripe.loaded=!1,d.ui.stripe.error=!0,a.reject("Stripe load failed"),m.appendWithContent("Stripe load failed")},document.body.appendChild(c)}return a.promise},o.paymentConfig=function(a,b){return l.paymentConfig().get(a).then(function(a){d.bill_country_chosen={v:a.data.bill_country};var c=a.data.top_pay_config_s;if(angular.isArray(c)&&c.length>0){d.creditCardConfig=c.filter(function(a){return"Y"===a.pay_type}),d.paypalConfig=c.filter(function(a){return"2"===a.pay_type}),d.creditCardConfig.length?d.othersConfig=c.filter(function(a){return"Y"!==a.pay_type&&"2"!==a.pay_type}):(d.creditCardConfig=c.filter(function(a){return"8"===a.pay_type||"W"===a.pay_type}),d.othersConfig=c.filter(function(a){return"Y"!==a.pay_type&&"2"!==a.pay_type&&"8"!==a.pay_type&&"W"!==a.pay_type})),b?(d.currentPaymentConfig=d.creditCardConfig.length?angular.copy(d.creditCardConfig[0]):{},d.ui.payDisable="8"!==d.currentPaymentConfig.pay_type&&"W"!==d.currentPaymentConfig.pay_type):0===d.ui.tabIndex?(d.currentPaymentConfig=d.creditCardConfig.length?angular.copy(d.creditCardConfig[0]):{},d.currentPaymentConfig.selected={},d.ui.payDisable="8"!==d.currentPaymentConfig.pay_type&&"W"!==d.currentPaymentConfig.pay_type,d.card={},d.ui.cardSelected=!1,d.ui.cardType="",d.ui.initialPayment={number:!1,expiry:!1,cvc:!1,owner:!1},d.ui.cardNumberError=!1,d.ui.cvcError=!1,d.ui.expiryError=!1,d.ui.cardOwnerError=!1):1===d.ui.tabIndex?(d.currentPaymentConfig=d.paypalConfig.length?angular.copy(d.paypalConfig[0]):{},d.ui.payDisable=0===d.paypalConfig.length,d.currentPaymentConfig.selected={}):2===d.ui.tabIndex&&(d.currentPaymentConfig=angular.copy(d.othersConfig[0]),d.currentPaymentConfig.selected={code:d.othersConfig[0].code});var e=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amount=e.amount,d.amountCurrency=e.amountCurrency,d.commission=e.commission}else m.appendWithContent(h.instant("C1015"));return d.ui.loading=!1,a})},d.changeOrder=function(){f.orderid?e.go("sessionRequest",{priceId:d.orderData.course_price_id,length:d.orderData.session_length}):d.isGiftCard?e.go("giftcard"):e.go("recharge",{itc:d.price})},d.changeTab=function(a){d.ui.tabIndex=a,0===a?(d.currentPaymentConfig=d.creditCardConfig.length?angular.copy(d.creditCardConfig[0]):{},d.ui.payDisable="8"!==d.currentPaymentConfig.pay_type&&"W"!==d.currentPaymentConfig.pay_type,d.ui.cardSelected=!1,d.ui.cardType="",d.ui.initialPayment={number:!1,expiry:!1,cvc:!1,owner:!1}):1===a?(d.currentPaymentConfig=d.paypalConfig.length?angular.copy(d.paypalConfig[0]):{},d.ui.payDisable=0===d.paypalConfig.length):2===a&&(d.changePayment(d.othersConfig[0]),d.ui.payDisable=!1),d.card={},d.ui.cardNumberError=!1,d.ui.cvcError=!1,d.ui.expiryError=!1,d.ui.cardOwnerError=!1;var b=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amount=b.amount,d.amountCurrency=b.amountCurrency,d.commission=b.commission},d.getBill=function(a,b,c,e){var f,g,h,i;return i="3"===c.type&&c.selected.use_limit_itc<=a?i=a-c.itc:a,0>=i?(f=0,g=0,h=0):b.code?(0===b.commission?h=b.base_fee:(h=(i/100+b.base_fee)/(1-b.commission)-i/100,h>Math.round(100*h)/100&&(h=Math.round(100*(h+.01))/100)),h=h.toFixed(2),f=100*h+i,e&&e.currency_rate&&(g=(f/100).toFixed(2)*e.currency_rate*1e3)):b.code?(f=d.amount,g=d.amountCurrency,h=d.commission):(f=i,h=0,g=e&&e.currency_rate?(f/100).toFixed(2)*e.currency_rate*1e3:0),{amount:f,amountCurrency:g,commission:h}},d.changeCountry=function(a){o.paymentConfig({bill_country:a.v})},d.changePayment=function(a){d.currentPaymentConfig=a,d.currentPaymentConfig.selected={code:a.code};var b=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amount=b.amount,d.amountCurrency=b.amountCurrency,d.commission=b.commission},d.changeCurrency=function(){d.currentUser&&d.data.currency!==d.currentUser.currency&&j.setUserProfile().post({currency:d.data.currency}).then(function(){d.currentUser.currency=d.data.currency,d.currentUser.currency_rate=d.currency[d.currentUser.currency]/10;var a=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amountCurrency=a.amountCurrency})},d.checkCardNumber=function(a){if(d.ui.initialPayment.number=!0,a)switch(d.ui.cardSelected=!0,d.ui.cardType=Stripe.card.cardType(a),d.ui.cardType){case"Visa":d.ui.cardNumberError=a.length<13||!Stripe.card.validateCardNumber(a);break;case"MasterCard":d.ui.cardNumberError=16!==a.length&&!Stripe.card.validateCardNumber(a);break;case"American Express":d.ui.cardNumberError=15!==a.length&&!Stripe.card.validateCardNumber(a);break;default:d.ui.cardNumberError=!Stripe.card.validateCardNumber(a)}else d.ui.cardSelected=!1,d.ui.cardNumberError=!0;d.checkPay()},d.checkCVC=function(a){d.ui.initialPayment.cvc=!0,d.ui.cvcError=!Stripe.card.validateCVC(a),d.checkPay()},d.checkExpiry=function(a,b){d.ui.initialPayment.expiry=!0,d.ui.expiryError=!Stripe.card.validateExpiry(b,a),d.checkPay()},d.checkCardOwner=function(a){d.ui.initialPayment.owner=!0,d.ui.cardOwnerError=""===a||void 0===a,d.checkPay()},d.checkPay=function(){var a=d.ui,b=a.initialPayment.number&&a.initialPayment.expiry&&a.initialPayment.cvc&&a.initialPayment.owner,c=a.cardOwnerError||a.cvcError||a.expiryError||a.cardNumberError;d.ui.payDisable=!b||c},o.getOrder=function(a){return a?l.getOrder(a).then(function(a){d.orderData=a.data,("1"===d.orderData.session_type||"3"===d.orderData.session_type)&&(d.orderData.price=d.orderData.session_price*d.orderData.time_s.length),"2"===d.orderData.session_type&&(d.orderData.price=d.orderData.package_price),d.orderData.avatar_file_name=d.orderData.teacher_avatar_file_name,d.orderData.date=[];for(var b=0;b<d.orderData.time_s.length;b++){var c=d.orderData.time_s[b].split(" ")[1],e=Number(c.split(":")[1])+15*d.orderData.session_length,f=d.orderData.time_s[b].split(" ")[1],g=["TP017","TP018","TP019","TP020","TP021","TP022","TP023"],i=g[new Date(d.orderData.time_s[b].split(" ")[0]).getDay()];switch(e>=60?(f=Number(c.split(":")[0])+Math.floor(e/60),e=e%60||"00",f=f+":"+e):f=c.split(":")[0]+":"+e,d.orderData.student_im_type){case"1":d.orderData.communication="Skype";break;case"6":d.orderData.communication="Google Talk";break;case"7":d.orderData.communication="QQ";break;case"8":d.orderData.communication="Face time";break;case"9":d.orderData.communication="WeChat"}d.orderData.date.push({weekday:h.instant(i),days:d.orderData.time_s[b].split(" ")[0],hours:c+" - "+f})}return d.orderData}):void 0},d.toggleOrderDetails=function(){d.ui.showOrderDetails=!d.ui.showOrderDetails,document.body.clientWidth>=992&&g(function(){var a=document.querySelector(".match-height").clientHeight;document.querySelector(".match-col > .panel").style.minHeight=a+"px"},500)},d.addMoreCredits=function(){var b=a.open({size:"",templateUrl:"/views/finance/add.more.credits.html",controller:["additionalCreditsUSD","$modalInstance","$scope","$timeout",function(a,b,c,d){var e=0;c.moreCreditsUSD=a||100,c.creditsInvalidMin=!1,c.creditsInvalidMax=!1,c.creditsCurrency=(c.moreCreditsUSD*c.currentUser.currency_rate*10).toFixed(2),c.$watch("moreCreditsUSD",function(a,b){/^\d+$/.test(a)?c.creditsCurrency=(a*c.currentUser.currency_rate*10).toFixed(2):(c.moreCreditsUSD=b,c.creditsCurrency=(b*c.currentUser.currency_rate*10).toFixed(2))}),c.addCredits=function(a){a>1e3?(c.moreCreditsUSD=1e3,c.creditsInvalidMax=!0):10>a?(c.moreCreditsUSD=10,c.creditsInvalidMin=!0):b.close(a),d.cancel(e),e=d(function(){c.creditsInvalidMin=!1,c.creditsInvalidMax=!1},3e3)},c.increaseCredits=function(){c.moreCreditsUSD=c.moreCreditsUSD+10},c.decreaseCredits=function(){c.moreCreditsUSD=c.moreCreditsUSD-10}}],resolve:{additionalCreditsUSD:function(){return d.moreCreditsUSD}}});b.result.then(function(a){d.moreCreditsUSD=a,d.orderData.price-d.currentUser.payment_account.available_itc_usd<1e3?d.price=d.orderData.price-d.currentUser.payment_account.available_itc_usd+100*d.moreCreditsUSD:d.price=d.price+100*d.moreCreditsUSD;var b=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amount=b.amount,d.amountCurrency=b.amountCurrency,d.commission=b.commission})},d.clearAdditionalCredits=function(){d.orderData.price-d.currentUser.payment_account.available_itc_usd<1e3?d.price=1e3:d.price=d.price-100*d.moreCreditsUSD,d.moreCreditsUSD=0;var a=d.getBill(d.price,d.currentPaymentConfig,d.coupon,d.currentUser);d.amount=a.amount,d.amountCurrency=a.amountCurrency,d.commission=a.commission},o.loadCoupon=function(a){return a?l.getCoupons().get(d.coupon.params).then(function(b){angular.forEach(b.data.coupon_list,function(b){if(b.voucher_sn===Number(a)){var c=b.use_limit_itc>=1e3?b.use_limit_itc:1e3;d.price=f.min>b.use_limit_itc?d.price:c,d.coupon.selected=angular.copy(b),d.coupon.itc=b.voucher_value,d.coupon.type=b.voucher_condition}})}):void 0},o.redeem=function(a){if(a){d.coupon.selected={voucher_value:0,voucher_sn:0};var b={code:a,type:0,itc:d.price};return angular.extend(b,{use_type:f.usetype}),l.getCommentCode().get(b).then(function(b){var c=b.data;c.limit_usd>d.price?m.appendWithContent(h.instant("PM380")):(d.coupon.code=a,d.coupon.itc=c.itc,d.coupon.type=c.type)},function(){m.appendWithContent(h.instant("PM380"))})}},d.pay=function(){d.ui.loading=!0;var b=d.currentPaymentConfig.pay_type,e={amount:d.amount,price:d.price,coupon:d.coupon};if(d.params=n.getParams(b,e),"2"===b&&c.isOneStepPayment&&(d.params.paypal_remember_me=1),"Y"===b){var f=d.card;d.checkCardNumber(f.number),d.checkCVC(f.cvc),d.checkExpiry(f.exp_year,f.exp_month),d.ui.cardOwnerError=""===f.name||void 0===f.name,d.ui.cardNumberError||d.ui.cvcError||d.ui.expiryError||d.ui.cardOwnerError?d.ui.loading=!1:Stripe.card.createToken({number:f.number,cvc:f.cvc,exp_month:f.exp_month,exp_year:f.exp_year,name:f.name},o.stripeResponseHandler)}else l.pay(d.params).then(function(b){if(b&&b.data&&b.data.url)i.location.href=b.data.url;else if(b&&b.data&&b.data.html)d.ui.loading=!1,b.data.html=b.data.html.replace(/<img.+?src=('|")?([^'"]+)('|")?([^>]+)>/gim,""),b.data.html=b.data.html.replace(/<input.+?src=('|")?([^'"]+)('|")?([^>]+)>/gim,""),a.open({size:"",backdrop:"static",template:'<div class="modal-body"><span class="text-lb">'+b.data.html+"</span></div>",windowClass:"FriendRequest"});else if(b&&b.data&&b.data.order_id){d.ui.loading=!1;var e=d||c.$new();e.data=b.data,a.open({scope:e,size:"",backdrop:"static",templateUrl:"/views/finance/purchase.bank.html",windowClass:"purchase-bank"})}else b&&b.data.redirect_url&&(i.location.href=b.data.redirect_url)},function(a){a&&(d.ui.loading=!1,d.error=!0)})},o.stripeResponseHandler=function(a,b){b.error?(d.error=!0,d.ui.loading=!1,m.appendWithContent("Error: "+b.error.message),d.$digest()):(angular.extend(d.params,{stripeToken:b.id}),c.isOneStepPayment&&angular.extend(d.params,{stripeRememberMe:1}),l.pay(d.params).then(function(a){a&&a.data.order_id&&(c.currentUser.hasStripeList=!0,e.go("purchaseSucc",{order_id:a.data.order_id}))},function(a){switch(a.type){case"1":a.msg=h.instant("VGC300");break;case"2":a.msg=h.instant("VGC301");break;case"3":a.msg=h.instant("VGC302")}m.appendWithContent(a.msg)})["finally"](function(){d.ui.loading=!1}))},o.resizeCallBack=function(){if(document.body.clientWidth>=992){var a=document.querySelector(".match-height").clientHeight;document.querySelector(".match-col > .panel").style.minHeight=a+"px"}else document.querySelector(".match-col > .panel").removeAttribute("style")},o.init=function(){d.currentUser?(d.data={currency:d.currentUser.currency},f.orderid?o.getOrder(f.orderid).then(function(a){var b=a.price-d.currentUser.payment_account.available_itc_usd;d.price=1e3>b?1e3:b},function(a){m.appendWithContent(a.msg)}).then(function(){o.paymentConfig({},!0)}):f.voucherid?o.loadCoupon(f.voucherid).then(function(){o.paymentConfig({},!0)}):f.code?o.redeem(f.code).then(function(){o.paymentConfig({},!0)}):o.paymentConfig({},!0),o.initStripe()):(m.appendWithContent(h.instant("C0074")),g(o.init,3e3))},o.init(),g(function(){if(document.body.clientWidth>=992){var a=document.querySelector(".match-height").clientHeight;document.querySelector(".match-col > .panel").style.minHeight=a+"px"}},0),angular.element(i).bind("resize",o.resizeCallBack),d.$on("$destroy",function(){angular.element(i).unbind("resize",o.resizeCallBack)})}function OneStepCheckoutCtrl(a,b,c,d,e,f,g,h,i,j,k,l){function m(){B.price=isNaN(parseInt(e.min))?1e4:parseInt(e.min),B.price<1e3&&(B.price=1e3),B.currentUser=b.currentUser,B.coupon={selected:{voucher_value:0,voucher_sn:0},code:"",itc:0},B.helps=[{question:"PM449",value:1},{question:"PM461",value:2},{question:"PM463",value:3},{question:"PM465",value:4},{question:"PM467",value:5},{question:"PM469",value:6}],B.answers=["PM562","PM462","PM464","PM466","PM468",["PM470","PM471"]],B.payment.method=0,b.currentUser&&b.currentUser.payment_account?(B.data={currency:b.currentUser.currency},A.push(p()),A.push(n(e)),A.push(o()),A.push(l.init()),a.all(A)["catch"](function(a){j.appendWithContent(a)})["finally"](function(){B.loading=!1})):(j.appendWithContent(g.instant("C0074")),f(m,3e3))}function n(b){var c,d={},e={};return angular.isDefined(b.orderid)?i.getOrder(b.orderid).then(q)["catch"](function(a){j.appendWithContent(a.msg)}):angular.isDefined(b.voucherid)?(e.available=1,i.getCoupons().get(e).then(r)):angular.isDefined(b.code)?(d.code=b.code,d.type=0,d.itc=B.price,angular.extend(d,{use_type:b.usetype}),B.coupon.code=b.code,B.coupon.selected.voucher_sn=0,i.getCommentCode().get(d).then(s)["catch"](function(){j.appendWithContent(g.instant("PM380"))})):(c=a.defer(),c.resolve(),c.promise)}function o(){return i.paymentConfig().get().then(function(b){var c=b.data.top_pay_config_s;if(angular.isArray(c)&&c.length>0){y=c.find(function(a){return"Y"===a.pay_type}),z=c.find(function(a){return"2"===a.pay_type});var d=k.calBill(B.price,y,B.coupon);return B.amount=d.amount,B.amountCurrency=d.amountCurrency,B.commission=d.commission,b}return a.reject("Fail to get payment methods")})}function p(){return i.getOneStepList().then(function(a){B.stripeList=a.data.stripe,B.paypalList=a.data.paypal})}function q(a){var c,d,e,f,h,i,j;for(B.orderData=a.data,("1"===B.orderData.session_type||"3"===B.orderData.session_type)&&(B.orderData.price=B.orderData.session_price*B.orderData.time_s.length),"2"===B.orderData.session_type&&(B.orderData.price=B.orderData.package_price),B.orderData.avatar_file_name=B.orderData.teacher_avatar_file_name,B.orderData.date=[],c=0;c<B.orderData.time_s.length;c++){switch(e=B.orderData.time_s[c].split(" ")[1],f=Number(e.split(":")[1])+15*B.orderData.session_length,h=B.orderData.time_s[c].split(" ")[1],i=["TP017","TP018","TP019","TP020","TP021","TP022","TP023"],j=i[new Date(B.orderData.time_s[c].split(" ")[0]).getDay()],f>=60?(h=Number(e.split(":")[0])+Math.floor(f/60),f=f%60||"00",h=h+":"+f):h=e.split(":")[0]+":"+f,B.orderData.student_im_type){case"1":B.orderData.communication="Skype";break;case"6":B.orderData.communication="Google Talk";break;case"7":B.orderData.communication="QQ";break;case"8":B.orderData.communication="Face time";break;case"9":B.orderData.communication="WeChat"}B.orderData.date.push({weekday:g.instant(j),days:B.orderData.time_s[c].split(" ")[0],hours:e+" - "+h})}return d=B.orderData.price-b.currentUser.payment_account.available_itc_usd,B.price=1e3>d?1e3:d,B.orderData}function r(a){return angular.forEach(a.data.coupon_list,function(a){if(a.voucher_sn===Number(e.voucherid)){var b=a.use_limit_itc>=1e3?a.use_limit_itc:1e3;B.price=e.min>a.use_limit_itc?B.price:b,B.coupon.selected=angular.copy(a),B.coupon.itc=a.voucher_value,B.coupon.type=a.voucher_condition}}),B.coupon}function s(b){return b.data.limit_usd>B.price?a.reject("invalid coupon"):(B.coupon.itc=b.data.itc,B.coupon.type=b.data.type,B.coupon)}function t(){B.loading=!0,B.hasError=!1;var a={amount:B.amount,price:B.price,coupon:B.coupon},b=B.stripeList.concat(B.paypalList),c=b[B.payment.method].stripe_id?"Y":"2",d=k.getParams(c,a);return"Y"===c?d.stripeCardId=b[B.payment.method].stripe_id:d.paypal_reference_id=b[B.payment.method].reference_id,i.pay(d).then(u,v)["finally"](function(){B.loading=!1}),d}function u(a){d.go("purchaseSucc",{order_id:a.data.order_id})}function v(a){switch(B.hasError=!0,err.type){case"1":err.msg=g.instant("VGC300");break;case"2":err.msg=g.instant("VGC301");break;case"3":err.msg=g.instant("VGC302");break;default:err.msg=g.instant("PM649")}j.appendWithContent(err.msg)}function w(){B.orderid?d.go("sessionRequest",{priceId:B.orderData.course_price_id,length:B.orderData.session_length}):B.isGiftCard?d.go("giftcard"):d.go("recharge",{itc:B.price})}function x(){B.showOrderDetails=!B.showOrderDetails,document.body.clientWidth>=992&&f(function(){var a=document.querySelector(".match-height").clientHeight;document.querySelector(".match-col > .panel").style.minHeight=a+"px"},500)}var y,z,A=[],B=this;B.answers=[],B.changeOrder=w,B.coupon={},B.help={},B.helps=[],B.isGiftCard="giftcard"===e.type,B.img=e.img,B.loading=!0,B.orderID=e.orderid,B.pay=t,B.payment={},B.paypalList=[],B.price=1e4,B.processingFeeTip=g.instant("PM485")+"<br />"+g.instant("PM486"),B.showOrderDetails=!1,B.stripeList=[],B.subTotalTip=g.instant("PM487"),B.toggleOrderDetails=x,B.usetype=e.usetype,B.type=e.type,m(),c.$watch(function(){return B.payment.method},function(a,b){var c;b!==a&&(B.stripeList.concat(B.paypalList)[a].stripe_id&&(c=k.calBill(B.price,y,B.coupon),B.amount=c.amount,B.amountCurrency=c.amountCurrency,B.commission=c.commission),B.stripeList.concat(B.paypalList)[a].reference_id&&(c=k.calBill(B.price,z,B.coupon),B.amount=c.amount,B.amountCurrency=c.amountCurrency,B.commission=c.commission))})}function StripeServices(a,b,c){return{init:function(){var d=a.defer();if(b.Stripe)d.resolve("Stripe has already been loaded");else{var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://js.stripe.com/v2/",e.onload=e.onreadystatechange=function(){Stripe.setPublishableKey(c.stripeKey),d.resolve("Stripe has already been loaded")},e.onerror=function(){d.reject("Stripe load failed")},document.body.appendChild(e)}return d.promise}}}function PaymentService(a,b,c){return{calBill:function(b,c,d){var e,f,g,h;return h="3"===d.type&&d.selected.use_limit_itc<=b?b-d.itc:b,0>=h?(e=0,f=0,g="0"):(c.commission?(g=(h/100+c.base_fee)/(1-c.commission)-h/100,g>Math.round(100*g)/100&&(g=Math.round(100*(g+.01))/100)):g=c.base_fee,g=g.toFixed(2),e=100*g+h,f=(e/100).toFixed(2)*a.currentUser.currency_rate*1e3),{amount:e,amountCurrency:f,commission:g}},getParams:function(a,d){var e="3"===d.coupon.type?d.price-d.coupon.itc:d.price,f={itc_usd:e,pay_type:a};return"Y"===a&&angular.extend(f,{amount:d.amount,source_type:1}),b.orderid&&angular.extend(f,{source_type:b.type,unpay_id:b.orderid}),angular.extend(f,{use_type:b.usetype}),"giftcard"===b.type?angular.extend(f,{source_type:4,giftcard_order_id:c.get("giftcard_order_id")}):d.coupon.code?angular.extend(f,{common_code:angular.uppercase(d.coupon.code.replace(/[-\s]/g,""))}):d.coupon.selected.use_limit_itc<=d.price&&angular.extend(f,{spec_code:d.coupon.selected.voucher_sn}),f}}}function NewTeacherListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){a!==ha&&(ha=a,a?c.subscribe(w):c.unsubscribe())}function w(c){function d(a){a?i.pro_count&&(i.pro_count=i.pro_count-1):i.tutor_count&&(i.tutor_count=i.tutor_count-1)}if(!(["j","k"].indexOf(c.type)<0)){var e=c.isotids,f="k"==c.type,g="1"==a.filter.teacher_type,h="0"==a.filter.teacher_type,i=a.statistics,j=a.items;if(L=a.filter.teach,f)b.profile(e).then(function(a){var b=a.data,c=1==b.is_pro,d=b.language_obj_s.map(function(a){return a.language});(""==L||d.includes(L))&&((g&&c||!g&&!c||h)&&_.filter(j,{id:e}).length<1&&j.push(b),c?i.pro_count=i.pro_count+1:i.tutor_count=i.tutor_count+1)});else if(j){var k=_.remove(j,{id:e});angular.forEach(k,function(a){var b=1==a.is_pro;d(b)})}}}a.$watch("currentUser.locale",function(b,c){if(b!==c){var d=b;"zh-tw"===b&&(d="zh_tw"),"zh-cn"===b&&(d="zh_cn"),j.use(d).then(function(){a.weekdays="",a.filter.weekday.forEach(function(b,c){switch(b){case"0":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0910"):a.weekdays=a.weekdays+j.instant("C0910")+", ";break;case"1":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0911"):a.weekdays=a.weekdays+j.instant("C0911")+", ";break;case"2":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0912"):a.weekdays=a.weekdays+j.instant("C0912")+", ";break;case"3":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0913"):a.weekdays=a.weekdays+j.instant("C0913")+", ";break;case"4":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0914"):a.weekdays=a.weekdays+j.instant("C0914")+", ";break;case"5":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0915"):a.weekdays=a.weekdays+j.instant("C0915")+", ";break;case"6":a.weekdays=a.weekdays+j.instant("C0916")}}),a.lans[0]={t:-1,v:"",name:H("C0027")},a.countries[0]={v:"",l:"Anywhere",name:H("C0029")}})}},!0),a.desktop=u.is("md, lg"),a.mobile=u.is("xs, sm"),a.desktop=u.on("md, lg",function(b){a.desktop=b}),a.mobile=u.on("xs, sm",function(b){a.mobile=b}),a.$watch("teacherPrice",function(b){a.currentUser&&a.currentUser.currency_rate&&(a.teacherPriceCurrency.min=(b.min/100).toFixed(2)*a.currentUser.currency_rate*1e3,a.teacherPriceCurrency.max=(b.max/100).toFixed(2)*a.currentUser.currency_rate*1e3)},!0),a.countries=angular.copy(KP.COUNTRRY_ARR),a.selectAvailability="time";var x=4,y=80;if(a.teacherPrice={min:x,max:y},a.teacherPriceCurrency={min:0,max:0},g.price_usd){var z=g.price_usd.split("-"),A=z[0],B=z[1];(isNaN(A)||4>A/100)&&(A=400),(isNaN(B)||B/100>80)&&(B=8e3),a.teacherPrice={min:A/100,max:B/100}}a.callbackFn=function(){a.$apply(function(){a.teacherPrice.min===x&&a.teacherPrice.max===y?a.filter.price_usd="":a.filter.price_usd=100*a.teacherPrice.min+"-"+100*a.teacherPrice.max})},a.removeSkill=function(){a.teacherSearchSkill.text="",a.filter.q=""},a.resetTags=function(){a.teacherPrice.min=x,a.teacherPrice.max=y,a.manycheck={now:"",within:["","","","","",""],weekday:["","","","","","",""],tags:["","","","",""]};for(var b=0;b<a.childTags.length;b++)a.childTags[b].checked=!1;a.filter={teach:a.filter.teach,speak:"",country:"",price_usd:"",teacher_type:0,tags:[],is_advanced:"",is_instant:"",is_native:"",is_video:"",is_trial:"",child_tags:[],within:[],minute_between:[],weekday:[],q:"",nick_keyword:a.filter.nick_keyword
},a.uiItems2={selected:a.countries[0]},a.uiItems1={selected:a.lans[0]}},a.removeTime=function(b){var c=[];a.teacherTimes.forEach(function(a){a!==b&&c.push(a)}),a.teacherTimes=c,a.manycheck.within.forEach(function(a,c,d){a===b&&(d[c]="")})},a.removeWeekday=function(b){for(var c=0;c<a.manycheck.weekday.length;c++)a.manycheck.weekday[c]===b&&(a.manycheck.weekday[c]="")},a.removeTags=function(b){var c=-1;a.manycheck.tags.some(function(a,d){return a===b?c=d:!1}),a.manycheck.tags[c]="",a.filter.tags.some(function(a,d){return a===b?c=d:!1}),"5"===b?a.childTags=[]:a.filter.tags.splice(c,1)},a.removeChildTags=function(b){var c=-1;a.childTags.some(function(a,d){return a.id===b.id?c=d:!1}),a.childTags[c].checked=!1,a.filter.child_tags.some(function(a,d){return Number(a)===Number(b.id)?c=d:!1}),a.filter.child_tags.splice(c,1)};var C="Popular",D="Other countries";a.recommendedCountries=function(b){var c=s.currentUser(),d=D;if(c&&c.learning_language){var e=c.learning_language,f=r[e]||[],g=[];if(a.filter.teach.toLowerCase()){g=r[a.filter.teach.toLowerCase()];for(var h=0;h<g.length;h++)if(b.l===g[h]){d=C;break}}else for(var h=0;h<f.length;h++)if(b.l===f[h]){d=C;break}}return"Anywhere"===b.l&&(d=""),d},a.popularCountryCount=0,a.recommendedMobileCountries=function(b){var c=s.currentUser(),d=D,e=[],f=[];if(c&&c.learning_language&&(e=r[c.learning_language]||[]),a.mobileUiItems&&a.mobileUiItems.selected.v.toLowerCase()){f=r[a.mobileUiItems.selected.v.toLowerCase()];for(var g=0;g<f.length;g++)if(b.l===f[g]){d=C,a.popularCountryCount=a.popularCountryCount+1;break}}else for(var g=0;g<e.length;g++)if(b.l===e[g]){d=C,a.popularCountryCount=a.popularCountryCount+1;break}return"Anywhere"===b.l&&(d=""),d},a.reverseOrderFilterFn=function(a){var b=null;return s.currentUser()&&3===a.length&&a[1].name===D&&(b=a[1],a[1]=a[2],a[2]=b),a};var E="Your languages",F="Other languages",G=4;a.recommendedLanguages=function(a){var b=s.currentUser(),c=F;if(b&&b.language_obj_s)for(var d=b.language_obj_s,e=0;e<d.length;e++)if(a.v===d[e].language&&d[e].level>G){c=E;break}return""===a.v&&(c=""),c},a.yourLanguages=0,a.recommendedMobileLanguages=function(b){var c=s.currentUser(),d=F;if(c&&c.language_obj_s)for(var e=c.language_obj_s,f=0;f<e.length;f++)if(b.v===e[f].language&&e[f].level>G){d=E,a.yourLanguages=a.yourLanguages+1;break}return""===b.v&&(d=""),d},a.reverseLangOrderFilterFn=function(a){var b=null,c=s.currentUser();return c&&c.language_obj_s&&c.language_obj_s.length&&a[1].name===F&&(b=a[1],a[1]=a[2],a[2]=b),a},1==g.type&&(a.changeText=!0);var H=j.instant,I=[];g.within&&("string"==typeof g.within?I.push(g.within):/\d+-\d+/.test(g.within.join(" "))?angular.forEach(g.within,function(a){switch(a){case"0-180":I.push("0-180");break;case"180-360":I.push("180-360");break;case"360-540":I.push("360-540");break;case"540-720":I.push("540-720");break;case"720-900":I.push("720-900");break;case"900-1080":I.push("900-1080");break;case"1080-1260":I.push("1080-1260");break;case"1260-1440":I.push("1260-1440")}}):angular.forEach(g.within,function(a,b){switch(a){case"N":I.push("0-180"),I.push("180-360");break;case"M":I.push("360-540"),I.push("540-720");break;case"A":I.push("720-900"),I.push("900-1080");break;case"E":I.push("1080-1260"),I.push("1260-1440")}}));var J=[];g.weekday&&angular.forEach(g.weekday,function(a,b){""!=a&&J.push(a)});var K=[];g.tags&&angular.forEach(g.tags,function(a,b){""!=a&&K.push(a)});var L=g.teach,M=g.from||g.country,N=g.is_native,O=g.is_instant,P=g.price_usd,Q=g.speak,R=g.teacher_type,S=g.child_tags,T=g.is_video,U=g.is_trial;if(P){var V=P.split("-")[0],W=P.split("-")[1];(isNaN(V)||4>V/100)&&(V=400),(isNaN(W)||W/100>80)&&(W=8e3),P=V+"-"+W}var X=g.nick_keyword,Y=g.q,Z=g.is_advanced;a.updateState=function(){0==a.manycheck.now&&(a.manycheck.now="");var b=[];angular.forEach(a.manycheck.within,function(a,c){""!=a&&b.push(a)});var c=[];angular.forEach(a.manycheck.weekday,function(a,b){""!=a&&c.push(a)});var e=[];angular.forEach(a.manycheck.tags,function(a,b){""!=a&&e.push(a)}),L=a.filter.teach,O=a.manycheck.now;var f={teach:a.filter.teach,country:a.filter.country,speak:a.filter.speak,is_native:a.filter.is_native,is_video:a.filter.is_video,is_trial:a.filter.is_trial,is_instant:a.manycheck.now,price_usd:a.filter.price_usd,teacher_type:a.filter.teacher_type,is_advanced:a.filter.is_advanced,tags:e,child_tags:a.filter.child_tags,within:b,weekday:c,nick_keyword:a.filter.nick_keyword,q:a.filter.q};L?d.go("teachersViaLanguage",f,{notify:!1,reload:!1,location:"replace"}):d.go("teachers",f,{notify:!1,reload:!1,location:"replace"})},a.$watch("filter",function(b,c){if(!angular.equals(b,c)){var d=JSON.parse(JSON.stringify(b)),e=JSON.parse(JSON.stringify(c));if(delete d._r,delete d.i_token,delete d.hl,delete d.page,delete e._r,delete e.i_token,delete e.hl,delete e.page,b.is_native&&b.is_advanced)return;angular.equals(d,e)||(a.updateState(),a.applyFilter())}},!0),a.$watch("manycheck",function(b,c){if(!angular.equals(b,c)&&!a.noLiveSearch){if(b.now&&!c.now)return a.manycheck.within=[],void(a.manycheck.weekday=[]);if((b.within.join("")&&!c.within.join("")||b.weekday.join("")&&!c.weekday.join(""))&&b.now===c.now&&"N"===b.now)return void(a.manycheck.now="");a.applyFilter(),a.updateState()}},!0),a.$watch("mobileFilters.manyCheck",function(b){a.mobileTimeTags=[],a.mobileSkillsTags=[],a.mobileDaysTags=[],b.tags.forEach(function(b){""!==b&&a.mobileSkillsTags.push(b)}),b.within.forEach(function(b){""!==b&&a.mobileTimeTags.push(b)}),b.weekday.forEach(function(b){""!==b&&a.mobileDaysTags.push(b)})},!0),a.$watch("childTags",function(b){a.childTagsChecked=0,b.forEach(function(b){b.checked&&(a.childTagsChecked=a.childTagsChecked+1)})},!0),a.openTeacherProfile=function(a,b){"a"!==a.target.tagName.toLowerCase()&&KP.Utils.openUrlWithNewTab(d.href("teacher",{id:b.id}))},a.teacherApply=function(){return d.transitionTo("apply"),m.getEmptyPromise()},a.navToTeacherTag=function(a,b,c,e){d.go("teacherTags",{id1:parseInt(b,10),id2:c,name:e.translate().replace(" ","_")}),a.preventDefault(),a.stopPropagation()};var $=angular.copy(KP.LANSEL);angular.forEach($,function(a){a.name=H(a.v)}),a.lans=_.union([{t:-1,v:"",name:H("C0027")}],$);var aa=angular.copy(KP.COUNTRRY_ARR);angular.forEach(aa,function(a){a.name=H(a.v)}),a.countries=_.union([{v:"",l:"Anywhere",name:H("C0029")}],aa),a.teachLans=[{v:"",name:H("C0027")}],b.getTeachLans().get().then(function(b){var c=[{v:"",name:H("C0027")}];angular.forEach(KP.LANSEL,function(a){angular.forEach(b.data,function(b){return a.v==b?(c.push({v:b,name:H(b)}),!1):void 0})});for(var d=0;d<c.length;d++)if(c[d].v===a.filter.teach){a.uiItems={selected:c[d]},a.mobileUiItems={selected:c[d]};break}a.teachLans=c}),a.uiSelected=function(b,c){a.changeText=!1,a.uiItemsFilter="",a.noLiveSearch||(a.filter.teach=b.v),a.getTagChild(),a.popularCountryCount=0,a.$broadcast("refreshDropdown.from")},a.uiSelected1=function(b,c){a.filter.speak=b.v},a.uiSelected11=function(b,c){a.filter.speak=b.v},a.uiSelected2=function(b,c){a.filter.country=b.v},a.uiSelected22=function(b,c){a.filter.country=b.v};var ba=1;a.filter={teach:L||"",speak:Q||"",country:M||"",price_usd:P||"",teacher_type:R||0,tags:K||"",is_advanced:Z||"",is_instant:O||"",is_native:N||"",is_video:T||"",is_trial:U||"",child_tags:"",minute_between:I||"",weekday:J||"",nick_keyword:X||"",q:Y||""},a.teacherSearchName={text:X||""},a.teacherSearchSkill={text:Y||""},"professional"==a.filter.teach.toLowerCase()?a.filter.country?(a.filter.teach=a.filter.country,a.filter.country=""):a.filter.teach="":"tutoring"==a.filter.teach.toLowerCase()&&(a.filter.country?(a.filter.teach=a.filter.country,a.filter.country=""):a.filter.teach="",a.filter.teacher_type=2);for(var ca=0;ca<a.lans.length;ca++)if(a.lans[ca].v===a.filter.speak){a.uiItems1={selected:a.lans[ca]},a.mobileUiItems1={selected:a.lans[ca]};break}for(var ca=0;ca<a.countries.length;ca++)if(a.countries[ca].v===a.filter.country){a.uiItems2={selected:a.countries[ca]},a.mobileUiItems2={selected:a.countries[ca]};break}"tutor"===g.teach&&(a.filter.teacher_type=2),"professional"===g.teach&&(a.filter.teacher_type=1),a.childTags=[],a.tags=[{},{t:"ST701",d:"ST711"},{t:"ST702",d:"ST713"},{t:"ST703",d:"ST715"},{t:"ST704",d:"ST717"},{t:"ST705",d:"ST719"}],a.mobileFilters={},a.manycheck={now:"",within:["","","","","","","",""],weekday:["","","","","","",""],tags:["","","","",""]},a.mobileFilters.manyCheck=angular.copy(a.manycheck),a.mobileFilters.q=a.filter.q,a.tagFlag=!1,a.staFlag=!1,a.listFlag=!1,angular.forEach(I,function(b,c){switch(b){case"0-180":a.manycheck.within[0]="0-180";break;case"180-360":a.manycheck.within[1]="180-360";break;case"360-540":a.manycheck.within[2]="360-540";break;case"540-720":a.manycheck.within[3]="540-720";break;case"720-900":a.manycheck.within[4]="720-900";break;case"900-1080":a.manycheck.within[5]="900-1080";break;case"1080-1260":a.manycheck.within[6]="1080-1260";break;case"1260-1440":a.manycheck.within[7]="1260-1440"}}),angular.isDefined(J)&&angular.forEach(J,function(b){switch(b){case"0":a.manycheck.weekday[1]="0";break;case"1":a.manycheck.weekday[2]="1";break;case"2":a.manycheck.weekday[3]="2";break;case"3":a.manycheck.weekday[4]="3";break;case"4":a.manycheck.weekday[5]="4";break;case"5":a.manycheck.weekday[6]="5";break;case"6":a.manycheck.weekday[7]="6"}}),angular.isDefined(O)&&(0==O?a.manycheck.now="":a.manycheck.now="N"),a.changeTeacherLevel=function(b){"advanced"===b&&a.filter.is_native?a.filter.is_native="":"native"===b&&a.filter.is_advanced?a.filter.is_advanced="":"all"===b&&angular.extend(a.filter,{is_advanced:"",is_native:""})},a.noLiveSearch=!1,a.setMobileFilters=function(){a.noLiveSearch=!0,a.$apply(function(){a.mobileUiItems={selected:a.uiItems.selected},a.mobileUiItems1={selected:a.uiItems1.selected},a.mobileUiItems2={selected:a.uiItems2.selected},a.mobileUiItems1={selected:a.uiItems1.selected},a.mobileFilters.is_advanced=a.filter.is_advanced,a.mobileFilters.is_native=a.filter.is_native,a.mobileFilters.is_instant=angular.copy(a.filter.is_instant),a.mobileFilters.teacherType=a.filter.teacher_type,a.mobileFilters.manyCheck=angular.copy(a.manycheck),a.mobileFilters.q=a.filter.q}),a.$broadcast("refreshDropdown.from")},a.resetInstantTutoring=function(){a.mobileFilters.manyCheck.now=""},a.resetDaysAndTime=function(){a.mobileFilters.manyCheck.within=["","","","","","","",""],a.mobileFilters.manyCheck.weekday=["","","","","","",""]},a.resetParams=function(){a.noLiveSearch=!1},a.resetTeacherCountry=function(){a.filter.country="",a.uiItems2={selected:a.countries[0]}},a.resetTeacherSpeak=function(){a.filter.speak="",a.uiItems1={selected:a.lans[0]}},a.applyMobileFilter=function(){var b=[],c=[],d=[],e="";e=a.teacherPrice.min===x&&a.teacherPrice.max===y?"":100*a.teacherPrice.min+"-"+100*a.teacherPrice.max,a.mobileFilters.manyCheck.tags.forEach(function(a){""!==a&&b.push(a)}),a.childTags.forEach(function(a){a.checked&&c.push(a.id)}),a.uiItems={selected:a.mobileUiItems.selected},a.uiItems1={selected:a.mobileUiItems1.selected},a.uiItems2={selected:a.mobileUiItems2.selected},a.manycheck=angular.copy(a.mobileFilters.manyCheck),a.noLiveSearch=!1,angular.forEach(a.manycheck.weekday,function(a,b){""!=a&&d.push(a)}),a.filter={teach:a.mobileUiItems.selected.v,speak:a.mobileUiItems1.selected.v,country:a.mobileUiItems2.selected.v,price_usd:e,teacher_type:a.mobileFilters.teacherType,tags:b,is_instant:a.mobileFilters.is_instant,is_advanced:a.mobileFilters.is_advanced,is_native:a.mobileFilters.is_native,is_video:"",is_trial:"",child_tags:c,weekday:d,minute_between:a.teacherTimes.join(","),page:1,q:a.mobileFilters.q,nick_keyword:a.filter.nick_keyword}},a.changeMobileTeacherLevel=function(b,c){"advanced"===c?(a.mobileFilters.is_advanced="1",a.mobileFilters.is_native=""):"native"===c?(a.mobileFilters.is_advanced="",a.mobileFilters.is_native="1"):"all"===c&&(a.mobileFilters.is_advanced="",a.mobileFilters.is_native="")},a.checkChildTags=function(){if("5"!==a.mobileFilters.manyCheck.tags[4])return void(a.childTags=[]);var b=[];angular.forEach(KP.teacher_tag_child,function(c,d){c.language==a.filter.teach&&"5"==c.teacher_tag_code&&(c.checked=!1,b.push(c))}),a.childTags=b},a.clearFilters=function(){a.teacherPrice.min=x,a.teacherPrice.max=y;for(var b=0;b<a.childTags.length;b++)a.childTags[b].checked=!1;a.mobileUiItems1.selected=a.lans[0],a.mobileUiItems2.selected=a.countries[0],a.mobileFilters={is_native:"",is_advanced:"",is_instant:"",teacherType:0,manyCheck:{now:"",within:["","","","","","","",""],weekday:["","","","","","",""],tags:["","","","",""]},q:""}},a.loadedFlag=function(){return a.tagFlag&&a.staFlag&&a.listFlag};var da=function(){if("5"!==a.manycheck.tags[4])return void(a.childTags=[]);var b=[];angular.forEach(KP.teacher_tag_child,function(c,d){c.language==a.filter.teach&&"5"==c.teacher_tag_code&&(c.checked=!1,b.push(c))}),a.childTags=b};a.getChildTagItem=function(a){var b={abbr:"",full_name:"",language:"",teacher_tag_code:"",id:0};return angular.forEach(KP.teacher_tag_child,function(c,d){c.id.toString()==a.toString()&&(b=c)}),b};var ea=function(){KP.teacher_tag_child?da():ua(da)};a.getTagChild=ea,a.cancelChildTags=function(){angular.forEach(a.childTags,function(a){a.checked=!1})},a.statistics={tutor_count:0,pro_count:0};var fa=function(){a.teacherTimes=[],a.filter.weekday=[],a.filter.tags=[],a.filter.child_tags=[],a.filter.is_instant=a.manycheck.now||O?1:"",a.instantFilter=a.manycheck.now||O?1:"",v(a.manycheck.now?!0:!1),angular.forEach(a.manycheck.within,function(b,c){""!=b&&a.teacherTimes.push(b)}),a.filter.minute_between=a.teacherTimes.join(","),a.teacherAvailableTime="",a.teacherTimes.forEach(function(b,c){var d=b.match(/\d+/g);a.teacherTimes.length-1===c?a.teacherAvailableTime=a.teacherAvailableTime+d[0]/60+" - "+d[1]/60:a.teacherAvailableTime=a.teacherAvailableTime+d[0]/60+" - "+d[1]/60+", "}),angular.forEach(a.manycheck.weekday,function(b,c){""!=b&&a.filter.weekday.push(b)}),a.weekdays="",a.filter.weekday.forEach(function(b,c){switch(b){case"0":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0910"):a.weekdays=a.weekdays+j.instant("C0910")+", ";break;case"1":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0911"):a.weekdays=a.weekdays+j.instant("C0911")+", ";break;case"2":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0912"):a.weekdays=a.weekdays+j.instant("C0912")+", ";break;case"3":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0913"):a.weekdays=a.weekdays+j.instant("C0913")+", ";break;case"4":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0914"):a.weekdays=a.weekdays+j.instant("C0914")+", ";break;case"5":a.filter.weekday.length-1===c?a.weekdays=a.weekdays+j.instant("C0915"):a.weekdays=a.weekdays+j.instant("C0915")+", ";break;case"6":a.weekdays=a.weekdays+j.instant("C0916")}}),S&&a.childTags.length>0&&!a.changeChildTags&&angular.forEach(S,function(b,c){a.childTags[b-1].checked=!0}),angular.forEach(a.childTags,function(b,c){b.checked&&a.filter.child_tags.push(b.id)}),angular.isDefined(K)&&!a.changetags&&angular.forEach(K,function(b){switch(b){case"1":a.manycheck.tags[0]="1";break;case"2":a.manycheck.tags[1]="2";break;case"3":a.manycheck.tags[2]="3";break;case"4":a.manycheck.tags[3]="4";break;case"5":a.manycheck.tags[4]="5"}}),angular.forEach(a.manycheck.tags,function(b,c){""!=b&&a.filter.tags.push(b)})},ga=function(){var b,c;angular.forEach(KP.LANSEL,function(a){a.v==L&&(b=1)}),angular.forEach(KP.COUNTRRY_ARR,function(b){(b.v==a.filter.country||b.l==a.filter.countr)&&(c=1)}),R&&0!=R&&1!=R&&2!=R&&(a.filter.teacher_type=1),N&&0!=N&&1!=N&&(a.filter.is_native=0),Z&&0!=Z&&1!=Z&&(a.filter.is_advanced=""),(b&&1!=b||c&&1!=c)&&(b&&1!=b&&(a.filter.teach=""),c&&1!=c&&(a.filter.country=""),L?d.go("teachersViaLanguage",{teach:a.filter.teach,country:a.filter.country,speak:Q,is_native:N,is_advanced:Z,is_video:T,is_instant:O,price_usd:P,teacher_type:a.filter.teacher_type,tags:K,child_tags:S,within:I,weekday:J},{reload:!1,location:"replace",notify:!1}):d.go("teachers",{teach:a.filter.teach,country:a.filter.country,speak:Q,is_native:N,is_advanced:Z,is_video:T,is_instant:O,price_usd:P,teacher_type:a.filter.teacher_type,tags:K,child_tags:S,within:I,weekday:J},{reload:!1,location:"replace",notify:!1}))},ha=!1,ia="dashboard.onboarding",ja=p.cookie.get(ia),ka="dashboard.mail.search",la=p.cookie.get(ka),ma="groupC.search",na=p.cookie.get(ma),oa="groupD.search1",pa=p.cookie.get(oa);if(ja&&1==ja.onboarding)a.filter.speak=ja.teacher_speaks,a.filter.teach=ja.teaching_language,a.uiItemsFilter=H(a.filter.teach),a.filter.speak&&(a.filter.is_native=1),ja.onboarding=0,p.cookie.remove(ia,ja);else if(la&&1==la.mail)a.filter.speak=la.speak_language,a.filter.teach=la.learn_language,a.uiItemsFilter=H(a.filter.teach),p.cookie.remove(ka,la);else if(na&&ja){a.filter.speak=ja.teacher_speaks,a.filter.teach=ja.teaching_language;var qa=parseInt(na.teacher_tags)+1;a.manycheck.tags[na.teacher_tags]=qa.toString(),a.filter.country=na.teacher_cou,angular.isDefined(na.teacher_pro)&&(a.filter.teacher_type=na.teacher_pro),a.filter.speak&&(a.filter.is_native="1"),a.uiItemsFilter=H(a.filter.teach),p.cookie.remove(ma,na),p.cookie.remove(ia,ja)}else if(na&&!ja&&!la&&o.currentUser){angular.forEach(o.currentUser.language_obj_s,function(b){0==b.is_learning&&7==b.level&&(a.filter.speak=b.language)}),a.filter.teach=a.currentUser.learning_language;var qa=parseInt(na.teacher_tags)+1;a.manycheck.tags[na.teacher_tags]=qa.toString(),a.filter.country=na.teacher_cou,angular.isDefined(na.teacher_pro)&&(a.filter.teacher_type=na.teacher_pro),a.filter.speak&&(a.filter.is_native="1"),a.uiItemsFilter=H(a.filter.teach),p.cookie.remove(ma,na)}else if(na&&la){a.filter.speak=la.teacher_speaks,a.filter.teach=la.teaching_language;var qa=parseInt(na.tags)+1;a.manycheck.tags[na.tags]=qa.toString(),a.filter.country=na.country,angular.isDefined(na.teacher_pro)&&(a.filter.teacher_type=na.teacher_pro),a.filter.speak&&(a.filter.is_native="1"),a.uiItemsFilter=H(a.filter.teach),p.cookie.remove(ma,na),p.cookie.remove(ka,la)}else if(pa){a.filter.speak=pa.speak_language,a.filter.teach=pa.learn_language;var qa=parseInt(pa.teacher_tag)+1;a.manycheck.tags[pa.teacher_tag]=qa.toString(),a.filter.country=pa.teacher_country,angular.isDefined(pa.prefer_pro)?0==pa.prefer_pro?a.filter.teacher_type="2":1==pa.prefer_pro&&(a.filter.teacher_type="1"):a.filter.teacher_type="0",a.uiItemsFilter=H(a.filter.teach),angular.isDefined(pa.native_language)&&(a.filter.is_native="1"),angular.isDefined(pa.offer_trial)&&(a.filter.is_trial="1"),p.cookie.remove(oa,pa)}else o.currentUser&&o.currentUser.learning_language?(a.filter.teach=o.currentUser.learning_language,a.uiItemsFilter=H(o.currentUser.learning_language)):a.uiItemsFilter="";a.$watch("currentUser",function(b,c){b===c||a.filter.teach||("object"!=typeof c&&(a.filter.teach=b.learning_language,a.uiItemsFilter=H(b.learning_language)),"object"==typeof c&&b.learning_language!==c.learning_language&&(a.filter.teach=b.learning_language,a.uiItemsFilter=H(b.learning_language)))},!0);var ra=function(b,c){a.noStatFlag||(fa(),a.staFlag=!1,a.statistics.pro_count=b,a.statistics.tutor_count=c,a.staFlag=!0)},sa=function(c){a.listFlag=!1,1==c&&(a.items=null),a.meta={},a.filter.page=c,fa(),ga();var d=function(){var d=angular.copy(a.filter);b.getTeachersV2().get(d).then(function(b){var d=a.items;a.isNaN=isNaN,angular.forEach(b.data,function(a){"0.0"==a.teacher_info_obj.pro_rating&&(a.teacher_info_obj.pro_rating=a.teacher_info_obj.tutor_rating)}),d=d&&1!=c?_.union(d,b.data):b.data,d=_.unique(d,"id");a.items=d,a.meta=b.meta,ra(b.meta.statistics_info.pro_count,b.meta.statistics_info.tutor_count)})["finally"](function(){a.loadMoreFlag=!1,a.listFlag=!0,a.noStatFlag=!1})};d()};if(g.id2){a.filter.teacher_type=0;var ta=function(){KP.teacher_tag_child?(angular.forEach(KP.teacher_tag_child,function(b,c){b.id==g.id1&&(a.uiItems={selected:{t:-1,v:b.language,name:H(b.language)}},a.filter.teach=b.language)}),angular.forEach(KP.teacher_tag_child,function(b,c){b.id==g.id1?(b.checked=!0,a.childTags.push(b)):b.language==a.filter.teach&&(b.checked=!1,a.childTags.push(b))}),a.manycheck.tags[4]="5",sa(ba)):i(ta,200)};ta()}else g.id1&&(a.filter.teacher_type=0,a.manycheck.tags[g.id1-1]=g.id1.toString()),sa(ba);a.loadMore=function(){return a.loadMoreFlag=!0,sa(++ba)},a.applyFilter=function(){a.filter.tags!=a.manycheck.tags&&(a.changetags=1);var b=[];a.childTags&&(angular.forEach(a.childTags,function(a,c){1==a.checked&&(b[c]=a.id)}),a.filter.child_tags.length!=b.length&&(a.changeChildTags=1)),a.noStatFlag||(a.statistics.pro_count=0,a.statistics.tutor_count=0),ba=1,sa(ba)},a.selAvailabilities="",a.getAvailabilityCount=function(){var b=0,c="";return a.manycheck.now?(b++,a.selAvailabilities=H("M0113"),b):c},a.setAllSearch=function(){a.manycheck.now?a.filter.teacher_type=0:a.filter.teacher_type=1,a.uiItemsFilter&&(a.uiItemsFilter="")},a.getTagsCount=function(){var b=0;a.manycheck.tags[0]&&b++,a.manycheck.tags[1]&&b++,a.manycheck.tags[2]&&b++,a.manycheck.tags[3]&&b++,a.manycheck.tags[4]&&b++;for(var c=0;c<a.childTags.length;c++)a.childTags[c].checked&&b++;return b},a.addFavorites=function(b,c){return b.stopPropagation(),a.currentUser?void(c.is_favourite&&1==c.is_favourite?l.favourite().remove({teacher_id:c.id}).then(function(a){c.is_favourite=0}):(l.favourite().post({teacher_id:c.id}).then(function(a){c.is_favourite=1}),o.currentUser.has_teacher=1)):void n.open()},a.rateTitle=function(a){return H("TP014")+": "+a},a.scheduleRecommendation=function(a){k.open(a,0,0,3,1)};var ua=function(c){a.tagFlag=!1,KP.teacher_tag_child?(S&&(da(),a.applyFilter()),a.tagFlag=!0):b.fetchTagChild().then(function(a){a&&a.data&&(KP.teacher_tag_child=a.data,c&&c())}).then(function(){(S||-1!==K.indexOf("5"))&&(da(),a.applyFilter())})["finally"](function(){a.tagFlag=!0})};ua(),a.teacherNameSearch=function(b){a.filter.nick_keyword=b,a.filter.q=a.teacherSearchSkill.text},a.teacherSkillSearch=function(b){a.filter.nick_keyword=a.teacherSearchName.text,a.filter.q=b}}function wizardButtonDirective(a){angular.module("kp.session").directive(a,function(){return{restrict:"A",replace:!1,require:"^ngSteps",link:function(b,c,d,e){c.on("click",function(c){c.preventDefault(),b.$apply(function(){b.$eval(d[a]),e[a.replace("step","").toLowerCase()]()})})}}})}function italkiAutocompleteController(a,b){function c(a){a.stopPropagation(),e.active=!0,e.items=[]}function d(a){e.items=[],a&&(e.value.text=a),b.search({text:e.value.text})}var e=this;e.activate=c,e.active=!1,e.items=[],e.placeholder=b.placeholder,e.search=d,e.value=b.value}function italkiAutocompleteDirective(a){return{restrict:"EA",scope:{placeholder:"@",search:"&",value:"="},templateUrl:"/views/kp/autocomplete.html",controller:"italkiAutocompleteController",controllerAs:"autocomplete",compile:function(){return function(b,c,d,e){function f(){e.active&&(e.items=[],e.active=!1,b.$apply())}a.on("click",f),b.$on("$destroy",function(){a.off("click",f)})}}}}function userMustItemFirstCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){switch(b.step){case"fb":b.User_obj=angular.extend({password:"",email:""},b.meta),angular.extend(b.User_obj,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage}),a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"});break;case"wechat":b.Wechat_User_obj=angular.extend({password:"",email:""},b.meta),angular.extend(b.Wechat_User_obj,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage}),a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"});break;case"1":b.emailDiv=0,b.user=a.currentUser,b.NewObj={password:"",email:b.user.email},a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"});break;case"2":case"3":b.step2()}}b.step=m,b.meta=n,b.lanset=0;var p=angular.copy(KP.COUNTRRY_ARR);angular.forEach(p,function(a){a.name=e.instant(a.l)}),b.countries=p,b.doneFb=function(){return b.unable=1,k.loginViaFBNoEmail(b.User_obj).then(function(){b.step=2,b.step2()},function(a){b.Mailerror=a,b.unable=0})},b.doneWechat=function(){b.wechatUnable=1,k.loginWechat(b.Wechat_User_obj).then(function(a){return b.step=2,b.step2(),a},function(a){b.wechatUnable=0,b.Mailerror=a})},b.doneFb1=function(){return b.doPwd=!0,k.loginViaFBEmailAndPassword(b.NewObj).then(function(){return b.NewObj.email==a.currentUser.email&&(b.email_verfied=1),b.user.email=b.NewObj.email,a.currentUser=b.user,a.currentUser.no_password=0,b.step=2,b.step2(),KP.API.SUCC},function(a){b.Mailerror=a})},b.checkCTZones=function(){if(!b.user.living_country_id_new)return b.user.living_country_id_new=b.user.living_country_id,b.firtFlag=0,void(b.showNotMatch=1);var a=b.user.living_country_id_new,c=KP.ct_zone[a].zones,d=b.user.timezone_new,e="",f=1;angular.forEach(KP.timezones,function(a){return a.v==d?(e=a.vl,!0):void 0}),angular.forEach(c,function(a){return a==e?(f=0,!0):void 0}),b.showNotMatch=f,f&&b.firtFlag&&(b.user.living_country_id_new=null),b.firtFlag=0},b.checkTime=function(){var a=moment(),c=a.clone(),d="",e=b.user.timezone_new;if(b.timezoneMatch=0,angular.forEach(KP.timezones,function(a){return a.v==e?(d=a.vl,!0):void 0}),c.tz(d),b.m1=a,b.m2=c,a.format()==c.format()&&(b.timezoneMatch=1),b.firstCheckTime&&!b.timezoneMatch){b.user.living_country_id_new=null;for(var f=0;f<KP.timezones.length;f++)if(c.tz(KP.timezones[f].vl),a.format()==c.format()){b.user.timezone_new=KP.timezones[f].v,b.timezoneMatch=1;break}}b.firstCheckTime=0,b.checkCTZones()},b.done=function(c){if(c){var d;b.do2Flag=!0,b.searchObj={teaching_language:b.selObj.learnLan,teacher_speaks:b.selObj.speakLan,onboarding:1};var e="dashboard.onboarding";j.one("account/onboardingtest/check").get({learn_language:b.selObj.learnLan,speak_language:b.selObj.speakLan}).then(function(a){l.cookie.set(e,{teaching_language:a.data.filter_condition.learn_language,teacher_speaks:a.data.filter_condition.speak_language,onboarding:1})}),d=b.selObj.learnLan?{language:[b.selObj.speakLan,b.selObj.learnLan],level:[7,0],is_learning:[0,1],is_primary:[0,1]}:{language:[b.selObj.speakLan],level:[7],is_learning:[0],is_primary:[0]},f.saveLans(d).then(function(c){c.data.success&&(g.updateUser({learningLanguage:b.selObj.learnLan}),b.lanset=1,a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/location",title:"Onboarding - Location"}))},function(){b.do2Flag=!1})}},b.done_ctzones=function(){b.user.timezone_new&&b.user.living_country_id_new&&(b.do2Flag_2=!0,f.setCountryTimezone().post({timezone:b.user.timezone_new,living_country_id:b.user.living_country_id_new}).then(function(c){c.data.success&&(b.user.timezone=b.user.timezone_new,b.user.living_city_id=b.user.living_city_id_new,b.currentUser.register_status=3,delete b.user.timezone_new,delete b.user.living_city_id_new,("2"===b.step||"3"===b.step)&&(b.step=3),"groupD1"===b.step&&(b.lanset="2"),g.updateUser({location:b.user.living_country_id_new.translate()}),a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/preferences",title:"Onboarding - Preferences"}))},function(){b.do2Flag_2=!1}))},b.step2=function(){b.user=a.currentUser,b.user&&b.user.language_obj_s&&b.user.language_obj_s.length>0&&(b.lanset=1),b.user.timezone_new=b.user.timezone,b.user.living_country_id_new=b.user.living_country_id,b.firtFlag=1,b.firstCheckTime=1,KP.timezones?(b.timezones=KP.timezones,b.checkTime()):f.getTimezones().then(function(a){b.timezones=a.data,KP.timezones=a.data,b.checkTime()}),b.lans=KP.LANSEL,b.selObj={speakLan:"",learnLan:""},b.selObj1={findT:"",findF:""},b.showOne=!1,b.showTwo=!1,a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/languages",title:"Onboarding - Languages"})},b.done1=function(){b.showOne=""===b.selObj1.findT,b.showTwo=""===b.selObj1.findF,b.showOne||b.showTwo||(b.do3Flag=!0,j.one("account/contact-permission").post("",{find_teacher:b.selObj1.findT,allow_listing:b.selObj1.findF}).then(function(c){if(c.data.success){b.currentUser.register_status=4;var d="onboarding.group_name",e=l.cookie.get(d);"c"===e?(j.one("account/onboardingtest").post("",{is_finish:0}).then(function(a){return KP.API.SUCC},function(a){return KP.API.ERROR}),b.step=5,a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/letsfindteacher",title:"Onboarding - Lets Find Teacher"})):"b"===e&&(b.step=4,g.updateUser({obTeacherInterest:b.selObj1.findT}),k.autoLogin(),a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/email",title:"Onboarding - Email"}))}}))},b.done2=function(){angular.isDefined(b.email_verfied)?a.currentUser.register_status=255:b.currentUser.register_status=4,b.$close(),c.go("teachers")},b.done3=function(){b.teacher_country={teacher_cou:[]},b.selObj?b.teacher_country.teacher_cou=i[b.selObj.learnLan]||[]:a.currentUser.learning_language&&(b.teacher_country.teacher_cou=i[a.currentUser.learning_language]||[]),b.teacher_country.teacher_cou.push({v:"OB208",l:"I do not have a preference"}),b.step=6,b.selTeacher={teacher_pro:"",teacher_cou:"",teacher_tags:""},a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/provscom",title:"Onboarding - Pro vs Community"})},b.done4=function(){b.step=7,a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/teachercountry",title:"Onboarding - Teacher Country"})},b.done5=function(){b.step=8,a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/tags",title:"Onboarding - Tags"})},b.done6=function(){angular.isDefined(b.email_verfied)&&4==a.currentUser.register_status&&(a.currentUser.register_status=255),"OB208"==b.selTeacher.teacher_cou&&(b.selTeacher.teacher_cou=""),"5"==b.selTeacher.teacher_tags&&(b.selTeacher.teacher_tags=""),l.cookie.set("groupC.search",b.selTeacher),j.one("account/onboardingtest").post("",{is_finish:1,tags:b.selTeacher.teacher_tags,country:b.selTeacher.teacher_cou,teacher_type:b.selTeacher.teacher_pro}).then(function(a){return b.step=9,KP.API.SUCC},function(a){return KP.API.ERROR})},b.openModalInstance=function(){h.open()},b.checkEmail=function(){b.myFormFb.mail=b.myFormFb.fb_email.$invalid},b.setPassword=function(){b.myFormFb.password=b.myFormFb.fb_password.$invalid},o()}angular.module("italki.directives",[]),angular.module("italki.directives").directive("italkiClickWithSpinnerOne",["$parse","ShowSaveMsg","EmailNotActive","$translate","$timeout","LoginService",function(a,b,c,d,e,f){return{restrict:"A",templateUrl:"/views/common/italki.click.with.spinner.html",scope:!0,compile:function(){return function(c,e,f){var g=d.instant,h=a(f.italkiClickWithSpinnerOne);c.stext=f.stext,c.stext||(c.stext="C0045"),"MH046"!=c.stext&&(c.btn=!0),c.noe=f.noe,e.on("click",function(a){var d=h(c,{$event:a});e.is("button");if(e.addClass("el-loading"),d){var i=f.smsg?f.smsg:g("C1002"),j=f.fmsg?f.fmsg:g("C1015");"C1002"==i&&(i=g("C1002"),"C1002"==i&&(i="Updated successfully")),"C1015"==i&&(i=g("C1015"),"C1015"==i&&(i="Update failed.")),e.attr("disabled","disabled"),d.then(function(a){a==KP.API.SUCC?b.open(e,i):a==KP.API.ERROR&&b.open(e,j)},function(a){})}})}}}}]).directive("italkiClickWithSpinner",["$parse","ShowSaveMsg","EmailNotActive","$translate","$timeout","LoginService",function(a,b,c,d,e,f){return{restrict:"A",templateUrl:"/views/common/italki.click.with.spinner.html",scope:!0,compile:function(){return function(g,h,i){var j=d.instant,k=a(i.italkiClickWithSpinner),l=i.nologin,m=i.noact;g.stext=i.stext,g.stext||(g.stext="C0045"),"MH046"!=g.stext&&(g.btn=!0),g.noe=i.noe,h.on("click",function(a){if(!(!l&&f.open()||!m&&c.open())){var d=k(g,{$event:a}),n=h.is("button");if(d&&d.then&&(h.addClass("el-loading"),d)){var o=i.smsg?i.smsg:j("C1002"),p=i.fmsg?i.fmsg:j("C1015");"C1002"==o&&(o=j("C1002"),"C1002"==o&&(o="Updated successfully")),"C1015"==o&&(o=j("C1015"),"C1015"==o&&(o="Update failed.")),h.attr("disabled","disabled"),d.then(function(a){a==KP.API.SUCC?b.open(h,o):a==KP.API.ERROR&&b.open(h,p);
},function(a){}),d["finally"](function(){e(function(){h.removeClass("el-loading"),n&&h.removeAttr("disabled")},500)})}}})}}}}]).service("ShowSaveMsg",["$timeout",function(a){this.open=function(b,c){var d=$('<div class="kp-notifications"><div class="gr notify"><div class="info">'+c+"</div></div></div>");b=$("body"),b.append(d),a(function(){d.remove()},5e3)}}]).service("EmailNotActive",["$rootScope","$modal",function(a,b){this.open=function(){var c=!1;if(a.currentUser&&a.currentUser.register_status<5){var d=b.open({templateUrl:"/views/component/email.not.active.model.html",controller:["$scope","$modalInstance","Account","ShowSaveMsg","EmptyPromise","myData","kpTitle",function(a,b,c,d,e,f,g){a.error={eformat:!1,ehave:!1,esame:!1},a.newEmail="",a.close=function(){g.reset(),b.close(f)};var h=!1;a.saveFlag=h,a.save=function(){if(h)return e.getEmptyPromise();if(h=!0,a.error.eformat=!1,a.error.ehave=!1,a.error.esame=!1,a.changeSucc=0,a.sendSucc=0,!a.newEmail||!a.validateEmail(a.newEmail))return a.error.eformat=!0,h=!1,e.getEmptyPromise();var b={email:a.newEmail};return c.setEmail().post(b).then(function(b){return b.data.success?(a.changeSucc=1,h=!1,KP.API.SUCC):void 0},function(b){return h=!1,"EmailSameAsOld"==b.type?a.error.esame=!0:"EmailExist"==b.type&&(a.error.ehave=!0),KP.API.ERROR})},a.sendEmail=function(b){return h?e.getEmptyPromise():(h=!0,a.changeSucc=0,a.sendSucc=0,c.resendConfirmEmail().post().then(function(b){return a.sendSucc=1,b.data.success?(h=!1,KP.API.SUCC):void 0},function(a){return h=!1,KP.API.ERROR}))},a.cancel=function(){a.eFlag=0,a.error.eformat=!1},a.validateEmail=KP.Utils.validateEmail,a.$on("$destroy",function(){g.reset()})}],resolve:{myData:function(){return a.currentUser}}});d.result.then(function(a){},function(){}),c=!0}return c}}]).service("LoginAndActive",["LoginService","EmailNotActive",function(a,b){this.open=function(c){return a.open(c)?!1:b.open()?!1:!0}}]).directive("iframeOnload",[function(){return{scope:{callBack:"&iframeOnload"},link:function(a,b,c){b.on("load",function(){return a.callBack()})}}}]).directive("ngFocus",[function(){var a="ng-focused";return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$focused=!1,c.bind("focus",function(d){c.addClass(a),b.$apply(function(){e.$focused=!0})}).bind("blur",function(d){c.removeClass(a),b.$apply(function(){e.$focused=!1})})}}}]),angular.module("italki.directives").directive("italkiSwitcher",function(){return{restrict:"AE",replace:!0,transclude:!0,template:function(a,b){var c="";return c+="<div",c+=' class="switcher'+(b["class"]?" "+b["class"]:"")+'"',c+=b.ngModel?' ng-click="'+b.ngModel+"=!"+b.ngModel+(b.ngChange?"; "+b.ngChange+'()"':'"'):"",c+=' ng-class="{ checked:'+b.ngModel+' }"',c+=">",c+='<input type="checkbox"',c+=b.id?' id="'+b.id+'"':"",c+=b.name?' name="'+b.name+'"':"",c+=b.ngModel?' ng-model="'+b.ngModel+'"':"",c+=' style="display:none" />',c+='<div class="switcher-toggler"></div>',c+='<div class="switcher-inner">',c+='<div class="switcher-state-on">ON</div>',c+='<div class="switcher-state-off">OFF</div>',c+="</div>",c+="</div>"}}}),angular.module("italki.directives").directive("italkiSelectOnFocus",["$window",function(a){return{restrict:"A",link:function(b,c){c.on("click",function(){a.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]),angular.module("italki.directives").directive("italkiScrollToHere",["$log",function(a){return{restrict:"A",link:function(b,c,d){var e=c.parents(".modal-list");a.debug("italkiScrollToHere directive, Scrolled element:",e),e&&e.scrollTop(e[0].scrollHeight)}}}]),angular.module("italki.directives").directive("italkiScrollAndFixed",["$log","$window",function(a,b){return{restrict:"A",scope:!0,compile:function(){return function(c,d,e){function f(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=$(this).scrollTop(),c=b-h>250;if(g=c,document.getElementById("should"))if(a>991)if(g){var d=document.getElementById("divBody").scrollHeight-document.getElementById("should").scrollHeight;d>b-112?($("#should").css({top:"56px"}),document.getElementById("should").className="container-fixed"):($("#should").css({top:d}),document.getElementById("should").className="container-absolute")}else $("#should").css({top:"0px"}),document.getElementById("should").className="";else $("#should").css({top:"0px"}),document.getElementById("should").className="";k&&$("#top").toggle(!g),j.toggle(g)}var g=!1,h=parseInt(e.italkiScrollAndFixed,10),i=e.selector,j=$(i),k=e.hidenTopNav||!0;angular.isNumber(h)&&j&&(a.debug("italki scroll and fixed: threshold->",h,"element ->",j),$(function(){$(b).scroll(f)}),c.$on("$destroy",function(){a.debug("italki scroll and fixed -> $destroy scroll"),$(b).unbind("scroll",f)}))}}}}]),angular.module("italki.directives").directive("navToUserAndCloseModal",["$state",function(a){return{restrict:"A",link:function(b,c,d){c.on("click",function(){var c=d.navToUserAndCloseModal;c&&0!=c&&(a.go("user",{id:c}),angular.isFunction(b.$close)&&b.$close())})}}}]),angular.module("italki.directives").directive("italkiGoHome",["$state","$timeout",function(a,b){return{restrict:"A",link:function(c,d,e){d.on("click",function(){b(function(){a.go(c.currentUser?"dashboard":"landing")})})}}}]),function(a,b){var c=a.KP=a.KP||{};c.isMobile=function(){var a=/(nokia|iphone|android|motorola|^mot-|softbank|foma|docomo|kddi|up.browser|up.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam-|s[cg]h|^lge|ericsson|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte-|longcos|pantech|gionee|^sie-|portalmmm|jigs browser|hiptop|^benq|haier|^lct|operas*mobi|opera*mini|320x320|240x320|176x220)/i,b=navigator.userAgent;if(null==b)return!0;var c=a.exec(b);return null==c?!1:!0}();var d=navigator.userAgent||navigator.vendor||window.opera;c.isIos=function(){return/iPad|iPhone|iPod/.test(d)&&!window.MSStream?!0:void 0}(),c.isAndroid=function(){return/android/i.test(d)?!0:void 0}(),c.HTML5=!0,c.SEARCH=null,c.REF={userId:function(a){var b=a.match(/ref=([a-zA-Z0-9_]+)/i);if(b&&b.length>1){var c=b[0].split("=");if(c.indexOf("ref")>-1)return b[1]}return""}(location.search),utm_source:function(a){var b=a.match(/utm_source=([a-zA-Z0-9_][^\s]+)/i);if(b&&b.length>1){var c=b[0].split("=");if(c.indexOf("utm_source")>-1)return b[1]}return""}(location.search),utm_medium:function(a){var b=a.match(/utm_medium=([a-zA-Z0-9_]+)/i);if(b&&b.length>1){var c=b[0].split("=");if(c.indexOf("utm_medium")>-1)return b[1]}return""}(location.search),utm_campaign:function(a){var b=a.match(/utm_campaign=([a-zA-Z0-9_]+)/i);if(b&&b.length>1){var c=b[0].split("=");if(c.indexOf("utm_campaign")>-1)return b[1]}return""}(location.search),landingPage:location.href,url:document.referrer},c.DEBUG=!0,c.VERSION=document.getElementsByTagName("html")[0].getAttribute("kp-version"),c.COUNTRY=document.getElementsByTagName("html")[0].getAttribute("kp-country"),c.LANSEL=[{t:0,v:"english",flag:"en-us"},{t:0,v:"chinese",flag:"zh-cn"},{t:0,v:"french",flag:"fr"},{t:0,v:"spanish",flag:"es"},{t:0,v:"portuguese",flag:"pt"},{t:0,v:"german",flag:"de"},{t:0,v:"japanese",flag:"ja"},{t:0,v:"korean",flag:"ko"},{t:0,v:"arabic",flag:"ar"},{t:0,v:"hindi",flag:"hi"},{t:0,v:"italian",flag:"it"},{t:0,v:"russian",flag:"ru"},{t:1,v:"afrikaans",flag:"af"},{t:1,v:"akantwi",flag:""},{t:1,v:"albanian",flag:"sq"},{t:1,v:"signlanguage(american)",flag:""},{t:1,v:"amharic",flag:""},{t:1,v:"argentinesignlanguage",flag:""},{t:1,v:"armenian",flag:"hy"},{t:1,v:"azeri",flag:""},{t:1,v:"arabic(egyptian)",flag:"ar-eg"},{t:1,v:"arabic(gulf)",flag:""},{t:1,v:"arabic(modernstandard)",flag:""},{t:1,v:"arabic(sudanese)",flag:""},{t:1,v:"arabic(maghrebi)",flag:""},{t:1,v:"arabic(levantine)",flag:"ar-lb"},{t:1,v:"alsatian",flag:""},{t:1,v:"assamese",flag:""},{t:1,v:"aiki(kibet)",flag:""},{t:1,v:"aiki(runga)",flag:""},{t:1,v:"ainu",flag:""},{t:1,v:"aragonese",flag:""},{t:1,v:"aramaic",flag:""},{t:1,v:"aromanian",flag:""},{t:1,v:"assiniboine(nakota)",flag:""},{t:1,v:"austriangerman",flag:""},{t:1,v:"australiansignlanguage(auslan)",flag:""},{t:1,v:"avar",flag:""},{t:1,v:"aymara",flag:""},{t:1,v:"azerbaijani",flag:""},{t:1,v:"basque",flag:"eu"},{t:1,v:"belait",flag:""},{t:1,v:"belarusian",flag:"be"},{t:1,v:"bengali",flag:"bn"},{t:1,v:"bosnian",flag:"bs"},{t:1,v:"braziliansignlanguage(libras)",flag:""},{t:1,v:"signlanguage(british)",flag:""},{t:1,v:"bulgarian",flag:"bg"},{t:1,v:"burmese",flag:"my"},{t:1,v:"balochi",flag:""},{t:1,v:"blackfoot(niitsi)",flag:""},{t:1,v:"breton",flag:"br"},{t:1,v:"balinese",flag:""},{t:1,v:"bagokusuntu",flag:""},{t:1,v:"bagri",flag:""},{t:1,v:"bambara(bamanankan)",flag:""},{t:1,v:"banjar",flag:""},{t:1,v:"barawana(bare)",flag:""},{t:1,v:"bari",flag:""},{t:1,v:"bataktoba",flag:""},{t:1,v:"bats",flag:""},{t:1,v:"bavarian",flag:""},{t:1,v:"beja",flag:""},{t:1,v:"bhojpuri",flag:""},{t:1,v:"bislama",flag:""},{t:1,v:"bugis",flag:""},{t:1,v:"catalan",flag:"ca"},{t:1,v:"cebuano",flag:""},{t:1,v:"chinese(cantonese)",flag:""},{t:1,v:"chinese(hakka)",flag:""},{t:1,v:"chinese(hokkien)",flag:""},{t:1,v:"chinese(shanghainese)",flag:"zh"},{t:1,v:"chinese(taiwanese)",flag:"zh-tw"},{t:1,v:"chinese(other)",flag:""},{t:1,v:"croatian",flag:"hr"},{t:1,v:"czech",flag:"gu"},{t:1,v:"cornish",flag:""},{t:1,v:"corsican",flag:"co"},{t:1,v:"cree",flag:"cr"},{t:1,v:"cherokee",flag:""},{t:1,v:"chewa",flag:""},{t:1,v:"chavacano",flag:""},{t:1,v:"chechen",flag:""},{t:1,v:"chibarwe ",flag:""},{t:1,v:"chiquitano",flag:""},{t:1,v:"choctaw",flag:""},{t:1,v:"chukchi",flag:""},{t:1,v:"chuwabu",flag:""},{t:1,v:"coptic",flag:""},{t:1,v:"crow",flag:""},{t:1,v:"danish",flag:"da"},{t:1,v:"dutch",flag:"nl"},{t:1,v:"dzongkha",flag:""},{t:1,v:"dari",flag:""},{t:1,v:"dothraki",flag:""},{t:1,v:"daakaka",flag:""},{t:1,v:"dakota",flag:""},{t:1,v:"daza",flag:""},{t:1,v:"delaoenale",flag:""},{t:1,v:"dinka",flag:""},{t:1,v:"domari",flag:""},{t:1,v:"dotyali",flag:""},{t:1,v:"drehu",flag:""},{t:1,v:"esperanto",flag:"eo"},{t:1,v:"estonian",flag:"et"},{t:1,v:"erzya",flag:""},{t:1,v:"ewe",flag:""},{t:1,v:"ewondo(fang)",flag:""},{t:1,v:"filipino(tagalog)",flag:""},{t:1,v:"finnish",flag:"fi"},{t:1,v:"flemish",flag:""},{t:1,v:"faroese",flag:""},{t:1,v:"frisian",flag:"fy"},{t:1,v:"fijian(itaukei)",flag:""},{t:1,v:"fon(fongbe)",flag:""},{t:1,v:"friulian",flag:""},{t:1,v:"fulah",flag:""},{t:1,v:"fur",flag:""},{t:1,v:"gaelic(irish)",flag:"gd-ie"},{t:1,v:"gaelic(scottish)",flag:"gd"},{t:1,v:"galician",flag:""},{t:1,v:"georgian",flag:"ka"},{t:1,v:"greek",flag:"el"},{t:1,v:"greek(ancient)",flag:""},{t:1,v:"greenlandic",flag:""},{t:1,v:"gujarati",flag:""},{t:1,v:"ga",flag:""},{t:1,v:"guarani",flag:""},{t:1,v:"gaelic(manx)",flag:""},{t:1,v:"gallo",flag:""},{t:1,v:"garifuna",flag:""},{t:1,v:"gikuyu",flag:""},{t:1,v:"greenlandic",flag:""},{t:1,v:"guambiano",flag:""},{t:1,v:"gullah",flag:""},{t:1,v:"gullah(afroseminolecreole)",flag:""},{t:1,v:"haitiancreole",flag:""},{t:1,v:"hausa",flag:""},{t:1,v:"hawaiian",flag:""},{t:1,v:"hebrew",flag:""},{t:1,v:"hmong",flag:""},{t:1,v:"hungarian",flag:"hu"},{t:1,v:"hawaiianpidgin(hawaiiancreoleenglish)",flag:""},{t:1,v:"honduransignlanguage(lesho)",flag:""},{t:1,v:"icelandic",flag:"is"},{t:1,v:"indonesian",flag:"id"},{t:1,v:"igbo",flag:""},{t:1,v:"inuktitut",flag:"iu"},{t:1,v:"iban",flag:""},{t:1,v:"ingush",flag:""},{t:1,v:"signlanguage(international)",flag:""},{t:1,v:"ido",flag:""},{t:1,v:"inuinnaqtun",flag:""},{t:1,v:"inuvialuktun",flag:""},{t:1,v:"ixcatec",flag:""},{t:1,v:"javanese",flag:""},{t:1,v:"japanese(okinawan)",flag:""},{t:1,v:"japanesesignlanguage",flag:""},{t:1,v:"jamaicancreole",flag:""},{t:1,v:"judeotat",flag:""},{t:1,v:"kannada",flag:"kn"},{t:1,v:"kazakh",flag:"kk"},{t:1,v:"kinyarwanda",flag:""},{t:1,v:"khmer",flag:"km"},{t:1,v:"klingon",flag:"tlh"},{t:1,v:"kurdish",flag:""},{t:1,v:"kyrgyz",flag:""},{t:1,v:"kekchi(qeqchi)",flag:""},{t:1,v:"kiche",flag:""},{t:1,v:"kachin(jingpho)",flag:""},{t:1,v:"kalanga ",flag:""},{t:1,v:"kalmykoirat",flag:""},{t:1,v:"kanuri",flag:""},{t:1,v:"kenjeje",flag:""},{t:1,v:"khmu",flag:""},{t:1,v:"khoemana",flag:""},{t:1,v:"kirundi",flag:""},{t:1,v:"koisan(tsoa)",flag:""},{t:1,v:"konkani",flag:""},{t:1,v:"lao",flag:""},{t:1,v:"latin",flag:"la"},{t:1,v:"latvian"},{t:1,v:"lithuanian",flag:""},{t:1,v:"luo",flag:""},{t:1,v:"luxembourgish",flag:""},{t:1,v:"lakota",flag:""},{t:1,v:"ladino(judeospanish)",flag:""},{t:1,v:"ladin",flag:""},{t:1,v:"lau",flag:""},{t:1,v:"limburgish",flag:""},{t:1,v:"litzlitz(naman)",flag:""},{t:1,v:"lombard",flag:""},{t:1,v:"macedonian",flag:"mk"},{t:1,v:"malagasy",flag:""},{t:1,v:"malay",flag:"ms"},{t:1,v:"malayalam",flag:"ml"},{t:1,v:"maltese",flag:"mt"},{t:1,v:"maori",flag:"mi"},{t:1,v:"marathi",flag:"mr"},{t:1,v:"mongolian",flag:""},{t:1,v:"maasai",flag:""},{t:1,v:"maithili",flag:""},{t:1,v:"mamuju",flag:""},{t:1,v:"manchu",flag:""},{t:1,v:"mandingo(madinka)",flag:""},{t:1,v:"manggarai",flag:""},{t:1,v:"mapudungun",flag:""},{t:1,v:"marringarr",flag:""},{t:1,v:"masalit",flag:""},{t:1,v:"mekeo",flag:""},{t:1,v:"mexicansignlanguage(lsm)",flag:""},{t:1,v:"minangkabau",flag:""},{t:1,v:"mingrelian",flag:""},{t:1,v:"mirandese",flag:""},{t:1,v:"miyako",flag:""},{t:1,v:"mon",flag:""},{t:1,v:"maldivian(dhivehi)",flag:""},{t:1,v:"marshallese",flag:""},{t:1,v:"mauritiancreole",flag:""},{t:1,v:"mazatec",flag:""},{t:1,v:"montenegrin",flag:""},{t:1,v:"mnong",flag:""},{t:1,v:"nahuatl",flag:""},{t:1,v:"nepali",flag:"ne"},{t:1,v:"norwegian",flag:"no"},{t:1,v:"nambya",flag:""},{t:1,v:"neapolitan(napoletano)",flag:""},{t:1,v:"natchez",flag:""},{t:1,v:"navajo(dinebizaad)",flag:""},{t:1,v:"ndebele",flag:""},{t:1,v:"neverver",flag:""},{t:1,v:"newar",flag:""},{t:1,v:"nigerianpidgin",flag:""},{t:1,v:"northefate(nakanamanga)",flag:""},{t:1,v:"nubian(midob)",flag:""},{t:1,v:"nubian(nobiin)",flag:""},{t:1,v:"nuer",flag:""},{t:1,v:"ojibwe",flag:""},{t:1,v:"ogiek(akiek)",flag:""},{t:1,v:"okinawan",flag:""},{t:1,v:"oromo",flag:""},{t:1,v:"pashtu",flag:""},{t:1,v:"persian(farsi)",flag:"fa"},{t:1,v:"polish",flag:"pl"},{t:1,v:"punjabi",flag:"pa"},{t:1,v:"papiamento",flag:""},{t:1,v:"pao",flag:""},{t:1,v:"palauan",flag:""},{t:1,v:"quichua",flag:""},{t:1,v:"rohingya",flag:""},{t:1,v:"romanian",flag:"ro"},{t:1,v:"romani(balkan)",flag:""},{t:1,v:"romani(sinte)",flag:""},{t:1,v:"romani(vlax)",flag:""},{t:1,v:"romansch",flag:""},{t:1,v:"samoan",flag:""},{t:1,v:"sanskrit",flag:"sa"},{t:1,v:"serbian",flag:"sr"},{t:1,v:"sindhi",flag:"sd"},{t:1,v:"sinhala",flag:""},{t:1,v:"sicilian",flag:""},{t:1,v:"slovak",flag:"sk"},{t:1,v:"slovenian",flag:"sl"},{t:1,v:"somali",flag:""},{t:1,v:"swahili",flag:"sw"},{t:1,v:"swedish",flag:"sv"},{t:1,v:"scots",flag:"gd"},{t:1,v:"swissgerman",flag:""},{t:1,v:"syriac",flag:""},{t:1,v:"sa",flag:""},{t:1,v:"saami(kildin)",flag:""},{t:1,v:"saami(lule)",flag:""},{t:1,v:"saami(northern)",flag:""},{t:1,v:"sardinian",flag:""},{t:1,v:"sekani",flag:""},{t:1,v:"sena",flag:""},{t:1,v:"sfyria",flag:""},{t:1,v:"shan",flag:""},{t:1,v:"sherpa",flag:""},{t:1,v:"shona",flag:""},{t:1,v:"shona(ndau)",flag:""},{t:1,v:"shoshoni",flag:""},{t:1,v:"shumashti",flag:""},{t:1,v:"signlanguage(other)",flag:""},{t:1,v:"silbogomero",flag:""},{t:1,v:"sotho",flag:""},{t:1,v:"sundanese",flag:""},{t:1,v:"swazi",flag:""},{t:1,v:"swissfrenchsignlanguage",flag:""},{t:1,v:"swissgermansignlanguage",flag:""},{t:1,v:"tajik",flag:""},{t:1,v:"tamazight",flag:""},{t:1,v:"tamil",flag:"ta"},{t:1,v:"tatar",flag:"tt"},{t:1,v:"telugu",flag:""},{t:1,v:"thai",flag:"th"},{t:1,v:"tibetan",flag:""},{t:1,v:"turkish",flag:"tr"},{t:1,v:"turkmen",flag:"tk"},{t:1,v:"tutong",flag:""},{t:1,v:"tokipona",flag:""},{t:1,v:"tamang",flag:""},{t:1,v:"tharu",flag:""},{t:1,v:"tigrinya",flag:""},{t:1,v:"tlingit",flag:""},{t:1,v:"tongan",flag:""},{t:1,v:"tsonga(xitsonga)",flag:""},{t:1,v:"tswana",flag:""},{t:1,v:"tzutujil",flag:""},{t:1,v:"ukrainian",flag:"uk"},{t:1,v:"urdu",flag:"ur"},{t:1,v:"uyghur",flag:""},{t:1,v:"uzbek",flag:""},{t:1,v:"vietnamese",flag:"vi"},{t:1,v:"venda",flag:""},{t:1,v:"welsh",flag:"cy"},{t:1,v:"wolof",flag:""},{t:1,v:"waray",flag:""},{t:1,v:"wayuu",flag:""},{t:1,v:"wyandot",flag:""},{t:1,v:"xhosa",flag:"xh"},{t:1,v:"yakut",flag:""},{t:1,v:"yiddish",flag:"ji"},{t:1,v:"yoruba",flag:""},{t:1,v:"yucatecmaya",flag:""},{t:1,v:"yola",flag:""},{t:1,v:"yugoslaviansignlanguage",flag:""},{t:1,v:"zhuang",flag:""},{t:1,v:"zulu",flag:"zu"},{t:1,v:"zaghawa(beria)",flag:""},{t:1,v:"zapotec",flag:""},{t:1,v:"zarma",flag:""},{t:1,v:"zaza(northern)",flag:""},{t:1,v:"occitan",flag:"oc"},{t:1,v:"odia",flag:""},{t:1,v:"oneida",flag:""},{t:1,v:"other"}],c.CURRENCY_ARR=[{v:"Dateline Standard Time",l:"(UTC-12:00) International Date Line West"},{v:"UTC-11",l:"(UTC-11:00) Coordinated Universal Time-11"},{v:"Hawaiian Standard Time",l:"(UTC-10:00) Hawaii"},{v:"Alaskan Standard Time",l:"(UTC-09:00) Alaska"},{v:"Pacific Standard Time",l:"(UTC-08:00) Pacific Time (US &amp; Canada)"},{v:"Pacific Standard Time (Mexico)",l:"(UTC-08:00) Baja California"},{v:"Mountain Standard Time",l:"(UTC-07:00) Mountain Time (US &amp; Canada)"},{v:"Mountain Standard Time (Mexico)",l:"(UTC-07:00) Chihuahua, La Paz, Mazatlan"},{v:"US Mountain Standard Time",l:"(UTC-07:00) Arizona"},{v:"Canada Central Standard Time",l:"(UTC-06:00) Saskatchewan"},{v:"Central Standard Time (Mexico)",l:"(UTC-06:00) Guadalajara, Mexico City, Monterrey"},{v:"Central Standard Time",l:"(UTC-06:00) Central Time (US &amp; Canada)"},{v:"Central America Standard Time",l:"(UTC-06:00) Central America"},{v:"US Eastern Standard Time",l:"(UTC-05:00) Indiana (East)"},{v:"Eastern Standard Time",l:"(UTC-05:00) Eastern Time (US &amp; Canada)"},{v:"Eastern Standard Time (Mexico)",l:"(UTC-05:00) Chetumal"},{v:"SA Pacific Standard Time",l:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco"},{v:"Venezuela Standard Time",l:"(UTC-04:30) Caracas"},{v:"SA Western Standard Time",l:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan"},{v:"Central Brazilian Standard Time",l:"(UTC-04:00) Cuiaba"},{v:"Atlantic Standard Time",l:"(UTC-04:00) Atlantic Time (Canada)"},{v:"Paraguay Standard Time",l:"(UTC-04:00) Asuncion"},{v:"Newfoundland Standard Time",l:"(UTC-03:30) Newfoundland"},{v:"Pacific SA Standard Time",l:"(UTC-03:00) Santiago"},{v:"Bahia Standard Time",l:"(UTC-03:00) Salvador"},{v:"Montevideo Standard Time",l:"(UTC-03:00) Montevideo"},{v:"Greenland Standard Time",l:"(UTC-03:00) Greenland"},{v:"SA Eastern Standard Time",l:"(UTC-03:00) Cayenne, Fortaleza"},{v:"Argentina Standard Time",l:"(UTC-03:00) Buenos Aires"},{v:"E. South America Standard Time",l:"(UTC-03:00) Brasilia"},{v:"Mid-Atlantic Standard Time",l:"(UTC-02:00) Mid-Atlantic - Old"},{v:"UTC-02",l:"(UTC-02:00) Coordinated Universal Time-02"},{v:"Cape Verde Standard Time",l:"(UTC-01:00) Cabo Verde Is."},{v:"Azores Standard Time",l:"(UTC-01:00) Azores"},{v:"Greenwich Standard Time",l:"(UTC) Monrovia, Reykjavik"},{v:"GMT Standard Time",l:"(UTC) Dublin, Edinburgh, Lisbon, London"},{v:"UTC",l:"(UTC) Coordinated Universal Time"},{v:"Morocco Standard Time",l:"(UTC) Casablanca"},{v:"W. Europe Standard Time",l:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{v:"Central Europe Standard Time",l:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"},{v:"Romance Standard Time",l:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris"},{v:"Central European Standard Time",l:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb"},{v:"W. Central Africa Standard Time",l:"(UTC+01:00) West Central Africa"},{v:"Namibia Standard Time",l:"(UTC+01:00) Windhoek"},{v:"Jordan Standard Time",l:"(UTC+02:00) Amman"},{v:"GTB Standard Time",l:"(UTC+02:00) Athens, Bucharest"},{v:"Middle East Standard Time",l:"(UTC+02:00) Beirut"},{v:"Egypt Standard Time",l:"(UTC+02:00) Cairo"},{v:"Syria Standard Time",l:"(UTC+02:00) Damascus"},{v:"E. Europe Standard Time",l:"(UTC+02:00) E. Europe"},{v:"South Africa Standard Time",l:"(UTC+02:00) Harare, Pretoria"},{v:"FLE Standard Time",l:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{v:"Turkey Standard Time",l:"(UTC+02:00) Istanbul"},{v:"Israel Standard Time",l:"(UTC+02:00) Jerusalem"},{v:"Kaliningrad Standard Time",l:"(UTC+02:00) Kaliningrad"},{v:"Libya Standard Time",l:"(UTC+02:00) Tripoli"},{v:"Arabic Standard Time",l:"(UTC+03:00) Baghdad"},{v:"Arab Standard Time",l:"(UTC+03:00) Kuwait, Riyadh"},{v:"Belarus Standard Time",l:"(UTC+03:00) Minsk"},{v:"Russian Standard Time",l:"(UTC+03:00) Moscow, St. Petersburg, Volgograd"},{v:"E. Africa Standard Time",l:"(UTC+03:00) Nairobi"},{v:"Iran Standard Time",l:"(UTC+03:30) Tehran"},{v:"Astrakhan Standard Time",l:"(UTC+04:00) Astrakhan, Ulyanovsk"},{v:"Arabian Standard Time",l:"(UTC+04:00) Abu Dhabi, Muscat"},{v:"Azerbaijan Standard Time",l:"(UTC+04:00) Baku"},{v:"Russia Time Zone 3",l:"(UTC+04:00) Izhevsk, Samara"},{v:"Mauritius Standard Time",l:"(UTC+04:00) Port Louis"},{v:"Georgian Standard Time",l:"(UTC+04:00) Tbilisi"},{v:"Caucasus Standard Time",l:"(UTC+04:00) Yerevan"},{v:"Afghanistan Standard Time",l:"(UTC+04:30) Kabul"},{v:"West Asia Standard Time",l:"(UTC+05:00) Ashgabat, Tashkent"},{v:"Ekaterinburg Standard Time",l:"(UTC+05:00) Ekaterinburg"},{v:"Pakistan Standard Time",l:"(UTC+05:00) Islamabad, Karachi"},{v:"India Standard Time",l:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{v:"Sri Lanka Standard Time",l:"(UTC+05:30) Sri Jayawardenepura"},{v:"Nepal Standard Time",l:"(UTC+05:45) Kathmandu"},{v:"Central Asia Standard Time",l:"(UTC+06:00) Astana"},{v:"Bangladesh Standard Time",l:"(UTC+06:00) Dhaka"},{v:"N. Central Asia Standard Time",l:"(UTC+06:00) Novosibirsk"},{v:"Myanmar Standard Time",l:"(UTC+06:30) Yangon (Rangoon)"},{v:"Altai Standard Time",l:"(UTC+07:00) Barnaul, Gorno-Altaysk"},{v:"SE Asia Standard Time",l:"(UTC+07:00) Bangkok, Hanoi, Jakarta"},{v:"North Asia Standard Time",l:"(UTC+07:00) Krasnoyarsk"},{v:"China Standard Time",l:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi"},{v:"North Asia East Standard Time",l:"(UTC+08:00) Irkutsk"},{v:"Singapore Standard Time",l:"(UTC+08:00) Kuala Lumpur, Singapore"},{v:"W. Australia Standard Time",l:"(UTC+08:00) Perth"},{v:"Taipei Standard Time",l:"(UTC+08:00) Taipei"},{v:"Ulaanbaatar Standard Time",l:"(UTC+08:00) Ulaanbaatar"},{v:"Transbaikal Standard Time",l:"(UTC+09:00) Chita"},{v:"Tokyo Standard Time",l:"(UTC+09:00) Osaka, Sapporo, Tokyo"},{v:"Korea Standard Time",l:"(UTC+09:00) Seoul"},{v:"Yakutsk Standard Time",l:"(UTC+09:00) Yakutsk"},{v:"Cen. Australia Standard Time",l:"(UTC+09:30) Adelaide"},{v:"AUS Central Standard Time",l:"(UTC+09:30) Darwin"},{v:"E. Australia Standard Time",l:"(UTC+10:00) Brisbane"},{v:"AUS Eastern Standard Time",l:"(UTC+10:00) Canberra, Melbourne, Sydney"},{v:"West Pacific Standard Time",l:"(UTC+10:00) Guam, Port Moresby"},{v:"Tasmania Standard Time",l:"(UTC+10:00) Hobart"},{v:"Magadan Standard Time",l:"(UTC+10:00) Magadan"},{v:"Vladivostok Standard Time",l:"(UTC+10:00) Vladivostok"},{v:"Sakhalin Standard Time",l:"(UTC+11:00) Sakhalin"},{v:"Russia Time Zone 10",l:"(UTC+11:00) Chokurdakh"},{v:"Central Pacific Standard Time",l:"(UTC+11:00) Solomon Is., New Caledonia"},{v:"Russia Time Zone 11",l:"(UTC+12:00) Anadyr, Petropavlovsk-Kamchatsky"},{v:"New Zealand Standard Time",l:"(UTC+12:00) Auckland, Wellington"},{v:"UTC+12",l:"(UTC+12:00) Coordinated Universal Time+12"},{v:"Fiji Standard Time",l:"(UTC+12:00) Fiji"},{v:"Kamchatka Standard Time",l:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{v:"Tonga Standard Time",l:"(UTC+13:00) Nuku'alofa"},{v:"Samoa Standard Time",l:"(UTC+13:00) Samoa"},{v:"Line Islands Standard Time",l:"(UTC+14:00) Kiritimati Island"}],c.COUNTRRY_ARR=[{v:"AF",l:"Afghanistan"},{v:"AL",l:"Albania"},{v:"DZ",l:"Algeria"},{v:"AS",l:"American Samoa"},{v:"AD",l:"Andorra"},{v:"AO",l:"Angola"},{v:"AI",l:"Anguilla"},{v:"AG",l:"Antigua and Barbuda"},{v:"AR",l:"Argentina"},{v:"AM",l:"Armenia"},{v:"AW",l:"Aruba"},{v:"AU",l:"Australia"},{v:"AT",l:"Austria"},{v:"AZ",l:"Azerbaijan"},{v:"BS",l:"Bahamas"},{v:"BH",l:"Bahrain"},{v:"BD",l:"Bangladesh"},{v:"BB",l:"Barbados"},{v:"BY",l:"Belarus"},{v:"BE",l:"Belgium"},{v:"BZ",l:"Belize"},{v:"BJ",l:"Benin"},{v:"BM",l:"Bermuda"},{v:"BT",l:"Bhutan"},{v:"BO",l:"Bolivia"},{v:"BA",l:"Bosnia and Herzegowina"},{v:"BW",l:"Botswana"},{v:"BV",l:"Bouvet Island"},{v:"BR",l:"Brazil"},{v:"IO",l:"British Indian Ocean Territory"},{v:"BN",l:"Brunei Darussalam"},{v:"BG",l:"Bulgaria"},{v:"BF",l:"Burkina Faso"},{v:"BI",l:"Burundi"},{v:"KH",l:"Cambodia"},{v:"CM",l:"Cameroon"},{v:"CA",l:"Canada"},{v:"CV",l:"Cape Verde"},{v:"KY",l:"Cayman Islands"},{v:"CF",l:"Central African Republic"},{v:"TD",l:"Chad"},{v:"CL",l:"Chile"},{v:"CN",l:"China"},{v:"CX",l:"Christmas Island"},{v:"CC",l:"Cocoa (Keeling) Islands"},{v:"CO",l:"Colombia"},{v:"KM",l:"Comoros"},{v:"CK",l:"Cook Islands"},{v:"CR",l:"Costa Rica"},{v:"CI",l:"Cote Divoire"},{v:"HR",l:"Croatia"},{v:"CU",l:"Cuba"},{v:"CY",l:"Cyprus"},{v:"CZ",l:"Czech Republic"},{v:"ZR",l:"Democratic Republic of the Congo"},{v:"DK",l:"Denmark"},{v:"DJ",l:"Djibouti"},{v:"DM",l:"Dominica"},{v:"DO",l:"Dominican Republic"},{v:"EC",l:"Ecuador"},{v:"EG",l:"Egypt"},{v:"SV",l:"El Salvador"},{v:"GQ",l:"Equatorial Guinea"},{v:"ER",l:"Eritrea"},{v:"EE",l:"Estonia"},{v:"ET",l:"Ethiopia"},{v:"FK",l:"Falkland Islands (Malvinas)"},{v:"FO",l:"Faroe Islands"},{v:"FJ",l:"Fiji"},{v:"FI",l:"Finland"},{v:"FR",l:"France"},{v:"GA",l:"Gabon"},{v:"GM",l:"Gambia"},{v:"GE",l:"Georgia"},{v:"DE",l:"Germany"},{v:"GH",l:"Ghana"},{v:"GI",l:"Gibraltar"},{v:"GR",l:"Greece"},{v:"GL",l:"Greenland"},{v:"GD",l:"Grenada"},{v:"GU",l:"Guam"},{v:"GT",l:"Guatemala"},{v:"GN",l:"Guinea"},{v:"GW",l:"Guinea-Bissau"},{v:"GY",l:"Guyana"},{v:"HT",l:"Haiti"},{v:"HM",l:"Heard and McDonald Islands"},{v:"HN",l:"Honduras"},{v:"HK",l:"Hong Kong"},{v:"HU",l:"Hungary"},{v:"IS",l:"Iceland"},{v:"IN",l:"India"},{v:"ID",l:"Indonesia"},{v:"IR",l:"Iran, Islamic Republic of"},{v:"IQ",l:"Iraq"},{v:"IE",l:"Ireland"},{v:"IL",l:"Israel"},{v:"IT",l:"Italy"},{v:"JM",l:"Jamaica"},{v:"JP",l:"Japan"},{v:"JO",l:"Jordan"},{v:"KZ",l:"Kazakhstan"},{v:"KE",l:"Kenya"},{v:"KI",l:"Kiribati"},{v:"KP",l:"Korea, Democratic People's Republic of"},{v:"KR",l:"Korea, Republic of"},{v:"KW",l:"Kuwait"},{v:"KG",l:"Kyrgyzstan"},{v:"LA",l:"Lao People's Democratic Republic"},{v:"LV",l:"Latvia"},{v:"LB",l:"Lebanon"},{v:"LS",l:"Lesotho"},{v:"LR",l:"Liberia"},{v:"LY",l:"Libyan Arab Jamahiriya"},{v:"LI",l:"Liechtenstein"},{v:"LT",l:"Lithuania"},{v:"LU",l:"Luxembourg"},{v:"MO",l:"Macau"},{v:"MK",l:"Macedonia, the former Yugoslav Republic of"},{v:"MG",l:"Madagascar"},{v:"MW",l:"Malawi"},{v:"MY",l:"Malaysia"},{v:"MV",l:"Maldives"},{v:"ML",l:"Mali"},{v:"MT",l:"Malta"},{v:"MH",l:"Marshall Islands"},{v:"MR",l:"Mauritania"},{v:"MU",l:"Mauritius"},{v:"MX",l:"Mexico"},{v:"FM",l:"Micronesia, Federated States of"},{v:"MD",l:"Moldova, Republic of"},{v:"MC",l:"Monaco"},{v:"MN",l:"Mongolia"},{v:"ME",l:"Montenegro"},{v:"MS",l:"Montserrat"},{v:"MA",l:"Morocco"},{v:"MZ",l:"Mozambique"},{v:"MM",l:"Myanmar"},{v:"NA",l:"Namibia"},{v:"NR",l:"Nauru"},{v:"NP",l:"Nepal"},{v:"NL",l:"Netherlands"},{v:"NZ",l:"New Zealand"},{v:"NI",l:"Nicaragua"},{v:"NE",l:"Niger"},{v:"NG",l:"Nigeria"},{v:"NU",l:"Niue"},{v:"NF",l:"Norfolk Island"},{v:"MP",l:"Northern Mariana Islands"},{v:"NO",l:"Norway"},{v:"OM",l:"Oman"},{v:"PK",l:"Pakistan"},{v:"PW",l:"Palau"},{v:"PS",l:"Palestinian Territories"},{v:"PA",l:"Panama"},{v:"PG",l:"Papua New Guinea"},{v:"PY",l:"Paraguay"},{v:"PE",l:"Peru"},{v:"PH",l:"Philippines"},{v:"PN",l:"Pitcairn"},{v:"PL",l:"Poland"},{v:"PT",l:"Portugal"},{v:"PR",l:"Puerto Rico"},{v:"QA",l:"Qatar"},{v:"CG",l:"Republic of Congo"},{v:"RO",l:"Romania"},{v:"RU",l:"Russian Federation"},{v:"RW",l:"Rwanda"},{v:"SH",l:"Saint Helena"},{v:"KN",l:"Saint Kitts and Nevis"},{v:"LC",l:"Saint Lucia"},{v:"VC",l:"Saint Vincent and the Grenadines"},{v:"WS",l:"Samoa"},{v:"SM",l:"San Marino"},{v:"ST",l:"Sao Tome and Principe"},{v:"SA",l:"Saudi Arabia"},{v:"SN",l:"Senegal"},{v:"RS",l:"Serbia"},{v:"SC",l:"Seychelles"},{v:"SL",l:"Sierra Leone"},{v:"SG",l:"Singapore"},{v:"SK",l:"Slovakia"},{v:"SI",l:"Slovenia"},{v:"SB",l:"Solomon Islands"},{v:"SO",l:"Somalia"},{v:"ZA",l:"South Africa"},{v:"GS",l:"South Georgia and the South Sandwich Islands"},{v:"ES",l:"Spain"},{v:"LK",l:"Sri Lanka"},{v:"SD",l:"Sudan"},{v:"SR",l:"Suriname"},{v:"SJ",l:"Svalbard and Jan Mayen"},{v:"SZ",l:"Swaziland"},{v:"SE",l:"Sweden"},{v:"CH",l:"Switzerland"},{v:"SY",l:"Syrian Arab Republic"},{v:"TW",l:"Taiwan"},{v:"TJ",l:"Tajikistan"},{v:"TZ",l:"Tanzania, United Republic of"},{v:"TH",l:"Thailand"},{v:"TL",l:"Timor-Leste"},{v:"TG",l:"Togo"},{v:"TK",l:"Tokelau"},{v:"TO",l:"Tonga"},{v:"TT",l:"Trinidad and Tobago"},{v:"TN",l:"Tunisia"},{v:"TR",l:"Turkey"},{v:"TM",l:"Turkmenistan"},{v:"TC",l:"Turks and Caicos Islands"},{v:"TV",l:"Tuvalu"},{v:"UG",l:"Uganda"},{v:"UA",l:"Ukraine"},{v:"AE",l:"United Arab Emirates"},{v:"GB",l:"United Kingdom"},{v:"US",l:"United States"},{v:"UM",l:"United States Minor Outlying Islands"},{v:"UY",l:"Uruguay"},{v:"UZ",l:"Uzbekistan"},{v:"VU",l:"Vanuatu"},{v:"VA",l:"Vatican City State (Holy See)"},{v:"VE",l:"Venezuela"},{v:"VN",l:"Viet Nam"},{v:"VG",l:"Virgin Islands, British"},{v:"VI",l:"Virgin Islands, U.S."},{v:"EH",l:"Western Sahara"},{v:"YE",l:"Yeman"},{v:"ZM",l:"Zambia"},{v:"ZW",l:"Zimbabwe"},{v:"ZZ",l:"Other"}],c.BASEURI=a.location.protocol+"//"+a.location.host+"/";var e="";e=b.domain.indexOf("127")>-1||"localhost"==b.domain?"https://xwww.italki.com/api/":"https://"+b.domain+"/api/",c.API={SUCC:"s",ERROR:"e",URL:e,PARAMS:{}},c.SOCKET={URL:c.API.URL+"message/ws-poll"},c.CONSTANT={TOKEN:"i_token",VTOKEN:"v_token",TOKEN_HEADER:"x-token",V_TOKEN_HEADER:"v-token"},c.SERIALIZE={TOKEN:"token",VTOKEN:"vtoken",USER:"user",VERSION:"version",EXPIRY_DATE:"expiry-date"},c.I18N={preferredLanguage:"en_us",urlLoader:null,staticFilesLoader:{prefix:"i18n/",suffix:".json"}},c.WECHAT={ACCESS_TOKEN:"access_token",UNIONID:"unionid"},c.WECHAT_USER={USER:"user"},c.LANG=[{flag:"en_us",mo:"en-us",name:"English"},{flag:"zh_cn",mo:"zh-cn",name:"中文简体"},{flag:"zh_tw",mo:"zh-tw",name:"中文繁體"},{flag:"es",mo:"es",name:"Español"},{flag:"fr",mo:"fr",name:"Français"},{flag:"pt",mo:"pt",name:"Português"},{flag:"de",mo:"de",name:"Deutsch"},{flag:"ja",mo:"ja",name:"日本語"},{flag:"ko",mo:"ko",name:"한국어"},{flag:"it",mo:"it",name:"Italiano"},{flag:"ru",mo:"ru",name:"Русский"},{flag:"ar",mo:"ar",name:"اللغة العربية"},{flag:"cs",mo:"cs",name:"Čeština"},{flag:"nl",mo:"nl",name:"Nederlands"},{flag:"eo",mo:"eo",name:"Esperanto"},{flag:"pl",mo:"pl",name:"Polski"},{flag:"th",mo:"th",name:"ไทย"},{flag:"tr",mo:"tr",name:"Türkçe"},{flag:"vi",mo:"vi",name:"Tiếng Việt"}],c.HL=function(a){var b=a.match(/hl=([a-zA-Z0-9_-]+)/i);if(b&&b.length>1)for(var d=b[1].toLowerCase().replace("-","_"),e=0;e<c.LANG.length;e++)if(c.LANG[e].flag==d)return c.LANG[e];return null}(location.search),c.HL=function(a){var b=a.match(/hl=([a-zA-Z0-9_-]+)/i);if(b&&b.length>1)for(var d=b[1].toLowerCase().replace("-","_"),e=0;e<c.LANG.length;e++)if(c.LANG[e].flag==d)return c.LANG[e];return null}(location.search),c.states={home:"kp"},c.time48=[];for(var f=0,g=!0;49>f;f++,g=!g){var h=Math.floor(f/2);c.time48.push((f>19?h.toString():"0"+h.toString())+":"+(g?"00":"30"))}c.Utils={getDiffValAttrNames:function(a,b,c){var d=[];if(c&&angular.isArray(c))angular.forEach(c,function(c){a[c]!=b[c]&&d.push(c)});else for(var e in a)a[e]!=b[e]&&d.push(e);return d},usdToCent:function(a){var b=parseFloat(a);return isNaN(b)?0:parseInt((100*b).toFixed())},getYoutubeId:function(a){var b=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,c=b.exec(a);return c?c[1]:null},bLength:function(a){if(!a)return 0;var b=a.match(/[^\x00-\xff]/g);return a.length+(b?b.length:0)},getInterceptedStr:function(a,b,c){if(a.replace(/[^\x00-\xff]/g,"xx").length<=b)return a;for(var d,e="",f=0,g=0;d=a.charAt(g);g++)if(e+=d,f+=null!=d.match(/[^\x00-\xff]/)?2:1,f>=b){c&&(e+=c);break}return e},format:function(a){
var b=arguments;return a.replace(/\{(\d+)\}/g,function(a,c){return b[1*c+1]||""})},textIdToId:function(a){if(angular.isNumber(a))return a;var b=new Error("Error textId: "+a);if(!angular.isString(a))throw b;var c=a.match(/^T0*([0-9]+)[0-9]$/);if(c.length>1)return c[1];throw b},get_im_type:function(a){return["Skype","MSN Messenger","Yahoo! Messenger","AOL Instant Messenger","ICQ","Google Hangouts","QQ","FaceTime","Wechat"][a-1]||""},at_m_n:function(a,b){var c=0;return a.v||(a.v=""),c=a.v.toString().length,a.min||(a.min=0),a.max||(a.max=9999999),b&&!a.v?!0:c>=a.min&&c<=a.max},openUrlWithNewTab:function(a){setTimeout(function(){var b="kp_new_tab_anchor_placeholder";$("body").append('<a target="_blank" id="{0}" href="{1}"></a>'.format(b,a)),$("#"+b).get(0).click(),$("#"+b).remove()},100)},validateEmail:function(a){if(!a)return!1;var b=a.indexOf("@"),c=a.lastIndexOf(".");return 1>b||2>c-b?!1:!0},getViedoUrl:function(a){var b=0,c=0,d=0,e=0,f="",g=0,h=/youtube.com\/watch(\?|\?.+&)v=/g,i=/youtube.com\/v\//g,j=/youtu.be\//g,k=/youtube.com\/embed\//g,l=/youku.com\/v_show\/id_/g,m=/youku.com\/embed\//g,n=/vimeo.com\//g,o=/youku.com\/player.php\/sid\//g,p=/v.italki.cn/g;try{h.test(a)?(a="https://www.youtube.com/embed/"+a.split("v=")[1].split("&")[0],b=1,e=1):i.test(a)?(a="https://www.youtube.com/embed/"+a.split("v/")[1].split("?")[0],b=1,e=1):j.test(a)?(a="https://www.youtube.com/embed/"+a.split("be/")[1].split("?")[0],b=1,e=1):k.test(a)?(a=a.replace("http://","https://"),-1==a.indexOf("https://www.")&&(a=a.replace("https://","https://www.")),b=1,e=1):m.test(a)?(b=0,d=1):l.test(a)?(a="http://player.youku.com/embed/"+a.split("id_")[1].split(".")[0],b=0,d=1):n.test(a)?(b=1,c=1):o.test(a)?(a="http://player.youku.com/embed/"+a.split("sid/")[1].split("/")[0],b=0,d=1):p.test(a)&&(d=0,g=1,b=1),e&&(sURL=a.split("/"),f=sURL[sURL.length-1])}catch(q){}return{url:a,canplay:b,vimeo:c,youku:d,youtube:e,ytID:f,qiniu:g}},charByteCount:function(a){var b,c=0;if(!angular.isString(a))return 0;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),b>128?c+=2:c++;return c}},c.ct_zone={AD:{zones:["Europe/Andorra"]},AE:{zones:["Asia/Dubai"]},AF:{zones:["Asia/Kabul"]},AG:{zones:["America/Port_of_Spain"]},AI:{zones:["America/Port_of_Spain"]},AL:{zones:["Europe/Tirane"]},AM:{zones:["Asia/Yerevan"]},AN:{zones:["America/Curacao"]},AO:{zones:["Africa/Lagos"]},AQ:{zones:["Pacific/Auckland"]},AR:{zones:["America/Argentina/Buenos_Aires","America/Buenos_Aires"]},AS:{zones:["Pacific/Pago_Pago"]},AT:{zones:["Europe/Berlin","Europe/Vienna"]},AU:{zones:["Australia/Hobart","Australia/Sydney","Australia/Brisbane","Australia/Adelaide","Australia/Darwin","Australia/Perth"]},AW:{zones:["America/Curacao"]},AX:{zones:["Europe/Helsinki"]},AZ:{zones:["Asia/Baku"]},BA:{zones:["Europe/Belgrade"]},BB:{zones:["America/Barbados"]},BD:{zones:["Asia/Dhaka"]},BE:{zones:["Europe/Brussels"]},BF:{zones:["Africa/Abidjan"]},BG:{zones:["Europe/Sofia"]},BH:{zones:["Asia/Qatar"]},BI:{zones:["Africa/Maputo"]},BJ:{zones:["Africa/Lagos"]},BL:{zones:["America/Port_of_Spain"]},BM:{zones:["Atlantic/Bermuda"]},BN:{zones:["Asia/Brunei"]},BO:{zones:["America/La_Paz"]},BQ:{zones:["America/Curacao"]},BR:{zones:["America/Noronha","America/Belem","America/Fortaleza","America/Bogota","America/Bahia","America/Sao_Paulo","America/Cuiaba"]},BS:{zones:["America/Nassau"]},BT:{zones:["Asia/Thimphu"]},BW:{zones:["Africa/Maputo"]},BY:{zones:["Europe/Minsk"]},BZ:{zones:["America/Belize"]},CA:{zones:["America/Los_Angeles","America/St_Johns","America/Halifax","America/Regina"]},CC:{zones:["Indian/Cocos"]},CD:{zones:["Africa/Lagos"]},CF:{zones:["Africa/Lagos"]},CG:{zones:["Africa/Lagos"]},CH:{zones:["Europe/Berlin","Europe/Zurich"]},CI:{zones:["Africa/Abidjan"]},CK:{zones:["Pacific/Rarotonga"]},CL:{zones:["America/Santiago"]},CM:{zones:["Africa/Lagos"]},CN:{zones:["Asia/Shanghai"]},CO:{zones:["America/Bogota"]},CR:{zones:["America/Costa_Rica"]},CU:{zones:["America/Havana"]},CV:{zones:["Atlantic/Cape_Verde"]},CW:{zones:["America/Curacao"]},CX:{zones:["Indian/Christmas"]},CY:{zones:["Asia/Nicosia"]},CZ:{zones:["Europe/Prague"]},DE:{zones:["Europe/Berlin"]},DJ:{zones:["Africa/Nairobi"]},DK:{zones:["Europe/Copenhagen"]},DM:{zones:["America/Port_of_Spain"]},DO:{zones:["America/Santo_Domingo"]},DZ:{zones:["Africa/Algiers"]},EC:{zones:["America/Guayaquil"]},EE:{zones:["Europe/Tallinn"]},EG:{zones:["Africa/Cairo"]},EH:{zones:["Africa/El_Aaiun"]},ER:{zones:["Africa/Nairobi"]},ES:{zones:["Europe/Madrid"]},ET:{zones:["Africa/Nairobi"]},FI:{zones:["Europe/Helsinki"]},FJ:{zones:["Pacific/Fiji"]},FK:{zones:["Atlantic/Stanley"]},FM:{zones:["Pacific/Chuuk"]},FO:{zones:["Atlantic/Faroe"]},FR:{zones:["Europe/Paris"]},GA:{zones:["Africa/Lagos"]},GB:{zones:["Europe/London"]},GD:{zones:["America/Port_of_Spain"]},GE:{zones:["Asia/Tbilisi"]},GF:{zones:["America/Cayenne"]},GG:{zones:["Europe/London"]},GH:{zones:["Africa/Accra"]},GI:{zones:["Europe/Gibraltar"]},GL:{zones:["America/Godthab"]},GM:{zones:["Africa/Abidjan"]},GN:{zones:["Africa/Abidjan"]},GP:{zones:["America/Port_of_Spain"]},GQ:{zones:["Africa/Lagos"]},GR:{zones:["Europe/Athens"]},GS:{zones:["Atlantic/South_Georgia"]},GT:{zones:["America/Guatemala"]},GU:{zones:["Pacific/Guam"]},GW:{zones:["Africa/Bissau"]},GY:{zones:["America/Guyana"]},HK:{zones:["Asia/Hong_Kong"]},HN:{zones:["America/Tegucigalpa"]},HR:{zones:["Europe/Belgrade"]},HT:{zones:["America/Port-au-Prince"]},HU:{zones:["Europe/Budapest"]},ID:{zones:["Asia/Jakarta"]},IE:{zones:["Europe/Dublin"]},IL:{zones:["Asia/Jerusalem"]},IM:{zones:["Europe/London"]},IN:{zones:["Asia/Kolkata"]},IO:{zones:["Indian/Chagos"]},IQ:{zones:["Asia/Baghdad"]},IR:{zones:["Asia/Tehran"]},IS:{zones:["Atlantic/Reykjavik"]},IT:{zones:["Europe/Berlin","Europe/Rome"]},JE:{zones:["Europe/London"]},JM:{zones:["America/Jamaica"]},JO:{zones:["Asia/Amman"]},JP:{zones:["Asia/Tokyo"]},KE:{zones:["Africa/Nairobi"]},KG:{zones:["Asia/Bishkek"]},KH:{zones:["Asia/Bangkok"]},KI:{zones:["Pacific/Kiritimati"]},KM:{zones:["Africa/Nairobi"]},KN:{zones:["America/Port_of_Spain"]},KP:{zones:["Asia/Pyongyang"]},KR:{zones:["Asia/Seoul"]},KW:{zones:["Asia/Riyadh"]},KY:{zones:["America/Cayman"]},KZ:{zones:["Asia/Almaty"]},LA:{zones:["Asia/Bangkok"]},LB:{zones:["Asia/Beirut"]},LC:{zones:["America/Port_of_Spain"]},LI:{zones:["Europe/Zurich"]},LK:{zones:["Asia/Colombo"]},LR:{zones:["Africa/Monrovia"]},LS:{zones:["Africa/Johannesburg"]},LT:{zones:["Europe/Vilnius"]},LU:{zones:["Europe/Luxembourg"]},LV:{zones:["Europe/Riga"]},LY:{zones:["Africa/Tripoli"]},MA:{zones:["Africa/Casablanca"]},MC:{zones:["Europe/Monaco"]},MD:{zones:["Europe/Chisinau"]},ME:{zones:["Europe/Belgrade"]},MF:{zones:["America/Port_of_Spain"]},MG:{zones:["Africa/Nairobi"]},MH:{zones:["Pacific/Majuro"]},MK:{zones:["Europe/Belgrade"]},ML:{zones:["Africa/Abidjan"]},MM:{zones:["Asia/Rangoon"]},MN:{zones:["Asia/Ulaanbaatar"]},MO:{zones:["Asia/Macau"]},MP:{zones:["Pacific/Guam"]},MQ:{zones:["America/Martinique"]},MR:{zones:["Africa/Abidjan"]},MS:{zones:["America/Port_of_Spain"]},MT:{zones:["Europe/Malta"]},MU:{zones:["Indian/Mauritius"]},MV:{zones:["Indian/Maldives"]},MW:{zones:["Africa/Maputo"]},MX:{zones:["America/Mexico_City","America/Cancun","America/Chihuahua","America/Santa_Isabel"]},MY:{zones:["Asia/Kuala_Lumpur"]},MZ:{zones:["Africa/Maputo"]},NA:{zones:["Africa/Windhoek"]},NC:{zones:["Pacific/Noumea"]},NE:{zones:["Africa/Lagos"]},NF:{zones:["Pacific/Norfolk"]},NG:{zones:["Africa/Lagos"]},NI:{zones:["America/Managua"]},NL:{zones:["Europe/Berlin","Europe/Amsterdam"]},NO:{zones:["Europe/Oslo"]},NP:{zones:["Asia/Kathmandu"]},NR:{zones:["Pacific/Nauru"]},NU:{zones:["Pacific/Niue"]},NZ:{zones:["Pacific/Auckland"]},OM:{zones:["Asia/Dubai"]},PA:{zones:["America/Panama"]},PE:{zones:["America/Lima"]},PF:{zones:["Pacific/Tahiti"]},PG:{zones:["Pacific/Port_Moresby"]},PH:{zones:["Asia/Manila"]},PK:{zones:["Asia/Karachi"]},PL:{zones:["Europe/Warsaw"]},PM:{zones:["America/Miquelon"]},PN:{zones:["Pacific/Pitcairn"]},PR:{zones:["America/Puerto_Rico"]},PS:{zones:["Asia/Gaza"]},PT:{zones:["Atlantic/Azores"]},PW:{zones:["Pacific/Palau"]},PY:{zones:["America/Asuncion"]},QA:{zones:["Asia/Qatar"]},RE:{zones:["Indian/Reunion"]},RO:{zones:["Europe/Bucharest"]},RS:{zones:["Europe/Belgrade"]},RU:{zones:["Europe/Kaliningrad","Europe/Moscow","Europe/Samara","Asia/Yekaterinburg","Asia/Novosibirsk","Asia/Krasnoyarsk","Asia/Irkutsk","Asia/Yakutsk","Asia/Vladivostok","Asia/Magadan","Asia/Srednekolymsk","Asia/Kamchatka"]},RW:{zones:["Africa/Maputo"]},SA:{zones:["Asia/Riyadh"]},SB:{zones:["Pacific/Guadalcanal"]},SC:{zones:["Indian/Mahe"]},SD:{zones:["Africa/Khartoum"]},SE:{zones:["Europe/Berlin","Europe/Stockholm"]},SG:{zones:["Asia/Singapore"]},SH:{zones:["Africa/Abidjan"]},SI:{zones:["Europe/Belgrade"]},SJ:{zones:["Europe/Oslo"]},SK:{zones:["Europe/Prague"]},SL:{zones:["Africa/Abidjan"]},SM:{zones:["Europe/Rome"]},SN:{zones:["Africa/Abidjan"]},SO:{zones:["Africa/Nairobi"]},SR:{zones:["America/Paramaribo"]},SS:{zones:["Africa/Khartoum"]},ST:{zones:["Africa/Abidjan"]},SV:{zones:["America/El_Salvador"]},SX:{zones:["America/Curacao"]},SY:{zones:["Asia/Damascus"]},SZ:{zones:["Africa/Johannesburg"]},TC:{zones:["America/Grand_Turk"]},TD:{zones:["Africa/Ndjamena"]},TF:{zones:["Indian/Reunion"]},TG:{zones:["Africa/Abidjan"]},TH:{zones:["Asia/Bangkok"]},TJ:{zones:["Asia/Dushanbe"]},TK:{zones:["Pacific/Fakaofo"]},TL:{zones:["Asia/Dili"]},TM:{zones:["Asia/Ashgabat"]},TN:{zones:["Africa/Tunis"]},TO:{zones:["Pacific/Tongatapu"]},TR:{zones:["Europe/Istanbul"]},TT:{zones:["America/Port_of_Spain"]},TV:{zones:["Pacific/Funafuti"]},TW:{zones:["Asia/Taipei"]},TZ:{zones:["Africa/Nairobi"]},UA:{zones:["Europe/Kiev"]},UG:{zones:["Africa/Nairobi"]},UM:{zones:["Pacific/Honolulu"]},US:{zones:["America/New_York","America/Chicago","America/Denver","America/Phoenix","America/Los_Angeles","America/Anchorage","Pacific/Honolulu"]},UY:{zones:["America/Montevideo"]},UZ:{zones:["Asia/Tashkent"]},VA:{zones:["Europe/Rome"]},VC:{zones:["America/Port_of_Spain"]},VE:{zones:["America/Caracas"]},VG:{zones:["America/Port_of_Spain"]},VI:{zones:["America/Port_of_Spain"]},VN:{zones:["Asia/Bangkok"]},VU:{zones:["Pacific/Efate"]},WF:{zones:["Pacific/Wallis"]},WS:{zones:["Pacific/Apia"]},YE:{zones:["Asia/Riyadh"]},YT:{zones:["Africa/Nairobi"]},ZA:{zones:["Africa/Johannesburg"]},ZM:{zones:["Africa/Maputo"]},ZW:{zones:["Africa/Maputo"]}},c.is_new_teacher=function(a,b){var c=moment.utc(b).unix(),d=moment.utc(a).unix();return d>c?!0:!1}}(window,document),angular.module("base.i18n",["pascalprecht.translate","ngCookies"]).filter("t",["$parse","$translate",function(a,b){var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return b.statefulFilter()&&(c.$stateful=!0),c}]).filter("prettyDate",["$translate","$rootScope",function(a,b){return function(c){var d=a.instant,e="",f=moment(c).utc(),g=parseInt((moment().utc()-f)/1e3,10);1>g&&(g=1);var h=parseInt(g/60/60/24,10),i=parseInt(g/60/60,10)-24*h,j=parseInt(g/60,10)-60*parseInt(g/60/60,10),g=g-60*parseInt(g/60,10),k=d("C0033").split(":");if(6!=k.length&&(k=["year(s)","month(s)","day(s)","hour(s)","minute(s)","second(s)"]),h>30)e=b.currentUser&&b.currentUser.timezone?moment(f).tz(b.currentUser.timezone_iana).format("LL"):moment(f).format("LL");else{for(var l=[0,0,h,i,j,g],m=2;6>m;m++)if(l[m]>0||5==m){var n=k[m];n=l[m]>1?n.replace("(s)","s"):n.replace("(s)",""),e=l[m]+" "+n;break}e=d("C0035").replace("{0}",e).replace("{1}","")}return e}}]),angular.module("base.filters",["ngSanitize","base.i18n"]).filter("unsafe",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("dateSeparator",function(){return function(a,b){if(angular.isNumber(a)){var c=["year","month","day","hour","minute","seconds"],d="C0033".translate().split(":"),b=b||"month",e=c.indexOf(b);0>e&&(e=1);var f=d[e];return a>1&&f.replace("(s)",""),"{0} {1}".format(a,f)}}}).filter("titleRevert",function(){return function(a){var b="";return a&&(b=a.replace(/[\s.]+/g,"-")),b}}).filter("clearTZ",function(){return function(a){return angular.isString(a)?a.replace(/[+-][0-9]{4}/,""):""}}).filter("timezoneOffset",function(){return function(a){if(!a||!angular.isString(a))return"";var b=moment().tz(a);return b.format("(UTCZ)")}}).filter("avatar",["$location","ENV",function(a,b){return function(a,c){if(a=a?a:"no_pic",angular.isObject(a)&&(a.avatar_file_name?(a=a.avatar_file_name,a="T000000000"==a?"T0":a):a="no_pic"),"no_pic"==a)return"/static/images/no_pic{0}.jpg".format(c||150);var d=b.cdn.avatar.us;switch(c){case 100:c="_1";break;case 75:c="_2";break;case 50:c="_3";break;default:c=""}return d+"/"+a+"_Avatar"+c+".jpg"}}]).filter("nbimage",["$location","ENV",function(a,b){return function(a){var c=b.cdn.notebook.us;return c+"/"+a}}]).filter("format",function(){return function(a){var b=arguments;return a.replace(/\{(\d+)\}/g,function(a,c){var d=b[1*c+1];return angular.isUndefined(d)?"":d})}}).filter("im",function(){return function(a){return KP.Utils.get_im_type(a)}}).filter("rawText",function(){return function(a){var b=angular.element(a);return b?b.text():""}}).filter("delHtmlTag",[function(){return function(a){return a.replace(/<[^>]+>/g,"")}}]).filter("angularBracketsToEscape",function(){return function(a){return angular.isString(a)?a.replace(/</gm,"&lt;").replace(/>/gm,"&gt;"):a}}).filter("replaceLineToBr",function(){return function(a){return a&&angular.isString(a)?a.replace(/\r\n/g,"\n").replace(/\n/g,"<br/>").replace(/\r/g,"<br/>"):a}}).filter("userFlag",[function(){return function(a,b){if(!a)return"";var c="flag-icon flag-icon-"+a.toLowerCase();return b&&(c+=" flag-icon-squared"),c}}]).filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f],h=b[g].toLowerCase();if(-1!==a[g].toString().translate().toLowerCase().indexOf(h)){d=!0;break}}d&&c.push(a)}):c=a,c}}).filter("subStrLen",function(){return function(a,b,c){return c||(c="..."),KP.Utils.getInterceptedStr(a,b,c)}}).filter("toInt",function(){return function(a){return parseInt(a,10)}}).filter("rpStr1ToStr2",function(){return function(a,b,c){return a?a.replace(b,c):""}}).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(a=a.substr(0,e))}return a+(d||" …")}}).filter("waitMinutes",function(){return function(a,b){var c,d,e,f;return a?(d=moment().utc().unix(),e=moment(a).unix(),c=e-d,c>0&&1801>c?!1:0>c&&(f=moment().utc().subtract(b,"minutes").unix(),e>f)?!1:!0):void 0}}),angular.module("base.filters").filter("image",function(){return function(a){return"/static/images/"+a}}).filter("giftcardThemeImage",function(){return function(a){return"/static/images/giftcard/"+a+".png"}}).filter("printGiftcardGetTheme",["THEME",function(a){return function(b){if(b){var c,d=_.union(a.standard,_.union(a.birthday,a.startSign));return angular.forEach(d,function(a){a.v==b&&(c=a)}),"/static/images/giftcard/"+c.img+".png"}}}]),angular.module("base.router",["ui.router"]),angular.module("base.ui",["base.ui.modal","base.ui.tooltip","base.ui.alert"]),angular.module("base.ui.util.dimensions",[]).factory("dimensions",["$document","$window",function(a,b){var c=(angular.element,{}),d=c.nodeName=function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()};c.css=function(a,b,c){var d;return d=a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a)[b]:a.style[b],c===!0?parseFloat(d)||0:d},c.offset=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument;return{width:a.offsetWidth,height:a.offsetHeight,top:b.top+(window.pageYOffset||c.documentElement.scrollTop)-(c.documentElement.clientTop||0),left:b.left+(window.pageXOffset||c.documentElement.scrollLeft)-(c.documentElement.clientLeft||0)}},c.position=function(a){var b,f,g={top:0,left:0};return"fixed"===c.css(a,"position")?f=a.getBoundingClientRect():(b=e(a),f=c.offset(a),f=c.offset(a),d(b,"html")||(g=c.offset(b)),g.top+=c.css(b,"borderTopWidth",!0),g.left+=c.css(b,"borderLeftWidth",!0)),{width:a.offsetWidth,height:a.offsetHeight,top:f.top-g.top-c.css(a,"marginTop",!0),left:f.left-g.left-c.css(a,"marginLeft",!0)}};var e=function(a){var b=a.ownerDocument,e=a.offsetParent||b;if(d(e,"#document"))return b.documentElement;for(;e&&!d(e,"html")&&"static"===c.css(e,"position");)e=e.offsetParent;return e||b.documentElement};return c.height=function(a,b){var d=a.offsetHeight;return b?d+=c.css(a,"marginTop",!0)+c.css(a,"marginBottom",!0):d-=c.css(a,"paddingTop",!0)+c.css(a,"paddingBottom",!0)+c.css(a,"borderTopWidth",!0)+c.css(a,"borderBottomWidth",!0),d},c.width=function(a,b){var d=a.offsetWidth;return b?d+=c.css(a,"marginLeft",!0)+c.css(a,"marginRight",!0):d-=c.css(a,"paddingLeft",!0)+c.css(a,"paddingRight",!0)+c.css(a,"borderLeftWidth",!0)+c.css(a,"borderRightWidth",!0),d},c}]),angular.module("base.ui.modal",["base.ui.util.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"center",template:"views/ui/modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function(b,c,d,e,f,g,h,i,j,k){function l(b){function e(a){a.target===a.currentTarget&&("static"===g.backdrop?f.focus():f.hide())}var f={},g=f.$options=angular.extend({},a,b);f.$promise=n(g.template);var i=f.$scope=g.scope&&g.scope.$new()||c.$new();g.element||g.container||(g.container="body"),o(["title","content"],function(a){g[a]&&(i[a]=j.trustAsHtml(g[a]))}),i.$hide=function(){i.$$postDigest(function(){f.hide()})},i.$show=function(){i.$$postDigest(function(){f.show()})},i.$toggle=function(){i.$$postDigest(function(){f.toggle()})},g.contentTemplate&&(f.$promise=f.$promise.then(function(a){var c=angular.element(a);return n(g.contentTemplate).then(function(a){var d=m('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var k,l,t=angular.element('<div class="'+g.prefixClass+'-backdrop"/>');return f.$promise.then(function(a){angular.isObject(a)&&(a=a.data),g.html&&(a=a.replace(s,'ng-bind-html="')),a=p.apply(a),k=d(a),f.init()}),f.init=function(){g.show&&i.$$postDigest(function(){f.show()})},f.destroy=function(){l&&(l.remove(),l=null),t&&(t.remove(),t=null),i.$destroy()},f.show=function(){i.$emit(g.prefixEvent+".show.before",f);var a=g.container?m(g.container):null,b=g.container?null:g.element;l=f.$element=k(i,function(a,b){}),l.css({display:"block"}).addClass(g.placement),g.animation&&(g.backdrop&&t.addClass(g.backdropAnimation),l.addClass(g.animation)),g.backdrop&&h.enter(t,r,null,function(){}),h.enter(l,a,b,function(){i.$emit(g.prefixEvent+".show",f)}),i.$isShown=!0,i.$$phase||i.$root.$$phase||i.$digest();var c=l[0];q(function(){c.focus()}),r.addClass(g.prefixClass+"-open"),g.animation&&r.addClass(g.prefixClass+"-with-"+g.animation),g.backdrop&&(l.on("click",e),t.on("click",e)),g.keyboard&&l.on("keyup",f.$onKeyUp)},f.hide=function(){i.$emit(g.prefixEvent+".hide.before",f),h.leave(l,function(){i.$emit(g.prefixEvent+".hide",f),r.removeClass(g.prefixClass+"-open"),g.animation&&r.addClass(g.prefixClass+"-with-"+g.animation)}),g.backdrop&&h.leave(t,function(){}),i.$isShown=!1,i.$$phase||i.$root.$$phase||i.$digest(),g.backdrop&&(l.off("click",e),t.off("click",e)),g.keyboard&&l.off("keyup",f.$onKeyUp)},f.toggle=function(){i.$isShown?f.hide():f.show()},f.focus=function(){l[0].focus()},f.$onKeyUp=function(a){27===a.which&&f.hide()},f}function m(a,b){return angular.element((b||document).querySelectorAll(a))}function n(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var o=angular.forEach,p=String.prototype.trim,q=b.requestAnimationFrame||b.setTimeout,r=angular.element(b.document.body),s=/ng-bind="/gi;return l}]}).directive("bsModal",["$window","$location","$sce","$modal",function(a,b,c,d){return{restrict:"EAC",scope:!0,link:function(a,b,e,f){var g={scope:a,element:b,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),angular.forEach(["title","content"],function(b){e[b]&&e.$observe(b,function(d,e){a[b]=c.trustAsHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var h=d(g);b.on(e.trigger||"click",h.toggle),a.$on("$destroy",function(){h.destroy(),g=null,h=null})}}}]),angular.module("base.ui.tooltip",["base.ui.util.dimensions"]).provider("$tooltip",function(){var a=this.defaults={animation:"am-fade",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,placement:"top",template:"views/ui/tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions","$$rAF",function(b,c,d,e,f,g,h,i,j,k){function l(b,e){function f(){return"body"===r.container?j.offset(b[0]):j.position(b[0])}function g(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}var i={},l=b[0].nodeName.toLowerCase(),r=i.$options=angular.extend({},a,e);i.$promise=n(r.template);var s=i.$scope=r.scope&&r.scope.$new()||c.$new();r.delay&&angular.isString(r.delay)&&(r.delay=parseFloat(r.delay)),r.title&&(i.$scope.title=r.title),s.$hide=function(){s.$$postDigest(function(){i.hide()})},s.$show=function(){s.$$postDigest(function(){i.show()})},s.$toggle=function(){s.$$postDigest(function(){i.toggle()})},i.$isShown=s.$isShown=!1;var t,u;r.contentTemplate&&(i.$promise=i.$promise.then(function(a){var b=angular.element(a);return n(r.contentTemplate).then(function(a){var c=m('[ng-bind="content"]',b[0]);return c.length||(c=m('[ng-bind="title"]',b[0])),c.removeAttr("ng-bind").html(a),b[0].outerHTML})}));var v,w,x,y;return i.$promise.then(function(a){angular.isObject(a)&&(a=a.data),r.html&&(a=a.replace(q,'ng-bind-html="')),a=o.apply(a),x=a,v=d(a),i.init()}),i.init=function(){r.delay&&angular.isNumber(r.delay)&&(r.delay={show:r.delay,hide:r.delay}),"self"===r.container?y=b:r.container&&(y=m(r.container));var a=r.trigger.split(" ");angular.forEach(a,function(a){"click"===a?b.on("click",i.toggle):"manual"!==a&&(b.on("hover"===a?"mouseenter":"focus",i.enter),b.on("hover"===a?"mouseleave":"blur",i.leave),"button"===l&&"hover"!==a&&b.on(p?"touchstart":"mousedown",i.$onFocusElementMouseDown))}),r.show&&s.$$postDigest(function(){"focus"===r.trigger?b[0].focus():i.show()})},i.destroy=function(){for(var a=r.trigger.split(" "),c=a.length;c--;){var d=a[c];"click"===d?b.off("click",i.toggle):"manual"!==d&&(b.off("hover"===d?"mouseenter":"focus",i.enter),b.off("hover"===d?"mouseleave":"blur",i.leave),"button"===l&&"hover"!==d&&b.off(p?"touchstart":"mousedown",i.$onFocusElementMouseDown))}w&&(w.remove(),w=null),s.$destroy()},i.enter=function(){return clearTimeout(t),u="in",r.delay&&r.delay.show?void(t=setTimeout(function(){"in"===u&&i.show()},r.delay.show)):i.show()},i.show=function(){s.$emit(r.prefixEvent+".show.before",i);var a=r.container?y:null,c=r.container?null:b;w&&w.remove(),w=i.$element=v(s,function(a,b){}),w.css({top:"0px",left:"0px",display:"block"}).addClass(r.placement),r.animation&&w.addClass(r.animation),r.type&&w.addClass(r.prefixClass+"-"+r.type),h.enter(w,a,c,function(){s.$emit(r.prefixEvent+".show",i)}),i.$isShown=s.$isShown=!0,s.$$phase||s.$root.$$phase||s.$digest(),k(i.$applyPlacement),r.keyboard&&("focus"!==r.trigger?(i.focus(),w.on("keyup",i.$onKeyUp)):b.on("keyup",i.$onFocusKeyUp))},i.leave=function(){return clearTimeout(t),u="out",r.delay&&r.delay.hide?void(t=setTimeout(function(){"out"===u&&i.hide()},r.delay.hide)):i.hide()},i.hide=function(a){return i.$isShown?(s.$emit(r.prefixEvent+".hide.before",i),h.leave(w,function(){s.$emit(r.prefixEvent+".hide",i)}),i.$isShown=s.$isShown=!1,s.$$phase||s.$root.$$phase||s.$digest(),r.keyboard&&null!==w&&w.off("keyup",i.$onKeyUp),a&&"focus"===r.trigger?b[0].blur():void 0):void 0},i.toggle=function(){i.$isShown?i.leave():i.enter()},i.focus=function(){w[0].focus()},i.$applyPlacement=function(){if(w){var a=f(),b=w.prop("offsetWidth"),c=w.prop("offsetHeight"),d=g(r.placement,a,b,c);d.top+="px",d.left+="px",w.css(d)}},i.$onKeyUp=function(a){27===a.which&&i.hide()},i.$onFocusKeyUp=function(a){27===a.which&&b[0].blur()},i.$onFocusElementMouseDown=function(a){a.preventDefault(),a.stopPropagation(),i.$isShown?b[0].blur():b[0].focus()},i}function m(a,b){return angular.element((b||document).querySelectorAll(a))}function n(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var o=String.prototype.trim,p="createTouch"in b.document,q=/ng-bind="/gi;return l}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(a,b,c,d,e){return{restrict:"EAC",scope:!0,link:function(a,b,f,g){var h={scope:a};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","type"],function(a){angular.isDefined(f[a])&&(h[a]=f[a])}),angular.forEach(["title"],function(b){f[b]&&f.$observe(b,function(d,f){a[b]=c.trustAsHtml(d),angular.isDefined(f)&&e(function(){i&&i.$applyPlacement()})})}),f.bsTooltip&&a.$watch(f.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.title=b,angular.isDefined(c)&&e(function(){i&&i.$applyPlacement()})},!0);var i=d(b,h);a.$on("$destroy",function(){i.destroy(),h=null,i=null})}}}]),angular.module("base.ui.alert",["base.ui.modal"]).provider("$alert",function(){var a=this.defaults={animation:"am-fade",prefixClass:"alert",placement:null,template:"/views/ui/alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1};this.$get=["$modal","$timeout",function(b,c){function d(d){var e={},f=angular.extend({},a,d);e=b(f),f.type&&(e.$scope.type=f.type);var g=e.show;return f.duration&&(e.show=function(){g(),c(function(){e.hide()},1e3*f.duration)}),e}return d}]}).directive("bsAlert",["$window","$location","$sce","$alert",function(a,b,c,d){a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,b,e,f){var g={scope:a,element:b,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),angular.forEach(["title","content","type"],function(b){e[b]&&e.$observe(b,function(d,e){a[b]=c.trustAsHtml(d)})}),e.bsAlert&&a.$watch(e.bsAlert,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var h=d(g);b.on(e.trigger||"click",h.toggle),a.$on("$destroy",function(){h.destroy(),g=null,h=null})}}}]).directive("focusMe",["$timeout",function(a){return{scope:{trigger:"=focusMe"},link:function(b,c,d){b.$watch("trigger",function(d){d===!0&&a(function(){c[0].focus(),b.trigger=!1},400)})}}}]).directive("clickMe",["$timeout",function(a){return{scope:{trigger:"=clickMe"},link:function(b,c,d){b.$watch("trigger",function(d){d===!0&&a(function(){c[0].click(),b.trigger=!1})})}}}]).service("alertModal",["$q","$modal","$rootScope",function(a,b,c){function d(d,e,f,g){var h=a.defer(),i=c.$new();return b.open({scope:i,size:"sm",templateUrl:"/views/ui/alert/alert.modal.html",windowClass:"course-list-modal",controller:["$scope",function(a){a.fnOK=function(){h.resolve(a)},g&&g.warn&&(a.warnMode=!0),a.title=e||"Please confirm",a.content=f||"Are you sure?",a.$on("$destroy",function(){})}]}),h.promise}this.warn=function(a){return d(null," ",a,{warn:!0})},this.open=function(a,b,c){return d(a,b,c)}}]),angular.module("base.cookies",["ngCookies"]),angular.module("base.sanitize",["ngSanitize"]),angular.module("base",["base.router","base.cookies","base.sanitize","base.ui","base.filters"]),angular.module("kp.components",[]),angular.module("kp.components").directive("italkiTabs",["$window",function(a){return{restrict:"E",templateUrl:function(a,b){return b.$italkiTabs=a.html(),"/views/components/tabs/tabs.html"},controller:["$scope","$attrs","$compile","$element","$timeout",function(a,b,c,d,e){a.tabs=[],a.currentTabIndex=0,a.changeTab=function(b){var c=d.find(".italki-tab-label-indicator"),e=d.find(".italki-tabs-labels"),f=d.find(".italki-tabs-label").eq(b),g=f.width(),h=f.offset().left-d.offset().left,i=e.outerWidth()-h-g;a.currentTabIndex>b?c.removeClass("italki-tab-indicator-right").addClass("italki-tab-indicator-left"):c.addClass("italki-tab-indicator-right").addClass("italki-tab-indicator-left"),c.css({left:h,right:i}),a.currentTabIndex=b},this.insertTab=function(b){a.tabs.push(b)};var f=angular.element(d[0].querySelector("italki-tabs-data"));f.html(b.$italkiTabs).hide(),c(f.contents())(a),e(function(){a.changeTab(0)},0,!1)}],link:function(b,c){angular.element(a).on("resize",function(){if(angular.element(a).width()>767){var b=c.find(".italki-tab-label-indicator"),d=c.find(".italki-tabs-labels"),e=c.find(".italki-active-tab"),f=e.width(),g=e.offset().left-c.offset().left,h=d.outerWidth()-g-f;b.css({left:g,right:h})}})}}}]).directive("italkiTabTemplate",["$compile",function(a){return{restrict:"A",scope:{template:"=italkiTabTemplate"},link:function(b,c,d){c.html(b.template),a(c.contents())(b.$parent.$parent)}}}]).directive("italkiTabLabelTemplate",["$compile",function(a){return{restrict:"A",scope:{template:"=italkiTabLabelTemplate"},link:function(b,c,d){c.html(b.template),a(c.contents())(b.$parent.$parent)}}}]),angular.module("kp.components").directive("italkiTab",function(){return{restrict:"E",require:"^?italkiTabs",compile:function(a){var b=a.find("italki-tab-label").html(),c=a.find("italki-tab-body").html();return function(a,d,e,f){f.insertTab({label:b,body:c})}}}}),angular.module("kp.components").directive("italkiTabLabel",function(){return{restrict:"E"}}),function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Geetest requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a){this._obj=a}function d(a){var b=this;new c(a)._each(function(a,c){b[a]=c})}if("undefined"==typeof a)throw new Error("Geetest requires browser environment");var e=a.document,f=a.Math,g=e.getElementsByTagName("head")[0];c.prototype={_each:function(a){var b=this._obj;for(var c in b)b.hasOwnProperty(c)&&a(c,b[c]);return this}},d.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var a=this;return i(a.type)?a.fallback_config[a.type]:a.new_captcha?a.fallback_config.fullpage:a.fallback_config.slide},_extend:function(a){var b=this;new c(a)._each(function(a,c){b[a]=c})}};var h=function(a){return"number"==typeof a},i=function(a){return"string"==typeof a},j=function(a){return"boolean"==typeof a},k=function(a){return"object"==typeof a&&null!==a},l=function(a){return"function"==typeof a},m={},n={},o=function(){return parseInt(1e4*f.random())+(new Date).valueOf()},p=function(a,b){var c=e.createElement("script");c.charset="UTF-8",
c.async=!0,c.onerror=function(){b(!0)};var d=!1;c.onload=c.onreadystatechange=function(){d||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(d=!0,setTimeout(function(){b(!1)},0))},c.src=a,g.appendChild(c)},q=function(a){return a.replace(/^https?:\/\/|\/$/g,"")},r=function(a){return a=a.replace(/\/+/g,"/"),0!==a.indexOf("/")&&(a="/"+a),a},s=function(a){if(!a)return"";var b="?";return new c(a)._each(function(a,c){(i(c)||h(c)||j(c))&&(b=b+encodeURIComponent(a)+"="+encodeURIComponent(c)+"&")}),"?"===b&&(b=""),b.replace(/&$/,"")},t=function(a,b,c,d){b=q(b);var e=r(c)+s(d);return b&&(e=a+b+e),e},u=function(a,b,c,d,e){var f=function(g){var h=t(a,b[g],c,d);p(h,function(a){a?g>=b.length-1?e(!0):f(g+1):e(!1)})};f(0)},v=function(b,c,d,e){if(k(d.getLib))return d._extend(d.getLib),void e(d);if(d.offline)return void e(d._get_fallback_config());var f="geetest_"+o();a[f]=function(b){e("success"===b.status?b.data:b.status?d._get_fallback_config():b),a[f]=void 0;try{delete a[f]}catch(c){}},u(d.protocol,b,c,{gt:d.gt,callback:f},function(a){a&&e(d._get_fallback_config())})},w=function(a,b){var c={networkError:"网络错误"};if("function"!=typeof b.onError)throw new Error(c[a]);b.onError(c[a])},x=function(){return!!a.Geetest};x()&&(n.slide="loaded");var y=function(b,c){var e=new d(b);b.https?e.protocol="https://":b.protocol||(e.protocol=a.location.protocol+"//"),v([e.api_server||e.apiserver],e.type_path,e,function(b){var d=b.type,f=function(){e._extend(b),c(new a.Geetest(e))};m[d]=m[d]||[];var g=n[d]||"init";"init"===g?(n[d]="loading",m[d].push(f),u(e.protocol,b.static_servers||b.domains,b[d]||b.path,null,function(a){if(a)n[d]="fail",w("networkError",e);else{n[d]="loaded";for(var b=m[d],c=0,f=b.length;f>c;c+=1){var g=b[c];l(g)&&g()}m[d]=[]}})):"loaded"===g?f():"fail"===g?w("networkError",e):"loading"===g&&m[d].push(f)})};return a.initGeetest=y,y}),angular.module("kp.util",[]).service("kpBrowserLan",function(){var a=function(){var a,b,c=window.navigator,d=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(c.languages))for(a=0;a<c.languages.length;a++)if(b=c.languages[a],b&&b.length)return b;for(a=0;a<d.length;a++)if(b=c[d[a]],b&&b.length)return b;return null},b=function(){return"cn"==KP.COUNTRY&&"zh"==a().substring(0,2)?!0:!1};return{getFirstBrowserLanguage:a,isCnUser:b}}),angular.module("kp.util").service("userUtils",function(){this.isTeacher=function(a){return a&&(a.is_pro||a.is_tutor)}}),angular.module("kp.search",["restangular","kp.util"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("search",{parent:"kp",url:"/search?q",templateUrl:"views/search/search.html",controller:"SearchPageCtrl",data:{role:"user"}})}]),angular.module("kp.search").controller("SearchCtrl",["$scope","$state",function(a,b){a.onSearch=function(c){c&&13==c.keyCode&&a.q&&b.transitionTo("search",{q:a.q})}}]).controller("searchPageCtrl",["$scope","$stateParams","searchRes","userUtils",function(a,b,c,d){a.isTeacher=d.isTeacher,a.q=b.q,a.search=function(){c.fetch(a.q).then(function(b){a.items=b,a.meta=b.meta})},a.search()}]),angular.module("kp.search").service("searchRes",["Restangular",function(a){var b=a.all("api/search");this.fetch=function(a){return b.getList({q:a})}}]),angular.module("kp.user",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("user",{url:"/user/{id:int}",templateUrl:"/views/user/profile.bs.html",controller:"UserProfileCtrl"})}]),angular.module("kp.user").constant("Badges",[{id:1,img:"lc_donation",title:"Diversity Language Challenge",subtitle:"BD403"},{id:12,img:"lc_12h",title:"Diversity Language Challenge",subtitle:"LC332",hours:"12"},{id:16,img:"lc_16h",title:"Diversity Language Challenge",subtitle:"LC332",hours:"16"},{id:19,img:"lc_19h",title:"Diversity Language Challenge",subtitle:"LC332",hours:"19"},{id:20,img:"lc_20h",title:"Diversity Language Challenge",subtitle:"LC332",hours:"20"},{id:7412,img:"lc_7412h",title:"October 2017 Language Challenge",subtitle:"LC332",hours:"12"},{id:7416,img:"lc_7416h",title:"October 2017 Language Challenge",subtitle:"LC332",hours:"16"},{id:7419,img:"lc_7419h",title:"October 2017 Language Challenge",subtitle:"LC332",hours:"19"},{id:7420,img:"lc_7420h",title:"October 2017 Language Challenge",subtitle:"LC332",hours:"20"},{id:8112,img:"lc_8112h",title:"italki New Year Language Challenge",subtitle:"LC332",hours:"12"},{id:8116,img:"lc_8116h",title:"italki New Year Language Challenge",subtitle:"LC332",hours:"16"},{id:8119,img:"lc_8119h",title:"italki New Year Language Challenge",subtitle:"LC332",hours:"19"},{id:8120,img:"lc_8120h",title:"italki New Year Language Challenge",subtitle:"LC332",hours:"20"}]).controller("UserProfileCtrl",["$rootScope","$location","UserService","$scope","$stateParams","$log","$translate","$sce","ItalkiMessageBox","User","$modal","$state","LoginService","EmailNotActive","localStorageService","Badges",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c.isOnline()||d.$on("kp_account_quick_login_success",function(){l.reload()}),d.$prevState&&"partner"==d.$prevState.name&&(d.canBackToSearch=!0),d.backToSearch=function(){l.go(d.$prevState.name,d.$prevStateParams)};var q=this,r=g.instant;q.userId=e.id,d.isSelf=function(){return d.currentUser&&e.id===d.currentUser.id},q.getUserActivities=function(){return j.getUserActivityList(q.userId).get({page:d.activities.page,page_size:10}).then(function(a){d.activities.items=d.activities.page>1?_.union(d.activities.items,a.data):a.data,d.activities.meta=a.meta})},d.activities={page:1,loadMore:function(){return q.getUserActivities(++this.page)}},q.initData=function(){j.profile(q.userId).then(function(b){var c=b.data;null!=c.exam_result_shown_obj&&(a.initData=b.data);var e=c.last_login_time;e&&(c.last_login_time_from_now=moment(e).fromNow()),d.user=c,d.meta=b.meta,a.url_id=null!=d.user.exam_result_shown_obj?d.user.exam_result_shown_obj.url_id:"",d.user.student_z_course_session_is_public&&(j.getTeachers(q.userId,1,4).then(function(a){d.teachers=a}),j.getSessionRatings(q.userId,d.user.textid).then(function(a){d.sessRatings=a.data}),t()),d.user.friend_list_is_public&&j.getFriends(q.userId,1,4).then(function(a){d.friends=a}),q.getUserActivities(d.activities.page);var f=[],g=[];angular.forEach(d.user.language_obj_s,function(a){a.is_learning&&f.push(r(a.language)),7==a.level&&g.push(r(a.language))}),d.speaks=g.join(","),d.learns=f.join(","),angular.forEach(KP.COUNTRRY_ARR,function(a){return a.v==d.user.origin_country_id?(d.fromCT=r(a.l),!0):void 0});var h=[],i=d.user.badges;angular.forEach(p,function(a){angular.forEach(i,function(b){a.id==b&&h.push(a)})}),d.badgeItems=h},function(a){d.error=a})},d.openBadges=function(){k.open({size:"",backdrop:"static",scope:d,templateUrl:"/views/user/modal/profile.badges.html"})};var s=1;d.LatestSession={items:[]};var t=function(){return j.getLatestSessions(q.userId,d.user.textid,s).then(function(a){d.LatestSession.items=_.union(d.LatestSession.items,a.data),d.LatestSession.meta=a.meta},function(a){})["finally"](function(){d.loadMoreFlag=!1})};d.loadMoreLatestSession=function(){return d.loadMoreFlag=!0,t(++s)},q.initData(),d.openDatas=function(c){var e="",f=null,g=1,h=20;switch(c){case"NOTEBOOK":if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/notebook".format(b.path())}),0==d.user.notebook_count)return;e="/views/user/modal/profile.notebooks.html",f=j.getNotebooks;break;case"QUESTION":if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/questions".format(b.path())}),0==d.user.question_count)return;e="/views/user/modal/profile.questions.html",f=j.getQuestions;break;case"DISCUSSION":if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/discussions".format(b.path())}),0==d.user.discussion_count)return;e="/views/user/modal/profile.discussions.html",f=j.getDiscussions;break;case"FRIEND":if(!d.friends||!d.friends.meta.has_next)return;h=30,e="/views/user/modal/profile.friends.html",f=j.getFriends;break;case"TEACHER":if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/teachers".format(b.path())}),!d.teachers||!d.teachers.meta.has_next)return;h=30,e="/views/user/modal/profile.teachers.html",f=j.getTeachers;break;default:return}d.data={items:null,meta:null};var i=function(a){return f(q.userId,a,h).then(function(b){d.data.items=a>1?_.union(d.data.items,b.data):b.data,d.data.meta=b.meta})};i(1),k.open({scope:d,size:"",templateUrl:e,controller:["$scope",function(b){a.$on("kp.BrowserBackOrForwardBtnClick",function(){b.$dismiss()}),b.loadMore=function(){return g++,i(g)}}]})},d.openOxford=function(a){"false"!=o.get("displayBadge")&&k.open({scope:a,size:"",templateUrl:"/views/user/oxford.html",controller:["$scope","$rootScope","User","$log",function(a,b,c,d){null!=b.initData.exam_result_shown_obj&&c.getOxford(b.initData.exam_result_shown_obj.url_id+"").get().then(function(b){d.info("Oxford: ",b.data),a.loadReady=!0,a.user=b.data,a.level=a.user.level,a.exam_date=a.user.exam_date;var c=b.data;a.showDetailedResults="1"==c.is_shown?!0:!1,a.examObj=c},function(b){a.error=b})}]})},d.today=function(){d.dt=new Date(1990,1,2)},d.today(),d.clear=function(){d.dt=null},d.open=function(a){a.preventDefault(),a.stopPropagation(),d.opened=!0},d.dateOptions={formatYear:"yyyy",startingDay:1},d.format="yyyy-MM-dd",d.openModalInstance=function(){n.open()},d.chatWithMe=function(a){m.open()||n.open()||i.chatWith(a)},d.blockUserCallback=function(a){d.user.is_blocker=1,d.user.is_send_friend_request=0},d.html=function(a){return a?h.trustAsHtml(a.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/\n/g,"<br/>")):""}}]).controller("UserProfileEditCtrl",["$scope","$stateParams","$log","$translate","ItalkiMessageBox","User","Teacher","Account",function(a,b,c,d,e,f,g,h){var i=this;d.instant;i.userId=b.id,a.isSelf=function(){return!!a.currentUser},i.getUserProfile=function(){f.getEditProfile().then(function(b){c.debug("user profile:",b),a.user=b.data,a.meta=b.meta;var d=[],e=[];angular.forEach(a.user.language_obj_s,function(b){b.is_learning?(b.language==a.user.learning_language?b.is_primary=1:b.is_primary=0,b.level||(b.level=0),d.push(b)):7==b.level?e.push(b.language):(b.is_primary=0,d.push(b))}),a.user.speaks=e,a.user.learns=d,(a.user.is_tutor||a.user.is_pro)&&(a.teacher={teacher_info_obj:a.user.teacher_info_obj,teacher_change_obj:a.user.teacher_change_obj})},function(a){})},i.initData=function(){a.isSelf()&&i.getUserProfile()},a.currentUser?i.initData():a.$on("kp_account_autoLogin_success",function(a,b){i.initData()})}]),angular.module("kp.user").constant("teacher_material_json",[{id:1,check:!1,name:"ST410"},{id:2,check:!1,name:"ST411"},{id:3,check:!1,name:"ST412"},{id:4,check:!1,name:"ST413"},{id:5,check:!1,name:"ST414"},{id:6,check:!1,name:"ST415"},{id:7,check:!1,name:"ST416"},{id:8,check:!1,name:"ST417"},{id:9,check:!1,name:"ST418"},{id:10,check:!1,name:"ST419"},{id:11,check:!1,name:"ST420"},{id:12,check:!1,name:"ST421"}]).directive("kpUserBasicInformation",function(){return{restrict:"E",templateUrl:"/views/user/directives/basic.information.html",scope:{user:"="},controller:["$scope","$translate","$modal","User","$timeout","Account","DataLayerService","EmptyPromise","$window","UserService","$log",function(a,b,c,d,e,f,g,h,i,j,k){KP.timezones?a.timezones=KP.timezones:f.getTimezones().then(function(b){a.timezones=b.data,KP.timezones=b.data}),a.maxDate=new Date;var l=a.maxDate.getFullYear(),m=l-100,n=[],o=[1,2,3,4,5,6,7,8,9,10,11,12],p=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],q=_.union(p,[29,30,31]);a.selYear="",a.selMonth="",a.selDay="",a.selYears=n,a.selMonths=o,a.selDays=q;for(var r=l;r>m;r--)n.push(r);var s=function(a){return a%4===0&&a%100!==0||a%400===0},t=function(b,c,d){var e=0;2==c?s(b)?(d>29&&(d=29),e=1):d>28&&(d=28):2==c||4==c||6==c||9==c||11==c?(d>30&&(d=30),e=2):(1==c||3==c||5==c||7==c||8==c||10==c||12==c)&&(d>31&&(d=31),e=3),u(e),a.selYear=b,a.selMonth=c,a.selDay=d},u=function(b){q=_.union(p,[]),1==b?q.push(29):2==b?(q.push(29),q.push(30)):3==b&&(q.push(29),q.push(30),q.push(31)),a.selDays=q},v=function(){a.selYear?a.selMonth?2==a.selMonth?s(a.selYear)?(u(1),a.selDay&&a.selDay>29&&(a.selDay=29)):(u(0),a.selDay&&a.selDay>28&&(a.selDay=28)):2==a.selMonth||4==a.selMonth||6==a.selMonth||9==a.selMonth||11==a.selMonth?(u(2),a.selDay&&a.selDay>30&&(a.selDay=30)):(1==a.selMonth||3==a.selMonth||5==a.selMonth||7==a.selMonth||8==a.selMonth||10==a.selMonth||12==a.selMonth)&&(u(3),a.selDay&&a.selDay>31&&(a.selDay=31)):u(3):a.selMonth?2==a.selMonth?(u(1),a.selDay&&a.selDay>29&&(a.selDay=29)):2==a.selMonth||4==a.selMonth||6==a.selMonth||9==a.selMonth||11==a.selMonth?(u(2),a.selDay&&a.selDay>30&&(a.selDay=30)):(1==a.selMonth||3==a.selMonth||5==a.selMonth||7==a.selMonth||8==a.selMonth||10==a.selMonth||12==a.selMonth)&&(u(3),a.selDay&&a.selDay>31&&(a.selDay=31)):u(3)};a.changDOB=v,a.dob="",a.format="yyyy-MM-dd",a.getUserTime=function(a){return a?moment(new Date).tz(a).format("LLL"):""};var w=angular.copy(KP.LANSEL),x=b.instant;angular.forEach(w,function(a){a.name=x(a.v)}),a.lans=w;var y=angular.copy(KP.COUNTRRY_ARR);angular.forEach(y,function(a){a.name=x(a.l)}),y=_.union([{v:"",name:x("C0061")}],y),a.countries=y,a.uiItems={name:x(a.user.origin_country_id),v:a.user.origin_country_id},a.uiSelected=function(b,c){a.user.origin_country_id=b.v,a.user.origin_city_id="",a.changCity(0,a.user.origin_country_id)},a.uiItems1={name:x(a.user.living_country_id),v:a.user.living_country_id},a.uiSelected1=function(b,c){a.user.living_country_id=b.v,a.user.living_city_id="",a.changCity(1,a.user.living_country_id)},a.filter={fcitys:[],lcitys:[]},a.changCity=function(a,b){z(a,[]),""!=b&&d.getCitys().get({country_id:b}).then(function(b){z(a,b.data)})};var z=function(b,c){c.push({id:"ZZ00000",native_name:x("C0087"),english_name:"other"}),0==b?a.filter.fcitys=c:a.filter.lcitys=c},A=function(){a.user?C():e(A,200)},B={},C=function(){if(a.user.origin_country_id){if(a.user.dob)try{t(parseInt(a.user.dob.substr(0,4)),parseInt(a.user.dob.substr(4,2)),parseInt(a.user.dob.substr(6,2)))}catch(b){a.dob=""}a.changCity(0,a.user.origin_country_id)}a.user.living_country_id&&a.changCity(1,a.user.living_country_id),angular.extend(B,angular.copy(a.user)),a.user_clone_nickname=B.nickname,a.user_clone_origin_country_id=B.origin_country_id,a.user_clone_pay_info_obj=B.pay_info_obj};A();var D=!1;a.saveFlag=D;var E=function(a,b,c){if(!a||!b||!c)return null;var d,e,f;d=a+"",e=10>b?"0"+b:""+b,f=10>c?"0"+c:""+c;var g=d+e+f;return g};a.save=function(){if(a.isTeacher()||B.origin_country_id!=a.user.origin_country_id||B.living_city_id!=a.user.living_city_id&&(B.living_city_id||"ZZ00000"!=a.user.living_city_id)||B.living_country_id!=a.user.living_country_id||B.nickname!=a.user.nickname||B.timezone!=a.user.timezone||B.gender!=a.user.gender||B.dob!==E(a.selYear,a.selMonth,a.selDay)){if(D)return h.getEmptyPromise();if(D=!0,!a.user.nickname||!a.user.origin_country_id||!a.user.living_country_id||!a.user.timezone||a.user.nickname&&(a.user.nickname.length<3||a.user.nickname.length>20))return D=!1,h.getEmptyPromise();if(a.isTeacher()){if(B.origin_country_id==a.user.origin_country_id&&(B.living_city_id==a.user.living_city_id||!B.living_city_id&&"ZZ00000"==a.user.living_city_id)&&B.living_country_id==a.user.living_country_id&&B.nickname==a.user.nickname&&B.timezone==a.user.timezone&&B.gender==a.user.gender&&B.dob===E(a.selYear,a.selMonth,a.selDay)&&B.pay_info_obj.pay_firstname==a.user.pay_info_obj.pay_firstname&&B.pay_info_obj.pay_lastname==a.user.pay_info_obj.pay_lastname&&B.pay_info_obj.pay_address==a.user.pay_info_obj.pay_address&&B.pay_info_obj.pay_country_code==a.user.pay_info_obj.pay_country_code&&B.pay_info_obj.pay_phone==a.user.pay_info_obj.pay_phone)return;if(!a.user.pay_info_obj.pay_country_code||!a.user.pay_info_obj.pay_phone)return D=!1,h.getEmptyPromise()}var b={nickname:a.user.nickname,living_country_id:a.user.living_country_id,timezone:a.user.timezone,gender:a.user.gender};return a.isTeacher()&&angular.extend(b,{pay_firstname:a.user.pay_info_obj.pay_firstname,pay_lastname:a.user.pay_info_obj.pay_lastname,pay_address:a.user.pay_info_obj.pay_address,pay_country_code:a.user.pay_info_obj.pay_country_code,pay_phone:a.user.pay_info_obj.pay_phone}),a.isChange()||B.origin_country_id==a.user.origin_country_id&&B.origin_city_id==a.user.origin_city_id&&B.origin_city_name==a.user.origin_city_name||(b.origin_country_id=a.user.origin_country_id),b.origin_country_id&&a.user.origin_city_id&&(b.origin_city_id=a.user.origin_city_id,"ZZ00000"==a.user.origin_city_id&&a.user.origin_city_name&&(b.origin_city_name=a.user.origin_city_name)),a.user.living_city_id&&(b.living_city_id=a.user.living_city_id,"ZZ00000"==a.user.living_city_id&&a.user.living_city_name&&(b.living_city_name=a.user.living_city_name)),a.selYear&&a.selMonth&&a.selDay&&(b.dob=a.selYear+"-"+a.selMonth+"-"+a.selDay),f.setUserProfile().post(b).then(function(b){return g.update(),D=!1,a.user.dob=E(a.selYear,a.selMonth,a.selDay),a.user.timezone_iana=F(a.user.timezone),!a.isTeacher()||a.isChange()||B.origin_country_id==a.user.origin_country_id&&B.origin_city_id==a.user.origin_city_id&&B.origin_city_name==a.user.origin_city_name||(a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{origin_country_id:!0}):a.user.teacher_change_obj={origin_country_id:!0},angular.extend(B,a.user)),a.isTeacher()&&!a.isChangeName()&&B.nickname!=a.user.nickname&&(a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{nickname:!0}):a.user.teacher_change_obj={nickname:!0}),a.isTeacher()&&!a.isChangePhoneOrCountryCode()&&B.pay_info_obj.pay_country_code!==a.user.pay_info_obj.pay_country_code&&(a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{phone:!0}):a.user.teacher_change_obj={phone:!0}),a.isTeacher()&&!a.isChangePhoneOrCountryCode()&&B.pay_info_obj.pay_phone!==a.user.pay_info_obj.pay_phone&&(a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{phone:!0}):a.user.teacher_change_obj={phone:!0}),angular.extend(B,a.user),KP.API.SUCC},function(a){return KP.API.ERROR})}};var F=function(a){var b="";return angular.forEach(KP.timezones,function(c){return c.v==a?(b=c.vl,!0):void 0}),b};a.editAvatar=function(){var b=c.open({templateUrl:"/views/user/directives/user.avatar.edit.html",controller:"EditUserAvatar",resolve:{userObject:function(){return a.user}}});b.result.then(function(b){b.isTeacher?a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{avatar_file_name:!0}):a.user.teacher_change_obj={avatar_file_name:!0}:angular.element("#user_avatar")[0].src=b.avatar_url},function(){})},a.isTeacher=function(){return a.user.is_pro||a.user.is_tutor},a.isChange=function(){return a.isTeacher()&&a.user.teacher_change_obj&&(a.user.teacher_change_obj.origin_country_id||a.user.teacher_change_obj.origin_city_id||a.user.teacher_change_obj.origin_city_name)},a.isChangeName=function(){return a.isTeacher()&&a.user.teacher_change_obj&&a.user.teacher_change_obj.nickname},a.isChangeImg=function(){return a.isTeacher()&&a.user.teacher_change_obj&&a.user.teacher_change_obj.avatar_file_name?!0:!1},a.getContryText=function(a){var b="";return angular.forEach(y,function(c){return c.v==a?(b=c.l,!0):void 0}),b},a.getNickname=function(a){return a},a.clearNum=function(a,b){a[b]&&(a[b]=a[b].replace(/\D/g,""))},a.isChangePhoneOrCountryCode=function(){return a.isTeacher()&&a.user.teacher_change_obj&&a.user.teacher_change_obj.phone}}]}}).directive("uiMask",[function(){return{require:"ngModel",scope:{type:"@uiMask"},controller:["$scope",function(a){$.mask.definitions["~"]="[01]",$.mask.definitions["@"]="[0123]",$.mask.definitions["#"]="[12]",a.dob="#999-~9-@9",a.zip="999999"}],link:function(a,b,c,d){var e=$(b[0]);e.mask(a.$eval(a.type),{completed:function(){var b=this.val(),c=b.charAt(5),e=b.charAt(6),f=b.charAt(8),g=b.charAt(9);if("1"==c&&parseInt(e,10)>2&&(e="2"),"3"==f&&parseInt(g,10)>1){var h=c+e;g="01"==h||"03"==h||"05"==h||"07"==h||"08"==h||"10"==h||"12"==h?"1":"0"}b=b.substr(0,6)+e+b.substr(7,2)+g,this.val(b),a.$apply(function(){d.$setViewValue(this.val())})}}),d.$parsers.push(function(a){var b=a.length&&-1==a.indexOf("_");return b?a:void 0}),b.bind("keyup",function(){a.$apply(function(){d.$setViewValue(b.val())})})}}}]).directive("kpUserLanguage",function(){return{restrict:"E",templateUrl:"/views/user/directives/language.html",scope:{user:"="},controller:"EditUserLanguage"}}).directive("kpUserTeacherTags",function(){return{restrict:"E",templateUrl:"/views/user/directives/teacher.tags.html",scope:{teacher:"=",user:"="},controller:["$scope","$translate","User","$timeout","Account","Teacher","EmptyPromise","Restangular",function(a,b,c,d,e,f,g,h){var i=b.instant;a.tags=[{t:"ST701",d:"ST711",v:1,checked:!1},{t:"ST702",d:"ST713",v:2,checked:!1},{t:"ST703",d:"ST715",v:3,checked:!1},{t:"ST704",d:"ST717",v:4,checked:!1},{t:"ST705",d:"ST719",v:5,checked:!1}];var j=function(){var b=[];angular.forEach(KP.teacher_tag_child,function(c,d){angular.forEach(a.user.speaks,function(a){return c.language==a?(c.checked=!1,b.push(c),!0):void 0}),angular.forEach(a.user.learns,function(a){return a.level>4&&c.language==a.language?(c.checked=!1,b.push(c),!0):void 0})}),a.childTags=b,angular.forEach(a.teacher.teacher_info_obj.teacher_child_tags.split(","),function(b){angular.forEach(a.childTags,function(a){return b.toString()==a.id.toString()?(a.checked=!0,!0):void 0})})},k=function(){KP.teacher_tag_child?j():f.fetchTagChild().then(function(a){a&&a.data&&(KP.teacher_tag_child=a.data,j())})};k(),angular.forEach(a.teacher.teacher_info_obj.teacher_tags.split(","),function(b){angular.forEach(a.tags,function(a){return a.v.toString()==b.toString()?(a.checked=!0,!0):void 0})}),a.getChildTagsLabel=function(a){var b=a;return angular.forEach(KP.teacher_tag_child,function(c){return a==c.id.toString()?(b=i(c.abbr),!1):void 0}),b},a.getTagsLabel=function(b){var c=b;return angular.forEach(a.tags,function(a){return a.v.toString()==b?(c=i(a.t),!1):void 0}),c};var l=!1;a.saveFlag=l,a.save=function(){if(l)return g.getEmptyPromise();l=!0;var b=[],c=[];return angular.forEach(a.tags,function(a){a.checked&&b.push(a.v)}),angular.forEach(a.childTags,function(a){a.checked&&c.push(a.id)}),f.setTags({tags:b,child_tags:c}).then(function(a){return l=!1,KP.API.SUCC},function(a){return KP.API.ERROR})}}]}}).directive("kpUserTeacherSelftagging",function(){return{restrict:"E",templateUrl:"/views/user/directives/teacher.selftagging.html",scope:{teacher:"="},controller:["$scope","$translate","User","DataLayerService","$timeout","Account","Teacher","EmptyPromise","Restangular","alertModal","$modal","ShowSaveMsg",function(a,b,c,d,e,f,g,h,i,j,k,l){g.getTeacherTag().get({teacher_id:a.teacher.teacher_info_obj.user_id}).then(function(b){a.tagsOld=b.data.tag_list,a.tags=angular.copy(a.tagsOld)},function(a){})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1}),a.addTag=function(b){if(0!=a.tagText.length&&a.tags.length<10){if(a.checkTags(b),""==a.tagText)return!1;a.tags.push({tag_name:a.tagText,vote_count:0}),a.tagText=""}},a.checkTags=function(b){b&&angular.forEach(a.tags,function(b,c){return b.tag_name==a.tagText?(a.tagText="",!1):void 0})},a.removeTag=function(b){a.tags[b].vote_count>=0?k.open({scope:a,templateUrl:"/views/ui/alert/alert.modal1.html",controller:["$scope",function(a){a.fnOK1=function(){a.tags.splice(b,1),a.$dismiss()}}]}):a.tags.splice(b,1)},a.save=function(){if(a.tags!=a.tagsOld){a.obj=[],angular.forEach(a.tags,function(b,c){b.tag_id?a.obj.push({tag_id:b.tag_id,tag_name:b.tag_name,vote_count:b.vote_count}):a.obj.push({tag_name:b.tag_name})});var b=angular.toJson(a.obj);return i.all("teacher/personaltag").post({new_tag_list_json:b}).then(function(b){return a.tags=b.data.tag_list,KP.API.SUCC},function(a){l.open(angular.element("<body>"),a.msg)})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})}}}]}}).directive("tagInput",function(){return{restrict:"A",link:function(a,b,c){a.inputWidth=217,a.$watch(c.ngModel,function(a){}),b.bind("keydown",function(a){9==a.which&&a.preventDefault()}),b.bind("keyup",function(b){var d=b.which;(9==d||13==d)&&(b.preventDefault(),a.$apply(c.newTag))})}}}).directive("kpLandingIntroVideo",function(){return{restrict:"EA",scope:{thumbnail:"="},link:function(a,b){var c,d=document.getElementsByClassName("video-wrapper")[0],e=document.getElementsByTagName("video")[0],f=document.getElementById("videoPoster");angular.isDefined(a.thumbnail)&&(f.poster=a.thumbnail),videoMethods={renderVideoPlayButton:function(){d.contains(e)&&(this.formatVideoPlayButton(),e.classList.add("has-media-controls-hidden"),c=document.getElementsByClassName("video-overlay-play-button")[0],c.addEventListener("click",this.hideVideoPlayButton))},formatVideoPlayButton:function(){d.insertAdjacentHTML("beforeend",'                       <svg  version="1.1" viewBox="-34 0 145 80"  class="video-overlay-play-button">                       <path d="m .66,37.62 c 0,0 .66,4.70 2.70,6.77 2.58,2.71 5.98,2.63 7.49,2.91 5.43,.52 23.10,.68 23.12,.68 .00,-1.3e-5 14.29,-0.02 23.81,-0.71 1.32,-0.15 4.22,-0.17 6.81,-2.89 2.03,-2.07 2.70,-6.77 2.70,-6.77 0,0 .67,-5.52 .67,-11.04 l 0,-5.17 c 0,-5.52 -0.67,-11.04 -0.67,-11.04 0,0 -0.66,-4.70 -2.70,-6.77 C 62.03,.86 59.13,.84 57.80,.69 48.28,0 34.00,0 34.00,0 33.97,0 19.69,0 10.18,.69 8.85,.84 5.95,.86 3.36,3.58 1.32,5.65 .66,10.35 .66,10.35 c 0,0 -0.55,4.50 -0.66,9.45 l 0,8.36 c .10,4.94 .66,9.45 .66,9.45 z" fill="#1f1f1e" fill-opacity="0.81"></path>                       <path d="m 26.96,13.67 18.37,9.62 -18.37,9.55 -0.00,-19.17 z" fill="#fff"></path>                       <path d="M 45.02,23.46 45.32,23.28 26.96,13.67 43.32,24.34 45.02,23.46 z" fill="#ccc"></path>                       </svg>                    ')},hideVideoPlayButton:function(){e.play(),c.classList.add("is-hidden"),e.classList.remove("has-media-controls-hidden"),e.setAttribute("controls","controls")}},videoMethods.renderVideoPlayButton()}}}).directive("kpTeacherVideo",function(){return{restrict:"E",scope:{teacher:"="},templateUrl:"/views/user/directives/teacher.upload.video.html",controller:["$scope","$sce","experimentTest","EmptyPromise","ENV","Restangular","Account","DataLayerService","$modal","$translate","$upload","KPNotify",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(b,c){return a.teacher.teacher_change_obj&&a.teacher.teacher_change_obj[b]?c?a.teacher.teacher_change_obj[b]:1:c?a.teacher.teacher_info_obj[b]:0};a.teacher&&a.teacher.teacher_info_obj&&a.teacher.teacher_info_obj.first_valid_time&&(a.isNewTeacher=KP.is_new_teacher(a.teacher.teacher_info_obj.first_valid_time,e.newTeacherTime)),a.haveUploadVideo={have:!1,disable:!1},a.pageName="settingProfile",a.video_url={p:1,v:m("video_url",1),f:m("video_url"),r:m("video_url",1)},"test teacher apply video_url"==a.video_url.v&&(a.video_url.v="",a.video_url.r=!1),a.isURL=function(a){var b="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*().&=+$%-]+: )?[0-9a-z_!~*().&=+$%-]+@)?(([0-9]{1,3}[.]){3}[0-9]{1,3}|([0-9a-z_!~*()-]+[.]){0,}([0-9a-z][0-9a-z-]{0,61})?[0-9a-z][.][a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*().;?:@&=+$,%#-]+)+/?)$",c=new RegExp(b,"i");return c.test(a)};var n=!1;a.saveFlag=n,a.save=function(){if(n)return d.getEmptyPromise();n=!0;var b={},c=[];return!a.video_url.f&&a.video_url.v&&a.video_url.v!=a.video_url.r&&(b.video_url=a.video_url.v,c.push(a.video_url)),c.length>0?g.setTeacherProfile(b).then(function(b){return h.update(),a.video_url.p&&(a.video_url.f=1),n=!1,KP.API.SUCC},function(a){return n=!1,KP.API.ERROR}):(n=!1,d.getEmptyPromise())}}]}}).directive("kpUploadVideo",function(){return{restrict:"E",scope:{pageName:"=",haveUploadVideo:"="},templateUrl:"/views/kp/upload.video.html",controller:["$scope","$rootScope","$sce","experimentTest","EmptyPromise","Restangular","Account","DataLayerService","$modal","$translate","$upload","KPNotify","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l,m){"settingProfile"===a.pageName?(a.apply_teacher="0",a.showCol3=!0):(a.apply_teacher="1",a.showCol3=!1),a.data={name:"",size:"",detail:""},a.video={have:!1,url:"",thumbnail:"",uploadBtn:!0,maxSizeError:!1};var n=j.instant;a.haveVideoFile=!1,f.one("teacher/get_video").get().then(function(d){var e=d.data;if(angular.isDefined(e)){switch(a.is_primary=e.is_primary,a.status=e.status,a.video_id=e.video_id,a.video.thumbnail=e.thumbnail,a.is_succeeded=e.is_succeeded,a.status){case 0:case 1:case 2:case 9:b.nowUploadSuccess=!0,a.video.have=!1,a.video.uploadBtn=!1,a.progressVisible=!1,a.uploadSuccess=!0,a.data.detail="ST612";break;case 3:case 8:case 10:b.nowUploadSuccess=!1,a.video.have=!1,a.video.uploadBtn=!0;break;case 4:case 5:case 7:b.nowUploadSuccess=!0,a.video.have=!0,a.haveVideoFile=!0,angular.isString(e.qiniu_url)&&e.qiniu_url&&(a.video.url=c.trustAsResourceUrl(e.qiniu_url));break;case 6:b.nowUploadSuccess=!0,a.video.have=!0,a.haveVideoFile=!0,angular.isString(e.youtube_url)&&e.youtube_url&&(a.video.url=c.trustAsResourceUrl(e.youtube_url))}a.haveUploadVideo&&(a.haveUploadVideo.have=a.is_succeeded,a.haveUploadVideo.disable=!a.video.uploadBtn)}}),a.progressVisible=!1,b.nowUploadSuccess=!1;var o=null;a.uploadVideo=function(c,d){if(c){var e=c[0];if(a.data.name=e.name,a.data.size=m("bytes")(e.size),e.size>524288e3){if("1"!=d||a.haveVideoFile){if("2"==d||"1"==d&&a.haveVideoFile){a.video.have=!0;var f=n("ST613");l.appendWithContent(f)}}else a.video.uploadBtn=!0;a.video.maxSizeError=!0}else a.progress=0,a.video.have=!1,a.video.maxSizeError=!1,a.errorUpload=!1,a.progressVisible=!1,a.data.detail="",(a.haveVideoFile||"0"===d)&&(a.video.uploadBtn=!1),o=k.upload({url:KP.API.URL+"teacher/upload_video?{0}={1}&apply_teacher={2}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN],a.apply_teacher),method:"POST",fields:{i_token:KP.API.PARAMS[KP.CONSTANT.TOKEN]},file:e,fileFormDataName:"file"}).progress(function(b){a.progressVisible=!0,b.lengthComputable&&(a.progress=Math.round(100*b.loaded/b.total))}).success(function(c,d,e){a.progressVisible=!1,c.error?(b.nowUploadSuccess=!1,a.errorUpload=!0,a.data.detail="ST618",l.appendWithContent(c.error.type+" : "+c.error.msg)):(b.nowUploadSuccess=!0,a.errorUpload=!1,a.data.detail="ST612")}).error(function(){a.data.detail="ST618",a.errorUpload=!0,a.progressVisible=!1})}},a.delVideo=function(c){i.open({scope:a,templateUrl:"/views/component/delete.video.modal.html",controller:["$scope",function(a){a.delThisVideo=function(){var d={video_id:c};f.one("teacher").all("delete_video").post(d).then(function(c){b.nowUploadSuccess=!1,a.status=c.data.status,a.video.have=!1,a.video.uploadBtn=!0,a.video.maxSizeError=!1,a.$dismiss();var d=n("ST616");l.appendWithContent(d)})}}]})}}]}}).directive("kpUserTeacherProfileIntroduction",function(){return{restrict:"E",templateUrl:"/views/user/directives/teacher.profile.Introduction.html",scope:{teacher:"="},controller:["$scope","$modal","EmptyPromise","teacher_material_json","Account",function(a,b,c,d,e){var f=!1;if(a.saveFlag=f,a.teacherIntroduction={about_me:a.teacher.teacher_info_obj.about_me||a.teacher.teacher_change_obj.about_me||"",about_teacher:a.teacher.teacher_info_obj.about_teacher||a.teacher.teacher_change_obj.about_teacher||"",teaching_style:a.teacher.teacher_info_obj.teaching_style||a.teacher.teacher_change_obj.teaching_style||"",teacher_material_json:a.teacher.teacher_info_obj.teacher_material_json||a.teacher.teacher_change_obj.teacher_material_json||[]},a.isChangeTeacherObj=function(){return a.teacher.teacher_change_obj?a.teacher.teacher_change_obj.about_me||a.teacher.teacher_change_obj.about_teacher||a.teacher.teacher_change_obj.teaching_style||a.teacher.teacher_change_obj.teacher_material_json?!0:!1:void 0},a.teacherObjIsNull=function(){return a.teacher.teacher_info_obj.about_me&&a.teacher.teacher_info_obj.about_teacher&&a.teacher.teacher_info_obj.teaching_style&&a.teacher.teacher_info_obj.teacher_material_json?!1:!0},a.teacherIntroduction.teacher_material_json.length>0){var g=a.teacherIntroduction.teacher_material_json.slice(1,-1),d=angular.copy(d);angular.forEach(d,function(a){angular.forEach(g.split(","),function(b){a.id==b&&(a.check=!0);
})})}a.teacher_material_json=d,a.checkMaterial=function(){var b=[];return angular.forEach(a.teacher_material_json,function(a){a.check&&b.push(a.id)}),a.teacherIntroduction.teacher_material_json=b,0===b.length?!1:!0},a.checkObj=function(){return!a.teacherIntroduction.about_me||a.teacherIntroduction.about_me.length<10||a.teacherIntroduction.about_me.length>700?!1:!a.teacherIntroduction.about_teacher||a.teacherIntroduction.about_teacher.length>500||a.teacherIntroduction.about_teacher.length<10?!1:!a.teacherIntroduction.teaching_style||a.teacherIntroduction.teaching_style.length>500||a.teacherIntroduction.teaching_style.length<10?!1:a.teacherIntroduction.about_me===a.teacher.teacher_info_obj.about_me&&a.teacherIntroduction.about_teacher===a.teacher.teacher_info_obj.about_teacher&&a.teacherIntroduction.teaching_style===a.teacher.teacher_info_obj.teaching_style&&angular.toJson(a.teacherIntroduction.teacher_material_json)===a.teacher.teacher_info_obj.teacher_material_json?!1:a.checkMaterial()?!0:!1},a.save=function(){if(a.submitFlag=!0,a.checkObj()&&!a.isChangeTeacherObj()){if(f)return c.getEmptyPromise();f=!0,b.open({scope:a,size:"sm",backdrop:"static",templateUrl:"/views/user/modal/profile.introduction.confirm.html",windowClass:"confirm-introduction-modal",controller:["$scope",function(a){f=!1,a.submitIntroduction=function(){return a.$close(),a.teacherIntroduction.teacher_material_json=angular.toJson(a.teacherIntroduction.teacher_material_json),e.setTeacherProfile(a.teacherIntroduction).then(function(b){return b.data.success?(a.teacher.teacher_change_obj?angular.extend(a.teacher.teacher_change_obj,{about_me:a.teacherIntroduction.about_me,about_teacher:a.teacherIntroduction.about_teacher,teaching_style:a.teacherIntroduction.teaching_style,teacher_material_json:a.teacherIntroduction.teacher_material_json}):a.teacher.teacher_change_obj={about_me:a.teacherIntroduction.about_me,about_teacher:a.teacherIntroduction.about_teacher,teaching_style:a.teacherIntroduction.teaching_style,teacher_material_json:a.teacherIntroduction.teacher_material_json},a.pendingApproval=!0,f=!0,KP.API.SUCC):void 0},function(a){return f=!1,KP.API.ERROR})}}]})}}}]}}).directive("kpUserTeacherProfileInformation",function(){return{restrict:"E",templateUrl:"/views/user/directives/teacher.profile.information.html",scope:{teacher:"="},controller:["$scope","$translate","User","$filter","$sce","DataLayerService","localStorageService","$upload","$log","$timeout","Account","Teacher","EmptyPromise","Restangular","$modal","KPNotify",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=function(b,c){return a.teacher.teacher_change_obj&&a.teacher.teacher_change_obj[b]?c?a.teacher.teacher_change_obj[b]:1:c?a.teacher.teacher_info_obj[b]:0};a.objParams={interest:{p:0,v:q("interest",1),f:0,r:q("interest",1)},intro:{p:0,v:q("intro",1),f:0,r:q("intro",1)},introduction:{p:1,v:q("introduction",1),f:q("introduction"),r:q("introduction",1)}};var r=!1;a.saveFlag=r,a.save=function(){if(r)return m.getEmptyPromise();r=!0;var b={},c=[];for(var d in a.objParams)!a.objParams[d].f&&a.objParams[d].v&&a.objParams[d].v!=a.objParams[d].r&&(b[d]=a.objParams[d].v,c.push(d));return c.length>0?k.setTeacherProfile(b).then(function(b){return f.update(),angular.forEach(c,function(b){a.objParams[b].p&&(a.objParams[b].f=1)}),r=!1,KP.API.SUCC},function(a){return r=!1,KP.API.ERROR}):(r=!1,m.getEmptyPromise())}}]}}).directive("kpUserStudentProfileInformation",function(){return{restrict:"E",templateUrl:"/views/user/directives/student.profile.information.html",scope:{user:"="},controller:["$scope","$translate","DataLayerService","User","$timeout","Account","Teacher","EmptyPromise",function(a,b,c,d,e,f,g,h){a.objParams={interest:{p:0,v:a.user.user_detail_obj.interest,f:0,r:a.user.user_detail_obj.interest},intro:{p:0,v:a.user.intro,f:0,r:a.user.intro},introduction:{p:0,v:a.user.user_detail_obj.introduction,f:0,r:a.user.user_detail_obj.introduction}};var i=!1;a.saveFlag=i,a.save=function(){if(i)return h.getEmptyPromise();i=!0;var b={},d=[];for(var e in a.objParams)!a.objParams[e].f&&a.objParams[e].v&&a.objParams[e].v!=a.objParams[e].r&&(b[e]=a.objParams[e].v,d.push(e));return d.length>0?f.setUserProfile().post(b).then(function(b){return c.update(),angular.forEach(d,function(b){a.objParams[b].p&&(a.objParams[b].f=1)}),i=!1,KP.API.SUCC},function(a){return i=!1,KP.API.ERROR}):(i=!1,h.getEmptyPromise())}}]}}).directive("kpUserProfileOxford",function(){return{restrict:"E",templateUrl:"/views/user/directives/profile.oxford.html",scope:{user:"="},transclude:!0,controller:["$scope","$log","$translate","$q","User","$interval","Account","Teacher","EmptyPromise","localStorageService",function(a,b,c,d,e,f,g,h,i,j){a.displayValue=!1;var k,l,m,n=[],o=[],p=[],q=[];g.getOet().get().then(function(c){b.info("OET: ",c.data),a.oet=c.data;var d=c.data.exam_result_obj_s,e=d.length,f=c.data.exam_result_shown_obj;a.currentUrlId=null!=f?f.url_id:"noDisplay",0==e&&null==f?a.displayOET=!1:0!=e&&null==f?a.displayOET=!0:0!=e&&null!=f&&(a.displayOET=!0),0!=e&&null==f?a.displayValue="false":0!=e&&null!=f&&(a.displayValue=f.url_id),l=null!=f?f.url_id:"noDisplay",k=l,angular.forEach(d,function(a,b){n.push(a.url_id),o.push(a.id),p.push(a.is_shown),q.push(a.is_shown)})}),a.registerClick=function(b){a.currentUrlId=b,l&&b!=m&&(l=b)},a.registerCheckbox=function(a,b){0!=q.length&&(q[b]="1"==q[b]?"0":"1")},a.save=function(){function a(){g++,g==f&&b.resolve(KP.API.SUCC)}for(var b=d.defer(),c=p.length,f=0,g=0,h=0;c>h;h++)q[h]!=p[h]&&(f++,e.postOxfordPublic(o[h],q[h])["finally"](function(){a(),p[h]=q[h]}));if("noDisplay"==l)f++,e.postOxfordBadge(0)["finally"](function(){a(),j.set("displayBadge","false"),k="noDisplay"});else if(l!=k){f++;for(var h=0;c>h;h++)if(n[h]==l){m=o[h],e.postOxfordBadge(m)["finally"](function(){a(),j.set("displayBadge","true"),k=n[h]});break}}return 0!=f?b.promise:void 0}}]}}).directive("kpUserCommunicationTools",function(){return{restrict:"E",templateUrl:"/views/user/directives/communication.tools.html",scope:{user:"=",teacher:"="},controller:["$scope","$translate","User","$timeout","Account","Teacher","EmptyPromise","$log",function(a,b,c,d,e,f,g,h){function i(){a.objParams={skype_account:{p:0,v:a.user.user_detail_obj.skype_account,f:0,r:a.user.user_detail_obj.skype_account},qq_account:{p:0,v:a.user.user_detail_obj.qq_account,f:0,r:a.user.user_detail_obj.qq_account},google_talk_account:{p:0,v:a.user.user_detail_obj.google_talk_account,f:0,r:a.user.user_detail_obj.google_talk_account},face_time_account:{p:0,v:a.user.user_detail_obj.face_time_account,f:0,r:a.user.user_detail_obj.face_time_account},wechat_account:{p:0,v:a.user.user_detail_obj.wechat_account,f:0,r:a.user.user_detail_obj.wechat_account}},a.teacher&&(a.objParams.has_video_class={p:0,v:a.teacher.teacher_info_obj.has_video_class,f:0,r:a.teacher.teacher_info_obj.has_video_class})}a.objParams,i();var j=!1;a.saveFlag=j,a.allBlank=!1,a.save=function(){if(j)return g.getEmptyPromise();var b=0;if(""===a.objParams.skype_account.v&&b++,""===a.objParams.qq_account.v&&b++,""===a.objParams.google_talk_account.v&&b++,""===a.objParams.face_time_account.v&&b++,""===a.objParams.wechat_account.v&&b++,5==b)return a.allBlank=!0,g.getEmptyPromise();a.allBlank=!1,j=!0;var c={},d=[];for(var f in a.objParams)a.objParams[f].f||a.objParams[f].v==a.objParams[f].r||(c[f]=0==a.objParams[f].v?0:a.objParams[f].v,d.push(f));return!a.teacher||a.objParams.has_video_class.f||a.objParams.has_video_class.v||a.objParams.has_video_class.r==a.objParams.has_video_class.v||(c.has_video_class=0,d.push("has_video_class")),d.length>0?e.setUserProfile().post(c).then(function(b){return angular.forEach(d,function(b){a.objParams[b].p&&(a.objParams[b].f=1)}),j=!1,KP.API.SUCC},function(a){return j=!1,KP.API.ERROR})["finally"](function(){}):(j=!1,g.getEmptyPromise())}}]}}).directive("kpUserResumeCv",function(){return{restrict:"E",templateUrl:"/views/user/directives/resume.cv.html",scope:{teacher:"="},controller:["$scope","$translate","$modal","User","$timeout","Account","Teacher","alertModal",function(a,b,c,d,e,f,g,h){var i=b.instant;g.getEduExpCer().then(function(b){a.eduExpCer=b.data});var j=!1;a.saveFlag=j,a.save=function(){g.setTags({tags:[],child_tags:[]}).then(function(a){j=!1})},a.addExperience=function(){var b=c.open({templateUrl:"/views/user/directives/experience.model.html",controller:"AddUserExperience",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,city:b.city,start_year:b.start_year,user_id:a.teacher.id,description:b.description,country:b.country_id,company:b.company,job:b.job,end_year:b.end_year,id:b.id};a.eduExpCer.experience_obj_s.push(c)},function(){})},a.addEducation=function(){var b=c.open({templateUrl:"/views/user/directives/education.model.html",controller:"AddUserEducation",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,start_year:b.start_year,user_id:a.teacher.id,description:b.description,level:b.level,institution:b.institution,major:b.major,end_year:b.end_year,id:b.id,file_ext:b.file_ext};a.eduExpCer.education_obj_s.push(c)},function(){})},a.addCertificate=function(){var b=c.open({templateUrl:"/views/user/directives/certificate.model.html",controller:"AddUserCertificate",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,user_id:a.teacher.id,description:b.description,institution:b.institution,certificate:b.certificate,end_year:b.end_year,id:b.id,file_ext:b.file_ext};a.eduExpCer.certificate_obj_s.push(c)},function(){})},a.moveExperience=function(b,c){h.open(a,i("C1008"),i("C0050")).then(function(d){g.moveExperience(b.id).then(function(b){a.eduExpCer.experience_obj_s.splice(c,1),d.$close()},function(a){d.$close()})})},a.moveEducation=function(b,c){h.open(a,i("C1008"),i("C0050")).then(function(d){g.moveEducation(b.id).then(function(b){a.eduExpCer.education_obj_s.splice(c,1),d.$close()},function(a){d.close()})})},a.moveCertificate=function(b,c){h.open(a,i("C1008"),i("C0050")).then(function(d){g.moveCertificate(b.id).then(function(b){a.eduExpCer.certificate_obj_s.splice(c,1),d.$close()},function(a){d.$close()})})}}]}}).directive("kpTeacherCancellationPolicy",function(){return{restrict:"E",scope:{teacher:"="},templateUrl:"/views/user/directives/teacher.cancellation.policy.html",controller:["$scope","Account",function(a,b){a.cancel_policy=angular.copy(a.teacher.teacher_info_obj.cancel_policy),a.saveFlag=!1,a.editCancellationPolicy=function(){a.cancellationPolicyo=!1},a.teacher.teacher_info_obj.cancel_policy=a.teacher.teacher_info_obj.cancel_policy||"",a.checkPolicy=function(){return""===a.teacher.teacher_info_obj.cancel_policy?!1:a.teacher.teacher_info_obj.cancel_policy.length<10||a.teacher.teacher_info_obj.cancel_policy.length>700?!1:a.cancel_policy===a.teacher.teacher_info_obj.cancel_policy?!1:!0},a.isChangePolicy=function(){return a.teacher.teacher_change_obj&&a.teacher.teacher_change_obj.cancel_policy},a.save=function(){return a.saveFlag=!0,a.checkPolicy()?b.setTeacherProfile({cancel_policy:a.teacher.teacher_info_obj.cancel_policy}).then(function(b){return b.data.success?(a.teacher.teacher_change_obj?angular.extend(a.teacher.teacher_change_obj,{cancel_policy:!0}):a.user.teacher_change_obj={cancel_policy:!0},a.cancel_policy=a.teacher.teacher_info_obj.cancel_policy,a.saveFlag=!1,KP.API.SUCC):void 0},function(b){return a.saveFlag=!1,KP.API.ERROR}):void 0}}]}}).controller("AddUserExperience",["$scope","$modalInstance","$translate","eduExpCer","EmptyPromise","Teacher",function(a,b,c,d,e,f){function g(){var b=[];b.push({v:2155,l:"to now"});for(var c=i;c>=l.start_year.v;c--)b.push({v:c,l:c});l.end_year.v=2155,p=b,a.endYears=p}function h(a){var b={r:!0};for(var c in a){if(b.r=m(a[c]),!b.r)break;b[c]=a[c].v}return b}var i=parseInt((new Date).getFullYear(),10),j=i-76,k=c.instant,l={start_year:{v:i,min:4,max:4},end_year:{v:2155,min:4,max:4},company:{v:"",min:2,max:100},job:{v:"",min:2,max:100},country_id:{v:"",min:2,max:300},city:{v:"",min:2,max:50},description:{v:"",min:0,max:500}},m=KP.Utils.at_m_n;a.vv=m,a.formObj=l;for(var n=[],o=i;o>j;o--)n.push({v:o,l:o});var p=[];a.startYears=n,a.makeToYears=g,g();var q=angular.copy(KP.COUNTRRY_ARR);angular.forEach(q,function(a){a.name=k(a.l)}),a.countries=q;var r=!1;a.saveFlag=r,a.vSubFlag=!0,a.save=function(){if(r)return e.getEmptyPromise();r=!0,a.vSubFlag=!1;var c=h(l);return c.r?f.addExperience(c).then(function(d){return c.id=d.data.id,b.close(c),a.vSubFlag=!0,r=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,r=!1,KP.API.ERROR}):(r=!1,e.getEmptyPromise())}}]).controller("AddUserEducation",["$scope","$modalInstance","$upload","eduExpCer","EmptyPromise","Teacher",function(a,b,c,d,e,f){function g(){for(var b=[],c=j+l;c>=m.start_year.v;c--)b.push({v:c,l:c});m.end_year.v=j+l,q=b,a.endYears=q}function h(a){var b={r:!0};for(var c in a){if(b.r=n(a[c]),!b.r)break;b[c]=a[c].v}return b}function i(a){return("image/jpeg"==a.type.toLowerCase()||"application/pdf"==a.type.toLowerCase())&&a.size<8388608?!0:void 0}var j=parseInt((new Date).getFullYear(),10),k=j-76,l=2,m={start_year:{v:j,min:4,max:4},end_year:{v:j+l,min:4,max:4},institution:{v:"",min:2,max:100},major:{v:"",min:2,max:100},level:{v:"",min:1,max:1},description:{v:"",min:0,max:500}},n=KP.Utils.at_m_n;a.vv=n,a.formObj=m;for(var o=[],p=j;p>k;p--)o.push({v:p,l:p});var q=[];a.startYears=o,a.makeToYears=g,g();var r=!1;a.saveFlag=r,a.vSubFlag=!0,a.save=function(){if(r)return e.getEmptyPromise();r=!0,a.vSubFlag=!1;var d=a.files;if(d&&d.length&&!i(d[0]))return r=!1,e.getEmptyPromise();var f=h(m);if(f.r){var g=null;return d&&d.length&&(g=d[0]),c.upload({url:KP.API.URL+"teacher/education?{0}={1}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN]),fields:f,file:g,fileFormDataName:"file"}).then(function(c){return f.id=c.data.data.id,c.data.data.file_ext&&(f.file_ext=c.data.data.file_ext),b.close(f),a.vSubFlag=!0,r=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,r=!1,KP.API.ERROR})}return r=!1,e.getEmptyPromise()},a.checkFileType=i}]).controller("AddUserCertificate",["$scope","$modalInstance","$upload","eduExpCer","EmptyPromise","Teacher",function(a,b,c,d,e,f){function g(a){var b={r:!0};for(var c in a){if(b.r=l(a[c]),!b.r)break;b[c]=a[c].v}return b}function h(a){return("image/jpeg"==a.type.toLowerCase()||"application/pdf"==a.type.toLowerCase())&&a.size<8388608?!0:void 0}var i=parseInt((new Date).getFullYear(),10),j=i-76,k={end_year:{v:i,min:4,max:4},certificate:{v:"",min:2,max:200},institution:{v:"",min:2,max:200},description:{v:"",min:0,max:500}},l=KP.Utils.at_m_n;a.vv=l,a.formObj=k;for(var m=[],n=i;n>j;n--)m.push({v:n,l:n});a.startYears=m;var o=!1;a.saveFlag=o,a.vSubFlag=!0,a.save=function(){if(o)return e.getEmptyPromise();o=!0,a.vSubFlag=!1;var d=a.files;if(!(d&&d.length&&h(d[0])))return o=!1,e.getEmptyPromise();var f=g(k);if(f.r){var i=d[0];return c.upload({url:KP.API.URL+"teacher/certificate?{0}={1}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN]),fields:f,file:i,fileFormDataName:"file"}).then(function(c){return f.id=c.data.data.id,f.file_ext=c.data.data.file_ext,b.close(f),a.vSubFlag=!0,o=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,o=!1,KP.API.ERROR})}return o=!1,e.getEmptyPromise()},a.checkFileType=h}]).controller("EditUserAvatar",["$scope","$modalInstance","$upload","userObject","EmptyPromise","Teacher",function(a,b,c,d,e,f){function g(a){var b=a.type.toLowerCase();return"image/jpeg"==b||"image/gif"==b||"image/png"==b?!0:!1}var h=!1;a.saveFlag=h,a.vSubFlag=!0,a.save=function(){if(h)return e.getEmptyPromise();h=!0,a.vSubFlag=!1;var f=a.files;if(!(f&&f.length&&g(f[0])))return h=!1,e.getEmptyPromise();var j=i(a.myCroppedImage);return c.upload({url:KP.API.URL+"account/avatar/modify?{0}={1}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN]),file:j,fileFormDataName:"file"}).then(function(c){if(a.vSubFlag=!0,h=!1,c.data.error)return KP.API.ERROR;var e={upload:!0};if(d.is_pro||d.is_t)e.isTeacher=!0;else{e.url=c.data.data.url;var f=c.data.data.avatar_url.match(/[^\/]+$/g);f&&(e.avatar_file_name=f[0].split("_")[0])}return e.avatar_url=c.data.data.avatar_url,b.close(e),KP.API.SUCC},function(b){return a.vSubFlag=!0,h=!1,KP.API.ERROR})},a.checkFileType=g,a.myImage="",a.myCroppedImage="",a.setImage=function(b){if(b&&b.length){var c=b[0],d=new FileReader;d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result})},d.readAsDataURL(c)}};var i=function(a){for(var b=a.split(","),c=atob(b[1]),d=b[0].split(":")[1].split(";")[0],e=[],f=0;f<c.length;f++)e.push(c.charCodeAt(f));return new Blob([new Uint8Array(e)],{type:d})}}]).directive("kpUserSessionsWithTeacher",function(){return{restrict:"EA",scope:{data:"="},templateUrl:"/views/user/directives/student.session.with.teacher.html",controller:["$scope","User",function(a,b){var c=0,d=KP.Utils.textIdToId(a.data.student_textid),e=a.data.teacher_textid,f=a.data.student_textid;a.items=[{session_id:a.data.session_id,session_start_time:a.data.session_start_time,session_start_time_user:a.data.session_start_time_user,session_end_time_user:a.data.session_end_time_user,session_duration:a.data.session_duration,student_comment:a.data.student_comment,teacher_comment:a.data.teacher_comment,learn_language:a.data.learn_language}];var g=function(){b.getSessionsWithTeacher(d,f,e,c).then(function(b){a.items=_.union(a.items,b.data),a.meta=b.meta},function(a){})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};a.loadMore=function(){a.loadMoreFlag=!0,g(++c)}}]}}).controller("EditUserLanguage",["$scope","$translate","DataLayerService","User","$timeout","Account","EmptyPromise",function(a,b,c,d,e,f,g){a.isTeacher=function(){return a.user.is_pro||a.user.is_tutor},a.isChange=function(){return a.user.teacher_change_obj&&(a.user.teacher_change_obj.speak_languages||a.user.teacher_change_obj.teach_languages)};var h=angular.copy(KP.LANSEL),i=b.instant;angular.forEach(h,function(a){a.name=i(a.v)}),h=_.union([{t:-1,v:"",name:"C0061"}],h),a.lans=h,a.uiItems={name:i("UR022"),v:""},a.uiSelected=function(b,c){a.add_language=b.v,a.addNative(b.v)},a.uiSelected1=function(b,c,d,e){d.language=b.v,a.checkMoreLan(d,e)},angular.forEach(a.user.learns,function(a){a.selLan={v:a.language,name:i(a.language)}}),a.addNative=function(b){if(a.native_error=!1,b){if(_.contains(a.user.speaks,b))return a.native_error=!0,void(a.add_language="");for(var c=0;c<a.user.learns.length;c++)if(a.user.learns[c].language==b)return a.native_error=!0,void(a.add_language="");a.user.speaks.push(b),a.add_native_flag=!1,a.add_language=null}},a.addMoreErrorFlag=!1,a.lans=angular.copy(h),angular.forEach(a.lans,function(a){a.status=1}),a.$watch("user.learns",function(){angular.forEach(a.lans,function(b){angular.forEach(a.user.learns,function(a){a.language===b.v&&(b.status=0)})})},!0),a.$watch("user.speaks",function(){angular.forEach(a.user.speaks,function(b){angular.forEach(a.lans,function(a){b===a.v&&(a.status=0)})})},!0),a.addMoreLan=function(){var b=a.user.learns.length;a.addMoreErrorFlag=!1,b>0&&angular.forEach(a.user.learns,function(b){return b.language?0==b.level?(a.addMoreErrorFlag=!0,!0):void 0:(a.addMoreErrorFlag=!0,!0)}),a.addMoreErrorFlag||a.user.learns.push({language:null,level:0,is_learning:0,is_primary:0}),angular.forEach(a.user.learns,function(b){angular.forEach(a.lans,function(a){b.language===a.v&&(a.status=0)})})},a.checkMoreLan=function(b,c){if(b&&b.language)for(var d=a.user.learns.length-1;d>-1;d--)if(d!=c&&a.user.learns[d].language==b.language){b.language="",b.selLan={v:"",name:i("C0061")};break}},a.removeNative=function(b){var c=a.user.speaks.length;if(!(2>c)){for(var d=c-1;d>-1;d--)a.user.speaks[d]==b&&a.user.speaks.splice(d,1);angular.forEach(a.lans,function(a){a.v===b&&(a.status=1)})}},a.removeCancel=function(){a.add_native_flag=!1},a.removeLans=function(b){a.user.learns.length<1||(angular.forEach(a.lans,function(c){a.user.learns[b].language===c.v&&(c.status=1)}),a.user.learns.splice(b,1))},a.saveFlag=!1,a.save=function(){if(a.addMoreErrorFlag=!1,a.saveFlag)return g.getEmptyPromise();a.saveFlag=!0;var b=[],d=[],e=[],h=[];if(a.add_native_flag?a.native_error=!0:angular.forEach(a.user.speaks,function(c){return c?(b.push(c),d.push(7),e.push(0),h.push(0),void 0):(a.native_error=!0,!0)}),a.native_error)return a.saveFlag=!1,g.getEmptyPromise();if(angular.forEach(a.user.learns,function(c){return c&&c.language&&c.level?(c.is_primary&&(c.is_learning=1),b.push(c.language),d.push(c.level),e.push(c.is_learning),h.push(c.is_primary),void(c.level&&0!=c.level||(a.addMoreErrorFlag=!0))):(a.addMoreErrorFlag=!0,!0)}),a.addMoreErrorFlag)return a.saveFlag=!1,g.getEmptyPromise();for(var i=b.length-1;i>-1;i--)for(var j=0;i>j;j++)if(b[i]==b[j]){b.splice(i,1),d.splice(i,1),e.splice(i,1),h.splice(i,1);break}var k={language:b,level:d,is_learning:e,is_primary:h};return f.saveLans(k).then(function(b){return c.update(),a.saveFlag=!1,a.isTeacher()&&(a.user.teacher_change_obj?angular.extend(a.user.teacher_change_obj,{speak_languages:!0,teach_languages:!0}):a.user.teacher_change_obj={speak_languages:!0,teach_languages:!0}),a.isModal&&a.$close(k),KP.API.SUCC},function(b){return a.saveFlag=!1,KP.API.ERROR})},a.lansLenCheck=function(){var b=a.user.speaks?a.user.speaks.length:0,c=a.user.learns?a.user.learns.length:0;return 9>b+c},a.addNativeFn=function(){a.add_native_flag=!0,angular.forEach(a.user.speaks,function(b){angular.forEach(a.lans,function(a){b===a.v&&(a.status=0)})})},a.setPrimary=function(a,b){angular.forEach(a,function(a){a.is_primary=0}),b.is_primary=1,b.is_learning=1}}]),angular.module("kp.user").service("User",["Restangular",function(a){var b=a.service("user");this.getPermission=function(a){return b.one(a).one("permission").get()},this.profile=function(a){return b.one(a).get()},this.getActivityList=function(a){return b.one("activitylist")},this.getUserActivityList=function(a){return b.one(a).one("activity")},this.getCitys=function(){return a.one("location/country-z-citys")},this.getEditProfile=function(){return a.one("account/profile/user").get()},this.getSessionRatings=function(a,c){return b.one(a).one("session-ratings").get({textid:c})},this.getLatestSessions=function(b,c,d){return a.one("user/"+b+"/latest-sessionlist").get({textid:c,page:d,page_size:5})},this.getSessionsWithTeacher=function(b,c,d,e){return a.one("user/"+b+"/sessionlist-by-student-with-teacher").get({textid:c,page:e,teacher_textid:d})},this.getTeachers=function(a,c,d){return b.one(a).one("teachers").get({page:c,page_size:d})},this.getFriends=function(a,c,d){return b.one(a).one("friends").get({page:c,page_size:d})},this.getNotebooks=function(a,c,d){return b.one(a).one("notebooks").get({page:c,page_size:d})},this.getNotebookCorrections=function(a,c,d){return b.one(a).one("notebook-corrections").get({page:c,page_size:d})},this.getQuestions=function(a,c,d){return b.one(a).one("questions").get({page:c,page_size:d})},this.getAnswers=function(a,c,d){return b.one(a).one("answers").get({page:c,page_size:d})},this.getDiscussions=function(a,c,d){return b.one(a).one("discussions").get({page:c,page_size:d})},this.getCardInfo=function(a){return b.one(a).one("card-info").get()},this.getOxford=function(b){return a.one("oet").one(b)},this.postOxfordPublic=function(b,c){var d={op_type:1,id:b,is_public:c};return a.one("account").all("oet").post(d)},this.postOxfordBadge=function(b){var c={op_type:2,id:b};return a.one("account").all("oet").post(c)}}]),angular.module("kp.setting",["kp.account"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/setting","/setting/account"),a.state("setting",{parent:"kp",url:"/settings","abstract":"true",templateUrl:"/views/setting/index.html"}).state("setting.account",{url:"/account?code",templateUrl:"/views/setting/account.html",controller:"SettingAccountCtrl",data:{role:"user",title:"M0082"}}).state("setting.privacy",{url:"/privacy",templateUrl:"/views/setting/privacy.html",controller:"SettingPrivacyCtrl",data:{role:"user",title:function(){return"M0026".translate()}}}).state("setting.notification",{url:"/notification",templateUrl:"/views/setting/notification.html",controller:"SettingNotificationCtrl",data:{role:"user",title:function(){return"M0027".translate()}}}).state("setting.payments",{url:"/payments",templateUrl:"/views/setting/payments.html",controller:"SettingPaymentsCtrl",controllerAs:"paymentSettings",data:{role:"user",title:function(){return"Payments"}}}).state("setting.withdraw",{url:"/settings/withdraw",parent:"kp",templateUrl:"/views/setting/withdraw.html",controller:"SettingWithdrawCtrl",params:{newWithdraw:null},data:{role:"user",title:function(){return"M0005".translate()}}}).state("setting.editProfile",{url:"/settings/profile",parent:"kp",templateUrl:"/views/user/editprofile.html",controller:"UserProfileEditCtrl",data:{role:"user"}}).state("setting.course",{url:"/settings/courses",parent:"kp",templateUrl:"/views/teacher/edit.profile.courses.html",controller:"EditTeacherProfileCourseCtrl",data:{role:"user"}}).state("setting.availability",{url:"/settings/availability",parent:"kp",templateUrl:"/views/teacher/edit.profile.availability.html",controller:"EditTeacherProfileAvailabilityCtrl",data:{role:"user"}}).state("setting.bankTransfer",{url:"/support/form-withdrawviabanktransfer",parent:"kp",templateUrl:"/views/setting/withdraw.html",controller:"SettingWithdrawCtrl",data:{role:"user"}})}]).run(["$translate","Account","$rootScope","$log",function(a,b,c,d){var e=function(){var e=angular.lowercase(a.use().replace("_","-"));"en"===e?e="en-us":"zh"===e&&(e="zh-cn");var f=c.currentUser.locale;e!==f&&(c.currentUser.locale=e,b.setUserProfile().post({locale:e}).then(function(){d.debug("sync display language settings to backend success.")}))};c.$on("kp_account_login_success",e),c.$on("kp_account_autoLogin_success",e)}]),angular.module("kp.setting").constant("AUTH_TYPES",{AUTH_TYPE_V_FACEBOOK:1,AUTH_TYPE_V_GOOGLE:2,AUTH_TYPE_V_YAHOO:3,AUTH_TYPE_V_MICROSOFT:4,AUTH_TYPE_V_TWITTER:5,AUTH_TYPE_V_LINKEDIN:8,AUTH_TYPE_V_WECHAT:9}).controller("ThirdPartAccountSettingCtrl",["$scope","$timeout","$q","$log","Facebook","Account","AUTH_TYPES","$modal","$location","$state","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){switch(a){case g.AUTH_TYPE_V_FACEBOOK:return m.facebook?n.disconnect(a):n.connectFB();case g.AUTH_TYPE_V_WECHAT:return m.wechat?n.disconnectWE():n.connectWC()}return b()}a.chinaWechat=!1;var m={},n=this;a.thirdPart=m;var o=k.code;o&&f.connectWechat(o).then(function(a){a&&angular.isObject(a.data)&&(m.wechat={account:a.data.id,profile:a.data.url,name:a.data.name},j.go("setting.account"))},function(b){a.wechatError=b.msg,j.go("setting.account")}),this.init=function(){f.getThirdPartAccountInfo().then(function(a){var b=a.data;angular.isObject(b)&&angular.extend(m,{facebook:b.facebook_account,google:b.google_account,wechat:b.wechat_account})})},this.connectFB=function(){var a=c.defer();return e.login(function(){}).then().then(function(b){if(d.debug("connect facebook:",b),angular.isObject(b)&&"connected"==b.status){var c=b.authResponse;f.connectFacebook(c.accessToken).then(function(b){a.resolve(b),b&&angular.isObject(b.data)&&(m.facebook={account:b.data.id,profile:b.data.url,name:b.data.name})},function(b){a.reject(b)})}}),a.promise},this.connectWC=function(){return h.open({size:"lg",templateUrl:"/views/component/connect.wechat.html",windowClass:"teacher_video",controller:["$rootScope",function(a){}]}),!1},this.disconnect=function(a){return f.deleteThirdPartAccount(a).then(function(){delete m.facebook})},this.disconnectWE=function(a){return f.deleteThirdPartAccountWC(a).then(function(){delete m.wechat})},a.handler=l,this.init()}]),angular.module("kp.setting").controller("SettingAccountCtrl",["$scope","$rootScope","$timeout","DataLayerService","Account","$translate","$modal","PasswordModal","UserService","$state","GlobalObject","$log","localStorageService","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){a.currentUser?(a.emailObj.email=a.currentUser.email,a.lanObj.locale=a.currentUser.locale,a.currObj.currency=a.currentUser.currency,a.tzObj.timezone=a.currentUser.timezone,a.isAM=a.currentUser.is_am):c(o,500)}a.baseUri=KP.BASEURI;var p=f.instant;a.langArr=KP.LANG,a.emailObj={email:"",password:""},c(o,500),a.user=angular.extend({},a.currentUser),e.getSettings().get().then(function(b){a.data=b.data}),KP.timezones?a.timezones=KP.timezones:e.getTimezones().then(function(b){a.timezones=b.data,KP.timezones=b.data}),a.validateEmail=KP.Utils.validateEmail,a.validatePWD=function(a){return a&&a.length>=6&&a.length<=20},a.saveEmail=function(){if(!a.doEmail){if(a.emailError=null,a.emailSucc=null,a.doEmail=!0,a.btnEmail=!0,a.validateEmail(a.emailObj.email)&&a.validatePWD(a.emailObj.password)&&a.emailObj.email!=a.currentUser.email)return e.setEmail().post(a.emailObj).then(function(c){return b.currentUser.register_status=4,d.updateUser({email:a.emailObj.email}),c.data.success&&(a.emailDiv=!a.emailDiv,a.doEmail=!1,a.btnEmail=!1,a.currentUser.email=a.emailObj.email,a.emailSucc=c.data.message,a.emailObj.password=""),KP.API.SUCC},function(b){a.emailErrorType=b.type,b.msg?(a.emailError=p("UR009"),a.showGeneric=!0):"PasswordNotMatch"==b.type?(a.emailError=p("ST231"),a.showPasswordNotMatch=!0):"EmailExist"==b.type?(a.emailError=p("KP439"),a.showEmailExist=!0):(a.emailError=p("UR009"),a.showGeneric=!0),a.btnEmail=!1,a.doEmail=!1});a.btnEmail=!1,a.doEmail=!1}},a.$watch("emailObj.email",function(){a.emailError=null,a.showEmailExist=!1,a.showPasswordNotMatch=!1,a.showGeneric=!1}),a.$watch("emailObj.password",function(){a.emailError=null,a.showEmailExist=!1,a.showPasswordNotMatch=!1,a.showGeneric=!1}),a.pwdObj={old_password:"",new_password:"",new_password1:""},a.savePwd=function(){if(!a.doPwd){if(a.doPwd=!0,a.btnPwd=!0,a.pwdError=null,a.pwdSucc=null,a.validatePWD(a.pwdObj.old_password)&&a.validatePWD(a.pwdObj.new_password)&&a.pwdObj.new_password1==a.pwdObj.new_password)return e.setPassword().post(a.pwdObj).then(function(b){return b.data.success&&(a.pwdDiv=!a.pwdDiv,a.doPwd=!1,a.btnPwd=!1,a.pwdSucc=b.data.message,a.pwdObj.old_password="",a.pwdObj.new_password="",a.pwdObj.new_password1=""),KP.API.SUCC},function(b){b.msg?a.pwdError=msg:"PasswordNotMatch"==b.type?a.pwdError=p("ST152")+p("TS060"):a.pwdError=p("UnknownError"),a.btnPwd=!1,a.doPwd=!1});a.btnPwd=!1,a.doPwd=!1}},a.purlObj={uname:""},e.getUrlUName().get().then(function(b){a.purlObj.uname=b.data,a.purlObj.uname?a.updateUname=!0:a.updateUname=!1}),a.validatePURL=function(a){var b=/^[A-Za-z][A-Za-z0-9\.\-\_]{5,19}$/;return b.test(a)},a.savePURL=function(){if(!a.doPURL){if(a.doPURL=!0,a.btnPURL=!0,a.purlSucc=null,a.purlError=null,a.validatePURL(a.purlObj.uname))return e.setUrlUName().post(a.purlObj).then(function(b){return b.data.success&&(a.pulrDiv=!a.pulrDiv,a.doPURL=!1,a.btnPURL=!1,a.purlSucc=b.data.message,a.updateUname=!0),KP.API.SUCC},function(b){"UserUnameSetAlreadySet"==b.type?a.purlError=p("PU301"):"UserUnameSetOccupied"==b.type?a.purlError=p("Username already occupied. "):a.purlError=p("UnknownError"),a.btnPURL=!1,a.doPURL=!1});a.btnPURL=!1,a.doPURL=!1}},a.lanObj={locale:""},a.saveLan=function(){if(!a.doLan){if(a.doLan=!0,a.btnLan=!0,a.lanSucc=null,a.lanError=null,(""==a.lanObj.locale||null==a.lanObj.locale||void 0==a.lanObj.locale)&&(a.lanError=!0),""!=a.lanObj.locale&&null!=a.lanObj.locale&&void 0!=a.lanObj.locale)return f.use(a.lanObj.locale.replace("-","_")),e.setUserProfile().post(a.lanObj).then(function(b){return b.data.success&&(a.doLan=!1,a.btnLan=!1,a.lanDiv=!a.lanDiv,a.currentUser.locale=a.lanObj.locale,a.lanSucc=b.data.message,f.use(a.lanObj.locale)),KP.API.SUCC},function(b){b.msg?a.lanError=msg:a.lanError=p("UnknownError"),a.btnLan=!1,a.doLan=!1});a.btnLan=!1,a.doLan=!1}},a.emailLanObj={email_language_config:""},e.getSettings().get().then(function(b){a.saved_email_language_config=b.data.email_language_config,a.emailLanObj.email_language_config=b.data.email_language_config}),a.saveEmailLan=function(){if(!a.doEmailLan){if(a.doEmailLan=!0,a.btnEmailLan=!0,a.emailLanSucc=null,a.emailLanError=null,
(""==a.emailLanObj.email_language_config||null==a.emailLanObj.email_language_config||void 0==a.emailLanObj.email_language_config)&&(a.emailLanError=!0),""!=a.emailLanObj.email_language_config&&null!=a.emailLanObj.email_language_config&&void 0!=a.emailLanObj.email_language_config)return e.setUserProfile().post(a.emailLanObj).then(function(b){return b.data.success&&(d.updateUser({emailLanguage:a.emailLanObj.email_language_config}),a.doEmailLan=!1,a.btnEmailLan=!1,a.emailLanDiv=!a.emailLanDiv,a.saved_email_language_config=a.emailLanObj.email_language_config,a.emailLanSucc=b.data.message),KP.API.SUCC},function(b){b.msg?a.emailLanError=msg:a.emailLanError=p("UnknownError"),a.btnEmailLan=!1,a.doEmailLan=!1});a.btnEmailLan=!1,a.doEmailLan=!1}},a.tzObj={timezone:""},a.saveTZ=function(){if(!a.doTZ){if(a.doTZ=!0,a.btnTZ=!0,a.tzSucc=null,a.tzError=null,""!=a.tzObj.timezone)return e.setUserProfile().post(a.tzObj).then(function(b){return b.data.success&&(a.doTZ=!1,a.btnTZ=!1,a.tzDiv=!a.tzDiv,a.currentUser.timezone=a.tzObj.timezone,a.currentUser.timezone_iana=q(a.tzObj.timezone),a.tzSucc=b.data.message),KP.API.SUCC},function(b){b.msg?a.tzError=msg:a.tzError=p("UnknownError"),a.btnTZ=!1,a.doTZ=!1});a.btnTZ=!1,a.doTZ=!1}},a.currObj={currency:""},a.saveCurr=function(){if(!a.doCurr){if(a.doCurr=!0,a.btnCurr=!0,a.currSucc=null,a.currError=null,""!=a.currObj.currency)return e.setUserProfile().post(a.currObj).then(function(b){if(b.data.success){a.doCurr=!1,a.btnCurr=!1,a.currDiv=!a.currDiv,a.currentUser.currency=a.currObj.currency,a.currSucc=b.data.message;var c=m.get(KP.SERIALIZE.TOKEN);l.debug("current token:"+c),c&&"/logout"!=n.path()&&(i.restoreUserFromCache(),i.autoLogin(c)["finally"](function(){d.update()}))}return KP.API.SUCC},function(b){b.msg?a.currError=msg:a.currError=p("UnknownError"),a.btnCurr=!1,a.doCurr=!1});a.btnCurr=!1,a.doCurr=!1}},a.getUserTime=function(a){var b=q(a);return b?moment(new Date).tz(b).format("LLL"):moment(new Date).format("LLL")};var q=function(a){var b="";return angular.forEach(KP.timezones,function(c){return c.v==a?(b=c.vl,!0):void 0}),b},r=!0;a.setAM=function(b){return r?(r=!1,e.setUserProfile().post({is_am:b}).then(function(c){c.data.success&&(a.isAM=b,a.currentUser.is_am=b)},function(a){})["finally"](function(){r=!0})):void 0},a.getLanguages=function(b){var c=b;return angular.forEach(a.langArr,function(a,d,e){return a.mo==b?(c=a.name,!1):void 0}),c},a.getTZLable=function(a){var b=a;return angular.forEach(KP.timezones,function(c){return c.v==a?(b=c.t,!1):void 0}),b},a.deactivation=function(){a.deactiveData={reason_option:"",reason_other:""},g.open({scope:a,size:"lg",templateUrl:"/views/setting/account.deactivation.modal.html",windowClass:"course-list-modal",controller:["$scope",function(a){a.validDeactiveData=function(){return-1==["0","1","2","3","4"].indexOf(a.deactiveData.reason_option)?!1:"4"==a.deactiveData.reason_option&&""==a.deactiveData.reason_other?!1:!0},a.deactiveSubmit=function(){a.validDeactiveData()&&h.show().then(function(b){return a.deactiveData.pwd=b,e.deactivation().post("",a.deactiveData).then(function(b){b.data.success&&(a.deactiveSuccess=!0,i.loginOut(),j.transitionTo("signin"))},function(a){})["finally"](function(){})})}}]})}}]).controller("SettingNotificationCtrl",["$scope","$timeout","Account","DataLayerService","webNotification","DesktopNotification",function(a,b,c,d,e,f){c.notification().get().then(function(b){var c=h(b.data);a.data=c});var g=!f.disabled();a.desktop_noti=g,a.$watch("desktop_noti",function(a){angular.isDefined(a)&&a!==g&&f.disabled(!a),a&&!e.isEnabled()&&e.requestPermission().then(function(){},function(){})}),a.save=function(){a.doSave||(a.doSave=!0,a.btnSave=!0,c.notification().post("",i(a.data)).then(function(b){b.data.success&&(d.updateUser({subscribeMarketingEmails:a.data.allow_email?"yes":"no"}),a.doSave=!1,a.btnSave=!1,a.divSucc=b.data.message)},function(b){try{a.divError=b.msg+":"+b.type}catch(c){}a.btnSave=!1,a.doSave=!1}))};var h=function(a){var b={};for(var c in a)1==a[c]?b[c]=!0:b[c]=!1;return b},i=function(a){var b={};for(var c in a)a[c]?b[c]=1:b[c]=0;return b}}]).controller("SettingPrivacyCtrl",["$scope","Account","KPNotify","$translate","$modal",function(a,b,c,d,e){var f=["friend_request_permission","allow_listing","show_dob","friend_list_is_public","student_course_session_is_public","teacher_resume_is_public"];b.privacy().get().then(function(b){a.data=h(b.data),a.$watch("data",function(a,b){var c,d="";for(var e in a)if(a[e]!=b[e]){d=e;break}if("message_permission"==d)c=a[d];else{if(!(f.indexOf(d)>-1))return;c=a[d]?1:0}g(d,c)},!0)});var g=function(a,e){var f={};f[a]=e,b.setUserProfile().post(f).then(function(b){1==b.data.param_flag[a]&&c.appendWithContent(d.instant("C1002"))},function(a){c.appendWithContent(d.instant("C1015"))})},h=function(a){for(var b in a)"message_permission"!=b&&(a[b]=1==a[b]);return a};a.blocklist=function(){a.isOpenInWindow=1,a.deactiveData={reason_option:"",reason_other:""},e.open({scope:a,templateUrl:"/views/setting/privacy.block.list.modal.html",windowClass:"course-list-modal",controller:"contactBlockCtrl",resolve:{showCtrl:function(){return{city:!0}}}})}}]).controller("SettingWithdrawCtrl",["$scope","Finance","KPNotify","WithdrawConfigService","WithdrawItcModal","$state","$stateParams","$window","GlobalObject",function(a,b,c,d,e,f,g,h,i){var j={};a.hasWebmoney=!1,a.showMsg=1==g.showmsg,a.showNewWithdraw=1==g.newWithdraw,b.settingOfWithdraw().get().then(function(b){var c=b.data;a.bankTransferInfo=b.meta.bank_beneficiary_info,a.taxInfo=b.meta.tax_info,angular.forEach(c,function(b){"5"==b.withdraw_method?a.hasWebmoney=!0:(j[b.withdraw_method]=b,b.is_primary&&(a.primaryMethod=b.withdraw_method))}),"setting.bankTransfer"==f.current.name?(a.editBankTransfer=!0,a.addOrEditWithdrawInfo("0")):a.editBankTransfer=!1}),a.withdrawMethods=j,a.viewBankTransferInfo=function(){a.bankTransferInfo&&d.viewBankTransferInfo(a.bankTransferInfo,a)},a.addOrEditWithdrawInfo=function(b){d.openConfig(b,a)};var k={"en-us":1,ru:3,"zh-cn":4,pt:6,es:7,fr:9,de:13,ja:14,ko:15,pl:16,ar:19,it:20,th:24};a.addPayoneerWithdraw=function(c,d){a.loading=!0,b.getPayoneerSignupUrl(c,d).then(function(b){if(b.data.url){var d=k[i.lang.mo];return void(d?h.location.href=b.data.url+"&langid="+d.toString():h.location.href=b.data.url)}a.withdrawMethods[c]=b.data,a.loading=!1},function(b){a.loading=!1})},a.setPrimaryMethod=function(e){a.primaryMethod!=e&&b.settingOfWithdrawPrimary().post("",{method:e}).then(function(b){a.primaryMethod=e},function(b){"NoAlipayTaxInfo"==b.type?d.openConfig(e,a):c.appendWithContent(b.type+" : "+b.msg)})},a.openWithdrawModal=function(){a.primaryMethod&&e.show()}}]),angular.module("kp.setting").controller("SettingPaymentsCtrl",SettingPaymentsCtrl),SettingPaymentsCtrl.$inject=["$rootScope","$scope","$modal","Finance"],angular.module("kp.account",["kp.account.recaptcha","kp.finance"]).config(["$stateProvider",function(a){a.state("signin",{url:"/signin?code?recaptcha",templateUrl:"/views/account/signin.html",controller:"AccountSigninCtrl"}).state("sso",{url:"/signin/sso",templateUrl:"/views/account/signin.html",controller:"AccountSigninCtrl"}).state("signup",{url:"/signup?email&username?teacherOnboarding",templateUrl:"/views/account/signup.html",controller:"AccountSignupCtrl"}).state("logout",{url:"/logout",controller:"LogoutCtrl"}).state("activeUser",{url:"/rc/{activeCode}",templateUrl:"/views/account/active.user.html",controller:"ActiveUserCtrl"}).state("reactivateUser",{url:"/reactivate/{activeCode}",templateUrl:"/views/account/active.user.html",controller:"ActiveUserCtrl"}).state("reactivateStudentFull",{url:"/reactivate_student_full/{type}/{code}",templateUrl:"/views/account/active.user.html",controller:"ActiveUserCtrl"}).state("setNewPassword",{url:"/reset-password/set-new-password",templateUrl:"/views/account/set.new.password.html",controller:"SetNewPasswordCtrl"}).state("connect",{url:"/connect?user_id&beta_key",templateUrl:"/views/account/connect.html",controller:"AccountConnectCtrl"})}]).factory("FullRestangular",["Restangular",function(a){return a.withConfig(function(a){a.setFullResponse(!0)})}]).service("UserService",["$rootScope","Events","FullRestangular","Restangular","$q","$state","$log","$window","localStorageService","Finance","$location","LanguageChallenge","$modal","experimentTest","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){x(a)&&i.set(KP.SERIALIZE.USER,y(a))}function q(a){var b=a.headers()[KP.CONSTANT.V_TOKEN_HEADER];b&&(KP.API.PARAMS[KP.CONSTANT.VTOKEN]=b,i.set(KP.SERIALIZE.VTOKEN,b))}function r(b){g.debug(b),g.debug(b.headers());var c=b.headers()[KP.CONSTANT.TOKEN_HEADER],d=b.headers()[KP.CONSTANT.V_TOKEN_HEADER];if(b.data.data.User_obj){var e=b.data.data.User_obj;g.debug("warning! User_obj is not the correct format")}else var e=b.data.data;g.debug(b.headers(),"header"),A(c,d),angular.extend(e,{is_teacher:e&&(e.is_pro||e.is_tutor)}),a.currentUser=v=e,window._bt&&_bt.identify({user_id:a.currentUser.id.toString()}),p(e),b.curState?(b.afinish=1,b.curState.reload?f.reload():b.curState.name&&b.curState.s_obj?f.transitionTo(b.curState.name,b.curState.s_obj):b.curState.name?f.transitionTo(b.curState.name):"referrals"==f.$current.self.name?f.go("dashboard"):f.go(b.curState)):b.sso?E.get().then(function(a){},function(a){g.debug("sso login failed")}):a.$broadcast("kp_account_login_success",b.data.data)}function s(b){return b&&200===b.status?d.one("languagechallenge").get().then(function(c){return"2b"===c.data.template_name&&l.getGoal().then(function(b){a.userGoal=b.data.goal_hours,(null==a.userGoal||0==a.userGoal)&&H()}),b},function(){return b}):b}function t(b){var c=n.ABTest("teacherPreview").then(function(b){a.newTeacherPreview="new"===b.data.group_name})["catch"](function(){a.newTeacherPreview=!1}),d=n.ABTest("oneStepPayment").then(function(b){a.isOneStepPayment="new"===b.data.group_name})["catch"](function(){a.isOneStepPayment=!1}),f=[c,d];return e.all(f).then(function(){return b})}var u=!1,v=null,w=angular.isFunction,x=angular.isObject,y=angular.toJson,z=this;this.currentUser=function(){return angular.copy(v)};var A=function(c,d){u=!0,KP.API.PARAMS[KP.CONSTANT.TOKEN]=c,i.set(KP.SERIALIZE.TOKEN,c),d&&(KP.API.PARAMS[KP.CONSTANT.VTOKEN]=d,i.set(KP.SERIALIZE.VTOKEN,d)),b.match("internal_ref")&&b.emit(),z.getLanguageObjs(),I(),j.overview().then(function(b){b.data&&angular.extend(a.currentUser,{payment_account:b.data.payment_account,revenue_account:b.data.revenue_account,referral_account:b.data.referral_account})}),j.getOneStepList().then(function(b){angular.extend(a.currentUser,{hasStripeList:0!==b.data.stripe.length,hasPaypalList:0!==b.data.paypal.length})}),a.$broadcast("kp_finance_overview")},B=c.service("login"),C=c.service("account/register/wechat"),D=c.one("account/login/wechat"),E=d.one("zd-sso-login"),F=c.service("account/login/connect"),G=c.service("account/login/facebook");this.resetRevenueAccountCache=function(){g.debug("refreshing revenue account...."),j.revenue().then(function(b){a.currentUser.revenue_account=b.data})},this.resetPaymentAccountCache=function(){g.debug("refreshing payment account...."),j.payment().then(function(b){a.currentUser.payment_account=b.data})},this.restoreUserFromCache=function(){var b=i.set(KP.SERIALIZE.USER);x(b)&&(a.currentUser=b)};var H=function(){m.open({size:"",backdrop:"static",keyboard:!1,templateUrl:"/views/languagechallenge/pop.up.html",controller:["$scope","$modalInstance",function(b,c){b.checkGoal="",b.checked=function(a){b.checkGoal=a},b.setGoal=function(b){b&&l.postGoal().post({goal_hours:b}).then(function(d){a.userGoal=b,c.close(),window.location.href="/languagechallenge"})}}]})};this.connect=function(a){return F.post(a).then(function(a){return r(a),a},function(a){return e.reject(a)}).then(t).then(s)},this.loginViaFBNoEmail=function(a){return G.one("no_email_set_email_and_password").post("",a).then(function(a){return r(a),h.dataLayer.push({signupData:{signupService:"facebook",signupSource:"web"},event:"registrationSuccess"}),a},function(a){return e.reject(a)}).then(t).then(s)},this.loginViaFBEmailAndPassword=function(a){var b=angular.copy(a);return b=_.merge(KP.API.PARAMS,b),G.one("have_email_change_email_and_set_password").post("",b).then(function(a){q(a)},function(a){return e.reject(a)})},this.loginViaFBHasEmail=function(a){return G.one("hasemail").post("",a).then(function(a){return r(a),a},function(a){return e.reject(a)}).then(t).then(s)},this.loginViaFB=function(a,b,c){var d=angular.extend({access_token:a},{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign});return G.post(d).then(function(a){return a.data.meta&&angular.isDefined(a.data.meta.type)&&"account_login_fb_email_exist"==a.data.meta.type||angular.isObject(a.data.data)&&(a.curState=b,c&&(a.sso=!0),r(a)),a},function(a){return e.reject(a)}).then(t).then(s)},this.login=function(b,c,d){var e=!!b.rememberMe,f=(new Date).getTime(),h=864e5;return f+=e?7*h:1*h,i.set(KP.SERIALIZE.EXPIRY_DATE,f),B.post(b).then(function(c){c.curState=d;var e=!!b.sso;return e&&(c.sso=!0),r(c),e||d||a.$broadcast("kp_account_login_success",c.data.data),d&&a.$broadcast("kp_account_quick_login_success",c.data.data),a.isGEESignin=!1,a.isRecaptchaSignin=!1,c},function(d){return g.debug("[user service] login fail",d),a.$broadcast("kp_account_login_fail",d),a.$broadcast("$recaptcha_should_refresh"),w(c)?c(d):angular.noop(),""==d.type?b.LOGIN_PA_PASSWORD="":"NeedCaptcha"==d.type&&(d.msg="SC300".translate()),d}).then(t).then(s)},this.loginViaFBNoEmail=function(a){return G.one("no_email_set_email_and_password").post("",a).then(function(a){return r(a),h.dataLayer.push({signupData:{signupService:"facebook",signupSource:"web"},event:"registrationSuccess"}),a},function(a){return e.reject(a)}).then(t)},this.loginWechatGetCode=function(b){a.referral=k.search().state;var c={code:b};return a.referral&&angular.extend(c,{state:a.referral}),i.remove(KP.WECHAT.ACCESS_TOKEN),i.remove(KP.WECHAT.UNIONID),D.get(c).then(function(a){return a.data.data.unionid||r(a),a},function(a){return e.reject(a)}).then(t).then(s)},this.loginWechat=function(b,c){u=!0;var d=(new Date).getTime();return i.set(KP.SERIALIZE.EXPIRY_DATE,d),C.post(b).then(function(a){i.remove(KP.WECHAT.ACCESS_TOKEN),i.remove(KP.WECHAT.UNIONID),f.transitionTo("dashboard"),r(a)},function(d){return g.debug("[user service] login fail",d),a.$broadcast("kp_account_login_fail",d),w(c)?c(d):angular.noop(),""==d.type&&(b.password=""),"400"==d.type&&("please try again."==d.msg?d.type="tryAgain":"access_token is invalid"==d.msg?a.nOk=!0:"Password must be at least 6 characters long."==d.msg?d.type="passwordLong":a.nOk=!0),u=!1,e.reject(d)}).then(t).then(s)},this.autoLogin=function(b){b||(b=i.get(KP.SERIALIZE.TOKEN)),u=!0;var c={};return b&&(c[KP.CONSTANT.TOKEN]=b)&&(KP.API.PARAMS[KP.CONSTANT.TOKEN]=b),B.post(c).then(function(c){var d=c.data.data;return angular.extend(d,{is_teacher:d&&(d.is_pro||d.is_tutor)}),A(b),p(d),a.currentUser=v=d,window._bt&&_bt.identify({user_id:a.currentUser.id.toString()}),a.$broadcast("kp_account_autoLogin_success",c.data.data),c},function(b){return g.debug("[user service] re-login fail",b),a.$broadcast("kp_account_autoLogin_fail",b),b}).then(t).then(s)},this.getLanguageObjs=function(){return c.one("account/language").get(KP.API.PARAMS).then(function(b){var c=e.defer();return c.resolve(b),b&&b.data&&(a.currentUser.language_obj_s=b.data.data,p(a.currentUser)),c.promise},function(a){var b=e.defer();return b.reject(a),g.error("fetch user languages failed:",a),b.promise})};var I=function(){return c.one("account/im-account").get(KP.API.PARAMS).then(function(b){b&&b.data&&(a.currentUser.ims=b.data.data,p(a.currentUser))})};this.loginOut=function(){u=!1,KP.API.PARAMS[KP.CONSTANT.TOKEN]="",a.currentUser=v=null,i.clearAll(),a.$broadcast("kp_account_login_out"),window.dataLayer=[]},this.isOnline=function(){return u}}]).service("LoginService",["$rootScope","Restangular","$window","$modal","$state","$interval","$log","$q","Facebook","FBError","FacebookLoginNOEmailModal","FacebookLoginHasEmailModal","Account","UserService","localStorageService","DataLayerService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var b=a.headers()[KP.CONSTANT.V_TOKEN_HEADER];b&&(KP.API.PARAMS[KP.CONSTANT.VTOKEN]=b,o.set(KP.SERIALIZE.VTOKEN,b))}var r=function(b){return function(c){c.onReady(function(){a.captchaObj=c}).onSuccess(function(){var a=c.getValidate();b(a)})}};this.initGeetestConfig=function(c){b.one("geetest/captcha").get().then(function(b){a.geetestCaptchaData=b,initGeetest({gt:b.gt,challenge:b.challenge,offline:!b.success,new_captcha:b.new_captcha,product:"bind",width:"300px"},r(c))})},this.open=function(b){var c=!1;if(!a.currentUser){var f=d.open({templateUrl:"/views/account/signin.div.html",controller:"AccountSignin1Ctrl",windowClass:"quick-login",resolve:{myState:function(){return b?b:e.$current}}});f.result.then(function(a){},function(){}),c=!0}return c},this.login=function(b){return a.isRecaptchaSignin=!1,!b.user.LOGIN_PA_PASSWORD||b.user.LOGIN_PA_PASSWORD.length<1?void(b.error={type:"pwd",msg:""}):!b.user.LOGIN_PA_USERNAME||b.user.LOGIN_PA_USERNAME.length<1?void(b.error={type:"username",msg:""}):(b.error=null,n.login(b.user,function(a){b.error=a},b.curState).then(function(a){return a.curState&&b.$close(),a},function(a){return a}))},this.loginViaFB=function(a){var b=h.defer();return i.login(function(){},{scope:"email"}).then(function(d){if(angular.isObject(d)&&"connected"==d.status){var f=d.authResponse;g.debug("facebook login success -> ",f,"access token ->",f.accessToken);var h=!1;a.user&&a.user.sso&&(h=!0),n.loginViaFB(f.accessToken,a.curState,h).then(function(d){g.debug("login via fb result ->",d),b.resolve(d);var f=d.data.meta;if(angular.isObject(f))switch(f.type){case j.NoEmail:e.go("onboarding");var h="onboarding.fb";o.cookie.set(h,f);break;case j.HasEmail:l.open(f).then(function(){g.debug("fb auto login success!")})}d.curState&&a.$close();var i=d.data.data;return parseInt(i.login_count)<=2&&(p.updateUser({userId:i.id,registerTime:i.register_time,studentType:"student",email:i.email,subscribeMarketingEmails:"yes",name:i.nickname,signupRef:KP.REF.user?KP.REF.url:"",signupRefType:KP.REF.userId,signupSource:"web"}),c.dataLayer.push({signupData:{signupService:"facebook",signupSource:"web"},event:"registrationSuccess"})),d},function(a){g.debug("login via fb error ->",a),b.reject(a)})}}),b.promise},this.resetAccount=function(a){return a.errorType=0,m.reset.post(a.restor).then(function(b){return a.sendSucc=!0,b},function(b){return a.errorType=b.type,g.debug("reset account result:",b),b})},this.register=function(a){var b=h.defer();return g.debug("register user info:",a.newUser),a.processing=!0,m.register.post(a.newUser).then(function(c){q(c),b.resolve(c),g.debug("register success",c);var d=c.headers()[KP.CONSTANT.TOKEN_HEADER];n.autoLogin(d)["finally"](function(){a.processing=!1,a.curState&&a.$close()})},function(c){a.processing=!1,g.warn("register error",c),a.error=c,b.reject(c)}),b.promise}}]).service("DataLayerService",["$rootScope","$window","Restangular",function(a,b,c){var d={};this.updateUser=function(c){a.currentUser&&(255!=a.currentUser.register_status?_.merge(c,{verified_email:0}):_.merge(c,{verified_email:1})),_.merge(d,c),b.dataLayer.push({user:d,event:"userUpdated"})},this.update=function(){a.currentUser&&c.one("config").one("datalayer").get().then(function(c){angular.forEach(c.data,function(c){c.user&&(c.user.registerTime=a.currentUser.register_time,c.user.userType=a.currentUser.is_premium?"premium":"free",255!=a.currentUser.register_status?c.user.verified_email=0:c.user.verified_email=1,d=c.user),b.dataLayer.push(c),b.dataLayer.push({event:"userUpdated"})})})}}]).service("errorPopup",["$modal",function(a){this.open=function(){a.open({templateUrl:"/views/kp/add.friend.request.error.html",windowClass:"add-friend-request",controller:["$scope","$state",function(a,b){a.goUrl=function(){a.$close(),b.go("premium")}}]})}}]),angular.module("kp.account").service("Account",["Restangular","FullRestangular",function(a,b){var c=a.service("account");this.register=b.service("account/register"),this.reset=a.service("account/reset"),this.getRecaptchaInfo=function(){return a.one("login").get()},this.getThirdPartAccountInfo=function(){return c.one("third-part").get()},this.deleteThirdPartAccount=function(a){return c.one("third-part").remove({"auth-type":a})},this.deleteThirdPartAccountWC=function(){return c.one("third-part").all("disconnect_wechat").post()},this.connectFacebook=function(a){return c.one("third-part").post("facebook",{code:a})},this.connectWechat=function(a){return c.one("third-part").post("connect_wechat",{code:a})},this.getSettings=function(){return c.one("settings")},this.setEmail=function(){return c.one().all("email")},this.resendConfirmEmail=function(){return c.one().all("register/resend-confirm-email")},this.setFacebookEmailAndPassword=function(){return c.one().all("login/facebook/have_email_change_email_and_set_password")},this.setFacebookNoEmailAndPassword=function(){return c.one().all("login/facebook/no_email_set_email_and_password")},this.setPassword=function(){return c.one().all("password")},this.setNewPassword=function(){return a.all("reset-password/set-new-password")},this.setUrlUName=function(){return c.one().all("url_uname")},this.getUrlUName=function(){return c.one("url_uname")},this.setUserProfile=function(){return c.one("profile").all("user")},this.notification=function(){return c.one("notification")},this.privacy=function(){return c.one("privacy")},this.deactivation=function(){return c.one("deactivation")},this.getDashboardStat=function(){return c.one("statistics")},this.saveLans=function(a){return c.one("").all("language").post(a)},this.setTeacherProfile=function(a){return c.one("profile").all("teacher").post(a)},this.activeUser=b.service("account/user-active"),this.reactivateStudentFull=b.service("teacher/reactivate_student_full"),this.setInstantStateOrPrice=function(a){return c.one("profile").all("teacher").post(a)},this.getTimezones=function(){return a.one("config").one("timezone").get()},this.passwordSet=function(){return a.all("login/password-set")},this.logout=function(){return a.all("logout").post({})},this.setCountryTimezone=function(){return c.one("").all("timezone")},this.getSiteMessage=function(){return a.one("sitemessage")},this.getOet=function(){return c.one("oet")},this.getReferralData=function(){return c.one("referral").one("dashboard").one("notice")},this.delReferralData=function(){return c.one().all("referral/dashboard/removenotice")}}]),angular.module("kp.account").constant("FBError",{NoEmail:"account_login_fb_email_not_exist",HasEmail:"account_login_fb_email_exist"}).controller("AccountSigninCtrl",["$scope","$rootScope","ENV","$state","$timeout","Restangular","$log","LoginService","$stateParams","localStorageService","UserService","Account",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){return c.apiEndpoint+"account/register/image-captcha?_r"+(new Date).getTime()}function n(c){c&&(a.user.geetest_challenge=c.geetest_challenge,a.user.geetest_validate=c.geetest_validate,a.user.geetest_seccode=c.geetest_seccode,a.user["g-recaptcha-response"]="6LfzPwUTAAAAAHw4GiborZNwfgEmO"),h.login(a).then(function(c){"NeedCaptcha"===c.type&&(a.needCaptcha=!0,c.data.need_captcha&&(1===c.data.captcha_type&&(a.isRecaptchaSignin=!0),5===c.data.captcha_type&&(a.isRecaptchaSignin=!1,b.captchaObj.verify())))})}var o=i.recaptcha;a.needCaptcha=!1,4===o?(a.isItalkiRecaptcha=!0,a.imageCodeurl=m()):l.getRecaptchaInfo().then(function(b){var c=b.data;angular.isObject(c)&&c.need_captcha&&(a.needCaptcha=!0,1===c.captcha_type&&(a.isRecaptchaSignin=!0),5===c.captcha_type&&(a.isRecaptchaSignin=!1))}),a.generateImageCaptchaUrl=function(){a.imageCodeurl=m()},a.$on("$recaptcha_should_refresh",function(){4==o&&e(function(){a.imageCodeurl=m()})});var p=i.code,q=angular.toJson,r=angular.isObject;p&&k.loginWechatGetCode(p).then(function(a){function c(a){r(a)&&j.set(KP.SERIALIZE.USER,q(a))}var e=a.data.data,f=e.access_token,g=e.unionid;if(f){j.set(KP.WECHAT.ACCESS_TOKEN,f),j.set(KP.WECHAT.UNIONID,g),d.go("onboarding");var h="onboarding.we";j.cookie.set(h,e)}else{var i=a.data.data,k=j.get(KP.SERIALIZE.TOKEN);KP.API.PARAMS[KP.CONSTANT.TOKEN]=k,b.currentUser=currentUser=i,c(b.currentUser),d.transitionTo("dashboard")}},function(b){a.error=b});var s="sso"===d.current.name;a.user={},"cn"!=KP.COUNTRY||KP.isMobile||(a.chinaWechat=!0),s&&(a.user.sso=!0,a.$watch("currentUser",function(a){angular.isObject(a)&&f.one("zd-sso-login").get().then(function(){},function(){g.debug("sso login failed")})})),a.restor={email:""},h.initGeetestConfig(n),a.login=function(){a.needCaptcha?a.isRecaptchaSignin?n():a.captchaObj.verify():n()},a.resetAccount=function(){return h.resetAccount(a)},a.loginViaFB=function(){return h.loginViaFB(a)},a.validateEmail=KP.Utils.validateEmail,a.signinUsermail=function(){a.signin_form.mail=a.signin_form.signin_username.$invalid},a.signinPassword=function(){a.signin_form.password=a.signin_form.signin_password.$invalid},a.resetUsermail=function(){a.resetEmail=!a.restor.email,console.log(a.resetEmail)},a.recaptchaCallbackSignin=function(b){a.user["g-recaptcha-response"]=b},a.geeCallbackSignin=function(b){a.user["g-recaptcha-response"]=b.data}}]).controller("AccountSignin1Ctrl",["$scope","$kpSocket","$state","$rootScope","UserService","Restangular","$timeout","$log","LoginService","Account","myState",function(a,b,c,d,e,f,g,h,i,j,k){function l(){j.getRecaptchaInfo().then(function(b){var c=b.data;angular.isObject(c)&&c.need_captcha&&(a.needCaptcha=!0,1==c.captcha_type&&(a.isRecaptchaSignin=!0),5==c.captcha_type&&(a.isRecaptchaSignin=!1))})}function m(){f.one("account/register").get().then(function(b){var c=b.data;if(angular.isObject(c)){var d=c.register_method;1==d&&(a.isRecaptcha=!0),5==d&&(a.isRecaptcha=!1,a.isGEE=!0),0==d&&(a.facebookOnly=!0)}})}function n(){a.isInputErr=null,a.isFormalErr=null,a.isExistErr=!1}function o(b){a.regFlag?q(b):p(b)}function p(b){b&&(a.user.geetest_challenge=b.geetest_challenge,a.user.geetest_validate=b.geetest_validate,a.user.geetest_seccode=b.geetest_seccode,a.user["g-recaptcha-response"]="6LfzPwUTAAAAAHw4GiborZNwfgEmO"),i.login(a).then(function(b){"NeedCaptcha"===b.type&&b.data.need_captcha&&(a.needCaptcha=!0,1===b.data.captcha_type&&(a.isRecaptchaSignin=!0),5===b.data.captcha_type&&(a.isRecaptchaSignin=!1,d.captchaObj.verify()))})}function q(b){b&&(a.newUser.geetest_challenge=b.geetest_challenge,a.newUser.geetest_validate=b.geetest_validate,a.newUser.geetest_seccode=b.geetest_seccode,a.newUser["g-recaptcha-response"]="6LfzPwUTAAAAAHw4GiborZNwfgEmO"),i.register(a).then(function(){"referrals"==c.$current.self.name&&c.transitionTo("dashboard")},function(b){g(function(){a.isExistErr="AccountEmailExist"==b.type,a.$broadcast("$recaptcha_should_refresh")})})["finally"](function(){a.waiting=!1})}l(),m(),d.$on("kp.BrowserBackOrForwardBtnClick",function(){a.$dismiss()}),a.$on("kp_account_quick_login_success",function(){c.reload()}),"cn"==KP.COUNTRY&&(a.chinaWechat=!0),n(),a.curState=k,a.user={},a.restor={email:""},a.regFlag=!0,g(function(){a.$apply()}),i.initGeetestConfig(o),a.login=function(){a.needCaptcha?a.isRecaptchaSignin?p():a.captchaObj.verify():p()},a.resetAccount=function(){return i.resetAccount(a)},a.loginViaFB=function(){return i.loginViaFB(a)};var r={};angular.extend(r,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign}),a.newUser=r,a.register=function(){a.isRecaptcha?q():a.captchaObj.verify()},a.recaptchaCallback=function(b){h.debug(b),a.hasValidator=!0,a.newUser["g-recaptcha-response"]=b},a.geeCallback=function(b){h.debug(b),a.hasValidator=!0,a.newUser["g-recaptcha-response"]=b.data},a.recaptchaCallbackSignin=function(b){a.user["g-recaptcha-response"]=b},a.geeCallbackSignin=function(b){a.user["g-recaptcha-response"]=b.data},a.turnOff=function(b){a.error=null,a.isExistErr=!1,b?a.regFlag=!0:(a.isGEE=!1,a.isRecaptcha=!1,a.regFlag=!1)},a.turnOff1=function(b){a.error=null,a.isExistErr=!1,b?a.regFlag=!1:(a.isGEE=!0,a.isRecaptcha=!0,a.regFlag=!0)},a.validateEmail=KP.Utils.validateEmail,a.signinUsermail1=function(){a.signin_form1.mail=a.signin_form1.signin_username.$invalid},a.signinPassword1=function(){a.signin_form1.password=a.signin_form1.signin_password.$invalid},a.signupUsername1=function(){a.signup_form1.foo=a.signup_form1.signup_username.$invalid},a.signupUsermail1=function(){a.signup_form1.signup_email.$invalid?(a.isInputErr=!0,a.isFormalErr=!0):(a.isInputErr=!1,a.isFormalErr=!1),a.showcharacter=!1},a.signupUsermailshow1=function(){a.showcharacter=!0,a.isInputErr=null,a.isFormalErr=null},a.signupUserpassword1=function(){a.signup_form1.password=a.signup_form1.signup_password.$invalid},a.$watch("newUser.email",function(b,c){b&&a.isExistErr&&b!=c&&(a.isExistErr=!1)}),a.resetUsermail1=function(){a.resetEmail=!a.restor.email}}]).controller("ActiveUserCtrl",["$scope","$stateParams","$state","$window","Account","UserService","FullRestangular","Restangular","$rootScope","localStorageService","DataLayerService","$log",function(a,b,c,d,e,f,g,h,i,j,k,l){a.activeCode=b.activeCode||"",a.reactivateStudentFullParam={type:b.type||"",code:b.code||""},a.showError=!1;var m=0;"activeUser"===c.$current.self.name?m=1:"reactivateUser"===c.$current.self.name?m=2:"reactivateStudentFull"===c.$current.self.name&&(m=3),""!==a.activeCode&&m>0&&3!==m&&e.activeUser.post({type:m,code:a.activeCode}).then(function(b){1==m&&d.dataLayer.push({event:"verificationSuccess"});var e=b.headers()[KP.CONSTANT.TOKEN_HEADER];f.autoLogin(e)["finally"](function(){return f.getLanguageObjs().then(function(){a.currentUser&&a.currentUser.language_obj_s.length>0?(angular.forEach(a.currentUser.language_obj_s,function(b){0==b.is_learning&&7==b.level&&(a.searchObj={teaching_language:a.currentUser.learning_language,teacher_speaks:b.language,mail:1})}),h.one("account/onboardingtest").get().then(function(b){b.data&&1===b.data.is_teacher_register?c.go("teacherApply.step1"):(h.one("experiment/get_my_group").get({experiment_name:"UD_phase1"}),h.one("experiment/get_my_group").get({experiment_name:"UD_phase2"}),h.one("experiment/get_my_group").get({experiment_name:"onboarding_bcfg"}).then(function(b){var d="onboarding.group_name";"b"===b.data.group_name&&j.cookie.set(d,"b"),"c"===b.data.group_name&&j.cookie.set(d,"c"),"f"===b.data.group_name&&j.cookie.set(d,"f"),"g"===b.data.group_name&&j.cookie.set(d,"g");var d="onboarding.group_name",e=j.cookie.get(d);if("f"===e)h.one("account/onboardingtest/check").get({get_filters:1}).then(function(a){var b=a.data;j.cookie.set("groupD.search1",b),c.go("teachers")});else if("c"===e){var f="dashboard.mail.search";j.cookie.set(f,a.searchObj),h.one("account/onboardingtest").get().then(function(a){var b=a.data,d="groupC.search";j.cookie.set(d,b),c.go("teachers")})}else c.go("teachers");return KP.API.SUCC},function(a){return KP.API.ERROR}))})):c.go("dashboard")},function(b){a.error=b})})},function(b){"HasConfirm"==b.type&&c.transitionTo("dashboard"),a.loaded=!0,a.showError=!0,a.errorType=b.type}),3===m&&""!==a.reactivateStudentFullParam.type&&""!==a.reactivateStudentFullParam.code&&e.reactivateStudentFull.post(a.reactivateStudentFullParam).then(function(b){var d=b.headers()[KP.CONSTANT.TOKEN_HEADER];f.autoLogin(d)["finally"](function(){a.currentUser&&c.go("teacher",{id:a.currentUser.id})})},function(){c.transitionTo("landing")})}]).controller("SetNewPasswordCtrl",["$scope","$log","Account","$state","$location",function(a,b,c,d,e){a.ticket=e.search().ticket,a.validatePWD=function(a){return a&&a.length>=6&&a.length<=20},a.pwdObj={new_password:"",new_password1:""},a.error={show:!1,type:0,msg:""},a.updateSucc=!1,a.savePwd=function(){return a.error={show:!1,type:0},a.updateSucc=!1,a.validatePWD(a.pwdObj.new_password)&&a.pwdObj.new_password1==a.pwdObj.new_password?c.setNewPassword().post({
ticket:a.ticket,password:a.pwdObj.new_password}).then(function(b){b.data.success&&(a.updateSucc=!0)},function(b){a.error.show=!0,a.error.type=b.type,a.error.msg=b.msg}):void 0}}]).controller("LogoutCtrl",["$scope","Account","$state","localStorageService","$rootScope","$kpSocket","UserService","EmailNotActive","ShowSaveMsg",function(a,b,c,d,e,f,g,h,i){var j=function(){b.logout().then(function(a){e.$broadcast("kp_account_sign_out"),f.close(),g.loginOut(),c.go("landing")},function(a){i.open(angular.element("<body>"),"logout failed!")})},k=d.get(KP.SERIALIZE.TOKEN);k?j():c.go("landing")}]),angular.module("kp.account").controller("AccountConnectCtrl",["$scope","$state","$log","KPNotify","$stateParams","UserService",function(a,b,c,d,e,f){var g=e.user_id,h=e.beta_key;if(f.isOnline())b.go("dashboard");else if(g&&h){var i=d.append({content:"connecting...",delay:864e5});f.connect({user_id:g,key:h}).then(function(a){c.debug("account should be connect success"),d.remove(i)},function(a){angular.isObject(a)&&"ACCOUNT_CONNECT_DISALLOW"==a.type&&(i.content="Sorry,you can't getting connected without italki beta invitation."),c.debug("connect account from www, getting error ->",a)})}else b.go("landing")}]),angular.module("kp.account.recaptcha",[]).service("geeService",["$window","$document","$q",function(a,b,c){this.createScript=function(a,c,d){if(c){var e=b[0].createElement("script");e.type="text/javascript",e.async=!0,e.src=c,e.onreadystatechange=function(){"complete"==this.readyState&&d()},e.onload=d,a&&a.appendChild(e)}},this.createVimeoScript=function(a,b){var c="https://www.vimeo.com/api/oembed.json",d=c+"?url="+encodeURIComponent(a)+"&callback="+b+"&width=640",e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",d),document.getElementsByTagName("head").item(0).appendChild(e)}}]).directive("kpGeetest",["geeService","$log","$timeout",function(a,b,c){return{restrict:"A",require:"?^^form",scope:{onSuccess:"&"},link:function(d,e,f,g){function h(){g&&g.$setValidity("recaptcha",!1)}d.$on("$recaptcha_should_refresh",function(){var a=$(e).find(".gt_refresh_button");a.length>0&&a[0].click(),c(function(){g.$setValidity("recaptcha",!1)})}),e.on("click",function(){e[0].blur()});var i=function(a){c(function(){g&&g.$setValidity("recaptcha",!0),d.onSuccess&&d.onSuccess({result:a})})};window.gt_custom_ajax=function(a,c,d){var f=$(e).find("input");b.debug("geetest callback ->",a,f,d),a&&i({success:a,data:[f[0].value,f[1].value,f[2].value].join(",")})},a.createScript(e[0],f.libUrl,h),d.$on("$destroy",function(){window.gt_custom_ajax=null,$(e[0]).empty(),window.Geetest&&delete window.Geetest,g.$setValidity("recaptcha",null)})}}}]).service("recaptchaService",["$window","$q","$log","$timeout",function(a,b,c,d){function e(){return g?b.when(g):i}function f(){if(!g)throw new Error("reCaptcha has not been loaded yet.")}var g,h=b.defer(),i=h.promise;return a.vcRecaptchaApiLoaded=function(){g=a.grecaptcha,h.resolve(g)},ng.isDefined(a.grecaptcha)&&a.vcRecaptchaApiLoaded(),{create:function(a,b,c,d){return d.callback=c,d.sitekey=b,e().then(function(b){return b.render(a,d)})},reload:function(a){f(),g.reset(a)},getResponse:function(a){return f(),g.getResponse(a)}}}]).directive("kpRecaptchaLib",["$translate","$compile",function(a,b){return{restrict:"E",link:function(c,d,e){var f='<script async defer src="{0}"></script>'.format("https://www.google.com/recaptcha/api.js?onload=vcRecaptchaApiLoaded&render=explicit&hl={0}".format(a.use()));d.append(b(f)(c))}}}]).directive("kpRecaptcha",["$document","$timeout","recaptchaService","$interval","$log",function(a,b,c,d,e){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(d,e,f,g){function h(){g&&g.$setValidity("recaptcha",null),j&&(b.cancel(j),j=null),i()}function i(){angular.element(a[0].querySelectorAll(".pls-container")).parent().remove()}if(d.$on("$recaptcha_should_refresh",function(){c.reload(d.widgetId),b(function(){g.$setValidity("recaptcha",!1)})}),!f.hasOwnProperty("key"))throw Error("no key error");d.widgetId=null;var j,k=d.$watch("key",function(a){if(a){40!==a.length&&throwNoKeyException();var i=function(a){b(function(){g&&g.$setValidity("recaptcha",!0),d.response=a,d.onSuccess({response:a,widgetId:d.widgetId})}),j=b(function(){g&&g.$setValidity("recaptcha",!1),d.response="",d.onExpire({widgetId:d.widgetId})},12e4)};c.create(e[0],a,i,{theme:d.theme||f.theme||null,tabindex:d.tabindex||f.tabindex||null,size:d.size||f.size||null}).then(function(a){g&&g.$setValidity("recaptcha",!1),d.widgetId=a,d.onCreate({widgetId:a}),d.$on("$destroy",h)}),k()}})}}}]),angular.module("kp.account").controller("AccountSignupCtrl",["$scope","$location","LoginService","$window","geeService","$translate","DataLayerService","Restangular","localStorageService",function(a,b,c,d,e,f,g,h,i){function j(e){e&&(a.newUser.geetest_challenge=e.geetest_challenge,a.newUser.geetest_validate=e.geetest_validate,a.newUser.geetest_seccode=e.geetest_seccode,a.newUser["g-recaptcha-response"]="6LfzPwUTAAAAAHw4GiborZNwfgEmO");var f=b.search().teacherOnboarding;c.register(a).then(function(a){if(f){var b="onboarding.teacher";i.cookie.set(b,"1"),h.one("account/onboardingtest").post("",{is_teacher_register:1}).then(function(a){return KP.API.SUCC},function(a){return KP.API.ERROR})}var c=a.data.data.user_obj;g.updateUser({userId:c.id,registerTime:c.register_time,studentType:"student",email:c.email,subscribeMarketingEmails:"yes",name:c.nickname,signupRef:KP.REF.user?KP.REF.url:"",signupRefType:KP.REF.userId,signupSource:"web"}),d.dataLayer.push({signupData:{signupService:"email",signupSource:"web"},event:"registrationSuccess"})},function(b){a.isExistErr="AccountEmailExist"===b.type,a.$broadcast("$recaptcha_should_refresh")})["finally"](function(){a.waiting=!1})}a.chinaWechat="cn"===KP.COUNTRY&&!KP.isMobile,a.isInputErr=null,a.isFormalErr=null,a.isExistErr=!1,a.newUser={ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign},b.$$search.email&&(a.newUser.email=b.$$search.email),b.$$search.username&&(a.newUser.nickname=b.$$search.username),a.loginViaFB=function(){return c.loginViaFB(a)},h.one("account/register").get().then(function(b){var d=b.data;if(angular.isObject(d)){var e=d.register_method;1==e&&(a.isRecaptcha=!0),5==e&&(a.isRecaptcha=!1,a.isGEE=!0,c.initGeetestConfig(j)),0==e&&(a.facebookOnly=!0)}}),a.register=function(){a.isRecaptcha?j():a.captchaObj.verify()},a.recaptchaCallback=function(b){a.hasValidator=!0,a.newUser["g-recaptcha-response"]=b},a.geeCallback=function(b){a.hasValidator=!0,a.newUser["g-recaptcha-response"]=b.data},a.signupUsername=function(){a.signup_form.foo=a.signup_form.signup_username.$invalid},a.signupUsermail=function(){a.signup_form.signup_email.$invalid?(a.isInputErr=!0,a.isFormalErr=!0):(a.isInputErr=!1,a.isFormalErr=!1),a.showcharacter=!1},a.signupUsermailshow=function(){a.showcharacter=!0,a.isInputErr=null,a.isFormalErr=null},a.signupUserpassword=function(){a.signup_form.password=a.signup_form.signup_password.$invalid},a.$watch("newUser.email",function(b,c){b&&a.isExistErr&&b!=c&&(a.isExistErr=!1)})}]),angular.module("kp.account").directive("kpNicknameValidation",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.validNickname=function(a,b){if(!b)return!1;var c=b.length;if(c>20||3>c)return!1;var d=b.match(/[0-9]/g);return null!==d&&d.length>5?!1:!0}}}}),angular.module("kp.account").controller("$$FacebookLoginNOEmailModalCtrl",["$scope","$log","UserService","$modalInstance","meta",function(a,b,c,d,e){function f(){if(!a.fb_no_email_form.$invalid){var b=angular.extend({email:a.user.email},e);return angular.extend(b,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign}),c.loginViaFBNoEmail(b).then(function(){d.close()},function(b){a.error=b})}}a.submit=f}]).controller("$$FacebookLoginHasEmailModalCtrl",["$scope","$log","UserService","$modalInstance","meta",function(a,b,c,d,e){function f(){if(!a.fb_has_email_form.$invalid){var b=angular.extend({password:a.user.password},e);return angular.extend(b,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign}),c.loginViaFBHasEmail(b).then(function(){d.close()},function(b){a.error=b})}}a.email=e.email,a.submit=f}]).service("FacebookLoginNOEmailModal",["$modal",function(a){this.open=function(b){var c=a.open({templateUrl:"/views/account/facebook.noemail.html",windowClass:"",resolve:{meta:function(){return b}},controller:"$$FacebookLoginNOEmailModalCtrl"});return c.result}}]).service("FacebookLoginHasEmailModal",["$modal",function(a){this.open=function(b){var c=a.open({templateUrl:"/views/account/facebook.hasemail.html",windowClass:"",resolve:{meta:function(){return b}},controller:"$$FacebookLoginHasEmailModalCtrl"});return c.result}}]).service("QuickLoginLayer",["$modal",function(a){this.open=function(){return a.open({templateUrl:"/views/account/quick.login.html",windowClass:"quick-login"})}}]),angular.module("kp.account.google",[]).provider("GooglePlus",[function(){var a={};a.clientId=null,this.setClientId=function(b){return a.clientId=b,this},this.getClientId=function(){return a.clientId},a.apiKey=null,this.setApiKey=function(b){return a.apiKey=b,this},this.getApiKey=function(){return a.apiKey},a.scopes=["https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.email"],this.setScopes=function(b){return a.scopes=b,this},this.getScopes=function(){return a.scopes},this.init=function(b){angular.extend(a,b)},this.$get=["$q","$rootScope","$timeout",function(b,c,d){var e=b.defer(),f=function(){};return f.prototype.login=function(){return gapi.auth.authorize({client_id:a.clientId,scope:a.scopes,immediate:!1},this.handleAuthResult),e.promise},f.prototype.checkAuth=function(){gapi.auth.authorize({client_id:a.clientId,scope:a.scopes,immediate:!0},this.handleAuthResult)},f.prototype.handleClientLoad=function(){gapi.client.setApiKey(a.apiKey),gapi.auth.init(function(){}),d(this.checkAuth,1)},f.prototype.handleAuthResult=function(a){a&&!a.error?(e.resolve(a),c.$apply()):e.reject("error")},f.prototype.getUser=function(){var a=b.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(b){a.resolve(b),c.$apply()})}),a.promise},f.prototype.getToken=function(){return gapi.auth.getToken()},f.prototype.setToken=function(a){return gapi.auth.setToken(a)},new f}]}]).run([function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}]),angular.module("kp.notification",[]),angular.module("kp.notification").controller("NotificationCtrl",["$scope","Restangular",function(a,b){var c=a;return b.one("notification").get().then(function(a){c.items=a.data,c.meta=a.meta})}]).controller("NotificationPopCtrl",["$scope","$log","Restangular","NotificationRender","NotificationModal",function(a,b,c,d,e){function f(){c.one("notification","popup").get({nue:-1,nae:-1,noe:-1}).then(function(a){var c=a.data,d=c.upcoming,e=c.action;g.loaded=!0,g.upcoming=d,g.action=e,b.debug("notification action data",a.data)})}var g=this,h=angular.noop;this.open=function(){e.show()},a.markAsRead=function(a,b){_.remove(g.ordinary.data,{id:a.id})},this.renderOnToggle=function(a){a?f():h()}}]),angular.module("kp.notification").controller("$$TestNotificationCtrl",["$scope","$rootScope","kpTitle","Sound","DesktopNotification","webNotification",function(a,b,c,d,e,f){var g=!1,h=!e.disabled();a.desktop_noti=h,a.$watch("desktop_noti",function(a){angular.isDefined(a)&&e.disabled(!a),a&&!f.isEnabled()&&f.requestPermission().then(function(){},function(){})}),a.sendTestNotification=function(){e.testNotification()},a.playOrStopSound=function(){g?(g=!1,d.stop()):(g=!0,d.play(3))}}]).service("TestNotificationModal",["$modal",function(a){this.show=function(){a.open({size:"sm",templateUrl:"/views/component/test.notification.html",windowClass:"test-notification",controller:"$$TestNotificationCtrl",backdrop:!1})}}]).service("Sound",["$window","$interval",function(a,b){var c="/static/audio/notification.mp3",d=a.Audio?new Audio(c):null,e=!0,f=null;this.play=function(a){d&&(e=!0,angular.isNumber(a)&&a>0&&!f?f=b(function(){d.play()},1e3*a):d.play())},this.stop=function(){e&&(e=!1,f&&(b.cancel(f),f=null))}}]).service("DesktopNotification",["webNotification","$state","NotiConstants","localStorageService","ItalkiMessageBox","$filter","DesktopNotificationRender","$log","$rootScope",function(a,b,c,d,e,f,g,h,i){function j(b){l(b)&&!n&&a.showNotification("italki Notification",m(o,b),function(a,b){a?h.warn("Unable to show notification: "+a.message):setTimeout(function(){b()},8e3)})}function k(a){if(!a)return!1;var b=a.replace(/'/g,'"').replace(/u"/g,'"').replace(/None/g,'""').replace(/L,/g,",");try{var c=angular.fromJson(b)[0];if(angular.isObject(c))return c.session_id}catch(d){var e="[A-Za-z0-9]{10}L",f=a.match(e)[0];return f.split("L")[0]}}var l=angular.isObject,m=angular.extend,n="true"==d.get("notification.off")||!1,o={icon:""};this.disabled=function(a){return angular.isDefined(a)&&a!==n?(n=a,void d.set("notification.off",!!a)):n},this.testNotification=function(){j({icon:"http://d42b23ca8b98c4c48218-e011ef914a29f21f9a22bf73f79926ab.r51.cf1.rackcdn.com/T0_Avatar.jpg",body:"this is a test notification."})},this.show=function(a){var d="";a.user_data&&(d=a.user_data.avatar_file_name||"");var m={onclick:function(){h.debug("user clicked notification=>",arguments,"noti item->",a);var d=l(a),f=a.noti_content?!0:!1;if(h.debug("isObj(noti): ",d),h.debug("noti['noti_content']: ",f),l(a))if(l(a.session_dict)){var g=a.session_dict,j=g.session_id;h.debug(j),j?b.go("sessionDetail",{sessionId:j},{reload:!0}):(j=g.package_id,j&&b.go("sessionPackageDetail",{id:j},{reload:!0}))}else if(a.v==c.USER_MESSAGE_MBO){var m=l(a.user_data)?a.user_data.id:-1;m&&e.chatWith(m)}else if(l(a.noti_content)){var n=a.noti_content,o=n.question_id,p=n.notebook_id,q=(n.session_id,n.package_id),r=n.discussion_id;j||(j=k(a.noti_content.session_dic_json)),j&&b.go("sessionDetail",{sessionId:j},{reload:!0}),q&&b.go("sessionPackageDetail",{id:q},{reload:!0}),o&&b.go("questionAlias.entity",{id:o},{reload:!0}),p&&b.go("notebookAlias.entity",{userId:i.currentUser.id,id:p},{reload:!0}),r&&b.go("discussionAlias.entity",{id:r},{reload:!0})}},icon:f("avatar")(d),body:g.render(a)||""};return m.body?(h.debug("DesktopNotification: new notification coming,",m),void j(m)):void h.error("DesktopNotification error -> ",a)}}]).controller("NotificationLayerCtrl",["$scope","$rootScope","kpTitle","options","$location","$filter","$log","Restangular","NotificationModal","NotificationRender","$state","NotiConstants",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return h.one("notification").post("setread",{id:a}).then(function(){})}var n=this,o=["list","detail"],p={page_size:10,"ajax-page-type":"unread",page:1};b.$on("kp.BrowserBackOrForwardBtnClick",function(){c.reset(),a.$dismiss()}),this.status=o[0],this.setStatus=function(a){o.indexOf(a)>-1&&(this.status=a)},this.isList=function(){return n.status==o[0]},this.isDetail=function(){return n.status==o[1]},this.backToList=function(){n.setStatus(o[0])},this.goToDetail=function(b){return 1012==b.type?(k.go("contacts.partner",{},{reload:!0}),void a.$close()):(n.actionObj=b,void n.setStatus(o[1]))},a.showDetail=function(b){if(b&&b.type>1999)b.showDetail=!b.showDetail;else{var c=0,d=b.args_||b.detail;switch(b.type){case 1014:case 1015:case 1016:c=1,k.go("notebookAlias.entity",{userId:a.currentUser.id,id:d.notebook_id},{reload:!0});break;case 1017:case 1018:case 1019:c=1,k.go("questionAlias.entity",{id:d.question_id},{reload:!0});break;case 1020:c=1,k.go("discussionAlias.entity",{id:d.discussion_id},{reload:!0});break;case 1026:c=1}1==c&&(m([b.id]),a.$close())}},a.navToLanguageChallenge=function(b,c){if(b&&((b.args_||b.detail)&&(c&&m([b.id]),a.$close()),b.type==l.NOTI_CHALLENGE_MILESTONE)){var d="/languagechallenge#myprogress";window.location.href=d,a.$close()}},a.navToSessionDetail=function(b,c){if(b){if(b.args_||b.detail){var d=b.args_||b.detail,e=d.session_id;e?k.go("sessionDetail",{sessionId:e},{reload:!0}):(e=d.package_id,k.go("sessionPackageDetail",{id:e},{reload:!0})),c&&m([b.id]),a.$close()}b.type==l.FOLLOW_REQUEST_MBO&&(k.go("contacts.partner"),a.$close())}},a.markAsRead=function(b){_.pull(n.items,b),n.items.length<1&&!n.meta.has_next&&(a.notifyObj.onc=0),m([b.id])},a.markAllAsRead=function(){var a=[];angular.forEach(n.items,function(b){a.push(b.id)}),m(a)["finally"](function(){n.items=[],p.page=1,n.loadNotification()})},this.loadMoreNotification=function(){return p.page=p.page+1,n.loadNotification()},this.loadAction=function(){return h.one("notification","action").get({nue:-1,nae:-1,noe:-1}).then(function(b){function c(a){return""+a.type_}g.debug("Notification actions: ",b);var e=b.data,h=e.upcoming,i=e.action,k=i.action_data1,l=i.action_data2,m=i.follow_request,o=i.follow_request_total;a.view.type=1==d.tab?"action":"ordinary";var p=_.groupBy(k,c),q=_.groupBy(l,c);g.debug("notification actions:",p,q);var r=[];angular.isDefined(h),angular.forEach(p,function(a,b){angular.forEach(a,function(a){a.content=j.render(a)}),r.push({title:j.render({type:parseInt(b,10)},a.length),timeStr:a[0].time_text,avatar:a[0].oppo_user_obj,items:a})}),angular.forEach(q,function(a,b){angular.forEach(a,function(a){a.content=j.render(a)}),r.push({title:j.render({type:parseInt(b,10)},a.length),timeStr:a[0].time_text,avatar:a[0].oppo_user_obj,items:a})}),angular.isArray(m)&&m.length>0&&r.push({type:1012,title:j.render({type:1012},o),timeStr:f("amTimeAgo")(m[0].create_time),avatar:m[0].oppo_user_obj,items:m}),angular.isDefined(h)&&(n.upcoming=h),n.actions=r,g.debug("actions rendered: ",r)})},a.filter=p,a.view={},this.loadNotification=function(){return h.one("notification").get(p).then(function(b){var c=n.items,d=b.data;angular.forEach(d,function(a){a._content=a.content,a.content=j.render(a)}),n.items=c?_.union(c,d):d,n.meta=b.meta,1==p.page&&angular.isArray(d)&&(0==d.length&&(a.notifyObj.onc=0),!a.view.type&&d.length>0&&(a.view.type="ordinary"))})},this.loadAction()["finally"](function(){n.loadNotification()["finally"](function(){a.$watch("view.type",function(a){"action"==a?(c.title("ML135"),e.search({notifications:"action"})):(c.title("ML136"),e.search({notifications:"other"}))}),n.loaded=!0})}),a.$on("kp.notificationbox.tab",function(b,c){a.view.type=1==c.tab?"action":"ordinary"})}]).service("NotificationModal",["$modal","kpTitle","$rootScope","$location",function(a,b,c,d){var e=!1;this.show=function(f){f||(f=1),1==f?d.search({notifications:"action"}):d.search({notifications:"other"}),b.title("ML135"),c.$emit("kp.dataLayer.fired",{event:"virtualPageview"});c.$new();if(!e){e=!0;var g=a.open({resolve:{options:function(){return{tab:f}}},backdrop:"static",controller:"NotificationLayerCtrl",controllerAs:"ctrl",templateUrl:"/views/notification/modal.html",windowClass:"notification-layer"});return g.result["finally"](function(){e=!1,b.reset(),d.search({notifications:null})}),g}c.$broadcast("kp.notificationbox.tab",{tab:f})}}]).service("DesktopNotificationRender",["$log","$translate","UserService","NotiConstants","$state",function(a,b,c,d,e){function f(a,b){return j(a,b)}var g=angular.isObject,h=b.instant,i=KP.Utils.format,j=e.href;this.render=function(b){function e(){for(var a=[],b=0;b<y.length;b++){var c='<span class="label label-tags quality-tags">',d="</span>",e=y[b].tag_code.translate(),f=c+" "+e+d;a.push(f)}return a.join("&nbsp;")}function j(){for(var a=[],b=0;b<z.length;b++){var c='<span class="label label-tags personal-tags">',d="</span>",e=z[b].tag_name,f=c+" "+e+d;a.push(f)}return a.join("&nbsp;")}if(!g(b)||"new_noti"==!b.type)return a.warn("desktop notification obj must be a obj"),"";var k=b.v,l=b.user_data.nickname;switch(k){case d.SESSION_INSTANT_REQUEST_ACCEPT_6_T:return"TS907".translate();case d.USER_MESSAGE_MBO:return"{0} sent you a message".format(l);case d.SESSION_REQUEST_0_S:case d.PACKAGE_SESSION_REQUEST_0_S:return"NT301".translate().format(l);case d.PACKAGE_REQUEST_0_S:return"NT303".translate().format(l);case d.SESSION_FINISH_F_FEEDBACK_REMIND_I:return"NT306".translate();case d.PURCHASE_SUCCESS:return"NT401".translate();case d.PURCHASE_CHALLENGE_SUCCESS:case d.PURCHASE_OET_SUCCESS:return"NT402".translate();case d.FOLLOW_REQUEST_MBO:return"NT312".translate().format(l);case d.FOLLOW_MBO:return"NT238".translate().format(l);case d.NOTEBOOK_COMMENT_MBO:var m=b.noti_content.title;return"NT032".translate().format(l,m);case d.NOTEBOOK_CORRECTION_MBO:var m=b.noti_content.title;return"NT031".translate().format(l,m);case d.NOTEBOOK_CORRECTION_COMMENT_MBO:var m=b.noti_content.title;return"NT033".translate().format(l,m);case d.BIRTHDAY_NOTI:return h("NT403");case d.USER_GIFTCARD_MBO:return"NT239".translate().format(l);case d.QUESION_ANSWER_COMMENT_MBO:var m=b.noti_content.title;return"NT035".translate().format(l,m);case d.QUESION_ANSWER_MBO:var m=b.noti_content.title;return"NT003".translate().format(l,m);case d.QUESION_COMMENT_MBO:var m=b.noti_content.title;return"NT034".translate().format(l,m);case d.DISCUSSION_COMMENT_MBO:var m=b.noti_content.title;return"NT008".translate().format(l,m);case d.USERMISSION_COMMENT_MBO:var n=b.noti_content.sort;return"NT040".translate().format(l,n);case d.SESSION_REQUEST_ACCEPT_6_T:case d.SESSION_TRIAL_REQUEST_ACCEPT_6_T:case d.PACKAGE_SESSION_REQUEST_ACCEPT_6_T:return"NT227".translate().format(l);case d.SESSION_TRIAL_REQUEST_0_S:return"NT302".translate().format(l);case d.PACKAGE_REQUEST_ACCEPT_5_T:return"NT228".translate().format(l);case d.SESSION_REQUEST_DECLINE_4_T:return i(h("NT229"),l);case d.SESSION_REQUEST_DECLINE_4_T:case d.SESSION_TRIAL_REQUEST_DECLINE_4_T:case d.PACKAGE_SESSION_REQUEST_DECLINE_4_T:return i(h("NT229"),l);case d.PACKAGE_REQUEST_DECLINE_4_T:return i(h("NT230"),l);case d.SESSION_REQUEST_CANCEL_1_S:case d.SESSION_TRIAL_REQUEST_CANCEL_1_S:return i(h("NT205"),l);case d.PACKAGE_REQUEST_CANCEL_1_S:return i(h("NT206"),l);case d.SESSION_REQUEST_EXPIRED_2_I:case d.SESSION_TRIAL_REQUEST_EXPIRED_2_I:case d.PACKAGE_SESSION_REQUEST_EXPIRED_2_I:return h("NT248");case d.PACKAGE_REQUEST_EXPIRED_2_I:return i(h("NT253"),arg);case d.SESSION_REQUEST_MODIFY_3_T:return i(h("NT305"),l);case d.SESSION_REQUEST_MODIFY_ACCEPT_6_S:case d.SESSION_TIME_CHANGE_ACCEPT_6_S:case d.SESSION_TIME_CHANGE_ACCEPT_6_T:return i(h("NT207"),l);case d.SESSION_REQUEST_MODIFY_DECLINE_1_S:case d.SESSION_TIME_CHANGE_DECLINE_6_S:case d.SESSION_TIME_CHANGE_DECLINE_6_T:return i(h("NT247"),l);case d.SESSION_REQUEST_MODIFY_EXPIRED_2_I:return h("NT248");case d.PACKAGE_REQUEST_MODIFY_3_T:case d.PACKAGE_REQUEST_MODIFY_6_S:return i(h("NT304"),l);case d.PACKAGE_REQUEST_MODIFY_ACCEPT_5_S:case d.PACKAGE_REQUEST_MODIFY_ACCEPT_5_T:return i(h("NT209"),l);case d.PACKAGE_REQUEST_MODIFY_DECLINE_1_S:case d.PACKAGE_REQUEST_MODIFY_DECLINE_4_T:return i(h("NT249"),l);case d.PACKAGE_REQUEST_MODIFY_6_EXPIRED_2_I:return h("NT250");case d.SESSION_TIME_CHANGE_5_S:case d.SESSION_TIME_CHANGE_5_T:return i(h("NT305"),l);case d.SESSION_TIME_END_7_I:case d.PACKAGE_SESSION_TIME_END_7_I:var o=b.session_dict.student_textid,p=c.currentUser();return o===p.id?i(h("NT311"),l):i(h("NT211"),l);case d.SESSION_FINISH_F_S:case d.PACKAGE_SESSION_FINISH_F_S:return h("NT306");case d.SESSION_FINISH_F_I:case d.PACKAGE_SESSION_FINISH_F_I:return h("NT260");case d.SESSION_FEEDBACK_G_T:return i(h("NT252"),l);case d.SESSION_END_Z_I:return h("NT254");case d.SESSION_PROBLEM_E_S:case d.SESSION_PROBLEM_E_T:var q=b.session_dict,r=q.session_type;return 2==r?"NT271".translate():h("NT219");case d.SESSION_PROBLEM_REQUEST_C_S:case d.SESSION_PROBLEM_REQUEST_C_T:case d.SESSION_PROBLEM_REQUEST_S_S:case d.SESSION_PROBLEM_REQUEST_S_T:return i(h("NT307"),l);case d.SESSION_PROBLEM_REQUEST_ACCEPT_E_S:case d.SESSION_PROBLEM_REQUEST_ACCEPT_E_T:var q=b.session_dict,p=c.currentUser(),s=q.student_textid==p.id,t=q.problem_refund_usd/100,u=q.session_price_usd/100,r=q.session_type;if(angular.isNumber(t)&&angular.isNumber(u)){t=t.toFixed(2),u=u.toFixed(2);var v=(u-t).toFixed(2);return 0==t?"NT265".translate().format(u):s?2==r?"NT271".translate():"NT266".translate().format(v,t):2==r?"NT271".translate():"NT266".translate().format(t,v)}return"";case d.SESSION_PROBLEM_REQUEST_ACCEPT_Q_S:case d.SESSION_PROBLEM_REQUEST_ACCEPT_Q_T:return i(h("NT218"),l);case d.SESSION_PROBLEM_REQUEST_DECLINE_H_S:case d.SESSION_PROBLEM_REQUEST_DECLINE_H_T:return i(h("NT215"),l);case d.SESSION_PROBLEM_RESCHEDULE_REQUEST_O_S:case d.SESSION_PROBLEM_RESCHEDULE_REQUEST_O_T:return i(h("NT308"),l);case d.SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_S:case d.SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_T:return i(h("NT227"),l);case d.PACKAGE_TERMINATE_REQUEST_C_S:case d.PACKAGE_TERMINATE_REQUEST_B_T:return i(h("NT309"),l);case d.PACKAGE_TERMINATE_REQUEST_ACCEPT_7_S:case d.PACKAGE_TERMINATE_REQUEST_ACCEPT_7_T:return i(h("NT222"),l);case d.PACKAGE_TERMINATE_7_I:return h("NT255");case d.PACKAGE_TERMINATE_REQUEST_DECLINE_Z_S:case d.PACKAGE_TERMINATE_REQUEST_DECLINE_Z_T:return i(h("NT224"),l);case d.SESSION_INSTANT_REQUEST_0_S:var w=b.noti_content;w=w.session_dic_json,w=w.replace(/'/g,'"').replace(/u"/g,'"').replace(/None/g,'""').replace(/L,/g,","),w=angular.fromJson(w)[0];var p=c.currentUser();return p.id==KP.Utils.textIdToId(w.student_textid)?"TS900".translate():h("TS814");case d.SESSION_INSTANT_REQUEST_DECLINE_4_T:return"TS906".translate();case d.PACKAGE_EXTENSION_REQUEST_S:case d.PACKAGE_EXTENSION_REQUEST_T:return i(h("NT310"),l);case d.PACKAGE_EXTENSION_REQUEST_ACCEPT_S:case d.PACKAGE_EXTENSION_REQUEST_ACCEPT_T:return i(h("NT223"),l);case d.PACKAGE_EXTENSION_REQUEST_DECLINE_S:case d.PACKAGE_EXTENSION_REQUEST_DECLINE_T:return i(h("NT225"),l);case d.PACKAGE_EXTENSION_REMIND_S:case d.PACKAGE_EXTENSION_REMIND_T:return i(h("NT256"),l);case d.SESSION_TIME_BEGIN_REMIND_6_I:var x=b.session_dict;return i(h("NT233"),moment.utc(x.session_start_time,"YYYY-MM-DD HH:mm:ss").fromNow());case d.SESSION_TRIAL_TIME_END_7_I:return i(h("NT311"),l);case d.SESSION_TIME_END_7_TI:return i(h("NT211"),l);case d.SESSION_PROBLEM_REQUEST_ACCEPT_Q_I:return"NT218".translate().format(l);case d.SESSION_PROBLEM_REQUEST_ACCEPT_E_I:return h("NT219");case d.SESSION_SEND_MESSAGE_S:case d.SESSION_SEND_MESSAGE_T:return i(h("NT236"),l);case d.PACKAGE_SEND_MESSAGE_S:case d.PACKAGE_SEND_MESSAGE_T:return i(h("NT257"),l);case d.PACKAGE_REQUEST_MODIFY_3_EXPIRED_2_I:return h("NT250");case d.SESSION_PROBLEM_Q_RESCHEDULE_REMIND_I:return h("NT314");case d.PACKAGE_5_WILL_EXPIRE_REMIND_I:var x=b.session_dict;return i(h("NT258"),moment.utc(x.expiration_time,"YYYY-MM-DD HH:mm:ss").fromNow());case d.SESSION_INSTANT_FINISH_F_I:return h("NT260");case d.SESSION_INSTANT_END_Z_I:return"The lesson was canceled.";case d.SESSION_INSTANT_REQUEST_CANCEL_1_S:return h("TS905");case d.PACKAGE_5_EXPIRED_REMIND_I:return h("NT259");case d.SESSION_FINISH_F_FEEDBACK_REMIND_I:return h("NT306");case d.SESSION_TIME_CHANGED_6_I1:return h("NT261");case d.SESSION_PROBLEM_DISPUTED_RESOLVE_E_I1:return h("NT262");case d.PACKAGE_FREEZE_Z_I:return h("NT263");case d.PACKAGE_EXTENSION_I1:return h("NT264");case d.PACKAGE_TERMINATE_7_I1:return h("NT255");case d.TEACHER_TAG_VOTE_T:var y=b.detail.public_vote_tags,z=b.detail.personal_vote_tags;return"NT041".translate().format(l,j(),e());case d.NOTI_CHALLENGE_MILESTONE:var A=b.detail.completed_hours;switch(A){case 0:return"LC502".translate();case 1:var B="LC503".translate()+"LC073".translate();return B;case 2:var C="LC504".translate(),D="LC074".translate().format(2),E={notifTile:C,text:D};return E;case 3:var F="LC505".translate()+"LC074".translate().format(3);return F;case 4:var G="LC076".translate()+"LC074".translate().format(4);return G;case 5:var H="LC077".translate()+"LC506".translate();return H;case 6:var I="LC507".translate()+"LC074".translate().format(6);return I;case 7:var J="LC508".translate()+"LC074".translate().format(7);return J;case 8:var K="LC509".translate()+"LC074".translate().format(8);return K;case 9:var L="LC076".translate()+"LC074".translate().format(9);return L;case 10:var M="LC510".translate()+"LC074".translate().format(10);return M;case 11:var N="LC511".translate()+"LC074".translate().format(11);return N;case 12:var O="LC079".translate()+"LC074".translate().format(12)+"LC513".translate().format(38);return O;case 13:var P="LC079".translate()+"LC074".translate().format(13);return P;case 14:var Q="LC509".translate()+"LC074".translate().format(14);return Q;case 15:var R="LC076".translate()+"LC074".translate().format(15);return R;case 16:var S="LC080".translate()+"LC074".translate().format(16)+"LC513".translate().format(24);return S;case 17:var T="LC509".translate()+"LC074".translate().format(17);return T;case 18:var U="LC514".translate()+"LC074".translate().format(18);return U;case 19:var V="LC081".translate()+"LC074".translate().format(19)+"LC513".translate().format(17);return V;case 20:var W="LC512".translate()+"LC074".translate().format(20)+"LC513".translate().format(15);return W;default:return""}case d.NOTI_RECEIEVED_COUPON:var X="<span>",Y=",</span><br><span>",Z='<a href="'+f("finance.myCoupon")+'" target="_blank">',$="!</a></span><br><span>",_="</span>",aa=h("NT318"),ba=h("NT319"),ca=h("NT321"),da=h("NT320"),ea=X+aa+Y+ba+Z+ca+$+da+_;return ea;case d.NOTI_REDEEM_GENERIC_CODE:var fa=$filter("kpToUsd")(b.detail.voucher_value),ga="<span>",ha="</span><br><span>",ia=" </span>",ja=h("NT316").format(fa),ka=h("NT317"),la=ga+ja+ha+ka+ia;return la;case d.NOTI_COUPON_WILL_EXPIRE:var ha="<span>",ia=', <a href="'+f("finance.myCoupon")+'" target="_blank">',ma="!</a></span>",na=h("NT315"),oa=h("NT321"),pa=ha+na+ia+oa+ma;return pa;case"new_noti":a.debug("new noti:",b);var k=b.v,l=b.user_data.nickname;switch(k){case d.QUESION_COMMENT_MBO:var m=b.noti_content.title;return"NT034".translate().format(l,m);case d.USER_MESSAGE_MBO:return"{0} sent you a message".format(l);case d.SESSION_REQUEST_0_S:return"NT301".translate().format(l);case d.SESSION_FINISH_F_FEEDBACK_REMIND_I:return"NT306".translate();default:return""}default:return""}}}]).service("NotificationRender",["$log","NotiConstants","UserService","$translate","$state","$filter",function(a,b,c,d,e,f){function g(a,b){return j(a,b)}var h=angular.isObject,i=d.instant,j=e.href,k=KP.Utils.format;angular.toJson;this.render=function(d,e){function j(){for(var a=[],b=0;b<x.length;b++){var c='<span class="label label-tags quality-tags">',d="</span>",e=x[b].tag_code.translate(),f=c+" "+e+d;a.push(f)}return a.join("&nbsp;")}function l(){for(var a=[],b=0;b<y.length;b++){var c='<span class="label label-tags personal-tags">',d="</span>",e=y[b].tag_name,f=c+" "+e+d;a.push(f)}return a.join("&nbsp;")}if(!h(d))return a.warn("notification obj must be obj"),"";var m=d.type,n=d.oppo_user_obj,o=n?n.nickname:"";switch(m){case b.PURCHASE_SUCCESS:return"NT401".translate();case b.PURCHASE_CHALLENGE_SUCCESS:case b.PURCHASE_OET_SUCCESS:return i("NT402");case b.PURCHASE_SUCCESS:return i("NT401");case b.FOLLOW_REQUEST_MBO:return a.debug("Arg: ",e),e?k(i("NT237"),e):k(i("NT312"),o);case b.FOLLOW_MBO:return"NT238".translate().format('<a href="'+g("user",{id:d.oppo_user_obj.id})+'" >'+o+"</a>");case b.NOTEBOOK_COMMENT_MBO:var p=d.detail;return"NT032".translate().format(o,'<a href="'+g("notebook.entity",{id:p.notebook_id})+'">'+p.title+"</a>");case b.NOTEBOOK_CORRECTION_MBO:var p=d.detail;return"NT031".translate().format(o,'<a href="'+g("notebook.entity",{id:p.notebook_id})+'">'+p.title+"</a>");case b.NOTEBOOK_CORRECTION_COMMENT_MBO:var p=d.detail;return"NT033".translate().format(o,'<a href="'+g("notebook.entity",{
id:p.notebook_id})+'">'+p.title+"</a>");case b.QUESION_COMMENT_MBO:var p=d.detail;return"NT034".translate().format(o,'<a href="'+g("questionAlias.entity",{id:p.question_id})+'">'+p.title+"</a>");case b.QUESION_ANSWER_MBO:var p=d.detail;return"NT003".translate().format(o,'<a href="'+g("questionAlias.entity",{id:p.question_id})+'">'+p.title+"</a>");case b.QUESION_ANSWER_COMMENT_MBO:var p=d.detail;return"NT035".translate().format(o,'<a href="'+g("questionAlias.entity",{id:p.question_id})+'">'+p.title+"</a>");case b.DISCUSSION_COMMENT_MBO:var p=d.detail;return"NT008".translate().format(o,'<a href="'+g("discussionAlias.entity",{id:p.discussion_id})+'">'+p.title+"</a>");case b.USERMISSION_COMMENT_MBO:var p=d.detail;return"NT040".translate().format(o,'<a href="'+g("languagehackingentity",{language:p.language,sort:p.language,id:p.user_mission_id})+'">'+p.sort+"</a>");case b.BIRTHDAY_NOTI:return i("NT403");case b.USER_GIFTCARD_MBO:return k(i("NT239"),o);case b.SESSION_REQUEST_0_S:return e?k(i("NT201"),e):k(i("NT301"),o);case b.SESSION_TRIAL_REQUEST_0_S:return e?k(i("NT202"),e):k(i("NT302"),o);case b.SESSION_INSTANT_REQUEST_0_S:return i("TS814");case b.PACKAGE_SESSION_REQUEST_0_S:return e?k(i("NT201"),e):k(i("NT301"),o);case b.PACKAGE_REQUEST_0_S:return e?k(i("NT204"),e):k(i("NT303"),o);case b.SESSION_REQUEST_ACCEPT_6_T:case b.SESSION_TRIAL_REQUEST_ACCEPT_6_T:case b.PACKAGE_SESSION_REQUEST_ACCEPT_6_T:return k(i("NT227"),o);case b.PACKAGE_REQUEST_ACCEPT_5_T:return k(i("NT228"),o);case b.SESSION_REQUEST_DECLINE_4_T:return k(i("NT229"),o);case b.SESSION_REQUEST_DECLINE_4_T:case b.SESSION_TRIAL_REQUEST_DECLINE_4_T:case b.PACKAGE_SESSION_REQUEST_DECLINE_4_T:return k(i("NT229"),o);case b.PACKAGE_REQUEST_DECLINE_4_T:return k(i("NT230"),o);case b.SESSION_REQUEST_CANCEL_1_S:case b.SESSION_TRIAL_REQUEST_CANCEL_1_S:return k(i("NT205"),o);case b.PACKAGE_REQUEST_CANCEL_1_S:return k(i("NT206"),o);case b.SESSION_REQUEST_EXPIRED_2_I:case b.SESSION_TRIAL_REQUEST_EXPIRED_2_I:case b.PACKAGE_SESSION_REQUEST_EXPIRED_2_I:return i("NT248");case b.PACKAGE_REQUEST_EXPIRED_2_I:return k(i("NT253"),e);case b.SESSION_REQUEST_MODIFY_3_T:return e?k(i("NT210"),e):k(i("NT305"),o);case b.SESSION_REQUEST_MODIFY_ACCEPT_6_S:case b.SESSION_TIME_CHANGE_ACCEPT_6_S:case b.SESSION_TIME_CHANGE_ACCEPT_6_T:return k(i("NT207"),o);case b.SESSION_REQUEST_MODIFY_DECLINE_1_S:case b.SESSION_TIME_CHANGE_DECLINE_6_S:case b.SESSION_TIME_CHANGE_DECLINE_6_T:return k(i("NT247"),o);case b.SESSION_REQUEST_MODIFY_EXPIRED_2_I:return i("NT248");case b.PACKAGE_REQUEST_MODIFY_3_T:case b.PACKAGE_REQUEST_MODIFY_6_S:return e?k(i("NT208"),e):k(i("NT304"),o);case b.PACKAGE_REQUEST_MODIFY_ACCEPT_5_S:case b.PACKAGE_REQUEST_MODIFY_ACCEPT_5_T:return k(i("NT209"),o);case b.PACKAGE_REQUEST_MODIFY_DECLINE_1_S:case b.PACKAGE_REQUEST_MODIFY_DECLINE_4_T:return k(i("NT249"),o);case b.PACKAGE_REQUEST_MODIFY_6_EXPIRED_2_I:return i("NT250");case b.SESSION_TIME_CHANGE_5_S:case b.SESSION_TIME_CHANGE_5_T:return e?k(i("NT210"),e):k(i("NT305"),o);case b.SESSION_TIME_END_7_I:case b.PACKAGE_SESSION_TIME_END_7_I:return e?k(i("NT232"),e):k(i("NT311"),o);case b.SESSION_FINISH_F_S:case b.PACKAGE_SESSION_FINISH_F_S:return e?k(i("NT213"),e):i("NT306");case b.SESSION_FINISH_F_I:case b.PACKAGE_SESSION_FINISH_F_I:return i("NT260");case b.SESSION_FEEDBACK_G_T:return k(i("NT252"),o);case b.SESSION_END_Z_I:return i("NT254");case b.SESSION_PROBLEM_E_S:case b.SESSION_PROBLEM_E_T:var q=d.detail,r=q.session_type;return 2==r?"NT271".translate():i("NT219");case b.SESSION_PROBLEM_REQUEST_C_S:case b.SESSION_PROBLEM_REQUEST_C_T:case b.SESSION_PROBLEM_REQUEST_S_S:case b.SESSION_PROBLEM_REQUEST_S_T:return e?k(i("NT214"),e):k(i("NT307"),o);case b.SESSION_PROBLEM_REQUEST_ACCEPT_E_S:case b.SESSION_PROBLEM_REQUEST_ACCEPT_E_T:var q=d.detail,s=c.currentUser(),t=q.student_textid==s.id,u=q.problem_refund_usd/100,v=q.session_price_usd/100,r=q.session_type;if(angular.isNumber(u)&&angular.isNumber(v)){u=u.toFixed(2),v=v.toFixed(2);var w=(v-u).toFixed(2);return 0==u?"NT265".translate().format(v):t?2==r?"NT271".translate():"NT266".translate().format(w,u):2==r?"NT271".translate():"NT266".translate().format(u,w)}return"";case b.SESSION_PROBLEM_REQUEST_ACCEPT_Q_S:case b.SESSION_PROBLEM_REQUEST_ACCEPT_Q_T:return k(i("NT218"),o);case b.SESSION_PROBLEM_REQUEST_DECLINE_H_S:case b.SESSION_PROBLEM_REQUEST_DECLINE_H_T:return k(i("NT215"),o);case b.SESSION_PROBLEM_RESCHEDULE_REQUEST_O_S:case b.SESSION_PROBLEM_RESCHEDULE_REQUEST_O_T:return e?k(i("NT216"),e):k(i("NT308"),o);case b.SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_S:case b.SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_T:return k(i("NT227"),o);case b.PACKAGE_TERMINATE_REQUEST_C_S:case b.PACKAGE_TERMINATE_REQUEST_B_T:return e?k(i("NT220"),e):k(i("NT309"),o);case b.PACKAGE_TERMINATE_REQUEST_ACCEPT_7_S:case b.PACKAGE_TERMINATE_REQUEST_ACCEPT_7_T:return k(i("NT222"),o);case b.PACKAGE_TERMINATE_7_I:return i("NT255");case b.PACKAGE_TERMINATE_REQUEST_DECLINE_Z_S:case b.PACKAGE_TERMINATE_REQUEST_DECLINE_Z_T:return k(i("NT224"),o);case b.PACKAGE_EXTENSION_REQUEST_S:case b.PACKAGE_EXTENSION_REQUEST_T:return e?k(i("NT221"),e):k(i("NT310"),o);case b.PACKAGE_EXTENSION_REQUEST_ACCEPT_S:case b.PACKAGE_EXTENSION_REQUEST_ACCEPT_T:return k(i("NT223"),o);case b.PACKAGE_EXTENSION_REQUEST_DECLINE_S:case b.PACKAGE_EXTENSION_REQUEST_DECLINE_T:return k(i("NT225"),o);case b.PACKAGE_EXTENSION_REMIND_S:case b.PACKAGE_EXTENSION_REMIND_T:return k(i("NT256"),o);case b.SESSION_TIME_BEGIN_REMIND_6_I:var p=d.detail;return k(i("NT233"),moment(p.session_start_time).fromNow());case b.SESSION_TRIAL_TIME_END_7_I:return e?k(i("NT232"),e):k(i("NT311"),o);case b.SESSION_TIME_END_7_TI:return k(i("NT211"),o);case b.SESSION_PROBLEM_REQUEST_ACCEPT_Q_I:return k(i("NT218"),o);case b.SESSION_PROBLEM_REQUEST_ACCEPT_E_I:return i("NT219");case b.SESSION_SEND_MESSAGE_S:case b.SESSION_SEND_MESSAGE_T:return k(i("NT236"),o);case b.PACKAGE_SEND_MESSAGE_S:case b.PACKAGE_SEND_MESSAGE_T:return k(i("NT257"),o);case b.PACKAGE_REQUEST_MODIFY_3_EXPIRED_2_I:return i("NT250");case b.SESSION_PROBLEM_Q_RESCHEDULE_REMIND_I:return e?k(i("NT217"),e):i("NT314");case b.PACKAGE_5_WILL_EXPIRE_REMIND_I:var p=d.detail;return k(i("NT258"),moment(p.expiration_time).fromNow());case b.SESSION_INSTANT_FINISH_F_I:return i("NT260");case b.SESSION_INSTANT_REQUEST_CANCEL_1_S:return i("TS905");case b.PACKAGE_5_EXPIRED_REMIND_I:return i("NT259");case b.SESSION_FINISH_F_FEEDBACK_REMIND_I:return e?k(i("NT213"),e):i("NT306");case b.SESSION_TIME_CHANGED_6_I1:return i("NT261");case b.SESSION_PROBLEM_DISPUTED_RESOLVE_E_I1:return i("NT262");case b.PACKAGE_FREEZE_Z_I:return i("NT263");case b.PACKAGE_EXTENSION_I1:return i("NT264");case b.PACKAGE_TERMINATE_7_I1:return i("NT255");case b.TEACHER_TAG_VOTE_T:var x=d.detail.public_vote_tags,y=d.detail.personal_vote_tags;return"NT041".translate().format(o,l(),j());case b.NOTI_CHALLENGE_MILESTONE:var z=d.detail.completed_hours;switch(z){case 1:var A="LC503".translate(),B="LC073".translate(),C={tile:A,text:B};return C;case 2:var D="LC504".translate(),E="LC074".translate().format(2),F={tile:D,text:E};return F;case 3:var G="LC505".translate(),H="LC074".translate().format(3),I={tile:G,text:H};return I;case 4:var J="LC076".translate(),K="LC074".translate().format(4),L={tile:J,text:K};return L;case 5:var M="LC077".translate(),N="LC506".translate(),O={tile:M,text:N};return O;case 6:var P="LC507".translate(),Q="LC074".translate().format(6),R={tile:P,text:Q};return R;case 7:var S="LC508".translate(),T="LC074".translate().format(7),U={tile:S,text:T};return U;case 8:var V="LC509".translate(),W="LC074".translate().format(8),X={tile:V,text:W};return X;case 9:var Y="LC076".translate()+"LC074".translate().format(9),Z="LC074".translate().format(9),$={tile:Y,text:Z};return $;case 10:var _="LC510".translate(),aa="LC074".translate().format(10),ba={tile:_,text:aa};return ba;case 11:var ca="LC511".translate(),da="LC074".translate().format(11),ea={tile:ca,text:da};return ea;case 12:var fa="LC079".translate(),ga="LC074".translate().format(12)+"LC513".translate().format(38),ha={tile:fa,text:ga};return ha;case 13:var ia="LC079".translate(),ja="LC074".translate().format(13),ka={tile:ia,text:ja};return ka;case 14:var la="LC509".translate(),ma="LC074".translate().format(14),na={tile:la,text:ma};return na;case 15:var oa="LC076".translate(),pa="LC074".translate().format(15),qa={tile:oa,text:pa};return qa;case 16:var ra="LC080".translate(),sa="LC074".translate().format(16)+"LC513".translate().format(24),ta={tile:ra,text:sa};return ta;case 17:var ua="LC509".translate(),va="LC074".translate().format(17),wa={tile:ua,text:va};return wa;case 18:var xa="LC514".translate(),ya="LC074".translate().format(18),za={tile:xa,text:ya};return za;case 19:var Aa="LC081".translate(),Ba="LC074".translate().format(19)+"LC513".translate().format(17),Ca={tile:Aa,text:Ba};return Ca;case 20:var Da="LC512".translate(),Ea="LC074".translate().format(20)+"LC513".translate().format(15),Fa={tile:Da,text:Ea};return Fa;default:return""}case b.NOTI_RECEIEVED_COUPON:var Ga="<span>",Ha=",</span><br><span>",Ia='<a href="'+g("finance.myCoupon")+'" target="_blank">',Ja="!</a></span><br><span>",Ka="</span>",La=i("NT318"),Ma=i("NT319"),Na=i("NT321"),Oa=i("NT320"),Pa=Ga+La+Ha+Ma+Ia+Na+Ja+Oa+Ka;return Pa;case b.NOTI_REDEEM_GENERIC_CODE:var Qa=f("kpToUsd")(d.detail.voucher_value),Ra="<span>",Sa="</span><br><span>",Ta=" </span>",Ua=i("NT316").format(Qa),Va=i("NT317"),Wa=Ra+Ua+Sa+Va+Ta;return Wa;case b.NOTI_COUPON_WILL_EXPIRE:var Sa="<span>",Ta=', <a href="'+g("finance.myCoupon")+'" target="_blank">',Xa="!</a></span>",Ya=i("NT315"),Za=i("NT321"),$a=Sa+Ya+Ta+Za+Xa;return $a;case"new_noti":a.debug("new noti",d);var m=d.v,o=d.user_data.nickname;switch(m){case b.QUESION_COMMENT_MBO:var _a=d.noti_content.title;return"NT304".translate().format(o,_a);case b.USER_MESSAGE_MBO:return"{0} sent you a message".format(o);case b.SESSION_REQUEST_0_S:return"NT301".translate().format(o);case b.SESSION_FINISH_F_FEEDBACK_REMIND_I:return"NT306".translate()}}}}]),angular.module("kp.function",[]).service("ReturnPath",["$state",function(a){var b,c=angular.isObject;this.preState=function(a){return c(a)?void(b=a):b},this.backToPrevState=function(){if(c(b)){var d=b.$current,e=b.params;a.transitionTo(d,e)}}}]),angular.module("kp.message",[]),angular.module("kp.message").service("Message",["Restangular",function(a){this.list=function(b){return a.service("message").one().get(b)},this.deleteChat=function(b){return a.one("message/with/"+b).remove()},this.markAllAsRead=function(){return a.one("message/unread").post("markread")},this.deleteMessage=function(b){return a.one("message/"+b).remove()},this.messagesWithUser=function(b,c){return a.one("message/with/"+b).get(c)},this.sendMessage=function(b,c){return a.one("message/with/"+b).post("",c)},this.loadUserViaQ=function(b){return a.one("contact/user")},this.messageListViaQ=function(b){return a.one("message").get({page_size:10,nickname:b})}}]).directive("adjustMessagePicture",["$log","$document","$interval",function(a,b,c){function d(a){var b="adjust-picture",d=socialIconsWidth=300,e=null;angular.forEach(a.children(),function(a){e=angular.element(a).find("img"),angular.forEach(e,function(a){var c=angular.element(a);c.attr("width")>d&&c.addClass(b)})}),0!=e.length&&c.cancel()}function e(a,b,e,f){c(function(){d(b)},1e3,b)}return{restrict:"A",scope:{},link:e}}]).directive("overlappingBinPatch",["$log","$document",function(a,b){function c(a,b,c){var d,e={offset:$(b).offset().top,height:$(b).outerHeight()},f={top:e.offset,bottom:e.offset+e.height},g="delete-message-hide-dropdown",h=".message.message-item",i=$(".fa-trash-o"),j=angular.element(b).hasClass(g),k=0,l=10;j?angular.forEach(i,function(a,c){d=$(b).parents(h),$(d).css("z-index",k)}):angular.forEach(i,function(a,c){var e={offset:$(a).offset().top};e.offset>f.top&&e.offset<f.bottom&&(d=$(b).parents(h),$(d).css("z-index",l))})}return{restrict:"A",link:c}}]).directive("showDetailDropdown",["$log","$document","$compile",function(a,b,c){function d(a,d,e,f){function g(){angular.forEach(d.children(),function(b,d){var e=angular.element(b);e.hasClass(j)?(e.addClass(k),e.removeClass(j),c(e)(a)):(e.addClass(j),e.removeClass(k),c(e)(a))})}function h(a){d[0]!=a.target&&angular.forEach(d.children(),function(a,b){var c=angular.element(a);c.addClass(j),c.removeClass(k)})}function i(){d.unbind("click",g),b.unbind("click",h)}var j="delete-message-hide-dropdown",k="delete-message-show-dropdown";d.bind("click",g),b.bind("click",h),a.$on("$destroy",i)}return{restrict:"A",scope:{},link:d}}]).directive("singleMessageDeleteDropdown",["$log","$document","$compile",function(a,b,c){function d(a,d,e,f){function g(){angular.forEach(d.children(),function(b,d){var e=angular.element(b);e.hasClass(j)?(e.addClass(k),e.removeClass(j),c(e)(a)):(e.addClass(j),e.removeClass(k),c(e)(a))})}function h(a){d[0]!=a.target&&angular.forEach(d.children(),function(a,b){var c=angular.element(a);c.addClass(j),c.removeClass(k)})}function i(){d.unbind("click",g),b.unbind("click",h)}var j="delete-message-hide-dropdown",k="delete-message-show-dropdown";d.bind("click",g),b.bind("click",h),a.$on("$destroy",i)}return{restrict:"A",scope:{},link:d}}]).directive("allMessagesDropdownOrientation",["$log","$document",function(a,b){function c(a){this.getDropdownOverflows=function(){return a.info("Does this have a value? ",e),e}}function d(b,c,d,e){function f(){var d=c[0],e=b.overflowClasses;$(d).find(b.childContainer).removeClass(e);var f=$(d).offset(),g=$(d).find(b.childContainer),h=$(g).outerHeight(!0),i=f.top+h,j=$(b.parentContainer),k=j.offset(),l=j.height(),m=k.top+l;a.info("Overflow classes: ",e),i>m?(a.info("Overflow!"),$(d).find(b.childContainer).addClass(e)):(a.info("Doesn't overflow!"),$(d).find(b.childContainer).removeClass(e))}c.bind("click",f)}var e;return c.$inject=["$log"],{restrict:"A",scope:{parentContainer:"=",childContainer:"=",overflowClasses:"@"},controller:c,link:d}}]).directive("kpIosScrollPatcher",function(){return{restrict:"A",link:function(a,b,c){if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){var d=function(a){a.preventDefault()};b.on("click",function(){angular.element("body.modal-open").on("touchmove",d)}),b.on("blur",function(){angular.element("body.modal-open").off("touchmove",d)}),a.$on("$destroy",function(){angular.element("body.modal-open").off("touchmove",d)})}}}}).controller("$$MessageLayerCtrl",["$scope","contactRes","GlobalObject","$rootScope","kpTitle","$timeout","Restangular","options","$sce","KPNotify","$state","$log","Message","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(b){return a.meta=null,a.filter.page=b,m.list(a.filter).then(function(a){var c=w.items;z=a.meta.has_next,c=c&&1!=b?_.union(c,a.data):a.data,w.items=c,w.meta=a.meta,l.info("Meta: ",a.meta)})}function p(){w.metaForDetail=null,m.messagesWithUser(x).then(function(a){var b=a.data;0==x&&angular.forEach(b,function(a){a.content=i.trustAsHtml(a.content)}),w.itemsForDetail=b,w.metaForDetail=a.meta,e.title(function(){return"ML131".translate().format(w.metaForDetail.with_user_obj.nickname)})})}function q(){w.itemsHistoryForDetail=null,w.metaForDetail=null,w.itemsForDetail=null,w.metaForDetail=null}function r(b){return b?void 0:(b="",m.loadUserViaQ().get().then(function(b){a.newMode.users=b.data}))}function s(){g.one("session/message").get({page_size:40}).then(function(b){var c=b.data,d=b.meta;a.sMsgUnread=d.smsg_unread_count,a.pMsgUnread=d.pmsg_unread_count,angular.isArray(c)&&c.length>0&&(a.sMessages=_.filter(c,{is_package_message:!1}),a.pMessages=c.length-a.sMessages.length,a.sMessages.length&&(a.hasSessionMessage=!0),a.pMessages&&(a.hasPackageMessage=!0),a.sessionMessageLoaded=!0)})}function t(){if(null!=B){var a=B;B=null,r(a)}A=f(t,500)}function u(a){a||(a=""),m.messageListViaQ(a).then(function(a){w.items=a.data})}function v(){if(null!=D){var a=D;D=null,u(a)}C=f(v,500)}var w=this,x=null,y=["list","detail","new"];a.filterForDetail={page:1},a.filter={page:1},a.newMsg={},d.$on("kp.BrowserBackOrForwardBtnClick",function(){e.reset(),a.$dismiss()});var z;a.$on("kp.messagebox.conversation",function(a,b){w.status=y[1],w.goToDetail(b.id)}),a.$on("kp.messagebox.newChat",function(){w.status=y[2],w.gotonew()}),a.$on("kp.messagebox.list",function(){w.status=y[0],w.backToList()}),this.status=y[0],a.newMode={q:""},this.setStatus=function(a){y.indexOf(a)>-1&&(this.status=a)},this.isList=function(){return w.status==y[0]},this.isDetail=function(){return w.status==y[1]},this.isNew=function(){return w.status==y[2]},this.markAllAsRead=function(){angular.forEach(w.items,function(a){a.unread_count=0}),m.markAllAsRead().then(function(){})},this.deleteMessage=function(a){_.pull(w.itemsForDetail,a),m.deleteMessage(a.id).then(function(){})},this.deleteChat=function(a){_.remove(w.items,{oppo_user_obj:{id:a}}),w.isDetail()&&w.backToList(),m.deleteChat(a).then(function(){l.debug("delete chat sucess")},function(a){l.warn("delete chat error",a)})},this.loadMoreChat=function(){return o(a.filter.page+1)},this.loadMoreMessage=function(){var b=a.filterForDetail.page;a.filterForDetail.page=b+1,m.messagesWithUser(x,a.filterForDetail).then(function(a){var b=w.itemsHistoryForDetail,c=a.data;0==x&&angular.forEach(c,function(a){a.content=i.trustAsHtml(a.content)}),b=b?_.union(c,b):c,w.itemsHistoryForDetail=b,w.metaForDetail=a.meta})},w.getMsgNum=function(){var a=0;return w.itemsHistoryForDetail&&(a+=w.itemsHistoryForDetail.length),w.itemsForDetail&&(a+=w.itemsForDetail.length),a},this.getToNew=function(){e.title("ML130"),n.search({messages:1,conversation:"new"}),w.setStatus(y[2])},this.goToDetail=function(a,b){b&&(b.unread_count=0),w.allowSend=!0,a!=x&&q(),0==a&&(w.allowSend=!1),n.search({messages:1,conversation:a}),x=a,p(),w.setStatus(y[1])},this.backToList=function(){w.setStatus(y[0]),w.items||o(1),a.filterForDetail.page=1,e.title("ML132"),n.search({messages:1,conversation:null})},a.clickFlag=!1,this.sendMsg=function(){return a.newMsg.content.length<1||a.newMsg.content.length>2e3?void(a.clickFlag=!0):(a.clickFlag=!1,m.sendMessage(x,a.newMsg).then(function(b){var c={sender_obj:{avatar_file_name:a.currentUser.avatar_file_name,allow_profile:a.currentUser.allow_profile,nickname:a.currentUser.nickname,id:a.currentUser.id},login_user_is_sender:1,type:0,create_time:b.data.create_time,id:b.data.message_id,message_id:b.data.message_id,content:a.newMsg.content};w.itemsForDetail.push(c),a.newMsg.content=""},function(a){return console.dir(a),400==a.type?j.appendWithContent("ST155".translate().format(1,2e3)):j.appendWithContent("ML204".translate()),"e"}))},h.id&&(this.status=y[1],this.goToDetail(h.id)),h.newChat&&(this.status=y[2],this.getToNew()),this.gotoSessionListWithNewMessage=function(b){b?k.go("session.packageViaType",{viewType:"withnewmessages"},{reload:!0}):k.go("session.exploreViaType",{viewType:"withnewmessages"},{reload:!0}),a.$close()},this.isList()&&(a.notifyObj.smuc&&s(),o(1));var A,B=null;t(),a.$on("$destroy",function(){A&&f.cancel(A)}),a.$watch("newMode.q",function(a,b){B=a});var C,D=null;v(),a.$on("$destroy",function(){C&&f.cancel(C)}),a.$watch("allMessagesList.q",function(a,b){""!==a?w.meta&&(w.meta.has_next=!1):""===a&&w.items&&w.meta&&z&&(w.meta.has_next=!0),D=a})}]).controller("$$SendTemplateMessageToTeacherCtrl",["$rootScope","$scope","$modalInstance",function(a,b,c){a.$on("kp.BrowserBackOrForwardBtnClick",function(){b.$dismiss()});var d={1:"1 lesson every 2 weeks",2:"1 lesson every week",3:"2 lesson every week",4:"3+ lesson every week"},e={1:"Conversation practice",2:"Speaking / Listening / Pronunciation",3:"Writing / Reading",4:"General Language Learning",5:"Specific request"},f={1:"School",2:"Test",3:"Work",4:"Travel",5:"Personal interest",6:"Lessons are for my child",7:"Other"};b.confirm=function(){var a="{0}\n{1}\n\n{2}\n{3}\n\n{4}\n{5}\n\n{6}\n{7}\n\n{8}\n{9}".format("Hello,","I just filled out the contact form on your teacher profile!","My main reason for taking lessons:",f[b.options.reason],"I plan to take:",d[b.options.howOften],"I am interested in:",e[b.options.interest],"I also wanted to tell you:",b.options.intro);c.close(a)}}]).service("ItalkiMessageBox",["$modal","kpTitle","$rootScope","$location","Message","EmailNotActive",function(a,b,c,d,e,f){function g(e){if(h)return void(e?(e.id&&c.$broadcast("kp.messagebox.conversation",{id:e.id}),e.newChat&&c.$broadcast("kp.messagebox.newChat",{newChat:!0})):c.$broadcast("kp.messagebox.list"));if(b.title("ML132"),d.search({messages:1,conversation:null}),c.$emit("kp.dataLayer.fired",{event:"virtualPageview"}),!f.open()){var g=c.$new();h=!0;var i=a.open({scope:g,resolve:{options:function(){return angular.isObject(e)?e:{}}},backdrop:"static",templateUrl:"/views/message/modal.html",windowClass:"message-layer",controllerAs:"ctrl",controller:"$$MessageLayerCtrl"});return i.result["finally"](function(){h=!1,b.reset(),d.search({messages:null,conversation:null})}),i}}var h=!1;this.isOpening=function(){return h},this.contactWith=function(b){if(c.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/contact".format(d.path())}),!f.open()){var g=c.$new();g.teacher=b;var h=a.open({scope:g,templateUrl:"/views/message/teacher.template.message.html",controllerAs:"ctrl",controller:"$$SendTemplateMessageToTeacherCtrl"});h.result.then(function(a){e.sendMessage(b.id,{content:a,type:"2"})})}},this.chatWith=function(a){g({id:a})},this.newChat=function(){g({newChat:!0})},this.open=function(){g()}}]).controller("MessagePopCtrl",["$scope","$log","Restangular","ItalkiMessageBox",function(a,b,c,d){angular.noop;this.open=function(){d.open()}}]).controller("MessageCtrl",["$scope","$log","Restangular","$state",function(a,b,c,d){var e=1;a.mouseenterforavatar=function(a){a.hide=!0},a.mouseleaveforavatar=function(a){a.hide=!1},a.mouseenterfordel=function(a){a.delhide=!0},a.mouseleavefordel=function(a){a.delhide=!1},a.filter={page:1,data_type:0},a.chkall=!1,a.selectAll=function(b){angular.forEach(a.items,function(a,c){a.checked=b})},a.changeAllState=function(b){var c=!0;angular.forEach(a.items,function(a,b){a.checked||(c=!1)}),a.chkall=c},a.audio=function(a){return"<strong>"+a+"</strong>"},a.delSelect=function(){var b=[],d=[];angular.forEach(a.items,function(a,c){a.checked&&a.oppo_user_obj.id>0&&(b.push(a.oppo_user_obj.id),d.push(c))}),b.length>0&&c.one("message/delete").post("",{user_id:b}).then(function(b){for(var c=d.length-1;c>-1;c--)a.items.splice(d[c],1);a.items.length<20&&(e=1,f(e))})},a.del=function(b){c.one("message/delete").post("",{user_id:a.items[b].oppo_user_obj.id}).then(function(c){a.items.splice(b,1),a.items.length()<20&&(e=1,f(e))})},a.withUser=function(a,b){a.preventDefault(),d.go("messageDetail",{id:b})};var f=function(b){return a.meta=null,a.filter.page=b,c.service("message").one().get(a.filter).then(function(c){var d=a.items;d=d&&1!=b?_.union(d,c.data):c.data,a.items=d,a.meta=c.meta})};c.one("message").one("sitemessage").get().then(function(b){a.siteItems=b.data}),f(e),a.loadMore=function(){return a.chkall=!1,f(++e)},a.applyFilter=function(){e=1,f(e)}}]).controller("MessageDetailCtrl",["$scope","$log","Restangular","$stateParams","$filter","$rootScope",function(a,b,c,d,e,f){var g=1;a.filter={page_size:5};var h=function(b){return a.meta=null,a.filter.page=b,c.one("message/with/"+d.id).get(a.filter).then(function(c){var d=a.items;d=d&&1!=b?_.union(c.data,d):c.data,a.items=d,a.meta=c.meta})};h(g),c.one("message/with/"+d.id+"/first").get(a.filter).then(function(b){a.firstItem=b.data[0]}),a.loadMore=function(){return h(++g)},a.applyFilter=function(){g=1,h(g)},a.mouseenterfordel=function(a){a.delhide=!0},a.mouseleavefordel=function(a){a.delhide=!1},a.del=function(b,d){var e;d||angular.forEach(a.items,function(a,c){a==b&&(e=c)}),c.one("message/delete").post("",{id:b.id}).then(function(b){d?a.firstItem=!1:(a.items.splice(e,1),a.items.length()<5&&(g=1,h(g)))})},a.rcontent={message:"",clickFlag:!1},a.remainLen=function(){return 2e3-KP.Utils.bLength(a.rcontent.message)},a.isValidMsg=function(b){return b?KP.Utils.bLength(a.rcontent.message)<2001:(a.rcontent.clickFlag=!0,a.rcontent.message.length>0&&KP.Utils.bLength(a.rcontent.message)<2001)},a.sendMsg=function(){if(a.isValidMsg(!1)){var b={type:0,content:e("delHtmlTag")(a.rcontent.message)};c.one("message/with/"+d.id).post("",b).then(function(c){if(c.data&&c.data.success){a.rcontent.message="";var d={sender_obj:{avatar_file_name:f.currentUser.avatar_file_name,allow_profile:f.currentUser.allow_profile,nickname:f.currentUser.nickname,id:f.currentUser.id},login_user_is_sender:1,type:0,create_time:c.data.create_time,id:c.data.message_id,content:b.content};a.items.push(d)}else c.error&&alert(c.error.msg)})}else a.rcontent.clickFlag=!0}}]),angular.module("kp.finance",["base.router","kp.finance.account","kp.finance.setting","kp.util"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/finance","/finance/transfer"),a.state("finance",{parent:"kp",url:"/finance",templateUrl:"/views/finance/index.html"}).state("finance.overview",{url:"/overview",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:function(){return"italki - "+"PM000".translate()}}}).state("finance.revenueaccount",{url:"/revenueaccount",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:"M0048"}}).state("finance.paymentaccount",{url:"/paymentaccount",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:"M0048"}}).state("finance.purchasehistory",{url:"/purchasehistory",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:"M0048"}}).state("finance.withdrawalhistory",{url:"/withdrawalhistory",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:"M0048"}}).state("finance.myCoupon",{url:"/mycoupon",templateUrl:"/views/finance/overview.html",controller:"FinanceOverviewCtrl",data:{role:"user",title:"M0048"}}).state("purchase",{url:"/purchase?min?type?usetype?orderid?voucherid?code?img",templateUrl:"/views/finance/new.checkout.html",controller:"CheckoutCtrl",data:{role:"user",title:function(){return"italki - "+"MH110".translate()}}}).state("recharge",{url:"/recharge?itc",templateUrl:"/views/finance/new.recharge.html",controller:"RechargeCtrl",data:{role:"user",title:function(){return"italki - "+"MH110".translate()}}}).state("checkout",{url:"/checkout?min?type?usetype?orderid?voucherid?code?img",templateUrl:"/views/finance/new.checkout.html",controller:"CheckoutCtrl",data:{role:"user",title:function(){return"italki - "+"MH110".translate()}}}).state("oneStepCheckout",{url:"/one-step-checkout?min?type?usetype?orderid?voucherid?code?img",templateUrl:"/views/finance/oneStepCheckout.html",controller:"OneStepCheckoutCtrl",controllerAs:"oneStepCheckout",data:{role:"user",title:function(){return"italki - "+"MH110".translate()}}}).state("purchaseSucc",{parent:"kp",url:"/purchase/succ/{order_id}",templateUrl:"/views/finance/purchase.succ.html",controller:"PurchaseSuccCtrl",data:{role:"user"}}).state("redeemGiftCard",{parent:"kp",url:"/redeem/gitfcard",templateUrl:"/views/finance/redeem.giftcard.succ.html"}).state("purchaseCancel",{parent:"kp",url:"/purchase/cancel/",templateUrl:"/views/finance/purchase.cancel.html",data:{role:"user"}}).state("bankTransfer",{parent:"kp",url:"/support/form-withdrawviabanktransfer/vassarrefugee",templateUrl:"/views/finance/withdraw.addoredit.banktransfer.page.html",controller:"bankTransferCtrl",data:{role:"user",title:"Vassar Refugee Payment Information"}})}]),angular.module("kp.finance").constant("I18n_WITHDRAW",{0:"PM032",1:"PM033",2:"PM034",3:"PM035",4:"PM031",5:"PM030",6:"PM029",B:"PM029",7:"PM026",8:"PM028",9:"PM027",A:"PM035",C:"PM070",D:"PM097",E:"PM617",F:"PM618",G:"PM619",H:"PM620",I:"PM621",J:"PM622",K:"PM623",L:"PM624",M:"PM625",N:"PM626",O:"PM627",P:"PM628",Q:"PM629",R:"PM630",S:"PM631",T:"PM098",U:"PM633",V:"PM632",W:"PM028",Y:"PM028",X:"PM099"}).controller("FinanceOverviewCtrl",["$scope","$filter","$state","$location","$anchorScroll","$timeout","Finance","userUtils","$modal","WithdrawItcModal","TransferItcModal","RedeemCodeService","I18n_WITHDRAW","alertModal","$translate","$rootScope","$log",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){o.instant;a.dataTime={dt1:null,dt2:null};var r=new Date,r=new Date(r.getFullYear(),r.getMonth(),r.getDate());a.mDate=r,a.oneday=moment().add(1,"days").format("YYYY-MM-DD");var s=r.getFullYear();a.year=s;var t=r.getMonth();a.month=t;var u=r.getDate();a.day=u,a.disabled1=function(b,c){return a.mDate<b},a.disabled2=function(b,c){return a.dataTime.dt1?a.dataTime.dt1>b:a.mDate<b},a.$watch("dataTime.dt1",function(b,c){b!=c&&a.dataTime.dt2&&(!b||b&&b>a.dataTime.dt2)&&(a.dataTime.dt2=null)}),a.status={start_opened:!1,end_opened:!1},a.dateOptions={formatYear:"yy",startingDay:1},a.format="yyyy-MM-dd";var v=new Date;v.setDate(v.getDate()+1);var w=new Date;w.setDate(v.getDate()+2),a.sopen=function(b){a.status.start_opened=!0},a.eopen=function(b){a.status.end_opened=!0},a.submitDate=function(){if(a.errorFlag=!1,!a.tabs.tab1||!a.tabs.tab2||a.tabs.tab1>a.tabs.tab2)return void(a.errorFlag=!0);var c=angular.copy(a.dataTime.dt2);a.selId=a.seltab,a.selId.data.start_time=b("date")(a.dataTime.dt1,"yyyy-MM-dd"),c.setDate(c.getDate()+1),a.selId.data.end_time=b("date")(c,"yyyy-MM-dd"),a.selId.data.page=1,a.selId.data.id=null,a.getListData(a.selId)},a.openTeacherProfile=function(a,b){"a"!==a.target.tagName.toLowerCase()&&KP.Utils.openUrlWithNewTab(c.href("teacher",{id:b.id}))};var x=function(){return g.getCoupon().get().then(function(b){var c=b.data;a.available_itc=c.available_itc,a.expired_itc=c.expired_itc,a.will_expire_itc=c.will_expire_itc})};x();var y=o.instant;a.isTeacher=function(){return a.currentUser&&(a.currentUser.is_pro||a.currentUser.is_tutor)},a.openRedeemModal=function(){l.open()},a.tabs={tab1:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_1",url:0},tab2:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_2",url:1},tab3:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_3",url:2},tab4:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_4",url:3},tab5:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_5",url:4},tab6:{data:{id:"",page:1,start_time:"",end_time:""},lab:"items_6",url:5}},a.changeTab=function(b){a.dataTime.dt1=null,a.dataTime.dt2=null,a.errorFlag=!1,a[b.lab]=null,a.seltab=b,a.selId=a.seltab,a.selId.data.id=null,a.selId.data.start_time=null,a.selId.data.end_time=null,a.selId.data.page=1,a.getListData(b)},a.changeId=function(b){13==event.keyCode&&(a.dataTime.dt1=null,a.dataTime.dt2=null,a.selId=a.seltab,a.selId.data.id=b,a.selId.data.page=1,a.selId.data.start_time=null,a.selId.data.end_time=null,a.getListData(a.selId))},a.getListData=function(b){return g.getHistory(b).then(function(c){var d=a[b.lab];d=d&&1!=b.data.page?b.url>3?_.union(d,c.data.coupon_list):_.union(d,c.data):b.url>3?c.data.coupon_list:c.data,a[b.lab]=d,a[b.lab+"_meta"]=c.meta})["finally"](function(){a.moreFlag=!0})},a.changeFilter=function(b){b.data.page=1,a[b.lab]=null,a.getListData(b)},a.getI18nKey=function(a){return m[a]};var z=!1;"finance.revenueaccount"==c.$current.self.name?(a.changeTab(a.tabs.tab1),z=!0):"finance.paymentaccount"==c.$current.self.name?(a.changeTab(a.tabs.tab2),z=!0):"finance.purchasehistory"==c.$current.self.name?(a.changeTab(a.tabs.tab3),z=!0):"finance.withdrawalhistory"==c.$current.self.name?(a.changeTab(a.tabs.tab4),z=!0):"finance.myCoupon"==c.$current.self.name?(a.changeTab(a.tabs.tab5),z=!0):a.isTeacher()?a.changeTab(a.tabs.tab1):a.changeTab(a.tabs.tab2),a.moreFlag=!0,a.loadMore=function(b){return a.moreFlag=!1,++b.data.page,a.getListData(b)},a.revenueDetail=function(b,c){i.open({scope:a,size:"lg",templateUrl:"/views/finance/revenue.detail.html",windowClass:"course-list-modal",controller:["$scope",function(a){g.revenueDetail(b).get().then(function(b){a.itemData=b.data,a.itemData.status=c,a.meta=b.meta})}]})},a.revenueRelation=function(b,c){
i.open({scope:a,size:"lg",templateUrl:"/views/finance/revenue.relation.html",windowClass:"course-list-modal",controller:["$scope",function(a){b=b.toLowerCase(),g.revenueRelation(b).get().then(function(b){a.items=b.data,a.meta=b.meta,a.items.status=c})}]})},a.paymentDetail=function(b){i.open({scope:a,size:"lg",templateUrl:"/views/finance/payment.detail.html",windowClass:"course-list-modal",controller:["$scope",function(a){var c=b.id,d=b.show_type;g.paymentDetail(c).get().then(function(c){a.itemData=c.data,a.meta=c.meta,a.itemData.status=d,angular.isDefined(b.extra_itc_usd)&&b.extra_itc_usd>0&&(a.itemData.itc_usd=a.itemData.itc_usd+b.extra_itc_usd)})}]})},a.paymentRelation=function(b){i.open({scope:a,size:"lg",templateUrl:"/views/finance/payment.relation.html",windowClass:"course-list-modal",controller:["$scope",function(a){g.paymentRelation(b).get().then(function(b){a.items=b.data,a.meta=b.meta})}]})},a.purchaseDetail=function(b,c){var d=i.open({scope:p.$new(),size:"xlg",templateUrl:"/views/finance/purchase.detail.html",windowClass:"purchase-detail",controller:"PurchasePrintCtrl",resolve:{info:function(){return{id:b,status:c}}}});d.result.then(function(){q.info("Emit print show event"),a.$emit("printShow",{})},function(){q.info("Emit print show event"),a.$emit("printShow",{})})},a.purchaseBankTransferInfo=function(a){i.open({scope:p.$new(),size:"lg",templateUrl:"/views/finance/purchase.bank_transfer.modal.html",windowClass:"purchase-detail",controller:["$scope",function(b){b.id=a,g.purchaseBankTransfer(a).get().then(function(a){b.data=a.data}),b.print=function(){var a=$(window.frames.printFrame.document);return a.find("body").html(angular.element(".page").html()),a.find("body").find(".noprint").remove(),window.frames.printFrame.print(),!1}}]})},a.purchase_cancel=function(b,c){n.open(a,y("C1008"),y("PM130")).then(function(c){g.purchaseBankTransfer(b).post().then(function(b){c.$close(),a.moreFlag=!1,a.getListData(a.tabs.tab3)})})},a.openTransferModal=function(b){b&&2==b?k.show(a):i.open({scope:a,size:"",templateUrl:"/views/component/finance.transfer_itc_warn.html",windowClass:""})},a.withdrawDetail=function(b){i.open({scope:a,size:"lg",templateUrl:"/views/finance/withdraw.detail.modal.html",windowClass:"course-list-modal",controller:"$$WithdrawDetailCtrl",resolve:{info:function(){return{id:b}}}})},a.openWithdrawModal=function(){return j.show()},a.nowUseThisCoupon=function(b){angular.isDefined(b.unstart)&&1==b.unstart||(p.isOneStepPayment&&(a.currentUser.hasStripeList||a.currentUser.hasPayaplList)?c.go("oneStepCheckout",{voucherid:b.voucher_sn}):c.go("checkout",{voucherid:b.voucher_sn}))},z&&f(function(){d.hash("hashID"),e()},2e3)}]).controller("PurchaseSuccCtrl",["$scope","localStorageService","$window","$stateParams","$translate","Finance","$timeout","$modal","$log","Session","$state",function(a,b,c,d,e,f,g,h,i,j,k){a.order_id=d.order_id,a.id=0,a.msg="",a.loaded=!1,a.needAutoclose=!!b.get("currentPurchasePageShouldAutoClose"),a.close=function(){b.remove("currentPurchasePageShouldAutoClose"),c.opener=null,c.open("","_self"),c.close()};var l=function(){"0"!=a.msg&&(a.msg=""),f.checkOrder(a.order_id).then(function(b){function c(){var b=a.secondsRemained;return 0>=b?void a.close():(a.secondsRemained=b-1,void g(c,1e3))}var d=b.data.flag;a.msg=d,a.unpay_id=b.data.unpay_id,a.$emit("kp_finance_overview"),a.unpay_id&&(a.needAutoclose=0,j.checkUNPay(a.unpay_id).then(function(b){var c=b.data;a.session_type=c.session_type,b.data.id_list&&(a.id_list=b.data.id_list[0],b.data.id_list.length>1&&(a.lesson_amount=1)),c&&1==c.pay_status?a.preResult=1:a.preResult=0},function(b){a.unpayError=1})["finally"](function(){})),a.goToDetail=function(b){b&&(2==a.session_type?k.go("sessionPackageDetail",{id:b}):k.transitionTo("sessionDetail",{sessionId:b}))},"1"==d&&a.needAutoclose&&(a.secondsRemained=5,g(c,1e3)),a.id=b.data.id,"0"==b.data.flag?g(l,3e3):a.loaded=!0},function(b){a.msg=b,a.error=!0,a.loaded=!0})};a.order_id&&g(function(){l()},2e3),a.purchaseDetail=function(){h.open({scope:a,size:"xlg",templateUrl:"/views/finance/purchase.detail.html",windowClass:"purchase-detail",controller:"PurchasePrintCtrl",resolve:{info:function(){return{id:a.id,status:"1"}}}})}}]).constant("ITC_AVAIL_OPTIONS",[{label:"$10 USD",value:1e3},{label:"$20 USD",value:2e3},{label:"$30 USD",value:3e3},{label:"$40 USD",value:4e3},{label:"$50 USD",value:5e3},{label:"$60 USD",value:6e3},{label:"$70 USD",value:7e3},{label:"$80 USD",value:8e3},{label:"$90 USD",value:9e3},{label:"$100 USD",value:1e4},{label:"$150 USD",value:15e3},{label:"$200 USD",value:2e4},{label:"$300 USD",value:3e4},{label:"$400 USD",value:4e4},{label:"$500 USD",value:5e4},{label:"$1,000 USD",value:1e5}]).directive("kpLoginDiv",["$modal",function(a){return{restrict:"EA",controller:["$scope","LoginService","EmailNotActive","$timeout",function(a,b,c,d){d(function(){b.open()||c.open()},3e3)}]}}]).controller("PurchasePrintCtrl",["$scope","Finance","info","$log","$filter","localStorageService","ENV","$rootScope",function(a,b,c,d,e,f,g,h){a.$emit("printHide",{}),a.clickFlag=!1,b.purchaseDetail(c.id).get({status:c.status}).then(function(b){b.data.status=status,b.data.total_usd=.01*parseFloat(b.data.itc_usd),b.data.fee=(parseFloat(b.data.real_usd)-b.data.total_usd).toFixed(2),3==b.data.voucher_condition?b.data.total=parseFloat(b.data.itc_usd+b.data.voucher_value).toFixed(2):b.data.total=parseFloat(b.data.itc_usd),a.itemData=b.data,a.meta=b.meta}),a.print=function(){var b,d={date:encodeURI(e("amDate")(a.itemData.finish_date,"TF002")),textid:h.currentUser.textid,real_usd:e("number")(a.itemData.real_usd,2),itc_usd:e("kpToUsd")(a.itemData.total),fee:e("number")(a.itemData.fee,2),status:c.status,orderid:a.itemData.order_id,remark:encodeURI(a.myText),voucher_condition:a.itemData.voucher_condition,voucher_value:e("kpToUsd")(a.itemData.voucher_value)},i=f.get(KP.SERIALIZE.TOKEN);b=3==d.voucher_condition?g.apiEndpoint+"finance/purchase/print-detail?date="+d.date+"&fee="+d.fee+"&i_token="+i+"&itc_usd="+d.itc_usd+"&orderid="+d.orderid+"&real_usd="+d.real_usd+"&remark="+d.remark+"&status="+d.status+"&textid="+d.textid+"&voucher_condition="+d.voucher_condition+"&voucher_value="+d.voucher_value:g.apiEndpoint+"finance/purchase/print-detail?date="+d.date+"&fee="+d.fee+"&i_token="+i+"&itc_usd="+d.itc_usd+"&orderid="+d.orderid+"&real_usd="+d.real_usd+"&remark="+d.remark+"&status="+d.status+"&textid="+d.textid;var j=document.createElement("iframe");j.src=b,j.style.display="none",document.body.appendChild(j)}}]).controller("$$WithdrawDetailCtrl",["$scope","Finance","info","$translate","$modal","alertModal","$rootScope","$filter",function(a,b,c,d,e,f,g,h){var i=d.instant,j=c.id;b.withdrawalDetail(j).then(function(b){a.itemData=b.data.withdraw_detail,a.itemData.complete_data=b.data.withdraw_complete_data,a.itemData.bank_beneficiary_info=b.data.bank_beneficiary_info}),a.formatDate=function(a,b){var c=i(b)+" (UTCZ)";return moment(a).tz(g.currentUser.timezone_iana).format(c)},a.formatPaymentDate=function(a){var b,c,d,e=i("PM156");if(2==a.withdraw_type)d=i("TF001")+" (UTCZ)",b=moment(a.finish_date_user).tz(g.currentUser.timezone_iana),c=2;else{d=i("TF002")+" (UTCZ)";var f=moment(a.create_date).tz("Etc/GMT");c=9,"27UV".indexOf(a.withdraw_method)>-1&&f.date()<16?f.date(16):(f.date(1),f.add("months",1)),b=f.clone().tz(g.currentUser.timezone_iana)}var h=b.format(d),j=b.add("days",c).format(d);return e.replace("{0}",h).replace("{1}",j)};var k=function(){a.moreFlag=!1,a.$close(),a.getListData(a.tabs.tab4)};a.cancelWithdrawal=function(){f.open(a,i("C1008"),i("PM131")).then(function(c){a.processing||(a.processing=!0,b.cancelWithdraw(j).then(function(b){a.processing=!1,c.$close(),k()},function(b){a.processing=!1,console.dir(b)}))})},a.withdrawalImmediateApply=function(){e.open({scope:a.$new(),size:"lg",templateUrl:"/views/finance/withdraw.immdiate.apply.modal.html",windowClass:"course-list-modal",controller:["$scope",function(a){a.immediateApply=function(){a.isConfirm1&&a.isConfirm1&&!a.processing&&(a.processing=!0,b.withdrawalImmediateApply(j).then(function(b){a.processing=!1,a.$close(),k()},function(b){a.processing=!1,console.dir(b)}))}}]})}}]).controller("change",["$scope","$timeout","Account",function(a,b,c){a.currObj={currency:""},a.change=function(){if(a.currentUser){if(a.currObj.currency!=a.currentUser.currency)return c.setUserProfile().post(a.currObj).then(function(c){a.currentUser.currency=a.currObj.currency;var d=a.currentUser.currency;b(function(){a.currentUser.currency_rate=a.currency[d]/10},500),a.$close()});a.$close()}}}]).controller("bankTransferCtrl",["$scope","I18n_WITHDRAW","$translate","Finance","KPNotify","$state",function(a,b,c,d,e,f){var g=angular.copy(KP.COUNTRRY_ARR),h=c.instant,i=0;angular.forEach(g,function(a){a.name=h(a.l)}),a.countries=g,a.uiSelectedCountry=function(b){a.data.country=b.v},a.data={},a.submit=function(){a.data.method=i,a.processing||(a.processing=!0,d.settingOfWithdraw().post("",a.data).then(function(a){var b="C1002".translate();e.appendWithContent(b),f.go("finance.overview")},function(b){a.processing=!1,"incorrect_password"==b.type?a.error=!0:e.appendWithContent(b.type+" : "+b.msg)}))}}]),angular.module("kp.finance").controller("RechargeCtrl",RechargeCtrl).controller("CheckoutCtrl",CheckoutCtrl).directive("payContainerSticky",function(){return{restrict:"A",scope:!1,link:function(a){var b=function(){var a=angular.element(window).scrollTop()+angular.element(window).height()-angular.element(".pay-btn-container-float").height(),b=angular.element(".footer").offset().top-angular.element(".pay-btn-container-float").height();b>a?(angular.element(".pay-btn-container").css("visibility","hidden"),angular.element(".pay-btn-container-float").css({visibility:"visible",boxShadow:"0 10px 20px 8px rgba(0, 0, 0, 0.5)"})):(angular.element(".pay-btn-container").removeAttr("style"),angular.element(".pay-btn-container-float").removeAttr("style"))};b(),angular.element(window).bind("scroll",b),a.$on("$destroy",function(){angular.element(window).unbind("scroll",b)})}}}),RechargeCtrl.$inject=["$rootScope","$scope","$state","$stateParams","$timeout","$window","Account","Finance","GlobalObject"],CheckoutCtrl.$inject=["$modal","$q","$rootScope","$scope","$state","$stateParams","$timeout","$translate","$window","Account","ENV","Finance","KPNotify","PaymentService"],angular.module("kp.finance").controller("OneStepCheckoutCtrl",OneStepCheckoutCtrl),OneStepCheckoutCtrl.$inject=["$q","$rootScope","$scope","$state","$stateParams","$timeout","$translate","$window","Finance","KPNotify","PaymentService","Stripe"],angular.module("kp.finance.account",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/finance/account","/finance/account/revenue-account-details/all");var c="finance.account";a.state(c,{url:"/account",templateUrl:"/views/finance/account/index.html"}).state("revenueDetail",{parent:c,url:"/revenue-account-details",template:"<div ui-view></div>","abstract":!0}).state("revenueDetail.list",{url:"/all",templateUrl:"/views/finance/account/revenue/list.html",controller:"RevenueHistoryCtrl"}).state("revenueDetail.get",{url:"/get",templateUrl:"/views/finance/account/revenue/entity.html"}).state("revenueDetail.relation",{url:"/relation",templateUrl:"/views/finance/account/revenue/relation.html"}).state("paymentDetail",{parent:c,url:"/payment-account-details",templateUrl:"/views/finance/account/payment/list.html",controller:"PaymentHistoryCtrl"}).state("purchaseHistory",{parent:c,url:"/credit-purchase-history",templateUrl:"/views/finance/account/purchase/list.html",controller:"PurchaseHistoryCtrl"}).state("WithdrawalHistory",{parent:c,url:"/withdrawal-history",templateUrl:"/views/finance/account/withdrawal/list.html",controller:"WithdrawHistoryCtrl"})}]),angular.module("kp.finance.account").controller("RevenueHistoryCtrl",["$scope","Finance",function(a,b){var c=a;c.changeFilter=function(){b.revenueHistory(c.days).then(function(a){c.items=a.data})},b.revenueHistory().then(function(a){c.items=a.data})}]).controller("PaymentHistoryCtrl",["$scope","Finance",function(a,b){var c=a;c.changeFilter=function(){b.paymentHistory(c.days).then(function(a){c.items=a.data})},b.paymentHistory().then(function(a){c.items=a.data})}]).controller("WithdrawHistoryCtrl",["$scope","Finance","I18n_WITHDRAW",function(a,b,c){var d=a;d.getI18nKey=function(a){return c[a]},b.withdrawHistory().then(function(a){d.items=a})}]).controller("PurchaseHistoryCtrl",["$scope","Finance","I18n_WITHDRAW",function(a,b,c){var d=a;d.getI18nKey=function(a){return c[a]},b.purchaseHistory().then(function(a){d.items=a.data})}]),angular.module("kp.finance.account").filter("withdrawHistoryDesc",function(){return function(a){switch(a){case"0":return"PM450";case"1":return"PM452";case"2":case"7":return"PM453";case"3":return"PM451";case"4":return"PM483";case"5":return"PM456";case"6":return"PM550"}return""}}).filter("withdrawFee",function(){return function(a,b){switch(b){case"0":return 20;case"2":return 0;case"3":return 0;case"5":return((a-a/1.008)/10).toFixed(2);case"7":return((a-a/1.01)/10).toFixed(2)}return 0}}).filter("revenueHistoryDesc",function(){return function(a){switch(a){case 1001:return"PM404";case 1002:return"PM533";case 1003:return"PM534";case 1004:return"PM535";case 2001:case 3001:return"PM402";case 3002:return"PM536";case 3003:return"PM537";case 3004:return"PM143";case 3005:return"PM482";case 4001:case 5001:return"PM405";case 5002:case 5006:return"PM406";case 5003:return"PM400";case 5004:return"PM401";case 5005:return"PM411";case 5007:return"PM400";case 5008:return"PM401";case 5009:return"PM555";case 6001:return"PM482";case 6002:return"PM482";case 7001:return"PM414";case 7002:return"PM539";case 7003:return"PM540";case 7004:return"PM541";case 7005:return"PM553";case 7009:return"PM403";case 7010:case 11001:return"PM554";case 8001:return"PM410";case 8002:return"PM547";case 9001:return"PM548";case 10001:return"PM418";case 10002:return"M0115";case 10003:return"PM549"}}}).filter("paymentHistoryDesc",function(){return function(a,b,c){switch(a){case 1001:return"PM404";case 1002:return"PM533";case 1003:return"PM534";case 1004:return"PM535";case 2001:case 3001:return"PM402";case 3002:return"PM536";case 3003:return"PM537";case 3004:return"PM143";case 3005:return"PM482";case 4001:case 5001:return"PM405";case 5002:case 5006:return"PM406";case 5003:return"PM400";case 5004:return"PM401";case 5005:return"PM411";case 5007:return"PM400";case 5008:return"PM401";case 5009:return"PM555";case 6001:return"VC002";case 6002:return"PM482";case 7001:return"PM413";case 7e3:return"PM543";case 7003:return"PM540";case 7004:return"PM541";case 7006:return"PM544";case 7007:return"PM545";case 7008:return"PM552";case 7009:return"PM403";case 7010:case 11001:return"PM554";case 8001:return"PM410";case 8002:return"PM547";case 9001:return"PM548";case 10001:return"PM418";case 10002:return"M0115";case 10003:return"PM549"}}}).filter("revenuePaymentDes",["$filter",function(a){return function(b){if(!b)return"";switch(b.status){case 1001:return"PM404";case 1002:return"PM533";case 1003:return"PM534";case 1004:return"PM535";case 2001:case 3001:return"PM402";case 3002:return"PM536";case 3003:return"PM537";case 3004:return"PM143";case 3005:return"PM482";case 4001:case 5001:return"PM405";case 5002:case 5006:return"PM406";case 5003:return a("sessionCourseTitle")(b);case 5004:return"PM401";case 5005:return"PM411";case 5007:return a("sessionCourseTitle")(b);case 5008:return"PM401";case 5009:return"PM555";case 6001:return"VC002";case 6002:return"PM482";case 7e3:return"PM543";case 7001:return"PM413";case 7002:return"PM543";case 7003:return"PM540";case 7004:return"PM541";case 7006:return"PM544";case 7007:return"PM545";case 7008:return"PM552";case 7009:return"PM403";case 7010:case 11001:return"PM554";case 8001:return"INSVS201701LC"==b.product_code?"This is a confirmation that you've joined the 2017 February Language Mindbuilder Challenge.":"PM410";case 10001:return"PM418";case 10002:return"M0115";case 10003:return"PM549"}}}]).filter("paymentDetailStatus",function(){return function(a){if(!a)return"";switch(a.status){case 5006:return"PM412";case 1003:case 6002:return"PM456";default:return"PM455"}}}).filter("printPaymentDetailStatus",function(){return function(a){if(!a)return"";switch(a.status){case 5006:return"Package terminated";case 1003:case 6002:return"Canceled";default:return"Completed"}}}),angular.module("kp.finance.setting",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){var c="finance.settings";a.state(c,{url:"/setting",templateUrl:"views/finance/setting/withdrawal-method.html",controller:"kpFinanceSettingCtrl"})}]),angular.module("kp.finance.setting").controller("kpFinanceSettingCtrl",["$scope","Finance",function(a,b){b.settingOfWithdraw().then(function(b){a.data=b,console.info(b)})}]),angular.module("kp.finance").service("Finance",["Restangular",function(a){var b=a.service("finance"),c=a.service("voucher"),d=a.service("user"),e=a.service("payment");return{getCoupon:function(){return c.one("itc-statistics")},getCoupons:function(){return c.one("spec")},getCommentCode:function(){return c.one("activate")},getHistory:function(c){return 0==c.url?b.one("revenue").one("history").get(c.data):1==c.url?b.one("payment").one("history").get(c.data):2==c.url?b.one("purchase").one("history").get(c.data):3==c.url?b.one("withdraw").one("history").get(c.data):(angular.extend(c.data,{available:1,page_size:8}),5==c.url&&(c.data.available=0),a.service("voucher").one("spec").get(c.data))},revenueDetail:function(a){return b.one("revenue").one(a.toString())},revenueRelation:function(a){return b.one("revenue").one(a.toString()).one("relation")},paymentDetail:function(a){return b.one("payment").one(a.toString())},paymentRelation:function(a){return b.one("payment").one(a.toString()).one("relation")},purchaseDetail:function(a){return b.one("purchase").one(a.toString()).one("invoice")},cancelWithdraw:function(a){return b.one("withdraw").one(a.toString()).post("",{operation:1})},withdrawalImmediateApply:function(a){return b.one("withdraw").one(a.toString()).post("",{operation:2})},withdrawalDetail:function(a){return b.one("withdraw").one(a.toString()).get()},purchaseBankTransfer:function(a){return b.one("purchase").one("bank_transfer").one(a.toString())},paymentConfig:function(){return b.one("payment-config")},paymentGet:function(){return a.one("payment")},overview:function(){return b.one("overview").get()},revenue:function(){return b.one("revenue").get()},payment:function(){return b.one("payment").get()},revenueHistory:function(a){return b.one("revenue").one("history").get({days:a||-91})},paymentHistory:function(){return b.one("payment").one("history").get()},purchaseHistory:function(){return b.one("purchase").one("history").get()},withdraw:function(){return b.one("withdraw")},transferItc:function(){return b.one("transfer-itc")},withdrawHistory:function(){return b.one("withdraw").one("history").get()},settingOfWithdraw:function(){return b.one("setting").one("withdraw")},settingOfWithdrawPrimary:function(){return b.one("setting").one("withdraw-primary")},checkOrder:function(b){return a.one("purchase/check/order").get({order_id:b})},getPayoneerSignupUrl:function(a,c){return b.one("withdraw").one("payoneer-signup").get({account_type:a,has_account:c})},getTrial:function(){return d.one("get_my_trial").get()},getOrder:function(b){return a.one("session/unpay_detail_for_pay").get({unpay_id:b})},getOneStepList:function(){return e.one("one_step").one("list").get()},removeCard:function(a){return e.one("one_step").post("remove",a)},pay:function(a){return e.post("",a)}}}]),angular.module("kp.finance").service("Currency",["Restangular","$log",function(a,b){var c={};return a.one("finance/currency").get().then(function(a){a&&a.data&&(c=angular.extend(c,a.data))},function(a){b.error("fetch currency failed:",a)}),c}]).filter("currency",["Currency","$rootScope",function(a,b){return function(c,d){var e=b.currentUser&&b.currentUser.currency||"USD",d=d||e,f=parseInt(c,10);return f?(a[d]*f/10).toFixed(2)+" "+e:"0 "+e}}]).filter("teacherPreviewCurrency",["Currency","$rootScope",function(a,b){return function(c,d){var e=b.currentUser&&b.currentUser.currency||"USD",f=e,g=parseInt(c,10),h=g?e+" "+(a[f]*g/100).toFixed(2):e+" 0";return d?"("+h+")":h}}]).filter("currencytwo",["Currency","$rootScope","$filter",function(a,b,c){return function(d,e){var f=b.currentUser&&b.currentUser.currency||"USD",g=parseInt(d,10);g=(a[f]*g/100).toFixed(2);var h="";if(e!=d&&(h=parseInt(e,10),h=(a[f]*h/100).toFixed(2)),h){var i=c("number")(g,2),j=c("number")(h,2);return i+" - "+j+" "+f}var i=c("number")(g,2);return i+" "+f}}]).filter("currencys",["Currency","$rootScope",function(a,b){return function(a){if(!angular.isArray(a)&&a.length>1)return"";_.template("≈ ${min} - ${max} $(currency)");return""}}]).directive("kpCurrency",["Currency","$rootScope",function(a,b){return{restrict:"EA",scope:{min:"=",max:"="},template:"<span>≈ {{ min }} {{ currency||'USD' }}</span>",replace:!0,link:function(a,b,c){a.min,a.max,a.currency;return a.renderView=function(){},""}}}]),angular.module("kp.finance").controller("$$WithdrawItcModalCtrl",["$scope","$window","$modalInstance","Finance","UserService","InputKeypress","I18n_WITHDRAW","KPNotify","$state","$translate","$anchorScroll","$location","ADResource",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.instant;a.formData={};var o=function(){return function(a,b){return a.is_primary?-1:b.is_primary?1:"  2,3,5,7,0".indexOf(a.withdraw_method)>"  2,3,5,7,0".indexOf(b.withdraw_method)?1:-1}};a.input_keypress=function(a){return f.keypress(a)};var p=function(){a.step=1,a.withdrawData.withdraw_config_obj_s.sort(o);var b=a.withdrawData.history_withdraw,c="";angular.forEach(a.withdrawData.withdraw_config_obj_s,function(a){a.is_primary&&(c=a.withdraw_method)}),a.formData.method=c||a.withdrawData.withdraw_config_obj_s[0].withdraw_method,b?(a.itc_usd=(b.itc_usd/100).toFixed(2),a.formData.withdraw_id=b.id,"5"!=b.withdraw_method&&(a.formData.method=b.withdraw_method),a.maxITC=(a.revenue_account.available_itc_usd+b.itc_usd)/100):(a.itc_usd=30,a.maxITC=a.revenue_account.available_itc_usd/100),a.hisWithDraw=b,m.fetch("WITHDRAW_PROMOT").then(function(b){b.data&&b.data.length>0&&(a.withdrawalPromotion=b.data[0])})};p(),a.getI18nKey=function(a){return g[a]},a.withdrawAccount=function(){if(!a.formData.method)return"";for(var b=0;b<a.withdrawData.withdraw_config_obj_s.length;b++)if(a.formData.method==a.withdrawData.withdraw_config_obj_s[b].withdraw_method)return a.withdrawData.withdraw_config_obj_s[b].account;return""},a.addPayoneerWithdraw=function(){a.loading=!0,d.getPayoneerSignupUrl("V",0).then(function(c){return c.data.url?void b.open(c.data.url):(1==c.data.status&&a.withdrawData.withdraw_config_obj_s.push(c.data),a.showPayoneer=!1,void(a.loading=!1))},function(b){a.loading=!1})},a.processingTimeDesc=function(){if(!a.formData.method)return"";var b=moment.utc(),c=n("TF002")+" (UTCZ)",d=n("PM146");b.date()<16&&"27UV".indexOf(a.formData.method)>-1?b.date(16):(b.date(1),b.add("months",1));var e=b.format(c),f=b.add("days",9).format(c);return d.replace("{0}",e).replace("{1}",f)},a.validData=function(){if(!a.itc_usd||a.itc_usd<30||a.itc_usd>a.maxITC)return!1;if(!a.formData.method)return!1;if(2==a.step){if(!a.formData.pwd)return!1;if(!a.isConfirm)return!1}return!0};var q=function(){var a=l.hash();l.hash("div_nav"),k(),l.hash(a)};a.next=function(){a.validData()&&(a.formData.itc_usd=(100*a.itc_usd).toFixed(),a.step=2,q())},a.backStep1=function(){a.itc_usd=a.formData.itc_usd/100,a.step=1,a.formData.pwd="",a.isConfirm=!1,q()},a.submit=function(){return!a.processing&&a.validData()?(a.processing=!0,d.withdraw().post("",a.formData).then(function(b){return a.processing=!1,e.resetRevenueAccountCache(),a.gowithdrawalhistory(),KP.API.SUCC},function(b){return a.processing=!1,"incorrect_password"==b.type?a.errorPwd=!0:h.appendWithContent(b.type+" : "+b.msg),KP.API.ERROR})):void 0},a.gowithdrawalhistory=function(){a.$close(),i.go("finance.withdrawalhistory")}}]).controller("$$TransferItcCtrl",["$rootScope","$scope","$modalInstance","Finance","UserService","InputKeypress","I18n_WITHDRAW","KPNotify",function(a,b,c,d,e,f,g,h){a.$on("kp.BrowserBackOrForwardBtnClick",function(){b.$dismiss()}),b.formData={},b.input_keypress=function(a){return f.keypress(a)},b.validData=function(a){var c=b.itc_usd;return a&&!c?!1:c&&(_.isNaN(_.parseInt(c))||1>c||c>b.revenue_account.available_itc_usd/100)?!1:a&&!b.formData.pwd?!1:a&&!b.isConfirm?!1:!0},b.submit=function(){return!b.processing&&b.validData()?(b.processing=!0,b.formData.itc_usd=(100*b.itc_usd).toFixed(),d.transferItc().post("",b.formData).then(function(a){return b.processing=!1,b.submitSucceed=!0,e.resetRevenueAccountCache(),e.resetPaymentAccountCache(),b.$close(),KP.API.SUCC},function(a){return b.processing=!1,"incorrect_password"==a.type?b.errorPwd=!0:h.appendWithContent(a.type+" : "+a.msg),KP.API.ERROR})):void 0}}]).service("WithdrawItcModal",["$modal","$rootScope","Finance","$state",function(a,b,c,d){this.show=function(e){if(b.currentUser&&b.currentUser.revenue_account&&"1"==b.currentUser.revenue_account.status){var f=a.open({size:"",backdrop:"static",template:'<div class="kp-loader" style="position: fixed;top:50%;left:50%;"><div class="kp-loading" style="width: 30px;height: 30px;"></div></div>',windowClass:"purchase-itc"}),g=e||b.$new();return g.revenue_account=b.currentUser.revenue_account,c.withdraw().get().then(function(b){f.close();var c=b.data.withdraw_config_obj_s;if(!c||0==c.length)return void d.go("setting.withdraw",{showmsg:1});g.showPayoneer=!0;var e=b.data.has_payoneer;e&&(g.showPayoneer=!1),g.utc_timestamp=b.server_time,g.withdrawData=b.data,a.open({scope:g,size:"xlg",templateUrl:"/views/finance/withdraw.html",windowClass:"",controller:"$$WithdrawItcModalCtrl"})},function(){f.close()})}}}]).service("TransferItcModal",["$rootScope","$modal",function(a,b){this.show=function(c){if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/finance/overview/transfer",title:"Transfer Credits"}),a.currentUser&&a.currentUser.revenue_account&&"1"==a.currentUser.revenue_account.status){var d=c.$new();d.revenue_account=a.currentUser.revenue_account,b.open({scope:d,size:"xlg",templateUrl:"/views/finance/transfer.html",windowClass:"",controller:"$$TransferItcCtrl"})}}}]).service("WithdrawConfigService",["$rootScope","$modal","Finance","I18n_WITHDRAW","KPNotify","$translate",function(a,b,c,d,e,f){var g=function(c,d){var e=d||a.$new();e.item=c,b.open({scope:e,size:"lg",templateUrl:"/views/component/setting.withdraw.banktransferinfo.html",windowClass:""})},h=function(g,h){var i,j=a.$new();j.data=h.withdrawMethods[g]||{},j.data.method=g;var k="";switch(g){case"0":var l=angular.copy(KP.COUNTRRY_ARR),m=f.instant;h.editBankTransfer?(h.bankTransferInfo&&(angular.extend(j.data,h.bankTransferInfo),j.uiItems={name:m(h.bankTransferInfo.country),v:h.bankTransferInfo.country}),i="/views/component/setting.withdraw.addoredit.banktransfer.html",angular.forEach(l,function(a){a.name=m(a.l)}),j.countries=l,j.uiSelectedCountry=function(a){j.data.country=a.v}):(i="/views/component/setting.withdraw.banktransferinfo.html",j.item=h.bankTransferInfo);break;case"3":i="/views/component/setting.withdraw.addoredit.alipay.html",h.taxInfo?(j.isEdit=!0,angular.extend(j.data,h.taxInfo)):j.isEdit=!1;break;default:k="",i="/views/component/setting.withdraw.addoredit.html","5"==g?j.example="Z123456789012":j.example="xxx@yyy.com"}b.open({scope:j,size:k,templateUrl:i,windowClass:"",controller:["$scope",function(a){a.methodCode=d[g],a.error={},a.submit=function(){a.error.data={};var b,d=a.data.account;switch(g){case"0":(!a.data.bank_name||a.data.bank_name.length>200)&&(a.error.data.bank_name=!0),(!a.data.bank_swift_code||a.data.bank_swift_code.length>50)&&(a.error.data.bank_swift_code=!0),a.data.country||(a.error.data.country=!0),(!a.data.user_name||a.data.user_name>50)&&(a.error.data.user_name=!0),(!a.data.user_address||a.data.user_name>225)&&(a.error.data.user_address=!0),(!a.data.city||a.data.city.length>50)&&(a.error.data.bank_city=!0),(!a.data.account_number||5>a.data.account_number.length||a.data.account_number.length>50)&&(a.error.data.account_number=!0),a.data.account=a.data.account_number,a.data.bank_city=a.data.city;break;case"3":var f=/^(?=\d{11}$)^1(?:3\d|4[57]|5[^4\D]|66|7[^249\D]|8\d|9[89])\d{8}$/;if(b=/^1\d{10}$/,(!a.data.name||a.data.name.length>50)&&(a.error.data.name=!0),(!a.data.id_no||a.data.id_no.length>50)&&(a.error.data.id_no=!0),(!a.data.address||a.data.address.length>200)&&(a.error.data.address=!0),(!a.data.phone_no||a.data.phone_no.length>50)&&(a.error.data.phone_no=!0),f.test(a.data.phone_no)||(a.error.data.phoneFormat=!0),b.test(d))break;case"2":case"7":if(b=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,b.test(d))break;a.error.data.account=!0;break;case"5":b=/^Z\d{12}$/,b.test(d)||(a.error.data.account=!0)}a.data.pwd||(a.error.data.pwd=!0);for(var i in a.error.data)return;a.processing||(a.processing=!0,c.settingOfWithdraw().post("",a.data).then(function(b){h.withdrawMethods[g]={account:d,withdraw_method:g},"3"!=g||j.isEdit?"0"==g&&(h.bankTransferInfo=a.data):h.taxInfo=a.data,a.$close()},function(b){a.processing=!1,"incorrect_password"==b.type?a.error.data.pwd2=!0:e.appendWithContent(b.type+" : "+b.msg)}))}}]})};return{viewBankTransferInfo:g,openConfig:h}}]),angular.module("kp.finance").directive("stripeCheckout",["ENV","$log","$rootScope","localStorageService","Finance","$state","$timeout","KPNotify","$translate",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",templateUrl:"/views/finance/directives/stripe.checkout.html",scope:{orderInfo:"="},link:function(b,c,j){function k(){return window.StripeCheckout?(g(function(){b.sdkLoaded=!0}),l=StripeCheckout.configure({key:a.stripeKey,image:"https://s3.amazonaws.com/stripe-uploads/acct_182GfqDlfWbREU1jmerchant-icon-1486610355148-square-ii-italki-01.png",locale:"auto",token:function(a){if(a&&a.id){var b={amount:m.amount,source_type:m.source_type,itc_usd:m.itc_usd,pay_type:"Y",stripeToken:a.id};(m.code.spec_code||m.code.common_code)&&angular.extend(b,m.code),"4"==m.source_type&&d.get("giftcard_order_id")&&(b.giftcard_order_id=d.get("giftcard_order_id")),"5"==m.source_type&&angular.extend(b,{use_type:m.use_type}),angular.isDefined(m.unpay_id)&&angular.extend(b,{unpay_id:m.unpay_id}),e.paymentGet().post("",b).then(function(a){if(a&&a.data.order_id){a.data.status;f.go("purchaseSucc",{order_id:a.data.order_id})}},function(a){if(a){switch(a.type){case"1":a.msg=n("VGC300");break;case"2":a.msg=n("VGC301");break;case"3":a.msg=n("VGC302")}h.appendWithContent(a.msg)}})}}}),!0):void g(k,1e3)}var l,m={amount:0,itc_usd:0,source_type:1,token_name:KP.CONSTANT.TOKEN,code:{}},n=i.instant;b.options=m,k(),b.doCharge=function(a){l.open({name:"ITALKI HK LIMITED",description:"Credits including Processing Fee",currency:"usd",amount:m.amount}),a.preventDefault()};var o=function(){l.close()};window.addEventListener("popstate",o),b.$on("$destroy",function(){window.removeEventListener("popstate",o)}),b.$watch("orderInfo",function(a,b){a.cents&&a.fee&&(m.itc_usd=a.cents,m.amount=a.cents+parseFloat(100*a.fee)),a.unpay_id&&(m.unpay_id=a.unpay_id),a.code?m.code=a.code:m.code={},a.source_type&&(m.source_type=a.source_type),a.use_type&&(m.use_type=a.use_type),m.token=d.get(KP.SERIALIZE.TOKEN)})}}}]),angular.module("kp.finance").service("NOEnoughITCModal",["$modal",function(a){this.open=function(){a.open({size:"sm",templateUrl:"/views/component/no.enough.itc.html"})}}]),angular.module("kp.finance").factory("Stripe",StripeServices),StripeServices.$inject=["$q","$window","ENV"],angular.module("kp.finance").factory("PaymentService",PaymentService),PaymentService.$inject=["$rootScope","$stateParams","localStorageService"],angular.module("kp.teacher",["ngSanitize"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/teacher/","/teachers"),a.state("professional",{parent:"kp",url:"/teachers/professional",
templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl"}).state("tutor",{parent:"kp",url:"/teachers/tutoring",templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl"}).state("professionalViaTeach",{parent:"kp",url:"/teachers/professional/{teach}",templateUrl:"/views/teacher/professional/bs.html",controller:"TeacherListCtrl"}).state("tutorViaTeach",{parent:"kp",url:"/teachers/tutoring/{teach}",templateUrl:"/views/teacher/professional/bs.html",controller:"TeacherListCtrl"}).state("teachers",{url:"/teachers?teach?country?is_native?is_instant?price_usd?speak?teacher_type?tags?child_tags?within?weekday?is_video?is_trial?is_advanced?nick_keyword?q",templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl",data:{title:"TP540"}}).state("teachersViaLanguage",{url:"/teachers/{teach}?country?is_native?is_instant?price_usd?speak?teacher_type?tags?child_tags?within?weekday?is_video?is_trial?type?is_advanced?nick_keyword?q",templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl",data:{title:"TP540"}}).state("teachersViaLanguageAndFrom",{url:"/teachers/{teach}/{from}",templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl",data:{title:"TP540"}}).state("teacherApply",{url:"/teacher/apply","abstract":!0,templateUrl:"/views/teacher/apply/index.html",controller:"TeacherApplyCtrl",data:{}}).state("apply",{url:"/teacher/application",templateUrl:"/views/teacher/apply/apply.html",controller:"TeacherApplyCtrl",data:{title:function(){return"HL923".translate()+" - italki"}}}).state("teacherApply.step1",{url:"/step/1",templateUrl:"/views/teacher/apply/step.1.html",data:{title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step1a",{url:"/step/1/a",templateUrl:"/views/teacher/apply/step.1.a.html",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step1b",{url:"/step/1/b",templateUrl:"/views/teacher/apply/step.1.a.html",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step2",{url:"/step/2",templateUrl:"/views/teacher/apply/step.2.html",controller:"TeacherApplyStep2Ctrl",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step3",{url:"/step/3",templateUrl:"/views/teacher/apply/step.3.html",controller:"TeacherApplyStep3Ctrl",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step4",{url:"/step/4",templateUrl:"/views/teacher/apply/step.4.html",controller:"TeacherApplyStep4Ctrl",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.step5",{url:"/step/5",templateUrl:"/views/teacher/apply/step.5.html",data:{role:"user",title:function(){return"TP100".translate()+" - italki"}}}).state("teacherApply.already",{url:"/already",templateUrl:"/views/teacher/apply/already.html",data:{title:function(){return"TC200".translate()+" - italki"}}}).state("teacherApply.policy",{url:"/step/policy",templateUrl:"/views/teacher/apply/policy.html"}).state("teacherApply.tutortopro",{url:"/tutor/professional",templateUrl:"/views/teacher/apply/tutor.apply.professional.html",controller:"TeacherApplyStep3Ctrl",data:{title:function(){return"TP100".translate()+" - italki"}}}).state("teacher",{url:"/teacher/{id:int}",templateUrl:"/views/teacher/profile.html",controller:"TeacherProfileCtrl"}).state("teacherCourse",{url:"/teacher/{id:int}/course/{cid:int}",templateUrl:"/views/teacher/profile.html",controller:"TeacherProfileCtrl"}).state("teacherTags",{url:"/teachers/tags/{id1:int}/{id2:int}/{name:string}",templateUrl:"/views/teacher/bs.html",controller:"NewTeacherListCtrl"})}]),angular.module("kp.teacher").controller("TeacherListCtrl",["$scope","Teacher","InstantTeacherNotificationService","$state","$anchorScroll","$document","$stateParams","$modal","$timeout","$translate","CourseListModal","contactRes","EmptyPromise","$log","LoginService","$rootScope","localStorageService","Restangular",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a){a!==Q&&(Q=a,a?c.subscribe(t):c.unsubscribe())}function t(c){function d(a){a?i.pro_count&&(i.pro_count=i.pro_count-1):i.tutor_count&&(i.tutor_count=i.tutor_count-1)}if(!(["j","k"].indexOf(c.type)<0)){var e=c.isotids,f="k"==c.type,g="1"==a.filter.teacher_type,h="0"==a.filter.teacher_type,i=a.statistics,j=a.items;if(y=a.filter.teach,f)b.profile(e).then(function(a){var b=a.data,c=1==b.is_pro,d=b.language_obj_s.map(function(a){return a.language});(""==y||d.includes(y))&&((g&&c||!g&&!c||h)&&_.filter(j,{id:e}).length<1&&j.push(b),c?i.pro_count=i.pro_count+1:i.tutor_count=i.tutor_count+1)});else if(j){var k=_.remove(j,{id:e});angular.forEach(k,function(a){var b=1==a.is_pro;d(b)})}}}1==g.type&&(a.changeText=!0);var u=j.instant,v=[];g.within&&angular.forEach(g.within,function(a,b){""!=a&&v.push(a)});var w=[];g.weekday&&angular.forEach(g.weekday,function(a,b){""!=a&&w.push(a)});var x=[];g.tags&&angular.forEach(g.tags,function(a,b){""!=a&&x.push(a)});var y=g.teach,z=g.from||g.country,A=g.is_native,B=g.is_instant,C=g.price_usd,D=g.speak,E=g.teacher_type,F=g.child_tags,G=g.is_video,H=g.is_trial;a.updateState=function(){0==a.manycheck.now&&(a.manycheck.now="");var b=[];angular.forEach(a.manycheck.within,function(a,c){""!=a&&b.push(a)});var c=[];angular.forEach(a.manycheck.weekday,function(a,b){""!=a&&c.push(a)});var e=[];angular.forEach(a.manycheck.tags,function(a,b){""!=a&&e.push(a)}),y=a.filter.teach,B=a.manycheck.now;var f={teach:a.filter.teach,country:a.filter.country,speak:a.filter.speak,is_native:a.filter.is_native,is_video:a.filter.is_video,is_trial:a.filter.is_trial,is_instant:a.manycheck.now,price_usd:a.filter.price_usd,teacher_type:a.filter.teacher_type,tags:e,child_tags:a.filter.child_tags,within:b,weekday:c};y?d.go("teachersViaLanguage",f,{notify:!1,reload:!1,location:"replace"}):d.go("teachers",f,{notify:!1,reload:!1,location:"replace"})},a.$watch("filter",function(b,c){angular.equals(b,c)||a.updateState()},!0),a.$watch("manycheck",function(b,c){angular.equals(b,c)||a.updateState()},!0),a.openTeacherProfile=function(a,b){"a"!==a.target.tagName.toLowerCase()&&KP.Utils.openUrlWithNewTab(d.href("teacher",{id:b.id}))},a.teacherApply=function(){return d.transitionTo("apply"),m.getEmptyPromise()},a.navToTeacherTag=function(a,b,c,e){d.go("teacherTags",{id1:parseInt(b,10),id2:c,name:e.translate().replace(" ","_")}),a.preventDefault(),a.stopPropagation()},a.opensearchTmodal=function(){a.uiItems={t:-1,v:a.filter.teach,name:u(a.filter.teach?a.filter.teach:"C0027")},a.uiItems1={t:-1,v:a.filter.speak,name:u(a.filter.speak?a.filter.speak:"C0027")},a.uiItems2={t:-1,v:a.filter.country,name:I(a.filter.country)},h.open({scope:a,size:"lg",templateUrl:"/views/component/searchTmodal.html"})},a.tipFlag=!1;var I=function(a){var b=u("Anywhere");return angular.forEach(KP.COUNTRRY_ARR,function(c){a==c.v&&(b=u(c.l))}),b},J=angular.copy(KP.LANSEL);angular.forEach(J,function(a){a.name=u(a.v)}),a.lans=_.union([{t:-1,v:"",name:u("C0027")}],J);var K=angular.copy(KP.COUNTRRY_ARR);angular.forEach(K,function(a){a.name=u(a.v)}),a.countries=_.union([{v:"",l:"Anywhere",name:u("Anywhere")}],K),a.uiItems={t:-1,v:"",name:u("C0027")},a.teachLans=[{v:"",name:u("C0027")}],b.getTeachLans().get().then(function(b){var c=[{v:"",name:u("C0027")}];angular.forEach(KP.LANSEL,function(a){angular.forEach(b.data,function(b){return a.v==b?(c.push({v:b,name:u(b)}),!1):void 0})}),a.teachLans=c}),a.uiSelected=function(b,c){a.changeText=!1,a.filter.teach=b.v,a.getTagChild()},a.uiSelected1=function(b,c){a.filter.speak=b.v,a.applyFilter()},a.uiSelected11=function(b,c){a.filter.speak=b.v},a.uiSelected2=function(b,c){a.filter.country=b.v,a.applyFilter()},a.uiSelected22=function(b,c){a.filter.country=b.v};var L=1;a.filter={teach:y||"",speak:D||"",country:z||"",price_usd:C||"",teacher_type:E||1,tags:x||"",is_instant:B||"",is_native:A||"",is_video:G||"",is_trial:H||"",child_tags:"",within:v||"",weekday:w||""},"professional"==a.filter.teach.toLowerCase()?a.filter.country?(a.filter.teach=a.filter.country,a.filter.country=""):a.filter.teach="":"tutoring"==a.filter.teach.toLowerCase()&&(a.filter.country?(a.filter.teach=a.filter.country,a.filter.country=""):a.filter.teach="",a.filter.teacher_type=2),a.uiItems={name:u(a.filter.teach),v:a.filter.teach},a.uiItems1={v:a.filter.speak,name:u(a.filter.speak?a.filter.speak:"C0027")},a.uiItems2={name:u(a.filter.country),v:a.filter.country},"tutor"==d.$current.self.name&&(a.filter.teacher_type=2),a.childTags=[],a.tags=[{},{t:"ST701",d:"ST711"},{t:"ST702",d:"ST713"},{t:"ST703",d:"ST715"},{t:"ST704",d:"ST717"},{t:"ST705",d:"ST719"}],a.manycheck={now:0,within:["","","",""],weekday:["","","","","","",""],tags:["","","","",""]},a.tagFlag=!1,a.staFlag=!1,a.listFlag=!1,a.loadedFlag=function(){return a.tagFlag&&a.staFlag&&a.listFlag};var M=function(){if("5"!==a.manycheck.tags[4])return void(a.childTags=[]);var b=[];angular.forEach(KP.teacher_tag_child,function(c,d){c.language==a.filter.teach&&"5"==c.teacher_tag_code&&(c.checked=!1,b.push(c))}),a.childTags=b};a.getChildTagItem=function(a){var b={abbr:"",full_name:"",language:"",teacher_tag_code:"",id:0};return angular.forEach(KP.teacher_tag_child,function(c,d){c.id.toString()==a.toString()&&(b=c)}),b};var N=function(){KP.teacher_tag_child?M():ca(M)};a.getTagChild=N,a.cancelChildTags=function(){angular.forEach(a.childTags,function(a){a.checked=!1})},a.statistics={tutor_count:0,pro_count:0};var O=function(){n.debug("manycheck variable: ",a.manycheck),a.filter.within=[],a.filter.weekday=[],a.filter.tags=[],a.filter.child_tags=[],a.filter.is_instant=a.manycheck.now||B?1:"",a.instantFilter=a.manycheck.now||B?1:"",angular.isDefined(B)&&(0==B?a.manycheck.now="":a.manycheck.now="N"),s(a.manycheck.now?!0:!1),angular.isDefined(v)&&angular.forEach(v,function(b,c){switch(b){case"N":a.manycheck.within[0]="N";break;case"M":a.manycheck.within[1]="M";break;case"A":a.manycheck.within[2]="A";break;case"E":a.manycheck.within[3]="E"}}),angular.forEach(a.manycheck.within,function(b,c){""!=b&&a.filter.within.push(b)}),angular.isDefined(w)&&angular.forEach(w,function(b,c){switch(b){case"0":a.manycheck.weekday[1]="0";break;case"1":a.manycheck.weekday[2]="1";break;case"2":a.manycheck.weekday[3]="2";break;case"3":a.manycheck.weekday[4]="3";break;case"4":a.manycheck.weekday[5]="4";break;case"5":a.manycheck.weekday[6]="5";break;case"6":a.manycheck.weekday[7]="6"}}),angular.forEach(a.manycheck.weekday,function(b,c){""!=b&&a.filter.weekday.push(b)}),F&&a.childTags.length>0&&!a.changeChildTags&&angular.forEach(F,function(b,c){a.childTags[b-1].checked=!0}),angular.forEach(a.childTags,function(b,c){b.checked&&a.filter.child_tags.push(b.id)}),angular.isDefined(x)&&!a.changetags&&angular.forEach(x,function(b,c){switch(b){case"1":a.manycheck.tags[0]="1";break;case"2":a.manycheck.tags[1]="2";break;case"3":a.manycheck.tags[2]="3";break;case"4":a.manycheck.tags[3]="4";break;case"5":a.manycheck.tags[4]="5"}}),angular.forEach(a.manycheck.tags,function(b,c){""!=b&&a.filter.tags.push(b)})},P=function(){var b,c;angular.forEach(KP.LANSEL,function(a){a.v==y&&(b=1)}),angular.forEach(KP.COUNTRRY_ARR,function(b){(b.v==a.filter.country||b.l==a.filter.countr)&&(c=1)}),E&&0!=E&&1!=E&&2!=E&&(a.filter.teacher_type=1),A&&0!=A&&1!=A&&(a.filter.is_native=0),a.filter.price_usd&&"min-1000"!=a.filter.price_usd&&"1000-2000"!=a.filter.price_usd&&"2000-max"!=a.filter.price_usd&&(a.filter.price_usd=""),(b&&1!=b||c&&1!=c)&&(b&&1!=b&&(a.filter.teach=""),c&&1!=c&&(a.filter.country=""),y?d.go("teachersViaLanguage",{teach:a.filter.teach,country:a.filter.country,speak:D,is_native:A,is_video:G,is_instant:B,price_usd:C,teacher_type:a.filter.teacher_type,tags:x,child_tags:F,within:v,weekday:w},{reload:!1,location:"replace",notify:!1}):d.go("teachers",{teach:a.filter.teach,country:a.filter.country,speak:D,is_native:A,is_video:G,is_instant:B,price_usd:C,teacher_type:a.filter.teacher_type,tags:x,child_tags:F,within:v,weekday:w},{reload:!1,location:"replace",notify:!1}))},Q=!1,R="dashboard.onboarding",S=q.cookie.get(R),T="dashboard.mail.search",U=q.cookie.get(T),V="groupC.search",W=q.cookie.get(V),X="groupD.search1",Y=q.cookie.get(X);if(S&&1==S.onboarding)a.filter.speak=S.teacher_speaks,a.filter.teach=S.teaching_language,a.uiItemsFilter=u(a.filter.teach),a.filter.is_native=1,a.filter.is_trial=1,S.onboarding=0,q.cookie.remove(R,S);else if(U&&1==U.mail)a.filter.speak=U.speak_language,a.filter.teach=U.learn_language,a.uiItemsFilter=u(a.filter.teach),q.cookie.remove(T,U);else if(W&&S){a.filter.speak=S.teacher_speaks,a.filter.teach=S.teaching_language;var Z=parseInt(W.teacher_tags)+1;a.manycheck.tags[W.teacher_tags]=Z.toString(),a.filter.country=W.teacher_cou,angular.isDefined(W.teacher_pro)&&(a.filter.teacher_type=W.teacher_pro),a.filter.is_native="1",a.filter.is_trial="1",a.uiItemsFilter=u(a.filter.teach),q.cookie.remove(V,W),q.cookie.remove(R,S)}else if(W&&!S&&!U&&p.currentUser){angular.forEach(p.currentUser.language_obj_s,function(b){0==b.is_learning&&7==b.level&&(a.filter.speak=b.language)}),a.filter.teach=a.currentUser.learning_language;var Z=parseInt(W.teacher_tags)+1;a.manycheck.tags[W.teacher_tags]=Z.toString(),a.filter.country=W.teacher_cou,angular.isDefined(W.teacher_pro)&&(a.filter.teacher_type=W.teacher_pro),a.filter.is_native="1",a.filter.is_trial="1",a.uiItemsFilter=u(a.filter.teach),q.cookie.remove(V,W)}else if(W&&U){a.filter.speak=U.teacher_speaks,a.filter.teach=U.teaching_language;var Z=parseInt(W.tags)+1;a.manycheck.tags[W.tags]=Z.toString(),a.filter.country=W.country,angular.isDefined(W.teacher_pro)&&(a.filter.teacher_type=W.teacher_pro),a.filter.is_native="1",a.filter.is_trial="1",a.uiItemsFilter=u(a.filter.teach),q.cookie.remove(V,W),q.cookie.remove(T,U)}else if(Y){a.filter.speak=Y.speak_language,a.filter.teach=Y.learn_language;var Z=parseInt(Y.teacher_tag)+1;a.manycheck.tags[Y.teacher_tag]=Z.toString(),a.filter.country=Y.teacher_country,angular.isDefined(Y.prefer_pro)?0==Y.prefer_pro?a.filter.teacher_type="2":1==Y.prefer_pro&&(a.filter.teacher_type="1"):a.filter.teacher_type="0",a.uiItemsFilter=u(a.filter.teach),angular.isDefined(Y.native_language)&&(a.filter.is_native="1"),angular.isDefined(Y.offer_trial)&&(a.filter.is_trial="1"),q.cookie.remove(X,Y)}else a.uiItemsFilter="";var $=function(b,c){a.noStatFlag||(O(),a.staFlag=!1,a.statistics.pro_count=b,a.statistics.tutor_count=c,a.staFlag=!0)},aa=function(c){a.listFlag=!1,1==c&&(a.items=null),a.meta={},a.filter.page=c,O(),P();var d=function(){b.getTeachersV2().get(a.filter).then(function(b){var d=a.items;a.isNaN=isNaN,angular.forEach(b.data,function(a){"0.0"==a.teacher_info_obj.pro_rating&&(a.teacher_info_obj.pro_rating=a.teacher_info_obj.tutor_rating)}),d=d&&1!=c?_.union(d,b.data):b.data,n.debug("before filter duplicate teacher, length:",d.length),d=_.unique(d,"id"),n.debug("end filter duplicate teacher, length:",d.length);a.items=d,a.meta=b.meta,$(b.meta.statistics_info.pro_count,b.meta.statistics_info.tutor_count)})["finally"](function(){a.loadMoreFlag=!1,a.listFlag=!0,a.noStatFlag=!1})};d()};if(g.id2){a.filter.teacher_type=0;var ba=function(){KP.teacher_tag_child?(angular.forEach(KP.teacher_tag_child,function(b,c){b.id==g.id1&&(a.uiItems={t:-1,v:b.language,name:u(b.language)},a.filter.teach=b.language)}),angular.forEach(KP.teacher_tag_child,function(b,c){b.id==g.id1?(b.checked=!0,a.childTags.push(b)):b.language==a.filter.teach&&(b.checked=!1,a.childTags.push(b))}),a.manycheck.tags[4]="5",aa(L)):i(ba,200)};ba()}else g.id1&&(a.filter.teacher_type=0,a.manycheck.tags[g.id1-1]=g.id1.toString()),aa(L);a.loadMore=function(){return a.loadMoreFlag=!0,aa(++L),m.getEmptyPromise()},a.applyFilter=function(){a.filter.tags!=a.manycheck.tags&&(a.changetags=1);var b=[];a.childTags&&(angular.forEach(a.childTags,function(a,c){1==a.checked&&(b[c]=a.id)}),a.filter.child_tags.length!=b.length&&(a.changeChildTags=1)),""==a.filter.teach&&(a.tipFlag=!0,i(function(){a.tipFlag=!1},5e3)),a.noStatFlag||(a.statistics.pro_count=0,a.statistics.tutor_count=0),L=1,aa(L)},a.selAvailabilities="",a.getAvailabilityCount=function(){var b=0,c="";return a.manycheck.now?(b++,a.selAvailabilities=u("M0113"),b):c},a.setAllSearch=function(){a.manycheck.now&&(a.filter.teacher_type=0),a.uiItemsFilter&&(a.uiItemsFilter="")},a.getTagsCount=function(){var b=0;a.manycheck.tags[0]&&b++,a.manycheck.tags[1]&&b++,a.manycheck.tags[2]&&b++,a.manycheck.tags[3]&&b++,a.manycheck.tags[4]&&b++;for(var c=0;c<a.childTags.length;c++)a.childTags[c].checked&&b++;return b},a.addFavorites=function(b){return a.currentUser?void(b.is_favourite&&1==b.is_favourite?l.favourite().remove({teacher_id:b.id}).then(function(a){b.is_favourite=0}):(l.favourite().post({teacher_id:b.id}).then(function(a){b.is_favourite=1}),p.currentUser.has_teacher=1)):void o.open()},a.rateTitle=function(a){return u("TP014")+": "+a},a.scheduleRecommendation=function(a){k.open(a,0,0,3,1)};var ca=function(c){a.tagFlag=!1,KP.teacher_tag_child?(F&&(M(),a.applyFilter()),a.tagFlag=!0):b.fetchTagChild().then(function(a){a&&a.data&&(KP.teacher_tag_child=a.data,c&&c())}).then(function(){F&&(M(),a.applyFilter())})["finally"](function(){a.tagFlag=!0})};ca()}]),angular.module("kp.teacher").controller("NewTeacherListCtrl",NewTeacherListCtrl),NewTeacherListCtrl.$inject=["$scope","Teacher","InstantTeacherNotificationService","$state","$anchorScroll","$document","$stateParams","$modal","$timeout","$translate","CourseListModal","contactRes","EmptyPromise","LoginService","$rootScope","localStorageService","Restangular","FromConfig","UserService","GlobalObject","screenSize"],angular.module("kp.teacher").constant("lesson_type",{0:"C0024",1:"TP997",2:"TP996",3:"TS026",4:"TS047"}).controller("ProfessionalTeacherListCtrl",["$scope","Teacher","$anchorScroll","$stateParams","$log","$modal","CourseListModal",function(a,b,c,d,e,f,g){}]).controller("TeacherProfileCtrl",["$rootScope","$location","lesson_type","$scope","Teacher","$anchorScroll","InstantTeacherNotificationService","$state","$stateParams","$log","$modal","CourseListModal","$timeout","$translate","contactRes","ItalkiMessageBox","CourseXModal","LoginAndActive","ShowSaveMsg","geeService","LoginService","TeacherApplyService","EmptyPromise","teacher_material_json","Account","localStorageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){var b=a.isotids,c="k"==a.type;b==d.teacher.id&&(d.teacher.teacher_info_obj.is_available_instant_tutoring=c)}d.show=!0,d.instantFilter=1,d.$prevState&&d.$prevState.name.indexOf("teachers")>-1&&(d.canBackToSearch=!0),d.backToSearch=function(){h.go(d.$prevState.name,d.$prevStateParams)},d.chatWithMe=function(a){r.open()&&p.chatWith(a)},d.openShareModal=function(){return d.currentUser?(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/share".format(b.path())}),void k.open({size:"sm",templateUrl:"/views/component/share.html",windowClass:"share-modal",controller:["$scope",function(b){a.$on("kp.BrowserBackOrForwardBtnClick",function(){b.$dismiss()})}]})):void u.open()},d.openCourseDetailModal=function(a){q.open(a,d.teacher.is_schedule)},d.openUnverifiedModal=function(){k.open({size:"",templateUrl:"/views/component/unverified.html",windowClass:"schedule-modal"})},d.contactWith=function(){r.open()&&p.contactWith(d.teacher)};var B=n.instant,C=i.id;f(),d.schedule=function(a,b,c,e){if(r.open()&&!d.isMe()&&d.teacher)if(d.teacher.is_schedule){if(3==c){if(!d.teacher.teacher_info_obj.has_trial)return void s.open(null,B("TS314"));if(0==d.teacher.trial_left_count)return void s.open(null,B("TP334"));if(d.teacher.has_had_trial)return void s.open(null,B("TS237"))}l.open(d.teacher.id,a,b,c,e)}else s.open(null,B("TS311"))},x=angular.copy(x);var D=function(a){return a?a.replace(/\n/gi,"<br/>"):a};e.profile(C).then(function(a){var b=a.data,c=[],e=[],f=b.teacher_course_obj_s||[],h=b.last_login_time;if(window._bt&&_bt.track("checked_teacher_profile",{teacher_ID:b.id,teacher_name:b.nickname,teacher_type:b.is_pro?"pro":"tutor",lessons:b.teacher_info_obj.session_count,students:b.teacher_info_obj.student_count,min_price:b.teacher_info_obj.min_price_usd}),h&&(b.last_login_time_from_now=moment(h).fromNow()),angular.forEach(f,function(a,b){angular.isObject(a)&&(a.title?c.push(a):e.push(a))}),b.proCourseList=c,b.tutorCourseList=e,b.teacher_info_obj.introduction=D(b.teacher_info_obj.introduction),b.teacher_info_obj.about_me=D(b.teacher_info_obj.about_me),b.teacher_info_obj.about_teacher=D(b.teacher_info_obj.about_teacher),b.teacher_info_obj.teaching_style=D(b.teacher_info_obj.teaching_style),"0.0"==b.teacher_info_obj.pro_rating&&(b.teacher_info_obj.pro_rating=b.teacher_info_obj.tutor_rating),d.teacher=b,d.teacher_material_list=[],b.teacher_info_obj.teacher_material_json){var j=b.teacher_info_obj.teacher_material_json.slice(1,-1);angular.forEach(x,function(a){angular.forEach(j.split(","),function(b){a.id==b&&d.teacher_material_list.push(a)})})}var k=[];angular.forEach(f,function(a){k.push({language:a[" language "]})}),k=_.uniq(k,"language"),d.teachLans=k,d.teacher.teacher_info_obj.has_trial&&d.teacher.trial_left_count?"-1"==d.teacher.has_had_trial?d.showTrial=!0:d.teacher.is_schedule&&!d.teacher.has_had_trial?d.showTrial=!0:(d.hideTrial=!0,d.showTrial=!1,d.isMe()&&(d.showSetting=!1)):(d.showSetting=!0,d.hideTrial=!1,d.showTrial=!1);var l="teacher.video.alert";if(d.videoAlertShow=!0,d.closeVideoAlert=function(){d.videoAlertShow=!1,z.cookie.set(l,!0)},m(function(){var a=z.cookie.get(l,!0);a&&(d.videoAlertShow=!1)},500),G(b.video_view_url),d.playUrlObj.canplay&&angular.isString(b.video_view_url)&&b.video_view_url){var n=d.playUrlObj.url.replace("controls=0","");n+=n.indexOf("?")>-1?"&controls=1":"?controls=1",d.playUrlObj.url=n}else angular.isString(b.oms_apply_video_url)&&b.oms_apply_video_url&&(G(b.oms_apply_video_url),d.playUrlObj.oms_apply_video_info_http=b.oms_apply_video_info_http);var o=[];angular.forEach(d.teacher.language_obj_s,function(a){a.is_teaching&&o.push(B(a.language))}),d.teaches=o.join(","),angular.forEach(KP.COUNTRRY_ARR,function(a){return a.v==d.teacher.origin_country_id?(d.fromCT=B(a.l),!0):void 0});var p=1==b.teacher_info_obj.instant_tutoring_status;p&&g.subscribe(A,b.id);var r=i.cid;if(r){q.teacherName=b.nickname;var s=function(){q.open(r,b.is_schedule),q.closeForSearcher&&m(s,1e3)};s()}},function(a){"TeacherNotExists"==a.type&&h.go("user",{id:C})}),e.getTeacherTag().get({teacher_id:C}).then(function(a){d.teacher_personal_tags=a.data.tag_list},function(a){})["finally"](function(){d.loadedFlag=!0,d.loadMoreFlag=!1}),e.getTeacherComment().get({teacher_id:C}).then(function(a){d.comment_obj_s=a.data||[]},function(a){})["finally"](function(){d.loadedFlag=!0,d.loadMoreFlag=!1}),KP.isMobile||(d.hideOrShowFilter=!0),e.getTeacherCommentFilter().get({teacher_id:C}).then(function(a){var b=a.data.filter,c=[],e=[],f=[],g=[];angular.forEach(b,function(a){e.indexOf(a.lesson_language,0)>-1?angular.forEach(f,function(b){b.language===a.lesson_language&&b.typeObj.push(a.lesson_type)}):(e.push(a.lesson_language),f.push({language:a.lesson_language,typeObj:[a.lesson_type]})),c.indexOf(a.lesson_type,0)>-1?angular.forEach(g,function(b){b.type===a.lesson_type&&b.languageObj.push(a.lesson_language)}):(c.push(a.lesson_type),g.push({type:a.lesson_type,languageObj:[a.lesson_language]}))}),d.languageTypeObj=f,d.typeLanguageObj=g,d.lessonLanguageObj=e,d.lessonTypeObj=c.sort()}),d.getLessonType=function(a){return c[a]},d.commentFilter={teacher_id:C,lesson_type:"0",lesson_language:"",sort:0,page:1,page_size:5};var E=function(a){a&&(d.commentFilter.page=a),d.commentFilter.lesson_language||"0"!==d.commentFilter.lesson_type||0!==d.commentFilter.sort?d.hasFilter=!0:d.hasFilter=!1,e.getComment().get(d.commentFilter).then(function(b){var c=b.data.comments;a>1?d.teacherCommentObj=_.union(d.teacherCommentObj,c):d.teacherCommentObj=c,d.comment_total_count=b.data.total_count,d.teacherCommentMeta=b.meta})["finally"](function(){d.loadMoreCommentFlag=!1})};E("1");var F=1;d.filterCommentLanguage=function(a,b){a.stopPropagation(),F=1,d.commentFilter.lesson_language=b,angular.forEach(d.languageTypeObj,function(a){""===b&&(d.typeObj=d.lessonTypeObj),a.language===b&&(d.typeObj=a.typeObj,-1===a.typeObj.indexOf(d.commentFilter.lesson_type,0)&&(d.commentFilter.lesson_type="0"))}),E("1")},d.filterCommentType=function(a,b){a.stopPropagation(),F=1,d.commentFilter.lesson_type=b,angular.forEach(d.typeLanguageObj,function(a){"0"===b&&(d.lanObj=d.lessonLanguageObj),a.type===b&&(d.lanObj=a.languageObj,-1===a.languageObj.indexOf(d.commentFilter.lesson_language,0)&&(d.commentFilter.lesson_language=""))}),E("1")},d.loadMoreComment=function(){return d.loadMoreCommentFlag=!0,E(++F)},d.onSortbySelect=function(a){d.commentFilter.sort=a,E("1")},d.removeFavoriteComments=function(a,b){return e.TeacherUpcancel().post({session_id:a}).then(function(a){b.is_reviews_up=0,d.$broadcast("kp-teacher-profile-session-comments-remove",b);for(var c=0;c<d.teacherCommentObj.length;c++){var e=d.teacherCommentObj[c];if(e.session_id==b.session_id){e.is_reviews_up=0;break}}for(var c=0;c<d.comment_obj_s.length;c++){var f=d.comment_obj_s[c];if(f.session_id==b.session_id){d.comment_obj_s=_.pull(d.comment_obj_s,f),f.is_reviews_up=0;break}}return KP.API.SUCC},function(a){return KP.API.ERROR})},d.$on("$destroy",function(){g.unsubscribe()}),e.getTeacherLessonHistory(C).then(function(a){d.history=a.data;var b=d.history.finished_session_list,c=[];angular.forEach(b,function(a){c.push(a.data)}),c.sort(function(a,b){return b-a}),d.max_data=c.sort(function(a,b){return b-a})[0]}),e.fetchSessionRatings(C).then(function(a){d.ratings=a.data}),KP.teacher_tag_child||e.fetchTagChild().then(function(a){a&&a.data&&(KP.teacher_tag_child=a.data)}),d.tags=[{},{t:"ST701",d:"ST711"},{t:"ST702",d:"ST713"},{t:"ST703",d:"ST715"},{t:"ST704",d:"ST717"},{t:"ST705",d:"ST719"}],d.$on("kp-teacher-profile-session-comments-vote",function(a,b){d.comment_obj_s.push(b)}),d.getChildTagItem=function(a){var b={abbr:"",full_name:"",language:"",teacher_tag_code:"",id:0};return angular.forEach(KP.teacher_tag_child,function(c,d){c.id.toString()==a.toString()&&(b=c)}),b},d.isMe=function(){return d.currentUser&&C===d.currentUser.id},d.addFavorites=function(a){return d.currentUser?void(1==a.favourite_flag?o.favourite().remove({teacher_id:a.id}).then(function(b){a.favourite_flag=0}):o.favourite().post({teacher_id:a.id}).then(function(b){a.favourite_flag=1})):void u.open()},d.playUrlObj={url:"",canplay:0};var G=function(a){function b(a){var b=/["](https:\/\/player.vimeo.com\/[^"]+)["]/i,c=b.exec(a.html);if(c&&(d.playUrlObj.url=c[1]),angular.element(".video-wrapper").length){var e=angular.element(".video-wrapper"),f=e.width(),g=f*(400/713);e.find("iframe").attr("width",f).attr("height",g)}}var c=KP.Utils.getViedoUrl(a);d.playUrlObj.url=c.url,c.canplay&&c.youtube&&"cn"!==KP.COUNTRY&&"ir"!==KP.COUNTRY?(d.playUrlObj.canplay=1,d.playUrlObj.youtube=c.youtube,d.playUrlObj.youtubeID=c.ytID):c.canplay&&c.vimeo&&"cn"!==KP.COUNTRY&&"kh"!==KP.COUNTRY&&"id"!==KP.COUNTRY&&"my"!==KP.COUNTRY&&"th"!==KP.COUNTRY&&"vn"!==KP.COUNTRY?(d.playUrlObj.canplay=1,d.playUrlObj.vimeo=1,window.vimeo_callback=b,t.createVimeoScript(c.url,"vimeo_callback")):!c.canplay&&c.youku?(d.playUrlObj.url=c.url,d.playUrlObj.canplay=0):c.canplay&&c.qiniu&&(d.playUrlObj.url=c.url,d.playUrlObj.canplay=c.canplay,d.playUrlObj.qiniu=c.qiniu,d.playUrlObj.youtube=c.youtube)};d.editTeacherStatus=!1,d.teacherInfo={isTeacher:!1,interest:"",is_student_full:0},e.getAvailability().then(function(a){d.teacherInfo.isTeacher=!0,d.teacherInfo.interest=a.data.interest,d.teacherInfo.is_student_full=a.data.is_student_full,a.data.is_student_full>1?d.teacherInfo.is_student_full=0:d.teacherInfo.is_student_full=a.data.is_student_full},function(a){d.teacherInfo.isTeacher=!1});var H=!1;d.saveFlag=H,d.vSubFlag=!0,d.saveAvailabilityStatus=function(){return H?w.getEmptyPromise():(H=!0,d.teacherInfo.interest.length<10||d.teacherInfo.interest.length>200?(H=!1,d.vSubFlag=!1,w.getEmptyPromise()):y.setTeacherProfile({interest:d.teacherInfo.interest,is_student_full:d.teacherInfo.is_student_full}).then(function(a){return d.editTeacherStatus=!1,d.teacher.teacher_info_obj.is_student_full=d.teacherInfo.is_student_full,d.teacher.teacher_info_obj.interest=d.teacherInfo.interest,d.vSubFlag=!0,H=!1,KP.API.SUCC},function(a){return d.vSubFlag=!0,H=!1,KP.API.ERROR}))}}]).controller("EditTeacherProfileAvailabilityCtrl",["$scope","Teacher","$anchorScroll","$stateParams","$log","$modal","Account","CourseListModal","EmptyPromise",function(a,b,c,d,e,f,g,h,i){a.teacherInfo={isTeacher:!1,interest:"",is_student_full:0},b.getAvailability().then(function(b){a.teacherInfo.isTeacher=!0,a.teacherInfo.interest=b.data.interest,a.teacherInfo.is_student_full=b.data.is_student_full},function(b){a.teacherInfo.isTeacher=!1});var j=!1;a.saveFlag=j,a.vSubFlag=!0,a.save=function(){return j?i.getEmptyPromise():(j=!0,a.teacherInfo.interest.length<10||a.teacherInfo.interest.length>200?(j=!1,a.vSubFlag=!1,i.getEmptyPromise()):g.setTeacherProfile({interest:a.teacherInfo.interest,is_student_full:a.teacherInfo.is_student_full}).then(function(b){return a.vSubFlag=!0,j=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,j=!1,KP.API.ERROR}))}}]).controller("EditTeacherProfileCourseCtrl",["$scope","Teacher","$anchorScroll","$stateParams","$log","$modal","Account","CourseListModal","EmptyPromise",function(a,b,c,d,e,f,g,h,i){a.coursesInfo={is_add_pro:0,pro_course_obj_s:null,tutor_course_obj_s:null},b.getCoursesList().then(function(b){a.coursesInfo.is_add_pro=b.data.is_add_pro,a.coursesInfo.has_trial=b.data.has_trial,a.coursesInfo.trial_price_usd=b.data.trial_price_usd,a.coursesInfo.is_tutor=b.data.is_tutor,a.coursesInfo.pro_course_obj_s=b.data.pro_course_obj_s,a.coursesInfo.tutor_course_obj_s=b.data.tutor_course_obj_s,a.coursesInfo.instant_tutoring_status=b.data.instant_tutoring_status,a.coursesInfo.instant_tutoring_price_usd=b.data.instant_tutoring_price_usd,a.coursesInfo.is_available_instant_tutoring=b.data.is_available_instant_tutoring,a.coursesInfo.session_completed_num=b.data.session_completed_num,a.coursesInfo.instant_tutoring_price_old_usd=b.data.instant_tutoring_price_usd},function(b){a.coursesInfo.is_add_pro=0})}]).controller("TeacherApplyCtrl",["$scope","$sce","$translate","$state","$timeout","Teacher","TeacherApplyService",function(a,b,c,d,e,f,g){var h=c.instant;a.html=function(a){var c="";return angular.forEach(a,function(a){c+=h(a)}),c?b.trustAsHtml(c):""};var i;a.$on("$stateChangeSuccess",function(b,c){var e=c.name;"teacherApply.already"==e?g.getLoginPromise().then(function(b){b?b.apply_status>7?1==b.is_pro?a.is_applying_pro=1:1==b.is_tutor?a.is_applying_pro=0:d.go("apply"):d.go("apply"):d.go("landing")}):"apply"!=e&&g.applyStateRedirect().then(function(b){b||g.getUserApplyObject().then(function(b){b?("teacherApply.step1a"==e?b.apply_type=1:"teacherApply.step1b"==e&&(b.apply_type=0),i=b,g.setUserApplyObject(b),a.userApplyObject=i):d.go("landing")})})}),a.nextStep=function(){g.applyStateRedirect().then(function(a){a||d.go("teacherApply.step1")})},a.nextTutorStep=function(){d.go("teacherApply.step1b")},a.nextProStep=function(){d.go("teacherApply.step1a")},a.applyStep1=function(){return f.teacherApplyStep1({apply_type:i.apply_type}).then(function(a){g.setUserApplyObject(i).then(function(a){a&&d.go("teacherApply.step2")})})},a.toggleQuestions=function(){a.show_questions=!a.show_questions,e(function(){var a=angular.element(window).scrollTop()+angular.element(window).height();angular.element(window).width()<768&&a<angular.element("footer").offset().top?(angular.element(".hello_box_float").css({visibility:"visible"}),angular.element(".hello_box_static").css("visibility","hidden")):(angular.element(".hello_box_static").removeAttr("style"),angular.element(".hello_box_float").removeAttr("style"))},50)}}]).controller("TeacherApplyStep2Ctrl",["$scope","$rootScope","$sce","$translate","$state","$modal","TeacherApplyService","User","Teacher","$filter",function(a,b,c,d,e,f,g,h,i,j){
var k=d.instant,l={s:0,first_name:"",last_name:"",nickname:"",origin_country_id:"",origin_city_id:"",origin_city_name:"",living_country_id:"",living_city_id:"",living_city_name:"",im_type:1,im_account:"",pay_first_name:"",pay_last_name:"",pay_address:"",pay_email:"",pay_phone:"",pay_country_code:"",photo_checkbox1:"",photo_checkbox2:"",photo_checkbox3:"",photo_checkbox4:"",photo_checkbox5:"",pay_city:"",pay_state:"",pay_country_id:"",pay_zipcode:""};a.clearNum=function(a,b){a[b]&&(a[b]=a[b].replace(/\D/g,""))},a.SaveObj=l;var m=angular.copy(KP.COUNTRRY_ARR);angular.forEach(m,function(a){a.name=k(a.l)}),a.countries=m,a.filter={fcitys:[],lcitys:[]},a.changCity=function(a,b){n(a,[]),""!=b&&h.getCitys().get({country_id:b}).then(function(b){n(a,b.data)})};var n=function(b,c){c.push({id:"ZZ00000",native_name:k("C0087"),english_name:"other"}),0==b?a.filter.fcitys=c:a.filter.lcitys=c};a.editAvatar=function(){var b=f.open({templateUrl:"/views/user/directives/user.avatar.edit.html",controller:"EditUserAvatar",resolve:{userObject:function(){return a.user}}});b.result.then(function(b){angular.element("#user_avatar")[0].src=b.avatar_url,a.user.avatar_file_name||(a.user.avatar_file_name=a.user.textid)},function(){})},a.editLangage=function(){h.getEditProfile().then(function(b){scope=a.$new(!0);var c=b.data,d=[],e=[];angular.forEach(c.language_obj_s,function(a){a.is_learning?(a.language==c.learning_language?a.is_primary=1:a.is_primary=0,a.level||(a.level=0),d.push(a)):7==a.level?e.push(a.language):(a.is_primary=0,d.push(a))}),c.speaks=e,c.learns=d,scope.user=c,scope.isModal=1;var g=f.open({scope:scope,size:"lg",templateUrl:"/views/user/directives/language.html",controller:"EditUserLanguage"});g.result.then(function(b){var c=[];angular.forEach(b.language,function(a,d){c.push({language:a,level:b.level[d],is_learning:b.is_learning[d]})}),a.user.language_obj_s=c},function(){})})},a.changeImType=function(){switch(parseInt(l.im_type)){case 1:l.im_account=l.skype_account?l.skype_account:"";break;case 6:l.im_account=l.google_talk_account?l.google_talk_account:"";break;case 7:l.im_account=l.qq_account?l.qq_account:"";break;case 8:l.im_account=l.face_time_account?l.face_time_account:"";break;default:l.im_account=l.skype_account?l.skype_account:""}},a.setImTypeValue=function(a){switch(parseInt(a.im_type)){case 1:a.skype_account=a.im_account;break;case 6:a.google_talk_account=a.im_account;break;case 7:a.qq_account=a.im_account;break;case 8:a.face_time_account=a.im_account}};var o=function(){l.skype_account?(l.im_type="1",l.im_account=l.skype_account?l.skype_account:""):l.google_talk_account?(l.im_type="6",l.im_account=l.google_talk_account?l.google_talk_account:""):l.qq_account?(l.im_type="7",l.im_account=l.qq_account?l.qq_account:""):l.face_time_account?(l.im_type="8",l.im_account=l.face_time_account?l.face_time_account:""):(l.im_type="1",l.im_account="")},p=function(a,b){1==a&&(b?e.go("teacherApply.step1a"):e.go("teacherApply.step1b"))};g.applyStateRedirect().then(function(b){b?e.go(b):g.getUserApplyObject().then(function(b){if(a.user=a.currentUser,b)if(b.step2){if(b.apply_status&&(p(b.apply_status,b.apply_type),b.apply_status<2))return;angular.extend(l,b.step2),l.apply_type=b.apply_type,a.is_applying_pro=b.apply_type,""==l.im_account.trim()&&o(),l.origin_country_id&&a.changCity(0,l.origin_country_id),l.living_country_id&&a.changCity(1,l.living_country_id)}else i.teacherApplyStep2Get().then(function(c){if(c.data){if(c.data.teacher_obj){if(p(c.data.teacher_obj.apply_status,c.data.teacher_obj.is_applying_pro),c.data.teacher_obj.apply_status<2)return;b.apply_type=c.data.teacher_obj.is_applying_pro,b.apply_status=c.data.teacher_obj.apply_status}angular.extend(l,c.data.user_obj),delete c.data.user_detail_obj.user_id,angular.extend(l,c.data.user_detail_obj),c.data.payment_detail_obj?(l.pay_address=c.data.payment_detail_obj.address,delete c.data.payment_detail_obj.id,angular.forEach(c.data.payment_detail_obj,function(a,b){"country"==b?c.data.payment_detail_obj[b]?l["pay_"+b+"_id"]=c.data.payment_detail_obj[b]:l["pay_"+b+"_id"]="test teacher apply pay id":("city"===b||"state"===b||"zipcode"===b)&&(c.data.payment_detail_obj[b]?l["pay_"+b]=c.data.payment_detail_obj[b]:l["pay_"+b]="test teacher apply pay id")})):(l.pay_city="test teacher apply pay city",l.pay_state="test teacher apply pay state",l.pay_country_id="test teacher apply pay country id",l.pay_zipcode="test teacher apply pay zipcode"),b.step2={},angular.copy(l,b.step2),delete b.step2.s,g.setUserApplyObject(b),l.apply_type=b.apply_type,a.is_applying_pro=b.apply_type,o(),l.origin_country_id&&a.changCity(0,l.origin_country_id),l.living_country_id&&a.changCity(1,l.living_country_id)}});else e.go("dashboard")})});var q=0;a.save=function(c){if(!q){if(q=1,l.s=1,c.$invalid)return g.focusFormObj(c),q=0,void a.$digest();b.currentUser&&(a.SaveObj.pay_email=b.currentUser.email),a.SaveObj.pay_first_name=a.SaveObj.first_name,a.SaveObj.pay_last_name=a.SaveObj.last_name,l.pay_city||(l.pay_city="test teacher apply pay city"),l.pay_state||(l.pay_state="test teacher apply pay state"),l.pay_country_id||(l.pay_country_id="test teacher apply pay country id"),l.pay_zipcode||(l.pay_zipcode="test teacher apply pay zipcode");var d={};return angular.extend(d,l),delete d.s,delete d.skype_account,delete d.google_talk_account,delete d.face_time_account,delete d.qq_account,i.teacherApplyStep2Post(d).then(function(b){return g.getUserApplyObject().then(function(b){return b&&(d={},angular.extend(d,l),delete d.s,a.setImTypeValue(d),b.step2=d,g.setUserApplyObject(b)),e.go("teacherApply.step3"),KP.API.SUCC})})}}}]).controller("TeacherApplyStep3Ctrl",["$scope","$rootScope","$sce","$translate","$state","$modal","$upload","TeacherApplyService","Teacher","alertModal","$timeout","teacher_material_json",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return("application/pdf"==a.type.toLowerCase()||"application/msword"==a.type.toLowerCase())&&a.size<8388608?!0:void 0}var n=d.instant,o={s:0,teacher_resume_is_public:1,has_video_class:0,interest:"",public_checkbox:1,video_checkbox1:"",video_checkbox2:"",video_checkbox3:"",video_checkbox4:"",video_checkbox5:"",about_me:"",about_teacher:"",teaching_style:"",teacher_material_json:[],intro:"",introduction:"",video_url:"",resume_url:""};a.pageName="step3",a.params={},a.SaveObj=o,a.tags=[{t:"ST701",d:"ST711",v:1,checked:!1},{t:"ST702",d:"ST713",v:2,checked:!1},{t:"ST703",d:"ST715",v:3,checked:!1},{t:"ST704",d:"ST717",v:4,checked:!1},{t:"ST705",d:"ST719",v:5,checked:!1}],a.teachingSpecialities=angular.copy(l),a.selectedTags=[];var p=function(b,c){if("add"==b&&-1==a.selectedTags.indexOf(c)&&a.selectedTags.push(c),"remove"==b&&-1!=a.selectedTags.indexOf(c)){var d=a.selectedTags.indexOf(c);a.selectedTags.splice(d,1)}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";p(d,b)};var q=function(b){var c=b.slice(1,-1);angular.forEach(a.teachingSpecialities,function(a){angular.forEach(c.split(","),function(b){a.id==b&&(a.check=!0)})})},r=function(){var b=[];angular.forEach(KP.teacher_tag_child,function(c,d){angular.forEach(a.user.language_obj_s,function(a){return c.language==a.language?(c.checked=!1,b.push(c),!0):void 0})}),a.childTags=b},s=function(){KP.teacher_tag_child?r():i.fetchTagChild().then(function(a){a&&a.data&&(KP.teacher_tag_child=a.data,r())})},t=function(b){var c=b.trim().split(",");angular.forEach(c,function(b){angular.forEach(a.tags,function(a){return b==a.v?(a.checked=!0,!0):void 0})})},u=0,v=function(b){if(!a.childTags||0==a.childTags.length){if(u>20)return;k(function(){v(b)},2e3)}var c=b.trim().split(",");angular.forEach(c,function(b){angular.forEach(a.childTags,function(a){return b==a.id?(a.checked=!0,!0):void 0})})},w=function(){var b=[];return angular.forEach(a.tags,function(a){a.checked&&b.push(a.v)}),b.join(",")},x=function(){var b=[];return angular.forEach(a.childTags,function(a){a.checked&&b.push(a.id)}),b.join(",")},y=function(b){angular.forEach(a.teachingSpecialities,function(a){angular.forEach(b,function(b){a.id==b&&(a.check=!0)})})};a.getSelTeacherIntroduction=function(){return!a.SaveObj.about_me||a.SaveObj.about_me.length<10||a.SaveObj.about_me.length>700?!1:!a.SaveObj.about_teacher||a.SaveObj.about_teacher.length>500||a.SaveObj.about_teacher.length<10?!1:!a.SaveObj.teaching_style||a.SaveObj.teaching_style.length>500||a.SaveObj.teaching_style.length<10?!1:a.checkMaterial()?!0:!1},a.checkMaterial=function(){var b=[];return angular.forEach(a.teachingSpecialities,function(a){a.check&&b.push(a.id)}),0===b.length?!1:(a.SaveObj.teacher_material_json=b,!0)},a.eduExpCer={experience_obj_s:[],education_obj_s:[],certificate_obj_s:[]},a.addExperience=function(){var b=f.open({templateUrl:"/views/user/directives/experience.model.html",controller:"AddUserExperience",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,city:b.city,start_year:b.start_year,user_id:a.currentUser.id,description:b.description,country:b.country_id,company:b.company,job:b.job,end_year:b.end_year,id:b.id};a.eduExpCer.experience_obj_s.push(c),z()},function(){})},a.addEducation=function(){var b=f.open({templateUrl:"/views/user/directives/education.model.html",controller:"AddUserEducation",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,start_year:b.start_year,user_id:a.currentUser.id,description:b.description,level:b.level,institution:b.institution,major:b.major,end_year:b.end_year,id:b.id,file_ext:b.file_ext};a.eduExpCer.education_obj_s.push(c),z()},function(){})},a.addCertificate=function(){var b=f.open({templateUrl:"/views/user/directives/certificate.model.html",controller:"AddUserCertificate",resolve:{eduExpCer:function(){return a.eduExpCer}}});b.result.then(function(b){var c={status:0,user_id:a.currentUser.id,description:b.description,institution:b.institution,certificate:b.certificate,end_year:b.end_year,id:b.id,file_ext:b.file_ext};a.eduExpCer.certificate_obj_s.push(c),z()},function(){})},a.moveExperience=function(b,c){j.open(a,n("C1008"),n("C0050")).then(function(d){i.moveExperience(b.id).then(function(b){a.eduExpCer.experience_obj_s.splice(c,1),z(),d.$close()},function(a){d.$close()})})},a.moveEducation=function(b,c){j.open(a,n("C1008"),n("C0050")).then(function(d){i.moveEducation(b.id).then(function(b){a.eduExpCer.education_obj_s.splice(c,1),z(),d.$close()},function(a){d.$close()})})},a.moveCertificate=function(b,c){j.open(a,n("C1008"),n("C0050")).then(function(d){i.moveCertificate(b.id).then(function(b){a.eduExpCer.certificate_obj_s.splice(c,1),z(),d.$close()},function(a){d.$close()})})};var z=function(){h.getUserApplyObject().then(function(b){b&&b.step3&&(b.eduExpCer={},angular.extend(b.eduExpCer,a.eduExpCer),h.setUserApplyObject(b))})},A=function(a,b){2==a?e.go("teacherApply.step2"):1==a&&(b?e.go("teacherApply.step1a"):e.go("teacherApply.step1b"))},B=0;"teacherApply.tutortopro"==e.$current.self.name&&(B=1),a.tutorToPro=B,h.applyStateRedirect().then(function(b){b?e.go(b):h.getUserApplyObject().then(function(b){if(a.user=a.currentUser,s(),1==B&&b&&(b={}),b){if(b.step3){if(b.step3.about_me=b.step3.about_me||"",b.step3.about_teacher=b.step3.about_teacher||"",b.step3.teaching_style=b.step3.teaching_style||"",angular.extend(o,b.step3),angular.extend(a.eduExpCer,b.eduExpCer),A(b.apply_status),b.apply_status<3)return;t(b.teacher_tags),b.step3.teacher_material_json&&y(b.step3.teacher_material_json),v(b.teacher_child_tags)}else i.teacherApplyStep3Get().then(function(c){if(c.data){if(c.data.teacher_info_obj){if(A(c.data.teacher_info_obj.apply_status,c.data.teacher_info_obj.is_applying_pro),c.data.teacher_info_obj.apply_status<3)return;b.apply_type=c.data.teacher_info_obj.is_applying_pro,b.apply_status=c.data.teacher_info_obj.apply_status,delete c.data.teacher_info_obj.is_applying_pro,delete c.data.teacher_info_obj.apply_status,delete c.data.teacher_info_obj.user_id,b.teacher_tags=c.data.teacher_info_obj.teacher_tags,b.teacher_child_tags=c.data.teacher_info_obj.teacher_child_tags,t(b.teacher_tags),v(b.teacher_child_tags),delete c.data.teacher_info_obj.teacher_tags,delete c.data.teacher_info_obj.teacher_child_tags,c.data.teacher_info_obj.teacher_material_json&&q(c.data.teacher_info_obj.teacher_material_json),c.data.teacher_info_obj.about_teacher=c.data.teacher_info_obj.about_teacher||"",c.data.teacher_info_obj.about_me=c.data.teacher_info_obj.about_me||"",c.data.teacher_info_obj.teaching_style=c.data.teacher_info_obj.teaching_style||"",c.data.teacher_info_obj.intro=c.data.teacher_info_obj.intro||"test teacher apply intro",c.data.teacher_info_obj.introduction=c.data.teacher_info_obj.introduction||"test teacher apply introduction",c.data.teacher_info_obj.resume_url=c.data.teacher_info_obj.resume_url||"test teacher apply resume_url",c.data.teacher_info_obj.video_url=c.data.teacher_info_obj.video_url||"test teacher apply video_url",angular.extend(o,c.data.teacher_info_obj)}o.teacher_resume_is_public=c.data.resume_permission_obj?1:0,a.eduExpCer.certificate_obj_s=c.data.teacher_certificate_obj_s?c.data.teacher_certificate_obj_s:[],a.eduExpCer.education_obj_s=c.data.teacher_education_obj_s?c.data.teacher_education_obj_s:[],a.eduExpCer.experience_obj_s=c.data.teacher_experience_obj_s?c.data.teacher_experience_obj_s:[],b.eduExpCer=a.eduExpCer,B||(b.step3={},angular.copy(o,b.step3),delete b.step3.s,h.setUserApplyObject(b))}});B?a.is_applying_pro=1:a.is_applying_pro=b.apply_type}else e.go("dashboard")})}),a.$watch("SaveObj.video_url",function(){"test teacher apply video_url"==a.SaveObj.video_url&&(a.SaveObj.video_url="")});var C=0;a.save=function(c){if(!C&&(o.s=1,b.nowUploadSuccess&&a.getSelTeacherIntroduction())){if(c.$invalid)return h.focusFormObj(c),void(C=0);var d={};angular.extend(d,o),d.teacher_tags=w(),d.teacher_child_tags=x(),d.teacher_material_json=angular.toJson(d.teacher_material_json),d.video_url=d.video_url||"test teacher apply video_url",delete d.s;var f=a.params.files;return f&&f.length?D(f[0],d):i.teacherApplyStep3Post(d).then(function(b){return h.getUserApplyObject().then(function(b){return b&&(b.apply_status=3,b.eduExpCer=a.eduExpCer,b.teacher_tags=d.teacher_tags,b.teacher_child_tags=d.teacher_child_tags,d={},angular.extend(d,o),delete d.s,b.step3=d,h.setUserApplyObject(b)),B?a.isSucc=1:e.go("teacherApply.step4"),KP.API.SUCC})})}};var D=function(b,c){return g.upload({url:KP.API.URL+"teacher/apply/step3?{0}={1}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN]),fields:c,file:b,fileFormDataName:"resume_file"}).then(function(b){return h.getUserApplyObject().then(function(b){return b&&(b.apply_status=3,b.eduExpCer=a.eduExpCer,b.teacher_tags=c.teacher_tags,b.teacher_child_tags=c.teacher_child_tags,c={},angular.extend(c,o),delete c.s,b.step3=c,h.setUserApplyObject(b)),B?a.isSucc=1:e.go("teacherApply.step4"),C=1,KP.API.SUCC})},function(a){return C=0,KP.API.ERROR})};a.checkExperience=function(){return a.eduExpCer.experience_obj_s.length>0},a.checkEducation=function(){return a.eduExpCer.education_obj_s.length>0},a.checkCertificate=function(){return a.eduExpCer.certificate_obj_s.length>0},a.checkFileJl=function(){var b=a.params.files;return b&&b.length&&b[0]?m(b[0]):!0};var E=function(){a.experience=a.eduExpCer.experience_obj_s.length,a.education=a.eduExpCer.education_obj_s.length,a.certificate=a.eduExpCer.certificate_obj_s.length,a.file_jl=a.params.files?a.params.files.length:0,k(E,500)};E()}]).controller("TeacherApplyStep4Ctrl",["$scope","$sce","$translate","$state","$modal","TeacherApplyService","User","Teacher",function(a,b,c,d,e,f,g,h){var i=(c.instant,{s:0,first_name:"",last_name:""});a.SaveObj=i;var j={first_name:"",last_name:""},k=function(a,b){3==a?d.go("teacherApply.step3"):2==a?d.go("teacherApply.step2"):1==a&&(b?d.go("teacherApply.step1a"):d.go("teacherApply.step1b"))};f.applyStateRedirect().then(function(b){b?d.go(b):f.getUserApplyObject().then(function(b){h.teacherApplyStep4Get().then(function(b){if(b.data){if(k(b.data.teacher_info_obj.apply_status,b.data.teacher_info_obj.is_applying_pro),b.data.teacher_info_obj.apply_status<4)return;j.first_name=b.data.account_detail_obj.first_name,j.last_name=b.data.account_detail_obj.last_name,a.is_applying_pro=b.data.teacher_info_obj.is_applying_pro,a.checkObj=j}})})});var l=0;a.save=function(b){if(!l){if(l=1,i.s=1,a.$digest(),b.$invalid)return f.focusFormObj(b),void(l=0);var c={};return angular.extend(c,i),delete c.s,h.teacherApplyStep4Post(c).then(function(a){return d.go("teacherApply.step5"),KP.API.SUCC})}},a.checkFirstName=function(){return i.first_name==j.first_name},a.checkLastName=function(){return i.last_name==j.last_name}}]).service("TeacherApplyService",["$rootScope","$q","$timeout","$state","$location","$anchorScroll","localStorageService",function(a,b,c,d,e,f,g){this.getUserApplyObject=function(){return this.getLoginPromise().then(function(a){if(a){var b=g.get("tas_"+a.id);return b||(b={}),b}return 0})},this.setUserApplyObject=function(a){return this.getLoginPromise().then(function(b){return b?(g.set("tas_"+b.id,a),1):0})},this.applyStateRedirect=function(){return this.getLoginPromise().then(function(b){var c;return b?a.currentUser.apply_status>7&&"teacherApply.tutortopro"!=d.$current.self.name?c="teacherApply.already":5==a.currentUser.apply_status&&(c="teacherApply.step5"):(c="signup",d.go("signup",{teacherOnboarding:"1"})),c&&"signup"!=c&&d.go(c),c})},this.getLoginPromise=function(){var d=b.defer(),e=d.promise,f=0,h=g.get(KP.SERIALIZE.TOKEN),i=function(){f++,10>f&&!a.currentUser&&h?c(i,500):a.currentUser?d.resolve(a.currentUser):d.resolve(0)};return i(),e},this.getLanguagePromise=function(){var d=b.defer(),e=d.promise,f=0,h=g.get(KP.SERIALIZE.TOKEN),i=function(){f++,10>f&&void 0==a.currentUser.language_obj_s&&h?c(i,500):a.currentUser.language_obj_s?d.resolve(a.currentUser.language_obj_s):d.resolve(0)};return i(),e},this.focusFormObj=function(a){var b=$('ng-form[name="'+a.$name+'"]');0==b.length&&(b=$('form[name="'+a.$name+'"]'));for(var c in a)if("$"!=c.substring(0,1)&&a[c].$invalid){var d=b.find('[name="'+c+'"]');"hidden"==d.attr("type")?(f.yOffset=125,e.hash(a.$name+"_"+c),f()):b.find('[name="'+c+'"]').focus();break}},this.sessionFocusFormObj=function(a){var b=$('ng-form[name="'+a.$name+'"]');0==b.length&&(b=$('form[name="'+a.$name+'"]'));for(var d in a)if("$"!=d.substring(0,1)&&a[d].$invalid){c(function(){e.hash(a.$name+"_"+d),f()},100);break}}}]).directive("ensureSucc",function(){return{require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngModel,function(){a[c.ensureSucc]&&angular.isFunction(a[c.ensureSucc])&&a[c.ensureSucc]()?d.$setValidity("kpOther",!0):d.$setValidity("kpOther",!1)})}}}),angular.module("kp.teacher").service("Teacher",["Restangular",function(a){var b=a.service("teacher");this.profile=function(a){return b.one(a).get()},this.fetchLatestFeedback=function(b,c){return a.one("teacher/"+b+"/latest-feedbacks").get({textid:c})},this.getLatestSessions=function(b,c,d){return a.one("teacher/"+b+"/latest-sessionlist").get({textid:c,page:d,page_size:5})},this.getSessionsWithStudent=function(b,c,d,e){return a.one("teacher/"+b+"/sessionlist-by-teacher-with-student").get({textid:c,page:e,student_textid:d})},this.getTeacherLessonHistory=function(b){return a.one("teacher/teacher-profile-statistics").get({teacher_id:b})},this.fetchSessionRatings=function(b){return a.one("teacher/"+b+"/session-ratings").get()},this.fetchTagChild=function(){return a.one("teacher/child-tags").get()},this.getStatistics=function(){return a.one("teachers/statistics")},this.getTeachers=function(){return a.one("teachers")},this.getTeachersV2=function(){return a.one("teachersv2")},this.getRandomTeacherList=function(){return a.one("teacher/random-list")},this.getTeachLans=function(){return b.one("languages")},this.setTags=function(a){return b.one("set").all("tags").post(a)},this.getEduExpCer=function(){return b.one("edu-exp-cer").get()},this.addExperience=function(a){return b.one("").all("experience").post(a)},this.moveExperience=function(a){return b.one("experience").remove({id:a})},this.moveEducation=function(a){return b.one("education").remove({id:a})},this.moveCertificate=function(a){return b.one("certificate").remove({id:a})},this.getWeekSchedule=function(){return b.one("set").one("weekschedule").get()},this.setWeekSchedule=function(a){return b.one("set").all("weekschedule").post(a)},this.moveWeekSchedule=function(a){return b.one("set").one("weekschedule").remove({id:a})},this.getExtraSchedule=function(a){return b.one("set").one("extraschedule").get(a)},this.setExtraSchedule=function(a){return b.one("set").all("extraschedule").post(a)},this.getAvailability=function(){return b.one("availability").get()},this.getCoursesList=function(){return a.one("course").one("setting").get()},this.setCourses=function(b){return a.one("course").all("setting").post(b)},this.editCourses=function(b){return a.one("course").all(b.id).post(b)},this.delCourses=function(b){return a.one("course").all(b).remove({id:b})},this.instantTutoring=function(a){return b.one("apply").all("instant-tutoring").post(a)},this.setTeacherProfileSurvey=function(){return b.one("teacher-profile-survey").post("")},this.getTeacherProfileSurvey=function(){return b.one("teacher-profile-survey").get()},this.teacherApplyStep1=function(a){return b.one("apply").all("step1").post(a)},this.teacherApplyStep1Get=function(){return b.one("apply").one("step1").get()},this.teacherApplyStep2Post=function(a){return b.one("apply").all("step2").post(a)},this.teacherApplyStep2Get=function(){return b.one("apply").one("step2").get()},this.teacherApplyStep3Post=function(a){return b.one("apply").all("step3").post(a)},this.teacherApplyStep3Get=function(){return b.one("apply").one("step3").get()},this.teacherApplyStep4Post=function(a){return b.one("apply").all("step4").post(a)},this.teacherApplyStep4Get=function(){return b.one("apply").one("step4").get()},this.getTeacherState=function(){return b.one("set").one("apply_status-done").get()},this.setTeacherState=function(){return b.one("set").all("apply_status-done").post({})},this.setTeacherTag=function(){return b.all("personaltag")},this.getTeacherTag=function(){return b.one("personaltag")},this.getTeacherComment=function(){return b.one("reviews").one("upall")},this.TeacherUpchoose=function(){return b.one("reviews").all("upchoose")},this.TeacherUpcancel=function(){return b.one("reviews").all("upcancel")},this.getTeacherCommentFilter=function(){return b.one("comment").one("filter")},this.getComment=function(){return b.one("comment")},this.postHelpfulMark=function(){return b.one("comment").all("mark")},this.getCommentMore=function(){return b.one("comment").one("more")},this.getTeacherDashboardStat=function(){return b.one("dashboard").one("statistics")}}]),angular.module("kp.teacher").filter("teacherPrice",function(){return function(a){var b=(a.max_price_usd/100).toFixed(2),c=(a.min_price_usd/100).toFixed(2),d=[];return c!==b?(d.push(c),d.push(b)):d.push(b),d.join(" - ")}}).filter("teacherPriceSup",function(){return function(a){var b=(a.max_price_usd/100).toFixed(2),c=(a.min_price_usd/100).toFixed(2),d=b.toString().split(".")[0],e=b.toString().split(".")[1],f=c.toString().split(".")[0],g=c.toString().split(".")[1],h=("."+e).sup(),i=("."+g).sup(),j=d+""+h,k=f+""+i,l=[];return c!==b?(l.push(k),l.push(j)):l.push(j),l.join(" - ")}}).filter("teacherPriceForUser",function(){return function(a,b){var c=(a.max_price*b.currency_rate).toFixed(2),d=(a.min_price*b.currency_rate).toFixed(2),e=[];return d!==c?(e.push(d),e.push(c)):e.push(c),"≈ "+e.join("-")+" "+b.currency}}).filter("speakLanguage",["$sce","$translate",function(a,b){return function(c){if(c&&c.user_language_obj_s){var d=b.instant("C0000")+":",e=_.sortBy(c.user_language_obj_s,"age").reverse();return _(e).forEach(function(a){d+=a.language,d+="<em class='lv lv"+a.level+"' title='"+a.level+"' ></em>"}),a.trustAsHtml(d)}return""}}]).filter("teachLanguage",function(){return function(a){return a&&a.user_language_obj_s?_.pluck(_.filter(a.user_language_obj_s,"is_teaching"),"language").join(","):""}}).filter("learnLanguage",function(){return function(a){return a&&a.user_language_obj_s?_.pluck(_.filter(a.user_language_obj_s,"is_learning"),"language").join(","):""}}).filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";"undefined"==typeof b&&(b=1);var c=["bytes","KB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}}).filter("teacherTime",function(){return function(a){var b=a.match(/\d+/g);return a?b[0]/60+" - "+b[1]/60:a}}).filter("teacherWeekday",function(){return function(a){var b=null;switch(a){case"0":b="TP018";break;case"1":b="TP019";break;case"2":b="TP020";break;case"3":b="TP021";break;case"4":b="TP022";break;case"5":b="TP023";break;case"6":b="TP017"}return b}}).filter("teacherType",function(){return function(a){var b=null;switch(Number(a)){case 1:b="MH504";break;case 2:b="MH506"}return b}}).filter("teachLevel",function(){return function(a){var b=null;switch(a){case"5,6":b="C0905";break;case"7":b="C0023";break;default:b="C0024"}return b}}).filter("trustAsHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("kp.teacher").directive("kpTeacherMeta",["$location","$filter","kpTitle",function(a,b,c){return{restrict:"E",scope:{teacher:"="},link:function(d,e,f){function g(){var e=d.teacher,f=e.language_obj_s,g=_.filter(f,{is_teaching:1}),h=angular.element,i='<meta property="{0}" content="{1}">',j=document.head,k=e.id,l=e.teacher_info_obj.validate_time,m="profile",n=_.map(f,function(a){return a.language.translate()}).join(","),o=_.map(g,function(a){return a.language.translate()}).join(","),p=[],q=c.title(),r=a.absUrl(),s=e.teacher_info_obj.intro,t=b("avatar")(e,150);e.living_city_text_&&p.push(e.living_city_text_),e.living_country_id&&p.push(e.living_country_id.translate()),p=p.join(","),h(j).append(i.format("bt:id","{'teacher-id:{0}'}".format(k))),h(j).append(i.format("bt:pubDate",l)),h(j).append(i.format("bt:skills",n)),h(j).append(i.format("bt:teachingLanguage",o)),h(j).append(i.format("bt:location",p)),h(j).append(i.format("og:type",m)),h(j).append(i.format("og:url",r)),h(j).append(i.format("og:title",q)),h(j).append(i.format("og:description",s)),h(j).append(i.format("og:image",t))}var h=!1;d.$watch("teacher",function(a){angular.isObject(a)&&!h&&(g(),h=!0)}),d.$on("$destroy",function(){angular.element("meta[property^=og]").remove(),angular.element("meta[property^=bt]").remove()})}}}]),angular.module("kp.teacher").constant("OpenedClass",{name:"filters_open_js"}).directive("openFilter",["OpenedClass",function(a){return{restrict:"A",scope:{filter:"@openFilter"},link:function(b,c){c.on("click",function(){var c=".filters_"+b.filter+"_js";angular.element("body").addClass("filters_overlay_open"),angular.element(".filter_item").removeClass("filter_item_open"),angular.element(".filter_option_title").removeClass("filter_option_title_select"),angular.element(c).addClass(a.name).find(".filter_item").addClass("filter_item_open"),angular.element(c).find(".filter_option_title").addClass("filter_option_title_select"),angular.element(".filters_overlay").addClass("filters_overlay_show"),angular.element(".filters_more").show(),angular.element(".filters_radio_more").hide()})}}}]).directive("closeAllFilters",["$document","OpenedClass",function(a,b){return{restrict:"A",scope:{callback:"&"},link:function(c){var d=function(d){a.width()>1024&&(angular.element(".filters_hourly_rate").has(d.target).length||angular.element(".filters_hourlyRate_js").has(d.target).length||!angular.element(".filters_overlay_show").length||c.callback(),angular.element("."+b.name).has(d.target).length||angular.element("."+b.name)[0]===d.target||(angular.element("body").removeClass("filters_overlay_open"),angular.element(".filter_item").removeClass("filter_item_open"),angular.element(".filter_option_title").removeClass("filter_option_title_select"),angular.element(".filters_overlay").removeClass("filters_overlay_show")))};a.on("click",d),c.$on("$destroy",function(){a.off("click",d)})}}}]).directive("switchAvailabilityTab",function(){return{restrict:"A",scope:{tab:"@switchAvailabilityTab",index:"@"},link:function(a,b){"0"===a.index&&(b.addClass("filters_availability_tab_select"),b.parent().siblings(".availability_tab").eq(0).addClass("availability_tab_show")),b.on("click",function(){var b=".availability_tab_"+a.tab+"_title_js",c=".availability_tab_"+a.tab+"_js";angular.element(".filters_availability_tab_select").removeClass("filters_availability_tab_select"),angular.element(".availability_tab").removeClass("availability_tab_show"),angular.element(b).addClass("filters_availability_tab_select"),angular.element(c).addClass("availability_tab_show")})}}}).directive("showRadioMore",function(){return{restrict:"E",scope:{texts:"@"},transclude:!0,template:'<img\n  width="16"\n  height="16"\n  class="filters_more"\n  ng-click="showMore($event)"\n  src="static/images/icons/icon-plus.svg" />\n<div class="filters_radio_more">{{texts}}</div>',link:function(a,b){a.showMore=function(){b.find("img").hide(),b.find(".filters_radio_more").show()}}}}).directive("openMobileFilter",function(){return{restrict:"A",scope:{setMobileFilters:"&"},link:function(a,b){b.on("click",function(){angular.element("body").addClass("filters_overlay_open"),angular.element(".filters_overlay").addClass("filters_overlay_show"),angular.element(".filters-mobile-js").addClass("filters-mobile-open"),angular.element(".filters_more").show(),angular.element(".filters_radio_more").hide(),a.setMobileFilters()})}}}).directive("closeMobileFilter",function(){return{restrict:"A",scope:{setFilters:"&"},link:function(a,b){b.on("click",function(){angular.element("body").removeClass("filters_overlay_open"),angular.element(".filters_overlay").removeClass("filters_overlay_show"),angular.element(".filters-mobile-js").removeClass("filters-mobile-open")})}}}).directive("filterResizeListener",["$window","$document",function(a,b){return{restrict:"E",link:function(c){var d=b.width(),e=function(){992>d&&b.width()>991&&(angular.element("body").removeClass("filters_overlay_open"),angular.element(".filters_overlay").removeClass("filters_overlay_show"),angular.element(".filters-mobile-js").removeClass("filters-mobile-open")),d>991&&b.width()<992&&(angular.element(".filter_item").removeClass("filter_item_open"),angular.element(".filter_option_title").removeClass("filter_option_title_select"),angular.element(".filters_overlay").removeClass("filters_overlay_show")),d=b.width()};angular.element(a).bind("resize",e),c.$on("$destroy",function(){angular.element(a).unbind("resize",e)})}}}]).directive("clearNavbarPosition",function(){return{restrict:"A",link:function(){angular.element(".header-regular").css({position:"relative",margin:0}),angular.element(".header-small").css({position:"relative",margin:0})}}}).directive("italkiSearchMobileDropdown",["$timeout",function(a){return{restrict:"E",scope:{count:"="},link:function(b,c){var d=c.find(".ui-select-choices");a(function(){for(var a=0,b=d.find(".ui-select-choices-group"),c=0;c<b.length;c++)c!==b.length-1&&(a+=angular.element(b[c]).height());a&&(a+=10,d.css("cssText","max-height: "+a+"px !important"))}),b.$watch("count",function(b,e){e!==b&&a(function(){var a=0;d=c.find(".ui-select-choices");for(var b=d.find(".ui-select-choices-group"),e=0;e<b.length;e++)e!==b.length-1&&(a+=angular.element(b[e]).height());a&&(a+=10,d.css("cssText","max-height: "+a+"px !important"))})})}}}]).directive("italkiMobileDropdownShowMore",function(){return{restrict:"A",link:function(a,b){b.on("click",function(){var a=b.parent().find(".ui-select-choices"),c=b.outerHeight();b.hide(),b.parent().addClass("teacher-search-mobile-dropdown-more"),c+=a.height(),a.css("cssText","max-height: "+c+"px !important")})}}}).directive("italkiLabelClick",function(){return{restrict:"A",link:function(a,b){b.on("click",function(a){"IMG"===a.target.nodeName&&a.preventDefault()})}}}).directive("italkiTabletAutocomplete",function(){
return{restrict:"A",link:function(a,b){angular.element(b).next().hide(),b.on("click",function(){angular.element(b).hide(),angular.element(b).next().show()})}}}),angular.module("kp.teacher").constant("embeddedVideoSizes",{youtube:{height:400,width:713}}).directive("resizeVideo",["$log","$window","embeddedVideoSizes","ResizeVideoService",function(a,b,c,d){function e(a,b,c){var e=d.resize(a,b);0==g&&(e(),g++),f.bind("resize",e()),a.$on("$destroy",function(){f.unbind("resize",e)})}var f=angular.element(b),g=0;return{restrict:"A",scope:{siblingContainer:"@",videoType:"@"},link:e}}]).directive("youtubeVideo",["$rootScope","$document","$window","$q","$modal","ResizeVideoService","Teacher","TeacherApplyService","UserService",function(a,b,c,d,e,f,g,h,i){return{restrict:"A",scope:{siblingContainer:"@",youtube:"="},link:function(a,e,g){function h(a){m=a}function i(b){n=f.resize(a,[l.getIframe()]),n(),c.addEventListener("resize",n,!0)}function j(){c.onYouTubeIframeAPIReady=null,p.promise.then(function(a){o=!0,l=new YT.Player("teachervideo",{width:"100%",height:"422",videoId:a,playerVars:{showinfo:0,rel:0},events:{onStateChange:h,onReady:i}})})}function k(){c.onYouTubeIframeAPIReady=function(){j()};var a=b[0].createElement("script");a.src="https://www.youtube.com/iframe_api";var d=b[0].getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d)}var l,m,n,o=!1,p=d.defer();a.$watch("youtube",function(a,b){a&&!o&&(o=!0,p.resolve(a))}),window.YT&&window.YT.Player?j():k(),a.$on("$destroy",function(){n&&angular.element(c).unbind("resize",n)})}}}]).directive("highlightTab",["$log",function(a){return{restrict:"A",scope:{},link:function(a,b,c){for(var d=angular.element(window),e=angular.element($("#aboutTabNav")),f=angular.element($("#offersTabNav")),g=angular.element($("#resumeTabNav")),h=angular.element($("#reviewsTabNav")),i=[e,f,g,h],j=angular.element($("#aboutTabNav a")),k=angular.element($("#offersTabNav a")),l=angular.element($("#resumeTabNav a")),m=angular.element($("#reviewsTabNav a")),n=[j,k,l,m],o=-1,p=0;p<i.length;p++)if(b[0]===i[p][0]){o=p;break}b.bind("click",function(){});var q=function(){var a=angular.element($("a[name=offers]")),b=angular.element($("a[name=resume]")),c=angular.element($("a[name=reviews]")),e=0,f=a.offset().top,g=b.offset().top,h=c.offset().top,j=98,k=[e+j,f-j,g-j,h-j],l=[f-j,g-j,h-j,1e6],m=d.scrollTop();if(m>=k[o]&&m<l[o])for(var p=0;p<i.length;p++)p!=o?(i[p].removeClass("tab-highlight-border"),n[p].removeClass("tab-text-color")):(i[p].addClass("tab-highlight-border"),n[p].addClass("tab-text-color"))};d.bind("scroll",q),a.$on("$destroy",function(){d.unbind("scroll",q)})}}}]).directive("kpTeacherProfileSticky",function(){return{restrict:"E",templateUrl:"/views/teacher/profile.sticky.html",link:function(a,b,c){}}}).directive("kpAvailabilityTime",function(){return{scope:!1,restrict:"E",templateUrl:"/views/teacher/availability.time.div.html",replace:!0,controller:["$scope",function(a){a.instantChange=function(b){b.stopPropagation(),a.manycheck.now&&(a.show=!1)}}]}}).directive("kpTeacherTags",function(){return{restrict:"E",templateUrl:"/views/teacher/teacher.tags.div.html",replace:!0}}).directive("kpTeacherLabel",function(){return{restrict:"E",templateUrl:"/views/teacher/teacher.label.div.html",replace:!0}}).directive("kpTeacherWeekSchedule",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/week.schedule.html",scope:{},controller:["$scope","$translate","$modal","Teacher","alertModal",function(a,b,c,d,e){var f=b.instant,g=function(){for(var b=[],c=0;7>c;c++)b.push({f:!1,data:[]});d.getWeekSchedule().then(function(c){angular.forEach(c.data,function(a){a.f=!1,b[a.weekday].data.push(a)}),a.wsData=b,KP.wsData=a.wsData})};g(),a.delData=function(b,c){a.canDel()&&e.open(a,f("C1008"),f("ST291")).then(function(a){d.moveWeekSchedule(b[c].id).then(function(d){b.splice(c,1),a.$close()})},function(){})},a.itemClick=function(a){angular.forEach(scheduleData,function(b){b!=a&&(b.click=!1)}),a.click=!a.click},a.canDel=function(){var b=!1,c=0;return angular.forEach(a.wsData,function(a){return a.data&&a.data.length&&(c+=a.data.length),c>1?(b=!0,!0):void 0}),b}}]}}).directive("kpTeacherExtraSchedule",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/extra.schedule.html",scope:{},controller:["$scope","$translate","$modal","$timeout","Teacher","alertModal","$rootScope",function(a,b,c,d,e,f,g){function h(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c=10>c?"0"+c.toString():c.toString(),d=10>d?"0"+d.toString():d.toString(),b.toString()+"-"+c+"-"+d}var i=b.instant,j=g.currentUser.timezone_iana,k=moment(new Date).tz(j),l=k.year(),m=k.month(),n=k.date(),o=(k.day(),l),p=m,q=n;a.loaded=!1,a.preMonthDisabled=function(){return a.currYear==o&&a.currMonth==p?!0:!1},a.preMonth=function(){(a.currYear!=o||a.currMonth!=p)&&(a.loaded=!1,a.currMonth--,-1==a.currMonth&&(a.currMonth=11,a.currYear--),v(a.currYear,a.currMonth))},a.nextMonth=function(){a.loaded=!1,a.currMonth++,12==a.currMonth&&(a.currMonth=0,a.currYear++),v(a.currYear,a.currMonth)};var r=function(a,b){b++,12==b&&(b=0,a++);var c=new Date(a,b,1);return new Date(c.getTime()-864e5).getDate()},s=function(b,c){var d=[];a.currYear=b,a.currMonth=c;var e=new Date(b,c,1);a.monthName=moment(e).format("MMMM YYYY");var f=e.getDate(),g=e.getDay(),h=r(b,c),i=0,j=0,k=0;d=[];for(var l=0;g>l;l++)d.push({e:!1,tr:k,wd:j}),i++,j++,7==j&&(j=0,k++);var m=c+1;m=b+"-"+(10>m?"0"+m.toString():m.toString())+"-";for(var l=f;h>=l;l++)b==o&&c==p&&q>l?d.push({e:!1,f:!1,data:[],d:m+(10>l?"0"+l.toString():l),tr:k,wd:j,i:l,d1:m+(9>l?"0"+(l+1).toString():l+1)}):d.push({e:!0,f:!1,data:[],d:m+(10>l?"0"+l.toString():l),tr:k,wd:j,i:l,d1:m+(9>l?"0"+(l+1).toString():l+1)}),i++,j++,7==j&&(j=0,k++);for(;42>i;i++)d.push({e:!1,tr:k,wd:j}),j++,7==j&&(j=0,k++);angular.forEach(d,function(b){if(b.e){KP.wsData&&KP.wsData.length&&angular.forEach(KP.wsData[b.wd].data,function(c){var d,e=!0,f=b.d+"T"+c.start_time,g=b.d+"T"+c.end_time;angular.forEach(a.delArr,function(a){return f>=a.start_time&&g<=a.end_time?(e=!1,!0):f<=a.start_time&&g>=a.end_time?(d={start_time:f,end_time:a.start_time},d.start_time!=d.end_time&&b.data.push(d),d={start_time:a.end_time,end_time:g},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):f<=a.start_time&&g>=a.start_time&&g<=a.end_time?(d={start_time:f,end_time:a.start_time},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):f>=a.start_time&&f<=a.end_time&&g>=a.end_time?(d={start_time:a.end_time,end_time:g},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):void 0}),e&&(d={start_time:b.d+"T"+c.start_time,end_time:b.d+"T"+c.end_time},d.start_time!=d.end_time&&b.data.push(d))}),angular.forEach(a.addArr,function(a){if(a.start_time>=b.d&&a.end_time<=b.d1){var c=!0;angular.forEach(b.data,function(b){return a.end_time=a.end_time.replace("23:59","24:00"),a.start_time>=b.start_time&&a.end_time<=b.end_time?(c=!1,!0):a.start_time>=b.start_time&&a.start_time<=b.end_time&&a.end_time>=b.end_time?(c=!1,b.end_time=a.end_time,!0):a.start_time<=b.start_time&&a.end_time>=b.start_time&&a.end_time<=b.end_time?(c=!1,b.start_time=a.start_time,!0):void 0}),c&&b.data.push(a)}}),b.data=_.sortBy(b.data,function(a){return a.start_time});for(var c=b.data.length-1;c>-1;c--){if(b.data[c].start_time==b.data[c].end_time){b.data.splice(c,1);break}for(var d=c-1;d>-1;d--)if(b.data[c].start_time<=b.data[d].end_time){b.data[c].end_time>=b.data[d].end_time&&(b.data[d].end_time=b.data[c].end_time),b.data.splice(c,1);break}}}}),a.scheduleData=d},t="YYYY-MM-DD",u=function(a,b,c,d){if(a==b)return void d.push({type:c.type,start_time:c.start_time,end_time:c.end_time});var e=moment(a,t),f=e.add(1,"days").format(t);d.push({type:c.type,start_time:c.start_time,end_time:c.start_time.substr(0,10)+"T24:00"}),c={type:c.type,start_time:f+"T00:00",end_time:c.end_time},u(f,b,c,d)},v=function(b,c){return KP.wsData?(a.wsData=KP.wsData,void e.getExtraSchedule({year:b,month:c+1}).then(function(d){var e=[];angular.forEach(d.data,function(a){a={type:a.type,start_time:a.start_time_user.substr(0,16),end_time:a.end_time_user.substr(0,16)};var b=a.start_time.substr(0,10),c=a.end_time.substr(0,10);u(b,c,a,e)}),d.data=e;var f=[],g=[];angular.forEach(d.data,function(a){a.type?f.push(a):g.push(a)});for(var h=f.length-1;h>-1;h--)for(var i=0,j=f.length;j>i;i++)h!=i&&!f[i].xdel&&f[i].start_time<=f[h].start_time&&f[i].end_time>=f[h].end_time&&(f[h].xdel=1);for(var k=[],j=f.length,h=0;j>h;h++)f[h].xdel||(delete f[h].xdel,k.push(f[h]));g=_.sortBy(g,function(a){return a.start_time});for(var j=g.length-1;j>0;j--)for(var i=0;j>i;i++)if(g[j].start_time<=g[i].end_time){g[j].end_time>g[i].end_time&&(g[i].end_time=g[j].end_time),g.splice(j,1);break}a.addArr=k,a.delArr=g,s(b,c),a.loaded=!0},function(d){s(b,c),a.loaded=!0})):void d(function(){v(b,c)},100)};a.trs=[0,1,2,3,4,5,6],v(l,m),a.showTableRow=function(b){var c=0;return angular.forEach(a.scheduleData,function(a){a.tr!=b||a.e||c++}),7==c?!1:!0},a.setDateFormat=function(a){return a&&a.length>6?a.substr(11,5):a},a.$watch("wsData",function(b,c){b!=c&&c&&v(a.currYear,a.currMonth)},!0);moment().tz(g.currentUser.timezone_iana).zone(),moment().zone();a.delData=function(b,c){f.open(a,i("C1008"),i("ST291")).then(function(d){var f=b.d+" "+(c.start_time.length>11?c.start_time.substr(11,5):c.start_time),g=b.d+" "+(c.end_time.length>11?c.end_time.substr(11,5):c.end_time);return g=g.replace("24:00","23:59"),obj={start_time:f,end_time:g,type:0},e.setExtraSchedule(obj).then(function(c){v(a.currYear,a.currMonth),b.click=!1,d.$close()})},function(){})},a.$on("addExtraTime",function(b,c){c.closeDiv.$close(),d(function(){a.loaded=!1,v(a.currYear,a.currMonth)},300)}),a.$on("delExtraTime",function(b,c){if(c.f){var f=h(c.s)+" 00:00",g=h(c.e)+" 23:59";return obj={start_time:f,end_time:g,type:0},e.setExtraSchedule(obj).then(function(b){c.alertDiv.$close(),a.delDivFlag=!1,b.data.success&&d(function(){a.loaded=!1,v(a.currYear,a.currMonth)},300)})}a.delDivFlag=!1}),a.itemClick=function(b){angular.forEach(a.scheduleData,function(a){a!=b&&(a.click=!1)}),b.click=!b.click}}]}}).directive("kpTeacherExtraSchedule1",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/extra.schedule.html",scope:{},controller:["$scope","$translate","$modal","$timeout","Teacher","alertModal","$rootScope",function(a,b,c,d,e,f,g){function h(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c=10>c?"0"+c.toString():c.toString(),d=10>d?"0"+d.toString():d.toString(),b.toString()+"-"+c+"-"+d}var i=b.instant;a.monthName=["January","February","March","April","May ","June ","July","August ","September ","October ","November","December"];var j=g.currentUser.timezone_iana,k=moment(new Date).tz(j),l=k.year(),m=k.month(),n=k.date(),o=(k.day(),l),p=m,q=n;a.loaded=!1,a.preMonthDisabled=function(){return a.currYear==o&&a.currMonth==p?!0:!1},a.preMonth=function(){(a.currYear!=o||a.currMonth!=p)&&(a.loaded=!1,a.currMonth--,-1==a.currMonth&&(a.currMonth=11,a.currYear--),t(a.currYear,a.currMonth))},a.nextMonth=function(){a.loaded=!1,a.currMonth++,12==a.currMonth&&(a.currMonth=0,a.currYear++),t(a.currYear,a.currMonth)};var r=function(a,b){b++,12==b&&(b=0,a++);var c=new Date(a,b,1);return new Date(c.getTime()-864e5).getDate()},s=function(b,c){var d=[];a.currYear=b,a.currMonth=c;var e=new Date(b,c,1),f=e.getDate(),g=e.getDay(),h=r(b,c),i=0,j=0,k=0;d=[];for(var l=0;g>l;l++)d.push({e:!1,tr:k,wd:j}),i++,j++,7==j&&(j=0,k++);var m=c+1;m=b+"-"+(10>m?"0"+m.toString():m.toString())+"-";for(var l=f;h>=l;l++)b==o&&c==p&&q>l?d.push({e:!1,f:!1,data:[],d:m+(10>l?"0"+l.toString():l),tr:k,wd:j,i:l,d1:m+(9>l?"0"+(l+1).toString():l+1)}):d.push({e:!0,f:!1,data:[],d:m+(10>l?"0"+l.toString():l),tr:k,wd:j,i:l,d1:m+(9>l?"0"+(l+1).toString():l+1)}),i++,j++,7==j&&(j=0,k++);for(;42>i;i++)d.push({e:!1,tr:k,wd:j}),j++,7==j&&(j=0,k++);angular.forEach(d,function(b){b.e&&(KP.wsData&&KP.wsData.length&&angular.forEach(KP.wsData[b.wd].data,function(c){var d,e=!0,f=b.d+"T"+c.start_time,g=b.d+"T"+c.end_time;angular.forEach(a.delArr,function(a){return f>=a.start_time&&g<=a.end_time?(e=!1,!0):f<=a.start_time&&g>=a.end_time?(d={start_time:f,end_time:a.start_time},d.start_time!=d.end_time&&b.data.push(d),d={start_time:a.end_time,end_time:g},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):f<=a.start_time&&g>=a.start_time&&g<=a.end_time?(d={start_time:f,end_time:a.end_time},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):f>=a.start_time&&f<=a.end_time&&g>=a.end_time?(d={start_time:a.end_time,end_time:f},d.start_time!=d.end_time&&b.data.push(d),e=!1,!0):void 0}),e&&b.data.push({start_time:b.d+"T"+c.start_time,end_time:b.d+"T"+c.end_time})}),angular.forEach(a.addArr,function(a){if(a.start_time>=b.d&&a.end_time<=b.d1){var c=!0;angular.forEach(b.data,function(b){return a.end_time=a.end_time.replace("23:59","24:00"),a.start_time>=b.start_time&&a.end_time<=b.end_time?(c=!1,!0):a.start_time>=b.start_time&&a.start_time<=b.end_time&&a.end_time>=b.end_time?(c=!1,b.end_time=a.end_time,!0):a.start_time<=b.start_time&&a.end_time>=b.start_time&&a.end_time<=b.end_time?(c=!1,b.start_time=a.start_time,!0):void 0}),c&&b.data.push(a)}}),b.data=_.sortBy(b.data,function(a){return a.start_time}))}),a.scheduleData=d},t=function(b,c){return KP.wsData?(a.wsData=KP.wsData,void e.getExtraSchedule({year:b,month:c+1}).then(function(d){var e=[],f=[];angular.forEach(d.data,function(a){var b={type:a.type,start_time:moment(a.start_time).tz(j).format().substr(0,16),end_time:moment(a.end_time).tz(j).format().substr(0,16)};a.type?e.push(b):f.push(b)});for(var g=e.length-1;g>-1;g--)for(var h=0,i=e.length;i>h;h++)g!=h&&!e[h].xdel&&e[h].start_time<=e[g].start_time&&e[h].end_time>=e[g].end_time&&(e[g].xdel=1);for(var k=[],i=e.length,g=0;i>g;g++)e[g].xdel||(delete e[g].xdel,k.push(e[g]));a.addArr=k,a.delArr=f,s(b,c),a.loaded=!0},function(d){s(b,c),a.loaded=!0})):void d(function(){t(b,c)},100)};a.trs=[0,1,2,3,4,5,6],t(l,m),a.showTableRow=function(b){var c=0;return angular.forEach(a.scheduleData,function(a){a.tr!=b||a.e||c++}),7==c?!1:!0},a.setDateFormat=function(a){return a&&a.length>6?a.substr(11,5):a},a.$watch("wsData",function(b,c){b!=c&&c&&t(a.currYear,a.currMonth)},!0);var u=moment().tz(g.currentUser.timezone_iana).zone(),v=moment().zone();a.delData=function(b,c){f.open(a,i("C1008"),i("ST291")).then(function(d){var f=b.d+" "+(c.start_time.length>11?c.start_time.substr(11,5):c.start_time),g=b.d+" "+(c.end_time.length>11?c.end_time.substr(11,5):c.end_time);return f=moment(f,"YYYY-MM-DD HH:mm").zone(v-u).format().substr(0,16).replace("T"," "),g=moment(g,"YYYY-MM-DD HH:mm").zone(v-u).format().substr(0,16).replace("T"," "),obj={start_time_utc:f,end_time_utc:g,type:0},e.setExtraSchedule(obj).then(function(c){t(a.currYear,a.currMonth),b.click=!1,d.$close()})},function(){})},a.$on("addExtraTime",function(b,c){c.closeDiv.$close(),d(function(){a.loaded=!1,t(a.currYear,a.currMonth)},300)}),a.$on("delExtraTime",function(b,c){if(c.f){var d=h(c.s)+" 00:00",f=h(c.e)+" 23:59";return d=moment(d,"YYYY-MM-DD HH:mm").zone(v-u).format().substr(0,16).replace("T"," "),f=moment(f,"YYYY-MM-DD HH:mm").zone(v-u).format().substr(0,16).replace("T"," "),obj={start_time_utc:d,end_time_utc:f,type:0},e.setExtraSchedule(obj).then(function(b){b.data.success&&(d=d.replace(" ","T")+":00+0000",f=f.replace(" ","T")+":00+0000",a.delArr.push({start_time:d,end_time:f,type:0}),s(a.currYear,a.currMonth)),c.alertDiv.$close(),a.delDivFlag=!1})}a.delDivFlag=!1,a.addArr.push(c),s(a.currYear,a.currMonth)}),a.itemClick=function(b){angular.forEach(a.scheduleData,function(a){a!=b&&(a.click=!1)}),b.click=!b.click}}]}}).directive("kpAddTimeDiv",["$modal",function(a){return{restrict:"EA",scope:{timeType:"@",timeValue:"@",item:"="},link:function(b,c,d){var e=function(){a.open({scope:b,size:"",templateUrl:"/views/teacher/directives/add.time.html",windowClass:"add-friend-request",controller:"AddTimeCtrl"})};c.on("click",e),b.$on("$destroy",function(){c.off("click",e)})}}}]).controller("AddTimeCtrl",["$scope","$translate","$modal","Teacher","$rootScope",function(a,b,c,d,e){a.selTimeStart=KP.time48,a.startTime="00:00",a.getEndTimes=function(){var b=[];a.endTime="",angular.forEach(KP.time48,function(c){c>a.startTime&&(a.endTime||(a.endTime=c),b.push(c))}),a.selTimeEnd=b},a.getEndTimes();moment().tz(e.currentUser.timezone_iana).zone(),moment().zone();a.addTime=function(){var b=null;if(1==a.timeType)return b={weekday:a.timeValue,start_time:a.startTime,end_time:a.endTime},d.setWeekSchedule(b).then(function(b){return b.data.success&&(a.item.data.length=0,angular.forEach(b.data.week_schedule_obj_s,function(b){b.f=!1,a.item.data.push(b)})),a.$close(),KP.API.SUCC},function(a){return KP.API.ERROR});var c=a.item.d+" "+a.startTime,e=a.item.d+" "+("24:00"==a.endTime?"23:59":a.endTime);return b={start_time:c,end_time:e,type:1},d.setExtraSchedule(b).then(function(b){return a.item.click=!1,a.$emit("addExtraTime",{start_time:c,end_time:e,type:1,closeDiv:a}),KP.API.SUCC},function(a){return KP.API.ERROR})}}]).directive("kpDelTimeDiv",["$modal",function(a){return{restrict:"EA",scope:{timeType:"@",timeValue:"@",item:"="},link:function(b,c,d){var e=function(){a.open({scope:b,size:"",templateUrl:"/views/teacher/directives/del.time.html",windowClass:"teacher-schedule-del-time",controller:"DelTimeDivCtrl"})};c.on("click",e),b.$on("$destroy",function(){c.off("click",e)})}}}]).controller("DelTimeDivCtrl",["$scope","$translate","$modal","Teacher","alertModal",function(a,b,c,d,e){var f=b.instant;a.dt1=null,a.dt2=null,minDate=new Date,minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate()),a.minDate=minDate,a.disabled1=function(b,c){return a.minDate>b},a.disabled2=function(b,c){return a.dt1?a.dt1>b:a.minDate>b},a.$watch("dt1",function(b,c){b!=c&&a.dt2&&(!b||b&&b>a.dt2)&&(a.dt2=null)}),a.status={start_opened:!1,end_opened:!1},a.sopen=function(b){a.status.start_opened=!0},a.eopen=function(b){a.status.end_opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.format="yyyy-MM-dd";var g=new Date;g.setDate(g.getDate()+1);var h=new Date;h.setDate(g.getDate()+2),a.delTime=function(){return a.errorFlag=!1,!a.dt1||!a.dt2||a.dt1>a.dt2?void(a.errorFlag=!0):void e.open(a,f("C1008"),f("ST137")).then(function(b){a.$emit("delExtraTime",{f:1,s:a.dt1,e:a.dt2,alertDiv:b}),a.$close()},function(){a.$emit("delExtraTime",{f:0})})},a.cancel=function(){a.$emit("delExtraTime",{f:0}),a.$close()}}]).directive("kpTeacherNavLi",function(){return{restrict:"EA",templateUrl:"/views/teacher/directives/teacher.nav.li.html"}}).directive("kpCoursesProList",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/courses.pro.list.html",scope:{coursesInfo:"="},controller:["$scope","$translate","$modal","Teacher","alertModal","AddEditCourses",function(a,b,c,d,e,f){var g=b.instant;a.showPackage=function(a){var b=!1;return angular.forEach(a,function(a){return a.package_length>1?(b=!0,!0):void 0}),b},a.canDel=function(){return a.coursesInfo.pro_course_obj_s.length>1},a.addCoursesPro=function(b){f.open(a.coursesInfo,b,!0)},a.moveCoursesPro=function(b){a.canDel&&e.open(a,g("C1008"),g("TP129")).then(function(c){d.delCourses(a.coursesInfo.pro_course_obj_s[b].id).then(function(d){a.coursesInfo.pro_course_obj_s.splice(b,1),c.$close()})},function(a){})}}]}}).directive("kpCoursesTutorList",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/courses.tutor.list.html",scope:{coursesInfo:"="},controller:["$scope","$translate","$modal","Teacher","Account","alertModal","AddEditCourses","$interval","$timeout","$rootScope",function(a,b,c,d,e,f,g,h,i,j){var k=b.instant;a.showPackage=function(a){var b=!1;return angular.forEach(a,function(a){return a.package_length>1?(b=!0,!0):void 0}),b},a.canDel=function(){return a.coursesInfo.tutor_course_obj_s.length>1},a.addCoursesPro=function(b){g.open(a.coursesInfo,b,!1)},a.moveCoursesPro=function(b){a.canDel()&&f.open(a,k("C1008"),k("TP129")).then(function(c){d.delCourses(a.coursesInfo.tutor_course_obj_s[b].id).then(function(d){a.coursesInfo.tutor_course_obj_s.splice(b,1),c.$close()})},function(a){})},a.setHaveTutor=function(){a.coursesInfo.is_add_pro&&e.setTeacherProfile({is_tutor:!a.coursesInfo.is_tutor}).then(function(b){a.coursesInfo.is_tutor=!a.coursesInfo.is_tutor})},a.showIsTutor=function(){return a.coursesInfo.is_add_pro&&a.coursesInfo.tutor_course_obj_s.length?!0:!1},a.coursesInfo.updateTutor=function(){a.coursesInfo.is_tutor||a.setHaveTutor()},a.canAdd=function(){return a.lans=[],angular.forEach(j.currentUser.language_obj_s,function(b){b.level>5&&a.lans.push(b.language)}),a.tutor_lans=[],a.tutor_lans=a.lans.filter(function(b){return!a.coursesInfo.tutor_course_obj_s.some(function(a){return b==a.language})}),a.tutor_lans.length>0}}]}}).directive("kpCoursesTrialList",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/courses.trial.html",scope:{coursesInfo:"="},controller:["$scope","$translate","$timeout","$modal","$filter","Teacher","Account","EmptyPromise","InputKeypress",function(a,b,c,d,e,f,g,h,i){a.editModel=!1,c(function(){a.coursesInfo.trial_price_usd>0?a.trial_price_usd=e("kpToUsd")(a.coursesInfo.trial_price_usd):a.trial_price_usd=e("kpToUsd")(100)},1e3),a.input_keypress=function(a){return i.keypress(a)};var j=!1;a.saveFlag=j,a.vSubFlag=!0,a.save=function(){return j?h.getEmptyPromise():(j=!0,a.vSubFlag=!1,a.isValidPrice()?(a.prices_usd=(100*a.trial_price_usd).toFixed(),g.setTeacherProfile({trial_price_usd:a.prices_usd}).then(function(b){a.coursesInfo.trial_price_usd=a.prices_usd,a.trial_price_usd=e("kpToUsd")(a.coursesInfo.trial_price_usd),a.vSubFlag=!0,j=!1,a.editModel=!1},function(b){a.vSubFlag=!0,j=!1})):(j=!1,h.getEmptyPromise()))},a.isValidPrice=function(){return a.trial_price_usd&&parseInt(a.trial_price_usd)>0&&parseInt(a.trial_price_usd)<81},a.cancel=function(){a.editModel=!1,a.trial_price_usd=a.coursesInfo.trial_price_usd},a.setHaveTrial=function(){g.setTeacherProfile({has_trial:!a.coursesInfo.has_trial}).then(function(b){a.coursesInfo.has_trial=!a.coursesInfo.has_trial})}}]}}).service("AddEditCourses",["$modal",function(a){this.open=function(b,c,d){var e=a.open({templateUrl:"/views/teacher/directives/add.pro.courses.html",controller:["$scope","$rootScope","$modalInstance","$translate","InputKeypress","myCoursesInfo","myIndex","myIsMyPro","Teacher","EmptyPromise",function(a,b,c,d,e,f,g,h,i,j){a.isPro=h;var k=h?"8.00":"4.00",l="80.00";a.minItc=k,a.maxItc=l,a.isAdd=-1==g;var m="",n={title:{v:"",min:3,max:200},description:{v:"",min:100,max:2e3},type:{v:0,min:1,max:3},language:{v:m,min:2,max:1e3},status:{v:0,min:1,max:1},id:{v:-1,min:0,max:60}},o=KP.Utils.at_m_n;a.vv=o;var p=[{session_length:2,session_price_usd:"",package_length:1,package_price_usd:"",checked:!1},{session_length:3,session_price_usd:"",package_length:1,package_price_usd:"",checked:!1},{session_length:4,session_price_usd:"",package_length:1,package_price_usd:"",checked:!0,disabled:!0},{session_length:6,session_price_usd:"",package_length:1,package_price_usd:"",checked:!1}];if(g>-1){var q=h?f.pro_course_obj_s[g]:f.tutor_course_obj_s[g];for(var r in n)(q[r]||0==q[r])&&(n[r].v=q[r]);angular.forEach(q.price_obj_s,function(a){var b=-1;2==a.session_length?b=0:3==a.session_length?b=1:4==a.session_length?b=2:6==a.session_length?b=3:8==a.session_length&&(b=4),b>-1&&(p[b].checked=!0,p[b].session_price_usd=a.session_price_usd/100,p[b].package_length=a.package_length,p[b].package_price_usd=a.package_price_usd/100)})}a.formObj=n,a.prices=p,a.lans=[],angular.forEach(a.currentUser.language_obj_s,function(b){b.level>5&&a.lans.push(b.language)}),a.tutor_lans=[],a.tutor_lans=a.lans.filter(function(a){return!f.tutor_course_obj_s.some(function(b){return a==b.language})}),a.lans=h?a.lans:a.tutor_lans,a.input_paste=function(){return!clipboardData.getData("text").match(/\D/)},a.input_keypress=function(a){return e.keypress(a)},a.checkItcPric=function(a,c){if(c)return!0;var d=parseInt(a,10),e=a&&d>=k&&l>=d;return e?(b.session_price_usd=a,!0):!1},a.checkPackageLength=function(a,b,c){return c?!0:1==b&&""!=a?!1:!0},a.checkItcTotalPrice=function(a,c,d){if(d)return!0;if(1==c)return!0;var e=parseInt(a,10),f=a&&e>=c*k&&c*l>=e&&e/c<=b.session_price_usd;return f?!0:!1},a.checkLanCoursers=function(a){var b=0,c=!0;if(a)return c;var d=h?f.pro_course_obj_s:f.tutor_course_obj_s;return g>-1&&d[g].language==n.language.v?c:(angular.forEach(d,function(a){if(a.language==n.language.v&&b++,h){if(5==b)return c=!1,!1}else if(1==b)return c=!1,!1}),c)};var s=!1;a.saveFlag=s,a.vSubFlag=!0,a.save=function(){if(s)return j.getEmptyPromise();if(s=!0,a.vSubFlag=!1,!n.language.v)return s=!1,j.getEmptyPromise();if(!a.checkLanCoursers())return s=!1,j.getEmptyPromise();var b=!1,d=[],e={},f=[],k="",l=!0;return h?o(n.title)&&o(n.description)&&o(n.language)&&(b=!0,e.title=n.title.v,e.description=n.description.v,e.type=0):o(n.language)&&(b=!0),b?(e.language=n.language.v,e.status=n.status.v,n.id.v>-1&&(e.id=n.id.v),angular.forEach(p,function(b){if(b.checked){if(!(a.checkItcPric(b.session_price_usd)&&a.checkItcTotalPrice(b.package_price_usd,b.package_length)&&a.checkPackageLength(b.package_price_usd,b.package_length)))return l=!1,!1;d.push(b.session_length+"|"+(100*b.session_price_usd).toFixed()+"|"+b.package_length+"|"+(100*b.package_price_usd).toFixed()),f.push({package_length:b.package_length,package_price_usd:(100*b.package_price_usd).toFixed(),session_length:b.session_length,session_price_usd:(100*b.session_price_usd).toFixed()}),4==b.session_length&&(k=(100*b.session_price_usd).toFixed())}}),l&&k?(e.prices_usd=d,e.id?i.editCourses(e).then(function(b){return delete e.prices,e.price_obj_s=f,e.session_price_usd=k,"0"==e.status?e.status=0:e.status=1,c.close({add:!1,isPro:h,index:g,obj:e}),a.vSubFlag=!0,s=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,s=!1,KP.API.ERROR}):i.setCourses(e).then(function(b){return e.id=b.data.course_id,delete e.prices,e.price_obj_s=f,e.session_price_usd=k,"0"==e.status?e.status=0:e.status=1,c.close({add:!0,isPro:h,index:-1,obj:e}),a.vSubFlag=!0,s=!1,KP.API.SUCC},function(b){return a.vSubFlag=!0,s=!1,KP.API.ERROR})):(s=!1,j.getEmptyPromise())):(s=!1,j.getEmptyPromise())}}],resolve:{myCoursesInfo:function(){return b},myIndex:function(){return c},myIsMyPro:function(){return d}}});e.result.then(function(a){a.isPro?a.add?b.pro_course_obj_s.push(a.obj):b.pro_course_obj_s[a.index]=a.obj:a.add?(b.tutor_course_obj_s.push(a.obj),b.updateTutor&&b.updateTutor()):b.tutor_course_obj_s[a.index]=a.obj},function(){})}}]).directive("kpTeacherSessionsWithStudent",function(){return{restrict:"EA",scope:{data:"=",comment:"="},templateUrl:"/views/teacher/directives/teacher.sessions.with.student.html",controller:["$scope","Teacher","UserService","LoginService","EmailNotActive",function(a,b,c,d,e){a.isMe=function(){var a=c.currentUser();return a&&a.id==g};var f=0,g=a.data.teacher_id;a.items=[{session_id:a.data.session_id,session_start_time_user:a.data.session_start_time_user,session_end_time_user:a.data.session_end_time_user,session_duration:a.data.session_duration,student_comment:a.data.student_comment,learn_language:a.data.learn_language,is_reviews_up:a.data.is_reviews_up,helpful_count:a.data.helpful_count,comment_id:a.data.comment_id,had_like:a.data.had_like}],a.$watch("data.is_reviews_up",function(b){a.items.length&&(a.items[0].is_reviews_up=!!b)});var h={comment_id:a.data.comment_id,teacher_id:a.data.teacher_id,student_id:a.data.student_id,page:1,page_size:5},i=function(){b.getCommentMore().get(h).then(function(b){a.items=_.union(a.items,b.data.comments),a.meta=b.meta,a.meta.has_next&&(h.page+=1)},function(a){})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};a.$on("kp-teacher-profile-session-comments-remove",function(b,c){angular.forEach(a.items,function(b,d){c.session_id==b.session_id&&(a.items[d].is_reviews_up=0)})}),a.loadMore=function(){a.loadMoreFlag=!0,i(++f)},a.addFavoriteComments=function(c,d){return d.oppo_user_obj=a.data.oppo_user_obj,d.more_count=a.data.more_count,d.is_reviews_up&&1==d.is_reviews_up?void 0:a.comment&&3==a.comment.length?void 0:(d.is_reviews_up=1,a.$emit("kp-teacher-profile-session-comments-vote",d),b.TeacherUpchoose().post({session_id:c}).then(function(a){return KP.API.SUCC},function(a){return KP.API.ERROR}))},a.helpful=function(a,c){if(!d.open()&&!e.open()){a.stopPropagation();var f={comment_id:c.comment_id,mark:""};0==c.had_like?f.mark=1:f.mark=-1,b.postHelpfulMark().post(f).then(function(a){a.data.success&&(1==c.had_like?(c.had_like=0,c.helpful_count=c.helpful_count-1):(c.had_like=1,c.helpful_count=c.helpful_count+1))})}}}]}}).directive("kpCalendarNew",function(){return{restrict:"E",templateUrl:"/views/kp/calendar.div.html",scope:{teacher:"=",interval:"@",intervalUnit:"@",isSchedule:"@",repeatable:"=",lessonLength:"=",disabledItems:"=",excludeLessonId:"=",ontimeupdate:"&",selectable:"="},controller:["$scope","$translate","$stateParams","$modal","$timeout","Teacher","alertModal","$rootScope","Restangular",function(a,b,c,d,e,f,g,h,i){var j=a.teacher.id,k=0,l=moment.locale(),m=a.intervalUnit||"days",n=(b.instant,0),o=1,p=1;a.options={isRepeat:!1},a.isSchedule&&(n=1),a.selectable&&(p=0),a.lessonLength&&(o=Math.ceil(parseInt(a.lessonLength)/2)),a.interval?k=a.interval:a.interval=k;var q=0,r="UTC";h.currentUser&&h.currentUser.timezone_iana?(q=moment().tz(h.currentUser.timezone_iana).zone(),r=h.currentUser.timezone_iana):q=moment().zone();var s=function(){return moment(moment(new Date).add(k,m).utc().format()).zone(q).locale("en")};a.tzObj={utc:moment().zone(q).locale("en").format().substr(19)};var t=function(a){for(var b=a.clone(),c=[],d=0;11>d;d++)d>0&&b.add(7,"days"),c.push({s:b.format("MMM D, YYYY"),e:b.clone().add(6,"days").format("MMM D, YYYY"),c:7*d});return c},u=t(s());a.selectObj={arr:u,selValue:u[0],show:0},a.selChange=function(){a.current=a.selectObj.selValue.c,x(moment.tz(a.selectObj.selValue.s,r))},a.showTitle=function(){var b=a.DateData.weeks[0].rq,c=a.DateData.weeks[6].rq;return b.year()!=c.year()?b.clone().locale(l).format("MMM D, YYYY")+" - "+c.clone().locale(l).format("MMM D, YYYY"):b.month()!=c.month()?b.clone().locale(l).format("MMM D")+" - "+c.clone().locale(l).format("MMM D, YYYY"):b.clone().locale(l).format("MMM D")+" - "+c.clone().locale(l).format("D, YYYY")};var v=function(b){var c=b.clone(),d=[];d.push({rq:moment(c.utc().format()).zone(q).locale("en"),sname:c.zone(q).clone().locale(l).format("ddd MM/DD")});for(var e=0;7>e;e++){var f=moment(c.add(1,"days").utc().format()).zone(q);d.push({rq:f.locale("en"),sname:f.clone().locale(l).format("ddd MM/DD")})}C=moment(c.utc().format()).zone(q).locale("en");var g=a.current/7;return g>-1&&g<a.selectObj.arr.length&&(a.selectObj.selValue=a.selectObj.arr[g]),d},w=function(a){for(var b=a.clone(),c=v(b),d=[],e=0,f=!0;49>e;e++,f=!f){var g=Math.floor(e/2),i="";f&&(i=h.currentUser&&h.currentUser.is_am?0==g?"12:00 AM":(13>g?g.toString():(g-12).toString())+":00 "+(e>23?"PM":"AM"):(e>19?g.toString():"0"+g.toString())+":00 "),d.push({s:i,index:e,h:g,f:f,show:1,weeks:[0,0,0,0,0,0,0,0]})}return{weeks:c,hours:d}},x=function(b){a.selectObj.show=0,a.DateData=null;var c=w(b),d=c.weeks[0].rq.format(),e={start_time:d.substr(0,10)+" 00:00",end_time:c.weeks[7].rq.format().substr(0,10)+" 23:59",is_get_used_time:1};a.excludeLessonId&&(e.excluded_session_id=a.excludeLessonId),i.one("teacher/"+j+"/available2").get(e).then(function(b){if(a.teacher.currentUserIsTeacher?angular.forEach(c.weeks,function(a,b){if(7==b)return!0;for(var d=0;48>d;d++)c.hours[d].weeks[b]=1}):angular.forEach(b.data.schedule_dic_s,function(a){angular.forEach(c.weeks,function(b,d){if(7==d)return!0;var e=!1,f=b.rq.format("YYYY-MM-DD").substr(0,10),g=a.start_time_user.substr(0,10),h=a.end_time_user.substr(0,10);if(f==g?e=!0:0==d&&f>g&&h>=f&&(a.start_time_user=f+a.start_time_user.substr(10,1)+"00:00:00"+a.start_time_user.substr(19),e=!0),e){var i=moment(a.start_time_user),j=moment(a.end_time_user),k=j.diff(i);if(k=Math.ceil(k/18e5),1>k)return!0;for(var l=parseInt(a.start_time_user.substr(14,2)),m=2*parseInt(a.start_time_user.substr(11,2))+(30>l?0:1),n=1;48==m&&(m=0,
d++),c.hours[m].weeks[d]=1,n!=k;m++,n++);return!0}})}),angular.forEach(b.data.tea_used_time_dic,function(a){angular.forEach(c.weeks,function(b,d){if(7==d)return!0;var e=!1,f=b.rq.format("YYYY-MM-DD").substr(0,10),g=a.start_time_user.substr(0,10),h=a.end_time_user.substr(0,10);if(f==g?e=!0:0==d&&f>g&&h>=f&&(a.start_time_user=f+a.start_time_user.substr(10,1)+"00:00:00"+a.start_time_user.substr(19),e=!0),e){var i=moment(a.start_time_user),j=moment(a.end_time_user),k=j.diff(i);if(k=Math.ceil(k/18e5),1>k)return!0;for(var l=parseInt(a.start_time_user.substr(14,2)),m=2*parseInt(a.start_time_user.substr(11,2))+(30>l?0:1),n=1;48==m&&(m=0,d++),c.hours[m].weeks[d]=2,n!=k;m++,n++);return!0}})}),n){angular.forEach(b.data.stu_used_time_dic,function(a){angular.forEach(c.weeks,function(b,d){if(7==d)return!0;var e=!1,f=b.rq.format("YYYY-MM-DD").substr(0,10),g=a.start_time_user.substr(0,10),h=a.end_time_user.substr(0,10);if(f==g?e=!0:0==d&&f>g&&h>f&&(a.start_time_user=f+a.start_time_user.substr(10,1)+"00:00:00"+a.start_time_user.substr(19),e=!0),e){var i=moment(a.start_time_user),j=moment(a.end_time_user),k=j.diff(i);if(k=Math.ceil(k/18e5),1>k)return!0;for(var l=parseInt(a.start_time_user.substr(14,2)),m=2*parseInt(a.start_time_user.substr(11,2))+(30>l?0:1),n=1;48==m&&(m=0,d++),c.hours[m].weeks[d]=3,n!=k;m++,n++);return!0}})});var d=moment().add(k,m).utc().format();angular.forEach(c.hours,function(b){var e=c.weeks[0].rq.format().substr(0,11)+(b.h>9?b.h:"0"+b.h)+":"+(b.f?"00":"30")+":00"+a.tzObj.utc;e=moment(e).utc().format(),d>e&&1==b.weeks[0]&&(b.weeks[0]=4)}),a.disabledItems&&angular.forEach(a.disabledItems,function(b){var d=b.date.split(" "),e=d[0].split("-");e[1].length<2&&(e[1]="0"+e[1]),e[2].length<2&&(e[2]="0"+e[2]),d[0]=e[0]+"-"+e[1]+"-"+e[2];var f=d[1].split(":");angular.forEach(c.weeks,function(b,e){var g=2*parseInt(f[0])+(parseInt(f[1])>0?1:0),h=1,i=b.rq.format().substr(0,10);if(i==d[0]){for(;48==g&&(g=0,e++),c.hours[g].weeks[e]=8,h!=o;g++,h++);return!0}if(0==e&&i==moment(d[0]+"T00:00:00"+a.tzObj.utc).add(1,"days").format().substr(0,10))for(var j=!1;48==g&&(g=0,j=!0),j&&(c.hours[g].weeks[e]=8),h!=o;g++,h++);})})}for(var e=0;19>e;e++){var f=c.hours[e];if(f.weeks[0]||f.weeks[1]||f.weeks[2]||f.weeks[3]||f.weeks[4]||f.weeks[5]||f.weeks[6])break;f.show=0}for(var e=c.hours.length-1;e>30;e--){var f=c.hours[e];if(f.weeks[0]||f.weeks[1]||f.weeks[2]||f.weeks[3]||f.weeks[4]||f.weeks[5]||f.weeks[6])break;f.show=0}a.DateData=c})};a.prevDays=function(){a.current<7||(a.current-=7,x(moment(C.subtract({days:14}).utc().format()).zone(q)))},a.nextDays=function(){a.current+=7,C||(C=s()),x(C)};var y=null;a.dataClick=function(b,c,d,e){if(1!=d&&6!=d||!n||!p)return 0;y&&B(y.h,y.w,y.i,y.lessonLength);var f=z(c,d,e);if(!(o>f)&&a.ontimeupdate){y={h:c,w:d,i:e,lessonLength:o},A(c,d,e,o);var g={day:a.DateData.weeks[e].rq.format().substr(0,10).replace(/-/g,"/"),time:(c.h>9?c.h:"0"+c.h)+":"+(c.f?"00":"30"),isRepeat:!!a.options.isRepeat};a.ontimeupdate({$event:b,$item:g})}};var z=function(b,c,d){for(var e=1,f=!0,g=b.index+1;48>g;g++){var h=a.DateData.hours[g];if(1!=h.weeks[d]){f=0;break}if(e++,e>3){f=0;break}}if(f)for(var g=0;4>g;g++){var h=a.DateData.hours[g];if(1!=h.weeks[d+1])break;if(e++,e>3)break}return e},A=function(b,c,d,e){var f=1;a.DateData.hours[b.index].weeks[d]=6;for(var g=b.index+1;48>g&&!(f>=e);g++)f++,a.DateData.hours[g].weeks[d]=6;if(e>f)for(var g=0;4>g&&(a.DateData.hours[g].weeks[d+1]=6,f++,f!=e);g++);},B=function(b,c,d,e){var f=1;if(6==a.DateData.hours[b.index].weeks[d]){a.DateData.hours[b.index].weeks[d]=1;for(var g=b.index+1;48>g&&!(f>=e);g++){if(f++,6!=a.DateData.hours[g].weeks[d])return;a.DateData.hours[g].weeks[d]=1}if(e>f)for(var g=0;4>g;g++){if(6!=a.DateData.hours[g].weeks[d+1])return;if(a.DateData.hours[g].weeks[d+1]=1,f++,f==e)break}}};a.getTimeLong=z,a.current=-7;var C=s();a.nextDays()}]}}).directive("kpPopCard",["$rootScope","CommonService","$timeout","$injector",function(a,b,c,d){var e=b.getLessionPopDiv(),f="/views/kp/lession.card.html",g=function(c,e){var g=a.$new();g.lessionInfo=c;var h=d.get("$controller");h("LessionPopCtrl",{$scope:g,element:e}),b.getTemplate(f).then(function(a){e.html(b.compileHtml(a,g))})};return e.on("click",function(){event.stopPropagation()||(event.cancelBubble=!0)}),e.addClass("popover popover2 available bottom fade in lessioncard"),{restrict:"EA",scope:{popObject:"="},link:function(a,b,c){a.popObject&&a.popObject.show&&(b.css("cursor","auto"),b.css("position","relative"),b.on("mouseover",function(){if(a.popObject&&a.popObject.show){var c=b.parent().parent(),d=c.parent(),f=d.children("tr"),h=f.length,i=f.index(c);i+8>h&&i>6?(e.removeClass("bottom"),e.addClass("top")):(e.removeClass("top"),e.addClass("bottom")),a.popObject.l&&a.popObject.l>4?(e.removeClass("right"),e.addClass("left")):(e.removeClass("left"),e.addClass("right"))}0==b.find("lessioncard").length&&(g(a.popObject,e),6!=a.popObject.flag&&b.append(e))})),b.on("mouseleave",function(){e.remove()})}}}]).directive("kpHoveringCard",function(){return{restrict:"EA",scope:{popObject:"="},link:function(a,b,c){if(a.popObject&&a.popObject.show){var d=1;1==a.popObject.selectable&&(d=0);var e=a.popObject.l,f=a.popObject.t,g=1;a.popObject.lessonLength&&(g=Math.ceil(parseInt(a.popObject.lessonLength)/2)),d||b.css("cursor","crosshair"),b.css("cursor","auto"),b.css("position","relative"),b.on("mouseover",function(){if(d||b.attr("style","cursor:auto !important"),b.removeClass("hour-hovering hour-hovering-top hour-hovering-bottom"),a.popObject&&a.popObject.show&&(1==a.popObject.flag||6==a.popObject.flag)&&a.popObject.times>=g){var c,h,i=b.parent().parent(),j=i.parent(),k=j.children("tr"),l=k.index(i);f>46?6>e&&(c=$($($(k[0]).children("td")[1]).children("div")[e+1]),h=$($($(k[1]).children("td")[1]).children("div")[e+1])):l+1<k.length&&(c=$($($(k[l+1]).children("td")[1]).children("div")[e]),l+2<k.length?h=$($($(k[l+2]).children("td")[1]).children("div")[e]):6>e&&(h=$($($(k[0]).children("td")[1]).children("div")[e+1]))),c&&c.removeClass("hour-hovering hour-hovering-top hour-hovering-bottom"),1==g&&d?b.addClass("hour-hovering"):2==g&&d?(b.addClass("hour-hovering-top"),c&&c.addClass("hour-hovering-bottom")):3==g&&d&&(b.addClass("hour-hovering-top"),c&&c.addClass("hour-hovering-middle"),h&&h.addClass("hour-hovering-bottom"))}})}b.on("mouseleave",function(){b.removeClass("hour-hovering hour-hovering-top hour-hovering-bottom hour-hovering-middle");var a,c,d=b.parent().parent(),g=d.parent(),h=g.children("tr"),i=h.index(d);f>46?6>e&&(a=$($($(h[0]).children("td")[1]).children("div")[e+1]),c=$($($(h[1]).children("td")[1]).children("div")[e+1])):i+1<h.length&&(a=$($($(h[i+1]).children("td")[1]).children("div")[e]),i+2<h.length?c=$($($(h[i+2]).children("td")[1]).children("div")[e]):6>e&&(c=$($($(h[0]).children("td")[1]).children("div")[e+1]))),a&&a.removeClass("hour-hovering hour-hovering-top hour-hovering-bottom hour-hovering-middle"),c&&c.removeClass("hour-hovering hour-hovering-top hour-hovering-bottom hour-hovering-middle")})}}}).controller("LessionPopCtrl",["$scope","element",function(a,b){}]).service("CommonService",["$compile","$q","$templateCache","$http","$controller","$injector",function(a,b,c,d,e,f){var g=$("<div></div>");this.getLessionPopDiv=function(){return g},this.getTemplate=function(a){return b.when(c.get(a)||d.get(a)).then(function(b){return angular.isObject(b)?(c.put(a,b.data),b.data):b})},this.compileHtml=function(b,c){return a(b)(c)}}]).directive("kpInstantApply",["$modal",function(a){return{restrict:"EA",scope:{coursesInfo:"="},link:function(b,c,d){var e=function(){a.open({scope:b,size:"",templateUrl:"/views/teacher/directives/instant.apply.html",controller:["$scope","Teacher","EmptyPromise",function(a,b,c){a.instant={apply_reason:"",instant_price:a.coursesInfo.instant_tutoring_price_usd/100||10,allow_instant_tutoring_policies:!1,commitFlag:0},a.check=function(){return a.instant.instant_price<4||a.instant.instant_price>80?!0:!1};var d=0;a.applyInstant=function(){return d?void 0:(d=1,a.instant.commitFlag=1,(0==a.coursesInfo.instant_tutoring_status&&a.coursesInfo.session_completed_num<5||a.coursesInfo.instant_tutoring_status>30)&&(a.instant.apply_reason.trim().length<5||a.instant.apply_reason.trim().length>500)?(d=!1,c.getEmptyPromise()):a.check()?void(d=0):a.instant.allow_instant_tutoring_policies?b.instantTutoring({price:(100*a.instant.instant_price).toFixed(),content:a.instant.apply_reason}).then(function(b){return a.coursesInfo.instant_tutoring_status=b.data.instant_tutoring_status,a.coursesInfo.instant_tutoring_price_usd=(100*a.instant.instant_price).toFixed(),a.coursesInfo.instant_tutoring_price_old_usd=a.coursesInfo.instant_tutoring_price_usd,a.$close(),KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){d=0}):void(d=0))}}]})};c.on("click",e),b.$on("$destroy",function(){c.off("click",e)})}}}]).directive("kpCoursesInstantList",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/courses.instant.list.html",scope:{coursesInfo:"="},controller:["$scope","$translate","$modal","Teacher","Account","EmptyPromise","$timeout","InputKeypress",function(a,b,c,d,e,f,g,h){a.showHide={stateOne:!1},g(function(){a.instant_tutoring_price_usd=a.coursesInfo.instant_tutoring_price_usd/100},100),a.switchState=function(){var b={instant_tutoring_status:1==a.coursesInfo.instant_tutoring_status?0:1};e.setInstantStateOrPrice(b).then(function(c){a.coursesInfo.instant_tutoring_status=1==b.instant_tutoring_status?1:6})},a.input_paste=function(){return!clipboardData.getData("text").match(/\D/)},a.input_keypress=function(a){return h.keypress(a)};var i=0;a.save=function(b){return i=1,4>b||b>80?(i=0,f.getEmptyPromise()):(a.price_usd=(100*b).toFixed(),e.setInstantStateOrPrice({instant_tutoring_price_usd:a.price_usd}).then(function(c){return a.coursesInfo.instant_tutoring_price_usd=a.price_usd,b=a.price_usd/100,a.showHide.stateOne=!a.showHide.stateOne,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){i=0}))}}]}}).service("TeacherApplyAfter",["$rootScope","$modal","$log","$state",function(a,b,c,d){function e(c){var e=d.$current.self.name;if(!f&&"setting.course"!=e&&"setting.availability"!=e&&"setting.withdraw"!=e&&"editTeacherProfileCourse"!=e&&"editTeacherProfileAvailability"!=e){var g=function(){var c=a.$new();f=!0;var d=b.open({scope:c,size:"lg",templateUrl:"/views/component/teacher.apply.after.html",windowClass:"first-modal",backdrop:"static",controller:["$scope","$rootScope","$state","Teacher",function(a,b,c,d){d.getTeacherState().then(function(c){(c.data.apply_status>9||c.data.apply_status<8)&&a.$close(),a.has_course=c.data.has_course,a.has_schedule_time=c.data.has_schedule_time,a.has_payment_information=c.data.has_payment_information,a.has_course&&a.has_schedule_time&&(b.currentUser.apply_status=9,8==c.data.apply_status&&d.setTeacherState().then(function(a){}))}),a.step1=function(){c.go("setting.course"),a.$close()},a.step2=function(){c.go("setting.availability"),a.$close()},a.step3=function(){c.go("setting.withdraw",{newWithdraw:1}),a.$close()},a.closeMe=function(){a.has_course?a.has_schedule_time||c.go("setting.availability"):c.go("setting.course"),a.$close()}}]});d.result["finally"](function(){f=!1})};a.currentUser&&8===a.currentUser.apply_status&&g()}}var f=!1;return{open:e}}]).directive("moveElement",["$document",function(a){return{restrict:"A",scope:!0,compile:function(){return function(b,c,d,e){function f(a){var e=!1;e=window.jQuery?window.jQuery.contains(c[0],a.target):c[0].contains(a.target),e||(b[d.moveElement]=!1,b.$digest())}a.on("click",f),b.$on("$destroy",function(){a.off("click",f)})}}}}]).service("InputCursor",function(){this.cursor=function(a){var b=a.target,c=0;if(b.selectionStart)c=b.selectionStart;else try{var d=document.selection.createRange();d.moveStart("character",-b.value.length),c=d.text.length}catch(e){c=0}return c}}).service("InputKeypress",["InputCursor",function(a){this.keypress=function(b){var c=a.cursor(b),d=b.target.value,e=d.split(".")[0].length,f=/^\+?(\d*\.\d{2})$/,g=b.which||b.keyCode||b.charCode,h=g>=48&&57>=g||46==g||8==g||16==g||37==g||39==g||0==g;return(f.test(d)&&c>e||!h)&&b.preventDefault(),h}}]).directive("stickyHelp",function(){return{restrict:"A",scope:!1,link:function(a){var b=function(){var a=angular.element(window).scrollTop()+angular.element(window).height();a<angular.element("footer").offset().top?(angular.element(".hello_box_float").css("visibility","visible"),angular.element(".hello_box_static").css("visibility","hidden")):(angular.element(".hello_box_static").removeAttr("style"),angular.element(".hello_box_float").removeAttr("style"))};angular.element(window).width()<768&&(b(),angular.element(window).bind("scroll",b)),a.$on("$destroy",function(){angular.element(window).width()<768&&angular.element(window).unbind("scroll",b)})}}}).directive("readMore",function(){return{restrict:"A",scope:{text:"@",className:"@",limit:"@"},template:'<span ng-bind-html="truncation"></span><span ng-if="!showAll">... <a ng-click="readMore()">{{\'TC625\'|t}}</a></span>',controller:["$scope",function(a){a.showAll=!1,a.truncation=a.text.substring(0,a.limit),a.readMore=function(){a.showAll=!0,a.truncation=a.text},a.$watch("text",function(b,c){b!==c&&(a.truncation=a.showAll?b:b.substring(0,a.limit))})}]}}).directive("italkiDropdown",["$timeout",function(a){return{restrict:"A",require:"uiSelect",link:function(b,c,d,e){if(d.name){var f="refreshDropdown."+d.name;b.$on(f,function(){e.refreshItems()})}e.open="false"!==d.isOpen,e.close=function(b){e.open&&(e.ngModel&&e.ngModel.$setTouched&&e.ngModel.$setTouched(),(e.resetSearchInput||void 0===e.resetSearchInput)&&(e.search=""),a(function(){e.focusser.prop("disabled",!1)},0,!1))},b.$watch("$select.selected",function(a){e.setActiveItem(a)}),b.$watch("$select.items",function(a){var b=0,c=a.length,d=!0;if(Array.isArray(e.selected))d=0===e.selected.length;else if("object"==typeof e.selected&&e.selected)for(var f in e.selected){d=!1;break}if(c>0){for(;c>b&&(!e.selected||a[b].v!==e.selected.v);b++);""===a[0].v&&d&&(b=0),e.activeIndex=c>b?b:-1}}),c.on("click",".ui-select-choices-row",function(a){var b=c.find(".ui-select-choices-row");e.activeIndex=b.index(a.currentTarget)})}}}]).directive("teacherSearchSticky",["$document","$window","$timeout",function(a,b,c){return{restrict:"E",scope:{zIndex:"="},link:function(d,e){function f(){a.width()<d.minWidth||a.width()>d.maxWidth?e.removeAttr("style").removeClass():c(function(){g()})}function g(){h=e.parent().outerHeight(),(a.width()>=d.minWidth||a.width()<d.maxWidth||!d.maxWidth&&!d.minWidth)&&(a.scrollTop()>=e.parent().offset().top?(e.parent().css({height:h,zIndex:"1040"}),e.attr("class",j),e.css({position:"fixed",top:i,left:0,right:0,zIndex:k})):(e.removeAttr("style").removeClass(),e.parent().removeAttr("style")))}var h=0,i=0,j=null,k=d.zIndex||1040;c(function(){h=e.parent().outerHeight(),j=e.parent().attr("class"),a.on("scroll",g)}),angular.element(b).on("resize",f),d.$on("$destroy",function(){a.off("scroll",g),angular.element(b).off("resize",f)})}}}]).directive("searchTagsSticky",["$document","$timeout","$window",function(a,b,c){return{restrict:"E",scope:{desktop:"@",mobile:"@",zIndex:"="},link:function(d,e){function f(){a.width()<d.minWidth||a.width()>d.maxWidth?e.removeAttr("style").removeClass():b(function(){h=e.parent().outerHeight(),a.width()>991&&d.desktop&&(j=angular.element("."+d.desktop).offset().top,i=angular.element("."+d.desktop).outerHeight()),a.width()<992&&d.mobile&&(j=angular.element("."+d.mobile).offset().top,i=angular.element("."+d.mobile).outerHeight()),g()})}function g(){(a.width()>=d.minWidth||a.width()<d.maxWidth||!d.maxWidth&&!d.minWidth)&&(a.width()>991&&d.desktop&&(j=angular.element("."+d.desktop).offset().top,i=angular.element("."+d.desktop).outerHeight()),a.width()<992&&d.mobile&&(j=angular.element("."+d.mobile).offset().top,i=angular.element("."+d.mobile).outerHeight()),a.scrollTop()>=j?(e.parent().css({height:h,zIndex:"1040"}),k=e.parent().attr("class"),e.attr("class",k),e.css({position:"fixed",top:i,left:0,right:0,zIndex:d.zIndex})):(e.removeAttr("style").removeClass(),e.parent().removeAttr("style")))}var h=0,i=0,j=0,k=null,l=angular.element(c);b(function(){h=e.parent().outerHeight(),a.on("scroll",g)}),l.on("resize",f),d.$on("$destroy",function(){a.off("scroll",g),l.off("resize",f)})}}}]),angular.module("kp.teacher").directive("kpInstantLessonRequestBtn",["InstantLessonRequestModal","LoginAndActive","$log","$state",function(a,b,c,d){return{restrict:"A",scope:{teacher:"=",instantFilter:"="},link:function(d,e,f){c.debug("Instant teacher (dir): ",d.teacher),c.debug("Instant filter (dir): ",d.instantFilter);var g=1===d.instantFilter?!0:!1;g&&e.on("click",function(c){c.stopPropagation(),b.open()&&a.open(d.teacher)})}}}]).controller("$$InstantLessonRequestCtrl",["$scope","$rootScope","Session","teacher","$state","NOEnoughITCModal",function(a,b,c,d,e,f){var g=_.filter(d.language_obj_s,{is_teaching:1}),h={};a.teacher=angular.copy(d),a.result=h,b.$on("kp.BrowserBackOrForwardBtnClick",function(){a.$dismiss()}),g.length>1?a.languages=g:h.selected={language:g[0].language},a.checked=!1,c.instantRequest({teacher_id:d.id,language:g[0].language}).then(function(b){var c=b.data,d=c.available_itc,e=parseInt(c.session_itc,10);0>d-e&&(a.$close(),f.open())},function(b){a.error=b})["finally"](function(){a.checked=!0}),a.confirm=function(){a.$close(),e.go("InstantRequest",{teacherId:d.id,language:h.selected.language},{reload:!0})}}]).service("InstantLessonRequestModal",["$rootScope","$modal",function(a,b){this.open=function(c){a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/teacher/{0}/schedule/instanttutoring".format(c.id),title:"Instant Tutoring Request"});var d=b.open({templateUrl:"/views/teacher/instant.lesson.request.modal.html",controller:"$$InstantLessonRequestCtrl",resolve:{teacher:function(){return c}}});return d.result}}]).service("ResizeVideoService",["$log","$window","embeddedVideoSizes",function(a,b,c){this.resize=function(a,d){var e,f=(angular.element(b),0),g=function(a){var b,d;return b=c.youtube.height,d=c.youtube.width,b/d},h=function(a,b){if(e=(new Date).getTime(),0==f)f=(new Date).getTime();else{if(100>e-f)return void(f=(new Date).getTime());f=(new Date).getTime()}$(b[0]).removeAttr("height").removeAttr("width");var c=$(a.siblingContainer).width(),d=c*g(a.videoType);$(b[0]).attr("width",c).attr("height",d)};return function(){h(a,d)}}}]).service("InstantTeacherNotificationService",["$kpSocket","$log",function(a,b){var c=!1;this.subscribe=function(d,e){c&&this.unsubscribe();var f="0";e&&(f=""+e);a.send({type:"i_tutor_sub",ids:f});a.appendHandler(function(a){angular.isObject(a)&&(b.debug("instant teacher handler: data ->",a),d(a))}),c=!0},this.unsubscribe=function(){c=!1,a.send({type:"i_tutor_unsub"}),a.cleanHandler()}}]),angular.module("kp.teacher").constant("FromConfig",{arabic:["Egypt","Syrian Arab Republic"],"arabic(egyptian)":["Egypt"],"arabic(modernstandard)":["Egypt"],bulgarian:["Bulgaria"],catalan:["Spain"],chinese:["China","Taiwan"],"chinese(cantonese)":["China","Hong Kong"],czech:["Czech Republic"],danish:["Denmark"],dutch:["Netherlands"],english:["United States","United Kingdom","Canada","Australia","South Africa","Ireland","New Zealand"],"filipino(tagalog)":["Philippines"],french:["France","Canada","Belgium"],german:["Germany","Austria"],greek:["Greece"],hebrew:["Israel"],hindi:["India"],hungarian:["Hungary"],indonesian:["Indonesia"],italian:["Italy"],japanese:["Japan"],korean:["Korea, Republic of"],norwegian:["Norway"],"persian(farsi)":["Iran, Islamic Republic of"],polish:["Poland"],portuguese:["Brazil","Portugal"],romanian:["Romania"],russian:["Russian Federation","Ukraine","Belarus"],serbian:["Serbia"],spanish:["Spain","Venezuela","Mexico","Colombia","Argentina","Peru","Chile"],swedish:["Sweden"],thai:["Thailand"],turkish:["Turkey"],ukrainian:["Ukraine"],vietnamese:["Vietnam"]}),angular.module("kp.teacher").directive("teacherCard",function(){return{restrict:"E",templateUrl:"/views/teacher/directives/teacher.card.html",scope:{teacher:"="},controller:["$scope","$element","$timeout","geeService",function(a,b,c,d){a.currentTabIndex=0,a.teachLanguages=[],a.speakLanguages=[],a.teacher.language_obj_s.forEach(function(b){b.is_teaching&&b.level>5&&a.teachLanguages.push(b),!b.is_teaching&&b.level>3&&a.speakLanguages.push(b)}),a.isNewTeacher=Math.ceil((new Date-new Date(a.teacher.teacher_info_obj.first_valid_time))/864e5)<=21,a.teacherIntro="",a.teacherIntroLength=0,a.teacher.teacher_info_obj.intro.split("").forEach(function(b){b.charCodeAt(0)>128?a.teacherIntroLength=a.teacherIntroLength+2:a.teacherIntroLength=a.teacherIntroLength+1,a.teacherIntroLength<280&&(a.teacherIntro=a.teacherIntro+b)}),a.teacherIntroLength>280&&(a.teacherIntro=a.teacherIntro+"..."),a.speakLanguages.sort(function(a,b){return a.level<b.level||a.language>b.language}),a.teachLanguages.sort(function(a,b){return a.level<b.level||a.language>b.language}),a.playUrlObj={url:"",canplay:!1},a.teachersAvailabilities=[];var e=[[],[],[],[]];a.teacher.teacher_info_obj.available_schedule&&a.teacher.teacher_info_obj.available_schedule.forEach(function(a){a.forEach(function(a,b){e[b].push(a)})});var f=new Date,g=f.getUTCDay();a.teachersAvailabilitiesLabel=["C0910","C0911","C0912","C0913","C0914","C0915","C0916"],a.teachersAvailabilitiesLabel=a.teachersAvailabilitiesLabel.slice(g).concat(a.teachersAvailabilitiesLabel.slice(0,g)),e.forEach(function(a,b,c){var d=a.slice(g).concat(a.slice(0,g));c[b]=d}),a.teachersAvailabilities=e;var h=function(b){var c=KP.Utils.getViedoUrl(b);if(c.canplay&&c.youtube&&"cn"!==KP.COUNTRY&&"ir"!==KP.COUNTRY)a.playUrlObj.url=c.url+"?rel=0&showinfo=0&color=white",a.playUrlObj.canplay=!0,a.playUrlObj.youtube=c.youtube,a.playUrlObj.youtubeID=c.ytID;else if(c.canplay&&c.vimeo&&"cn"!==KP.COUNTRY&&"kh"!==KP.COUNTRY&&"id"!==KP.COUNTRY&&"my"!==KP.COUNTRY&&"th"!==KP.COUNTRY&&"vn"!==KP.COUNTRY){var d=c.url;if(d&&"string"==typeof d){/\d/.test(d[d.length-1])||(d=d.substring(0,d.length-1)),a.playUrlObj.url="";var e=d.split("/");/^\d+$/.test(e[e.length-1])&&(a.playUrlObj.url="https://player.vimeo.com/video/"+e[e.length-1],a.playUrlObj.canplay=!0)}}else!c.canplay&&c.youku?(a.playUrlObj.url=c.url,a.playUrlObj.canplay=!1):c.canplay&&c.qiniu&&(a.playUrlObj.canplay=1,a.playUrlObj.url=c.url,a.playUrlObj.qiniu=1)};h(a.teacher.teacher_info_obj.video_url),!a.playUrlObj.canplay&&angular.isString(a.teacher.oms_apply_video_url)&&a.teacher.oms_apply_video_url&&h(a.teacher.oms_apply_video_url)}]}}).directive("pulseCardHover",["$window",function(a){return{restrict:"A",link:function(b,c){c.on("mouseenter",function(){a.innerWidth>767&&c.addClass("animated card-pulse")}),c.on("mouseleave",function(){a.innerWidth>767&&c.removeClass("animated card-pulse")})}}}]),angular.module("kp.dashboard",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("dashboard",{parent:"kp",url:"/dashboard",authenticate:"user",templateUrl:"/views/dashboard/index.html",controller:"DashboardCtrl",data:{role:"user",title:function(){return"M0073".translate()+" - italki"}}})}]),angular.module("kp.dashboard").controller("DashboardCtrl",["$scope","$rootScope","$state","$interval","contactRes","articleRes","Session","User","Teacher","Account","$timeout","$log","$sce","ScheduleSessionModal","localStorageService","Restangular","$modal","ENV","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,g){function s(){var b=a.currentUser;return b&&b.timezone_iana?moment.tz.zone(a.currentUser.timezone_iana).parse(new Date)===(new Date).getTimezoneOffset():!0}function t(){a.currentUser?(f.getOneFeaturedArticles().get({lang:a.currentUser.learning_language}).then(function(b){a.article=b.data}),e.teacher().get({simplify:1,page_size:4}).then(function(b){a.myTeachers=b.data}),a.currentUser.is_teacher&&e.student().get({simplify:1,page_size:4}).then(function(b){a.myStudents=b.data}),e.friend().get({simplify:1,page_size:4}).then(function(b){a.myFriends=b.data})):k(t,500)}b.promoBox={show:!0};var u="dashboard.lc1710";k(function(){var a=o.cookie.get(u);a&&(b.promoBox.show=!1)},500);var v=moment.utc([2018,1,1,0,0,0,0]).unix(),w=moment.utc([2017,11,27,0,0,0,0]).unix(),x=moment().utc().unix(),y=w-x,z=v-x;(0>z||y>0)&&(b.promoBox.show=!1),b.promoBox2={show:""},a.referral={show:!0},p.one("languagechallenge").get().then(function(c){"2b"==c.data.template_name&&(b.promoBox2.show=!0);var d="dashboard.lc17102";a.closeBox2=function(){o.cookie.set(d,!0),b.promoBox2={show:!1}},k(function(){var a=o.cookie.get(d);a&&(b.promoBox2.show=!1)},500);var e=moment.utc([2018,2,1,0,0,0,0]).unix(),f=moment.utc([2018,1,1,0,0,0,0]).unix(),g=moment().utc().unix(),h=f-g,i=e-g;(0>i||h>0)&&(b.promoBox2.show=!1)}),a.openSchedule=function(){n.open(a)},a.currentTime=function(){var b=a.currentUser;return b&&b.timezone_iana?b.is_am?moment().tz(a.currentUser.timezone_iana).format("h:mm a"):moment().tz(a.currentUser.timezone_iana).format("HH:mm"):""},a.tzIsSuggestOne=s;var A=function(){return a.currentUser&&(a.currentUser.is_pro||a.currentUser.is_tutor)};a.isTeacher=A,a.teacher={statistics:[]},a.statistics={all:0,action_required:0,waiting_response:0,in_problem:0,activepackages:0,this_month_completed_sessions:0,this_month_notebooks:0,loaded:!1},i.getTeacherDashboardStat().get().then(function(b){a.teacher.statistics=b.data,a.teacher.statistics.loaded=!0}),a.teacher.statistics={all:0,new_requests:0,on_going:0,in_problem:0,completed_cancelled:0,packages:0,this_month_completed_sessions:0,this_month_notebooks:0,loaded:!1},j.getDashboardStat().get().then(function(b){a.statistics=b.data,a.statistics.loaded=!0,0==a.statistics.all?A()||i.getRandomTeacherList().get({language:a.currentUser.learning_language,page_size:4}).then(function(b){a.teachers=b.data}):g.explore({type:"live_upcoming"}).then(function(b){var d=b.data;_.forEach(d,function(a){var b=a.session_type;_.contains(["0","3"],b)&&(a.translateId="TS040"),_.contains(["4"],b)&&(a.translateId="TS048"),_.contains(["6","2"],b)&&(a.translateId="TS038")}),a.upsession_items=b.data,a.upcoming_length=b.meta.total,a.upsession_meta=b.meta,l.debug("session list :",b),a.goToDetail=function(a){c.transitionTo("sessionDetail",{sessionId:a.session_id})}})}),t(),a.filter={language:"",page_size:10,page:1};var B=function(){a.loadingFlag=!0;var b=a.activity_items;return h.getActivityList().get(a.filter).then(function(c){b=b&&1!=a.filter.page?_.union(b,c.data):c.data,a.activity_items=b,a.meta=c.meta})["finally"](function(){a.loadingFlag=!1,a.loadMoreFlag=!1})};B(),a.reload=function(){a.filter.page=1,a.activity_items=null,a.meta=null,B()},a.loadMore=function(){return a.loadMoreFlag=!0,a.filter.page+=1,B()},a.html=function(a){return a?m.trustAsHtml(a.replace("\n","<br/>")):""},a.goToSelfUrl=function(a){1==a.activity_type?c.transitionTo("questionAlias.entity",{id:a.post_id}):3==a.activity_type?c.transitionTo("discussionAlias.entity",{id:a.post_id}):5==a.activity_type?c.transitionTo("notebookAlias.entity",{userId:a.poster_obj.id,id:a.post_id}):11==a.activity_type&&c.transitionTo("languagehackingentity",{language:a.post_obj.language,sort:a.post_obj.sort,id:a.post_obj.user_mission_id})},a.ReferralData=null;var C=function(){return j.getReferralData().get().then(function(b){a.ReferralData=b.data,a.ReferralData.id=a.currentUser.id})};a.delReferralData=function(){return j.delReferralData().post().then(function(b){a.ReferralData=null})},C()}]),angular.module("kp.article",["restangular","kp.teacher","base.ui.alert"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("article",{parent:"kp",url:"/articles",templateUrl:"/views/article/index.html",controller:"ArticleListCtrl",data:{}}).state("article.lang",{parent:"kp",url:"/articles/{lang}",templateUrl:"/views/article/index.html",controller:"ArticleListCtrl"}).state("article.tags",{parent:"kp",url:"/articles/tags/{tag}",templateUrl:"/views/article/index.html",controller:"ArticleListCtrl"}).state("articleDetail",{parent:"kp",url:"/article/{id}/{title}",templateUrl:"/views/article/detail.html",controller:"ArticleDetailCtrl"})}]),angular.module("kp.article").controller("ArticleListCtrl",["$scope","$state","articleRes","$stateParams","$translate","$log",function(a,b,c,d,e,f){a.languageTime={show:!0};var g=moment.utc([2018,1,1,0,0,0,0]).unix(),h=moment.utc([2017,11,27,0,0,0,0]).unix(),i=moment().utc().unix(),j=h-i,k=g-i;(0>k||j>0)&&(a.languageTime.show=!1),a.teacherApply=function(){return b.transitionTo("apply"),EmptyPromise.getEmptyPromise()},c.getLanguageOfArticles().get().then(function(b){a.lans=b.data}),a.filter={lang:d.lang||"",tag:d.tag||"",page:1},a.filter.tag?(a.titleCode="AR524",a.titleParams=[a.filter.tag]):(a.titleCode="AR501",a.titleParams=[e.instant(a.filter.lang?a.filter.lang:"MH225")]),a.reload=function(){b.transitionTo("article.lang",a.filter)};var l=1;a.loadedFlag=!0,a.meta={};var m=function(b){return a.loadedFlag=!1,1==b&&(a.items=null),a.filter.page=b,c.fetch(a.filter).then(function(c){a.loadedFlag=!0;var d=a.items;d=d&&1!=b?_.union(d,c.data):c.data,a.items=d,a.meta=c.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};m(l),a.loadMore=function(){return a.loadMoreFlag=!0,m(++l)}}]).controller("ArticleDetailCtrl",["$scope","articleRes","Teacher","$state","$sce","$stateParams","$filter","$timeout","CourseListModal","EmptyPromise","$sce",function(a,b,c,d,e,f,g,h,i,j,e){var k=f.id;b.getArticleById(k).get().then(function(b){var d=b.data;d.content=e.trustAsHtml(d.content),a.article=d,a.items_f=b.meta.featured_teacher_post_obj,a.items_t=b.meta.other_teacher_post_obj_s,a.tags=b.meta.teacher_post_tag_s,a.is_post_praise=b.meta.is_post_praise,c.getRandomTeacherList().get({language:a.article.learn_language,page_size:3}).then(function(b){a.teachers=b.data})}),a.toArticledetail=function(a){d.transitionTo("articleDetail",{id:a.id,title:g("titleRevert")(a.title)})},a.goToProfile=function(){var b=a.article;b&&b.creator_obj&&(b.creator_obj.is_pro||b.creator_obj.is_tutor?d.go("teacher",{id:b.creator_obj.id}):d.go("user",{id:b.creator_obj.id}))},a.praise=function(c){return a.is_post_praise?j.getEmptyPromise():(a.is_post_praise=!0,b.praiseArticle(c.id).post({}).then(function(b){return 1==b.data.success?a.article.praise_count=b.data.praise_count:a.is_post_praise=!1,KP.API.SUCC},function(a){return KP.API.ERROR}))}}]),angular.module("kp.article").filter("articleImageUrl",["$location","ENV",function(a,b){return function(a,c){var d=b.cdn.article.us;if(a)return c=c&&[250,400].indexOf(c)>-1?"_"+c:"_0",d+"/"+a+c+".jpg"}}]),angular.module("kp.article").directive("kpArticleMeta",["$location","$filter",function(a,b){return{restrict:"E",scope:{article:"="},link:function(c,d,e){function f(){var d=c.article,e=angular.element,f='<meta property="{0}" content="{1}">',g=document.head,h=d.id,i=d.publish_time,j=d.update_time,k="article",l=d.creator_obj.nickname,m=a.absUrl(),n="{0} - {1} - {2}".format(d.title,d.learn_language.translate(),"learning article"),o="{0} - {1} {2}".format(d["abstract"].replace(/"/g,"'"),d.learn_language.translate(),"learning article"),p=b("articleImageUrl")(d.image_url);e(g).append(f.format("bt:id","{'article-id:{0}'}".format(h))),e(g).append(f.format("bt:pubDate",i)),j&&e(g).append(f.format("bt:modDate",j)),e(g).append(f.format("bt:article-category",d.learn_language)),e(g).append(f.format("bt:author",l)),e(g).append(f.format("og:type",k)),e(g).append(f.format("og:url",m)),e(g).append(f.format("og:title",n)),e(g).append(f.format("og:description",o)),e(g).append(f.format("og:image",p))}var g=!1;c.$watch("article",function(a){angular.isObject(a)&&!g&&(f(),g=!0)}),c.$on("$destroy",function(){angular.element("meta[property^=og]").remove(),angular.element("meta[property^=bt]").remove()})}}}]),angular.module("kp.article").service("articleRes",["Restangular",function(a){var b=a.service("article");this.fetch=function(a){_.isObject(a)?a:{lang:"all"};return b.one().get(a)},this.getLanguageOfArticles=function(){return b.one("languages")},this.getFeaturedArticles=function(){return b.one("featured");
},this.getArticleById=function(a){return b.one(a.toString())},this.praiseArticle=function(a){return b.one(a.toString()).all("praise")},this.getOneFeaturedArticles=function(){return b.one("one_featured")}}]),angular.module("kp.session",["ngSanitize"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/sessions","/lesson/sessions"),b.when("/lesson","/lesson/sessions"),a.state("session",{parent:"kp",url:"/lessons",templateUrl:"/views/sessions/session.bs.html",data:{role:"user"}}).state("session.explore",{url:"/sessions?type",templateUrl:"/views/sessions/session.explore.html",controller:"SessionExploreCtrl",data:{role:"user",title:function(){return"M0038".translate()+" - italki"}}}).state("session.exploreViaType",{url:"/sessions/{viewType}",templateUrl:"/views/sessions/session.explore.html",controller:"SessionExploreCtrl",data:{role:"user",title:"M0038"}}).state("session.package",{url:"/packages",templateUrl:"/views/sessions/session.package.html",controller:"SessionPackageCtrl",data:{role:"user",title:function(){return"M0076".translate()+" - italki"}}}).state("session.packageViaType",{url:"/packages/{viewType}",templateUrl:"/views/sessions/session.package.html",controller:"SessionPackageCtrl",data:{role:"user",title:"M0076"}}).state("session.problem",{url:"/problems",templateUrl:"/views/sessions/session.problem.html",controller:"SessionProblemCtrl",data:{role:"user",title:function(){return"M0081".translate()+" - italki"}}}).state("session.problemViaType",{url:"/problems/{viewType}",templateUrl:"/views/sessions/session.problem.html",controller:"SessionProblemCtrl",data:{role:"user",title:function(){return"italki - "+"M0081".translate()}}}).state("schedule",{parent:"kp",url:"/lesson/session/schedule?teacherId&teach&priceId",templateUrl:function(a){return"/views/sessions/request/schedule.html"},controller:"newSessionScheduleCtrl",data:{role:"user",title:function(){return"italki - "+"TS604".translate()}}}).state("trial",{parent:"kp",url:"/lesson/session/trial?teacherId",templateUrl:function(a){return"/views/sessions/request/schedule.trial.html"},controller:"newSessionScheduleCtrl",data:{role:"user",title:function(){return"italki - "+"TS604".translate()}}}).state("sessionRequest",{parent:"kp",url:"/lesson/session/request?priceId&type&length",templateUrl:function(a){var b="2"==a.type;return"/views/sessions/request/"+(b?"package":"request")+".html"},controller:"newSessionRequestCtrl",data:{role:"user",title:function(){return"italki - "+"TS604".translate()}}}).state("TrialRequest",{parent:"kp",url:"/lesson/trial/request?teacherId&language",templateUrl:function(a){return"/views/sessions/request/trial.html"},controller:"TrialRequestCtrl",data:{role:"user"}}).state("InstantRequest",{parent:"kp",url:"/lesson/instant/request?teacherId&language",templateUrl:function(a){return"/views/sessions/request/instant.html"},controller:"InstantRequestCtrl",data:{role:"user"}}).state("PackageRequest",{parent:"kp",url:"/lesson/package/request?priceId&length",templateUrl:function(a){return"/views/sessions/request/package.html"},controller:"PackageRequestCtrl",data:{role:"user",title:function(){return"italki - "+"TS605".translate()}}}).state("sessionProblemDetail",{parent:"kp",url:"/lesson/problem/{sessionId:int}",templateUrl:"/views/sessions/detail/session.has.problem.html",controller:"SessionProblemDetailCtrl",data:{role:"user",title:function(){return"italki - "+"M0103".translate()}}}).state("sessionDetail",{parent:"kp",url:"/lesson/session/{sessionId:int}?fromUrl",templateUrl:"/views/sessions/detail/session.html",controller:"sessionDetailCtrl",data:{role:"user",title:function(){return"italki - "+"M0102".translate()}}}).state("sessionPackageDetail",{parent:"kp",url:"/lesson/package/{id:int}",templateUrl:"/views/sessions/detail/session.package.html",controller:"SessionPackageDetailCtrl",data:{role:"user",title:function(){return"italki - "+"M0101".translate()}}}).state("session.calendar",{parent:"kp",url:"/lessons/calendar",templateUrl:"/views/sessions/session.calendar.html",controller:"SessionCalendarCtrl"})}]).value("cgBusyDefaults",{backdrop:!0,delay:300,minDuration:700,wrapperClass:"kp-loader kp-loading"}),angular.module("kp.session").service("Session",["Restangular","$q","$timeout",function(a,b,c){return{sessionSchedule:function(b){return a.one("session/schedule").get(b)},checkUNPay:function(b){var c={unpay_id:b};return a.one("session","unpay_check").get(c)},checkITC:function(b,c){var d={};return c&&angular.extend(d,{schedule_time:c}),a.one("session/check/itcusd",b).get(d)},getUsersViaQ:function(b){var c={};return angular.isDefined(b)&&b&&angular.extend(c,{type:"problem_all"}),a.one("session/oppo-users").get(c)},teacher:function(){return a.one("session").one("teacher")},explore:function(b){return a.one("session").get(b)},lessons:function(){return a.one("session")},"package":function(b){return a.one("session/package").get(b)},getPackageUsersViaQ:function(){return a.one("session/package/oppo-users").get()},problem:function(b){return a.one("session/problems").get(b)},sessionRequest:function(){return a.service("session/request")},sessionPackageRequest:function(){return a.service("session/package/request")},sessionTrialRequest:function(){return a.service("session/request-trial")},newSessionPackageRequest:function(b){return a.one("session/package/request").get({course_price_id:b})},checkSessionTimeAvailable2:function(b,c,d){return a.one("teacher/{0}".format(b)).post("available2",{time:d,course_price_id:c})},newSession:function(b){return a.one("session/request").get({course_price_id:b})},instantRequest:function(b){return a.one("session/request-instant_tutoring").get(b)},newInstantRequest:function(b){return a.one("session").post("request-instant_tutoring",b)},trialRequest:function(b){return a.one("session/request-trial").get(b)},newTrialSession:function(b){return a.one("session").post("request-trial",b)},getSkypeAccount:function(b){return a.one("session").one("other_skype_account").get(b)}}}]),angular.module("kp.session").controller("$$ScheduleModalInstanceCtrl",["$scope","$modalInstance","teacher","lessonLength","shouldBeAfter3Days","excludeLessonId","disabledItems","$log",function(a,b,c,d,e,f,g,h){a.teacher=c,a.disabledItems=g,a.lessonLength=d,a.shouldBeAfter3Days=e,a.excludeLessonId=f,a.ontimeupdate=function(b){h.debug("modal got time update:",b),a.$$selected=b},a.sure=function(){b.close(a.$$selected)}}]).controller("$$PackageExtensionModalCtrl",["$scope","$modalInstance","$log",function(a,b,c){var d={months:1};a.result=d,a.confirm=function(){b.close(d)}}]).controller("$$PackageModifyModalCtrl",["$scope","$modalInstance","pack","TimeSelectorModal","$sce",function(a,b,c,d,e){var f=angular.copy(c.valid_session_obj_s),g=[],h=15*c.session_duration;a.valid_session_obj_s=f,a.newSessions=g,a.pack=c,a.getStatusText=function(a){if(!a)return"";var b=a.package_session_status;return-1==b?"TS672".translate():"0"==b?"TS677".translate():a.status_html||""},a.remove=function(a){_.pull(g,a)},a.schedule=function(){d.show(KP.Utils.textIdToId(c.teacher_textid),g,!1,c.session_duration).then(function(a){if(a){var b=a.day.replace(/\//g,"-")+" "+a.time,c=moment(b).add(h,"m"),d={time:a.time,day:a.day,date:b,time_js:b,time_user:"{0} - {1}".format(moment(b).format("dddd MMM DD YYYY HH:mm"),c.format("HH:mm"))};g.push(d)}})},a.purge=function(a){a.package_session_status=-1},a.restore=function(a){a.package_session_status="0"},a.confirm=function(){var a=[],c={};angular.forEach(f,function(b){-1==b.package_session_status&&a.push(b)}),g.length>0&&(c.added=g),a.length>0&&(c.removed=a),b.close(c)}}]).controller("$$UpdateITCModalInstance",["$scope","$modalInstance","params","$log","InputKeypress",function(a,b,c,d,e){a.params=c,a.input_keypress=function(a){return e.keypress(a)},a.confirm=function(){a.change_itc_form.$valid&&b.close(a.params)}}]).controller("$$RaisePackageSessionProblemModalCtrl",["$scope","$modalInstance","session","$log","$translate",function(a,b,c,d,e){a.session=c,d.debug(c),a.confirm=function(){if(!angular.isDefined(a.problem.refund))return void(a.noRedund=!0);a.noRedund=!1;var c={next_status:"CE",problem_msg:a.problem.msg||"",problem_reason:a.problem.reason,refund_itc_usd:a.problem.refund};b.close(c)}}]).controller("$$RaiseSessionProblemModalCtrl",["$scope","$rootScope","$modalInstance","session","$log","$translate","InputKeypress","$filter",function(a,b,c,d,e,f,g,h){function i(){var b=[],c=a.problem.reason;switch(4!=d.session_type&&b.push(m),c){case"1":case"100":case"3":b.push(p),b.push(n);break;case"2":b.push(o)}a.options=b}function j(){var b=a.problem.answer;a.showMoney=b&&"C"==b.v}a.input_keypress=function(a){return g.keypress(a)},a.problem={},a.voucher_sn=d.voucher_sn;var k=f.instant,l=KP.Utils.format,m=(d.user_type,{v:"S",t:k("TP601")}),n={v:"C",t:k("TP606")+" "+l(k("TP600"),"0.10 - "+(d.session_price_usd/100).toFixed(2))},o={v:"TS",t:k("TP604")},p={v:"TT",t:k("TP605")};a.voucher_sn&&d.voucher_real_amount&&(a.session_real_pay=d.session_price_usd-d.voucher_real_amount,n=b.currentUser.id===d.teacher_id?{v:"TS",t:k("TP663")}:{v:"TS",t:k("TP662").format((a.session_real_pay/100).toFixed(2))}),a.options=[],a.$watch("problem.money",function(b){if(e.debug("money changed:",b),angular.isDefined(b)&&a.showMoney){var c=parseInt(d.session_price_usd,10),b=parseInt(100*b);c>=b&&b>=10?(a.noMoney=!1,a.error=null):a.error={money:"ML203".translate().format("0.10",(d.session_price_usd/100).toFixed(2))}}}),a.onReasonChange=i,a.onAnswerChange=j,a.noMoney=!1,a.confirm=function(){if(!a.error){var b=a.problem.answer.v,e=Number(a.problem.money),f={problem_msg:a.problem.msg||"",problem_reason:a.problem.reason};if("S"==b&&(e=-1),"TT"==b&&(e=0),"TS"==b&&(e=d.session_price_usd),"C"==b){if(!a.problem.money)return void(a.noMoney=!0);e=100*e}f.refund_itc_usd=e.toFixed(),f.next_status="S"==b?"S":"CE",c.close(f)}}}]).controller("$$ConfirmSessionModalInstance",["$scope","$modalInstance","$stateParams","$log","Restangular",function(a,b,c,d,e){a.toggle=!1,a.evaluation={rate:"",comment:"",public_basic_vote_tag_id_list:[],public_normal_vote_tag_id_list:[],personal_vote_tag_id_list:[]},a.sessionId=c.sessionId;var f=function(){return e.one("teacher/feedback/tag").get({session_id:a.sessionId}).then(function(b){var c=b.data;a.session_count=c.session_count,a.teacher_info=c.teacher_info,a.public_basic_tag_list=_.shuffle(c.public_basic_tag_list),a.public_normal_tag_list=_.shuffle(c.public_normal_tag_list),a.personal_tag_list=_.shuffle(c.personal_tag_list),a.public_normal_tag_list.length>0||a.personal_tag_list>0?a.show=!0:a.show=!1})};f(),a.toggleBlue=function(b){var c="#"+b,d=$(c).hasClass("blue-btn");if(d){for(var e=a.evaluation.personal_vote_tag_id_list,f=0;f<e.length;f++)if(e[f]==b){e.splice(f,1);break}}else a.evaluation.personal_vote_tag_id_list.push(b)},a.toggleGreen1=function(b){var c="#"+b,d=$(c).hasClass("green-btn");if(d){for(var e=a.evaluation.public_basic_vote_tag_id_list,f=0;f<e.length;f++)if(e[f]==b){e.splice(f,1);break}}else a.evaluation.public_basic_vote_tag_id_list.push(b)},a.toggleGreen2=function(b){var c="#"+b,d=$(c).hasClass("green-btn");if(d){for(var e=a.evaluation.public_normal_vote_tag_id_list,f=0;f<e.length;f++)if(e[f]==b){e.splice(f,1);break}}else a.evaluation.public_normal_vote_tag_id_list.push(b)},a.confirm=function(){b.close(a.evaluation)}}]).controller("$$ReasonModalCtrl",["$scope","$modalInstance",function(a,b){var c={reason:""};a.result=c,a.confirm=function(){b.close(a.result)}}]).controller("$$FeedbackModalCtrl",["$scope","$modalInstance",function(a,b){var c={comment:""};a.result=c,a.confirm=function(){c.comment.length>1e3&&b.open(c),b.close(c)}}]).service("RaiseSessionProblemModal",["$modal","$rootScope",function(a,b){this.show=function(b){var c=b&&b.session_type,d="2"==c,e="/views/component/session.submit.problem.html";d&&(e="/views/component/session.submit.problem.2.html");var f=a.open({size:"lg",templateUrl:e,resolve:{session:function(){return b}},controller:d?"$$RaisePackageSessionProblemModalCtrl":"$$RaiseSessionProblemModalCtrl"});return f.result}}]).service("TimeSelectorModal",["$modal",function(a){this.show=function(b,c,d,e,f,g,h){if(!b)return"";var i=a.open({size:"",templateUrl:"/views/component/course.time.selector.new.html",windowClass:"time-schedule",controller:"$$ScheduleModalInstanceNewCtrl",resolve:{teacher:function(){return{id:b,currentUserIsTeacher:d}},disabledItems:function(){return c||[]},lessonLength:function(){return e||"1"},shouldBeAfter3Days:function(){return f||""},excludeLessonId:function(){return g||""},repeatable:function(){return!!h}}});return i.result}}]).controller("$$ScheduleModalInstanceNewCtrl",["$scope","$modalInstance","teacher","lessonLength","shouldBeAfter3Days","excludeLessonId","disabledItems","repeatable","$log",function(a,b,c,d,e,f,g,h,i){a.teacher=c,a.disabledItems=g,a.lessonLength=d,a.shouldBeAfter3Days=e,a.excludeLessonId=f,a.repeatable=h,a.ontimeupdate=function(c){a.$$selected=c,b.close(a.$$selected)},a.sure=function(){b.close(a.$$selected)}}]).service("SessionConfirmModal",["$modal",function(a){this.show=function(){var b=a.open({templateUrl:"/views/component/session.confirm.modal.html",windowClass:"confirm-session-modal",controller:"$$ConfirmSessionModalInstance"});return b.result}}]).service("UpdateITCModal",["$modal",function(a){this.show=function(b){var c=b||"",d=a.open({templateUrl:"/views/component/update.itc.modal.html",windowClass:"update-itc-modal",controller:"$$UpdateITCModalInstance",resolve:{params:function(){return{oldValue:c}}}});return d.result}}]).service("PackageExtensionModal",["$modal",function(a){this.open=function(){var b=a.open({templateUrl:"/views/component/package.extension.modal.html",windowClass:"package-extension-modal",controller:"$$PackageExtensionModalCtrl"});return b.result}}]).service("PackageModifyModal",["$modal",function(a){this.open=function(b){var c=a.open({templateUrl:"/views/component/package.modify.modal.html",windowClass:"package-modify-modal",controller:"$$PackageModifyModalCtrl",resolve:{pack:function(){return b}}});return c.result}}]).service("ReasonModal",["$modal",function(a){this.open=function(){var b=a.open({templateUrl:"/views/component/reason.modal.html",windowClass:"reason-modal",controller:"$$ReasonModalCtrl"});return b.result}}]).service("FeedbackModal",["$modal",function(a){this.open=function(){var b=a.open({templateUrl:"/views/component/feedback.modal.html",windowClass:"feedback-modal",controller:"$$FeedbackModalCtrl"});return b.result}}]).service("WechatPopUp",["$modal",function(a){this.open=function(){var b=a.open({size:"lg",templateUrl:"/views/component/wechat.html"});return b.result}}]).service("isWechat",["Restangular",function(a){this.binded=function(){return a.service("account").one("third-part").get().then(function(a){return a.data.wechat_account})}}]),angular.module("kp.session").controller("$$PendingPurchaseSuccessModalCtrl",["$scope","$rootScope","localStorageService","$log","Session","$timeout","required","$modalInstance",function(a,b,c,d,e,f,g,h){a.type=g.type}]).controller("$$PendingPurchasePreSuccessModalCtrl",["$scope","$rootScope","localStorageService","$log","Session","$timeout","required","$modalInstance","$state",function(a,b,c,d,e,f,g,h,i){a.session_type=g.session_type,a.id_list=g.id_list,a.lesson_amount=g.lesson_amount,a.goToDetail=function(a){a&&(h.close({id_list:a}),i.transitionTo("sessionDetail",{sessionId:a}))},a.goToDetailPackage=function(a){a&&(h.close({id_list:a}),i.go("sessionPackageDetail",{id:a}))}}]).controller("$$PendingPurchasePreFailModalCtrl",["$scope","$rootScope","localStorageService","$log","Session","$timeout","required","$modalInstance",function(a,b,c,d,e,f,g,h){a.payError=g.payError}]).controller("$$PendingPurchasePreCheckModalCtrl",["$scope","$rootScope","localStorageService","$log","Session","$timeout","required","$modalInstance","$state",function(a,b,c,d,e,f,g,h,i){var j,k;switch(a.sessionType=1,g.sessionType){case 2:a.sessionType=2,j=e.sessionPackageRequest(),k="requested_package";break;case 3:j=e.sessionTrialRequest(),k="requested_trial";break;case 1:j=e.sessionRequest(),k="requested_lesson"}j.post(g.sessionOrderInfo).then(function(a){var b=a.data.session_time_status_s;if(angular.forEach(b,function(a,b){if(1!=a.status);}),"teacher im account error"==a.data.msg)var c="CommunicationChanged";h.dismiss(c,b)},function(c){if(c&&"ItcNotEnough"==c.type){a.min=c.data.min_price,orderId=c.data.unpay_id,a.orderid=orderId,a.done=!0;var d="checkout";b.isOneStepPayment&&(b.currentUser.hasStripeList||b.currentUser.hasPaypalList)&&(d="oneStepCheckout");var e="({min:"+a.min+",orderid:"+a.orderid+",type:5,usetype:"+a.sessionType+"})";a.uiSref=d+e}else h.dismiss(c)})["finally"](function(){var a={learning_language:"requested_trial"===k?g.sessionOrderInfo.language:g.sessionData.course_obj.language,lesson_price:"requested_trial"===k?g.sessionData.session_itc_usd:g.sessionData.course_obj.course_price_obj.session_price_usd,teacher_ID:"requested_trial"===k?g.sessionData.teacher_obj.id:g.sessionData.course_obj.teacher_id,teacher_name:g.sessionData.teacher_obj.nickname,teacher_type:g.sessionData.teacher_obj.is_pro?"pro":"tutor",course_name:"requested_trial"===k?"Trial":g.sessionData.course_obj.title};"requested_package"===k&&(a.package_lessons=g.sessionData.course_obj.course_price_obj.package_length),window._bt&&_bt.track(k,a)}),a.submit=function(){h.close({orderId:orderId})}}]).controller("$$PendingPurchaseModalCtrl",["$scope","$rootScope","localStorageService","$log","Session","$timeout","required","$modalInstance","PendingPurchaseModal",function(a,b,c,d,e,f,g,h,i){function j(){return d.debug("poll unpay.........."),c.get("cancelPurchase")?(c.remove("cancelPurchase"),h.dismiss(),void f.cancel(k)):void e.checkUNPay(g.orderId).then(function(a){var b=a.data,c=b.session_type;if(a.data.id_list){var d=a.data.id_list[0];if(a.data.id_list.length>1)var e=1}b&&1==b.pay_status?(h.close(b),i.presuccess(c,d,e)):k=f(j,1800)},function(b){a.payError=b.type,b&&h.dismiss(b)})["finally"](function(){})}var k=null;a.$on("$destroy",function(){c.remove("currentPurchasePageShouldAutoClose"),f.cancel(k)}),f(j,3e3)}]).service("PendingPurchaseModal",["$modal",function(a){this.preCheck=function(b,c,d,e){var f=a.open({templateUrl:"/views/component/pending.purchase.pre.check.html",windowClass:"session-pending-pre-check",backdrop:"static",controller:"$$PendingPurchasePreCheckModalCtrl",resolve:{required:function(){return{itc:c,sessionOrderInfo:b,sessionType:d,sessionData:e}}}});return f.result},this.success=function(b){var c=a.open({templateUrl:"/views/component/pending.purchase.success.modal.html",windowClass:"session-pending-purchase-success",backdrop:"static",controller:"$$PendingPurchaseSuccessModalCtrl",resolve:{required:function(){return{type:b}}}});return c.result},this.presuccess=function(b,c,d){var e=a.open({templateUrl:"/views/component/pending.purchase.pre.success.html",windowClass:"session-pending-pre-success",backdrop:"static",controller:"$$PendingPurchasePreSuccessModalCtrl",resolve:{required:function(){return{session_type:b,id_list:c,lesson_amount:d}}}});return e.result},this.prefail=function(b){var c=a.open({templateUrl:"/views/component/pending.purchase.pre.fail.html",windowClass:"session-pending-pre-fail",backdrop:"static",controller:"$$PendingPurchasePreFailModalCtrl",resolve:{required:function(){return{payError:b}}}});return c.result},this.fail=function(){var b=a.open({templateUrl:"/views/component/pending.purchase.fail.modal.html",windowClass:"session-pending-purchase-fail",backdrop:"static"});return b.result},this.open=function(b){var c=a.open({templateUrl:"/views/component/pending.purchase.modal.html",windowClass:"session-pending-purchase",controller:"$$PendingPurchaseModalCtrl",backdrop:"static",resolve:{required:function(){return{orderId:b}}}});return c.result}}]),angular.module("kp.session").constant("SESSION_PROBLEM_VIEW_TYPES",[{v:"all",type:"problem_all",name:"C0024"},{v:"actionrequired",type:"problem_action_required",name:"TP791"},{v:"waiting",type:"problem_action_waiting",name:"TP793"},{v:"dispute",type:"problem_dispute",name:"TP794"},{v:"resolved",type:"problem_resolved",name:"TP792"}]).constant("SESSION_VIEW_TYPES",[{v:"all",type:"all",name:"C0024"},{v:"active",type:"all_active",name:"TP758"},{v:"inactive",type:"all_inactive",name:"TP759"},{v:"actionrequired",type:"need_todo",name:"MH103"},{v:"waiting",type:"waiting_response",name:"TP611"},{v:"request",type:"request",name:"TP750"},{v:"unscheduled",type:"not_scheduled",name:"TP756"},{v:"canceled",type:"canceled",name:"TP755"},{v:"upcoming",type:"live_upcoming",name:"TP757"},{v:"needconfirmation",type:"start_time_ended",name:"TP751"},{v:"problem",type:"problem_active",name:"TP753"},{v:"completed",type:"normal_completed",name:"TP752"},{v:"withnewmessages",type:"unread_message",name:"ML125"}]).constant("TEACHER_SESSION_VIEW_TYPES",[{v:"all",type:"all",name:"C0024"},{v:"newrequests",type:"new_requests",name:"TPA03"},{v:"upcoming",type:"live_upcoming",name:"TP757"},{v:"ongoing",type:"on_going",name:"TP768"},{v:"completedcancelled",type:"completed_cancelled",name:"TP769"},{v:"problem",type:"in_problem",name:"TP770"},{v:"withnewmessages",type:"with_new_message",name:"TP771"}]).constant("PACKAGE_VIEW_TYPES",[{v:"all",type:"all",name:"C0024"},{v:"active",type:"all_active",name:"TP069"},{v:"inactive",type:"all_inactive",name:"TP070"},{v:"accepted",type:"accepted",name:"TPA01"},{v:"terminated",type:"terminated",name:"TPA04"},{v:"completed",type:"completed",name:"TPA02"},{v:"frozen",type:"frozen",name:"TPA05"},{v:"canceled",type:"canceled",name:"TPA06"},{v:"withnewmessages",type:"unread_message",name:"ML125"}]).controller("SessionExploreCtrl",["$scope","Session","userUtils","$stateParams","SESSION_VIEW_TYPES","TEACHER_SESSION_VIEW_TYPES","SESSIONS_TYPE","$log","$state","$filter","$sce","$rootScope","userUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,c){function m(){b.getUsersViaQ().then(function(b){a.users=b.data,a.filter.oppo_user_textid&&angular.forEach(a.users,function(b){return b.textid==a.filter.oppo_user_textid?(a.selectedUser=b,!0):void 0})})}function n(){a.items=null,a.meta=null}function o(){var c,d=angular.copy(s);return c=a.isTeacher()?b.teacher():b.lessons(),c.get(d).then(function(b){var c=b.data,d=a.items;_.forEach(c,function(a){var b=a.session_type;_.contains(["0","3"],b)&&(a.translateId="TS040"),_.contains(["4"],b)&&(a.translateId="TS048"),_.contains(["6","2"],b)&&(a.translateId="TS038")}),d=d&&1!=a.filter.page?_.union(d,c):c,a.items=d,a.meta=b.meta,h.debug("session list :",b)})["finally"](function(){a.loadMoreFlag=!1,delete l.filterSelectedUser})}a.user=angular.extend({},a.currentUser),a.isTeacher=function(){return a.user&&(a.user.is_pro||a.user.is_tutor)},a.SESSIONS_TYPE=g,a.teacher_session_view_types=f,a.session_view_types=e;var p,q,r=d.viewType;r&&(q=a.isTeacher()?a.teacher_session_view_types:a.session_view_types,angular.forEach(q,function(a){a.v===r&&(p=a.type)}));var s={type:p||d.type||"all",page:1};a.filter=s,a.filterByUser=function(a,b,c){a.textid?s.oppo_user_textid=a.textid:s.oppo_user_textid="",n(),s.page=1,o()},a.filterByUserTextId=function(a){s.oppo_user_textid=a,n(),s.page=1,o()},a.showData=function(){a.selectedUser=""},a.$watch("selectedUser",function(a,b){a!=b&&(a||(n(),s.oppo_user_textid="",s.page=1,o()))});var t;l.goToTeacherId&&(t=l.goToTeacherId,delete l.goToTeacherId,angular.extend(s,{oppo_user_textid:t}));var u;l.goToStudentId&&(u=l.goToStudentId,delete l.goToStudentId,angular.extend(s,{oppo_user_textid:u})),a.getTag=function(a){return k.trustAsHtml(j("sessionXTag")(a))},a.goToDetail=function(a){a&&i.transitionTo("sessionDetail",{sessionId:a.session_id})},a.applyFilter=function(b){a.filter.page=1,l.filterSelectedUser=a.selectedUser?a.selectedUser:null,i.go("session.exploreViaType",{viewType:b.v})},a.loadMore=function(){return a.filter.page++,a.loadMoreFlag=!0,o()},l.filterSelectedUser?(a.selectedUser=l.filterSelectedUser,a.filterByUserTextId(l.filterSelectedUser.textid)):o(),m()}]).controller("SessionPackageCtrl",["$scope","$state","$log","$stateParams","$filter","PACKAGE_VIEW_TYPES","$sce","Session",function(a,b,c,d,e,f,g,h){function i(){h.getPackageUsersViaQ().then(function(b){a.users=b.data})}function j(){a.items=null,a.meta=null}function k(){var b=angular.copy(o);return h["package"](b).then(function(b){var c=b.data,d=a.items;d=d&&1!=o.page?_.union(d,c):c,a.items=d,a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1})}a.package_view_types=f;var l,m,n=d.viewType;m=a.package_view_types,angular.forEach(m,function(a){a.v===n&&(l=a.type)});var o={type:l||d.type||"all",page:1};a.filter=o,a.filterByUser=function(a,b,d){c.debug(a),a.textid?o.oppo_user_textid=a.textid:o.oppo_user_textid="",j(),o.page=1,k()},a.showData=function(){a.selectedUser=""},a.$watch("selectedUser",function(a,b){a!=b&&(a||(j(),o.oppo_user_textid="",o.page=1,k()))}),a.getTag=function(a){return g.trustAsHtml(e("packageXTag")(a))},a.goToDetail=function(a){b.go("sessionPackageDetail",{id:a})},a.applyFilter=function(a){o.page=1,b.go("session.packageViaType",{viewType:a.v})},a.loadMore=function(){return a.loadMoreFlag=!0,o.page++,k()},k(),i()}]).controller("SessionProblemCtrl",["$scope","Session","$log","$stateParams","SESSION_PROBLEM_VIEW_TYPES","$state","$sce","$filter",function(a,b,c,d,e,f,g,h){function i(){b.getUsersViaQ(!0).then(function(b){a.users=b.data})}function j(){a.items=null,a.meta=null}a.session_problem_view_types=e;var k,l,m=d.viewType;l=a.session_problem_view_types,angular.forEach(l,function(a){a.v===m&&(k=a.type)});var n={type:k||d.type||"problem_all",page:1};a.filter=n,a.filterByUser=function(a,b,d){c.debug(a),a.textid?n.oppo_user_textid=a.textid:n.oppo_user_textid="",j(),n.page=1,o()},a.showData=function(){a.selectedUser=""},a.$watch("selectedUser",function(a,b){a!=b&&(a||(j(),n.oppo_user_textid="",n.page=1,o()))}),a.goDetail=function(a){f.go("sessionProblemDetail",{sessionId:a})};var o=function(){var c=angular.copy(n);return b.explore(c).then(function(b){var c=b.data,d=a.items;d=d&&1!=a.filter.page?_.union(d,c):c,a.items=d,a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1})};a.loadMore=function(){return a.loadMOreFlag=!0,a.filter.page++,o()},a.applyFilter=function(b){a.filter.page=1,f.go("session.problemViaType",{viewType:b.v})},a.getTag=function(a){return g.trustAsHtml(h("sessionXProblemTag")(a))},o(),i()}]).controller("SessionCalendarCtrl",["TeacherApplyService","$state",function(a,b){a.getLoginPromise().then(function(a){a||b.go("signin")})}]),angular.module("kp.session").directive("ngSlideDown",["$timeout",function(a,b){var c,d;return c=function(a,b){return void 0!==b.lazyRender?"<div ng-if='lazyRender' ng-transclude></div>":"<div ng-transclude></div>"},d=function(c,d,e,f,g){var h,i,j,k,l,m,n,o,p;i=e.duration||1,j=d.scope(),k=e.emitOnClose,o=e.onClose,n=void 0!==e.lazyRender,n&&(c.lazyRender=c.expanded),h=null;var q=angular.element(b);return q.bind("resize",function(){$scope.$apply()}),d.css({overflow:"hidden",transitionProperty:"height",transitionDuration:""+i+"s",transitionTimingFunction:"ease-in-out"}),l=function(a){var b,c,e,f,g;for(e=0,c=d.children(),f=0,g=c.length;g>f;f++)b=c[f],e+=b.clientHeight;return""+e+"px"},p=function(){return h&&a.cancel(h),n&&(c.lazyRender=!0),d.css("height",l())},m=function(){return d.css("height","0px"),k||o||n?h=a(function(){return k&&c.$emit(k,{}),o&&j.$eval(o),n?c.lazyRender=!1:void 0},1e3*i):void 0},c.$watch("expanded",function(b,c){return a(b?p:m)}),c.$watch(l,function(b,d){return c.expanded&&b!==d?a(p):void 0})},{restrict:"A",scope:{expanded:"=ngSlideDown"},transclude:!0,link:d,template:function(a,b){return c(a,b)}}}]).directive("kpScheduleSessionBtn",function(){return{restrict:"A",scope:{teacherId:"@"},link:function(a,b,c){b.on("click",function(a){a.preventDefault()})}}}).directive("kpSessionMessage",["Restangular","$log",function(a,b){return{restrict:"EA",replace:!0,scope:{session:"=",type:"@"},templateUrl:"/views/sessions/assert/messages.html",controller:["$scope",function(b){var c="package"==b.type,d=a.all(c?"session/package":"session");b.isStudentSend=function(a){var c=a.isStudent;return angular.isDefined(c)?c:b.session.student_textid==a.sender_textid},b.sendMessage=function(){return b.session_message_form.$valid?(b.sending=!0,d.one(""+b.session.id).one("messages").post("",b.newMsg).then(function(){b.sending=!1;var a={content:b.newMsg.content,create_time:(new Date).getTime(),isStudent:"1"==b.session.user_type};b.messages.push(a),b.newMsg={},b.newMsg.content=null})):void 0}}],link:function(c,d,e){var f="package"==c.type,g=a.all(f?"session/package":"session");c.$watch("session",function(a){a&&a.id&&g.one(""+a.id,"messages").get().then(function(a){b.debug("session messages:",a.data),c.messages=a.data})},!0)}}}]).directive("kpSessionPackageHistory",["Restangular","$log",function(a,b){var c=a.service("session/package");return{restrict:"E",replace:!0,scope:{pack:"="},templateUrl:"/views/sessions/assert/packageOperateHistory.html",link:function(a,d,e){a.$watch("pack",function(d){d&&c.one(d.id).one("history").get().then(function(c){b.debug("session package history:",c),a.history=c.data})},!0)}}}]).directive("kpSessionHistory",["Restangular","$log",function(a,b){var c=a.service("session");return{restrict:"EA",replace:!0,scope:{session:"="},templateUrl:"/views/sessions/assert/operateHistory.html",link:function(a,d,e){a.$watch("session",function(d){d&&c.one(d.id).one("history").get().then(function(c){b.debug("session history:",c),a.history=c.data})},!0)}}}]).directive("kpDynamic",["$compile",function(a){return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.kpDynamic,function(d){c.html(d),a(c.contents())(b)})}}}]).directive("kpSessionNextStatus",["$log",function(a){return{restrict:"A",link:function(a,b,c){var d=c.kpSessionNextStatus;b.addClass("btn"),b.addClass("session-status-"+d),b.on("click",function(){a.$emit("kp-next-session-status",d)})}}}]).directive("packageNextStatus",["$log",function(a){return{restrict:"A",link:function(a,b,c){var d=c.packageNextStatus;b.addClass(""),b.addClass("session-package-status-"+d),b.on("click",function(){a.$emit("kp-next-package-session-status",d)})}}}]).directive("kpProblemTag",function(){return{restrict:"EA",replace:!0,scope:{proItem:"=proItem"},template:'<span class="label {{myClass}}">{{myText|t}}</span>',controller:["$scope",function(a){a.myClass="",a.myText="";var b=function(){var b,c;"C"==a.proItem.status||"S"==a.proItem.status||"O"==a.proItem.status?a.proItem.focus_user_is_teacher&&1==a.proItem.operater||!a.proItem.focus_user_is_teacher&&2==a.proItem.operater?(b="action",c="TP791"):(b="wait",c="TP793"):"H"==a.proItem.status?(b="action",c="TP794"):(b="resolve",c="TP792"),a.myClass=b,a.myText=c};b()}]}}).directive("kpSessionHead",function(){return{restrict:"EA",replace:!0,scope:{show:"@"},templateUrl:"/views/sessions/directives/session.head.html"}}).directive("kpMonthWeekCalendar",function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"/views/sessions/directives/month.week.calendar.html",controller:["$scope","$rootScope","$modal","Restangular","$timeout",function(a,b,c,d,e){function f(b){a.showObject.show=b.show,a.showObject.showTitle=b.showTitle,a.showObject.minDay=b.minDay,a.showObject.startDay=b.startDay,a.showObject.endDay=b.endDay,a.showObject.firtDayOfMonth=b.firtDayOfMonth,b.firtDayOfMonth&&(a.showObject.monthNumber=b.firtDayOfMonth.clone().add(1,"days").month()),a.showObject.onChange=!a.showObject.onChange}var g=0,h=0,i=function(a,b){b||(b=moment().utc().zone(g));var c=b.day(),d={show:a,showTitle:"",offset:g,is_am:h,minDay:moment().utc().zone(g)};if(d.show)d.startDay=moment(b.subtract(c,"days").format()),d.endDay=moment(d.startDay.clone().add(6,"days")),d.showTitle=d.startDay.format("MMM D")+" - "+d.endDay.format("MMM D");else{var e=b.clone().startOf("month");d.firtDayOfMonth=moment(e.format()).utc().zone(g),c=e.day(),d.startDay=moment(e.utc().zone(g).subtract(c,"days").format()).utc().zone(g);var f=b.clone().add(1,"months").startOf("month").subtract(1,"days");
c=f.day(),d.endDay=moment(f.add(6-c,"days").format()),d.showTitle=d.firtDayOfMonth.clone().add(1,"days").format("YYYY MMMM")}return d};a.showObject={show:0,showTitle:"",offset:g,is_am:h,minDay:moment().utc().zone(g),startDay:null,endDay:null,onChange:0},f(i(0,moment().utc().zone(g))),a.makeObject=i,a.showWeekMonth=function(a){f(i(a))},a.prevData=function(){f(a.showObject.show?i(1,moment(a.showObject.startDay.format()).subtract(7,"days")):i(0,moment(a.showObject.firtDayOfMonth.format()).subtract(1,"days")))},a.nextData=function(){f(a.showObject.show?i(1,moment(a.showObject.startDay.format()).add(7,"days")):i(0,moment(a.showObject.firtDayOfMonth.format()).add(1,"months")))},a.todayFn=function(){f(i(a.showObject.show,moment().utc().zone(g)))},a.getiCalendarFeed=function(){d.one("session/calendar/ics-code").get().then(function(a){var d=b.$new();d.keyID=KP.BASEURI+"calendar/"+a.data.ics_code+"/ics",c.open({scope:d,templateUrl:"/views/sessions/get.icalendar.feed.html"})})},e(function(){b&&b.currentUser&&b.currentUser.timezone_iana?(g=moment().tz(b.currentUser.timezone_iana).zone(),h=b.currentUser.is_am):g=moment().zone(),a.mytime=moment().utc().zone(g).format("LLL")},2e3)}]}}).directive("kpCalendarData",function(){return{restrict:"EA",replace:!0,scope:{showObject:"="},templateUrl:"/views/sessions/directives/calendar.data.html",controller:["$scope","$rootScope","Restangular",function(a,b,c){var d=0,e=moment.locale();a.momentLan=e;var f=0;b&&b.currentUser&&b.currentUser.timezone_iana?(d=moment().tz(b.currentUser.timezone_iana).zone(),f=b.currentUser.is_am):d=moment().zone(),a.showObject.is_am=f,a.isMonth=function(){return!a.showObject.show};var g=function(a){var b=a.status,c=a.focus_user_is_teacher,d=a.operater,e=a.update_time,f=a.type,g=a.session_start_time;switch(b=b.toLowerCase()){case"0":return c?5:1;case"3":return c?1:5;case"1":case"2":case"4":case"z":case"p":return 2;case"5":case"o":if(c&&2==d||!c&&1==d){if(moment(g).unix()>moment().unix()+86400||"o"==b)return 3}else if(moment(g).unix()>moment().unix()+86400||"o"==b)return 5;case"6":case"w":return moment(g).unix()>moment().unix(),1;case"7":return c?1:5;case"c":case"s":return c&&2==d||!c&&1==d?1:5;case"e":return 2==f?4:2;case"f":return c&&moment().unix()-moment(e).unix()<604801?5:1;case"g":return 1;case"h":return 2;case"q":return 1}},h=function(){var b=a.showObject.startDay.clone().utc().zone(d).locale("en"),e=a.showObject.endDay.clone().utc().zone(d).locale("en"),f=e.diff(b,"days"),h=[],i=[],j=0,k=0,l=moment().zone(d).locale("en").format().substr(0,11);b.format().substr(0,11)==l?j=1:b.format().substr(0,11)<l&&(k=1),i.push({day:b.clone(),sessionData:[],t:j,lt:k});for(var m=0;f>m;m++){var n={day:moment(b.add(1,"days").format()).utc().zone(d).locale("en"),sessionData:[]};n.day.format().substr(0,11)==l?(n.t=1,n.lt=0):n.day.format().substr(0,11)<l?(n.t=0,n.lt=1):(n.t=0,n.lt=0),i.push(n),7==i.length&&(h.push(i),i=[])}i.length>0&&h.push(i),a.showObject.getDataFlag=0,a.showObject.dataPromise=c.one("session/calendar").get({start_date:h[0][0].day.clone().utc().format().substr(0,10),end_date:b.add(1,"days").utc().format().substr(0,10)}).then(function(b){a.showObject.getDataFlag=1,angular.forEach(b.data,function(a){var b=a.session_start_time_user.substr(0,10);angular.forEach(h,function(c){var d=0;return angular.forEach(c,function(c){return b==c.day.format().substr(0,10)?(c.sessionData.push({e:a.session_end_time_user.substr(11,5),s:a.session_start_time_user.substr(11,5),AP:moment(a.session_start_time_user).format("A"),ist:a.focus_user_is_teacher,status:a.status,operater:a.operater,type:a.type,oppo_user_obj:a.oppo_user_obj,sid:a.session_id,c:g(a)}),d=1,!0):void 0}),d?!0:void 0})})}),a.weeks=h,a.week=h[0]};h(),a.$watch("showObject.onChange",function(a,b){a!=b&&h()}),a.changeAM=function(b){if(a.showObject.is_am){var c=b.split(":"),d=parseInt(c[0],10);return d>12&&(d-=12),d+":"+c[1]}return b}}]}}).directive("italkiClassroom",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/classroom.html"}}),angular.module("kp.session").constant("SESSIONS_TYPE",{ALL:"all",ACTIVE:"all_active",INACTIVE:"all_inactive",REQUEST:"request",NOT_SCHEDULE:"not_scheduled",CANCELED:"canceled",LIVE_UPCOMING:"live_upcoming",START_TIME_ENDED:"start_time_ended",NEED_TODO:"need_todo",PROBLEM_ACTIVE:"problem_active",NORMAL_COMPLETED:"normal_completed",UNREAD_MESSAGE:"unread_message",PROBLEM_ALL:"problem_all",PROBLEM_ACTION_REQUIRED:"problem_action_required",PROBLEM_ACTION_WAITING:"problem_action_waiting",PROBLEM_DISPUTE:"problem_dispute",PROBLEM_RESOLVED:"problem_resolved"}).constant("IM_TYPE",["Skype","MSN Messenger","Yahoo! Messenger","AOL Instant Messenger","ICQ","Google Hangouts","QQ","FaceTime","Wechat"]),angular.module("kp.session").filter("i18nTime",function(){return function(a,b,c){if(!a||!b)return"";var d=moment(a,b);return d.isValid()?d.format(c||"LLL"):""}}).filter("sessionCourseTitle",["$translate",function(a){return function(b,c){if(!_.isObject(b))return"";if(angular.isDefined(c)&&b.title)return b.title;var d=b.session_type,e=b.course_title,f=b.learn_language||b.language,g=a.instant;return"3"==d?g("TS215")+": "+g(f):"4"==d?g("TS047")+": "+g(f):e?"TS200"==e?KP.Utils.format(g(e),f):e:g("TP999")+": "+g(f)}}]).filter("packOperationDesc",["$translate","$filter","$rootScope",function(a,b,c){function d(a,b,c,d){switch(a){case 1:return e(b);case 2:return e(c);default:return e(d)}}var e=a.instant;return function(a,b,f){if(!f)return"";var g,h=a[b],i=h.operater,j=h.prev_status;switch(g="1"==f.user_type?[c.currentUser.nickname,f.oppo_user_obj.nickname]:[f.oppo_user_obj.nickname,c.currentUser.nickname],h.status){case"0":return e("TP960");case"1":return e("TP964");case"2":return e("TP930");case"3":return e("TP962");case"4":return e("TP965");case"5":switch(j){case"3":return e("TP979");case"6":return e("TP980");case"0":return e("TP961");default:return e("TP959")}case"6":return e("TP963");case"B":return e("TP971");case"C":return e("TP970");case"7":return d(i,"TP973","TP972","TP974");case"Z":return d(i,"TP978","TP976","TP958");case"8":return d(i,"TP985","TP990","");case"9":return d(i,"TP987","TP992","");case"Y":return d(i,"TP993","TP988","TP989");case"N":return d(i,"TP991","TP986","");case"F":return e("TP975")}return""}}]).filter("sessionOperationDesc",["$translate","$filter","$rootScope",function(a,b,c){function d(a,b,c,d){switch(a){case 1:return b;case 2:return c;default:return d}}var e=KP.Utils.format,f=a.instant;return function(a,g,h,i){function j(){var a=arguments;switch(h.session_type){case"2":return a[1];case"3":return a[2];default:return a[0]}}if(!h)return"";var k,l=a[g],m=a.length,n=m>1&&g>1?a[g-1].status:"";switch(k="1"==h.user_type?[c.currentUser.nickname,h.oppo_user_obj.nickname]:[h.oppo_user_obj.nickname,c.currentUser.nickname],l.status){case"0":return f(j("TP901","TP901","TP981"));case"1":return e(f(j("TP911","TP911","TP982")),h.student_textid,k[0]);case"2":return f("TP930");case"3":return e(f(j("TP909","","TP983")),h.student_textid,k[0]);case"4":return e(f(j("TP908","TP908","TP984")),h.teacher_textid,k[1]);case"6":switch(n){case"3":return e(f("TP910"),h.student_textid,k[0]);case"5":return f("N"==l.explain?d(l.operater,"TP905","TP906","TP932"):d(l.operater,"TP914","TP915","TP932"));default:return 10==l.operater?f("TP931"):e(f("TP916"),h.id)}break;case"5":return f(d(l.operater,"TP912","TP913",""));case"7":return f("H"==l.prev_status?"TP933":"TP917");case"C":case"S":return f(d(l.operater,"TP920","TP921",""));case"Q":return"O"!=n?f(d(l.operater,"TP927","TP926","TP942")):"";case"O":return f(d(l.operater,"TP925","TP924",""));case"W":return f(d(l.operater,"TP903","TP904",""));case"H":return f(d(l.operater,"TP905","TP906",""));case"P":return f(d(l.operater,"TP966","TP968","TP929"));case"E":if("2"==l.session_type)return f(d(l.operater,"TP967","TP969","TP859"));var o=b("number")(l.itc_usd/100,2),p="";return o>0&&(p+="TP922".translate().format(o)),h.session_price_usd-l.itc_usd>0&&(p+="TP923".translate().format(b("number")((h.session_price_usd-l.itc_usd)/100,2))),p;case"F":return f("9"==l.operater?"NT270":"TP918");case"G":return e(f("TP919"),h.teacher_textid,k[1]);case"Z":return f("4"==h.session_type?"2"==h.operater?"TP941":"9"==h.operater?"TP940":"TP929":"TP929");case"8":return f(d(l.operater,"TP920","TP921",""));case"I":return"TP928".translate()}return"   "}}]).filter("packageXTag",["$translate","$filter","$rootScope",function(a,b,c){var d=a.instant,e=KP.Utils.format;return function(a){if(!a)return"";var b=a.status,c=a.focus_user_is_teacher,f=a.operater,g='&nbsp;<span class="label action">'+d("TP795")+"</span>",h='&nbsp;<span class="label wait">'+d("TP796")+"</span>",i='<span class="label {0}">{1}</span>',j='&nbsp;<span class="label new">'+d("TP749")+"</span>";switch(angular.isString(b)&&(b=b.toLowerCase()),b){case"0":return e(i,"session",d("TPA03"))+(c?j+g:h);case"3":case"b":return e(i,"session",d("TPA03"))+(c?h:g);case"6":case"c":return e(i,"session",d("TPA03"))+(c?g:h);case"5":if(11==f||22==f){var k=c&&11==f||!c&&22==f;return e(i,"session",d("TPA07"))+(k?g:h)}return e(i,"session",d("TPA01"));case"7":return e(i,"cancel",d("TPA04"));case"f":return e(i,"session",d("TPA02"));case"z":return e(i,"cancel",d("TPA05"));case"1":case"2":case"4":return e(i,"cancel",d("TPA06"))}}}]).filter("sessionXTag",["$translate","$filter","$rootScope",function(a,b,c){var d=a.instant,e=KP.Utils.format;return function(a){if(!a)return"";var b=a.status,c=a.focus_user_is_teacher,f=a.operater,g=a.update_time,h=a.type,i=a.session_start_time,j='&nbsp;<span class="label action">'+d("TP795")+"</span>",k='&nbsp;<span class="label wait">'+d("TP796")+"</span>",l='<span class="label {0}">{1}</span>',m='&nbsp;<span class="label new">'+d("TP749")+"</span>",n="";switch(angular.isString(b)&&(b=b.toLowerCase()),b){case"0":return c?e(l,"session",d("TP750"))+m+j:e(l,"session",d("TP750"))+k;case"3":return e(l,"session",d("TP750"))+(c?k:j);case"1":case"2":case"4":case"z":case"p":return e(l,"cancel",d("TP755"));case"5":case"o":if(c&&2==f||!c&&1==f){if(n=e(l,"session",d("TP757"))+"&nbsp;"+e(l,"session",d("TP750")),moment(i).unix()>moment().unix()+86400||"o"==b)return n+k}else if(n=e(l,"session",d("TP757"))+"&nbsp;"+e(l,"session",d("TP750")),moment(i).unix()>moment().unix()+86400||"o"==b)return n+j;if("o"==b)break;case"6":case"w":return moment(i).unix()>moment().unix()?e(l,"session",d("TP757")):e(l,"session",d("TP754"));case"7":return e(l,"session",d("TP751"))+(c?k:j);case"c":case"s":return c&&2==f||!c&&1==f?e(l,"session",d("TP753"))+k:e(l,"session",d("TP753"))+j;case"e":return 2==h?e(l,"session",d("TP752")):e(l,"cancel",d("TP755"));case"f":return c&&moment(g).unix()-moment().unix()<691200?e(l,"session",d("TP752")):e(l,"session",d("TP752"));case"g":return e(l,"session",d("TP752"));case"h":return e(l,"session",d("TP753"))+k;case"q":return e(l,"session",d("TP756"))+j}}}]).filter("sessionXProblemTag",["$translate",function(a){var b=a.instant;return function(a){var c,d;switch(a.status){case"C":case"S":case"O":a.operater==a.user_type?(c="wait",d=b("TP793")):(c="action",d=b("TP791"));break;case"H":c="action",d=b("TP794");break;default:c="resolve",d=b("TP792")}return KP.Utils.format('<span class="label {0}">{1}</span>',c,d)}}]),angular.module("kp.session").controller("newSessionRequestCtrl",["$scope","localStorageService","experimentTest","PendingPurchaseModal","$state","$window","KPNotify","NOEnoughITCModal","Session","$stateParams","$modal","$log","$timeout","$translate","TimeSelectorModal","TeacherApplyService","Restangular","kpBrowserLan","WechatPopUp","isWechat",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(b){l.debug("error request result",b),a.error=b,a.newSession.pwd="","PaymentAccountDisabled"==b.type?a.disabledAccount=1:"TimesAvailable"==b.type?a.TimesAvailable=1:"CommunicationChanged"==b.type?a.CommunicationChanged=1:"need one param time"==b.msg&&(a.TimesAvailable=1),m(function(){a.error=null},3e3)}function v(){if(!a.item)return"";var b=y.selectedTimes.length;return b?b*a.item.session_itc_usd:a.item.session_itc_usd}function w(){var b=[];angular.forEach(y.selectedTimes,function(a){-1==a.status&&b.push(a.date)}),i.checkSessionTimeAvailable2(a.item.teacher_obj.id,x,b).then(function(a){var b=a.data;angular.isArray(b)&&angular.forEach(b,function(a){angular.forEach(y.selectedTimes,function(b){if(a.time_str==b.date){var c=-1;c=1==a.status?1:0,b.status=c}})})})}var x=j.priceId,y={im_type:"1",selectedTimes:[]};a.isCN=function(){return"zh_cn"==n.use().toLowerCase()},a.newSession=y,a.min=0,a.have={classRoom:!1},c.ABTest("italkiClassroomBeta").then(function(b){"CommunicationTool"===b.data.group_name?a.have.classRoom=!1:a.have.classRoom=!0}),a.goToDetail=function(){e.go("sessionDetail",{sessionId:a.sessionRequestResult[0].session_id})};var z=function(){a.forSelectedTimes=y.selectedTimes.length,m(z,500)};z(),a.checkSelectedTimes=function(){return a.newSession.selectedTimes&&a.newSession.selectedTimes.length>0};var A=0;a.submit=function(c,e){if(!A){if(c.$invalid)return p.sessionFocusFormObj(c),A=0,a.submitFlag=1,void(e&&e.preventDefault());(a.TimesAvailable||a.CommunicationChanged)&&(a.TimesAvailable=0,a.CommunicationChanged=0),l.debug("submit session request",a.newSession);var f=[];angular.forEach(y.selectedTimes,function(a,b){f.push(a.date)}),a.have.classRoom&&(a.newSession.im_type="Z",a.newSession.student_im_account="");var h=angular.extend({course_price_id:x,time:f},a.newSession),j=v()-a.item.available_itc_usd;if(a.min=j,j>0)return d.preCheck(h,j,1,a.item).then(function(c){var e=c.orderId;l.debug("unpay order id:",e);var f=d.open(e);f.then(function(a){l.debug("purchase done!"),d.success("lessonSuccess"),b.remove("currentPurchasePageShouldAutoClose")},function(c){var e=[];if(angular.forEach(a.selectedTimes,function(a){e.push(a.date)}),i.checkSessionTimeAvailable2(a.item.teacher_obj.id,x,e).then(function(a){var b=a.data;angular.isArray(b)&&angular.forEach(b,function(a){angular.forEach(y.selectedTimes,function(b){if(a.time_str==b.date){var c=-1;c=1==a.status?1:0,b.status=c}})})}),c){switch(c.type){case"TeacherNotAvailable":d.prefail(c);break;case"CourseChanged":d.prefail(c);break;case"TimesAvailable":d.prefail(c).then(function(){a.submit(a.Form1)}),u(c);break;case"CommunicationChanged":u(c);break;case"NoEnoughItc":a.NoEnoughItc=1}b.remove("currentPurchasePageShouldAutoClose")}}),b.set("currentPurchasePageShouldAutoClose","1")},function(a){a&&u(a)});A=1,a.submitFlag=1;var k=i.sessionRequest();return k.post(h).then(function(b){function c(){for(var a in e)if(1==e[a].status)return!0;return!1}var d={learning_language:a.item.course_obj.language,lesson_price:a.item.course_obj.course_price_obj.session_price_usd,teacher_ID:a.item.course_obj.teacher_id,teacher_name:a.item.teacher_obj.nickname,teacher_type:a.item.teacher_obj.is_pro?"pro":"tutor",course_name:a.item.course_obj.title};window._bt&&_bt.track("requested_lesson",d),l.debug("session request result:",b);var e=b.data;if(angular.isArray(e)){var f=e.length;1==f&&1!=e[0].status||!c()?a.error={msg:"TS305".translate()}:(a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,t.binded().then(function(a){r.isCnUser()&&angular.isUndefined(a)&&s.open()}))}else g.appendWithContent("Session request result should be return array,but nothing got.")},function(a){A=0,u(a)})}},a.disabledAccount=0,i.newSession(x).then(function(b){l.debug("new session request",b),a.item=b.data,a.teacher_im_account=a.item.teacher_obj.user_detail_obj},function(b){"PaymentAccountDisabled"==b.type&&(a.disabledAccount=1)}),a.selectedTimes=y.selectedTimes,m(function(){var b=a.teacher_im_account,c={skype_account:"1",google_talk_account:"6",qq_account:"7",face_time_account:"8",wechat_account:"9"};for(var d in b)if(""!=b[d]&&"user_id"!=d&&(y.im_type=c[d],y.student_im_account=a.currentUser.ims[d],"skype_account"==d))return},500),a.removeTime=function(a){for(var b=0;b<y.selectedTimes.length;b++)if(y.selectedTimes[b]===a)return void y.selectedTimes.splice(b,1)},a.displayDefaultAccount=function(){if(!a.currentUser||!a.currentUser.ims)return"";switch(y.im_type){case"1":y.student_im_account=a.currentUser.ims.skype_account;break;case"6":y.student_im_account=a.currentUser.ims.google_talk_account;break;case"7":y.student_im_account=a.currentUser.ims.qq_account;break;case"8":y.student_im_account=a.currentUser.ims.face_time_account;break;case"9":y.student_im_account=a.currentUser.ims.wechat_account}},a.currentAmount=v,a.$watch("currentUser.ims",function(){l.debug("make sure im account exist"),a.displayDefaultAccount()}),a.$watch("newSession",function(b,c){l.debug("session request obj has changed!",b),A=0,a.enableContinue=b.student_im_account&&b.pwd&&b.selectedTimes.length>0},!0),a.openScheduleModal=function(){o.show(a.item.teacher_obj.id,angular.copy(y.selectedTimes,[]),null,a.item.course_obj.course_price_obj.session_length).then(function(b){if(b){a.min=v()-a.item.available_itc_usd;var c=b.day.replace(/\//g,"-");a.selectedTimes.push({day:b.day,time:b.time,date:c+" "+b.time,status:-1}),w()}})}}]),angular.module("kp.session").controller("$$InstantLessonAlertServiceCtrl",["$scope","Sound",function(a,b){a.isStudent||(b.play(3),a.$on("$destroy",function(){b.stop()}))}]).service("$$kpInstantLessonAlertPanelService",["UserService","$timeout","$rootScope","$log","Restangular","Sound","$state","$stateParams",function(a,b,c,d,e,f,g,h){function i(){f.stop(),angular.forEach(o,function(a){a.type="deleted",a.id=2*a.id}),angular.isFunction(n)&&n()}function j(){_.remove(o,function(a){return"deleted"==a.type})}function k(a){"sessionDetail"==g.current.name&&h.sessionId==a.session_id&&g.reload()}function l(a){return a?a.session_id:(new Date).getTime()}function m(b){var c=a.currentUser();return c.id==KP.Utils.textIdToId(b.student_textid)}var n=null,o=[];c.$on("kp_account_sign_out",function(){i()}),this.applyListener=function(a){n=a},this.restoreFromServer=function(){i(),e.one("notification").get({type:"prompt"}).then(function(a){j();var e=a.data;d.debug("restore instant lesson notifications",e),angular.forEach(e,function(a){var d=a.type;switch(d){case 1999:b(function(){c.currentUser.instant_tutoring_status=0});var e={id:a.id,type:"suspended",notiId:a.id,user:a.oppo_user_obj};o.push(e);break;case 2023:var e={id:a.detail.session_id,type:"timeout",session:a.detail,user:a.oppo_user_obj,isStudent:m(a.detail),notiId:a.id};o.push(e);break;case 2095:case 2018:var e={id:a.detail.session_id,type:"canceled",session:a.detail,isStudent:m(a.detail),user:a.oppo_user_obj,notiId:a.id};o.push(e);break;case 2003:var f=a.detail.update_time,g=1e3*moment.tz(f,"UTC").add(10,"m").unix(),e={id:a.detail.session_id,type:"new",session:a.detail,isStudent:m(a.detail),user:a.oppo_user_obj,notiId:a.id,end:g};o.push(e)}})})},this.newRequest=function(a,b){var c=a.update_time,d=1e3*moment.tz(c,"UTC").add(10,"m").unix(),e={type:"new",id:l(a),user:b,session:a,isStudent:m(a),end:d};e.isStudent||f.play(3),this.append(e)},this._update=function(a,b){k(a);for(var c=l(a),d=0;d<o.length;d++)o[d].id==c&&("new"==o[d].type&&"new"!=b&&f.stop(),o[d].type=b,o[d].session=a)},this.timeout=function(a,b){this._update(a,"timeout")},this.canceledBySystem=function(a,b){this._update(a,"canceledBySystem")},this.canceled=function(a,b){this._update(a,"canceled")},this.accepted=function(a){this._update(a,"accepted")},this.suspended=function(a){var b=l(a),c={id:b,type:"suspended"};this.append(c)},this.getItems=function(){return o},this.remove=function(a){_.remove(o,function(b){return"new"==b.type&&f.stop(),b.id==a})},this.append=function(a){for(var b=!1,c=0;c<o.length;c++)a.id==o[c].id&&(b=!0,a[c]=a);b||o.unshift(a)}}]).filter("kpInstantMobileCollectionFilter",["$state","$stateParams",function(a,b){return function(c){if(angular.isArray(c)&&KP.isMobile){var d=null;"sessionDetail"==a.current.name&&(d=b.sessionId);var e=_.filter(c,function(a){return("new"==a.type||a.isStudent&&"canceled"==a.type)&&a.id!=d});return e.length>1?[e[e.length-1]]:e}return c}}]).directive("kpInstantModalTips",function(){return{restrict:"A",controller:["$scope","$$kpInstantLessonAlertPanelService","Restangular","$state","$timeout",function(a,b,c,d,e){var f=b.getItems();a.items=f,a.hasNewInstantRequest=function(){if(f.length>0){var b=_.filter(f,function(a){return"new"==a.type});if(b.length>0)return a.item=b[0],!0}return!1},a.navToSessionDetail=function(){var b=a.item.session;d.go("sessionDetail",{sessionId:b.session_id},{reload:!0})}}]}}).directive("kpInstantLessonAlertList",function(){return{restrict:"E",transclude:!0,scope:{},replace:!0,templateUrl:"/views/kp/instant.alert.list.html",controller:["$scope","$$kpInstantLessonAlertPanelService","Restangular","$state","$timeout",function(a,b,c,d,e){KP.isMobile;a.items=b.getItems(),b.applyListener(function(){e(function(){a.$apply()})}),a.navToSessionDetail=function(a){var e=a.session;if(e){var f=angular.uppercase(e.status);if(["1","2","4","Z"].indexOf(f)>-1){var g=a.notiId;g||(g=a.session.notification_id),c.one("notification").post("setread",{id:[g]}).then(function(){}),b.remove(a.id)}d.go("sessionDetail",{sessionId:e.session_id},{reload:!0})}},a.close=function(a){var d=a.notiId;d||(d=a.session.notification_id),c.one("notification").post("setread",{id:[d]}).then(function(){}),b.remove(a.id)}}],link:function(a,b,c){}}}),angular.module("kp.session").controller("TrialRequestCtrl",["$scope","$state","localStorageService","experimentTest","PendingPurchaseModal","$window","NOEnoughITCModal","Session","$timeout","$stateParams","KPNotify","TimeSelectorModal","$log","TeacherApplyService","Restangular","kpBrowserLan","WechatPopUp","isWechat",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(b){m.debug("error request result",b),a.error=b,a.newSession.pwd="","PaymentAccountDisabled"==b.type?a.disabledAccount=1:"TimesAvailable"==b.type?a.TimesAvailable=1:"CommunicationChanged"==b.type?a.CommunicationChanged=1:"need one param time"==b.msg&&(a.TimesAvailable=1),i(function(){a.error=null},3e3)}function t(){if(!a.item)return"";var b=u.selectedTimes.length;return b?b*a.item.session_itc_usd:a.item.session_itc_usd}var u={im_type:"1",selectedTimes:[]},v=j.teacherId,w=j.language;a.newSession=u,a.min=0,a.have={classRoom:!1},d.ABTest("italkiClassroomBeta").then(function(b){"CommunicationTool"===b.data.group_name?a.have.classRoom=!1:a.have.classRoom=!0});var x=function(){a.forSelectedTimes=u.selectedTimes.length,i(x,500)};x(),a.checkSelectedTimes=function(){return a.newSession.selectedTimes&&a.newSession.selectedTimes.length>0};var y=0;a.submit=function(b,d){if(!y){if(a.submitFlag=1,a.min=0,b.$invalid)return n.sessionFocusFormObj(b),a.submitFlag=1,y=0,void(d&&d.preventDefault());(a.TimesAvailable||a.CommunicationChanged)&&(a.TimesAvailable=0,a.CommunicationChanged=0);var f=[];angular.forEach(u.selectedTimes,function(a){f.push(a.date)}),a.have.classRoom&&(a.newSession.im_type="Z",a.newSession.student_im_account="");var g=angular.extend({teacher_id:v,time:f,language:w},a.newSession),i=t()-a.item.available_itc_usd;return a.min=i,i>0?e.preCheck(g,i,3,a.item).then(function(b){var d=b.orderId;m.debug("unpay order id:",d);var f=e.open(d);f.then(function(a){m.debug("purchase done!"),e.success("trialSuccess"),c.remove("currentPurchasePageShouldAutoClose")},function(b){if(b){switch(b.type){case"TeacherNotAvailable":e.prefail(b);break;case"CourseChanged":e.prefail(b);break;case"TimesAvailable":e.prefail(b),a.newSession.selectedTimes[0].status=0,s(b);break;case"CommunicationChanged":s(b);break;case"NoEnoughItc":a.NoEnoughItc=1}c.remove("currentPurchasePageShouldAutoClose")}}),c.set("currentPurchasePageShouldAutoClose","1")},function(a){a&&s(a)}):(y=1,m.debug("submit trial session request",a.newSession),h.newTrialSession(g).then(function(b){var c={learning_language:g.language,lesson_price:a.item.session_itc_usd,teacher_ID:a.item.teacher_obj.id,teacher_name:a.item.teacher_obj.nickname,teacher_type:a.item.teacher_obj.is_pro?"pro":"tutor",course_name:"Trial"};window._bt&&_bt.track("requested_trial",c),m.debug("session request result:",b);var d=b.data;angular.isObject(d)?1==d.status?(a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,r.binded().then(function(a){p.isCnUser()&&angular.isUndefined(a)&&q.open()})):a.error={msg:"TS305".translate()}:k.appendWithContent("Trial session request result should be return object,but nothing got.")},function(a){y=0,m.debug("error request result",a),s(a)}))}},a.disabledAccount=0,h.trialRequest({teacher_id:v,language:w}).then(function(b){a.item=b.data,a.teacher_im_account=a.item.teacher_obj.user_detail_obj},function(b){b&&"PaymentAccountDisabled"==b.type&&(a.disabledAccount=1)}),i(function(){var b=a.teacher_im_account,c={skype_account:"1",google_talk_account:"6",qq_account:"7",face_time_account:"8",wechat_account:"9"};for(var d in b)if(""!=b[d]&&"user_id"!=d&&(u.im_type=c[d],u.student_im_account=a.currentUser.ims[d],"skype_account"==d))return},500),a.goToDetail=function(){b.go("sessionDetail",{sessionId:a.sessionRequestResult.session_id})},a.removeTime=function(a){for(var b=0;b<u.selectedTimes.length;b++)if(u.selectedTimes[b]===a)return void u.selectedTimes.splice(b,1)},a.openScheduleModal=function(){l.show(v,angular.copy(u.selectedTimes,[]),null,2).then(function(b){if(b){a.min=t()-a.item.available_itc;var c=b.day.replace(/\//g,"-");a.newSession.selectedTimes.push({day:b.day,time:b.time,date:c+" "+b.time,status:1})}})},a.displayDefaultAccount=function(){if(!a.currentUser||!a.currentUser.ims)return"";switch(u.im_type){case"1":u.student_im_account=a.currentUser.ims.skype_account;break;case"6":u.student_im_account=a.currentUser.ims.google_talk_account;break;case"7":u.student_im_account=a.currentUser.ims.qq_account;break;case"8":u.student_im_account=a.currentUser.ims.face_time_account;break;case"9":u.student_im_account=a.currentUser.ims.wechat_account}},a.currentAmount=t,a.$watch("currentUser.ims",function(){m.debug("make sure im account exist"),a.displayDefaultAccount()}),a.$watch("newSession",function(b,c){m.debug("session request obj has changed!",b),y=0,a.enableContinue=b.student_im_account&&b.pwd&&b.selectedTimes.length>0},!0)}]),angular.module("kp.session").controller("InstantRequestCtrl",["$scope","$state","NOEnoughITCModal","Session","$timeout","$stateParams","KPNotify","TimeSelectorModal","$log","TeacherApplyService",function(a,b,c,d,e,f,g,h,i,j){function k(){if(!a.item)return"";var b=l.selectedTimes.length;return b?b*a.item.session_itc_usd:a.item.session_itc_usd}var l={im_type:"1",selectedTimes:[]},m=f.teacherId,n=f.language;a.newSession=l,a.disabledAccount=0,d.instantRequest({teacher_id:m,language:n}).then(function(b){a.item=b.data,a.teacher_im_account=a.item.teacher_obj.user_detail_obj},function(b){"PaymentAccountDisabled"==b.type&&(a.disabledAccount=1)}),e(function(){var b=a.teacher_im_account,c={skype_account:"1",google_talk_account:"6",qq_account:"7",face_time_account:"8",wechat_account:"9"};for(var d in b)if(""!=b[d]&&"user_id"!=d&&(l.im_type=c[d],l.student_im_account=a.currentUser.ims[d],"skype_account"==d))return},500);var o=0;a.submit=function(c){if(!o){if(o=1,a.submitFlag=1,c.$invalid)return j.sessionFocusFormObj(c),a.submitFlag=1,void(o=0);i.debug("submit instant session request",a.newSession);var f=angular.extend({teacher_id:m,language:n},a.newSession);return d.newInstantRequest(f).then(function(c){i.debug("session request result:",c);var d=c.data;angular.isObject(d)?1==d.status?(a.$emit("$resetScrollTop"),b.go("sessionDetail",{sessionId:c.data.session_id})):a.error={msg:"TS305".translate()}:g.appendWithContent("Instant session request result should be return object,but nothing got.")},function(b){o=0,i.debug("error request result",b),a.error=b,a.newSession.pwd="","PaymentAccountDisabled"==b.type&&(a.disabledAccount=1),e(function(){a.error=null},3e3)})}},a.goToDetail=function(){b.go("sessionDetail",{sessionId:a.sessionRequestResult.session_id})},a.displayDefaultAccount=function(){if(!a.currentUser||!a.currentUser.ims)return"";switch(l.im_type){case"1":l.student_im_account=a.currentUser.ims.skype_account;break;case"6":l.student_im_account=a.currentUser.ims.google_talk_account;break;case"7":l.student_im_account=a.currentUser.ims.qq_account;break;case"8":l.student_im_account=a.currentUser.ims.face_time_account;break;case"9":l.student_im_account=a.currentUser.ims.wechat_account}},a.currentAmount=k,a.$watch("currentUser.ims",function(){i.debug("make sure im account exist"),a.displayDefaultAccount()}),a.$watch("newSession",function(b,c){i.debug("session request obj has changed!",b),o=0,a.enableContinue=b.student_im_account&&b.pwd},!0)}]),angular.module("kp.session").controller("PackageRequestCtrl",["$scope","$state","$rootScope","experimentTest","KPNotify","localStorageService","$window","PendingPurchaseModal","NOEnoughITCModal","Session","$stateParams","$modal","$log","$timeout","$translate","TimeSelectorModal","TeacherApplyService","kpBrowserLan","WechatPopUp","isWechat",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(b){m.debug("error request result",b),a.error=b,a.newSession.pwd="","PaymentAccountDisabled"==b.type?a.disabledAccount=1:"TimesAvailable"==b.type?a.TimesAvailable=1:"CommunicationChanged"==b.type?a.CommunicationChanged=1:"need one param time"==b.msg&&(a.TimesAvailable=1),n(function(){a.error=null},3e3)}function v(){return a.item?a.item.session_itc_usd:""}function w(){var b=[];angular.forEach(y.selectedTimes,function(a){-1==a.status&&b.push(a.date)}),j.checkSessionTimeAvailable2(a.item.teacher_obj.id,x,b).then(function(a){var b=a.data;angular.isArray(b)&&angular.forEach(b,function(a){angular.forEach(y.selectedTimes,function(b){if(a.time_str==b.date){var c=-1;c=1==a.status?1:0,b.status=c}})})})}var x=k.priceId,y={im_type:"1",selectedTimes:[]};a.newSession=y,a.have={classRoom:!1},d.ABTest("italkiClassroomBeta").then(function(b){"CommunicationTool"===b.data.group_name?a.have.classRoom=!1:a.have.classRoom=!0}),a.min=0,a.isCN=function(){return"zh_cn"==o.use().toLowerCase()},a.goToDetail=function(){b.go("sessionPackageDetail",{id:a.sessionRequestResult.pid})};var z=function(){a.forSelectedTimes=y.selectedTimes.length,n(z,500)};z(),a.checkSelectedTimes=function(){return a.newSession.selectedTimes&&a.newSession.selectedTimes.length>0};var A=0;a.submit=function(b,c){if(!A){if(b.$invalid)return q.sessionFocusFormObj(b),a.submitFlag=1,A=0,void(c&&c.preventDefault());(a.TimesAvailable||a.CommunicationChanged)&&(a.TimesAvailable=0,a.CommunicationChanged=0);var d=[];angular.forEach(y.selectedTimes,function(a,b){1==a.status&&d.push(a.date)}),a.have.classRoom&&(a.newSession.im_type="Z",a.newSession.student_im_account="");var g=angular.extend({course_price_id:x,time:d},a.newSession),i=v()-a.item.available_itc_usd;if(a.min=i,i>0){var k=h.preCheck(g,i,2,a.item);return k.then(function(b){var c=b.orderId;m.debug("unpay order id:",c);var d=h.open(c);d.then(function(a){m.debug("purchase done!"),h.success("packageSuccess"),f.remove("currentPurchasePageShouldAutoClose")},function(b){var c=[];if(angular.forEach(a.selectedTimes,function(a){c.push(a.date)}),j.checkSessionTimeAvailable2(a.item.teacher_obj.id,x,c).then(function(a){var b=a.data;angular.isArray(b)&&angular.forEach(b,function(a){angular.forEach(y.selectedTimes,function(b){if(a.time_str==b.date){var c=-1;c=1==a.status?1:0,b.status=c}})})}),b){switch(b.type){case"TeacherNotAvailable":h.prefail(b);break;case"CourseChanged":h.prefail(b);break;case"TimesAvailable":h.prefail(b),u(b);break;case"CommunicationChanged":u(b);break;case"NoEnoughItc":a.NoEnoughItc=1}f.remove("currentPurchasePageShouldAutoClose")}}),f.set("currentPurchasePageShouldAutoClose","1")},function(a){a&&u(a)}),k}A=1,a.submitFlag=1,m.debug("submit session request",a.newSession);var l=j.sessionPackageRequest();return l.post(g).then(function(b){function c(){var a=f.session_time_status_s;for(var b in a)if(1==a[b].status)return!0;return!1}var d={learning_language:a.item.course_obj.language,lesson_price:a.item.course_obj.course_price_obj.session_price_usd,teacher_ID:a.item.course_obj.teacher_id,teacher_name:a.item.teacher_obj.nickname,teacher_type:a.item.teacher_obj.is_pro?"pro":"tutor",
course_name:a.item.course_obj.title,package_lessons:a.item.course_obj.course_price_obj.package_length};window._bt&&_bt.track("requested_package",d),m.debug("package request result:",b);var f=b.data;if(angular.isArray(f.session_time_status_s)){var g=f.session_time_status_s,h=g.length;1==h&&1!=g[0].status||!c()?a.error={msg:"TS305".translate()}:(a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,t.binded().then(function(a){r.isCnUser()&&angular.isUndefined(a)&&s.open()}))}else e.appendWithContent("package request result should be return array,but nothing got.")},function(a){m.debug("error request result",a),A=0,u(a)})}},a.disabledAccount=0,j.newSessionPackageRequest(x).then(function(b){a.item=b.data,a.teacher_im_account=a.item.teacher_obj.user_detail_obj},function(b){"PaymentAccountDisabled"==b.type&&(a.disabledAccount=1)}),a.selectedTimes=y.selectedTimes,n(function(){var b=a.teacher_im_account,c={skype_account:"1",google_talk_account:"6",qq_account:"7",face_time_account:"8",wechat_account:"9"};for(var d in b)if(""!=b[d]&&"user_id"!=d&&(y.im_type=c[d],y.student_im_account=a.currentUser.ims[d],"skype_account"==d))return},500),a.removeTime=function(a){for(var b=0;b<y.selectedTimes.length;b++)if(y.selectedTimes[b]===a)return void y.selectedTimes.splice(b,1)},a.displayDefaultAccount=function(){if(!a.currentUser||!a.currentUser.ims)return"";switch(y.im_type){case"1":y.student_im_account=a.currentUser.ims.skype_account;break;case"6":y.student_im_account=a.currentUser.ims.google_talk_account;break;case"7":y.student_im_account=a.currentUser.ims.qq_account;break;case"8":y.student_im_account=a.currentUser.ims.face_time_account;break;case"9":y.student_im_account=a.currentUser.ims.wechat_account}},a.currentAmount=v,a.$watch("currentUser.ims",function(){m.debug("make sure im account exist"),a.displayDefaultAccount()}),a.$watch("newSession",function(b,c){m.debug("session request obj has changed!",b),A=0,a.enableContinue=b.student_im_account&&b.pwd&&b.selectedTimes.length>0},!0),a.openScheduleModal=function(){p.show(a.item.teacher_obj.id,angular.copy(y.selectedTimes,[]),null,a.item.course_obj.course_price_obj.session_length,null,null,!0).then(function(b){if(b){a.min=v()-a.item.available_itc_usd;var d=b.day.replace(/\//g,"-"),e=d+" "+b.time;if(b.isRepeat){m.debug("repeat every week",b);var f=a.item.course_obj.course_price_obj.package_length;angular.forEach(a.selectedTimes,function(a){1==a.status&&f--});for(var g=moment.tz(e,c.currentUser.timezone_iana),h=0;f>h;h++){h>0&&g.add(7,"days");var i={day:g.format("YYYY-MM-DD"),time:g.format("HH:mm"),date:g.format("YYYY-MM-DD HH:mm"),status:-1};_.filter(a.selectedTimes,{date:g.format("YYYY-MM-DD HH:mm")}).length<1&&a.selectedTimes.push(i)}w()}else a.selectedTimes.push({day:b.day,time:b.time,date:d+" "+b.time,status:1})}})}}]),angular.module("kp.session").controller("SessionPackageDetailCtrl",["Restangular","$translate","$state","$scope","IM_TYPE","$stateParams","alertModal","SessionConfirmModal","PasswordModal","ReasonModal","PackageExtensionModal","PackageModifyModal","TimeSelectorModal","KPNotify",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(b,e,f){e=e||{};var g=a.all("session/package").one(""+d.pack.id),h=a.service("session");i.show().then(function(a){switch(angular.extend(e,{pwd:a}),b){case"removeSession":d.sessionActionPromise=g.post("",e).then(function(){c.reload()},function(a){n.appendWithContent(a.msg||a.type)});break;case"schedule":d.sessionActionPromise=g.post("add-sessions",e).then(function(a){var b=a.data;angular.isArray(b)&&1==b.length&&(1!=b[0].status?n.appendWithContent("TS305".translate()):c.reload())},function(a){n.appendWithContent(a.msg||a.type)});break;case"accept":d.sessionActionPromise=h.one(f).post("",e).then(function(){c.reload()},function(a){n.appendWithContent(a.msg||a.type)});break;case"decline":d.sessionActionPromise=h.one(f).post("",e).then(function(){c.reload()},function(a){n.appendWithContent(a.msg)})}})}var p=(KP.Utils.format,b.instant,!1);d.isCN=function(){return"zh_cn"==b.use().toLowerCase()},d.$on("kp-next-package-session-status",function(b,e){function h(a){function b(){d.sessionActionPromise=q.post("",r).then(function(){c.reload()},function(a){n.appendWithContent(a.msg)})}return angular.isDefined(a)&&!a?void b():void i.show().then(function(a){angular.extend(r,{pwd:a}),b()})}var m=d.pack.teacher_textid,q=(KP.Utils.textIdToId(m),a.service("session/package").one(f.id)),r={next_status:e,status:d.pack.status,update_time:d.pack.update_time};switch(e){case"3":case"6":l.open(d.pack).then(function(a){var b=a.added,c=a.removed;if(b){var d=[];angular.forEach(b,function(a){d.push(a.time_js)}),angular.extend(r,{time:d}),o("schedule",r)}if(c){var e=[];angular.forEach(c,function(a){e.push(a.session_id)}),angular.extend(r,{cancel_sid:e}),o("removeSession",r)}});break;case"E_R_9":h();break;case"E_N":j.open().then(function(a){angular.extend(r,a),h()});break;case"E_8":k.open().then(function(a){angular.extend(r,a),h()});break;case"C":if(p){g.warn("TP448".translate());break}h();break;default:h()}}),d.schedule=function(){m.show(KP.Utils.textIdToId(d.pack.teacher_textid),[],!1,d.pack.session_duration).then(function(a){if(a){var b={time:a.day.replace(/\//g,"-")+" "+a.time};o("schedule",b)}})},a.one("session/package",f.id).get().then(function(a){var b=a.data;d.pack=b,d.meta=a.meta;var c=b.valid_session_obj_s,e=b.user_type,f=[],g=b.status,h=b.invalid_session_obj_s,i=b.sessions_total,j=0;if(d.validList=c,angular.forEach(c,function(a){"0"==a.status&&j++,["7","C","H"].indexOf(a.status)>-1&&(p=!0)}),d.invalidList=h,d.newRequestCount=j,d.notScheduledCount=i-c.length||"0",1==e&&"5"==g){for(var k=0;k<d.notScheduledCount;k++){var l={_id:"-1"};f.push(l)}d.addList=f}d.scheduledCount=c.length-j,d.canCancelPackage="5"==b.status}),d.accept=function(a){o("accept",{next_status:"6",status:a.status,update_time:a.update_time},a.session_id)},d.decline=function(a){o("decline",{next_status:"4",status:a.status,update_time:a.update_time},a.session_id)},d.confirm=function(b){h.show().then(function(d){var e={status:"7",next_status:"F",score:d.rate,comment:d.comment};i.show().then(function(d){var f=a.service("session").one(b);angular.extend(e,{pwd:d}),f.post("",e).then(function(){c.reload()})})})},d.getIMType=function(){return d.pack?e[d.pack.im_type-1]:void 0},d.navToUserOrTeacher=function(){var a="1"==d.pack.user_type?"teacher":"user";c.go(a,{id:d.pack.oppo_user_obj.id})}}]),angular.module("kp.session").controller("SessionProblemDetailCtrl",["Restangular","$translate","$scope","$stateParams","PasswordModal","KPNotify","$state","$log","$rootScope","$filter",function(a,b,c,d,e,f,g,h,i,j){var k=KP.Utils.format,l=b.instant,m=function(a,b,c){var d=a-b,e=parseInt(d/60/60/24),f=parseInt(d/60/60)-24*e,g=parseInt(d/60)-60*parseInt(d/60/60),h=l("C0033").split(":");d-=60*parseInt(d/60),6!=h.length&&(h=["year(s)","month(s)","day(s)","hour(s)","minute(s)","second(s)"]);var i=c?l(c):"{0}",j=[0,0,e,f,g,d];if(i.indexOf("{0} {1}")>-1||i.indexOf("{0}{1}")>-1)for(var k=2;6>k;k++)if(j[k]>0||5==k){var m=h[k];return m=j[k]>1?m.replace("(s)","s"):m.replace("(s)",""),i.replace("{0}",j[k]).replace("{1}",m)}for(var n="",o=0,k=2;6>k;k++)if(j[k]>0||5==k&&0==o){var m=h[k];if(m=j[k]>1?m.replace("(s)","s"):m.replace("(s)",""),n+=j[k]+" "+m+" ",o++,o>2)break}return i.replace("{0}",n.trim())},n=function(a,b){a.operater==b.user_type?a.operater_obj=c.currentUser:1==a.operater||2==a.operater?a.operater_obj=b.oppo_user_obj:a.operater_obj={id:0,avatar_file_name:"T000000000"}},o=function(a){var b,c;switch(a.operater){case 1:b="student",c=l("C0115");break;case 2:b="teacher",c=l("C0122");break;default:b="italki",c="ITALKI"}a.labelCss=b,a.labelName=c},p=function(a){switch(a.problem_reason){case 1:a.reason=l("TP603");break;case 2:a.reason=l("TP602");break;case 3:a.reason=l("TP664");break;default:a.reason=l("TP607")}},q=function(a,b){var c="";c="2"==b.session_type?l(a.itc_usd>0?"TP599":"TP598"):"S"==a.status?l("TP601"):0==a.itc_usd?l("TP609"):a.itc_usd==b.session_price_usd?l("TP605"):k(l("TP608"),j("number")((b.session_price_usd-a.itc_usd)/100,2),j("number")(a.itc_usd/100,2)),a.demand=c},r=function(a,b){if("7"==a.prev_status&&["C","S","H","E","P"].indexOf(a.status)>-1)return a.operater==b.user_type?a.content=l("TP465"):a.content=2==b.user_type?l("TP463"):l("TP461")+"<br/>"+l("TP464"),void(a.hasDemand=!0);var c="",d=!1;switch(a.status){case"7":"H"==a.prev_status&&(c=l("TP933"));break;case"H":c=l(2==b.user_type?2==a.operater?"TP467":"TP473":2==a.operater?"TP471":"TP469");break;case"Q":("S"==a.prev_status||"H"==a.prev_status)&&[1,2].indexOf(a.operater)>-1&&(c=2==b.user_type?2==a.operater?l("TP492")+"<br/>"+l("TP491"):l("TP501"):2==a.operater?l("TP493")+"<br/>"+l("TP491"):l("TP500"));break;case"P":9==a.operater||10==a.operater?c=l("TP528"):(c=l(2==b.user_type?"TP466":"TP470"),c+="<br/>"+l("TP528"));break;case"E":if("2"==b.session_type){c=2==b.user_type?1==a.operater?l("TP472")+"<br/>":"":1==a.operater?l("TP468")+"<br/>":"",c+=l("TP529");break}if("Q"==a.prev_status||"O"==a.prev_status){c=l("TP711")+": ",a.itc_usd>0&&(c+=k(l("TP922"),j("number")(a.itc_usd/100,2))+"&nbsp;"),b.problem_refund_usd>0&&(c+=k(l("TP923"),j("number")(b.problem_refund_usd/100,2))),c+='<br/><a href="http://support.italki.com/hc/en-us/articles/206352858" target="_blank">What Is Dispute Resolution And How Does Italki Handle This?</a>';break}if(2==b.user_type)switch(a.operater){case 1:c=l("TP472")+"<br/>",c+=0==b.problem_refund_usd?l("TP490"):b.session_price_usd==b.problem_refund_usd?l("TP484"):k(l("TP488"),j("number")(a.itc_usd/100,2),j("number")(b.problem_refund_usd/100,2));break;case 2:c=l("TP466")+"<br/>",c+=0==b.problem_refund_usd?l("TP490"):b.session_price_usd==b.problem_refund_usd?l("TP484"):k(l("TP486"),j("number")(b.problem_refund_usd/100,2),j("number")(a.itc_usd/100,2));break;default:c=0==b.problem_refund_usd?l("TP832"):b.session_price_usd==b.problem_refund_usd?l("TP830"):k(l("TP486"),j("number")(b.problem_refund_usd/100,2),j("number")(a.itc_usd/100,2))}else switch(a.operater){case 1:c=l("TP468")+"<br/>",c+=0==b.problem_refund_usd?l("TP498"):b.session_price_usd==b.problem_refund_usd?l("TP485"):k(l("TP489"),j("number")(a.itc_usd/100,2),j("number")(b.problem_refund_usd/100,2));break;case 2:c=l("TP470")+"<br/>",c+=0==b.problem_refund_usd?l("TP498"):b.session_price_usd==b.problem_refund_usd?l("TP485"):k(l("TP487"),j("number")(b.problem_refund_usd/100,2),j("number")(a.itc_usd/100,2));break;default:c=0==b.problem_refund_usd?l("TP833"):b.session_price_usd==b.problem_refund_usd?l("TP831"):k(l("TP487"),j("number")(b.problem_refund_usd/100,2),j("number")(a.itc_usd/100,2))}}a.content=c,a.hasDemand=d},s=function(){var a,b,d=c.session;switch(d.status){case"C":case"S":case"O":d.operater==d.user_type?(a="wait",b=l("TP793")):(a="action",b=l("TP791"));break;case"H":a="action",b=l("TP794");break;default:a="resolve",b=l("TP792")}c.session.label={css:a,text:b}},t=function(){var a=0,b="",d=c.session;switch(d.status){case"C":case"S":if(d.operater!=d.user_type){var e=moment(d.update_time).unix()+1209600,f=moment(d.current_time).unix();b='<span class="text-danger">'+m(e,f,"TP460")+"</span>"}case"H":case"Q":case"Q":case"W":a=2;break;case"P":case"E":a=3}c.session.navi={step:a,alert:b}},u=function(){var a="",b="",d=[],e=[],f=c.session;switch(f.status){case"C":case"S":var g=moment(f.update_time).unix()+604800,h=moment(f.current_time).unix(),n=moment(f.update_time_user).tz(i.currentUser.timezone_iana).add("days",7),o=l("TF004")+" (UTCZ)",p=n.format(o);if(f.operater==f.user_type){a=l(2==f.operater?"TP478":"TP477"),a+="<br/><strong>"+m(g,h,"TP525").replace("{2}",p)+"</strong><br/>"+l("TP526");break}b="C"==f.status?"E":"Q",a="<strong>"+m(g,h,"TP476").replace("{2}",p)+"</strong><br/>",1==f.operater?(d.push(l("TS466")),"S"==f.status?d.push(l("TS492")):"2"==f.session_type?d.push(l("TS528")):0==f.problem_refund_usd?d.push(l("TS490")):f.problem_refund_usd==f.session_price_usd?d.push(l("TS484")):d.push(k(l("TS486"),j("number")(f.problem_refund_usd/100,2),j("number")((f.session_price_usd-f.problem_refund_usd)/100,2))),e.push(l("TS467")),a+=l("TP479")):(d.push(l("TS468")),"S"==f.status?d.push(l("TS500")):"2"==f.session_type?d.push(l("TS529")):0==f.problem_refund_usd?d.push(l("TS498")):f.problem_refund_usd==f.session_price_usd?d.push(l("TS485")):d.push(k(l("TS489"),j("number")((f.session_price_usd-f.problem_refund_usd)/100,2),j("number")(f.problem_refund_usd/100,2))),e.push(l("TS469")),a+=l("TP480")),e.push(l("TS496"));break;case"H":a=l("TP496");break;case"Q":a=l("TP502")+'<br/><a class="btn btn-primary" href="/lesson/session/'+f.id+'">'+l("TP109")+"</a>";break;case"E":[1,2].indexOf(f.operater)>-1&&"7"==c.problemList[c.problemList.length-1].prev_status&&(a="2"==f.session_type?l("TP529"):1==f.operater?k(l("TP482"),j("number")(f.session_price_usd/100,2)):k(l("TP483"),j("number")(f.session_price_usd/100,2)));break;case"p":2==f.operater&&"7"==c.problemList[c.problemList.length-1].prev_status&&(a=l("TP528"))}c.session.Desc=a,c.session.next_status=b,c.session.acceptDesc=d,c.session.declineDesc=e};a.one("session/problem",d.sessionId).get().then(function(a){for(var b=[],d=a.meta.session_obj,e=a.data.length,f=0;e>f;f++){var g=a.data[f];r(g,d),""!=g.content&&(n(g,d),o(g),g.hasDemand&&(q(g,d),p(g)),b.push(g))}c.session=d,c.problemList=b,s(),t(),u()});var v=function(b,i){var j={next_status:b,status:c.session.status};e.show(i).then(function(b){j.pwd=b,c.sessionActionPromise=a.one("session",d.sessionId).post("",j).then(function(a){h.debug("reject session",a),g.reload()},function(a){f.appendWithContent(a.type+" : "+a.msg)})})};c.accept=function(){v(c.session.next_status,{title:l("TP237"),body:l("UR057")})},c.decline=function(){v("H",{title:l("TP237"),body:l("UR057")})},c.navToUserOrTeacher=function(a){var b=a.operater_obj.id;g.go(2==a.operater?"teacher":"user",{id:b})}}]),angular.module("kp.session").controller("sessionDetailCtrl",["$rootScope","CourseListModal","RaiseSessionProblemModal","$$kpInstantLessonAlertPanelService","SessionConfirmModal","UpdateITCModal","FeedbackModal","TimeSelectorModal","PasswordModal","$scope","KPNotify","Restangular","$translate","$filter","IM_TYPE","$sce","$stateParams","$log","$state","$modal","$timeout","UserService","ENV",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=null,y=function(a){return Object.keys(a).map(function(b){var c=a[b];return"object"==typeof c?y(c):c}).join(",")};j.isCN=function(){return"zh_cn"==m.use().toLowerCase()},j.$on("kp-next-session-status",function(a,m){var n=j.session.teacher_textid,o=KP.Utils.textIdToId(n),p=l.service("session").one(q.sessionId),w={next_status:m,status:j.session.status,update_time:j.session.update_time},z=function(a){i.show().then(function(b){w.pwd=b,j.sessionActionPromise=p.post("",w).then(function(b){r.debug("reject session",b),a?s.go("sessionProblemDetail",{sessionId:q.sessionId}):(("3"==j.session.status&&"6"==m||"E"==m&&!x)&&v.resetPaymentAccountCache(),"E"==m&&x&&v.resetRevenueAccountCache(),s.reload(),"4"==j.session.session_type&&("6"==m&&j.currentUser.is_available_instant_tutoring&&(j.currentUser.is_available_instant_tutoring=!1),u(function(){d.restoreFromServer()},2e3)))},function(b){if(b){switch(b.type){case"StatusChanged":return void s.reload();case"incorrect_password":z(a)}"IncorrectTimeT"==b.type?b.msg="Conflict with Teacher's Schedule":"IncorrectTimeS"==b.type&&(b.msg="Conflict with Student's Schedule"),k.appendWithContent(b.type+" : "+b.msg)}}),r.debug("busy promise",j.sessionActionPromise)})};switch(m){case"another-session":b.open(o);break;case"new-instant-lesson-request":s.go("InstantRequest",{teacherId:o,language:j.session.learn_language});break;case"RESOLVE":s.go("sessionProblemDetail",{sessionId:q.sessionId});break;case"1":case"4":case"W":case"5_N":case"Q":case"H":case"6":case"5_Y":z();break;case"C":c.show(j.session).then(function(a){a&&(angular.extend(w,a),z(!0))});break;case"3_itc":f.show(j.session.session_price_usd).then(function(a){w.itc_new_usd=(100*a.newValue).toFixed(),z()});break;case"O":case"5":case"3_time":var A=["Q","O"].indexOf(j.session.status)>-1;h.show(o,[],x,j.session.session_duration,A,j.session.id).then(function(a){if(a){var b=a.day.replace(/\//g,"-");w.session_time_new=b+" "+a.time,z()}});break;case"F":e.show().then(function(a){w.score=a.rate,w.comment=a.comment,w.public_basic_vote_tag_id_list=y(a.public_basic_vote_tag_id_list),w.public_normal_vote_tag_id_list=y(a.public_normal_vote_tag_id_list),w.personal_vote_tag_id_list=y(a.personal_vote_tag_id_list),z()});break;case"G":g.open().then(function(a){angular.extend(w,a),z()});break;case"6_cannot_change_time":t.open({templateUrl:"/views/component/session.cannotchangetime.modal.html"})}}),j.$on("kp.countdown.stoped",function(){u(function(){s.reload()},1e3)}),j.$on("kp.countdown.notify",function(){var a=j.session;a&&!x&&(a.op_html='<p><button type="button" class="btn" kp-session-next-status="{0}" translate="TP140"></button></p>'.format(1))}),j.navToUserOrTeacher=function(){var a="1"==j.session.user_type?"teacher":"user";s.go(a,{id:j.session.oppo_user_obj.id})},l.one("session",q.sessionId).get().then(function(a){var b=a.data;j.session=b,j.currentStatus=[["0","3","Q","O"].indexOf(j.session.status)>-1,["5","6","W"].indexOf(j.session.status)>-1,["7","S","C","H"].indexOf(j.session.status)>-1,["E","F","G"].indexOf(j.session.status)>-1],x="2"==j.session.user_type;j.$watch("currentUser",function(a){j.nickNames=[j.currentUser.nickname,j.session.oppo_user_obj.nickname],x&&j.nickNames.reverse()});if(["1","2","E","F","G","P","Z"].indexOf(b.status)>-1&&"1"==b.user_type){var c=b.op_html;b.op_html=c+'<button type="button" class="btn" ng-if="session.is_schedule"  italki-click-test teacher="{id:session.oppo_user_obj.id}" pag-state="sessionDetail">{{"TP111"|t}}</button>'}if(["F","G"].indexOf(b.status)>-1&&"4"==b.session_type&&"1"==b.user_type&&"1"==b.oppo_user_obj.instant_tutoring_status&&"1"==b.oppo_user_obj.is_available_instant_tutoring){var d=1e3*moment(b.session_start_time).add(45,"m").unix(),e=d-(new Date).getTime();if(e>0){var c=b.op_html;b.op_html='<button type="button" class="btn" translate="TS114" kp-session-next-status="new-instant-lesson-request"></button>',u(function(){b.op_html=c},e)}}j.session=a.data;var f=q.fromUrl;"classroom"==f&&"7"==j.session.status&&"1"==j.session.user_type&&j.$emit("kp-next-session-status","F")}),j.getIMType=function(){if(j.session){return o[j.session.im_type-1]}}}]),angular.module("kp.session").service("ScheduleService",["$rootScope","Session","$q",function(a,b,c){function d(a){var d=c.defer();return b.sessionSchedule(a).then(function(a){g=a.data,d.resolve(g)},function(a){d.reject(a)}),d.promise}function e(){var a=[{v:"1",name:"Skype",type:"skype_account"},{v:"6",name:"Google Hangouts",type:"google_talk_account"},{v:"7",name:"QQ",type:"qq_account"},{v:"8",name:"FaceTime",type:"face_time_account"},{v:"9",name:"Wechat",type:"wechat_account"}];return a}function f(){g=null}var g;return{getSchedulingData:d,getAllTools:e,clearCache:f}}]).controller("newSessionScheduleCtrl",["$scope","experimentTest","WizardHandler","ScheduleService","localStorageService","PendingPurchaseModal","$state","$window","KPNotify","NOEnoughITCModal","Session","$stateParams","$modal","$log","$timeout","isWechat","kpBrowserLan","WechatPopUp",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(b){a.model.error=b,console.log(a.model.error),a.model.pwd="","PaymentAccountDisabled"==b.type?a.disabledAccount=1:"TimesAvailable"==b.type?a.model.TimesAvailable=1:"CommunicationChanged"==b.type?a.model.CommunicationChanged=1:"need one param time"==b.msg&&(a.model.TimesAvailable=1),o(function(){a.model.error=null},3e3)}function t(){p.binded().then(function(a){q.isCnUser()&&angular.isUndefined(a)&&r.open()})}function u(b){var d=k.sessionPackageRequest();return d.post(b).then(function(b){function d(){var a=e.session_time_status_s;for(var b in a)if(1==a[b].status)return!0;return!1}var e=b.data;if(angular.isArray(e.session_time_status_s)){var f=e.session_time_status_s,g=f.length;if(1==g&&1!=f[0].status||!d()){a.model.error={msg:"TS305".translate()};var h=c.wizard("ScheduleSteps");h.goTo(1),a.model.TimesAvailable=1}else a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,t()}else i.appendWithContent("package request result should be return array,but nothing got.")},function(a){s(a)})}function v(b){var d=k.sessionRequest();return d.post(b).then(function(b){function d(){for(var a in e)if(1==e[a].status)return!0;return!1}var e=b.data;if(angular.isArray(e)){var f=e.length;if(1==f&&1!=e[0].status||!d()){a.model.error={msg:"TS305".translate()};var g=c.wizard("ScheduleSteps");g.goTo(1),a.model.TimesAvailable=1}else a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,t()}else i.appendWithContent("Session request result should be return array,but nothing got.")},function(a){s(a)})}function w(b){return k.newTrialSession(b).then(function(b){n.debug("session request result:",b);var c=b.data;angular.isObject(c)?1==c.status?(a.$emit("$resetScrollTop"),a.sessionRequestResult=b.data,t()):a.model.error={msg:"TS305".translate()}:i.appendWithContent("Trial session request result should be return object,but nothing got.")},function(a){s(a)})}function x(b,c){var d=f.preCheck(b,a.model.available_balance,c);return d.then(function(b){var c=b.orderId,d=f.open(c);d.then(function(a){f.success("lessonSuccess"),e.remove("currentPurchasePageShouldAutoClose")},function(b){var c=[];if(angular.forEach(a.model.selectedTimes,function(a){c.push(a.date)}),k.checkSessionTimeAvailable2(a.model.teacher_obj.id,a.model.course_price_id,c).then(function(b){var c=b.data;angular.isArray(c)&&angular.forEach(c,function(b){angular.forEach(a.model.selectedTimes,function(a){if(b.time_str==a.date){var c=-1;c=1==b.status?1:0,a.status=c}})})}),b){switch(b.type){case"TeacherNotAvailable":f.prefail(b);break;case"CourseChanged":f.prefail(b);break;case"TimesAvailable":f.prefail(b).then(function(){a.submit(a.Form1)}),s(b);break;case"CommunicationChanged":s(b);break;case"NoEnoughItc":a.NoEnoughItc=1}e.remove("currentPurchasePageShouldAutoClose")}}),e.set("currentPurchasePageShouldAutoClose","1")},function(a){a&&s(a)}),d}a.model={step_type:"",selectedTimes:[],course_id:void 0,course_price_id:void 0,selectedCourse:void 0,selectedSession:void 0,teacher_obj:void 0,student_im_account:void 0,im_type:void 0,total:void 0,lessonsToAdd:void 0,moneyToAdd:void 0,amountSaved:void 0,isPackage:!1,packageLength:"1",msg:"",pwd:"",save:"",available_balance:void 0,available_itc_usd:void 0,classRoom:!1,inputType:""},a.steps={stepOne:{id:1,title:"stepOne"},stepTwo:{id:2,title:"stepTwo",headingTitle:"2. Select a time and date"},stepThree:{id:3,title:"stepThree",headingTitle:"3. Add your communication tool"},stepFour:{id:4,title:"stepFour",headingTitle:"4. Discounts and special offers"},stepFive:{id:5,title:"stepFive",headingTitle:"5. Confirmation and checkout"}},a.$watch("currentUser",function(b,c){a.model.currentUser=a.currentUser},!0),b.ABTest("italkiClassroomBeta").then(function(b){"CommunicationTool"===b.data.group_name?a.model.classRoom=!1:(a.model.im_type="Z",a.model.classRoom=!0)}),a.name="ScheduleSteps",a.currentStep="",a.disabledAccount=0,a.goToDetail=function(b){if(a.sessionRequestResult.pid)g.go("sessionPackageDetail",{id:a.sessionRequestResult.pid});else if(a.sessionRequestResult.length){for(var c=0;c<a.sessionRequestResult.length;c++)if(1===a.sessionRequestResult[c].status){g.go("sessionDetail",{sessionId:a.sessionRequestResult[c].session_id});break}}else g.go("sessionDetail",{sessionId:a.sessionRequestResult.session_id})},a.onFinish=function(){var b,c,d=[];angular.forEach(a.model.selectedTimes,function(a,b){d.push(a.date)});var e;e=3===a.model.step_type?{language:a.model.languageObj,im_type:a.model.im_type,msg:a.model.msg,pwd:a.model.pwd,time:d,student_im_account:a.model.student_im_account,selectedTimes:a.model.selectedTimes,teacher_id:a.model.teacher_obj.id}:{course_price_id:a.model.course_price_id,im_type:a.model.im_type,msg:a.model.msg,pwd:a.model.pwd,time:d,student_im_account:a.model.student_im_account},a.model.available_balance=a.model.available_itc_usd-a.model.total,a.model.available_balance<0?a.model.isPackage?(b="requested_package",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:a.model.selectedCourse.title,package_lessons:a.model.package_length},x(e,2)):3===a.model.step_type?(b="requested_trial",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:"Trial"},x(e,3)):(b="requested_lesson",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:a.model.selectedCourse.title},x(e,1)):a.model.isPackage?(b="requested_package",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:a.model.title,package_lessons:a.model.package_length},u(e)):3===a.model.step_type?(b="requested_trial",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:"Trial"},w(e)):(b="requested_lesson",c={learning_language:a.model.language,lesson_price:a.model.selectedSession.session_itc_usd,teacher_ID:a.model.teacher_obj.id,teacher_name:a.model.teacher_obj.nickname,teacher_type:a.model.teacher_obj.is_pro?"pro":"tutor",course_name:a.model.title},v(e)),window._bt&&_bt.track(b,c)}}]).directive("scheduleStepOne",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.one.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","$q","$state","$stateParams","ScheduleService","$translate","WizardHandler",function(a,b,c,d,e,f,g){function h(a,b,c){var d=a*c,e=d-b,f=e/d;return Math.round(100*f)}a.number=a.stepNumber,a.courses=[],a.teachLans=[],a.selectedCourses=[],a.showEdit=function(){var b=g.wizard("ScheduleSteps");return b.currentStepNumber()>a.stepData.id},a.editStep=function(){a.model.inputType="";var b=g.wizard("ScheduleSteps");b.goTo(a.stepData.title)};var i=f.instant,j=angular.copy(KP.LANSEL);angular.forEach(j,function(a){a.name=i(a.v)}),e.getSchedulingData({teacher_id:d.teacherId}).then(function(b){a.courses=b.course_obj_s,a.model.teacher_obj=b.teacher_obj,a.model.available_itc_usd=b.available_itc_usd;var c=[],e=[];angular.forEach(a.courses,function(a){c.push({language:a.language}),angular.isDefined(d.priceId)&&a.id==d.priceId&&e.push(a)}),c=_.uniq(c,"language");var f=Object.keys(c).length;a.teachLans=c,a.lanLength=f,a.model.languageObj=null,0!=e.length?(a.model.languageObj=e[0].language,a.onLanguageSelect(e[0],e[0].language)):(a.model.languageObj=a.teachLans[0].language,a.onLanguageSelect(a.teachLans[0],a.teachLans[0].language))},function(a){a&&"Must supply teacher_id"===a.msg&&c.go("teachers")}),a.onLanguageSelect=function(b,c){if(a.selectedCourses=[],angular.forEach(a.courses,function(b){b.language==c&&(b.title?"TP996"==b.title?a.selectedCourses.splice(0,0,b):a.selectedCourses.push(b):(b.title="TP996",a.selectedCourses.splice(0,0,b)))}),a.selectedCourses.reverse(),d.priceId){for(var e=0;e<a.selectedCourses.length;e++)if(a.selectedCourses[e].id==d.priceId)return a.model.selectedCourses=a.selectedCourses[e].title,void a.onCourseSelect(a.selectedCourses[e])}else a.model.selectedCourses=a.selectedCourses[0].title,a.onCourseSelect(a.selectedCourses[0]);var f=Object.keys(a.selectedCourses).length;a.courseLength=f,a.model.selectedTimes=[],a.model.total=void 0,a.model.lessonsToAdd=void 0,a.model.moneyToAdd=void 0,a.model.amountSaved=void 0,a.model.isPackage=!1},a.onCourseSelect=function(b,c){a.selectedCourseId=b.id,angular.forEach(a.courses,function(c){if(c.id==b.id){a.selectedCourse=c,a.model.course_id=a.selectedCourse.id,a.model.selectedCourse=a.selectedCourse,a.model.selectedLanguage=b.language;for(var d=0;d<c.price_obj_s.length;d++){var e=c.price_obj_s[d];if(4==e.session_length){a.model.course_price_id=e.id,a.onDurationSelect(e);break}a.model.course_price_id=void 0}}});var d=!0;a.selectedCourse&&angular.forEach(a.selectedCourse.price_obj_s,function(b){d&&(2!=b.session_length&&3!=b.session_length&&4!=b.session_length&&6!=b.session_length||1==b.package_length?a.package_show=!1:(a.package_show=!0,d=!1))}),a.model.selectedTimes=[],a.model.total=void 0,a.model.lessonsToAdd=void 0,a.model.moneyToAdd=void 0,a.model.amountSaved=void 0,a.model.isPackage=!1},a.onDurationSelect=function(b){angular.forEach(a.model.selectedCourse.price_obj_s,function(b){b.course_price_id==a.model.course_price_id&&(a.model.course_price_id=b.course_price_id,a.selectedSession=b)}),a.model.selectedSession=a.selectedSession,a.model.save=h(a.selectedSession.session_itc_usd,a.selectedSession.package_itc_usd,a.selectedSession.package_length),a.model.selectedTimes=[],a.model.isPackage=!1,a.model.packageLength=1},a.onCheckedLesson=function(){a.model.isPackage=!1,a.model.packageLength=1},a.onCheckedPackage=function(){a.model.isPackage=!0,a.model.packageLength=a.selectedSession.package_length},a.stepData.canExit=function(a){return!0}}]}}).directive("scheduleStepTrial",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.trial.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","$q","$state","$stateParams","ScheduleService","$translate","WizardHandler","TimeSelectorModal","Session","moment",function(a,b,c,d,e,f,g,h,i,j){function k(b,c){var d=b.session_itc_usd*c.length;1===b.package_length?(a.model.total=d,a.showAddSchedulTimeBtn=!0,a.model.isPackage=!1):c.length<b.package_length?(a.model.total=d,a.model.isPackage=!1,a.showAddSchedulTimeBtn=!0):c.length===b.package_length&&(a.model.total=b.package_itc_usd,a.model.isPackage=!0,a.showAddSchedulTimeBtn=!1),3===a.model.step_type&&c.length>0&&(a.showAddSchedulTimeBtn=!1)}function l(){if(a.model.selectedTimes.length>0){var b=[];angular.forEach(a.model.selectedTimes,function(a){b.push(a.date)}),i.checkSessionTimeAvailable2(a.model.selectedCourse.teacher_id,a.model.course_price_id,b).then(function(b){var c=b.data,d=!1;angular.isArray(c)&&(angular.forEach(c,function(b){angular.forEach(a.model.selectedTimes,function(a){if(b.time_str==a.date){var c=-1;1==b.status?c=1:(c=0,d=!0),a.status=c}})}),d||(a.model.TimesAvailable=0))})}}a.courses=[],a.teachLans=[],a.selectedCourses=[],a.model.step_type=3,a.number=a.stepNumber,a.showEdit=function(){var b=g.wizard("ScheduleSteps");return b.currentStepNumber()>a.stepData.id},a.editStep=function(){a.model.inputType="";var b=g.wizard("ScheduleSteps");b.goTo(a.stepData.title)};var m=f.instant,n=angular.copy(KP.LANSEL);angular.forEach(n,function(a){a.name=m(a.v)});var o={teacher_id:d.teacherId};e.getSchedulingData(o).then(function(b){a.courses=b.course_obj_s,a.model.teacher_obj=b.teacher_obj,a.model.available_itc_usd=b.available_itc_usd,a.model.selectedSession={session_itc_usd:b.teacher_obj.teacher_info_obj.trial_price,session_length:2,package_length:1};var c=[];angular.forEach(a.courses,function(a){c.push({language:a.language})}),c=_.uniq(c,"language");var d=Object.keys(c).length;a.teachLans=c,a.lanLength=d,a.model.languageObj=a.teachLans[0].language,a.model.selectedTimes=[],a.model.isPackage=!1,a.model.selectedCourse={teacher_id:a.model.teacher_obj.id}},function(a){"Must supply teacher_id"===a.msg&&c.go("teachers")}),a.model.selectedCourses="TS032",a.showAddSchedulTimeBtn=!0,a.$watch(function(){
return a.model.selectedTimes.length},function(){a.model.selectedSession&&k(a.model.selectedSession,a.model.selectedTimes)}),a.removeTime=function(b){for(var c=0;c<a.model.selectedTimes.length;c++)if(a.model.selectedTimes[c]===b)return void a.model.selectedTimes.splice(c,1);l()},a.openScheduleModal=function(){h.show(a.model.selectedCourse.teacher_id,angular.copy(a.model.selectedTimes,[]),null,a.model.selectedSession.session_length).then(function(b){if(b){var c=b.day.replace(/\//g,"-");if(a.showAddSchedulTimeBtn){var d=c+" "+b.time;a.model.selectedTimes.push({day:b.day,time:b.time,date:d,status:-1,m:j(d)}),a.model.selectedTimes.sort(function(a,b){return a.m-b.m}),l()}}})},a.stepData.onEnter=function(){l()},a.stepData.canEnter=!0,a.stepData.canExit=function(){var b=a.model.selectedTimes.length>=1,c=a.model.selectedTimes.length<=a.model.selectedSession.package_length;return b&&c}}]}}).directive("scheduleStepTwo",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.two.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","TimeSelectorModal","Session","WizardHandler","moment","$filter",function(a,b,c,d,e,f){function g(b,c){var d=b.session_itc_usd*c.length;1===a.model.packageLength?1===b.package_length?(a.model.total=d,a.showAddSchedulTimeBtn=!0,a.model.isPackage=!1):c.length<b.package_length?(a.model.total=d,a.model.isPackage=!1,a.showAddSchedulTimeBtn=!0):c.length===b.package_length&&(a.model.total=b.package_itc_usd,a.model.isPackage=!0,a.showAddSchedulTimeBtn=!1):(a.model.isPackage=!0,a.model.total=b.package_itc_usd,c.length===b.package_length&&(a.showAddSchedulTimeBtn=!1)),3===a.model.step_type&&c.length>0&&(a.showAddSchedulTimeBtn=!1)}function h(){if(a.model.selectedTimes.length>0){var b=[];angular.forEach(a.model.selectedTimes,function(a){b.push(a.date)}),c.checkSessionTimeAvailable2(a.model.selectedCourse.teacher_id,a.model.course_price_id,b).then(function(b){var c=b.data,d=!1;angular.isArray(c)&&(angular.forEach(c,function(b){angular.forEach(a.model.selectedTimes,function(a){if(b.time_str==a.date){var c=-1;1==b.status?c=1:(c=0,d=!0),a.status=c}})}),d||(a.model.TimesAvailable=0))})}}a.showAddSchedulTimeBtn=!0,a.number=a.stepNumber,a.showEdit=function(){var b=d.wizard("ScheduleSteps");return b.currentStepNumber()>a.stepData.id},a.editStep=function(){var b=d.wizard("ScheduleSteps");b.goTo(a.stepData.title)},a.$watch(function(){return a.model.selectedTimes.length},function(){a.model.selectedSession&&g(a.model.selectedSession,a.model.selectedTimes)}),a.removeTime=function(b){for(var c=0;c<a.model.selectedTimes.length;c++)if(a.model.selectedTimes[c]===b)return void a.model.selectedTimes.splice(c,1);h()},a.openScheduleModal=function(){b.show(a.model.selectedCourse.teacher_id,angular.copy(a.model.selectedTimes,[]),null,a.model.selectedSession.session_length).then(function(b){if(b){var c=b.day.replace(/\//g,"-");if(a.showAddSchedulTimeBtn){var d=c+" "+b.time;a.model.selectedTimes.push({day:b.day,time:b.time,date:d,status:-1,m:e(d)}),a.model.selectedTimes.sort(function(a,b){return a.m-b.m}),h()}}})},a.stepData.onEnter=function(){h()},a.stepData.canEnter=!0,a.stepData.canExit=function(){var b=a.model.selectedTimes.length>=1,c=a.model.selectedTimes.length<=a.model.selectedSession.package_length;return 1==a.model.selectedSession.package_length&&(c=!0),b&&c}}]}}).directive("scheduleStepThree",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.three.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","WizardHandler","ScheduleService","$timeout","$rootScope",function(a,b,c,d,e){a.stepData.canEnter=!0,a.number=a.stepNumber,a.stepData.canExit=function(){return!0},a.showEdit=function(){var c=b.wizard("ScheduleSteps");return 2===a.number&&(a.stepData.id=2),c.currentStepNumber()>a.stepData.id},a.editStep=function(){var c=b.wizard("ScheduleSteps");c.goTo(a.stepData.title)},a.$watch(function(){return a.model.teacher_obj},function(b,f){if(!a.model.classRoom&&a.model.teacher_obj){var g=a.model.teacher_obj.user_detail_obj;a.tools=c.getAllTools().filter(function(a){return g[a.type]}),a.model.im_type=a.tools[0].v,d(function(){a.model.student_im_account=e.currentUser.ims[a.tools[0].type]},500)}}),a.onSelected=function(b){a.model.selectedTool=b,a.model.student_im_account=e.currentUser.ims[a.model.selectedTool.type]}}]}}).directive("scheduleStepFour",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.four.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","$timeout","WizardHandler",function(a,b,c){a.number=a.stepNumber,a.showEdit=function(){var b=c.wizard("ScheduleSteps");return b.currentStepNumber()>a.stepData.id},a.editStep=function(){var b=c.wizard("ScheduleSteps");b.goTo(a.stepData.title)},a.$watch(function(){return a.model.selectedSession?a.model.selectedSession.package_length>1:void 0},function(b,c){a.stepData.disabled=!b}),a.onChecked=function(){a.model.isPackage?a.model.total=a.model.selectedSession.package_itc_usd:a.model.total=a.model.selectedSession.session_itc_usd*a.model.selectedTimes.length,a.model.available_balance=a.model.available_itc_usd-a.model.total},a.stepData.canEnter=!0,a.stepData.canExit=!0}]}}).directive("scheduleStepFive",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.step.five.html",scope:{model:"=",stepData:"=",currentStep:"=",stepNumber:"="},controller:["$scope","WizardHandler",function(a,b){a.number=a.stepNumber,a.showEdit=function(){var c=b.wizard("ScheduleSteps");return c.currentStepNumber()>a.stepData.id},a.editStep=function(){var c=b.wizard("ScheduleSteps");c.goTo(a.stepData.title)},a.notEnoughBalance=function(){return a.model.available_itc_usd-a.model.total<0?"notEnoughBalance":void 0},a.stepData.canEnter=!0,a.stepData.canExit=!0}]}}).directive("scheduleDivider",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.divider.html"}}).directive("scheduleSummary",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.summary.html"}}).directive("scheduleDetails",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.details.html",scope:{model:"="},controller:"$$scheduleDetailCtrl"}}).directive("scheduleViewDetails",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.view.details.html",scope:{model:"="},controller:"$$scheduleDetailCtrl"}}).controller("$$scheduleDetailCtrl",["$scope","WizardHandler",function(a,b){a.model.fullLessonRequestSummaryShown=!1,a.switchSlide=function(){a.model.fullLessonRequestSummaryShown=!$$scope.model.fullLessonRequestSummaryShown},a.checkShown=function(){return a.model.fullLessonRequestSummaryShown},a.confirm=function(){a.model.fullLessonRequestSummaryShown=!1},a.showConfirmBtn=function(){var c=b.wizard("ScheduleSteps");return 3===a.model.step_type?c.currentStepNumber()>2:a.model.selectedSession&&a.model.selectedSession.package_length>1?c.currentStepNumber()>4:c.currentStepNumber()>3},a.getLessonDuration=function(){return a.model.selectedSession?15*a.model.selectedSession.session_length:void 0},a.getPackageCostUSD=function(){return a.model.selectedSession?a.model.selectedSession.package_itc_usd:void 0},a.getSessionCostUSD=function(){return a.model.selectedSession?a.model.selectedSession.session_itc_usd:void 0},a.getNumberLessons=function(){return a.model.isPackage?a.model.selectedSession.package_length:0===a.model.selectedTimes.length?1:a.model.selectedTimes.length},a.getNumberLessonsCost=function(){return a.model.selectedSession?1===a.model.selectedSession.package_length?+parseFloat(a.getNumberLessons()*a.getSessionCostUSD()).toFixed(2):a.model.isPackage?a.getPackageCostUSD():a.getNumberLessons()!==a.model.selectedSession.package_length?+parseFloat(a.getNumberLessons()*a.getSessionCostUSD()).toFixed(2):a.getPackageCostUSD():void 0},a.model.total=a.getNumberLessonsCost()}]).directive("scheduleViewPrice",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/schedule.view.price.html",scope:{model:"="},controller:["$scope","WizardHandler","$window",function(a,b,c){a.openFullSummary=function(){c.scrollTo(0,0),a.model.fullLessonRequestSummaryShown=!0}}]}}).animation(".slide",function(){var a="ng-hide";return{beforeAddClass:function(b,c,d){c===a&&b.slideUp(d)},removeClass:function(b,c,d){c===a&&b.hide().slideDown(d)}}}).directive("ngSteps",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/ngSteps.html",replace:!0,transclude:!0,scope:{onFinish:"&",onCancel:"&",currentStep:"=",name:"=",onNumber:"=",model:"="},controller:["$scope","$element","$log","$q","$timeout","WizardHandler",function(a,b,c,d,e,f){function g(){angular.forEach(a.getEnabledSteps(),function(a){a.selected=!1}),a.selectedStep=null}function h(a){a.onEnter&&a.onEnter()}function i(a){a.onExit&&a.onExit()}function j(b){var c,e;return void 0===b.canEnter?!0:"boolean"==typeof b.canEnter?b.canEnter:(e=b.canEnter(a.context),angular.isFunction(e.then)?(c=d.defer(),e.then(function(a){c.resolve(a)}),c.promise):e===!0)}function k(b,c){var e,f;return"undefined"==typeof b.canExit||a.getStepNumber(c)<a.currentStepNumber()?!0:"boolean"==typeof b.canExit?b.canExit:(f=b.canExit(a.context),angular.isFunction(f.then)?(e=d.defer(),f.then(function(a){e.resolve(a)}),e.promise):f===!0)}var l=function(b){var c=0,d=-1;return angular.forEach(a.getEnabledSteps(),function(a){a===b&&(d=c),c++}),d};a.stepByTitle=function(b){var c=null;return angular.forEach(a.getEnabledSteps(),function(a){a.stepTitle===b&&(c=a)}),c};var m=!0;f.addWizard(a.name||f.defaultName,this),a.$on("$destroy",function(){f.removeWizard(a.name||f.defaultName)}),a.steps=[],a.getEnabledSteps=function(){var b=a.steps.filter(function(a){return a&&a.disabled!==!0});return b},a.currentStepNumber=function(){return l(a.selectedStep)+1},a.getStepNumber=function(a){return l(a)+1},a.goTo=function(b){if(m)g(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.stepTitle),b.selected=!0,a.$emit("ngSteps:stepChanged",{step:b,index:l(b)}),m=!1;else{var c=l(a.selectedStep);d.all([k(a.getEnabledSteps()[c],b),j(b)]).then(function(d){d[0]&&d[1]?(i(a.getEnabledSteps()[c]),h(b),g(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.stepTitle),b.selected=!0,a.$emit("ngSteps:stepChanged",{step:b,index:l(b)})):a.$emit("ngSteps:stepChangeFailed",{step:b,index:_.indexOf(a.getEnabledSteps(),b)})})}},this.context=a.context,this.currentStepTitle=function(){return a.selectedStep.stepTitle},this.currentStepDescription=function(){return a.selectedStep.description},this.getStepNumber=function(b){return a.getStepNumber(b)},this.stepByTitle=function(b){return a.stepByTitle(b)},this.currentStep=function(){return a.selectedStep},this.totalStepCount=function(){return a.getEnabledSteps().length},this.getEnabledSteps=function(){return a.getEnabledSteps()},this.currentStepNumber=function(){return a.currentStepNumber()},this.addStep=function(b){a.steps.push(b),a.getEnabledSteps()[0]===b&&a.goTo(a.getEnabledSteps()[0])},this.next=function(){var b=a.getEnabledSteps(),c=l(a.selectedStep);a.selectedStep.completed=!0,c===b.length-1?this.finish():(c==b.length-2?a.model.inputType="password":a.model.inputType="",a.goTo(b[c+1]))},this.previous=function(){var b=l(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[b-1])},this.goTo=function(b){e(function(){var c,d=a.getEnabledSteps();c=angular.isNumber(b)?d[b]:a.stepByTitle(b),a.goTo(c)})},this.finish=function(){a.onFinish&&a.onFinish()},this.cancel=function(){if(a.onCancel)a.onCancel();else{var b=l(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[0])}},this.reset=function(){angular.forEach(a.getEnabledSteps(),function(a){a.completed=!1}),this.goTo(0)}}]}}).directive("ngStep",function(){return{restrict:"EA",templateUrl:"/views/sessions/directives/ngStep.html",replace:!0,transclude:!0,scope:{stepTitle:"@",stepHeadingTitle:"@",canEnter:"=",canExit:"=",onEnter:"=",onExit:"=",disabled:"=?disabled"},require:"^ngSteps",link:function(a,b,c,d,e){c.$observe("stepTitle",function(b){a.title=a.wzTitle}),a.title=a.stepTitle,d.addStep(a)}}}).factory("WizardHandler",function(){var a={},b={};return a.defaultName="defaultWizard",a.addWizard=function(a,c){b[a]=c},a.removeWizard=function(a){delete b[a]},a.wizard=function(c){var d=c;return c||(d=a.defaultName),b[d]},a}),wizardButtonDirective("stepNext"),wizardButtonDirective("stepPrevious"),wizardButtonDirective("stepFinish"),wizardButtonDirective("stepCancel"),wizardButtonDirective("stepReset"),angular.module("kp.contact",["kp.util"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/contacts","/contact/follow"),a.state("contacts",{parent:"kp",url:"/contacts",templateUrl:"/views/contact/contact.bs.html",data:{role:"user"}}).state("contacts.partner",{url:"/partner",templateUrl:"/views/contact/contact.friends.html",controller:"contactFriendsCtrl",data:{title:"M0029"}}).state("contacts.teacher",{url:"/teacher",templateUrl:"/views/contact/contact.teacher.html",controller:"contactTeacherCtrl",data:{title:"C0154"}}).state("contacts.student",{url:"/student",templateUrl:"/views/contact/contact.student.html",controller:"contactStudentCtrl",data:{title:"C0151"}}).state("contacts.block",{url:"/block",templateUrl:"/views/contact/contact.block.html",controller:"contactBlockCtrl"})}]),angular.module("kp.contact").service("ContactSTF",["contactRes","$q",function(a,b){var c=null;this.teach=function(d){return c?c.promise:(c=b.defer(),a.teacher().get(d).then(function(a){c.resolve(a)},function(a){c.reject(a)})["finally"](function(){c=null}),c.promise)},this.stud=function(d){return c?c.promise:(c=b.defer(),a.student().get(d).then(function(a){c.resolve(a)},function(a){c.reject(a)})["finally"](function(){c=null}),c.promise)},this.fri=function(d){return c?c.promise:(c=b.defer(),a.friend().get(d).then(function(a){c.resolve(a)},function(a){c.reject(a)})["finally"](function(){c=null}),c.promise)}}]).controller("contactFriendsCtrl",["$scope","ContactSTF","userUtils","contactUtils","contactRes","alertModal","$translate","$state","KPNotify","ItalkiMessageBox",function(a,b,c,d,e,f,g,h,i,j){function k(){a.friend_filter.page=1,n()}var l=g.instant;a.msgBox=j.chatWith,a.isTeacher=c.isTeacher,a.goUser=d.goToUser,a.rShow=!0;var m=function(a){return i.appendWithContent(a.type+" : "+a.msg),KP.API.ERROR};a.friend_filter={page:1,page_size:10,nickname:""};var n=function(){return 1==a.friend_filter.page&&(a.fr_items=null),b.fri(a.friend_filter).then(function(b){var c=a.fr_items;c=c&&1!=a.friend_filter.page?_.union(c,b.data):b.data,a.fr_items=c,a.fr_meta=b.meta})["finally"](function(){a.fmore=!0,a.loadMoreFlag=!1})};n();var o={page:1,page_size:10};a.highlightPartnerTab=function(){return"contacts.partner"==h.current.name?!0:!1};var p=function(){return 1==o.page&&(a.qj_items=null),e.friendRequest().get(o).then(function(b){a.rmore=!0;var c=a.qj_items;c=c&&1!=o.page?_.union(c,b.data):b.data,a.qj_items=c,a.qj_meta=b.meta})["finally"](function(){a.rmore=!0,a.loadMoreFlag=!1})};p();var q={page:1,page_size:10},r=function(){return 1==q.page&&(a.myRequestItems=null),e.friendMyRequest().get(q).then(function(b){a.mmore=!0;var c=a.myRequestItems;c=c&&1!=q.page?_.union(c,b.data):b.data,a.myRequestItems=c,a.qf_meta=b.meta})["finally"](function(){a.mmore=!0,a.loadMoreFlag=!1})},s=!0;a.viewSentRequests=function(){a.rShow=!a.rShow,s&&(r(),s=!1)},a.loadMore=function(b){switch(a.loadMoreFlag=!0,b){case"friend":return a.fmore=!1,n(++a.friend_filter.page);case"request":return a.rmore=!1,p(++o.page);case"myRequest":return a.mmore=!1,r(++q.page)}},a.friendSearch=function(){a.friend_filter.nickname=angular.element("#txtNickname").val(),a.friend_filter.page=1,n()},a.deleteFriend=function(b){f.open(a,l("C0050"),l("C1008")).then(function(c){e.friend().remove({user_id:a.fr_items[b].id}).then(function(d){return d.data.success>0&&a.removeFriendItem(b),c.$close(),KP.API.SUCC},m)})},a.removeFriendItem=function(b){a.fr_items.splice(b,1),0==a.fr_items.length&&a.fr_meta.has_next&&(a.friend_filter.page=1,n())};var t=function(b){"number"==typeof b?(a.qj_items.splice(b,1),a.qj_meta.total--):(a.qj_meta.total=a.qj_meta.total-a.qj_items.length,a.qj_items=[]),0==a.qj_items.length&&a.qj_meta.has_next&&(o.page=1,p())};a.removeRequestItems=t,a.requestAccept=function(b){var c,d=[];"number"==typeof b?(d.push(a.qj_items[b].request_id),c=l("C0057")):(c=l("KP414"),angular.forEach(a.qj_items,function(a,b){d.push(a.request_id)})),f.open(a,c,l("C1008")).then(function(c){e.friendRequestAccept().post("",{id:d}).then(function(d){return d.data.success>0&&(t(b),a.fr_meta.has_next||(a.friend_filter.page=1,n())),c.$close(),KP.API.SUCC},m)})},a.requestDecline=function(b){var c,d=[];"number"==typeof b?(d.push(a.qj_items[b].request_id),c=l("C0041")):(c=l("KP415"),angular.forEach(a.qj_items,function(a){d.push(a.request_id)})),f.open(a,c,l("C1008")).then(function(a){e.friendRequest().remove({id:d}).then(function(c){return c.data.success>0&&t(b),a.$close(),KP.API.SUCC},m)})},a.myRequestCancel=function(b){var c,d=[];"number"==typeof b?(d.push(a.myRequestItems[b].request_id),c=l("C0056")):(c=l("KP416"),angular.forEach(a.myRequestItems,function(a){d.push(a.request_id)})),f.open(a,c,l("C1008")).then(function(c){e.friendMyRequest().remove({id:d}).then(function(d){return d.data.success>0&&("number"==typeof b?(a.myRequestItems.splice(b,1),a.qf_meta.total--):(a.qf_meta.total=a.qf_meta.total-a.myRequestItems.length,a.myRequestItems=[]),0==a.myRequestItems.length&&a.qf_meta.has_next&&(q.page=1,r())),c.$close(),KP.API.SUCC},m)})},a.showData=function(){a.friend_filter.nickname=""};var u=null;a.$watch("friend_filter.nickname",function(a,b){var c=(new Date).getTime();u?c-u>200&&k():(u=c,k())})}]).controller("contactTeacherCtrl",["$scope","ContactSTF","contactRes","contactUtils","CourseListModal","$translate","alertModal","KPNotify","ItalkiMessageBox","$state","$rootScope","$log",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){delete a.filter.tag,a.showClass=b,b!==p.ALL&&angular.extend(a.filter,{tag:b}),r()}function n(){a.filter.page=1,r()}var o=f.instant;a.msgBox=i.chatWith,a.contactTeacher=i.contactWith,a.goToTeacher=d.goToTeacher,a.filter={page:1,nickname:""},a.showClass=0;var p={ALL:0,PAST:2,CURRENT:3,TRIAL:4,CONTACTED:5,BOOKMARKED:6};a.tagEnum=p,a.filterByTag=m,a.highlightTeacherTab=function(){return"contacts.teacher"==j.current.name?!0:!1};var q=function(a){if(!a.allow_profile)return p.INACTIVE;var b=a.teacher_user_pair_obj;return b.session_num>0?moment(b.last_session_time).unix()<moment().unix()-2592e3?p.PAST:b.trial_session_num>0&&1==b.session_num?p.TRIAL:p.CURRENT:b.has_contacted?p.CONTACTED:b.is_favorite?p.BOOKMARKED:p.INACTIVE},r=function(){return a.loadedFlag=!1,a.meta={},1==a.filter.page&&(a.items=null),b.teach(a.filter).then(function(b){a.loadedFlag=!0;var c=b.data;_.forEach(c,function(a){a.tag=q(a)}),1!=a.filter.page?a.items=_.union(a.items,c):a.items=c,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};r(),a.loadMore=function(){return a.loadMoreFlag=!0,r(++a.filter.page)},a.goToTeacherPage=function(b){var c;a.items&&angular.forEach(a.items,function(a,d){a.id===b&&(c=a.textid,k.goToTeacherId=c,j.go("session.exploreViaType"))})},a.removeTeacher=function(b){g.open(a,o("C0049"),o("C1008")).then(function(d){c.teacher().remove({teacher_id:a.items[b].id}).then(function(c){c.data.success>0&&(a.items.splice(b,1),0==a.items.length&&a.meta.has_next&&(filter.page=1,r())),d.$close()},function(a){h.appendWithContent(a.type+" : "+a.msg)})})},a.showData=function(){a.filter.nickname=""};var s=null;a.$watch("filter.nickname",function(a,b){var c=(new Date).getTime();s?c-s>200&&n():(s=c,n())})}]).controller("contactStudentCtrl",["$scope","ContactSTF","contactRes","contactUtils","$translate","alertModal","KPNotify","ItalkiMessageBox","$rootScope","$state","$log",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){delete a.filter.tag,a.showClass=b,b!==o.ALL&&angular.extend(a.filter,{tag:b}),q()}function m(){a.filter.page=1,q()}var n=e.instant;a.msgBox=h.chatWith,a.goUser=d.goToUser,a.filter={page:1,page_size:10,nickname:""},a.highlightStudentTab=function(){return"contacts.student"==j.current.name?!0:!1},a.goToStudentPage=function(b){var c;a.items&&angular.forEach(a.items,function(a,d){a.id===b&&(c=a.textid,i.goToStudentId=c,j.go("session.exploreViaType"))})},a.showClass=0;var o={ALL:0,INACTIVE:1,PROSPECT:2,ACTIVE:3,TRIAL:4};a.tagEnum=o,a.filterByTag=l;var p=function(a){if(!a.allow_profile)return o.INACTIVE;var b=a.teacher_user_pair_obj;return b.session_num>0?b.trial_session_num>0&&1==b.session_num?o.TRIAL:moment(b.last_session_time).unix()>=moment().unix()-2592e3?o.ACTIVE:o.INACTIVE:b.has_contacted?o.PROSPECT:o.INACTIVE},q=function(){return a.loadedFlag=!1,a.meta={},1==a.filter.page&&(a.items=null),b.stud(a.filter).then(function(b){a.loadedFlag=!0;var c=a.items;_.forEach(b.data,function(a){a.tag=p(a)}),c=c&&1!=a.filter.page?_.union(c,b.data):b.data,a.items=c,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};q(),a.loadMore=function(){return a.loadMoreFlag=!0,q(++a.filter.page)},a.removeUser=function(b){f.open(a,n("C0049"),n("C1008")).then(function(d){c.student().remove({user_id:a.items[b].id}).then(function(c){c.data.success>0&&(a.items.splice(b,1),0==a.items.length&&a.meta.has_next&&(a.filter.page=1,q())),d.$close()},function(a){g.appendWithContent(a.type+" : "+a.msg)})})},a.showData=function(){a.filter.nickname=""};var r=null;a.$watch("filter.nickname",function(a,b){var c=(new Date).getTime();r?c-r>200&&m():(r=c,m())})}]).controller("contactBlockCtrl",["$scope","contactRes","contactUtils","$translate","alertModal","KPNotify",function(a,b,c,d,e,f){a.isOpenInWindow?a.isOpen=!0:a.isOpen=!1,a.goUser=c.goToUser;var g={page:1},h=function(){return a.loadedFlag=!1,a.meta={},1==g.page&&(a.items=null),b.block().get(g).then(function(b){a.loadedFlag=!0,1!=g.page?a.items=_.union(a.items,b.data):a.items=b.data,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};h(),a.loadMore=function(){return a.loadMoreFlag=!0,h(++g.page)},a.unBolck=function(c){var i=a.items[c].id;i&&e.open(a,d.instant("CT023"),d.instant("C1008")).then(function(d){b.block().remove({blockee_id:i}).then(function(b){b.data.success>0&&(a.items.splice(c,1),a.meta.total--,0==a.items.length&&a.meta.has_next&&(g.page=1,h())),d.$close()},function(a){f.appendWithContent(a.type+" : "+a.msg)})})}}]),angular.module("kp.contact").service("contactUtils",["$state",function(a){var b={};return b.goToUser=function(b,c){b.preventDefault();var d=b.target.tagName;"DIV"==d&&a.transitionTo("user",{id:c})},b.goToTeacher=function(b,c){b.preventDefault();var d=b.target.tagName;"DIV"==d&&a.transitionTo("teacher",{id:c})},b}]),angular.module("kp.contact").service("contactRes",["Restangular",function(a){return{friend:function(){return a.one("contact/friend")},friendRequest:function(){return a.one("contact/friend/request")},friendRequestAccept:function(){return a.one("contact/friend/request/accept")},friendMyRequest:function(){return a.one("contact/friend/my-request")},teacher:function(){return a.one("contact/teacher")},student:function(){return a.one("contact/student")},block:function(){return a.one("contact/block")},favourite:function(){return a.all("contact/teacher/favourite")}}}]),angular.module("kp.voucher",[]).config(["$stateProvider",function(a){a.state("giftcard",{url:"/giftcards",templateUrl:"/views/page/giftcard.html",controller:"GiftcardsCtrl",data:{role:"user",title:function(){return"M0116".translate()+" - italki"}}}).state("giftcardToUser",{url:"/giftcard/{id:int}",templateUrl:"/views/page/giftcard.html",controller:"GiftcardsCtrl",data:{role:"user",title:"M0115"}})}]),angular.module("kp.voucher").constant("THEME",{standard:[{v:"giftcard_demo2",img:"giftcard_lg",name:"VC400"}],startSign:[{v:"capricorn",img:"capricorn_lg",name:"VC404"},{v:"aquarius",img:"aquarius_lg",name:"VC405"},{v:"pisces",img:"pisces_lg",name:"VC406"},{v:"aries",img:"aries_lg",name:"VC407"},{v:"taurus",img:"taurus_lg",name:"VC408"},{v:"gemini",img:"gemini_lg",name:"VC409"},{v:"cancer",img:"cancer_lg",name:"VC410"},{v:"leo",img:"leo_lg",name:"VC411"},{v:"virgo",img:"virgo_lg",name:"VC412"},{v:"libra",img:"libra_lg",name:"VC413"},{v:"scorpio",img:"scorpio_lg",name:"VC414"},{v:"sagittarius",img:"sagittarius_lg",name:"VC415"}],birthday:[{v:"birthday1",img:"birthday1_lg",name:"VC401"},{v:"birthday2",img:"birthday2_lg",name:"VC401"}],holiday:[{v:"capricorn",img:"capricorn_lg",name:"VC403"}]}).controller("GiftcardsCtrl",["$scope","Voucher","THEME","$filter","Finance","UserService","$modal","$rootScope","$log","$state","$stateParams","$timeout","KPNotify","alertModal","RedeemCodeService","localStorageService","voucherPendingPurchaseModal","User","ITC_AVAIL_OPTIONS",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=k.id||0,u=new Date;if(a.min=0,a.availITCOptions=s,a.reloadRoute=function(){j.reload()},a.liUSD=1e4,a.formData={itc_usd:1e4,send_type:1,message:"",theme:"giftcard_demo2"},a.themePitchOn={v:"giftcard_demo2",img:"giftcard_lg",name:"VC400"},t>0)a.formData.user_id=t,r.getCardInfo(t).then(function(b){a.formData.recipient_name=b.data.nickname,a.formData.user_name=a.currentUser.nickname});else{var v=function(){a.currentUser?(a.formData.user_name=a.currentUser.nickname,a.formData.user_email=a.currentUser.email):l(v,500)};v()}a.mDate=u,a.opened=!1,a.eopen=function(b){a.opened=!0},a.$watch("send_mail_date",function(b,c){a.send_mail_date?b==u?a.formData.send_type=1:a.formData.send_type=2:a.formData.send_type=1}),a.changeLiITC=function(b){a.liUSD=b,b>0&&(a.formData.itc_usd=b)},a.uiSelected=function(b){a.liUSD=0,a.formData.itc_usd=b.value},a.$watch("formData",function(b){return b.message&&b.message.length>500?void(a.enableContinue=!1):t>0?void(a.enableContinue=!0):b.user_name&&3<=b.user_name.length<=19&&b.user_email&&(3==b.send_type||b.recipient_name&&b.recipient_email&&3<=b.recipient_name.length<=19)?void(a.enableContinue=!0):void(a.enableContinue=!1)},!0),a.preview=function(){var b=3==a.formData.send_type?"/views/component/voucher.giftcard.preview3.html":"/views/component/voucher.giftcard.preview.html";g.open({scope:a,size:"",templateUrl:b,windowClass:""})},a.printgiftcard=function(){var c="/views/component/voucher.giftcard.print.html";g.open({scope:a,size:"",templateUrl:c,windowClass:"",controller:["$scope",function(a){var c=p.get("giftcard_order_id");b.checkGiftcardStatus(c).then(function(b){a.giftcard_code=b.data.code,a.giftcardTheme=b.data.theme}),a.$emit("printHide",{}),a.print=function(){return window.print(),!1}}]})},a.giftBuy={buySuccess:0},a.submit=function(){if(a.enableContinue){if(!a.currentUser)return void j.transitionTo("signin");2==a.formData.send_type&&(a.formData.send_mail_date=d("date")(a.send_mail_date,"M-d-yyyy")),a.submitFlag=1,p.set("currentPurchasePageShouldAutoClose","1"),b.orderGiftcard().post("",a.formData).then(function(b){function c(){return a.formData.itc_usd?a.formData.itc_usd:""}a.submitFlag=!1,a.giftcard_order_id=b.data.order_id,p.set("giftcard_order_id",a.giftcard_order_id),a.min=0;var d=c();return a.min=d,d>0?(a.enableContinue=!1,a.currentAmount=c,void q.open(a.giftcard_order_id).then(function(b){i.debug("purchase done!"),a.min=c(),p.remove("currentPurchasePageShouldAutoClose"),l(function(){a.giftBuy.buySuccess=1})},function(b){i.debug("purchase fail or canceled"),b&&"PaymentFail"==b.type&&q.fail().then(function(){a.enableContinue=!0}),p.remove("currentPurchasePageShouldAutoClose")})["finally"](function(){a.enableContinue=!0})):void p.remove("currentPurchasePageShouldAutoClose")},function(b){p.remove("currentPurchasePageShouldAutoClose"),a.error=b,a.submitFlag=!1,l(function(){a.error=null},3e3)})}},a.openRedeemModal=function(){o.open()},a.fiveThemes=_.union(c.standard,_.union(c.birthday,_.shuffle(c.startSign).slice(0,2))),a.showFiveTheme=!0,a.all_theme=[{v:"all",name:"C0024"},{v:"standard",name:"VC400"},{v:"startSign",name:"VC402"},{v:"birthday",name:"VC401"}];var w=function(b){"all"==b?a.constellation=_.union(c.standard,_.union(c.birthday,c.startSign)):a.constellation=c[b]};w("standard"),a.tab="standard",a.changeTheme=function(b){a.showFiveTheme=!1,a.tab=b,w(b)},a.pitchOn=function(b){a.themePitchOn=b,a.formData.theme=b.v},a.theme_ch={checkbok:"all"},a.themes=!0,a.openTheme=function(){g.open({scope:a,size:"",templateUrl:"/views/component/voucher.giftcard.theme.html",windowClass:""})},a.subTheme=function(b){a.changeTheme(b)}}]),angular.module("kp.voucher").service("Voucher",["Restangular",function(a){this.redeem=function(b,c){return angular.isDefined(c)?a.one("voucher").post("activate",{code:b,unpay_id:c}):a.one("voucher").post("activate",{code:b})},this.orderGiftcard=function(){return a.one("voucher/giftcard/order")},this.checkGiftcardStatus=function(b){return a.one("voucher/giftcard/order").get({order_id:b})}}]),angular.module("kp.voucher").directive("kpVoucherCodeValidation",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.validVoucherCode=function(a,b){if(!b)return!1;var c=b.replace(/[-\s]/g,"");return 16==c.length}}}}).controller("$$RedeemCodeCtrl",["$scope","$rootScope","Voucher","$log","KPNotify","UserService","$state",function(a,b,c,d,e,f,g){b.$on("kp.BrowserBackOrForwardBtnClick",function(){a.$dismiss()}),a.confirm=function(){a.error=null;var b=angular.uppercase(a.voucher.code.replace(/[-\s]/g,""));return c.redeem(b).then(function(b){f.resetPaymentAccountCache(),a.success=b.data},function(b){if(angular.isDefined(b)){var c=b.type,d={};if("voucherNeedPurchase"!==c){switch(c){case"VoucherHasNotStarted":d.code="VC303";break;case"VoucherHasExpired":d.code="VC304";break;case"VoucherHasBeenRedeemed":d.code="VC302";break;case"VoucherDesignatedUser":d.code="VC306";break;case"VoucherNotValid":case"VoucherNotFound":d.code="VC306";break;case"VoucherHasRedeemedOne":d.code="VC305"}a.error=d}else a.voucherNeedPurchase=!0}})},a.goToPurchase=function(){g.go("purchase",{vouchertype:1}),a.$dismiss()}}]).service("RedeemCodeService",["$rootScope","$modal","$location",function(a,b,c){this.open=function(){a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/?activatecode=1".format(c.path()),title:"Redeem promocode"}),b.open({size:"",templateUrl:"/views/component/redeemcode.html",windowClass:"redeem-code",controller:"$$RedeemCodeCtrl"})}}]),angular.module("kp.voucher").controller("$$voucherPendingPurchaseModalCtrl",["$scope","$rootScope","localStorageService","voucherPendingPurchaseModal","$log","Voucher","$timeout","required","$modalInstance",function(a,b,c,d,e,f,g,h,i){function j(){return l?void 0:(e.debug("poll itc.........."),c.get("cancelPurchase")?(c.remove("cancelPurchase"),i.dismiss(),void g.cancel(k)):void f.checkGiftcardStatus(h.id).then(function(a){i.close(a)},function(a){"PaymentFail"==a.type?(l=1,i.dismiss(a),g.cancel(k)):"PaymentPending"==a.type&&(k=g(j,1500))}))}var k=null,l=0;e.debug(h),a.$on("$destroy",function(){l=1,c.remove("currentPurchasePageShouldAutoClose"),g.cancel(k)}),g(j,3e3)}]).service("voucherPendingPurchaseModal",["$modal",function(a){this.fail=function(){var b=a.open({templateUrl:"/views/component/pending.purchase.fail.modal.html"});return b.result},this.open=function(b){var c=a.open({templateUrl:"/views/component/pending.purchase.modal.html",controller:"$$voucherPendingPurchaseModalCtrl",backdrop:"static",resolve:{required:function(){return{id:b}}}});return c.result}}]),angular.module("kp.community.partner",[]).config(["$stateProvider",function(a){a.state("partner",{parent:"kp",url:"/partners",templateUrl:"/views/community/partner/index.html",controller:"partnerListCtrl",data:{title:"CT503"}}).state("partnerLanguage",{parent:"kp",url:"/partners/{language}",templateUrl:"/views/community/partner/index.html",controller:"partnerListCtrl",data:{title:"CT503"
}})}]),angular.module("kp.community.partner").controller("partnerListCtrl",["$scope","partnerRes","$log","$timeout","localStorageService","Teacher","$stateParams","$translate","$modal","$state",function(a,b,c,d,e,f,g,h,i,j){var k="language.partner.search";a.filter={speak:g.language||"",learn:"",gender:"",country:"",is_native:0,page:1,city:""};var l=e.cookie.get(k);l&&(l.page=1,a.filter=l);var m=angular.copy(KP.LANSEL),n=h.instant;angular.forEach(m,function(a){a.name=n(a.v)}),a.lans=_.union([{t:-1,v:"",name:n("C0027")}],m);var o=angular.copy(KP.COUNTRRY_ARR);angular.forEach(o,function(a){a.name=n(a.l)}),a.countries=_.union([{v:"",l:"Anywhere",name:n("Anywhere")}],o),a.uiSelected=function(b){a.filter.speak=b.v,""==a.filter.speak&&(a.filter.speak="all")},a.uiSelected1=function(b){a.filter.learn=b.v,""==a.filter.learn&&(a.filter.learn="all"),a.applyFilter()},a.uiSelected2=function(b){a.filter.country=b.v,a.applyFilter()},a.filter.speak&&(a.uiItems=a.uiItems||{},a.uiItems.v=a.filter.speak,a.uiItems.name=n(a.uiItems.v),"all"==a.uiItems.v&&(a.uiItems.v="")),a.filter.country&&(a.uiItems2=a.uiItems2||{},a.uiItems2.v=a.filter.country,a.uiItems2.name=n(a.uiItems2.v)),a.filter.learn&&(a.uiItems1=a.uiItems1||{},a.uiItems1.v=a.filter.learn,a.uiItems1.name=n(a.uiItems1.v),"all"==a.uiItems1.v&&(a.uiItems1.v="")),a.loadedFlag=!1;var p=function(c){return a.loadedFlag=!1,a.meta={},1==c&&(a.items=null),a.filter.page=c,b.fetch(angular.copy(a.filter)).then(function(b){var d=a.items;d&&1!=c?d=_.union(d,b.data):(d=b.data,e.cookie.set(k,a.filter)),d=_.unique(d,"id"),a.items=d,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};a.loadMore=function(){return a.loadMoreFlag=!0,p(a.filter.page+1)},p(1),a.applyFilter=function(){p(1)},a.opensearchmodal=function(){i.open({scope:a,size:"lg",templateUrl:"/views/component/searchmodal.html"})},f.getRandomTeacherList().get({page_size:1}).then(function(b){a.teachers=b.data})}]),angular.module("kp.community.partner").service("partnerRes",["Restangular",function(a){var b=a.service("partner");this.fetch=function(a){return b.one().get(a||{})}}]),angular.module("kp.community.question",[]).config(["$stateProvider",function(a){a.state("question",{parent:"kp","abstract":!0,url:"/questions",templateUrl:"/views/community/question/question.bs.html"}).state("question.myAnswers",{url:"/{userId}/answers",templateUrl:"/views/community/question/question.mine.html",controller:"QuestionMineCtrl",data:{title:"AS021"}}).state("question.mine",{url:"/{userId:[0-9]+}",templateUrl:"/views/community/question/question.mine.html",controller:"QuestionMineCtrl",data:{title:"AS020"}}).state("question.new",{url:"/add",templateUrl:"/views/community/question/question.new.html",controller:"QuestionNewCtrl",data:{role:"user",title:"AS002"}}).state("question.language",{url:"/{language}",templateUrl:"/views/community/question/question.list.html",controller:"QuestionListCtrl",data:{title:"AS533"}}).state("question.list",{url:"",templateUrl:"/views/community/question/question.list.html",controller:"QuestionListCtrl",data:{title:"AS533"}}).state("question.rank",{url:"/ranking",templateUrl:"/views/community/question/question.rank.html",controller:"QuestionRankCtrl"}).state("questionAlias",{parent:"kp","abstract":!0,url:"/question",templateUrl:"/views/community/question/question.bs.html"}).state("questionAlias.entity",{url:"/{id:[0-9]+}",templateUrl:"/views/community/question/question.entity.html",controller:"QuestionEntityCtrl"}).state("questionAlias.new",{url:"/new",templateUrl:"/views/community/question/question.new.html",controller:"QuestionNewCtrl",data:{title:"AS002"}}).state("questionsAlias",{parent:"kp","abstract":!0,url:"/questions",templateUrl:"/views/community/question/question.bs.html"}).state("questionsAlias.language",{url:"/{language}",templateUrl:"/views/community/question/question.list.html",controller:"QuestionListCtrl",data:{title:"AS533"}})}]).filter("category",function(){return function(a){switch(a){case 0:return"WK087";case 1:return"AS401";case 2:return"AS402";case 3:return"AS403"}return""}}),angular.module("kp.community.question").service("questionRes",["Restangular",function(a){var b=a.service("question");this.questionList=function(){return b.one()},this.myQuestionOrAnswer=function(a){return"my_question"==a?b.one("mine"):b.one("answer").one("mine")},this.getRank=function(){return b.one("ranking")},this.getQuestionEntity=function(a){return b.one(a)},this.addQuestion=function(){return b.one().all("add")},this.getQuestionEntityComment=function(a){return b.one(a.toString()).one("comment")},this.addQuestionComment=function(a){return b.one(a.toString()).all("comment")},this.getQuestionEntityAnswer=function(a){return b.one(a.toString()).one("answer")},this.addQuestionAnswer=function(a){return b.one(a.toString()).all("answer")},this.addQuestionMoreDetail=function(a){return b.one(a.toString()).all("add-supplement")},this.markQuestion=function(a){return b.one(a.toString()).all("mark")},this.getQuestionAnswerComment=function(a){return b.one("answer").one(a.toString()).one("comment")},this.addQuestionAnswerComment=function(a){return b.one("answer").one(a.toString()).all("comment")},this.markQuestionAnswer=function(a){return b.one("answer").one(a.toString()).all("mark")},this.setBestQuestionAnswer=function(a){return b.one("answer").one(a.toString()).all("set-best")},this.editQuestion=function(a){return b.one(a.toString()).all("edit")},this.editQuestionAnswer=function(a){return b.one("answer").one(a.toString()).all("edit")},this.editQuestionComment=function(a){return b.one("comment").one(a.toString()).all("edit")},this.editQuestionAnswerComment=function(a){return b.one("answer").one("comment").one(a.toString()).all("edit")}}]),angular.module("kp.community.question").controller("QuestionListCtrl",["$scope","questionRes","$stateParams","$state","$translate","LoginAndActive","$timeout","$log",function(a,b,c,d,e,f,g,h){a.languageTime={show:!0};var i=moment.utc([2018,1,1,0,0,0,0]).unix(),j=moment.utc([2017,11,27,0,0,0,0]).unix(),k=moment().utc().unix(),l=j-k,m=i-k;(0>m||l>0)&&(a.languageTime.show=!1);var n=d.$current.self.name;a.highlightMenuTab="question.language"===n||"question.list"===n||"questionsAlias.language"===n?!0:!1,a.gotonew=function(a){f.open(a)&&d.transitionTo(a)};var o=angular.copy(KP.LANSEL),p=e.instant;angular.forEach(o,function(a){a.name=p(a.v)}),a.lans=_.union([{t:-1,v:"",name:p("C0027")}],o),a.lans_1=_.union([{t:-1,v:"",name:p("C0027")}],o),a.uiSelected=function(b,c){a.filter.asker_language=b.v,a.applyFilter()},a.uiSelected1=function(b,c){a.filter.language=b.v,a.applyFilter()},a.filter={language:c.language||"",asker_language:"",marks_min:"",page:1},a.uiItems1={name:p(a.filter.language),v:a.filter.language},a.uiItems={name:p(a.filter.asker_language),v:a.filter.asker_language},a.items=null,a.loadedFlag=!1;var q=function(c){return a.loadedFlag=!1,a.meta={},a.filter.page=c,1==c&&(a.items=null),b.questionList().get(a.filter).then(function(b){1!=c?a.items=_.union(a.items,b.data):a.items=b.data,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};q(1),a.loadMore=function(){return a.loadMoreFlag=!0,q(a.filter.page+1)},a.applyFilter=function(){switch(a.filter.language){case"my_question":return void d.transitionTo("question.mine",{userId:a.currentUser.id});case"my_answer":return void d.transitionTo("question.myAnswers",{userId:a.currentUser.id});default:d.transitionTo("question.language",{language:a.filter.language})}q(1)}}]).controller("QuestionMineCtrl",["$scope","questionRes","$stateParams","$state","$translate",function(a,b,c,d,e){var f=angular.copy(KP.LANSEL),g=e.instant;angular.forEach(f,function(a){a.name=g(a.v)}),a.lans_1=_.union([{t:-1,v:"",name:g("C0027")}],f),a.uiSelected=function(b,c){a.dataType=b.v,a.changeData()},"question.mine"==d.$current.self.name?a.dataType="my_question":a.dataType="my_answer",a.filter={page:1},a.loadedFlag=!1;var h=function(c){return a.meta={},a.loadedFlag=!1,a.filter.page=c,1==c&&(a.items=null),b.myQuestionOrAnswer(a.dataType).get(a.filter).then(function(b){1!=c?a.items=_.union(a.items,b.data):a.items=b.data,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};h(1),a.loadMore=function(){return a.loadMoreFlag=!0,h(a.filter.page+1)},a.changeData=function(){switch(a.dataType){case"my_question":return void d.transitionTo("question.mine",{userId:a.currentUser.id});case"my_answer":return void d.transitionTo("question.myAnswers",{userId:a.currentUser.id});case"":return void d.transitionTo("question.list");default:return void d.transitionTo("questionsAlias.language",{language:a.dataType})}}}]).controller("QuestionRankCtrl",["$scope","questionRes",function(a,b){self.getQuestionRank=function(){b.getRank().get().then(function(b){a.ranks=b.data})},self.getQuestionRank()}]).controller("QuestionEntityCtrl",["$scope","$stateParams","questionRes","$translate","EmptyPromise","LoginAndActive","$filter",function(a,b,c,d,e,f,g){function h(a){var b="";return 0==a.length?"":(b=a.replace(/&/g,"&gt;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/\'/g,"&#39;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,"<br>"))}var i=d.instant,j=1,k="",l=function(d){return j=d,c.getQuestionEntityAnswer(b.id).get({page:d,sort:k}).then(function(b){var c=a.question.answer_obj_s;angular.forEach(b.data,function(a){a.raw_content=a.content.replace(/\x07/gi,"\r\n"),a.content=h(a.content)}),c=c&&1!=d?_.union(b.data,c):b.data,a.question.answer_obj_s=c,a.meta.answers=b.meta})["finally"](function(){a.loadMoreFlag=!1})},m=function(){k=a.meta.sort_by,a.question.answer_obj_s=[],l(1)},n=function(){return a.processing||!a.currentUser||a.meta.newAnswer.content.length<2||a.meta.newAnswer.content.length>2e3?e.getEmptyPromise():(a.processing=!0,c.addQuestionAnswer(b.id).post(a.meta.newAnswer).then(function(b){var c=b.data.answer_obj;return c.raw_content=c.content,c.content=h(c.content),c.answerer_obj=a.currentUser,a.question.answer_obj_s||(a.question.answer_obj_s=[]),a.question.answer_obj_s.push(c),a.question.answer_count=a.question.answer_count+1,a.meta.isAnswer=!1,a.meta.newAnswer={content:""},c.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},o=function(){return!a.currentUser||a.meta.additional.content.length<1||a.meta.additional.content.length>1e4?e.getEmptyPromise():(a.doAFlag=!0,c.addQuestionMoreDetail(b.id).post(a.meta.additional).then(function(b){return a.question.raw_content=a.question.raw_content+"\r\n"+a.meta.additional.content,a.question.content=a.question.content+"<p><strong>"+i("AS206")+":</strong></p>"+h(a.meta.additional.content),a.meta.isAdditional=!1,a.meta.additional={content:""},KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.doAFlag=!1}))},p=1,q=function(d){p=d,c.getQuestionEntityComment(b.id).get({page:d}).then(function(b){var c=a.question.comment_obj_s;angular.forEach(b.data,function(a){a.raw_content=a.content.replace(/\x07/gi,"\r\n"),a.content=h(a.content)}),c=c&&1!=d?_.union(b.data,c):b.data,a.question.comment_obj_s=c,a.meta.comments=b.meta})},r=function(){return!a.currentUser||a.meta.newComment.content.length<2||a.meta.newComment.content.length>2e3?e.getEmptyPromise():(a.doCFlag=!0,c.addQuestionComment(b.id).post(a.meta.newComment).then(function(b){var c=b.data.question_comment_obj;return c.raw_content=c.content,c.content=h(c.content),c.commenter_obj=a.currentUser,a.question.comment_obj_s||(a.question.comment_obj_s=[]),a.question.comment_obj_s.push(c),a.question.comment_count=a.question.comment_count+1,a.meta.isComment=!1,a.meta.newComment={content:""},c.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.doCFlag=!1}))},s=function(d,f){if(1==d){if(a.question.hasVoteUp)return e.getEmptyPromise()}else if(a.question.hasVoteDown)return e.getEmptyPromise();return a.currentUser?a.currentUser.id==f?e.getEmptyPromise():c.markQuestion(b.id).post({mark:d}).then(function(b){return a.question.mark_sum=b.data.mark_sum,1==d?(a.question.hasVoteUp=!0,a.question.hasVoteDown=!1):(a.question.hasVoteUp=!1,a.question.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):e.getEmptyPromise()};a.loadMoreAnswer=function(){return a.loadMoreFlag=!0,l(++j)},a.loadMoreComment=function(){q(++p)},a.answersSortBy=m,a.addAnswer=n,a.addMoreDetail=o,a.addComment=r,a.questionVote=s,c.getQuestionEntity(b.id).get().then(function(b){var c=b.data;c.raw_content=c.content.replace(/\x07/gi,"\r\n"),c.content=h(c.content),c.content=c.content.replace(/\x07/gi,'<br/><br/><small><strong class="text-muted">'+i("AS206")+":</strong></small><br/>"),a.question=c,a.meta=b.meta,a.meta.sort_by="2",a.question.is_mine=a.currentUser&&a.currentUser.id==c.asker_obj.id,a.question.editable=1==c.editable,a.question.has_set_best=(1==c.status||2==c.status)&&c.is_mine,c.answer_count-b.meta.best_answer_obj_s.length>0&&l(1),c.comment_count>0&&q(1),a.meta.additional={content:""},a.meta.newComment={content:""},a.meta.newAnswer={content:""}}),a.focusInput=!1,a.funAddAnswer=function(){f.open()&&(a.meta.isAnswer=!0,a.focusInput=!0)},a.submitForm=function(a,b,c){return b=!0,a()},a.updateQuestion=function(){return a.processing||a.question.raw_content.length>1e3?e.getEmptyPromise():(a.processing=!0,c.editQuestion(a.question.id).post({content:a.question.raw_content.replace(/\x07\r\n/gi,"")}).then(function(b){return a.question.content=h(a.question.raw_content),a.meta.editQuestion=!1,a.question.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){updateContentFlag=0,a.processing=!1}))},a.updateQuestionComment=function(b){return a.processing||b.raw_content>2e3||b.raw_content<2?e.getEmptyPromise():(a.processing=!0,c.editQuestionComment(b.id).post({content:b.raw_content}).then(function(a){return b.content=h(b.raw_content),b.editQuestionComment=!1,b.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.editQuestion=function(){a.meta.editQuestion=!0,a.$$oldQuestion=a.question.raw_content,a.cancelEditQuestion=function(){a.meta.editQuestion=!1,a.question.raw_content=a.$$oldQuestion}},a.editQuestionComment=function(b){b.editQuestionComment=!0,a.$$oldQuestionComment=b.raw_content,a.cancelEditQuestionComment=function(){b.editQuestionComment=!1,b.raw_content=a.$$oldQuestionComment}}}]).controller("QuestionNewCtrl",["$scope","questionRes","UserService","EmailNotActive","EmptyPromise","$state","errorPopup","KPNotify","$translate",function(a,b,c,d,e,f,g,h,i){d.open(),a.question={title:"",content:"",language:"",language2:"",category:""},a.addQuestion=function(){return a.processing||!a.currentUser||""==a.question.language||""==a.question.language2||""==a.question.category||a.question.title.length<5||a.question.title.length>100||a.question.content.length>1e3?e.getEmptyPromise():(a.processing=!0,b.addQuestion().post(a.question).then(function(b){return b&&b.data&&(a.question={title:"",content:"",language:"",language2:"",category:""},a.question.id=b.data.question_id,f.transitionTo("questionAlias.entity",{id:b.data.question_id})),KP.API.SUCC},function(a){if("QuestionReachedRegularUserLimitPerDay"===a.type)return g.open();if("QuestionIntervalLimit"===a.type){var b=i.instant("AS302");return h.appendWithContent(b)}return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.submitForm=function(b,c,d){return a[c]=!0,b()}}]),angular.module("kp.community.question").directive("kpCommunityQuestionAnswer",["$rootScope","questionRes","alertModal","$translate","$state","$sce","KPNotify","EmptyPromise",function(a,b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,scope:{answer:"="},templateUrl:"/views/community/assert/que.answer.html",controller:["$scope",function(g){function i(a){var b="";return 0==a.length?"":(b=a.replace(/&/g,"&gt;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/\'/g,"&#39;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,"<br>"))}g.currentUser=a.currentUser,g.meta={};var j=1,k=function(a){j=a,b.getQuestionAnswerComment(g.answer.id).get({page:a}).then(function(b){var c=g.answer.comment_obj_s;angular.forEach(b.data,function(a){a.raw_content=a.content.replace(/\x07/gi,"\r\n"),a.content=i(a.content)}),c=c&&1!=a?_.union(b.data,c):b.data,g.answer.comment_obj_s=c,g.answer.meta=b.meta})},l=function(){var a=!g.answer.showComment;g.answer.showComment=a,a&&g.answer.comment_count>0&&(g.answer.comment_obj_s&&0!=g.answer.comment_obj_s.length||k(1))};g.answer.newComment={content:""};var m=function(){return!a.currentUser||g.answer.newComment.content.length<2||g.answer.newComment.content.length>2e3?h.getEmptyPromise():(g.doflag=!0,b.addQuestionAnswerComment(g.answer.id).post(g.answer.newComment).then(function(b){var c=b.data.answer_comment_obj;return c.raw_content=c.content,c.content=i(c.content),c.commenter_obj=a.currentUser,g.answer.comment_obj_s||(g.answer.comment_obj_s=[]),g.answer.comment_obj_s.push(c),g.answer.comment_count=parseInt(g.answer.comment_count)+1,g.answer.isComment=!1,c.editable=!0,g.answer.newComment={content:""},KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){g.doflag=!1}))},n=function(c){if(1==c){if(g.answer.hasVoteUp)return h.getEmptyPromise()}else if(g.answer.hasVoteDown)return h.getEmptyPromise();return a.currentUser?b.markQuestionAnswer(g.answer.id).post({mark:c}).then(function(a){return g.answer.mark_sum=a.data.mark_sum,1==c?(g.answer.hasVoteUp=!0,g.answer.hasVoteDown=!1):(g.answer.hasVoteUp=!1,g.answer.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):h.getEmptyPromise()};g.setBestAnswer=function(){return c.open(g,d.instant("AS013"),d.instant("C1008")).then(function(a){return b.setBestQuestionAnswer(g.answer.id).post().then(function(b){return a.$close(),1==b.data.success&&e.reload(),KP.API.SUCC},function(b){return a.$close(),KP.API.ERROR})},function(a){return KP.API.ERROR})},g.moreAnsComment=function(){k(++j)},g.addAnsComment=m,g.toggleShowComment=l,g.answerVote=n,g.showAddComment=function(){g.answer.isComment=!0,g.answer.showComment||l()},g.submitForm=function(a,b,c){b=!0;var d=a();return b=!1,d},g.html=function(a){return a?f.trustAsHtml(a.replace(/\n/g,"<br/>")):""},g.updateAswer=function(){return g.answer.content<25||g.answer.content>2500?h.getEmptyPromise():b.editQuestionAnswer(g.answer.id).post({content:g.answer.raw_content.replace(/\x07\r\n/gi,"")}).then(function(a){return console.dir(a),g.answer.content=i(g.answer.raw_content),g.meta.editAnswer=!1,g.answer.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){updateContentFlag=0})},g.updateComment=function(a){return a.raw_content<2||a.raw_content>2e3?h.getEmptyPromise():b.editQuestionAnswerComment(a.id).post({content:a.raw_content}).then(function(b){return a.content=i(a.raw_content),console.dir(b),a.editComment=!1,a.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){updateContentFlag=0})},g.editAnswer=function(){g.meta.editAnswer=!0,g.$$oldAnswer=g.answer.raw_content,g.cancelEditAnswer=function(){g.meta.editAnswer=!1,g.answer.raw_content=g.$$oldAnswer}},g.editAnswerComment=function(a){a.editComment=!0,a.$$oldComment=a.raw_content,g.cancelEditAnswerComment=function(){a.editComment=!1,a.raw_content=a.$$oldComment}}}],link:function(a,b,c){}}}]),angular.module("kp.community.notebook",[]).config(["$stateProvider",function(a){a.state("notebook",{parent:"kp","abstract":!0,url:"/notebooks",templateUrl:"/views/community/notebook/notebook.bs.html"}).state("notebook.new",{url:"/add",templateUrl:"/views/community/notebook/notebook.new.html",controller:"NotebookNewCtrl",data:{role:"user",title:"NB003"}}).state("notebook.entity",{url:"/{id:[0-9]+}",templateUrl:"/views/community/notebook/notebook.entity.html",controller:"NotebookEntityCtrl"}).state("notebook.list",{url:"",templateUrl:"/views/community/notebook/notebook.list.html",controller:"NotebookListCtrl",data:{title:"NB530"}}).state("notebook.rank",{url:"/rankings",templateUrl:"/views/community/notebook/notebook.rank.html",controller:"NotebookRankCtrl"}).state("notebook.mine",{url:"/mine",templateUrl:"/views/community/notebook/notebook.mine.html",controller:"NotebookMineCtrl",data:{title:"NB105"}}).state("notebook.myCorrections",{url:"/mine/corrections",templateUrl:"/views/community/notebook/notebook.mine.corrections.html",controller:"NotebookMineCorrectionsCtrl",data:{title:"NB104"}}).state("notebook.language",{url:"/{language}",templateUrl:"/views/community/notebook/notebook.list.html",controller:"NotebookListCtrl"}).state("notebook.list1",{parent:"kp",url:"/notebook",templateUrl:"/views/community/notebook/notebook.list1.html",controller:"NotebookList1Ctrl",data:{title:"NB530"}}).state("notebookAlias",{parent:"kp","abstract":!0,url:"/notebook",templateUrl:"/views/community/notebook/notebook.bs.html"}).state("notebookAlias.mine",{url:"/{userId}/entries",templateUrl:"/views/community/notebook/notebook.mine.html",controller:"NotebookMineCtrl",data:{title:"NB105"}}).state("notebookAlias.myCorrections",{url:"/{userId}/corrections",templateUrl:"/views/community/notebook/notebook.mine.corrections.html",controller:"NotebookMineCorrectionsCtrl",data:{title:"NB104"}}).state("notebookAlias.entity",{url:"/{userId}/entry/{id:[0-9]+}",templateUrl:"/views/community/notebook/notebook.entity.html",controller:"NotebookEntityCtrl"}).state("notebookAlias.new",{url:"/entry/new",templateUrl:"/views/community/notebook/notebook.new.html",controller:"NotebookNewCtrl",data:{role:"user",title:"NB003"}}).state("entry",{parent:"kp","abstract":!0,url:"/entry",templateUrl:"/views/community/notebook/notebook.bs.html"}).state("entry.entity",{url:"/{id:[0-9]+}",templateUrl:"/views/community/notebook/notebook.entity.html",controller:"NotebookEntityCtrl"}).state("entries",{parent:"kp","abstract":!0,url:"/entries",templateUrl:"/views/community/notebook/notebook.bs.html"}).state("entries.language",{url:"/{language}",templateUrl:"/views/community/notebook/notebook.list.html",controller:"NotebookListCtrl"})}]),angular.module("kp.community.notebook").service("notebookRes",["Restangular",function(a){var b=a.service("notebook");this.notebookList=function(){return b.one()},this.getRank=function(){return b.one("rank")},this.getNotebookEntity=function(a){return b.one(a)},this.addNotebook=function(){return b.one().all("add")},this.getNotebookEntityComment=function(a){return b.one(a.toString()).one("comment")},this.addNotebookComment=function(a){return b.one(a.toString()).all("comment")},this.getNotebookEntityCorrection=function(a){return b.one(a.toString()).one("correction")},this.addNotebookCorrect=function(a){return b.one(a.toString()).all("correction")},this.markNotebook=function(a){return b.one(a.toString()).all("mark")},this.myNotebookList=function(){return b.one("mine")},this.myNotebookCorrectionList=function(){return b.one("correction").one("mine")},this.getNotebookCorrectionComment=function(a){return b.one("correction").one(a.toString()).one("comment")},this.addNotebookCorrectComment=function(a){return b.one("correction").one(a.toString()).all("comment")},this.markNotebookCorrect=function(a){return b.one("correction").one(a.toString()).all("mark")},this.deleteNotebook=function(a){return b.one(a).all("delete")},this.editNotebook=function(a){return b.one(a).all("edit")},this.editNotebookCorrection=function(a){return b.one("correction").one(a.toString()).all("edit")},this.editNotebookComment=function(a){return b.one("comment").one(a.toString()).all("edit")},this.editNotebookCorrectComment=function(a){return b.one("correction").one("comment").one(a.toString()).all("edit")}}]),angular.module("kp.community.notebook").run(["$anchorScroll",function(a){a.yOffset=125}]).constant("maxFileUploadSize",{bytes:2e6,megabytes:2}).controller("NotebookListCtrl",["$scope","$translate","$state","$stateParams","notebookRes","LoginAndActive","localStorageService","$log",function(a,b,c,d,e,f,g,h){a.languageTime={show:!0};var i=moment.utc([2018,1,1,0,0,0,0]).unix(),j=moment.utc([2017,11,27,0,0,0,0]).unix(),k=moment().utc().unix(),l=j-k,m=i-k;(0>m||l>0)&&(a.languageTime.show=!1);var n=c.$current.self.name;a.highlightMenuTab="notebook.language"===n||"notebook.list"===n?!0:!1;var o=angular.copy(KP.LANSEL),p=b.instant;angular.forEach(o,function(a){a.name=p(a.v)}),a.lans=_.union([{t:-1,v:"",name:p("C0027")}],o),a.lans_1=_.union([{t:-1,v:"",name:p("C0027")}],o),a.uiSelected=function(b,c){a.filter.author_language=b.v,a.applyFilter()},a.uiItems1={name:"",v:""},a.uiSelected1=function(b,c){a.filter.language=b.v,a.applyFilter1()},a.writeLan=function(){return""==a.filter.language?p("NB034")+" "+p("C0027"):p("NB034")+" "+p(a.filter.language)},a.marks=[{v:"-5",l:p("C0024")},{v:"5",l:p("NB156")+":5"},{v:"",l:p("NB156")+":0"},{v:"-2",l:p("NB156")+":-2"}],a.filter={language:d.language||"",page:1,marks_min:"",author_language:""},a.filter.language&&(a.uiItems1.v=a.filter.language,a.uiItems1.name=p(a.uiItems1.v)),a.getMarks=function(b){for(var c="All",d=0;d<a.marks.length;d++)if(a.marks[d].v==b){c=a.marks[d].l;break}return c},a.applyFilter1=function(){switch(a.filter.language){case"My Notebook entries":c.transitionTo("notebookAlias.mine",{userId:a.currentUser.id});break;case"My Notebook corrections":c.transitionTo("notebookAlias.myCorrections",{userId:currentUser.id});break;case"":c.transitionTo("notebook.list");default:c.transitionTo("notebook.language",{language:a.filter.language})}},a.applyFilter=function(){q=1,r(q)};var q=1;a.loadedFlag=!1;var r=function(b){return a.loadedFlag=!1,a.meta={},1==b&&(a.items=null),a.filter.page=b,e.notebookList().get(a.filter).then(function(c){var d=a.items;d=d&&1!=b?_.union(d,c.data):c.data,a.items=d,a.meta=c.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};r(q),a.loadMore=function(){return a.loadMoreFlag=!0,r(++q)},a.gotonew=function(a){f.open(a)&&c.transitionTo(a)},a.gotonewParams=function(a){f.open(a)&&c.transitionTo(a)}}]).controller("NotebookRankCtrl",["$scope","notebookRes",function(a,b){self.getNotebookRank=function(){b.getRank().get().then(function(b){a.ranks=b.data})},self.getNotebookRank()}]).controller("NotebookEntityCtrl",["$log","$scope","$stateParams","$translate","$location","$anchorScroll","$timeout","$sce","notebookRes","EmptyPromise","LoginAndActive",function(a,b,c,d,e,f,g,h,i,j,k){b.meta={},b.meta.newCorrection={content:""};var l=(d.instant,1),m="",n=!0,o=!1,p=!0,q=!0,r=!0;b.loadedFlag=function(){return n&&o&&p&&q&&r};var s=function(d){return n=!1,l=d,i.getNotebookEntityCorrection(c.id).get({page:d,sort:m}).then(function(c){var e=b.notebook.correction_obj_s;e=e&&1!=d?_.union(c.data,e):c.data,b.notebook.correction_obj_s=e,a.debug("After fetching corrections: ",b.notebook.correction_obj_s),b.meta.correction=c.meta})["finally"](function(){n=!0,b.loadMoreFlag=!1})},t=function(){m=b.meta.sort_by,b.notebook.correction_obj_s=[],s(1)},u=function(){return b.processing||!b.currentUser||b.meta.newCorrection.content.length<5||b.meta.newCorrection.content.length>5e3||b.meta.newCorrection.content==b.notebook.content.replace("\n","<br/>")?j.getEmptyPromise():(b.processing=!0,p=!1,a.debug("State params (id): ",c.id),i.addNotebookCorrect(c.id).post(b.meta.newCorrection).then(function(c){var d=c.data.correction_obj;return a.debug("Step 1: ",d),d.corrector_obj=b.currentUser,a.debug("Step 2: ",d),b.notebook.correction_obj_s||(b.notebook.correction_obj_s=[]),b.notebook.correction_obj_s=_.union([d],b.notebook.correction_obj_s),a.debug("Step 3: ",b.notebook.correction_obj_s),b.notebook.correction_count++,b.meta.isCorrection=!1,b.meta.newCorrection={content:""},b.processing=!1,d.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){p=!0,b.processing=!1}))},v=1,w=function(a){v=a,r=!1,b.commentListFlag=!1,i.getNotebookEntityComment(c.id).get({page:a}).then(function(c){var d=b.notebook.comment_obj_s;d=d&&1!=a?_.union(c.data.reverse(),d):c.data.reverse(),b.notebook.comment_obj_s=d,b.meta.comments=c.meta})["finally"](function(){r=!0,b.commentListFlag=!0})},x=function(){return!b.currentUser||b.meta.newComment.content.length<2||b.meta.newComment.content.length>2e3?j.getEmptyPromise():(q=!1,b.doCFlag=!0,i.addNotebookComment(c.id).post(b.meta.newComment).then(function(a){var c=a.data.comment_obj;return c.commenter_obj=b.currentUser,b.notebook.comment_obj_s||(b.notebook.comment_obj_s=[]),b.notebook.comment_obj_s=_.union(b.notebook.comment_obj_s,[c]),b.notebook.comment_count++,b.meta.isEditComment=!1,b.meta.isComment=!1,b.meta.newComment={content:""},c.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){q=!0,b.doCFlag=!1}))},y=function(a){if(1==a){if(b.notebook.hasVoteUp)return j.getEmptyPromise()}else if(b.notebook.hasVoteDown)return j.getEmptyPromise();return b.currentUser?i.markNotebook(c.id).post({mark:a}).then(function(c){return b.notebook.mark_sum=c.data.mark_sum,1==a?(b.notebook.hasVoteUp=!0,b.notebook.hasVoteDown=!1):(b.notebook.hasVoteUp=!1,b.notebook.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):j.getEmptyPromise()};b.loadMoreCorrect=function(){return b.loadMoreFlag=!0,s(++l)},b.loadMoreComment=function(){w(++v)},b.correctionSortBy=t,b.addCorrect=u,b.addComment=x,b.notebookVote=y,i.getNotebookEntity(c.id).get().then(function(a){console.dir(a);var c=a.data;c.content=a.data.content,b.notebook=c,b.meta=a.meta,b.meta.newContent=!1,b.meta.newCorrection={content:""},b.meta.newComment={content:""},b.meta.sort_by="2",b.notebook.is_mine=b.currentUser&&b.currentUser.id==c.author_obj.id,1==b.notebook.editable==c.editable,c.correction_count>0&&s(1),c.comment_count>0&&w(1)})["finally"](function(){o=!0}),b.addNotebook=function(){return b.vSubFlag=!0,b.processing||""==b.notebook.language||b.notebook.newContent<25||b.notebook.newContent>2500?(doflag=!0,j.getEmptyPromise()):(b.processing=!0,files&&files.length?b.upload(files[0]):i.addNotebook().post(b.notebook).then(function(a){return a&&a.data&&(b.notebook.id=a.data.notebook_id,$state.transitionTo("entry.entity",{id:a.data.notebook_id})),b.notebook.content="",b.processing=!1,doflag=!0,KP.API.SUCC},function(a){return b.errorMsg=a.msg,b.processing=!1,doflag=!0,KP.API.ERROR})["finally"](function(){b.processing=!1}))},b.funAddCorrect=function(){k.open()&&(b.meta.newCorrection.content="<p>"+b.notebook.title+"</p>"+b.notebook.content.replace(/\n/g,"<br/>"),b.meta.isCorrection=!0,g(function(){z()},200))};var z=function(){e.hash("correctForm"),f()};b.html=function(a){return a?h.trustAsHtml(a.replace(/\n/g,"<br/>")):""},b.options={toolbar:[["style",["bold","italic","underline"]],["font",["strikethrough"]],["color",["color"]],["edit",["fullscreen","clear","undo","redo"]]]},b.submitForm=function(a,b,c){b=!0;var d=a();return b=!1,d},b.paste=function(a){if(a.originalEvent&&a.originalEvent.clipboardData){var c=a.originalEvent.clipboardData,d=c.getData("text/plain").replace(/<[^>]+>/g,"");b.meta.newCorrection.content+=d,b.$digest()}try{a.preventDefault()}catch(e){window.event.returnValue=!1}};var A=function(){return 0};b.charCount=angular.isString(b.meta.newCorrection.content)?KP.Utils.charByteCount:A;var B=0;b.updateNotebook=function(){return B?void 0:(B=1,b.notebook.content<25||b.notebook.content>2500?j.getEmptyPromise():i.editNotebook(c.id).post({content:b.notebook.content}).then(function(a){return console.dir(a),b.meta.newContent=!1,b.notebook.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){B=0}))},b.updateNotebookComment=function(a){return a.content<2||a.content>2e3?j.getEmptyPromise():i.editNotebookComment(a.id).post({content:a.content}).then(function(b){return console.dir(b),a.editComment=!1,a.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})},b.editComment=function(a){a.editComment=!0,a.$$tempContent=a.content,b.cancelEditComment=function(){a.editComment=!1,a.content=a.$$tempContent}},b.editNotebook=function(){b.meta.newContent=!0,b.$$oldContent=b.notebook.content,b.cancelEditNotebook=function(){b.meta.newContent=!1,b.notebook.content=b.$$oldContent}}}]).controller("NotebookNewCtrl",["$scope","$upload","UserService","notebookRes","EmailNotActive","EmptyPromise","$state","$log","maxFileUploadSize","errorPopup","KPNotify","$translate",function(a,b,c,d,e,f,g,h,i,j,k,l){
e.open(),a.notebook={title:"",content:"",language:"",charCount:0},a.fileTooLargeError=!1,a.onFileSelect=function(b){var c=angular.isObject(b)?b[0].size:0;c>i.bytes?a.fileTooLargeError=!0:a.fileTooLargeError=!1},a.upload=function(c){return b.upload({url:KP.API.URL+"notebook/add?{0}={1}".format(KP.CONSTANT.TOKEN,KP.API.PARAMS[KP.CONSTANT.TOKEN]),fields:a.notebook,file:c,fileFormDataName:"image_file"}).then(function(b){return b.data.data&&(a.notebook.title="",a.notebook.content="",a.notebook.language="",a.notebook.id=b.data.data.notebook_id,g.transitionTo("entry.entity",{id:b.data.data.notebook_id})),a.processing=!1,m=!0,KP.API.SUCC},function(b){return a.errorMsg=b.msg,a.processing=!1,m=!0,KP.API.ERROR})};var m=!0;a.vSubFlag=!1;var n=function(b,c){a.notebook.charCount=KP.Utils.charByteCount(b)},o=function(b){return a.notebook.content};a.$watch(o,n),a.addNotebook=function(){a.vSubFlag=!0;var b=a.files;return m?(m=!1,a.processing||""==a.notebook.language||a.notebook.title.length<5||a.notebook.title.length>100||a.notebook.charCount<25||a.notebook.charCount>2500||a.fileTooLargeError?(m=!0,f.getEmptyPromise()):(a.processing=!0,b&&b.length&&!a.fileTooLargeError?a.upload(b[0]):d.addNotebook().post(a.notebook).then(function(b){return b&&b.data&&(a.notebook.id=b.data.notebook_id,g.transitionTo("entry.entity",{id:b.data.notebook_id})),a.notebook.title="",a.notebook.content="",a.notebook.language="",a.processing=!1,m=!0,KP.API.SUCC},function(b){if("NotebookReachedRegularUserLimitPerDay"===b.type)return j.open();if("NotebookIntervalLimit"===b.type){m=!0;var c=l.instant("NB302");return k.appendWithContent(c)}return a.errorMsg=b.msg,a.processing=!1,m=!0,KP.API.ERROR})["finally"](function(){a.processing=!1}))):f.getEmptyPromise()}}]).controller("NotebookMineCtrl",["$scope","notebookRes","$state","$stateParams","$translate","alertModal","KPNotify","LoginAndActive","User",function(a,b,c,d,e,f,g,h,i){var j=d.userId;a.cuserId=j;var k=angular.copy(KP.LANSEL),l=e.instant;angular.forEach(k,function(a){a.name=l(a.v)}),a.lans_1=_.union([{t:-1,v:"",name:l("C0027")}],k),a.uiSelected=function(b,c){a.language=b.v,a.applyFilter()},a.filter={page:1},a.language="My Notebook entries",a.applyFilter=function(){switch(a.language){case"My Notebook entries":c.transitionTo("notebookAlias.mine",{userId:j});break;case"My Notebook corrections":c.transitionTo("notebookAlias.myCorrections",{userId:j});break;case"":c.transitionTo("notebook.list");break;default:c.transitionTo("notebook.language",{language:a.language})}};var m=1;a.loadedFlag=!1;var n=function(c){return a.loadedFlag=!1,a.meta={},a.filter.page=c,1==c&&(a.items=null),b.myNotebookList().get(a.filter).then(function(b){a.loadedFlag=!0;var d=a.items;d=d&&1!=c?_.union(d,b.data):b.data,a.items=d,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};n(m),a.loadMore=function(){return a.loadMoreFlag=!0,n(++m)},a.deleteNotebook=function(c,d){f.open(a,l("C0050"),l("C1008")).then(function(e){b.deleteNotebook(c.id).post().then(function(b){return b.data.success>0&&(a.items.splice(d,1),a.meta.total--),e.$close(),KP.API.SUCC},function(a){return g.appendWithContent(a.type+" : "+a.msg),KP.API.ERROR})})},a.gotonew=function(a){h.open(a)&&c.transitionTo(a)},a.gotonewParams=function(a){h.open(a)&&c.transitionTo(a)}}]).controller("NotebookMineCorrectionsCtrl",["$scope","notebookRes","$state","$stateParams","$translate","LoginAndActive","User",function(a,b,c,d,e,f,g){var h=d.userId;a.cuserId=h;var i=angular.copy(KP.LANSEL),j=e.instant;angular.forEach(i,function(a){a.name=j(a.v)}),a.lans_1=_.union([{t:-1,v:"",name:j("C0027")}],i),a.uiSelected=function(b,c){a.language=b.v,a.applyFilter()},a.filter={page:1},a.language="My Notebook corrections",a.applyFilter=function(){switch(a.language){case"My Notebook entries":c.transitionTo("notebookAlias.mine",{userId:h});break;case"My Notebook corrections":c.transitionTo("notebookAlias.myCorrections",{userId:h});break;case"":c.transitionTo("notebook.list");break;default:c.transitionTo("notebook.language",{language:a.language})}},a.loadedFlag=!0;var k=1,l=function(c){return a.loadedFlag=!1,a.meta={},a.filter.page=c,1==c&&(a.items=null),b.myNotebookCorrectionList().get(a.filter).then(function(b){var d=a.items;d=d&&1!=c?_.union(d,b.data):b.data,a.items=d,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};l(k),a.loadMore=function(){return a.loadMoreFlag=!0,l(++k)},a.gotonew=function(a){f.open(a)&&c.transitionTo(a)},a.gotonewParams=function(a){f.open(a)&&c.transitionTo(a)}}]).controller("NotebookList1Ctrl",["$scope","$translate","$state","$stateParams","$modal","notebookRes",function(a,b,c,d,e,f){var g=angular.copy(KP.LANSEL),h=b.instant;angular.forEach(g,function(a){a.name=h(a.v)}),a.lans=_.union([{t:-1,v:"",name:h("C0027")}],g),a.lans_1=_.union([{t:-1,v:"",name:h("C0027")}],g),a.uiSelected=function(b,c){a.filter.author_language=b.v,a.applyFilter()},a.uiItems1={name:"",v:""},a.uiSelected1=function(b,c){a.filter.language=b.v,a.applyFilter1()},a.writeLan=function(){return""==a.filter.language?h("NB034")+" "+h("C0027"):h("NB034")+" "+h(a.filter.language)},a.marks=[{v:"-5",l:h("C0024")},{v:"5",l:h("NB156")+":5"},{v:"",l:h("NB156")+":0"},{v:"-2",l:h("NB156")+":-2"}],a.filter={language:d.language||"",page:1,marks_min:"",author_language:""},a.filter.language&&(a.uiItems1.v=a.filter.language,a.uiItems1.name=h(a.uiItems1.v)),a.getMarks=function(b){for(var c="All",d=0;d<a.marks.length;d++)if(a.marks[d].v==b){c=a.marks[d].l;break}return c},a.applyFilter1=function(){switch(a.filter.language){case"My Notebook entries":c.transitionTo("notebookAlias.mine",{userId:a.currentUser.id});break;case"My Notebook corrections":c.transitionTo("notebookAlias.myCorrections",{userId:currentUser.id});break;case"":c.transitionTo("notebook.list1");default:c.transitionTo("notebook.language",{language:a.filter.language})}},a.applyFilter=function(){i=1,j(i)};var i=1;a.loadedFlag=!1;var j=function(b){return a.loadedFlag=!1,a.meta={},1==b&&(a.items=null),a.filter.page=b,f.notebookList().get(a.filter).then(function(c){var d=a.items;d=d&&1!=b?_.union(d,c.data):c.data,a.items=d,a.meta=c.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};j(i),a.loadMore=function(){return a.loadMoreFlag=!0,j(++i)},a.popup=function(b,c){b.stopPropagation()||(b.cancelBubble=!0),a.ctrl="UserProfileCtrl",a.viewUrl="/views/user/profile.bs.html",a.user_id=c,e.open({scope:a,size:"lg",templateUrl:"/views/community/notebook/dynamic.load.ctrl.html"}),window.history.pushState({html:"ssss",pageTitle:"test"},"","/viewdetail/user/"+c)}}]).directive("dynamicLoadCtrl",["$compile","$state","$stateParams","$log","$parse","Restangular",function(a,b,c,d,e,f){return{restrict:"A",terminal:!0,link:function(b,d,e){var f=e.viewCtrl,g=e.viewUrl;f&&g&&(d.removeAttr("dynamic-load-ctrl"),d.attr("ng-controller",f),b.viewUrl=g,c.id=e.userId,a(d)(b))}}}]),angular.module("kp.community.notebook").directive("kpCommunityNotebookCorrection",["$rootScope","notebookRes","$sce","EmptyPromise",function(a,b,c,d){return{restrict:"EA",replace:!0,scope:{correction:"="},templateUrl:"/views/community/assert/notebook.correction.html",controller:["$scope",function(e){e.currentUser=a.currentUser,e.meta={};var f=1,g=function(a){f=a,b.getNotebookCorrectionComment(e.correction.id).get({page:a}).then(function(b){var c=e.correction.comment_obj_s;c=c&&1!=a?_.union(b.data.reverse(),c):b.data.reverse(),e.correction.comment_obj_s=c,e.correction.meta=b.meta})},h=function(){var a=!e.correction.showComment;e.correction.showComment=a,a&&e.correction.comment_count>0&&(e.correction.comment_obj_s&&0!=e.correction.comment_obj_s.length||g(1))};e.correction.newComment={content:""};var i=function(){return!a.currentUser||e.correction.newComment.content.length<2||e.correction.newComment.content.length>2e3?d.getEmptyPromise():(e.doflag=!0,b.addNotebookCorrectComment(e.correction.id).post(e.correction.newComment).then(function(b){var c=b.data.correction_comment_obj;return c.commenter_obj=a.currentUser,e.correction.comment_obj_s||(e.correction.comment_obj_s=[]),e.correction.comment_obj_s.push(c),e.correction.comment_count++,e.correction.isComment=!1,e.correction.newComment={content:""},c.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){e.doflag=!1}))},j=function(c){if(1==c){if(e.correction.hasVoteUp)return d.getEmptyPromise()}else if(e.correction.hasVoteDown)return d.getEmptyPromise();return a.currentUser?b.markNotebookCorrect(e.correction.id).post({mark:c}).then(function(a){return e.correction.mark_sum=a.data.mark_sum,1==c?(e.correction.hasVoteUp=!0,e.correction.hasVoteDown=!1):(e.correction.hasVoteUp=!1,e.correction.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):d.getEmptyPromise()};e.moreCorrectionComment=function(){g(++f)},e.addComment=i,e.toggleShowComment=h,e.correctionVote=j,e.showAddComment=function(){e.correction.isComment=!0,e.correction.showComment||h()},e.html=function(a){return a?c.trustAsHtml(a.replace(/\n/g,"<br/>")):""},e.submitForm=function(a,b,c){b=!0;var d=a();return b=!1,d},e.charCount=KP.Utils.charByteCount,e.updateNotebookCorrection=function(){return e.correction.content.length>5e3?d.getEmptyPromise():b.editNotebookCorrection(e.correction.id).post({content:e.correction.content}).then(function(a){return console.dir(a),e.meta.editCorrection=!1,e.correction.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})},e.updateNotebookCorrectionComment=function(a){return a.content>2e3?d.getEmptyPromise():b.editNotebookCorrectComment(a.id).post({content:a.content}).then(function(b){return console.dir(b),a.isEditComment=!1,a.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})},e.editCorrection=function(){e.meta.editCorrection=!0,e.$$oldCorrectionContent=e.correction.content,e.cancelEditCorrtCion=function(){e.meta.editCorrection=!1,e.correction.content=e.$$oldCorrectionContent}},e.editCorrtComment=function(a){a.isEditComment=!0,a.$$oldContent=a.content,e.cancelEditCorrtComment=function(){a.isEditComment=!1,a.content=a.$$oldContent}}}],link:function(a,b,c){}}}]),angular.module("kp.community.discussion",["summernote"]).config(["$stateProvider",function(a){a.state("discussion",{parent:"kp","abstract":!0,url:"/discussions",templateUrl:"/views/community/discussion/discussion.bs.html"}).state("discussion.myComments",{url:"/{userId}/comments",templateUrl:"/views/community/discussion/discussion.mine.html",controller:"DiscussionMineCtrl",data:{title:"GP904"}}).state("discussion.mine",{url:"/{userId:[0-9]+}",templateUrl:"/views/community/discussion/discussion.mine.html",controller:"DiscussionMineCtrl",data:{title:"M0098"}}).state("discussion.new",{url:"/add",templateUrl:"/views/community/discussion/discussion.new.html",controller:"DiscussionNewCtrl",data:{role:"user",title:"GP211"}}).state("discussion.rank",{url:"/rankings",templateUrl:"/views/community/discussion/discussion.rank.html",controller:"DiscussionRankCtrl"}).state("discussion.language",{url:"/{language}",templateUrl:"/views/community/discussion/discussion.list.html",controller:"DiscussionListCtrl",data:{title:"GP504"}}).state("discussion.list",{url:"",templateUrl:"/views/community/discussion/discussion.list.html",controller:"DiscussionListCtrl",data:{title:"GP504"}}).state("discussion.listAlias",{url:"/{language}",templateUrl:"/views/community/discussion/discussion.list.html",controller:"DiscussionListCtrl",data:{title:"GP504"}}).state("discussionAlias",{parent:"kp","abstract":!0,url:"/discussion",templateUrl:"/views/community/discussion/discussion.bs.html"}).state("discussionAlias.entity",{url:"/{id:[0-9]+}",templateUrl:"/views/community/discussion/discussion.entity.html",controller:"DiscussionEntityCtrl"}).state("discussionAlias.new",{url:"/new",templateUrl:"/views/community/discussion/discussion.new.html",controller:"DiscussionNewCtrl",data:{title:"GP211"}})}]),angular.module("kp.community.discussion").service("discussionRes",["Restangular",function(a){var b=a.service("discussion");this.discussionList=function(){return b.one()},this.getDiscussionById=function(a){return b.one(a.toString())},this.addDiscussion=function(){return b.one().all("add")},this.markDiscussion=function(a){return b.one(a.toString()).all("mark")},this.myDiscussionOrComment=function(a){return"my_discussion"==a?b.one("mine"):b.one("comment").one("mine")},this.getDiscussionComment=function(a){return b.one(a.toString()).one("comment")},this.addDiscussionComment=function(a){return b.one(a.toString()).all("comment")},this.markDiscussionComment=function(a){return b.one("comment").one(a.toString()).all("mark")},this.editDiscussion=function(a){return b.one(a.toString()).all("edit")},this.editDiscussionComment=function(a){return b.one("comment").one(a.toString()).all("edit")}}]),angular.module("kp.community.discussion").controller("DiscussionListCtrl",["$scope","discussionRes","$stateParams","$state","$translate","$sce","LoginAndActive","$log","$timeout",function(a,b,c,d,e,f,g,h,i){a.languageTime={show:!0};var j=moment.utc([2018,1,1,0,0,0,0]).unix(),k=moment.utc([2017,11,27,0,0,0,0]).unix(),l=moment().utc().unix(),m=k-l,n=j-l;(0>n||m>0)&&(a.languageTime.show=!1);var o=d.$current.self.name;a.highlightMenuTab="discussion.language"===o||"discussion.list"===o?!0:!1,a.gotonew=function(a){g.open(a)&&d.transitionTo(a)};var p=angular.copy(KP.LANSEL),q=e.instant;angular.forEach(p,function(a){a.name=q(a.v)}),a.lans=_.union([{t:-1,v:"",name:q("C0027")}],p),a.lans_1=_.union([{t:-1,v:"",name:q("C0027")}],p),a.uiSelected=function(b,c){a.filter.discussor_language=b.v,a.applyFilter()},a.uiSelected1=function(b,c){a.filter.language=b.v,a.applyFilter()},a.filter={language:c.language||"",filter_language:"",marks_min:"",page:1},a.uiItems1={name:q(a.filter.language),v:a.filter.language},a.uiItems={name:q(a.filter.filter_language),v:a.filter.filter_language},a.items=null,a.loadedFlag=!1;var r=function(c){return a.loadedFlag=!1,a.meta={},a.filter.page=c,1==c&&(a.items=null),b.discussionList().get(a.filter).then(function(b){1!=c?a.items=_.union(a.items,b.data):a.items=b.data,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};r(1),a.loadMore=function(){return a.loadMoreFlag=!0,r(a.filter.page+1)},a.applyFilter=function(){h.debug("Current state: ",d.$current),d.transitionTo("discussion.language",{language:a.filter.language}),r(1)},a.html=function(a){return a?f.trustAsHtml(a):""},a.gotonew=function(a){g.open(a)&&d.transitionTo(a)}}]).controller("DiscussionMineCtrl",["$scope","discussionRes","$stateParams","$state","$translate",function(a,b,c,d,e){var f=angular.copy(KP.LANSEL),g=e.instant;angular.forEach(f,function(a){a.name=g(a.v)}),a.lans_1=_.union([{t:-1,v:"",name:g("C0027")}],f),a.uiSelected1=function(b,c){a.dataType=b.v,a.changeData()},"discussion.mine"==d.$current.self.name?a.dataType="my_discussion":a.dataType="my_comment_discussion",a.filter={page:1},a.loadedFlag=!1;var h=function(c){return a.loadedFlag=!1,a.meta={},a.filter.page=c,1==c&&(a.items=null),b.myDiscussionOrComment(a.dataType).get(a.filter).then(function(b){1!=c?a.items=_.union(a.items,b.data):a.items=b.data,a.meta=b.meta})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};h(1),a.loadMore=function(){return a.loadMoreFlag=!0,h(a.filter.page+1)},a.changeData=function(){switch(a.dataType){case"my_discussion":return void d.transitionTo("discussion.mine",{userId:a.currentUser.id});case"my_comment_discussion":return void d.transitionTo("discussion.myComments",{userId:a.currentUser.id});case"":return void d.transitionTo("discussion.list");default:return void d.transitionTo("discussion.language",{language:a.dataType})}}}]).controller("DiscussionRankCtrl",["$scope",function(a){}]).controller("DiscussionNewCtrl",["$scope","discussionRes","$translate","UserService","EmptyPromise","$state","errorPopup","KPNotify",function(a,b,c,d,e,f,g,h){a.discussion={title:"",content:"",language:"",language2:""},a.vSubFlag=!1,a.options={toolbar:[["style",["bold","italic","underline"]],["font",["strikethrough"]],["color",["color"]],["edit",["fullscreen","clear","undo","redo"]]]},a.addDiscussion=function(){return a.processing||""==a.discussion.language||""==a.discussion.language2||a.discussion.title.length<10||a.discussion.title.length>110||a.discussion.content.length>5e3?e.getEmptyPromise():(a.processing=!0,b.addDiscussion().post(a.discussion).then(function(b){return b&&b.data&&(a.discussion={title:"",content:"",language:"",language2:""},a.discussion.id=b.data.discussion_id,f.transitionTo("discussionAlias.entity",{id:b.data.discussion_id})),KP.API.SUCC},function(a){if("DiscussionReachedRegularUserLimitPerDay"===a.type)return g.open();if("DiscussionIntervalLimit"===a.type){var b=c.instant("NB307");return h.appendWithContent(b)}return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.submitForm=function(b,c,d){return a[c]=!0,b()},a.paste=function(b){if(b.originalEvent&&b.originalEvent.clipboardData){var c=b.originalEvent.clipboardData,d=c.getData("text/plain").replace(/<[^>]+>/g,"");a.discussion.content+=d,a.$digest()}try{b.preventDefault()}catch(e){window.event.returnValue=!1}},a.charCount=KP.Utils.charByteCount}]).controller("DiscussionEntityCtrl",["$scope","$sce","discussionRes","UserService","$stateParams","$location","$anchorScroll","$timeout","EmptyPromise","LoginAndActive","TeacherApplyService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=d.currentUser();if(!a)return!1;var b=Date.parse(a.register_time),c=6e4,e=60*c,f=24*e,g=Date.parse(Date());return g-b>7*f?!0:!1}var m=1,n=function(b){return m=b,c.getDiscussionComment(e.id).get({page:b}).then(function(c){var d=a.discu.comment_obj_s;d=d&&1!=b?_.union(d,c.data):c.data,a.discu.comment_obj_s=d,a.meta.comments=c.meta,a.meta.newComment={content:""}})["finally"](function(){a.loadMoreFlag=!1})},o=function(){return a.processing||!a.currentUser||a.meta.newComment.content.length<2||a.meta.newComment.content.length>2e3?i.getEmptyPromise():(a.processing=!0,c.addDiscussionComment(e.id).post(a.meta.newComment).then(function(b){var c=b.data.comment_obj;return c.commenter_obj=a.currentUser,a.discu.comment_obj_s||(a.discu.comment_obj_s=[]),a.discu.comment_obj_s.push(c),a.discu.comment_count=a.discu.comment_count+1,a.meta.isComment=!1,a.meta.newComment={content:""},c.editable=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},p=function(b,d){if(1==b){if(d.hasVoteUp)return i.getEmptyPromise()}else if(d.hasVoteDown)return i.getEmptyPromise();return a.currentUser?c.markDiscussionComment(d.id).post({mark:b}).then(function(a){return d.mark_sum=a.data.mark_sum,1==b?(d.hasVoteUp=!0,d.hasVoteDown=!1):(d.hasVoteUp=!1,d.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):i.getEmptyPromise()},q=function(b){if(1==b){if(a.discu.hasVoteUp)return i.getEmptyPromise()}else if(a.discu.hasVoteDown)return i.getEmptyPromise();return a.currentUser?c.markDiscussion(e.id).post({mark:b}).then(function(c){return a.discu.mark_sum=c.data.mark_sum,1==b?(a.discu.hasVoteUp=!0,a.discu.hasVoteDown=!1):(a.discu.hasVoteUp=!1,a.discu.hasVoteDown=!0),KP.API.SUCC},function(a){return KP.API.ERROR}):i.getEmptyPromise()};a.html=function(a){return a?b.trustAsHtml(a):""},a.loadMoreComment=function(){return a.loadMoreFlag=!0,n(++m)},a.addComment=o,a.commentVote=p,a.discussionVote=q,a.toAddComment=function(){j.open()&&(a.meta.isComment=!0,h(function(){f.hash("formComment"),g()},200))},c.getDiscussionById(e.id).get().then(function(b){var c=b.data;a.meta=b.meta,a.discu=c,a.meta.editComment=!1,c.comment_count>0&&n(1)}),a.submitForm=function(b,c,d){return a[c]=!0,b()},a.options={toolbar:[["style",["bold","italic","underline"]],["font",["strikethrough"]],["color",["color"]],["edit",["fullscreen","clear","undo","redo"]]]},a.charCount=KP.Utils.charByteCount,a.updateDiscu=function(){return a.processing||a.discu.content.length>5e3?i.getEmptyPromise():(a.processing=!0,c.editDiscussion(a.discu.id).post({content:a.discu.content}).then(function(b){return a.meta.editDiscu=!1,a.discu.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.updateComment=function(b){return a.processing||b.content.length>2e3||b.content.length<2?i.getEmptyPromise():(a.processing=!0,c.editDiscussionComment(b.id).post({content:b.content}).then(function(a){return b.editComment=!1,b.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.editDiscu=function(){a.meta.editDiscu=!0,a.$$oldDiscuContent=a.discu.content,a.cancelEditDiscu=function(){a.meta.editDiscu=!1,a.discu.content=a.$$oldDiscuContent}},a.editComment=function(b){b.editComment=!0,b.$$oldComment=b.content,a.cancelEditComment=function(){b.editComment=!1,b.content=b.$$oldComment}},a.allowShowVoteUp=l()}]),angular.module("kp.community.languagehacking",[]).config(["$stateProvider",function(a){a.state("languagehacking",{url:"/languagehacking",templateUrl:"/views/community/languagehacking/languagehacking.bs.html",controller:"LanguageHackingIndexCtrl"}).state("languagehackinglist",{parent:"kp",url:"/languagehacking/center",templateUrl:"/views/community/languagehacking/languagehacking.list.html",controller:"LanguagehackingListCtrl",data:{title:"LH500"}}).state("languagehackinglistLanguage",{parent:"kp",url:"/languagehacking/center/{language}",templateUrl:"/views/community/languagehacking/languagehacking.list.html",controller:"LanguagehackingListCtrl",data:{title:"LH500"}}).state("languagehackingmyComments",{parent:"kp",url:"/languagehacking/comments",templateUrl:"/views/community/languagehacking/languagehacking.mine.html",controller:"LanguagehackingMyCommentCtrl",data:{title:"LH502"}}).state("languagehackingnew",{parent:"kp",url:"/languagehacking/{language}/mission{sort}/new",templateUrl:"/views/community/languagehacking/languagehacking.new.html",controller:"LanguageHackingAddNewCtrl",data:{title:"LH503"}}).state("languagehackingentity",{parent:"kp",url:"/languagehacking/{language}/mission{sort}/{id:[0-9]+}",templateUrl:"/views/community/languagehacking/languagehacking.entity.html",controller:"LanguagehackingEntityCtrl",data:{title:"LH504"}}).state("languagehackingmission",{parent:"kp",url:"/languagehacking/{language}/mission{sort}",templateUrl:"/views/community/languagehacking/languagehacking.mission.html",controller:"LanguagehackingMissionListCtrl",data:{title:"LH501"}})}]),angular.module("kp.community.languagehacking").service("languagehackingRes",["Restangular",function(a){var b=a.service("lh");this.getLhMissionList=function(){return b.one("mission")},this.getGoToBuyBook=function(){return b.one("book")},this.getBookUser=function(a){return b.one("book").one(""+a.toString()).one("user")},this.postLhCodeActive=function(a){return b.one("book").post("active",{code:a})},this.getLhMission=function(){return b.one("mission")},this.getMissionDetail=function(a){return b.one("mission").one(""+a)},this.getUserMissionList=function(a){return b.one("mission").one(""+a).one("usermission")},this.getLhUserMissionUserList=function(a){return b.one("mission").one(a.toString()).one("user")},this.getLhUserMission=function(a){return b.one("usermission").one(a.toString())},this.postLhUserMissionAdd=function(a){return b.one("mission").one(a.toString()).one("usermission").all("add")},this.postLhUserMissionEdit=function(a){return b.one("usermission").one(a.toString()).all("edit")},this.postLhUserMissionMarkAdd=function(a){return b.one("usermission").one(a.toString()).all("mark")},this.postlhUserMissionComment=function(a){return b.one("usermission").one(a.toString()).all("comment")},this.getlhUserMissionComment=function(a){return b.one("usermission").one(a.toString()).one("comment")},this.getMyComments=function(){return b.one("usermission").one("comment").one("mine")}}]),angular.module("kp.community.languagehacking").controller("LanguageHackingAddNewCtrl",["$scope","languagehackingRes","AllMissionUsers","$stateParams","$state","EmptyPromise","$timeout","TeacherApplyService",function(a,b,c,d,e,f,g,h){function i(c){b.getLhUserMissionUserList(c).get().then(function(b){a.relatedUsers=b.data,a.relatedUsersMeta=b.meta})}a.missionFilter={sort:d.sort,language:d.language};var j=function(){return b.getMissionDetail(0).get({language:a.missionFilter.language,sort:a.missionFilter.sort}).then(function(b){a.mission_obj=b.data.mission_obj,a.meta=b.meta,g(function(){i(a.mission_obj.mission_id)},200)})};j(),a.languageHack={title:"",content:"",language:d.language,url:""},a.vSubFlag=!1,a.addLanguageHack=function(c){return a.vSubFlag=!0,a.processing||""==a.languageHack.url||a.languageHack.title.length<10||a.languageHack.title.length>110||a.languageHack.content.length>5e3?f.getEmptyPromise():(a.processing=!0,b.postLhUserMissionAdd(c).post(a.languageHack).then(function(b){return a.languageHack.sort=d.sort,a.languageHack.id=b.data.user_mission_id,e.transitionTo("languagehackingentity",{language:a.languageHack.language,sort:a.languageHack.sort,id:a.languageHack.id}),KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},a.paste=function(b){if(b.originalEvent&&b.originalEvent.clipboardData){var c=b.originalEvent.clipboardData,d=c.getData("text/plain").replace(/<[^>]+>/g,"");a.languageHack.content+=d,a.$digest()}try{b.preventDefault()}catch(e){window.event.returnValue=!1}},a.charCount=KP.Utils.charByteCount,a.viewAllMissionUsers=function(a){c.open(a)},h.getLoginPromise().then(function(a){a||e.go("languagehacking")});var k=function(){return b.getGoToBuyBook().get().then(function(b){a.buyBook=b.data})};k()}]),angular.module("kp.community.languagehacking").controller("LanguagehackingListCtrl",["$scope","$modal","languagehackingRes","$state","$sce","$translate","$stateParams","AllMissionUsers","$location","$anchorScroll","$timeout","EmptyPromise","LoginAndActive","$log","$rootScope","TeacherApplyService","localStorageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(b){c.getBookUser(0).get({language:b}).then(function(b){a.relatedUsers=b.data,a.relatedUsersMeta=b.meta})}a.removeCookie=function(){var b="languagehacking.firsttime",c=q.cookie.get(b);c&&a.currentUser&&(q.cookie.remove(b),d.go("languagehacking"))};var s=[{t:0,v:"french"},{t:0,v:"italian"},{t:0,v:"german"},{t:0,v:"spanish"}],t=f.instant;angular.forEach(s,function(a){a.name=t(a.v)}),a.lans=_.union(s),a.centerSelected=!0,a.uiSelected1=function(b){a.filter.language=b.v,a.applyFilter()},a.items=null,a.loadedFlag=!1,a.confirm=function(){a.error=null;var b=angular.uppercase(a.code.replace(/[-\s]/g,""));return c.postLhCodeActive(b).then(function(b){return a.success=b.data,a.code="",KP.API.SUCC},function(b){var c=b.type,d={};switch(c){case"Exist":d.code="VC303";break;case"NotExist":d.code="VC304";break;case"IsActive":d.code="VC306"}a.error=d})};var u=function(b){return a.loadedFlag=!1,a.meta={},a.filter.page=b,1==b&&(a.items=null),c.getLhMissionList().get(a.filter).then(function(c){1!=b?a.items=_.union(a.items,c.data):a.items=c.data,a.meta=c.meta,r(a.filter.language)})["finally"](function(){a.loadedFlag=!0,a.loadMoreFlag=!1})};a.loadMore=function(){return a.loadMoreFlag=!0,u(a.filter.page+1)},a.applyFilter=function(){d.go("languagehackinglistLanguage",{language:a.filter.language},{notify:"languagehackinglistLanguage"!=d.current.name}),u(1)},a.html=function(a){return a?e.trustAsHtml(a):""},a.viewAllMissionUsers=function(a){b.open({templateUrl:"/views/community/languagehacking/modal/mission.users.html",controller:["$scope","languagehackingRes",function(b,c){function d(d){b.filter.page=d,c.getBookUser(0).get({language:a,page:b.filter.page,page_size:b.filter.page_size}).then(function(a){1==d?b.items=a.data:b.items=_.union(b.items,a.data),b.meta=a.meta})}b.filter={page:1,page_size:30},b.loadMore=function(){return d(b.filter.page+1)},d(1)}]})},p.getLoginPromise().then(function(b){if(b){var c="french";b.learning_language&&angular.forEach(s,function(a){a.v==b.learning_language&&(c=b.learning_language)}),a.filter={language:g.language||c,page:1,need_user_mission:1},a.uiItems1={name:t(a.filter.language),v:a.filter.language},u(1)}else d.go("languagehacking")});var v=function(){return c.getGoToBuyBook().get().then(function(b){a.buyBook=b.data})};v()}]),angular.module("kp.community.languagehacking").controller("LanguagehackingEntityCtrl",["$scope","$sce","languagehackingRes","$stateParams","$location","$anchorScroll","$timeout","EmptyPromise","LoginAndActive","AllMissionUsers","TeacherApplyService","$state",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){c.getLhUserMissionUserList(b).get().then(function(b){a.relatedUsers=b.data,a.relatedUsersMeta=b.meta})}var n=1,o=function(b){return n=b,c.getlhUserMissionComment(d.id).get({page:b,page_size:4}).then(function(c){a.lhEntityComment&&1!=b?a.lhEntityComment=_.union(a.lhEntityComment,c.data):a.lhEntityComment=c.data,a.meta=c.meta})["finally"](function(){a.loadMoreFlag=!1})};o(1),a.loadMoreComment=function(){return a.loadMoreFlag=!0,o(++n)};var p;a.lhEntity=p;var q=function(){return c.getLhUserMission(d.id).get().then(function(b){p=angular.copy(b.data),a.lhEntity=b.data;var c=a.lhEntity.video_url,d=/youtube.com\/watch(\?|\?.+&)v=/g,e=/youtube.com\/v\//g,f=/youtu.be\//g,h=/youtube.com\/embed\//g;try{d.test(c)?c="https://youtube.com/embed/"+c.split("v=")[1].split("&")[0]:e.test(c)?c="https://www.youtube.com/embed/"+c.split("v/")[1].split("?")[0]:f.test(c)?c="https://www.youtube.com/embed/"+c.split("be/")[1].split("?")[0]:h.test(c)&&(c="https://www.youtube.com/embed/"+c.split("embed/")[1])}catch(i){}a.lhEntity.video_url=c,p.video_url=a.lhEntity.video_url,g(function(){m(a.lhEntity.mission_id)},200)})};q(),a.$watchCollection("newLHEntity",function(b){b&&p&&b!=p&&(b.title!=p.title&&b.title.length>9&&b.title.length<110||b.desc!=p.desc&&b.desc.length<5e3||b.video_url!=p.video_url?a.updateable||(a.updateable=!0):a.updateable=!1)});var r=function(){return a.processing||!a.currentUser||a.newComment.content.length<2||a.newComment.content.length>2e3?h.getEmptyPromise():(a.processing=!0,c.postlhUserMissionComment(d.id).post(a.newComment).then(function(b){var c=b.data.comment_obj;return c.commenter_obj=a.currentUser,a.lhEntityComment||(a.lhEntityComment=[]),a.lhEntityComment.push(c),a.lhEntity.comment_count=a.lhEntity.comment_count+1,a.newComment={content:""},a.isComment=!1,KP.API.SUCC},function(a){return KP.API.ERROR})["finally"](function(){a.processing=!1}))},s=function(b){return 1==b&&a.lhEntity.hasVoteUp?h.getEmptyPromise():a.currentUser?c.postLhUserMissionMarkAdd(d.id).post({mark:b}).then(function(c){return a.lhEntity.mark_sum=c.data.mark_sum,1==b?a.lhEntity.hasVoteUp=!0:a.lhEntity.hasVoteUp=!1,KP.API.SUCC},function(a){return KP.API.ERROR}):h.getEmptyPromise()};a.html=function(a){return a?b.trustAsHtml(a):""},a.addComment=r,a.languageHackVote=s,a.toAddComment=function(){i.open()&&(a.isComment=!0,g(function(){e.hash("formComment"),f()},200))},a.submitForm=function(b,c){return a[c]=!0,b()},a.charCount=KP.Utils.charByteCount,a.saveEdit=!1,a.updateLhEntity=function(b){return a.saveEdit=!0,a.newLHEntity.desc.length>5e3||a.newLHEntity.title.length>0&&a.newLHEntity.title.length<10||0==a.newLHEntity.title.length||a.newLHEntity.title.length>110?h.getEmptyPromise():c.postLhUserMissionEdit(b).post({title:a.newLHEntity.title,content:a.newLHEntity.desc,url:a.newLHEntity.video_url}).then(function(b){var c=a.newLHEntity.video_url,d=/youtube.com\/watch(\?|\?.+&)v=/g,e=/youtube.com\/v\//g,f=/youtu.be\//g,g=/youtube.com\/embed\//g;try{if(d.test(c))c="https://youtube.com/embed/"+c.split("v=")[1].split("&")[0];else if(e.test(c))c="https://www.youtube.com/embed/"+c.split("v/")[1].split("?")[0];else if(f.test(c))c="https://www.youtube.com/embed/"+c.split("be/")[1].split("?")[0];else if(g.test(c)){if(""==c.split("embed/")[1])return a.editLhEntityContact=!0,a.errorBlock=!0,KP.API.ERROR;a.errorBlock=!1,c="https://www.youtube.com/embed/"+c.split("embed/")[1]}}catch(h){}return a.lhEntity.title=a.newLHEntity.title,a.lhEntity.desc=a.newLHEntity.desc,a.lhEntity.video_url=a.newLHEntity.video_url,p.title=a.lhEntity.title,
p.desc=a.lhEntity.desc,p.video_url=a.lhEntity.video_url,a.editLhEntityContact=!1,a.lhEntity.edited=!0,KP.API.SUCC},function(a){return KP.API.ERROR})},a.editLhEntity=function(){a.editLhEntityContact=!0,a.newLHEntity=angular.copy(a.lhEntity)},a.cancelEditLhEntity=function(){a.editLhEntityContact=!1},a.viewAllMissionUsers=function(a){j.open(a)},k.getLoginPromise().then(function(a){a||l.go("languagehacking")});var t=function(){return c.getGoToBuyBook().get().then(function(b){a.buyBook=b.data})};t()}]),angular.module("kp.community.languagehacking").service("AllMissionUsers",["$modal",function(a){this.open=function(b){a.open({templateUrl:"/views/community/languagehacking/modal/mission.users.html",controller:["$scope","languagehackingRes",function(a,c){function d(d){a.filter.page=d,c.getLhUserMissionUserList(b).get(a.filter).then(function(b){1==d?a.items=b.data:a.items=_.union(a.items,b.data),a.meta=b.meta})}a.filter={page:1,page_size:30},a.loadMore=function(){return d(a.filter.page+1)},d(1)}]})}}]).controller("LanguagehackingMissionListCtrl",["$scope","languagehackingRes","AllMissionUsers","$state","$translate","$sce","$stateParams","TeacherApplyService",function(a,b,c,d,e,f,g,h){function i(){b.getLhMission().get().then(function(b){l=_.groupBy(b.data,"language"),a.missionOptions=l[o.language]||[];var c=g.sort||"1";angular.forEach(a.missionOptions,function(b,d){var e=""+b.sort;e==c&&(a.selectedMission=a.missionOptions[d],a.applyFilter(),p(),j(1),k())})})}function j(c){return a.meta={},a.filter.page=c,1==c&&(a.items=[]),b.getUserMissionList(a.selectedMission.mission_id).get(a.filter).then(function(b){var d=b.data;1==c?a.items=d:a.items=_.union(a.items,d),a.meta=b.meta})["finally"](function(){})}function k(){b.getLhUserMissionUserList(a.selectedMission.mission_id).get({page_size:4}).then(function(b){a.relatedUsers=b.data,a.relatedUsersMeta=b.meta})}var l,m=[{t:0,v:"french"},{t:0,v:"italian"},{t:0,v:"german"},{t:0,v:"spanish"}],n=e.instant,o={language:g.language||"french",page:1};a.filter=o,a.missionSelected=!0,angular.forEach(m,function(a){a.name=n(a.v)}),a.lans=_.union(m),a.missionOnChange=function(){a.changeMission(a.selectedMission)},a.changeMission=function(b){a.selectedMission=b,a.applyFilter(),p(),j(1),k()},a.languageOnChange=function(){a.changeLanguage({v:a.filter.language})},a.changeLanguage=function(b){if(a.filter.language=b.v,l){var c=l[b.v]||[];a.missionOptions=c,a.selectedMission=c.length>0?c[0]:void 0,c.length>0?(p(),j(1),k()):a.mission_obj=a.items=a.meta=null}a.applyFilter()},g.sort||d.go(".",{sort:a.filter.mission},{notify:!1}),a.uiItems1={name:n(a.filter.language),v:a.filter.language};var p=function(){return b.getMissionDetail(a.selectedMission.mission_id).get(a.filter).then(function(b){a.mission_obj=b.data.mission_obj,a.has_completed=b.data.has_completed})["finally"](function(){})};a.applyFilter=function(){var b={language:a.filter.language};a.selectedMission&&angular.extend(b,{sort:a.selectedMission.sort}),d.go(".",b,{notify:!1})},a.loadMore=function(){return a.loadMoreFlag=!0,j(a.filter.page+1)},a.viewAllMissionUsers=function(){c.open(a.selectedMission.mission_id)},i(),h.getLoginPromise().then(function(a){a||d.go("languagehacking")});var q=function(){return b.getGoToBuyBook().get().then(function(b){a.buyBook=b.data})};q()}]),angular.module("kp.community.languagehacking").controller("LanguagehackingMyCommentCtrl",["$scope","$translate","languagehackingRes","TeacherApplyService","$state",function(a,b,c,d,e){function f(){c.getMyComments().get(a.filter).then(function(b){1!=g.page?a.comments=_.union(a.comments,b.data):a.comments=b.data,a.meta=b.meta})}var g={page:1};a.filter=g,a.myCommentsSelected=!0,f(),a.loadMore=function(){g.page=g.page+1,f()},d.getLoginPromise().then(function(a){a||e.go("languagehacking")})}]),angular.module("kp.community.languagehacking").controller("LanguageHackingIndexCtrl",["$scope","$state","languagehackingRes","localStorageService",function(a,b,c,d){var e="languagehacking.firsttime",f=d.cookie.get(e);f&&a.currentUser?b.go("languagehackinglist"):d.cookie.set(e,!0),a["goto"]=function(a){b.go("languagehackinglistLanguage",{language:a})},a.confirm=function(){a.error=null;var d=angular.uppercase(a.code.replace(/[-\s]/g,""));return c.postLhCodeActive(d).then(function(c){return a.success=c.data,a.code="",b.go("languagehackinglist"),KP.API.SUCC},function(b){var c=b.type,d={};switch(c){case"Exist":d.code="VC303";break;case"NotExist":d.code="VC304";break;case"IsActive":d.code="VC306"}a.error=d})}}]),angular.module("kp.community",["kp.community.partner","kp.community.question","kp.community.notebook","kp.community.discussion","kp.community.languagehacking"]),angular.module("kp.community").filter("device",function(){var a='<span class="{0}" title="{1}" >&nbsp;&nbsp;&nbsp;</span>';return function(b){switch(b){case 1:return a.format("m1","C1028".translate());case 2:return a.format("m2","C1029".translate());case 3:return a.format("m3","C1030".translate());default:return""}}}),angular.module("kp.singlePage",[]).constant("smaller_language",{catalan:"catalan",urdu:"urdu",slovak:"slovak",ukrainian:"ukrainian",croatian:"croatian",esperanto:"esperanto",lithuanian:"lithuanian",georgian:"georgian",latin:"latin",azeri:"azeri","gaelic(irish)":"gaelic(irish)",mongolian:"mongolian",afrikaans:"afrikaans",icelandic:"icelandic",malay:"malay",swahili:"swahili",yoruba:"yoruba",bengali:"bengali",latvian:"latvian",nepali:"nepali",tamil:"tamil",burmese:"burmese",dari:"dari",slovenian:"slovenian",armenian:"armenian",punjabi:"punjabi",tibetan:"tibetan","gaelic(scottish)":"gaelic(scottish)",pashtu:"pashtu",basque:"basque",bosnian:"bosnian",faroese:"faroese","greek(ancient)":"greek(ancient)",welsh:"welsh","chinese(taiwanese)":"chinese(taiwanese)",nahuatl:"nahuatl",albanian:"albanian","chinese(shanghainese)":"chinese(shanghainese)","chinese(other)":"chinese(other)",belarusian:"belarusian",kazakh:"kazakh",cebuano:"cebuano",malayalam:"malayalam",gujarati:"gujarati",yiddish:"yiddish","signlanguage(american)":"signlanguage(american)",kyrgyz:"kyrgyz",xhosa:"xhosa",sanskrit:"sanskrit",sicilian:"sicilian",telugu:"telugu",tokipona:"tokipona","arabic(maghrebi)":"arabic(maghrebi)",galician:"galician","arabic(gulf)":"arabic(gulf)","blackfoot(niitsi)":"blackfoot(niitsi)",wolof:"wolof",hausa:"hausa","ladino(judeospanish)":"ladino(judeospanish)",javanese:"javanese","signlanguage(british)":"signlanguage(british)",akantwi:"akantwi",jamaicancreole:"jamaicancreole",bulgarian:"bulgarian"}).config(["$stateProvider",function(a){a.state("premium",{url:"/premium",templateUrl:"/views/page/premium.html",controller:["$scope",function(a){a.meta={count:2}}],data:{title:function(){return"PU001".translate()}}}).state("landing",{url:"/home",templateUrl:"/views/page/landing.html",controller:["$scope","$modal","$state","$translate","Restangular","GlobalObject","$log",function(a,b,c,d,e,f,g){a.currentUser&&c.go("dashboard"),a.goToTeachers=function(){c.go("teachers")},a.japaneseMarketContainerStyle=function(){return"ja"===f.lang.mo?!0:!1},a.openVideoModal=function(){b.open({size:"",templateUrl:"/views/component/video.html",windowClass:"video-modal",controller:["$scope","GlobalObject","$log",function(a,b,c){var d={"en-us":"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",ru:"https://www.youtube.com/embed/Xqzp67trAAE?rel=0",pt:"https://www.youtube.com/embed/dgGogeIku98?rel=0",es:"https://www.youtube.com/embed/xFhJ48Jt59B0?rel=0",it:"https://www.youtube.com/embed/jOHzObKGrcQ?rel=0",ja:"https://www.youtube.com/embed/u15yq5w3l70?rel=0",de:"https://www.youtube.com/embed/hfHrmGg3ncE?rel=0",fr:"https://www.youtube.com/embed/CFSzoPrBF90?rel=0","zh-tw":"https://www.youtube.com/embed/OPT-D2v8f9w?rel=0","zh-cn":"https://www.youtube.com/embed/OPT-D2v8f9w?rel=0",cn:"https://dn-betaitalki.qbox.me/italki.mp4",ko:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",ar:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",cs:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",nl:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",eo:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",pl:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0",vi:"https://www.youtube.com/embed/DmcYaLPvDXw?rel=0"},e="https://obxnwt7gf.qnssl.com",f={};angular.forEach(["zh-cn","zh-tw","en","ru","pt","ja","es","fr","it","de"],function(a){f[a]="{0}/italki_{1}.mp4".format(e,"zh-tw"==a||"zh-cn"==a?"cn":a)}),a.videoUrl=function(){return"cn"===KP.COUNTRY?f[b.lang.mo]||f.en:d[b.lang.mo]}}]})},a.langArr=KP.LANG;var h=KP.LANG[0],i=d.use();if(i)for(var j in KP.LANG)if(KP.LANG[j].flag==i){h=KP.LANG[j];break}f.lang=h,a.GlobalObject=f,a.useLang=function(a){f.lang=a,d.use(a.flag)},a.$watch("currentUser",function(b){if(b&&b.locale)for(var c in KP.LANG){var d=KP.LANG[c];if(d.flag==b.locale.replace("-","_")){a.useLang(d);break}}}),a.teachersBylan=[{lan:"english",ct:"us",ctn:"U.S.A",p:"",t:"",c:4},{lan:"english",ct:"gb",ctn:"U.K",p:"",t:"",c:4},{lan:"spanish",p:"",t:"",c:4},{lan:"french",p:"",t:"",c:3},{lan:"german",p:"",t:"",c:3},{lan:"chinese",p:"",t:"",c:3},{lan:"japanese",p:"",t:"",c:3},{lan:"portuguese",p:"",t:"",c:2,c15:1},{lan:"arabic",p:"",t:"",c:2,c15:1},{lan:"italian",p:"",t:"",c:2,c15:1},{lan:"russian",p:"",t:"",c:2,c15:1},{lan:"korean",p:"",t:"",c:2,c15:1},{lan:"turkish",p:"",t:"",c:2},{lan:"serbian",p:"",t:"",c:2},{lan:"hebrew",p:"",t:"",c:2},{lan:"hindi",p:"",t:"",c:2},{lan:"dutch",p:"",t:"",c:2},{lan:"polish",p:"",t:"",c:2}],a.getimage=function(a){var b="/static/images/static/hp-",c=".jpg";return a.ct?b+a.lan+"_"+a.ct+c:b+a.lan+c},a.isLoaded=!1,e.one("home/teacher/statistics").get().then(function(b){angular.forEach(a.teachersBylan,function(a){var c=a.lan;a.ct&&(c+=a.ct),b.data[c]&&(a.p=b.data[c][0],a.t=b.data[c][1])}),a.isLoaded=!0}),a.gourl1=function(a){c.transitionTo("teachersViaLanguage",{teach:a})},a.getUrlAddress=function(a){return a.ct?"/teachers/"+a.lan+"/"+a.ct.toUpperCase():"/teachers/"+a.lan},a.gourl=function(a){a.ct?c.transitionTo("teachersViaLanguageAndFrom",{teach:a.lan,from:a.ct.toUpperCase()}):c.transitionTo("teachersViaLanguage",{teach:a.lan})},a.olan="",e.one("teacher/languages?is_home=1").get().then(function(b){var c=[];angular.forEach(KP.LANSEL,function(a){angular.forEach(b.data,function(b){return b==a.v?(c.push(b),!0):void 0})}),a.lans=c,a.lans.length>0?a.olan=a.lans[0]:a.olan=""}),a.lans=[]}],data:{title:"C5003"}}).state("about",{parent:"kp",url:"/about",templateUrl:"/views/page/about.html",data:{title:function(){return"M0017".translate()}}}).state("press",{parent:"kp",url:"/press",templateUrl:"/views/page/press.html",data:{title:function(){return"M0033".translate()}}}).state("refugee-outreach",{url:"/refugee-outreach",templateUrl:"/views/page/refugee-outreach.html",title:"Vassar Outreach",controller:["$scope","$window","$log","$timeout","$location",function(a,b,c,d,e){var f=function(){b.addthis?(window.addthis_share&&(window.addthis_share.url=e.absUrl()),KP.initAddthisFlag||(addthis.init(),KP.initAddthisFlag=1),KP.initAddthisFlag&&d(function(){b.addthis_share.title="Changing Roles: How Refugee Teachers Are Helping University Students Learn Arabic",addthis.toolbox(".addthis_toolbox")},1e3)):d(f,500)};f();var g=function(){var b=document.getElementsByTagName("footer")[0].clientHeight,c=$(document).height()-$(window).height()-$(window).scrollTop();b>c&&(a.myInterval=6e3),a.$apply()};angular.element(b).bind("scroll",g),a.$on("$destroy",function(){c.debug("italki scroll and fixed -> $destroy scroll"),$(b).unbind("scroll",g)});var h=a.slides=[];h.push({image:"/static/images/static/ro_hassam.png",name:"Hussam",year:"teaches Arabic",text:"When I joined italki and started teaching online I loved it from the very beginning. I find it something amazing. It gives you the chance to speak to native speakers while you are in your home. I love it so much and think it’s very helpful, connecting people all over the world in an easy way."}),h.push({image:"/static/images/static/ro_abdullah.png",name:"Abdullah",year:"teaches Arabic",text:"What italki offered me is new students I have never met, from another continent, who want to learn my language. I feel sometimes emotional. It’s valuable for me. I care now. I care about the language. I care about my students."}),h.push({image:"/static/images/static/ro_rahaf.png",name:"Rahaf",year:"teaches Arabic",text:"At the beginning teaching online was a new experience for me and had a lot of challenges, but now I’m used to it and I am enjoying teaching Arabic on italki. To me teaching online means a lot because I am helping people connect with each other across the globe and make it possible for them to share ideas."})}]}).state("kids-learn",{url:"/kids-learn",templateUrl:"/views/page/kids-learn.html",title:"Kids Learn"}).state("jobs",{parent:"kp",url:"/jobs",templateUrl:"/views/page/jobs.html"}).state("instructorterms",{parent:"kp",url:"/instructorterms",templateUrl:"/views/page/instructorterms.html",data:{title:function(){return"M0502".translate()}}}).state("contactus",{parent:"kp",url:"/contactus",templateUrl:"/views/page/contactus.html",data:{title:function(){return"M0016".translate()}}}).state("teachyourself",{parent:"kp",url:"/languagehacking",templateUrl:"/views/page/teachyourself.html"}).state("terms",{parent:"kp",url:"/terms",templateUrl:"/views/page/terms.html"}).state("tos",{parent:"kp",url:"/tos",templateUrl:"/views/page/tos.html",data:{title:function(){return"M0500".translate()}}}).state("tos2",{parent:"kp",url:"/tos2",templateUrl:"/views/page/tos2.html",data:{title:function(){return"M0014".translate()}}}).state("privacy",{parent:"kp",url:"/privacy",templateUrl:"/views/page/privacy.html",data:{title:function(){return"M0501".translate()}}}).state("tosupdate",{parent:"kp",url:"/tos-update",templateUrl:"/views/page/tos-update.html"}).state("communitypolicy",{parent:"kp",url:"/communitypolicy",templateUrl:"/views/page/communitypolicy.html"}).state("copyrightpolicy",{parent:"kp",url:"/copyrightpolicy",templateUrl:"/views/page/copyrightpolicy.html"}).state("paymentterms",{parent:"kp",url:"/paymentterms",templateUrl:"/views/page/paymentterms.html"}).state("whatisitalki",{parent:"kp",url:"/what-is-italki",templateUrl:"/views/page/what-is-italki.html"}).state("howitworks",{parent:"kp",url:"/how-it-works",templateUrl:"/views/page/how-it-works.html"}).state("redeem",{url:"/redeem",templateUrl:"/views/page/redeem.html",controller:["$scope","TeacherApplyService","Restangular","RedeemCodeService",function(a,b,c,d){b.getLoginPromise().then(function(a){a&&d.open()})}]}).state("oet",{url:"/p/oet",templateUrl:"/views/page/oet.html"}).state("challenge",{url:"/languagechallenge?userid",templateUrl:"/views/languagechallenge/challenge.html",data:{title:"Language Challenge - italki"},controllerAs:"ctrl",controller:["$scope","$rootScope","TeacherApplyService","Teacher","$stateParams","$translate","smaller_language","FacebookOpenGraphManager","Restangular","$timeout","$window","$log","LanguageChallenge","$state","Facebook","$modal","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=f.instant;this.facebookShare=function(){o.ui({method:"feed",link:"{0}/languagechallenge?userid={1}".format(window.location.origin,b.currentUser.id)})},a.twitterShare=function(a){a.preventDefault();var c=window.location.origin+"/languagechallenge?userid="+b.currentUser.id,d=window.open("https://twitter.com/intent/tweet?original_referer="+c+"&url="+c+"&type=share","twitter-popup","height=350,width=600");return d.focus&&d.focus(),!1},e.userid&&m.share(e.userid).then(function(a){if(a){var b=a.data,c=r("LC522").format(b.nickname,b.completed_minutes/60),d=r("LC523"),e=r("LC525");h.update({url:q.$$absUrl,title:c,description_facebook:d,description_switter:e,switter_card:"summary_large_image",image:"https://www.italki.com/static/images/languagechallenge/language_share.jpg"})}});var s=new Date;a.getMonthDay=s.getDate();var t=moment.utc([2018,2,1,0,0,0,0]).unix(),u=moment().utc().unix(),v=t-u;a.residueDay=Math.floor(v/86400),a.twitterUrl=q.$$absUrl,m.peopleNumber().get().then(function(b){a.peopleNumber=b.data.count}),m.getLan().then(function(b){var c=b.data.user_languages,d=[];c.length>0&&angular.forEach(c,function(a){angular.forEach(angular.copy(KP.LANSEL),function(b){a==b.v&&d.push(b)})}),a.leaderboardLan=d}),m.getCountry().then(function(b){var c=b.data.user_countries,d=[];c.length>0&&angular.forEach(angular.copy(KP.COUNTRRY_ARR),function(a){angular.forEach(c,function(b){b==a.v&&d.push(a)})}),a.leaderboardCountry=d});var w=[{t:0,v:"english",flag:"en-us"},{t:0,v:"chinese",flag:"zh-cn"},{t:0,v:"french",flag:"fr"},{t:0,v:"spanish",flag:"es"},{t:0,v:"portuguese",flag:"pt"},{t:0,v:"german",flag:"de"},{t:0,v:"japanese",flag:"ja"},{t:0,v:"korean",flag:"ko"},{t:0,v:"arabic",flag:"ar"},{t:0,v:"hindi",flag:"hi"},{t:0,v:"italian",flag:"it"},{t:0,v:"russian",flag:"ru"},{t:1,v:"dutch",flag:"nl"},{t:1,v:"hebrew",flag:""},{t:1,v:"turkish",flag:"tr"},{t:1,v:"polish",flag:"pl"},{t:1,v:"swedish",flag:"sv"},{t:1,v:"chinese(cantonese)",flag:""},{t:1,v:"persian(farsi)",flag:"fa"},{t:1,v:"indonesian",flag:"id"},{t:1,v:"greek",flag:"el"},{t:1,v:"norwegian",flag:"no"},{t:1,v:"danish",flag:"da"},{t:1,v:"hungarian",flag:"hu"},{t:1,v:"romanian",flag:"ro"},{t:1,v:"thai",flag:"th"},{t:1,v:"czech",flag:"gu"},{t:1,v:"vietnamese",flag:"vi"},{t:1,v:"arabic(egyptian)",flag:"ar-eg"},{t:1,v:"filipino(tagalog)",flag:""},{t:1,v:"finnish",flag:"fi"},{t:1,v:"arabic(modernstandard)",flag:""},{t:1,v:"serbian",flag:"sr"},{t:1,v:"arabic(levantine)",flag:"ar-lb"},{t:1,v:"ukrainian",flag:"uk"}],x=angular.copy(KP.LANSEL);angular.forEach(w,function(a){angular.forEach(x,function(b,c){a.v==b.v&&x.splice(c,1)})}),d.getTeachLans().get().then(function(b){var c=[];angular.forEach(x,function(a){angular.forEach(b.data,function(b){return a.v==b?(c.push({v:b,name:r(b)}),!1):void 0})}),a.lanSelObj=c}),a.goFindTeacher=function(a){n.go("teachersViaLanguage",{teach:a.v,type:1})},m.getChallenge().then(function(b){a.lanData=b.data,a.has_subscribe=a.lanData.has_subscribe,a.has_finish_address=a.lanData.has_finish_address,a.template_name=a.lanData.template_name}),a.submitFlag=!1,a.sumbitEmail=function(b){return a.submitFlag=!0,b?m.subscribePost().post({email:b}).then(function(b){return a.has_subscribe=!0,a.errorMsg=!1,KP.API.SUCC},function(b){return"Subscribed"==b.type&&(a.errorMsg=!0),b}):void 0},a.filter={top_list:9,my_rank:!0,my_info:!0,top_language_list:"",top_country_list:""};var y=function(b,c){return"language"==c?(a.filter.top_country_list="",a.filter.top_language_list=b.v):"country"==c?(a.filter.top_language_list="",a.filter.top_country_list=b.v):(a.filter.top_country_list="",a.filter.top_language_list=""),a.open=!1,m.rank().get(a.filter).then(function(b){var d=b.data;"language"==c?a.rankObj=d.top_language_list:"country"==c?a.rankObj=d.top_country_list:"3b2"==a.template_name||"3b1"==a.template_name||"2b"==a.template_name&&0!=d.my_rank_list.length?a.rankObj=d.my_rank_list:a.rankObj=d.top_list,a.my_info=d.my_info})},z=function(){angular.isUndefined(a.template_name)?j(function(){z()},100):(("3b2"==a.template_name||"3b1"==a.template_name||"2b"==a.template_name)&&(a.filter.my_rank=!0),y())};z(),a.open=!1,a.openFilter=function(){a.open=!a.open},a.allFilter=function(){y()},a.languageFilter=function(a){y(a,"language")},a.countryFilter=function(a){y(a,"country")},a.goAllRank=function(){angular.isDefined(a.filter.top_country_list)&&""!=a.filter.top_country_list?n.go("challengeleaderboard",{country:a.filter.top_country_list}):angular.isDefined(a.filter.top_language_list)&&""!=a.filter.top_language_list?n.go("challengeleaderboard",{language:a.filter.top_language_list}):n.go("challengeleaderboard")},c.getLoginPromise().then(function(b){if(b){var c=function(){angular.isUndefined(a.lanData)&&j(function(){c()},100)};c(),m.userSession().then(function(b){var c=b.data.sessions;if(a.completedMin=0,a.smallerlanguageObj=0,c.length>0){var e=0,f=0,g=[];c=_.sortBy(c,"start_time");for(var h in c){e+=c[h].completed_minutes,c[h].scheduled_minutes=e;for(var i in a.lanSelObj)c[h].language==a.lanSelObj[i].v&&g.push(c[h])}if(g.length>0)for(var j in g)f+=g[j].completed_minutes;a.smallerlanguageObj=g,a.smallLanMin=f,a.completedMin=c[c.length-1].scheduled_minutes}d();var k=a.completedMin/60;k>=12&&16>k&&(a.badgeHour=12),k>=16&&19>k&&(a.badgeHour=16),k>=19&&20>k&&(a.badgeHour=19),k>=20&&(a.badgeHour=20),k>=12&&a.smallerlanguageObj.length>0&&(a.smallBadge=!0)}),a.progressMyCompleted=0,a.progressSmallLan=0;var d=function(){var b=a.completedMin/60,c=a.smallLanMin/60,d=2/3*100,e=1/3*100,f=d/20,g=e/180;c>20?a.progressSmallLan=20*f+g*(c-20):a.progressSmallLan=f*c,b>20?a.progressMyCompleted=20*f+g*(b-20):a.progressMyCompleted=f*b};a.subscribe={email:""},a.subMailing={full_name:"",country:"",city:"",zip_code:"",address_detail:"",phone_number:"",tshirt_size:""},a.subMailingAddress=function(){return null!=a.subMailing.state&&angular.extend(a.subMailing,{state:a.subMailing.state}),i.one("languagechallenge").all("mailingaddress").post(a.subMailing).then(function(){return a.has_finish_address=!0,KP.API.SUCC})};var e=function(){var b=document.getElementsByTagName("footer")[0].clientHeight,c=$(document).height()-$(window).height()-$(window).scrollTop();b>c&&(a.myInterval=6e3),a.$apply()};angular.element(k).bind("scroll",e),a.$on("$destroy",function(){l.debug("italki scroll and fixed -> $destroy scroll"),$(k).unbind("scroll",e)});var f=a.slides=[];f.push({image:"/static/images/languagechallenge/lc_test_photo1.png",name:"Ako",year:"2014",text:"LC323"}),f.push({image:"/static/images/languagechallenge/lc_testimonials_photo2.png",name:"Victor",year:"2015",text:"LC321"}),f.push({image:"/static/images/languagechallenge/lc_testimonials_photo3.png",name:"Nick",year:"2016",text:"LC322"})}})}]}).state("onboarding",{url:"/onboarding",templateUrl:"/views/page/groupD.html",controller:["$scope","$rootScope","$translate","$log","$timeout","Account","DataLayerService","Restangular","localStorageService","$state","UserService","TeacherApplyService","GlobalObject",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=function(){a.lanset=0,a.user=b.currentUser;var e="onboarding.fb",l=i.cookie.get(e),n="onboarding.we",o=i.cookie.get(n),p="onboarding.teacher",q="onboarding.group_name",r=i.cookie.get(p);a.isGroupG="g"===i.cookie.get(q),a.learning={level:1},r&&(a.teacherOnboarding=1),l&&(b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"}),a.User_obj=angular.extend({password:"",email:""},l),angular.extend(a.User_obj,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign}),a.doneFb=function(){return a.unable=1,k.loginViaFBNoEmail(a.User_obj).then(function(){a.user=b.currentUser;var c="onboarding.group_name",d=i.cookie.get(c);"c"==d||"b"===d?(j.go("dashboard"),i.cookie.remove(e,l)):(a.step="groupD1",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/learninglanguage",title:"Onboarding - Learning Language"}),a.step1(),j.go("onboarding"),i.cookie.remove(e,l))},function(b){a.Mailerror=b,a.unable=0})}),o&&(b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"}),a.Wechat_User_obj=angular.extend({nickname:"",password:"",email:""},o),angular.extend(a.Wechat_User_obj,{ref:KP.REF.userId,http_referer:KP.REF.url,landing_page:KP.REF.landingPage,utm_source:KP.REF.utm_source,utm_medium:KP.REF.utm_medium,utm_campaign:KP.REF.utm_campaign}),a.doneWechat=function(){a.wechatUnable=1,k.loginWechat(a.Wechat_User_obj).then(function(c){a.user=b.currentUser;var d="onboarding.group_name",e=i.cookie.get(d);"c"==e||"b"===e?(j.go("dashboard"),i.cookie.remove(n,o)):(a.step="groupD1",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/learninglanguage",title:"Onboarding - Learning Language"}),a.step1(),j.go("onboarding"),i.cookie.remove(n,o))},function(b){a.wechatUnable=0,a.Mailerror=b})}),a.step1=function(){var d=navigator.appName;a.languages=angular.copy(KP.LANSEL);var e=c.instant;if("Netscape"==d){var h=(navigator.language||navigator.browserLanguage).toLowerCase();a.languages=angular.copy(KP.LANSEL),angular.forEach(a.languages,function(b,d){if(b.name=e(b.v),h==b.flag)a.browserLanguage=b,a.defaultLan=b.v,a.isGroupG||a.languages.splice(d,1);else{a.langArr=angular.copy(KP.LANG);var f=KP.LANG[0],g=c.use();if(g)for(var i in KP.LANG)if(KP.LANG[i].flag==g){f=KP.LANG[i];break}m.lang=f,angular.forEach(a.languages,function(b,c){b.name=e(b.v),m.lang.mo==b.flag&&(a.isGroupG||a.languages.splice(c,1),a.defaultLan=b.v,a.browserLanguage=b)})}})}else var h=navigator.userLanguage;a.user&&a.user.language_obj_s&&1==a.user.language_obj_s.length&&(a.lanset="1",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/location",title:"Onboarding - Location"})),a.lans=angular.copy(KP.LANSEL),a.selObj={speak_language:"",learn_language:""},a.speakLanguage={selected:{}},a.defaultLan&&(a.isGroupG?(a.selObj.speak_language=a.browserLanguage.v,a.speakLanguage.selected=a.browserLanguage):a.selObj.speak_language=a.defaultLan),a.changeSpeakLanguage=function(){a.selObj.speak_language=a.speakLanguage.selected.v},a.recommendedLanguages=function(a){return a.t?"Other":"Popular"},a.doneD1=function(c){var d=angular.copy(KP.COUNTRRY_ARR);angular.forEach(d,function(a){a.name=e(a.l)}),a.countries=d,a.user.timezone_new=a.user.timezone,a.user.living_country_id_new=a.user.living_country_id;var h=1;if(a.firstCheckTime=1,a.country={selected:{}},angular.forEach(a.countries,function(b,c){b.v===a.user.living_country_id&&(a.country.selected=a.countries[c])}),a.checkCTZones=function(){if(!a.user.living_country_id_new)return a.user.living_country_id_new=a.user.living_country_id,h=0,void(a.showNotMatch=1);var b=a.user.living_country_id_new,c=KP.ct_zone[b].zones,d=a.user.timezone_new,e="",f=1;a.isGroupG&&(b=a.country.selected.v,c=KP.ct_zone[b].zones),angular.forEach(KP.timezones,function(a){return a.v==d?(e=a.vl,!0):void 0}),angular.forEach(c,function(a){return a==e?(f=0,!0):void 0}),a.showNotMatch=f,f&&h&&!a.isGroupG&&(a.user.living_country_id_new=null),h=0},a.timezone={selected:{}},a.checkTime=function(){!a.firstCheckTime&&a.isGroupG&&(a.user.timezone_new=a.timezone.selected.v);var b=moment(),c=b.clone(),d="",e=a.user.timezone_new;if(a.timezoneMatch=0,angular.forEach(KP.timezones,function(b){return b.v==e?(d=b.vl,a.timezone.selected=b,!0):void 0}),c.tz(d),a.m1=b,a.m2=c,b.format()==c.format()&&(a.timezoneMatch=1),a.firstCheckTime&&!a.timezoneMatch){a.user.living_country_id_new=null;for(var h=0;h<KP.timezones.length;h++)if(c.tz(KP.timezones[h].vl),b.format()==c.format()){a.user.timezone_new=KP.timezones[h].v,a.timezoneMatch=1;break}}a.done_ctzones=function(){a.user.timezone_new&&a.user.living_country_id_new&&(a.do2Flag_2=!0,f.setCountryTimezone().post({timezone:a.user.timezone_new,living_country_id:a.user.living_country_id_new}).then(function(b){b.data.success&&(a.user.timezone=a.user.timezone_new,a.user.living_city_id=a.user.living_city_id_new,a.currentUser.register_status=3,delete a.user.timezone_new,delete a.user.living_city_id_new,a.lanset="2",g.updateUser({location:a.user.living_country_id_new.translate()}))},function(b){a.do2Flag_2=!1}))},a.checkCTZones(),a.firstCheckTime=0},KP.timezones?(a.timezones=KP.timezones,a.checkTime()):f.getTimezones().then(function(b){a.timezones=b.data,KP.timezones=b.data,a.checkTime()}),a.getTeacherCountry=function(){a.teacherObj={teacher_cou:[]},a.selObj.speak_language&&("english"==a.selObj.speak_language?"spanish"==a.selObj.learn_language&&(a.teacherObj.teacher_cou=[{v:"AR",l:"Argentina"},{v:"CO",l:"Colombia"},{v:"MX",l:"Mexico"},{v:"ES",l:"Spain"},{v:"VE",l:"Venezuela"},{v:"OB208",l:"I do not have a preference"}]):"portuguese"==a.selObj.speak_language||"chinese"==a.selObj.speak_language||"spanish"==a.selObj.speak_language||"russian"==a.selObj.speak_language||"french"==a.selObj.speak_language?"english"==a.selObj.learn_language&&(a.teacherObj.teacher_cou=[{v:"CA",l:"Canada"},{v:"GB",l:"United Kingdom"},{v:"US",l:"United States"},{v:"OB208",l:"I do not have a preference"}]):a.teacherObj.teacher_cou=[])},c){a.do2Flag=!0;var i={language:a.selObj.speak_language,level:[7],is_learning:[0],is_primary:[0]};f.saveLans(i).then(function(c){c.data.success&&(a.lanset="1",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/location",title:"Onboarding - Location"}))},function(b){a.do2Flag=!1})}},a.doneD11=function(c){a.done_ctzones(),a.step="groupD2",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/learninglanguage",title:"Onboarding - Learning Language"}),a.groupD2()},a.selObj1={findT:"",findF:""},a.showOne=!1,a.showTwo=!1},a.groupD2=function(){a.studentObj={learnLan:[]};var d=c.instant;a.user=b.currentUser,a.selObj||(a.selObj={speak_language:""},angular.forEach(b.currentUser.language_obj_s,function(b){7==b.level&&(a.selObj.speak_language=b.language)})),a.selObj.speak_language&&("english"==a.selObj.speak_language?"GB"==a.user.living_country_id?a.studentObj.learnLan=[{v:"spanish"},{v:"french"},{v:"japanese"},{v:"german"},{v:"italian"}]:"AU"==a.user.living_country_id?a.studentObj.learnLan=[{v:"japanese"},{v:"spanish"},{v:"french"},{v:"chinese"}]:"BR"==a.user.living_country_id?a.studentObj.learnLan=[{v:"portuguese"}]:"VN"==a.user.living_country_id?a.studentObj.learnLan=[{v:"vietnamese"}]:a.studentObj.learnLan=[{v:"spanish"},{v:"french"},{v:"japanese"},{v:"korean"},{v:"german"}]:"portuguese"==a.studentObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"spanish"},{v:"french"},{v:"german"},{v:"japanese"}]:"russian"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"german"},{v:"french"},{v:"spanish"}]:"spanish"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"french"},{v:"japanese"}]:"chinese"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"japanese"},{v:"french"},{v:"german"},{v:"spanish"}]:"arabic"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"german"},{v:"french"}]:"vietnamese"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"japanese"},{v:"korean"},{v:"chinese"}]:"italian"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"spanish"},{v:"german"},{v:"french"}]:"french"==a.selObj.speak_language?a.studentObj.learnLan=[{v:"english"},{v:"spanish"},{v:"japanese"}]:a.studentObj.learnLan=[{v:"english"}]),a.learninglan=angular.copy(KP.LANSEL);var e=angular.copy(a.studentObj.learnLan),f=[];if(e[e.length]={v:a.selObj.speak_language},angular.forEach(e,function(b,c){angular.forEach(a.learninglan,function(c,e){if(c.v==b.v){var g=a.learninglan.splice(e,1);a.isGroupG&&(f=f.concat(g))}c.name=d(c.v)})}),a.newLearninglan=[],a.isGroupG){f.pop(),angular.forEach(f,function(a){a.t=0});var g=a.learninglan.slice();angular.forEach(g,function(a){a.t=1}),a.newLearninglan=f.concat(g)}a.nativeLanguage={selected:a.newLearninglan[0]},a.selObj.learn_language=a.newLearninglan[0].v,a.changeNativeLanguage=function(){a.selObj.learn_language=a.nativeLanguage.selected.v},a.radioChecked=function(b){"1"==b?a.optionLearn=!1:"2"==b&&(a.optionLearn=!0)}},a.doneD2=function(){if(a.do3Flag=!0,a.selObj.learn_language)var b={language:[a.selObj.speak_language,a.selObj.learn_language],level:[7,Number(a.learning.level)],is_learning:[0,1],is_primary:[0,1]};f.saveLans(b).then(function(b){if(b.data.success){g.updateUser({learningLanguage:a.selObj.learn_language});var c="onboarding.teacher",d=i.cookie.get(c);d?a.step=5:a.step="groupD3"}},function(b){a.do3Flag=!1})},a.doneD3=function(){a.step="groupD4",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/provscom",title:"Onboarding - Pro vs Community"}),a.selTeacher={teacher_pro:"",find_partner:""},a.user=b.currentUser;var c={prefer_pro:a.selTeacher.teacher_pro};_.merge(a.selObj,c),a.selObj.learn_language||(a.selObj.learn_language=b.currentUser.learning_language,angular.forEach(b.currentUser.language_obj_s,function(b){
7==b.level&&(a.selObj.speak_language=b.language)}))},a.doneD4=function(){a.do4Flag=!0,h.one("account/contact-permission/onboarding").post("",{find_teacher:1}).then(function(c){c.data.success&&(a.currentUser.find_teacher=1,a.selObj.prefer_pro=a.selTeacher.teacher_pro,a.step="groupD5",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/languageexchange",title:"Onboarding - Language Exchange"}))})},a.doneD5=function(){a.do5Flag=!0,h.one("account/contact-permission/onboarding").post("",{allow_listing:a.selTeacher.find_partner}).then(function(c){if(c.data.success)if(a.getTeacherCountry(),0==a.teacherObj.teacher_cou.length){a.step="groupD7",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/tags",title:"Onboarding - Tags"});var d={tag:"",is_last:""};_.merge(a.selObj,d)}else{a.step="groupD6",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/teachercountry",title:"Onboarding - Teacher Country"});var e={teacher_country:""};_.merge(a.selObj,e)}},function(b){a.do5Flag=!1})},a.doneD6=function(){a.do6Flag=!0,a.selObj.teacher_country=a.selTeacher.teacher_cou,"OB208"==a.selObj.teacher_country?delete a.selObj.teacher_country:"5"==a.selObj.tag&&delete a.selObj.tag,a.step="groupD7",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/tags",title:"Onboarding - Tags"});var c={tag:"",is_last:""};_.merge(a.selObj,c)},a.doneD7=function(){a.do7Flag=!0,a.selObj.tag=a.selTeacher.teacher_tags,a.selObj.is_last=1,"OB208"==a.selObj.teacher_country?delete a.selObj.teacher_country:"5"==a.selObj.tag&&delete a.selObj.tag;angular.copy(a.selObj);return h.one("account/onboardingtest/check").get(a.selObj).then(function(c){b.currentUser.register_status="4";var d="groupD.search1";i.cookie.set(d,c.data.filter_condition),a.step=4},function(){a.do7Flag=!1})},a.doneNotFindTeacher=function(){b.currentUser.register_status="4",h.one("account/contact-permission").post("",{find_teacher:"0",allow_listing:"1"}).then(function(b){b.data.success&&(a.step="notFindTeacher",k.autoLogin())})},a.done2=function(){angular.isDefined(a.email_verfied)&&4==b.currentUser.register_status&&(b.currentUser.register_status=255),h.one("account/onboardingtest/check").get({get_filters:1}).then(function(a){var b=a.data,c="groupD.search1";i.cookie.set(c,b),j.go("teachers")},function(a){d.error(a)})},a.doneNotFindTeacher2=function(){angular.isDefined(a.email_verfied)&&4==b.currentUser.register_status?b.currentUser.register_status=255:j.go("teachers")},a.done3=function(){angular.isDefined(a.email_verfied)&&4==b.currentUser.register_status?b.currentUser.register_status=255:(b.currentUser.register_status=4,h.one("account/contact-permission").post("",{find_teacher:"0",allow_listing:"0"}).then(function(a){if(a.data.success){k.autoLogin();var b="onboarding.teacher";i.cookie.remove(b),j.go("teacherApply.step1")}}))},a.getTeacherCountry=function(){a.teacherObj={teacher_cou:[]},a.selObj.speak_language&&("english"==a.selObj.speak_language?"spanish"==a.selObj.learn_language&&(a.teacherObj.teacher_cou=[{v:"AR",l:"Argentina"},{v:"CO",l:"Colombia"},{v:"MX",l:"Mexico"},{v:"ES",l:"Spain"},{v:"VE",l:"Venezuela"},{v:"OB208",l:"I do not have a preference"}]):"portuguese"==a.selObj.speak_language||"chinese"==a.selObj.speak_language||"spanish"==a.selObj.speak_language||"russian"==a.selObj.speak_language||"french"==a.selObj.speak_language?"english"==a.selObj.learn_language&&(a.teacherObj.teacher_cou=[{v:"CA",l:"Canada"},{v:"GB",l:"United Kingdom"},{v:"US",l:"United States"},{v:"OB208",l:"I do not have a preference"}]):a.teacherObj.teacher_cou=[])};var q="onboarding.group_name",s=i.cookie.get(q);!b.currentUser||"c"!=s&&"b"!==s||r?b.currentUser&&"f"==s||"g"==s||r?b.currentUser&&"2"==b.currentUser.register_status?1==b.currentUser.no_password?(a.step="1",b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/setthirdpartyemail",title:"Onboarding - Set or confirm third-party email"}),a.emailDiv=0,a.user=b.currentUser,a.NewObj={password:"",email:a.user.email},a.doneFb1=function(){return a.doPwd=!0,k.loginViaFBEmailAndPassword(a.NewObj).then(function(){return a.NewObj.email==b.currentUser.email&&(a.email_verfied=1),d.debug("email Group D :::",a.email_verfied),b.currentUser.no_password=0,a.step="groupD1",a.step1(),KP.API.SUCC},function(b){a.Mailerror=b})}):(b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/learninglanguage",title:"Onboarding - Learning Language"}),a.step1(),a.lanset=0,a.step="groupD1"):b.currentUser&&"3"==b.currentUser.register_status?(b.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/onboarding/learninglanguage",title:"Onboarding - Learning Language"}),a.step1(),a.lanset=0,a.step="groupD1"):j.go("dashboard"):l?a.step="fb":o&&(a.step="we"):j.go("dashboard")};l.getLoginPromise().then(function(a){n()}),a.checkEmail=function(){a.myFormFb.mail=a.myFormFb.fb_email.$invalid},a.setPassword=function(){a.myFormFb.password=a.myFormFb.fb_password.$invalid},a.checkEmail1=function(){a.myFormFb1.mail=a.myFormFb1.fb_email1.$invalid},a.setPassword1=function(){a.myFormFb1.password=a.myFormFb1.fb_password1.$invalid},a.setWechatPassword=function(){a.myFormWe.password=a.myFormWe.wechat_password.$invalid},a.checkWechatMail=function(){a.myFormWe.mail=a.myFormWe.wechat_email.$invalid}}]}).state("challengeleaderboard",{url:"/languagechallengeleaderboard?country&language",templateUrl:"/views/languagechallenge/language.challenge.leaderboard.html",controller:["$scope","TeacherApplyService","LanguageChallenge","$stateParams",function(a,b,c,d){a.open=!1,a.openFilter=function(){a.open=!a.open};var e=[{t:0,v:"english",flag:"en-us"},{t:0,v:"chinese",flag:"zh-cn"},{t:0,v:"french",flag:"fr"},{t:0,v:"spanish",flag:"es"},{t:0,v:"portuguese",flag:"pt"},{t:0,v:"german",flag:"de"},{t:0,v:"japanese",flag:"ja"},{t:0,v:"korean",flag:"ko"},{t:0,v:"arabic",flag:"ar"},{t:0,v:"hindi",flag:"hi"},{t:0,v:"italian",flag:"it"},{t:0,v:"russian",flag:"ru"},{t:1,v:"dutch",flag:"nl"},{t:1,v:"hebrew",flag:""},{t:1,v:"turkish",flag:"tr"},{t:1,v:"polish",flag:"pl"},{t:1,v:"swedish",flag:"sv"},{t:1,v:"chinese(cantonese)",flag:""},{t:1,v:"persian(farsi)",flag:"fa"},{t:1,v:"indonesian",flag:"id"},{t:1,v:"greek",flag:"el"},{t:1,v:"norwegian",flag:"no"},{t:1,v:"danish",flag:"da"},{t:1,v:"hungarian",flag:"hu"},{t:1,v:"romanian",flag:"ro"},{t:1,v:"thai",flag:"th"},{t:1,v:"czech",flag:"gu"},{t:1,v:"vietnamese",flag:"vi"},{t:1,v:"arabic(egyptian)",flag:"ar-eg"},{t:1,v:"filipino(tagalog)",flag:""},{t:1,v:"finnish",flag:"fi"},{t:1,v:"arabic(modernstandard)",flag:""},{t:1,v:"serbian",flag:"sr"},{t:1,v:"arabic(levantine)",flag:"ar-lb"},{t:1,v:"ukrainian",flag:"uk"}],f=angular.copy(KP.LANSEL);angular.forEach(e,function(a){angular.forEach(f,function(b,c){a.v==b.v&&f.splice(c,1)})}),a.lanSelObj=f,c.getLan().then(function(b){var c=b.data.user_languages,d=[];c.length>0&&angular.forEach(c,function(a){angular.forEach(angular.copy(KP.LANSEL),function(b){a==b.v&&d.push(b)})}),a.leaderboardLan=d}),c.getCountry().then(function(b){var c=b.data.user_countries,d=[];c.length>0&&angular.forEach(angular.copy(KP.COUNTRRY_ARR),function(a){angular.forEach(c,function(b){b==a.v&&d.push(a)})}),a.leaderboardCountry=d}),a.filter={top_country_list:"",top_language_list:"",top_list:100,my_rank:!1,my_info:!1};var g=function(b,d){return"language"==d?(a.filter.top_country_list="",a.filter.top_language_list=b.v):"country"==d?(a.filter.top_language_list="",a.filter.top_country_list=b.v):(a.filter.top_country_list="",a.filter.top_language_list=""),a.open=!1,c.rank().get(a.filter).then(function(b){var c=b.data;"language"==d?a.rankObj=c.top_language_list:"country"==d?a.rankObj=c.top_country_list:a.rankObj=c.top_list})};if(d.country){var h={v:d.country};g(h,"country")}else if(d.language){var i={v:d.language};g(i,"language")}else g();a.allFilter=function(){g()},a.languageFilter=function(a){g(a,"language")},a.countryFilter=function(a){g(a,"country")}}]}).state("calendarTest",{url:"/calendarTest",templateUrl:"/views/page/calendarTest.html",controller:["$scope",function(a){a.teacher={id:"1067145",tid:"T010671456"}}]}).state("company",{url:"/business",templateUrl:"/views/page/company.html",data:{title:"italki Business"},controller:["$scope","complany","EmptyPromise",function(a,b,c){a.landing={contact_name:"",email:"",company_name:"",interested_num:""},a.submitFlag=!1,a.sumbit=function(){return null!=a.landing.phone&&angular.extend(a.landing,{phone:a.landing.phone}),null!=a.landing.comment&&angular.extend(a.landing,{comment:a.landing.comment}),a.submitFlag=!0,a.submitFlag1=!1,b.postCorplanding().post(a.landing).then(function(b){return a.submitFlag1=!0,KP.API.SUCC},function(){return KP.API.ERROR})}}]}).state("app",{url:"/app",templateUrl:"/views/page/app.html",data:{title:"italki Apps"},controller:["$scope","Restangular",function(a,b){a.showDownload=!1;var c=function(){b.one("app").one("releasehis").get().then(function(b){a.showDownload=!0;var c=b.data;a.downloadUrl=c.app_url},function(b){a.showDownload=!1})};c(),a.downloadApp=function(){angular.isDefined(a.downloadUrl)&&window.open(a.downloadUrl)}}]})}]).service("GlobalObject",function(){return{}}).service("complany",["Restangular",function(a){this.postCorplanding=function(){return a.one("product").all("corplanding")}}]),angular.module("kp.singlePage").controller("$$PurchaseCtrl",["$scope","Restangular","CourseListModal","$log","$state",function(a,b,c,d,e){}]).directive("kpCoverLayerRequest",["$rootScope","$translate","$modal","LoginAndActive",function(a,b,c,d){return{restrict:"EA",scope:{lanData:"="},link:function(a,b){var e=function(){if(d.open()){$("html, body").animate({scrollTop:0},"slow");c.open({scope:a,size:"md",templateUrl:"/views/languagechallenge/cover.layer.html",controller:["$scope","productRes","UserService","TeacherApplyService","$modalInstance","$state",function(a,b,c,d,e,f){a.pwd="",a.submitFlag=0,a.submit=function(g){if(!a.submitFlag){if(a.submitFlag=1,a.error=null,g.$invalid)return d.focusFormObj(g),a.submitFlag=0,void a.$digest();var h={product_code:a.lanData.pcode,pwd:a.pwd};return b.purchase().post(h).then(function(a){c.resetPaymentAccountCache(),e.close(),f.reload()},function(b){a.error=b,"incorrect_password"==b.type&&(a.perror=0)})["finally"](function(){a.submitFlag=0})}}}]})}};b.on("click",e),a.$on("$destroy",function(){b.off("click",e)})}}}]).directive("kpLanguageVideo",["$rootScope","$translate","$modal",function(a,b,c){return{restrict:"EA",scope:{},link:function(a,b){var d=function(){c.open({scope:a,size:"",templateUrl:"/views/languagechallenge/language.video.html"})};b.on("click",d),a.$on("$destroy",function(){b.off("click",d)})}}}]).directive("kpLanguageVideo1",["$rootScope","$translate","$modal",function(a,b,c){return{restrict:"EA",scope:{},link:function(a,b){var d=function(){c.open({scope:a,size:"",templateUrl:"/views/languagechallenge/language.video1.html"})};b.on("click",d),a.$on("$destroy",function(){b.off("click",d)})}}}]).controller("LanguageChallengel1bCtrl",["$scope","$stateParams","$log","TeacherApplyService",function(a,b,c,d){d.getLoginPromise().then(function(b){a.user=b})}]).controller("LanguageChallengel2bCtrl",["$scope","$stateParams","$log","TeacherApplyService",function(a,b,c,d){d.getLoginPromise().then(function(b){a.user=b})}]).directive("kpLanguageChallenge1",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge1.html",replace:!0,controller:["$scope","UserService","$state",function(a,b,c){b.isOnline()||a.$on("kp_account_quick_login_success",function(){c.reload()})}]}}).directive("kpLanguageChallenge1b",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge1b.html",replace:!0,controller:function(){}}}).directive("kpLanguageChallenge2",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge2.html",replace:!0,controller:["$scope","UserService","$state",function(a,b,c){b.isOnline()||a.$on("kp_account_quick_login_success",function(){c.reload()})}]}}).directive("kpLanguageChallenge2b",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge2b.html",replace:!0,controller:["$scope",function(a){}]}}).directive("kpLanguageChallenge3",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3.html",replace:!0}}).directive("kpLanguageChallenge3out",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3out.html",replace:!0}}).directive("kpLanguageChallenge3b",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3b.html",replace:!0}}).directive("kpLanguageChallenge3b1",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3b1.html",replace:!0}}).directive("kpLanguageChallenge3b2",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3b2.html",replace:!0}}).directive("kpLanguageChallenge3b3",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge3b3.html",replace:!0}}).directive("kpLanguageChallenge4",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge4.html",replace:!0,scope:{hasSubscribed:"=",lanData:"="},controller:["$scope","Restangular","$log",function(a,b,c){c.info("hasSubscribed: ",a.hasSubscribed);var d={email:""};a.SubmitObject=d,a.submitSuccessful=!1,a.ctrl=this,a.submitForm=function(){a.ctrl.SubmitForm.EmailField.$invalid||b.one("languagechallenge").all("subscribe").post(a.SubmitObject).then(function(a){c.info("restangular data: ",a)},function(a){c.info("restangular error: ",a)})["finally"](function(){a.submitSuccessful=!0})}}]}}).directive("kpLanguageChallenge4b",function(){return{restrict:"E",templateUrl:"/views/languagechallenge/language.challenge4b.html",replace:!0}}).directive("kpCountTimeDownOne",function(){return{restrict:"EA",templateUrl:"/views/languagechallenge/count.time.down.html",scope:{},controller:["$scope","$interval",function(a,b){a.showTwo=!1;var c=function(){var b=moment.utc([2017,1,1,0,0,0,0]).unix(),c=moment().utc().unix(),d=b-c;0>d&&(d=0),d>=86400?(days=parseInt(d/60/60/24,10),hours=parseInt((d-24*days*3600)/3600,10),minutes=parseInt((d-24*days*3600-3600*hours)/60,10)):d>=3600?(days=0,hours=parseInt(d/3600,10),minutes=parseInt((d-3600*hours)/60,10)):(days=0,hours=0,minutes=parseInt(d/60,10)),a.showObect={days:days,hours:hours,minutes:minutes}};c();var d=b(c,3e4);a.$on("$destroy",function(){d&&b.cancel(d)})}]}}).directive("kpCountTimeDownTwo",function(){return{restrict:"EA",templateUrl:"/views/languagechallenge/count.time.down.html",scope:{},controller:["$scope","$interval","Restangular",function(a,b,c){a.showTwo=!0;var d=function(){var b=moment.utc([2017,2,1,0,0,0,0]).unix(),c=moment().utc().unix(),d=b-c;0>d&&(d=0),d>=86400?(days=parseInt(d/60/60/24,10),hours=parseInt((d-24*days*3600)/3600,10),minutes=parseInt((d-24*days*3600-3600*hours)/60,10)):d>=3600?(days=0,hours=parseInt(d/3600,10),minutes=parseInt((d-3600*hours)/60,10)):(days=0,hours=0,minutes=parseInt(d/60,10)),a.showObect={days:days,hours:hours,minutes:minutes}};d();var e=b(d,3e4);a.$on("$destroy",function(){e&&b.cancel(e)})}]}}).directive("kpCountTimeDownDashboard",function(){return{restrict:"EA",templateUrl:"/views/page/count.time.down.dashboard.html",scope:{closeBox:"&"},controller:["$scope","$interval","Restangular","localStorageService","$location","$rootScope",function(a,b,c,d,e,f){a.closeBox=function(){var a="dashboard.lc1710";d.cookie.set(a,!0),f.promoBox={show:!1}},"/dashboard"==e.$$path?a.dashboard=!0:a.dashboard=!1;var g=function(){var b=moment.utc([2018,1,1,0,0,0,0]).unix(),c=moment().utc().unix(),d=b-c;0>d&&(d=0),d>=86400?(days=parseInt(d/60/60/24,10),hours=parseInt((d-24*days*3600)/3600,10),minutes=parseInt((d-24*days*3600-3600*hours)/60,10)):d>=3600?(days=0,hours=parseInt(d/3600,10),minutes=parseInt((d-3600*hours)/60,10)):(days=0,hours=0,minutes=parseInt(d/60,10)),a.showObect={days:days,hours:hours,minutes:minutes}};g();var h=b(g,3e4);a.$on("$destroy",function(){h&&b.cancel(h)})}]}}).directive("kpCountTimeDownNew",function(){return{restrict:"EA",templateUrl:"/views/languagechallenge/count.time.down.new.html",scope:{},controller:["$scope","$interval",function(a,b){var c=function(){var b=moment.utc([2018,2,1,0,0,0,0]).unix(),c=moment().utc().unix(),d=b-c;0>d&&(d=0),d>=86400?(days=parseInt(d/60/60/24,10),hours=parseInt((d-24*days*3600)/3600,10),minutes=parseInt((d-24*days*3600-3600*hours)/60,10)):d>=3600?(days=0,hours=parseInt(d/3600,10),minutes=parseInt((d-3600*hours)/60,10)):(days=0,hours=0,minutes=parseInt(d/60,10)),a.showObect={days:days,hours:hours,minutes:minutes}};c();var d=b(c,3e4);a.$on("$destroy",function(){d&&b.cancel(d)})}]}}).directive("kpMoreInfo",["$rootScope","$translate","$modal","LoginAndActive",function(a,b,c,d){return{restrict:"EA",scope:{lanData:"="},link:function(a,b){var d=function(){c.open({scope:a,size:"lg",templateUrl:"/views/languagechallenge/more.info.html"})};b.on("click",d),a.$on("$destroy",function(){b.off("click",d)})}}}]),angular.module("kp.singlePage").service("LanguageChallenge",["Restangular",function(a){var b=a.service("languagechallenge");this.ABTest=function(b){return a.one("experiment/get_my_group").get({experiment_name:b})},this.share=function(a){return b.one("share").get({user_id:a})},this.getCountry=function(){return b.one("countries").get()},this.getLan=function(){return b.one("languages").get()},this.getChallenge=function(){return a.one("languagechallenge").get()},this.rank=function(){return b.one("rank")},this.getGoal=function(){return b.one("goal").get()},this.postGoal=function(){return b.one().all("goal")},this.peopleNumber=function(){return b.one("subscribecount")},this.userSession=function(){return b.one("sessions").get()},this.subscribePost=function(){return b.one().all("subscribe")}}]),angular.module("kp.singlePage").directive("pulseHover",["$window",function(a){return{restrict:"A",link:function(b,c){c.on("mouseenter",function(){a.innerWidth>767&&c.addClass("animated pulse")}),c.on("mouseleave",function(){a.innerWidth>767&&c.removeClass("animated pulse")})}}}]),angular.module("kp.singlePage").controller("navcontrol",["$scope","screenSize",function(a,b){a.homec_linkShow=!1,a.homc_iscommunity=!1,a.isComuniopen=!1,a.homecShow=function(){a.homec_linkShow=!0},a.homec_inconShow=function(){a.homec_linkShow=!1},a.isCommunity=function(){a.homc_iscommunity=!a.homc_iscommunity,a.isComuniopen=!a.isComuniopen},a.isdropmenu=!1,a.iscover=!1,a.status={isopen:!1},a.toggled=function(b){a.iscover=!0,a.isdropmenu=b,a.$apply()},a.iscover===!1&&(a.isdropmenu=!1),a.toggleDropdown=function(b){b.preventDefault(),b.stopPropagation(),a.status.isopen=!a.status.isopen,a.isdropmenu=!1},a.desktop=b.is("sm. md, lg"),a.mobile=b.is("xs"),a.desktop=b.on("sm, md, lg",function(b){a.desktop=b}),a.mobile=b.on("xs",function(b){a.mobile=b})}]).controller("scrollControl",["$scope",function(a){a.homec_scroll=function(){var a=document.querySelector(".homec_font-format");angular.element("html,body").animate({scrollTop:a.offsetTop},800)}}]).controller("homec_Carousel2",["$scope","$interval","$timeout","$window",function(a,b,c,d){a.myInterval=4e3,a.isActive=0,a.i=0,a.slides;var e,f;f=[{image:[{country:"English",src:"/static/images/homepagec/english_UK-small.jpg",flagsrc:"/static/images/homepagec/uk.svg",lan:"english",ct:"gb",ctn:"U.K",p:245,t:275,c:4},{country:"Spanish",src:"/static/images/homepagec/spanish-small.jpg",flagsrc:"/static/images/homepagec/spain.svg",lan:"spanish",p:281,t:577,c:4},{country:"French",src:"/static/images/homepagec/french-small.jpg",flagsrc:"/static/images/homepagec/france.svg",lan:"french",p:125,t:303,c:3},{country:"Japanese",src:"/static/images/homepagec/japanese-small.jpg",flagsrc:"/static/images/homepagec/japan.svg",lan:"japanese",p:51,t:167,c:3},{country:"Chinese",src:"/static/images/homepagec/chinese-small.jpg",flagsrc:"/static/images/homepagec/china.svg",lan:"chinese",p:162,t:513,c:3},{country:"German",src:"/static/images/homepagec/german-small.jpg",flagsrc:"/static/images/homepagec/germany.svg",lan:"german",p:69,t:149,c:3}],index:0},{image:[{country:"Italian",src:"/static/images/homepagec/italian-small.jpg",flagsrc:"/static/images/homepagec/italy.svg",lan:"italian",p:94,t:198,c:2,c15:1},{country:"Russian",src:"/static/images/homepagec/russian-small.jpg",flagsrc:"/static/images/homepagec/russia.svg",lan:"russian",p:161,t:341,c:2,c15:1},{country:"Portuguese",src:"/static/images/homepagec/portuguese-small.jpg",flagsrc:"/static/images/homepagec/brazil.svg",lan:"portuguese",p:39,t:122,c:2,c15:1},{country:"Korean",src:"/static/images/homepagec/korean-small.jpg",flagsrc:"/static/images/homepagec/korea.svg",lan:"korean",p:18,t:82,c:2,c15:1},{country:"Arabic",src:"/static/images/homepagec/arabic-small.jpg",flagsrc:"/static/images/homepagec/egypt.svg",lan:"arabic",p:52,t:108,c:2,c15:1},{country:"Dutch",src:"/static/images/homepagec/dutch-small.jpg",flagsrc:"/static/images/homepagec/nederland.svg",lan:"dutch",p:11,t:30,c:2}],index:1},{image:[{country:"Turkish",src:"/static/images/homepagec/turkish-small.jpg",flagsrc:"/static/images/homepagec/turkey.svg",lan:"turkish",p:7,t:21,c:2},{country:"Hebrew",src:"/static/images/homepagec/hebrew-small.jpg",flagsrc:"/static/images/homepagec/israel.svg",lan:"hebrew",p:10,t:32,c:2},{country:"Polish",src:"/static/images/homepagec/polish-small.jpg",flagsrc:"/static/images/homepagec/poland.svg",lan:"polish",p:14,t:30,c:2},{country:"Hindi",src:"/static/images/homepagec/hindi-small.jpg",flagsrc:"/static/images/homepagec/india.svg",lan:"hindi",p:15,t:16,c:2,c15:1},{country:"Serbian",src:"/static/images/homepagec/serbian-small.jpg",flagsrc:"/static/images/homepagec/serbia.svg",lan:"serbian",p:12,t:26,c:2},{country:"ASL",src:"/static/images/homepagec/english_US-small.jpg",flagsrc:"/static/images/homepagec/usa.svg",lan:"signlanguage(american)",ctn:"U.S.A",p:4,t:4,c:4}],index:2}];var g=[{image:[{country:"English",src:"/static/images/homepagec/english_UK-small-m.jpg",flagsrc:"/static/images/homepagec/uk.svg",lan:"english",ct:"gb",ctn:"U.K",p:245,t:275,c:4},{country:"Spanish",src:"/static/images/homepagec/spanish-small-m.jpg",flagsrc:"/static/images/homepagec/spain.svg",lan:"spanish",p:281,t:577,c:4},{country:"French",src:"/static/images/homepagec/french-small-m.jpg",flagsrc:"/static/images/homepagec/france.svg",lan:"french",p:125,t:303,c:3},{country:"Japanese",src:"/static/images/homepagec/japanese-small-m.jpg",flagsrc:"/static/images/homepagec/japan.svg",lan:"japanese",p:51,t:167,c:3},{country:"Chinese",src:"/static/images/homepagec/chinese-small-m.jpg",flagsrc:"/static/images/homepagec/china.svg",lan:"chinese",p:162,t:513,c:3},{country:"German",src:"/static/images/homepagec/german-small-m.jpg",flagsrc:"/static/images/homepagec/germany.svg",lan:"german",p:69,t:149,c:3},{country:"Italian",src:"/static/images/homepagec/italian-small-m.jpg",flagsrc:"/static/images/homepagec/italy.svg",lan:"italian",p:94,t:198,c:2,c15:1},{country:"Russian",src:"/static/images/homepagec/russian-small-m.jpg",flagsrc:"/static/images/homepagec/russia.svg",lan:"russian",p:161,t:341,c:2,c15:1}],index:0},{image:[{country:"Portuguese",src:"/static/images/homepagec/portuguese-small-m.jpg",flagsrc:"/static/images/homepagec/brazil.svg",lan:"portuguese",p:39,t:122,c:2,c15:1},{country:"Korean",src:"/static/images/homepagec/korean-small-m.jpg",flagsrc:"/static/images/homepagec/korea.svg",lan:"korean",p:18,t:82,c:2,c15:1},{country:"Arabic",src:"/static/images/homepagec/arabic-small-m.jpg",flagsrc:"/static/images/homepagec/egypt.svg",lan:"arabic",p:52,t:108,c:2,c15:1},{country:"Dutch",src:"/static/images/homepagec/dutch-small-m.jpg",flagsrc:"/static/images/homepagec/nederland.svg",lan:"dutch",p:11,t:30,c:2},{country:"Turkish",src:"/static/images/homepagec/turkish-small-m.jpg",flagsrc:"/static/images/homepagec/turkey.svg",lan:"turkish",p:7,t:21,c:2},{country:"Hebrew",src:"/static/images/homepagec/hebrew-small-m.jpg",flagsrc:"/static/images/homepagec/israel.svg",lan:"hebrew",p:10,t:32,c:2},{country:"Polish",src:"/static/images/homepagec/polish-small-m.jpg",flagsrc:"/static/images/homepagec/poland.svg",lan:"polish",p:14,t:30,c:2},{country:"Hindi",src:"/static/images/homepagec/hindi-small-m.jpg",flagsrc:"/static/images/homepagec/india.svg",lan:"hindi",p:15,t:16,c:2,c15:1}],index:1}],h=[{image:[{country:"English",src:"/static/images/homepagec/english_UK-small-m.jpg",flagsrc:"/static/images/homepagec/uk.svg",lan:"english",ct:"gb",ctn:"U.K",p:245,t:275,c:4},{country:"Spanish",src:"/static/images/homepagec/spanish-small-m.jpg",flagsrc:"/static/images/homepagec/spain.svg",lan:"spanish",p:281,t:577,c:4},{country:"French",src:"/static/images/homepagec/french-small-m.jpg",flagsrc:"/static/images/homepagec/france.svg",lan:"french",p:125,t:303,c:3},{country:"Japanese",src:"/static/images/homepagec/japanese-small-m.jpg",flagsrc:"/static/images/homepagec/japan.svg",lan:"japanese",p:51,t:167,c:3}],index:0},{image:[{country:"Chinese",src:"/static/images/homepagec/chinese-small-m.jpg",flagsrc:"/static/images/homepagec/china.svg",lan:"chinese",p:162,t:513,c:3},{country:"German",src:"/static/images/homepagec/german-small-m.jpg",flagsrc:"/static/images/homepagec/germany.svg",lan:"german",p:69,t:149,c:3},{country:"Italian",src:"/static/images/homepagec/italian-small-m.jpg",flagsrc:"/static/images/homepagec/italy.svg",lan:"italian",p:94,t:198,c:2,c15:1},{country:"Russian",src:"/static/images/homepagec/russian-small-m.jpg",flagsrc:"/static/images/homepagec/russia.svg",lan:"russian",p:161,t:341,c:2,c15:1}],index:1},{image:[{country:"Portuguese",src:"/static/images/homepagec/portuguese-small-m.jpg",flagsrc:"/static/images/homepagec/brazil.svg",lan:"portuguese",p:39,t:122,c:2,c15:1},{country:"Korean",src:"/static/images/homepagec/korean-small-m.jpg",flagsrc:"/static/images/homepagec/korea.svg",lan:"korean",p:18,t:82,c:2,c15:1},{country:"Arabic",src:"/static/images/homepagec/arabic-small-m.jpg",flagsrc:"/static/images/homepagec/egypt.svg",lan:"arabic",p:52,t:108,c:2,c15:1},{country:"Dutch",src:"/static/images/homepagec/dutch-small-m.jpg",flagsrc:"/static/images/homepagec/nederland.svg",lan:"dutch",p:11,t:30,c:2}],index:2},{image:[{country:"Hebrew",src:"/static/images/homepagec/hebrew-small-m.jpg",flagsrc:"/static/images/homepagec/israel.svg",lan:"hebrew",p:10,t:32,c:2},{country:"Turkish",src:"/static/images/homepagec/turkish-small-m.jpg",flagsrc:"/static/images/homepagec/turkey.svg",lan:"turkish",p:7,t:21,c:2},{country:"Polish",src:"/static/images/homepagec/polish-small-m.jpg",flagsrc:"/static/images/homepagec/poland.svg",lan:"polish",p:14,t:30,c:2},{country:"Hindi",src:"/static/images/homepagec/hindi-small-m.jpg",flagsrc:"/static/images/homepagec/india.svg",lan:"hindi",p:15,t:16,c:2,c15:1}],index:3}];(e=function(){d.innerWidth>=992?a.slides=f:d.innerWidth<992&&d.innerWidth>=768?a.slides=g:d.innerWidth<768&&d.innerWidth>=360&&(a.slides=h)})();var i;angular.element(d).on("resize",function(){i&&c.cancel(i),i=c(e,900)})}]).directive("landingVersionCheck",["$interval",function(a){return{restrict:"A",link:function(b,c){var d=a(function(){var b=angular.element("div#main-container").attr("italki-abtest");b&&("c"===b&&c.attr("src","https://d1ay5e6e2e434u.cloudfront.net/homepagevideo_short_version2.mp4"),a.cancel(d))},500);b.$on("$destroy",function(){a.cancel(d)})}}}]),angular.module("kp.referral",["kp.account.google","facebook"]).config(["$stateProvider","GooglePlusProvider",function(a,b){a.state("referral",{url:"/referral",templateUrl:"/views/referral/referral.html",controller:"ReferralCtrl",controllerAs:"ctrl",data:{role:"user",title:"RP001"}}).state("referrals",{url:"/i/{encrypto_user_id}",templateUrl:"/views/referral/referral.page.html",controller:"referral"}),b.init({clientId:"782956540856.apps.googleusercontent.com",apiKey:"l6MGiZgpmCRw-s0irGyS8X5R",scopes:["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/contacts.readonly"]})}]).controller("ReferralCtrl",["$scope","Restangular","GlobalObject","$rootScope","$timeout","Referral","$location","GooglePlus","Facebook","SendReferralViaEmail","GmailFriendsSelectorModal","KPNotify","$http","$log",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;a.copyObject={copyState:0,url:""},o.onSuccess=function(b){a.copyObject.copyState=2,e(function(){a.copyObject.copyState=1},1e3),b.clearSelection()},a.tags=[],a.GlobalObject=c,this.inviteFriendsViaEmails=function(){a.$broadcast("tagInput.flush",{});var b=a.tags;b&&b.length&&f.sendReferralEmails(b).then(function(c){var d=c.data.user_email_s,e=c.data.invited_email_s,f=c.data.ref_email_s,g=b.length;return _.remove(a.tags,function(a){return f.indexOf(a)>-1||d.indexOf(a)>-1||e.indexOf(a)>-1}),f.length==g?void l.appendWithContent("RP717".translate()):d.length==g?void l.appendWithContent("RP714".translate().format(d.join(","))):e.length==g?void l.appendWithContent("RP715".translate().format(e.join(","))):void l.appendWithContent("RP719".translate())},function(a){})},this.inviteFriendsViaEmail=function(){j.open()},this.fromGmail=function(){h.login().then(function(a){var b=a.access_token;n.debug("gmail access token:",b),f.getGmailFriends(b).then(function(a){var b=a.data;n.debug("my gmail friends list (with email):",b),k.open(b).then(function(a){n.debug("selected gmail friends list (with email):",a);var b=[];angular.forEach(a,function(a){b.push(a.email)}),f.sendReferralEmails(b).then(function(){l.appendWithContent("RP717".translate())})})})},function(a){})},this.fromFacebook=function(){i.ui({method:"send",link:"{0}/i/{1}?hl={2}".format(window.location.origin,a.encrypto_user_id,a.GlobalObject.lang.flag)})},this.facebookShare=function(){i.ui({method:"feed",link:"{0}/i/{1}?hl={2}".format(window.location.origin,a.encrypto_user_id,a.GlobalObject.lang.flag)})};var p=1;a.$watch("GlobalObject.lang.flag",function(b,c){b!==c&&(a.copyObject.url="{0}/i/{1}?hl={2}".format(window.location.origin,a.encrypto_user_id,b))});var q=function(){f.history({page:p,page_size:20}).then(function(b){a.meta=b.meta,a.encrypto_user_id=a.meta.encrypto_user_id,d.encrypto_user_id=a.encrypto_user_id,0==a.copyObject.copyState&&(a.copyObject.copyState=1,a.copyObject.url="{0}/i/{1}?hl={2}".format(window.location.origin,a.encrypto_user_id,a.GlobalObject.lang.flag)),1==p?(a.items=b.data,a.total_referrals=b.meta.total_referrals):a.items=_.union(a.items,b.data)})};q(),a.loadMore=function(){return q(++p)},a.getClass=function(a,b){var c=!1;return 1==b&&"255"==a.referree_obj.register_status&&(c=!0),2==b&&a.referree_obj.first_purchase_time&&(c=!0),3==b&&2==a.status&&(c=!0),c}}]).controller("referral",["$scope","Referral","User","localStorageService","$translate","$location","GlobalObject","LoginService","FacebookOpenGraphManager","$translate","$state",function(a,b,c,d,e,f,g,h,i,e,j){var k=f.$$search.hl;a.langArr=KP.LANG;var l=KP.LANG[0],m=e.use();if(k&&(m=k),m)for(var n in KP.LANG)if(KP.LANG[n].flag==m){l=KP.LANG[n];break}g.lang=l,a.GlobalObject=g,a.useLang=function(a){g.lang=a,e.use(a.flag)},a.$watch("currentUser",function(b){if(b&&b.locale)for(var c in KP.LANG){var d=KP.LANG[c];if(d.flag==b.locale.replace("-","_")){a.useLang(d);break}}}),a.teachersBylan=[{lan:"english",ct:"us",ctn:"U.S.A",p:"",t:"",c:4},{lan:"english",ct:"gb",ctn:"U.K",p:"",t:"",c:4},{lan:"spanish",p:"",t:"",c:4},{lan:"french",p:"",t:"",c:3},{lan:"german",p:"",t:"",c:3},{lan:"chinese",p:"",t:"",c:3},{lan:"japanese",p:"",t:"",c:3},{lan:"portuguese",p:"",t:"",c:2,c15:1},{lan:"arabic",p:"",t:"",c:2,c15:1},{lan:"italian",p:"",t:"",c:2,c15:1},{lan:"russian",p:"",t:"",c:2,c15:1},{lan:"korean",p:"",t:"",c:2,c15:1},{lan:"turkish",p:"",t:"",c:2},{lan:"serbian",p:"",t:"",c:2},{lan:"hebrew",p:"",t:"",c:2},{lan:"hindi",p:"",t:"",c:2},{lan:"dutch",p:"",t:"",c:2},{lan:"polish",p:"",t:"",c:2}],a.getimage=function(a){var b="/static/images/static/hp-",c=".jpg";return a.ct?b+a.lan+"_"+a.ct+c:b+a.lan+c},a.showModal=!1,a.userType=0;var o=function(){var c=window.location.pathname.substr(3),g={ref:c,utm_source:f.search().utm_source||"",
utm_medium:f.search().utm_medium||"",utm_campaign:f.search().utm_campaign||""};return b.referrals(c).then(function(b){var f=b.data;if(f){a.nickname=f.nickname,a.avatar_file_name=f.avatar_file_name,a.userId=f.id,KP.REF.userId=a.userId,g.ref=a.userId,d.cookie.set("linkParam",g),e("RP025").then(function(a){a&&i.update({title:a.format(f.nickname),image:"https://www.italki.com/static/images/static/homepage.jpg"})});var h=a.currentUser;h&&(h.is_premium||h.is_teacher)&&(a.userType=1),a.showModal=!0}else d.cookie.set("linkParam",g),KP.REF.userId=c,j.go("landing")})};o(),a.clickGo=function(b){if(b)j.go("referral");else{if(!a.currentUser)return h.open(a);j.go("teachers")}}}]).directive("tagInput",["$timeout","KPNotify",function(a,b){return{scope:{tags:"=ngModel"},template:'<div class="tag-container input-group"  ng-mouseover="hover=true" ng-mouseleave="hover=true" ng-click="focus(\'new-tag-input\');deletePlaceholder()"><p class="email-placeholder" ng-hide="placeholder">{{"KP013"|t}}</p><div class="tag" ng-repeat="tag in tags">{{tag}}<button ng-click="delete($index, $event)"><i class="fa fa-times"></i></button></div><div class="new-tag" ng-show="placeholder"><input type="text" ng-disabled="tags.length>9" id="new-tag-input"  ng-mouseover="deletePlaceholder()" ng-blur="showPlaceholder()" ng-model="newTag" ng-keyup="($event.keyCode === 13||$event.keyCode === 186||$event.keyCode === 32) && add(newTag)" ng-blur="add(newTag)"/></div></div>',link:function(c,d,e){c["delete"]=function(a,b){b.stopPropagation(),c.tags.splice(a,1)},c.add=function(a){if(null!=a)if(a.indexOf(";")>0){var b=a.split(";");angular.forEach(b,function(a){c.addtags(a)})}else c.addtags(a);c.newTag=null},c.$on("tagInput.flush",function(){c.tags.length<1&&c.add(c.newTag)}),c.addtags=function(a){var d=a.match(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}$/i);null==d&&b.appendWithContent("RP716".translate()),angular.forEach(c.tags,function(b){b==a&&(a=null)}),null!=a&&""!=a&&null!=d&&c.tags.length<10&&c.tags.push(a)},c.focus=function(b){var c="#"+b;a(function(){$(c)[0].focus()})},c.deletePlaceholder=function(){a(function(){c.placeholder=!0},200)},c.showPlaceholder=function(){0==c.tags.length&&(c.placeholder=!1)}}}}]),angular.module("kp.referral").controller("$$GmailFriendsSelectorModalCtrl",["$scope","$modalInstance","friends",function(a,b,c){a.friends=c,a.selectAction={select:!0},a.selClick=function(b){a.selectAction.select=b},a.onselect=function(b){a.items=b},a.confirm=function(){b.close(a.items)}}]).controller("$$GmailFriendsSelectorCtrl",["$scope","$filter","$timeout",function(a,b,c){a.control={checkedAll:!1},a.$watch("control.checkedAll",function(c){var d=b("filter")(a.friends,a.q);angular.forEach(d,function(a){a.checked=!!c})}),a.$watch("selectAction.select",function(c){var d=b("filter")(a.friends,a.q);angular.forEach(d,function(a){0==a.status?a.checked=!!c:a.checked=!1})}),a.$watch("friends",function(){c(function(){a.$onselect()})},!0),a.$onselect=function(){var b=[];angular.forEach(a.friends,function(a){a.checked&&b.push(a)}),a.selectAction.count=b.length,a.onselect({items:b})}}]).directive("kpGmailFriendsSelector",function(){return{restrict:"E",templateUrl:"/views/component/gmail.friends.selector.html",scope:{friends:"=",selectAction:"=",onselect:"&"},controller:"$$GmailFriendsSelectorCtrl"}}).service("GmailFriendsSelectorModal",["$modal",function(a){this.open=function(b){var c=angular.copy(b),d=a.open({templateUrl:"/views/component/gmail.friends.selector.modal.html",windowClass:"gmail-friends-selector-modal",controller:"$$GmailFriendsSelectorModalCtrl",resolve:{friends:function(){return c}}});return d.result}}]).service("SendReferralViaEmail",["$modal","$rootScope",function(a,b){this.open=function(){var c=b.$new(),d="RP410".translate()+"\r\n\r\n    "+"RP411".translate()+"\r\n    "+"RP412".translate()+" "+"RP413".translate()+"\r\n\r\n    "+"RP414".translate();c.email={subject:"RP409".translate(),content:d.format("{0}/i/{1}".format(window.location.origin,b.encrypto_user_id))},a.open({templateUrl:"/views/component/invite.friends.via.email.html",scope:c})}}]),angular.module("kp.referral").service("Referral",["Restangular",function(a){this.history=function(b){return b=b||{},a.one("account/referral/history").get(b)},this.referrals=function(b){return a.one("account/referral/decrypto").get({encrypto_user_id:b})},this.getGmailFriends=function(b){return a.one("account/referral/gmail").get({access_token:b})},this.sendReferralEmails=function(b){return a.one("account/referral/gmail").post("send",{email:b})}}]),angular.module("kp.passwordModal",["ui.bootstrap"]).service("PasswordModal",["$modal","$rootScope",function(a,b){return{show:function(c){var d=b.$new();angular.isObject(c)&&angular.extend(d,{config:c});var e=a.open({scope:d,size:"sm",templateUrl:"/views/component/password.input.html",controller:"$$PasswordModalCtrl"});return e.result}}}]).controller("$$PasswordModalCtrl",["$scope","$modalInstance","$translate",function(a,b,c){var d=c.instant,e=a.config||{};a.title=e.title||d("C0096"),a.body=e.body||d("ST253"),a.confirm=function(){b.close(a.password)}}]),angular.module("kp.notification").constant("NotiConstants",{SESSION_REQUEST_MODIFY_DECLINE_1_S:2028,SESSION_FEEDBACK_G_T:2051,PACKAGE_TERMINATE_REQUEST_ACCEPT_7_T:2074,TEACHER_INSTANT_STATE_CLOSE:1999,PACKAGE_TERMINATE_REQUEST_DECLINE_Z_S:2076,SESSION_END_Z_I:2052,PACKAGE_TERMINATE_REQUEST_DECLINE_Z_T:2077,PACKAGE_SESSION_REQUEST_EXPIRED_2_I:2024,PACKAGE_REQUEST_ACCEPT_5_T:2010,PACKAGE_REQUEST_MODIFY_6_S:2034,SESSION_INSTANT_END_Z_I:2095,PACKAGE_REQUEST_MODIFY_3_T:2030,PACKAGE_SESSION_REQUEST_ACCEPT_6_T:2009,SESSION_TRIAL_REQUEST_EXPIRED_2_I:2022,PACKAGE_TERMINATE_7_I1:2099,PACKAGE_REQUEST_MODIFY_6_EXPIRED_2_I:2037,SESSION_PROBLEM_REQUEST_ACCEPT_Q_I:2064,SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_S:2069,SESSION_TIME_CHANGE_ACCEPT_6_T:2042,SESSION_INSTANT_REQUEST_ACCEPT_6_T:2008,SESSION_TIME_CHANGE_ACCEPT_6_S:2041,SESSION_PROBLEM_RESCHEDULE_REQUEST_ACCEPT_W_T:2070,SESSION_TIME_CHANGED_6_I1:2106,SESSION_PROBLEM_REQUEST_ACCEPT_Q_S:2062,SESSION_REQUEST_MODIFY_EXPIRED_2_I:2029,SESSION_PROBLEM_REQUEST_DECLINE_H_T:2066,SESSION_PROBLEM_REQUEST_ACCEPT_Q_T:2063,SESSION_REQUEST_MODIFY_3_T:2026,PACKAGE_REQUEST_MODIFY_ACCEPT_5_T:2035,SESSION_PROBLEM_REQUEST_DECLINE_H_S:2065,BIRTHDAY_NOTI:1021,SESSION_FINISH_F_FEEDBACK_REMIND_I:2097,PURCHASE_SUCCESS:1001,PACKAGE_REQUEST_MODIFY_DECLINE_4_T:2036,PACKAGE_REQUEST_MODIFY_ACCEPT_5_S:2031,NOTEBOOK_CORRECTION_MBO:1015,SESSION_REQUEST_MODIFY_ACCEPT_6_S:2027,SESSION_TIME_CHANGE_5_T:2040,SESSION_TIME_CHANGE_5_S:2039,SESSION_REQUEST_0_S:2001,SESSION_TIME_BEGIN_REMIND_6_I:2038,SESSION_PROBLEM_DISPUTED_RESOLVE_E_I1:2101,QUESION_ANSWER_COMMENT_MBO:1019,SESSION_PROBLEM_Q_RESCHEDULE_REMIND_I:2096,SESSION_INSTANT_FINISH_F_I:2094,SESSION_INSTANT_REQUEST_EXPIRED_2_I:2023,PURCHASE_OET_SUCCESS:1003,FOLLOW_MBO:1013,SESSION_TRIAL_TIME_END_7_I:2088,BIRTHDAY_OF_FRIEND_NOTI:1022,SESSION_REQUEST_EXPIRED_2_I:2021,QUESION_COMMENT_MBO:1017,SESSION_TIME_END_7_I:2045,SESSION_PROBLEM_OT_E_I:2105,SESSION_INSTANT_TIME_END_7_I:2089,SESSION_PROBLEM_OS_E_I:2104,PACKAGE_REQUEST_CANCEL_1_S:2020,PACKAGE_5_WILL_EXPIRE_REMIND_I:2092,PACKAGE_SESSION_REQUEST_DECLINE_4_T:2014,SESSION_TRIAL_REQUEST_ACCEPT_6_T:2007,PACKAGE_5_EXPIRED_REMIND_I:2093,PACKAGE_REQUEST_EXPIRED_2_I:2025,PACKAGE_REQUEST_MODIFY_DECLINE_1_S:2032,PURCHASE_CHALLENGE_SUCCESS:1002,SESSION_PROBLEM_REQUEST_C_S:2055,PACKAGE_EXTENSION_REQUEST_DECLINE_S:2082,SESSION_MESSAGE_UC_CHANGE:1998,USER_MESSAGE_UC_CHANGE:1025,PACKAGE_EXTENSION_REQUEST_DECLINE_T:2083,SESSION_PROBLEM_REQUEST_C_T:2056,PACKAGE_REQUEST_MODIFY_3_EXPIRED_2_I:2033,SESSION_TRIAL_REQUEST_DECLINE_4_T:2012,PACKAGE_SEND_MESSAGE_T:2091,PACKAGE_EXTENSION_REQUEST_ACCEPT_S:2080,PACKAGE_EXTENSION_REQUEST_ACCEPT_T:2081,PACKAGE_SEND_MESSAGE_S:2090,SESSION_REQUEST_DECLINE_4_T:2011,SESSION_PROBLEM_Q_E_I:2103,SESSION_CHANGE_DISPUTED_H_I1:2100,SESSION_PROBLEM_REQUEST_S_S:2057,SESSION_PROBLEM_REQUEST_S_T:2058,DISCUSSION_COMMENT_MBO:1020,PACKAGE_SESSION_FINISH_F_S:2049,PACKAGE_TERMINATE_REQUEST_ACCEPT_7_S:2073,NOTEBOOK_CORRECTION_COMMENT_MBO:1016,PACKAGE_SESSION_FINISH_F_I:2050,PACKAGE_REQUEST_DECLINE_4_T:2015,SESSION_TRIAL_REQUEST_CANCEL_1_S:2017,SESSION_PROBLEM_RESCHEDULE_REQUEST_O_T:2068,SESSION_PROBLEM_RESCHEDULE_REQUEST_O_S:2067,SESSION_TIME_CHANGE_DECLINE_6_S:2043,SESSION_TIME_CHANGE_DECLINE_6_T:2044,PACKAGE_TERMINATE_REQUEST_B_T:2072,PACKAGE_EXTENSION_I1:2107,USER_GIFTCARD_MBO:1023,PACKAGE_EXTENSION_REMIND_T:2085,PACKAGE_EXTENSION_REMIND_S:2084,SESSION_PROBLEM_REQUEST_ACCEPT_E_T:2060,SESSION_PROBLEM_REQUEST_ACCEPT_E_S:2059,QUESION_ANSWER_MBO:1018,SESSION_REQUEST_CANCEL_1_S:2016,PACKAGE_TERMINATE_7_I:2075,SESSION_INSTANT_REQUEST_0_S:2003,SESSION_PROBLEM_REQUEST_ACCEPT_E_I:2061,SESSION_SEND_MESSAGE_S:2086,PACKAGE_SESSION_REQUEST_0_S:2004,SESSION_SEND_MESSAGE_T:2087,PACKAGE_SESSION_TIME_END_7_I:2046,NOTEBOOK_COMMENT_MBO:1014,SESSION_NOTIFY_MARK_READ:1997,PACKAGE_TERMINATE_REQUEST_C_S:2071,SESSION_TRIAL_REQUEST_0_S:2002,PACKAGE_EXTENSION_REQUEST_T:2079,NOTI_OA_UC_CHANGE:1024,PACKAGE_EXTENSION_REQUEST_S:2078,SESSION_REQUEST_ACCEPT_6_T:2006,PACKAGE_SESSION_REQUEST_CANCEL_1_S:2019,PACKAGE_FREEZE_Z_I:2098,SESSION_INSTANT_REQUEST_CANCEL_1_S:2018,FOLLOW_REQUEST_MBO:1012,PACKAGE_REQUEST_0_S:2005,SESSION_INSTANT_REQUEST_DECLINE_4_T:2013,SESSION_FINISH_F_I:2048,USER_MESSAGE_MBO:1011,SESSION_TIME_END_7_TI:2102,SESSION_PROBLEM_E_T:2054,SESSION_PROBLEM_E_S:2053,SESSION_FINISH_F_S:2047,USERMISSION_COMMENT_MBO:1026,TEACHER_TAG_VOTE_T:2109,NOTI_CHALLENGE_MILESTONE:2111,NOTI_RECEIEVED_COUPON:1100,NOTI_REDEEM_GENERIC_CODE:1101,NOTI_COUPON_WILL_EXPIRE:1102});var KPCourseError=angular.$$minErr("KPCourseError");angular.module("kp.course",[]).service("Course",["Restangular",function(a){var b=a.service("course");return{one:function(a){return b.one(a)},list:function(b){return a.one("teacher",b).one("course")}}}]),angular.module("kp.course").controller("$$ScheduleSessionModalCtrl",["$scope","Restangular","CourseListModal","$log","$state",function(a,b,c,d,e){b.one("account/teacher/express-scheduling-list").get().then(function(b){a.items=b.data,a.meta=b.meta}),a.mouseenter=function(a){a.hide=!0},a.mouseleave=function(a){a.hide=!1},a["goto"]=function(b,c){a.$close(),e.go("teacher",{id:c}),b.preventDefault()},a.isScope=a}]).service("ScheduleSessionModal",["$rootScope","$modal",function(a,b){function c(){var c=a.$new();b.open({scope:c,size:"lg",templateUrl:"/views/component/schedule.session.modal.html",windowClass:"course-list-modal",controller:"$$ScheduleSessionModalCtrl"})}return{open:c}}]).controller("$$CourseListModalCtrl",["$scope","$rootScope","$modalInstance","$log",function(a,b,c,d){b.$on("kp.BrowserBackOrForwardBtnClick",function(){a.$dismiss()})}]).service("CourseSelectorModal",["$modal","$rootScope","$log","$state","Course","$stateParams",function(a,b,c,d,e,f){function g(e,g){if(c.debug("opening new course selector"),e){var i=b.$new();i.teacherId=e,h(g)&&(i.options=g);var j=a.open({scope:i,templateUrl:"/views/course/list.modal.html",windowClass:"course-list-modal-v1",controller:"$$CourseListModalCtrl"});j.result.then(function(){},function(){"teacherCourse"==d.$current.self.name&&d.transitionTo("teacher",{id:f.id})})}}var h=angular.isObject,i=angular.isUndefined;this.open=function(a,b,c,d,e){var f={};return 3==d&&(f.isTrial=!0),f.courseId=b,f.priceId=c,f.type=d,f.typee=e,(i(b)||i(d))&&(f=null),g(a,f)}}]).service("CourseListModal1",["$rootScope","$modal","Course","$log","$state",function(a,b,c,d,e){function f(f,g,h,i){d.debug("open teacher course list ",f);var j=a.$new();j.teacherId=f,b.open({scope:j,size:"lg",templateUrl:"/views/component/course.list.modal.html",windowClass:"course-list-modal",controller:["$scope",function(a){a.onselect=function(b){a.selected=b},a.disableNextStep=function(){return!(a.selected&&a.currentUser&&a.currentUser.id!=f)},c.list(f).get().then(function(b){a.items=b.data}),a.requestSession=function(){a.$close(),e.transitionTo("sessionRequest",a.selected)}}]})}return{open:f}}]).service("CourseListModal",["$rootScope","ENV","CourseSelectorModal","$modal","Course","$log","$state","EmailNotActive",function(a,b,c,d,e,f,g,h){function i(a,b){g.go(a,b)}return{open:c.open,openNewSchedule:i}}]).service("CourseXModal",["$rootScope","$modal","Course","CourseListModal","SearchService","$state","$stateParams",function(a,b,c,d,e,f,g){this.closeForSearcher=0,this.teacherName="",this.open=function(h,i){if(e.isSearchUrl())return this.closeForSearcher=1,void e.handlerSearchObject();this.closeForSearcher=0;var j=a.$new();a.currentUser||(i=1),j.canSchedule=i,j.teacherName=this.teacherName;var k=b.open({scope:j,templateUrl:"/views/component/course.detail.modal.html",controller:["$scope","$location","LoginService",function(b,e,f){c.one(h).get().then(function(c){b.course=c.data;var d=[];angular.forEach(b.course.price_obj_s,function(a){a.package_length>1&&d.push(a)}),b.packages=d;var f={event:"virtualPageview",url:e.path(),title:"{0} {1} : {2}".format(b.teacherName,b.course.language,b.course.id)};a.$emit("kp.dataLayer.fired",f)}),b.schedule=function(a){if(!b.currentUser){var c={reload:1};return void f.open(c)}d.open(b.course.teacher_id,a,0,1)}}]});k.result.then(function(){},function(){"teacherCourse"==f.$current.self.name&&f.transitionTo("teacher",{id:g.id})})}}]),angular.module("kp.course").controller("$$CourseSelectorV1Ctrl",["$rootScope","$scope","$log","$translate","$state","UserService","Course",function(a,b,c,d,e,f,g){function h(){a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/teacher/{0}/schedule/options".format(p),title:"Schedule Lesson - Time & Packages"}),s=!0,o.step=n[1]}function i(){b.oncheckout()}var j=(angular.isObject,b.options),k=angular.isDefined,l=angular.isArray,m=angular.extend,n=[1,2],o=this,p=b.teacherId,q={_type:2},r={_type:1};b.dismiss;a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/teacher/{0}/schedule/courses".format(p),title:"Schedule Lesson - Courses"});var s=!0;b.selectCtrl=function(a,d,e){var f=!1;if(c.debug("First time: ",s),s)for(var g=0;g<e.length;g++)4==e[g].length&&(c.debug("Here inside the 60 minute selection: ",e[g].length,", i: ",g),b.selectedPrice=e[g],b.totalPrice=e[g].price_usd,s=!1,f=!0),g!=e.length-1||f||(b.selectedPrice=e[0]);return c.debug("Exiting select controller!",f),a==d?!0:void 0},b.proFilter=q,b.informalFilter=r,b.selectedCourse=null,this.step=n[j?1:0],this.isFirstStep=function(){return this.step==n[0]},this.gotoStep1=function(){return a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/teacher/{0}/schedule/courses".format(p),title:"Schedule Lesson - Courses"}),this.isFirstStep()?void 0:(s=!0,this.step=n[0])},this.checkout=function(){var a=b.selectedCourse,c="sessionRequest",d={teacherId:p,language:a.language||b.languageObj.language,priceId:b.selectedPrice?b.selectedPrice.id:""};return i(),0==a._type?(c="TrialRequest",e.transitionTo(c,d)):(d.length=b.selectedPrice.length,b.isPackage&&(c="PackageRequest"),void e.transitionTo(c,d))},b.applyFilter=function(){b.languageObj&&(r.language=q.language=b.languageObj.language)},b.choosePrice=function(a){a!=b.selectedPrice&&(b.isPackage=!1,b.totalPrice=a.price_usd,b.selectedPrice=a)},b.choosePackage=function(a){b.isPackage=!0,b.totalPrice=a.price_usd},b.chooseSingleLesson=function(){b.isPackage=!1,b.totalPrice=b.selectedPrice.price_usd},b.chooseCourse=function(a,c,d){0==a._type&&(a.language=b.languageObj.language),b.selectedCourse=a,b.isPackage=k(d)?!!d:!1;var e,f=a.price_obj_s,g=[];l(f)?angular.forEach(f,function(a){var b=parseInt(a.session_price_usd,10),d={id:a.id,price_usd:b,length:a.session_length};if(a.package_length>1){var f=parseInt(a.package_price_usd,10),h=b*a.package_length,i=(100*(h-f)/h).toFixed(0);m(d,{packages:{length:a.package_length,price_usd:a.package_price_usd,saved:i>0?"{0}%".format(i):""}}),k(c)&&a.id==c&&(e=d)}g.push(d)}):g.push({id:-1,price_usd:a.trial_price_usd,length:2}),e||(e=g[0]),b.selectedPrice=e,b.totalPrice=b.isPackage?e.packages.price_usd:e.price_usd,b.prices=g,h()},this.init=function(){g.list(p).get().then(function(a){function d(a){var c=f.currentUser(),d=c&&l(c.language_obj_s)?c.language_obj_s:[];d=_.filter(d,{is_learning:1});var e=_.findIndex(h,{language:a});e>-1&&(b.languageObj=h[e]),b.languageObj||(b.languageObj=h[0]),b.applyFilter()}var e=a.data,g=a.meta,h=[];if(c.debug("course selector v1 teacher id:{0}".format(b.teacherId)),l(e)){b.hasPro=_.filter(e,function(a){return!!a.title}).length>0,b.hasInformal=_.filter(e,function(a){return!a.title}).length>0,angular.forEach(e,function(a){h.push({language:a.language});var b=!a.title;a.name=b?"{0}: {1}".format("TP999".translate(),a.language.translate()):a.title,a._type=b?1:2}),h=_.uniq(h,"language");var i;if(1==g.has_trial&&!g.has_had_trial&&g.trial_left_count>0&&(b.hasTrial=!0,i={_type:0,has_had_trial:g.has_had_trial,name:"TS215".translate(),has_scheduled:g.has_scheduled,trial_left_count:g.trial_left_count,trial_price_usd:g.trial_price_usd},e.push(i)),j)if(j.isTrial&&b.hasTrial)d(),b.chooseCourse(i);else{var k=_.findIndex(e,{id:j.courseId});if(k>-1){var m=e[k];d(m.language),b.chooseCourse(m,j.priceId,2==j.type)}}else d();b.courses=e,b.languages=h}})}}]).directive("kpCourseSelectorV1",["$log","$translate","Course","$modal",function(a,b,c,d){return{restrict:"E",templateUrl:"/views/component/course.selector.v1.html",scope:{teacherId:"=",oncheckout:"=",options:"=",dismiss:"="},controller:"$$CourseSelectorV1Ctrl",controllerAs:"selector",link:function(a,b,c,d){d.init()}}}]).directive("kpCourseSelector",["$log","$translate","$timeout",function(a,b,c){var d=b.instant;return{restrict:"EA",templateUrl:"/views/component/course.selector.html",scope:{courses:"=",onselect:"=",teacherInfo:"="},link:function(b,c,e){var f={};b.trial={},b.enableNextStep=1,b.decideTitle=function(a){return a.title?a.title:d("TP999")+": "+d(a.language)},b.$watch("trial.language",function(c){c&&(a.debug("trial lesson language:",c),f&&3==f.type&&f.language!=c?(f.language=c,b.onselect(f)):b.teacherInfo&&b.teacherInfo.checked&&b.onselect({type:3,language:c,price:b.teacherInfo.trial_price_usd}))}),a.debug("enter course selector directive....",b.courses),a.debug("confirm button id:",b.$id),b.selCourse=function(a){if(3==a.type){var c=angular.element("#selectLan");if(c&&c.val()&&(a.language=c.val()),!a.language)return}f=a,b.onselect(f)}}}}]),angular.module("kp.product",["kp.util"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/product","/product/purchase/"),a.state("product",{parent:"kp",url:"/product",templateUrl:"/views/product/product.bs.html",data:{role:"user"}}).state("productPurchase",{url:"/product/purchase/{PCode}",templateUrl:"/views/product/purchase.html",controller:"productPurchaseCtrl",data:{title:"product purchase"}})}]),angular.module("kp.product").controller("productPurchaseCtrl",["$scope","productRes","$stateParams","alertModal","$translate","$timeout",function(a,b,c,d,e,f){var g=c.PCode||"S0010001",h={INSVS201606LC:1,INSVS201610LC:1};b.product().get({product_code:g}).then(function(b){b.data.pCode=g,b.data.price_usd=parseInt(b.data.price_usd),b.data.available_itc_usd=parseInt(b.data.available_itc_usd),b.data.pageConfig=h;var c=function(){a.currentUser&&a.currentUser.currency_rate?(b.data.u_price=(b.data.price_usd*a.currentUser.currency_rate/10).toFixed(2),a.productInfo=b.data):f(c,300)};c()},function(b){a.error=b});e.instant}]),angular.module("kp.contact").service("productUtils",["$state",function(a){var b={};return b}]),angular.module("kp.product").service("productRes",["Restangular",function(a){return{product:function(){return a.one("product")},purchase:function(){return a.all("product/purchase")}}}]),angular.module("kp.product").directive("kpProductPurchaseNavLi",function(){return{restrict:"EA",scope:{step:"@"},templateUrl:"/views/product/directives/nav.html"}}).directive("kpProductInfo",function(){return{restrict:"E",scope:{productInfo:"="},link:function(a,b,c){a.getContentUrl=function(){return a.productInfo&&a.productInfo.pageConfig[a.productInfo.pCode]?"/views/product/directives/p_"+a.productInfo.pCode.toLowerCase()+".html":"/views/product/directives/p_default.html"}},template:'<div ng-include="getContentUrl()"></div>',controller:["$scope","$rootScope",function(a,b){a.currentUser=b.currentUser}]}}).directive("kpPurchaseInfo",function(){return{restrict:"E",templateUrl:"/views/product/directives/purchase.info.html",scope:{productInfo:"="},controller:["$scope","productRes","UserService","TeacherApplyService",function(a,b,c,d){a.pwd="",a.submitFlag=0,a.submit=function(e){if(!a.submitFlag){if(a.submitFlag=1,a.error=null,e.$invalid)return d.focusFormObj(e),a.submitFlag=0,void a.$digest();var f={product_code:a.productInfo.pCode,pwd:a.pwd};return b.purchase().post(f).then(function(b){var d=b.data;(a.item=d[2])&&(a.productInfo.user_name=a.item.user_name,a.productInfo.user_pwd=a.item.user_pwd),a.productInfo.available_itc_usd-=a.productInfo.price_usd,a.productInfo.data=b.data,c.resetPaymentAccountCache()},function(b){a.error=b,"incorrect_password"==b.type&&(a.perror=0)})["finally"](function(){a.submitFlag=0})}}}]}}),angular.module("kp.organization",["base.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("/bos","/home"),a.state("bos",{url:"/bos",templateUrl:"/views/organization/main.html",controller:"OrganizationAppCtrl",data:{role:"user",title:"italki for Business, Organization and School (BOS)"}}).state("bos.overview",{url:"/overview",templateUrl:"/views/organization/overview.html",controller:"OrganizOverviewCtrl"}).state("bos.members",{url:"/members",templateUrl:"/views/organization/members.html",controller:"OrganizMembersCtrl"}).state("bos.reports",{url:"/reports",templateUrl:"/views/organization/reports.html",controller:"OrganizReportsCtrl"}).state("bos.settings",{url:"/settings",templateUrl:"/views/organization/settings.html",controller:"OrganizSettingsCtrl"}).state("bos.finance",{url:"/finance",templateUrl:"/views/organization/finance.html",controller:"OrganizFinanceCtrl"})}]),angular.module("kp.organization").controller("OrganizationAppCtrl",["$scope","$rootScope","Organization","Account","$state","$kpSocket","UserService","ShowSaveMsg","$log","$modal",function(a,b,c,d,e,f,g,h,i,j){var k=function(){c.getBaseInfo().then(function(a){b.organization=a.data},function(a){e.transitionTo("dashboard")})};k(),a.initOrganizationData=k,a.signOut=function(a){a.preventDefault();var c=b.notifyObj;angular.forEach(c,function(a,b){a&&(c[b]=0)}),d.logout().then(function(a){b.$broadcast("kp_account_sign_out"),f.close(),g.loginOut(),e.go("landing")},function(a){h.open(angular.element("<body>"),"logout failed!")})},a.openOrganizPurchase=function(){j.open({size:"",backdrop:"static",templateUrl:"/views/organization/modal/organiz.purchase.bank.html",windowClass:"purchase-bank"})},a.addNewMember=function(){var a=j.open({size:"",templateUrl:"/views/organization/modal/add.new.member.html",controller:"$$AddNewMemberCtrl"});a.result.then(function(a){1==a&&(b.organization.members+=1)})}}]).controller("OrganizOverviewCtrl",["$scope","$rootScope","Organization","$log","$sce","$filter",function(a,b,c,d,e,f){function g(){a.loadMoreFlag=!1,c.getLessons(h).then(function(b){var c=b.data;a.items=_.union(a.items||[],c),a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1})}var h={page:1};c.getStatistics().then(function(c){a.organizStatistics=c.data,b.organization&&b.organization.wallet_sv!=a.organizStatistics.wallet_sv&&(b.organization.wallet_sv=a.organizStatistics.wallet_sv)}),g(),a.loadMore=function(){h.page++,g()},a.getTag=function(a){return e.trustAsHtml(f("sessionXTag")(a))}}]).controller("OrganizMembersCtrl",["$scope","Organization","$modal","alertModal","ENV","$log","localStorageService",function(a,b,c,d,e,f,g){function h(){a.loadMoreFlag=!1,b.getMembers(i).then(function(b){var c=b.data;a.items=_.union(a.items||[],c),a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1})}var i={page:1};h(),a.loadMore=function(){i.page++,h()},a.creditsTransfer=function(b){var d=c.open({size:"",templateUrl:"/views/organization/modal/transfer.credits.html",resolve:{user_id:function(){return b.user_id}},controller:"$$OrganizMembersTransferCtrl"});d.result.then(function(c){f.debug("resItc:",c,"sv:",b.sv),b.sv+=c,a.$parent.initOrganizationData()})},a.adminChange=function(c){var e={};e.user_id=c.user_id,e.is_admin=c.permi_type?0:1,d.open(a).then(function(a){e.operate="set_administrator",b.postMember(e).then(function(b){b.data.success&&(c.permi_type=e.is_admin),a.$close()},function(b){a.$close()})})},a.statusChange=function(c){var e={};e.user_id=c.user_id,e.status=c.status?0:1,d.open(a).then(function(a){e.operate="set_member_status",b.postMember(e).then(function(b){b.data.success&&(c.status=e.status),a.$close()},function(b){a.$close()})})},a.downloadUrl=function(a){var b="{0}organization/download/{1}-lessons.csv?download_type=member-lessons&{2}={3}".format(e.apiEndpoint,a.user_id,KP.CONSTANT.TOKEN,g.get(KP.SERIALIZE.TOKEN));return b}}]).controller("OrganizReportsCtrl",["$scope","Organization","ENV","localStorageService",function(a,b,c,d){function e(){a.loadMoreFlag=!1,b.getLessonsReports(f).then(function(b){var c=b.data;a.items=_.union(a.items||[],c),a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1})}var f={page:1};e(),a.loadMore=function(){f.page++,e()},a.downloadUrl=function(a){var b="{0}organization/download/{1}-lessons.csv?download_type=lesson-reports&{2}={3}".format(c.apiEndpoint,a.time,KP.CONSTANT.TOKEN,d.get(KP.SERIALIZE.TOKEN));return b}}]).controller("OrganizFinanceCtrl",["$scope","Organization","I18n_WITHDRAW",function(a,b,c){function d(){a.loadMoreFlag=!1,b.getPurchaseHistory(e).then(function(b){var c=b.data;a.items=_.union(a.items||[],c),a.meta=b.meta})["finally"](function(){a.loadMoreFlag=!1}),b.getTransferItc(e).then(function(b){var c=b.data;a.items_ad=_.union(a.items_ad||[],c),a.meta_ad=b.meta})["finally"](function(){a.loadMoreFlag=!1})}a.historyIndex=1,a.focus=function(b){a.historyIndex=b};var e={page:1};b.getStatistics().then(function(b){a.organizStatistics=b.data}),d(),a.loadMore=function(){e.page++,d()},a.getI18nKey=function(a){return c[a]}}]).controller("OrganizSettingsCtrl",["$scope","Organization","$rootScope","$timeout","EmptyPromise","$log",function(a,b,c,d,e,f){c.organization?a.settingInfo=angular.copy(c.organization):d(function(){a.settingInfo=angular.copy(c.organization)},1e3),a.countries=angular.copy(KP.COUNTRRY_ARR),a.checkData=function(){if(!a.settingInfo)return!1;var b=["display_name","legal_name","vat_number","country","billing_address","contacts","phone"],d=KP.Utils.getDiffValAttrNames(a.settingInfo,c.organization,b);return 0==d.length?!1:!0},a.settingsChange=function(){return a.checkData()?b.infoSetting(a.settingInfo).then(function(b){return a.$parent.initOrganizationData(),KP.API.SUCC},function(a){return KP.API.ERROR}):e.getEmptyPromise()}}]).controller("$$OrganizMembersTransferCtrl",["$scope","$rootScope","Organization","user_id","EmptyPromise","$log",function(a,b,c,d,e,f){c.postCreditsTransfer({get_available_itc:1,user_id:d}).then(function(b){a.memberItc=b.data});var g=b.organization.wallet_sv,h=a.formObj={transferType:"-1"};a.confirm=function(){a.error=null;var f,i={};return"-1"==h.transferType?(f=g,i.from_id=b.organization.id,i.to_id=d):(f=a.memberItc,i.to_id=b.organization.id,i.from_id=d),i.itc=KP.Utils.usdToCent(h.usd),i.pwd=h.password,f-i.itc<0?e.getEmptyPromise():c.postCreditsTransfer(i).then(function(b){return a.$close(-1*parseInt(h.transferType)*i.itc),KP.API.SUCC},function(b){return"incorrect_password"!=b.type?KP.API.ERROR:void(a.error=b)})}}]).controller("$$AddNewMemberCtrl",["$scope","Organization","$log",function(a,b,c){a.checkUsermail=function(){a.signup_form.signup_email.$invalid?(a.isInputErr=!0,a.isFormalErr=!0,a.isExistErr=!1):(a.isInputErr=!1,a.isFormalErr=!1),a.showcharacter=!1},a.confirm=function(){return a.formObj.operate="add_new_member",b.postMember(a.formObj).then(function(b){return b.data.success?(a.$close(1),KP.API.SUCC):void 0},function(b){a.error=b,"AccountEmailExist"==b.type?a.isExistErr=!0:a.isExistErr=!1})}}]),angular.module("kp.organization").service("Organization",["Restangular","$q","$timeout",function(a,b,c){var d=a.service("organization");return{getBaseInfo:function(){return d.one("info").get()},infoSetting:function(a){return d.one("info").doPOST(a)},getMembers:function(a){return d.one("members").get(a)},postCreditsTransfer:function(a){return d.one("transfer-itc").doPOST(a)},postMember:function(a){return d.one("members").doPOST(a)},getLessons:function(a){return d.one("lessons").get(a)},getLessonsReports:function(a){return d.one("lesson-reports").get(a)},getStatistics:function(a){return d.one("statistics").get(a)},getTransferItc:function(a){return d.one("transfer-itc").get(a)},getPurchaseHistory:function(a){return d.one("purchase-history").get(a)}}}]),angular.module("kp.config",[]).constant("ENV",{apiEndpoint:"https://www.italki.com/api/",classroomApiEndpoint:"https://classroom.italki.com/r/",newTeacherTime:"2018-01-17T00:00:00+0000",stripeKey:"pk_live_KzEtOaddbj5MOJLP0empCkVW",codename:"",debug:!1,cdn:{avatar:{us:"https://imagesavatar-static01.italki.com",cn:""},notebook:{us:"https://imagesnotebook-static01.italki.com",cn:""},article:{us:"https://imagesarticles-static01.italki.com",cn:""},"static":{cn:""}},i18n:{preferredLanguage:"en_us"},google:{clientId:"782956540856.apps.googleusercontent.com",apiKey:"l6MGiZgpmCRw-s0irGyS8X5R",scopes:["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/contacts.readonly"]},fb:{appId:"125933737436344",version:"v2.6",scope:"email"}}),angular.module("kp.customURL",[]).directive("dynamicCtrl",["$compile","$state","$stateParams","$log","$parse","Restangular",function(a,b,c,d,e,f){return{restrict:"A",terminal:!0,priority:1e5,link:function(e,g){var h=c.uname;f.one("uname").get({uname:h}).then(function(b){var f=b.data,i=angular.isObject;d.debug("custom url uname->",h,"result->",b);var j="",k="";i(f)&&(angular.isDefined(f.teacher_info_obj)?(j="TeacherProfileCtrl",k="/views/teacher/profile.html"):(j="UserProfileCtrl",k="/views/user/profile.bs.html"),g.removeAttr("dynamic-ctrl"),g.attr("ng-controller",j),e.viewUrl=k,c.id=f.id,a(g)(e))},function(){b.go("landing")})}}}]).controller("CustomUrlCtrl",["$scope","$stateParams","$state","Restangular","$log",function(a,b,c,d,e){}]),angular.module("kp",["base","angularMoment","LocalStorageModule","restangular","angularFileUpload","ui.select","angular-web-notification","ngAnimate","italki.directives","ui.bootstrap","bd.sockjs","facebook","cgBusy","ng-sortable","ngclipboard","kp.config","kp.passwordModal","kp.search","kp.course","kp.referral","kp.voucher","kp.course","kp.account","kp.setting","kp.user","kp.teacher","kp.finance","kp.dashboard","kp.article","kp.session","kp.contact","kp.community","kp.message","kp.notification","kp.singlePage","ngImgCrop","kp.customURL","kp.product","kp.events","kp.organization","kp.components","matchMedia"]).run(["$templateCache",function(a){var b='<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this), \'ui-select-group\': $select.isGrouped}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>',c='<div class="ui-select-match" ng-disabled="$select.disabled"><span tabindex="-1" class="form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder">{{$select.placeholder}}</span><span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span><a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn-link pull-right"><i class="fa fa-times" aria-hidden="true"></i></a></span></div>',d='<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text"autocomplete="off"tabindex="-1"aria-expanded="true"aria-label="{{ $select.baseTitle }}"aria-owns="ui-select-choices-{{ $select.generatedId }}"aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}"class="form-control ui-select-search"placeholder="{{$select.placeholder}}"ng-model="$select.search"ng-show="$select.searchEnabled && $select.open" /><div class="ui-select-choices"></div></div>';
a.put("italki/choices.tpl.html",b),a.put("italki/match.tpl.html",c),a.put("italki/select.tpl.html",d)}]).run(["$rootScope","Restangular","$filter",function(a,b,c){var d=function(b,c,d,e,f,g){return b?(b.server_time&&(a.server_time=b.server_time),b):b};b.addResponseInterceptor(d)}]).run(["localStorageService","$translate","UserService","DataLayerService","$q","$log","$timeout","$rootScope","$location","kpBrowserLan",function(a,b,c,d,e,f,g,h,i,j){function k(){l.promise.then(function(){var a=(new Date).getTime()-KP.kpLoadBegin<1200?300:0;g(function(){angular.element("#preLoader").remove(),window.prerenderReady=!0},a)})}h.BaseUri=document.baseURI;var l=e.defer();h.$on("$translateLoadingEnd",function(){f.debug("Translation files load done!"),l.resolve("translate files load done!")});var m=a.get(KP.SERIALIZE.TOKEN);if(f.debug("current token:"+m),m&&"/logout"!=i.path())c.restoreUserFromCache(),c.autoLogin(m)["finally"](function(){d.update(),k()});else{var n=a.cookie.get("linkParam"),o=function(){var b={ref:i.search().ref,utm_source:i.search().utm_source||"",utm_medium:i.search().utm_medium||"",utm_campaign:i.search().utm_campaign||""};KP.REF.userId=b.ref,KP.REF.utm_source=b.utm_source,KP.REF.utm_medium=b.utm_medium,KP.REF.utm_campaign=b.utm_campaign,a.cookie.set("linkParam",b)},p=function(){if(n.ref===i.search().ref){var a=i.search().utm_source||"",b=i.search().utm_medium||"",c=i.search().utm_campaign||"",d=!1,e=!1,f=!1;return n.utm_source==a&&(d=!0),n.utm_medium==b&&(e=!0),n.utm_campaign==c&&(f=!0),d&&e&&f?!0:!1}return angular.isUndefined(i.search().ref)?!0:!1};if(n&&p()?(KP.REF.userId=n.ref,KP.REF.utm_source=n.utm_source||"",KP.REF.utm_medium=n.utm_medium||"",KP.REF.utm_campaign=n.utm_campaign||""):i.search().ref&&o(),"/home"==i.path()||"/"==i.path()){var q=j.getFirstBrowserLanguage();q=q.substring(0,2),"cn"==KP.COUNTRY&&"zh"==q&&(window.location.href="https://www.italki.cn/home?utm_source=italki.com")}k()}}]).run(["$rootScope","$timeout","$state","$location","$stateParams","$translate","$window","UserService","$log","ENV","TeacherApplyAfter","LoginService","localStorageService","Restangular","kpBrowserLan","UserMustItemFirstModal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){b(function(){document.body.scrollTop=document.documentElement.scrollTop=0})}a.metas={},a.$state=c,a.$stateParams=e,a.$on("$resetScrollTop",function(){q()}),a.$on("$stateChangeSuccess",function(){q()}),a.$on("printHide",function(){a.printHide=!0}),a.$on("printShow",function(){a.printHide=!1}),a.$on("$stateChangeStart",function(b,e,f,g,j){i.debug("state from:",g,"from params",j,"to",e,"toParams",f,"search:",d.search()),a.$prevState=g,a.$prevStateParams=j;var k=(g.name,e.name),m=h.isOnline();if(m)if(("signin"===k||"signup"==k)&&(c.transitionTo("dashboard"),b.preventDefault()),"dashboard"==k){var n=o.getFirstBrowserLanguage();n=n.substring(0,2),"cn"==KP.COUNTRY&&"zh"==n&&(window.location.href="https://www.italki.cn/home?utm_source=italki.com",b.preventDefault()),a.isDashboard=!0}else a.isDashboard=!1;else e.data&&"user"===e.data.role&&(l.open(e.name),b.preventDefault())}),a.$on("$stateChangeSuccess",function(e,g,h,j,l){function o(){var a=r,b=KP.LANG[v].mo;return a.indexOf("?")>0?"{0}&hl={1}".format(r,b):"{0}?hl={1}".format(r,b)}var q=a.metas,r=d.absUrl(),s=r.match(/([\?&])hl=([a-zA-Z0-9_-]+)/i);s&&s.length>2&&(r=r.replace(s[0],""));var t=q.alternates=angular.isArray(q.alternates)?q.alternates:[{lang:"x-default",url:r}],u=t.length<2;t[0].url=r;for(var v=0;v<KP.LANG.length;v++)if(u)t.push({lang:KP.LANG[v].mo,url:o()});else{var w=t[v+1];w.lang=KP.LANG[v].mo,w.url=o()}if(g.data){var x=g.data.title;if(x)if(angular.isFunction(x)){var y=x();if(y.then)return void y.then(function(c){b(function(){a.title=c})});b(function(){a.title=y})}else f(x).then(function(c){b(function(){a.title=c})})}if(a.currentUser&&angular.isDefined(a.currentUser.id)&&4!=a.currentUser.register_status&&255!=a.currentUser.register_status){var z="onboarding.group_name",A=m.cookie.get(z),B="onboarding.teacher",C=m.cookie.get(B);"f"==A||"g"===A||"1"==C?c.go("onboarding"):c.go("dashboard")}var D="dashboard.onboarding";m.cookie.get(D);b(function(){if(a.currentUser){var b="onboarding.group_name",d=m.cookie.get(b),e="onboarding.teacher",f=m.cookie.get(e);if("b"!=d||f||(a.currentUser&&"2"==a.currentUser.register_status?1==a.currentUser.no_password?p.open(1):p.open(2):a.currentUser&&"3"==a.currentUser.register_status&&p.open(3)),"c"!=d||f||(a.currentUser&&"2"==a.currentUser.register_status?1==a.currentUser.no_password?p.open(1):p.open(2):a.currentUser&&"3"==a.currentUser.register_status?p.open(3):a.groupCdataRequested||n.one("account/onboardingtest").get().then(function(b){a.groupCdata=b.data,a.groupCdataRequested=!0,a.groupCdata&&0==a.groupCdata.is_finish&&1!=a.groupCdata.is_teacher_register&&p.open(5)},function(a){i.error(a)})),(4==a.currentUser.register_status||255==a.currentUser.register_status)&&"onboarding"==g.name){var h="groupD.search1",j=m.cookie.get(h);j&&c.go("teachers")}a.currentUser&&k.open()}},1e3)})}]).run(["$translate","GlobalObject","localStorageService","$rootScope","amMoment",function(a,b,c,d,e){var f=c.get("hl");angular.isObject(KP.HL)&&(f=KP.HL.flag,c.set("hl",KP.HL.flag)),angular.isString(f)&&a.use(f),d.$on("$translateChangeSuccess",function(){var d=a.use();if(d){c.set("hl",d);for(var f in KP.LANG)if(KP.LANG[f].flag==d){b.lang=KP.LANG[f];break}d=d.replace("_","-"),e.changeLocale(d),moment.locale(d)}KP.translateFlag=1})}]).run(["$rootScope","$timeout","SearchService","$location",function(a,b,c,d){void 0!==window.onpopstate&&(window.onpopstate=function(e){b(function(){var b=d.search();b&&b.messages||b.notifications?c.handlerLocationSearchObject():a.$emit("kp.BrowserBackOrForwardBtnClick",{$event:e})},200)})}]).run(["$rootScope","$timeout","$window","$location","$log","kpTitle",function(a,b,c,d,e,f){a.$on("kp.dataLayer.fired",function(a,g){e.debug("dataLayer fired with data:",g),angular.isArray(c.dataLayer)&&angular.isObject(g)&&b(function(){"virtualPageview"==g.event&&(g={event:g.event,virtualPageURL:g.url||d.url(),virtualPageTitle:g.title||f.title()}),c.dataLayer.push(g)},500)})}]).run(["Currency","$translate","$log","$rootScope","$location",function(a,b,c,d,e){c.debug("begin init currency instance"),d.currency=a,c.debug("location search:",e.search()),KP.SEARCH=e.search()}]).run(["$state",function(a){var b=a.transitionTo;a.transitionTo=function(a,c,d){return a.resolve||(a.resolve={}),a.resolve={_translations:["$translate",function(a){return a("TP540")}]},b(a,c,d)}}]).run(["$rootScope","$timeout","$window",function(a,b,c){a.$watch(function(){b(function(){c.dataLayer.push({event:"optimize.activate"})},0,!1)})}]),angular.element(document).ready(function(){angular.bootstrap(document,["kp"]),window.ng=angular;var a=!1;$(window).scroll(function(){var b=20,c=$(this).scrollTop(),d=c-b>0;a!=d&&(a=d,$("div .navbar").toggleClass("active",a))});var b=angular.element('<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=italkicom&async=1"></script>');angular.element(document.body).append(b)}),window.ng=angular,window.dataLayer=window.dataLayer||[],angular.module("kp.events",[]).service("Events",["Restangular","$log",function(a,b){function c(b){return a.one("tool/internalrecord").post("",b)}var d={};this.emit=function(a){return angular.isObject(a)||(a={}),c(angular.extend(a,d))},this.match=function(a){return!!d[a]},this.fill=function(a){angular.extend(d,a),b.debug("filled meta data -> ",a)}}]).run(["Events","$location",function(a,b){a.fill(b.search()),a.fill({url:b.absUrl()})}]),angular.module("kp").directive("uiIsState",["$state",function(a){return{restrict:"A",link:function(b,c,d){var e=a.$current.self.name,f=d.states.split(" ");for(var g in f)if(e.indexOf(f[g])>-1)return void $(c).addClass(d.uiIsState)}}}]).directive("kpShowOnRowHover",function(){return{restrict:"EA",scope:{parent:"@parent",hoverClass:"@hoverClass"},link:function(a,b,c){var d=b.closest(a.parent);d.bind("mouseenter",function(){d.addClass(a.hoverClass),b.show()}),d.bind("mouseleave",function(){d.removeClass(a.hoverClass),b.hide()})}}}).directive("kpFallbackAvatar",function(){var a="/static/images/no_pic150.jpg";return{link:function(b,c,d){c.bind("error",function(){angular.element(this).attr("src",a)})}}}).directive("kpAdjustSelectScale",["$window",function(a){return{restrict:"C",scope:{},link:function(a,b){a.changeSelectStyle=function(a){var b=window.innerWidth,c=(window.innerHeight,320),d=530,e=767,f=1.12,g=1.06,h=(1.04-1.06)/(e-d),i=(1.06-1.12)/(d-c);if(b>320&&530>b)for(var j=0;j<a.length;j++){var k=f+(b-c)*i;a[j].style.transform="scale("+k+",1)"}else{if(!(b>=530&&768>b))return 0;for(var j=0;j<a.length;j++){var k=g+(b-d)*h;a[j].style.transform="scale("+k+",1)"}}};var c=function(){a.changeSelectStyle(document.getElementsByClassName("ui-select-choices"))};c(),$(window).bind("resize",c),a.$on("destroy",function(){$(window).unbind("resize",c)})}}}]).directive("kpIsDebug",["ENV",function(a){return{restrict:"A",link:function(b,c){a.debug||$(c).hide()}}}]).directive("kpToggleSlideOut",["$rootScope",function(a){return function(b,c,d){var e="slideout";c.on("click",function(){var b=angular.element("body"),c=b.hasClass(e),d=angular.element("nav"),f=d.hasClass("visible-phone");if(!c){if(a.currentUser)var g=angular.element("#top nav.header-small").height();else if(f)var g=angular.element("nav.visible-phone").height();else var g=angular.element("#top nav.header-small").height();angular.element("nav.nav-sm").css({top:g+"px"})}c?b.removeClass(e):b.addClass(e)})}}]).directive("kpToggleSlideIn",["$rootScope",function(a){return function(a,b,c){var d="slideout";b.on("click",function(){var a=angular.element("body"),b=a.hasClass(d);b&&a.removeClass(d)})}}]).directive("hoverPopover",["$compile","$templateCache","$timeout","$rootScope",function(a,b,c,d){return{restrict:"A",link:function(a,b,e){d.insidePopover=!1,$(b).popover({title:e.hpTitle,content:e.hpContent,placement:e.hpPlacement,html:!0}),$(b).bind("mouseenter",function(e){c(function(){d.insidePopover||($(b).popover("show"),a.attachEvents(b))},200)}),$(b).bind("mouseleave",function(a){c(function(){d.insidePopover||$(b).popover("hide")},400)})},controller:["$scope","$element",function(a,b){a.attachEvents=function(a){$(".popover").on("mouseenter",function(){d.insidePopover=!0}),$(".popover").on("mouseleave",function(){d.insidePopover=!1,$(a).popover("hide")})}}]}}]),angular.module("kp").service("SearchService",["$location","NotificationModal","ItalkiMessageBox",function(a,b,c){function d(a){if(angular.isObject(a)){var d=a.messages,e=a.conversation,f=a.notifications;"action"==f?b.show(1):"other"==f&&b.show(2),"1"==d&&("new"==e?c.newChat():/^[0-9]+$/i.test(e)?c.chatWith(e):c.open())}}this.isSearchUrl=function(){var b=a.search();return b.messages||b.conversation||b.notifications?1:0},this.handlerSearchObject=function(){d(KP.SEARCH)},this.handlerLocationSearchObject=function(){var b=a.search();d(b)}}]),angular.module("kp").config(["$locationProvider","$logProvider","$httpProvider","$compileProvider","ENV",function(a,b,c,d,e){c.useApplyAsync(!0),a.html5Mode(!0),b.debugEnabled(e.debug),d.debugInfoEnabled(e.debug)}]).config(["$translateProvider","ENV",function(a,b){a.useSanitizeValueStrategy(""),KP.I18N.urlLoader?a.useUrlLoader("/lang"):a.useStaticFilesLoader({prefix:"i18n/",suffix:".json?v={0}".format(KP.VERSION)}),a.determinePreferredLanguage(),a.fallbackLanguage(KP.I18N.preferredLanguage)}]).config(["FacebookProvider","ENV",function(a,b){a.init(b.fb)}]).config(["$httpProvider",function(a){}]).config(["RestangularProvider","$httpProvider","ENV",function(a,b,c){b.defaults.transformRequest=function(a){var b=[];return angular.forEach(a,function(a,c){angular.isArray(a)?angular.forEach(a,function(a,d){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a))}):(a===!0&&(a=1),a===!1&&(a=0),b.push(encodeURIComponent(c)+"="+encodeURIComponent(a)))}),b.join("&")},b.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",c.debug?a.setBaseUrl(c.apiEndpoint):a.setBaseUrl(KP.API.URL),a.setDefaultRequestParams(KP.API.PARAMS)}]).config(["RestangularProvider",function(a){var b=function(a,b,c,d,e,f,g){if("get"==b){f._r=(new Date).getTime();var h=angular.element(document).injector(),i=h?h.get("$translate"):null,j=h?h.get("localStorageService"):null;if(j&&j.get("hl"))f.hl=j.get("hl").replace(/_/g,"-");else if(i){var k=i.use();k&&(f.hl=k.replace(/_/g,"-"))}}return a};a.addFullRequestInterceptor(b)}]).config(["localStorageServiceProvider",function(a){a.prefix="kp"}]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","https://www.youtube.com/**","https://youtube.com/**","https://*.vimeo.com/**","http://*.vimeo.com/**","http://youtu.be/**","https://youtu.be/**","http://**.youku.com/**","https://dn-betaitalki.qbox.me/**","https://obxnwt7gf.qnssl.com/**","https://www.google.com/**","https://www.surveymonkey.com/**","https://pt.surveymonkey.com/**","https://ru.surveymonkey.com/**","https://es.surveymonkey.com/**"])}]),angular.module("kp").controller("ApplicationCtrl",["$rootScope","$scope","DataLayerService","SearchService","NotificationModal","$$kpInstantLessonAlertPanelService","UserService","DesktopNotification","NotificationRender","localStorageService","$kpSocket","$timeout","$state","Restangular","$log","Finance","Events","$location","KPNotify","DataLayerService","Account",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,c,t){function u(b){var c=v(b);if(c)return b.length>3?void y.$renderNotificationCount(b):void x(b,function(b){function c(a){try{var b=a.session_dic_json,c=angular.fromJson(b);if(angular.isArray(c))return c[0];if(angular.isObject(c))return c}catch(d){return null}}var d=b.type,e=b.v;if(d&&(d=parseInt(d,10)),2003==e||2018==e||2013==e||2008==e||1999==e||2023==e||2089==e||2095==e){o.debug("instant request:",b.noti_content);var i=c(b.noti_content);switch(null==i&&"session_dict"in b&&(i=b.session_dict),e){case 1999:l(function(){a.currentUser.instant_tutoring_status=0}),f.suspended();break;case 2003:f.newRequest(i,b.user_data);break;case 2089:case 2023:f.timeout(i,b.user_data);break;case 2018:case 2013:f.canceled(i,b.user_data);break;case 2095:f.canceledBySystem(i,b.user_data);break;case 2008:f.accepted(i,b.user_data),g.resetPaymentAccountCache()}}if(1001==d&&(z.muc=z.muc+1),1998==d)return z.smuc=parseInt(b.v,10),void(z.pmuc||(z.muc=z.smuc));if(1025==d)return z.pmuc=parseInt(b.v,10),void(z.smuc?z.muc=z.pmuc+z.smuc:z.muc=z.pmuc);if(1024==d)return z.anc==z.nuc&&(z.nuc=parseInt(b.v,10)),void(z.anc=parseInt(b.v,10));var j=g.currentUser();j&&(10==e&&angular.isDefined(j.instant_tutoring_status)&&(a.currentUser.instant_tutoring_status=0),[1001,2006,2007,2008,2010,2027,2031,2035,2047,2048,2049,2050,2053,2054,2059,2060,2061].indexOf(e)>-1&&(g.resetRevenueAccountCache(),g.resetPaymentAccountCache())),w(b.chrome_icon)&&h.show(b)})}var v=angular.isArray,w=angular.isDefined,x=angular.forEach,y=(angular.isObject,angular.toJson,this);a.$on("kp_account_quick_login_success",function(a,b){c.update(),k.getSocket(u),f.restoreFromServer()}),a.$on("kp_account_login_success",function(b,e){c.update();var g="onboarding.group_name",h=j.cookie.get(g),i="onboarding.teacher",l=j.cookie.get(i);a.currentUser&&"1"==l?m.go("teacherApply.step1"):!a.currentUser||"c"!=h&&"b"!=h?4==a.currentUser.register_status||255==a.currentUser.register_status?m.transitionTo("dashboard").then(function(){d.handlerSearchObject()}):"f"==h?m.go("onboarding"):(n.one("experiment/get_my_group").get({experiment_name:"UD_phase1"}),n.one("experiment/get_my_group").get({experiment_name:"UD_phase2"}),n.one("experiment/get_my_group").get({experiment_name:"onboarding_bcfg"}).then(function(a){"c"==a.data.group_name?(j.cookie.set(g,"c"),m.transitionTo("dashboard").then(function(){d.handlerSearchObject()})):"b"==a.data.group_name?(j.cookie.set(g,"b"),m.transitionTo("dashboard").then(function(){d.handlerSearchObject()})):"g"==a.data.group_name?(j.cookie.set(g,"g"),m.go("onboarding")):(j.cookie.set(g,"f"),m.go("onboarding"))}),function(a){m.transitionTo("dashboard").then(function(){d.handlerSearchObject()})}):m.transitionTo("dashboard").then(function(){d.handlerSearchObject()}),k.getSocket(u),f.restoreFromServer()}),a.$on("kp_account_autoLogin_success",function(b,c){if(k.getSocket(u),f.restoreFromServer(),d.handlerSearchObject(),4!=a.currentUser.register_status&&255!=a.currentUser.register_status){var e="onboarding.group_name";n.one("experiment/get_my_group").get({experiment_name:"UD_phase1"}),n.one("experiment/get_my_group").get({experiment_name:"UD_phase2"}),n.one("experiment/get_my_group").get({experiment_name:"onboarding_bcfg"}).then(function(a){"c"==a.data.group_name?(j.cookie.set(e,"c"),m.go("dashboard")):"b"==a.data.group_name?(j.cookie.set(e,"b"),m.go("dashboard")):"g"==a.data.group_name?(j.cookie.set(e,"g"),m.go("onboarding")):(j.cookie.set(e,"f"),m.go("onboarding"))}),function(){m.go("dashboard")}}else"landing"==m.current.name&&m.transitionTo("dashboard")}),b.$on("kp_account_login_out",function(a,b){}),b.$on("kp_finance_overview",function(){p.overview().then(function(b){b.data&&angular.extend(a.currentUser,{payment_account:b.data.payment_account,revenue_account:b.data.revenue_account,referral_account:b.data.referral_account})})});var z=a.notifyObj={};this.$renderNotificationCount=function(a){var b=0,c=0,d=0,e=0,f=0;angular.forEach(a,function(a,g){switch(a.type){case"muc":b=a.v;break;case"suc":c=a.v;break;case"noc":d=a.v;break;case"noac":e=a.v;break;case"nue":f=a.v}}),z.pmuc=b||"",z.smuc=c||"",z.muc=b+c||"",z.pnuc=e||"",z.unuc=f||"",z.onc=d,z.anc=e-d,z.nuc=e+f||""}}]).controller("TopNavCtrl",["$scope","$location","$kpSocket","TestNotificationModal","$translate","GlobalObject","Account","$log","$state","$rootScope","ScheduleSessionModal","UserService","RedeemCodeService","Restangular","EmailNotActive","$modal","ShowSaveMsg","contactRes","$timeout","localStorageService","kpBrowserLan",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){a.langArr=KP.LANG,a.langArr1=KP.LANSEL;var v=KP.LANG[0],w=e.use();if(w)for(var x in KP.LANG)if(KP.LANG[x].flag==w){v=KP.LANG[x];break}f.lang=v,a.GlobalObject=f,a.useLang=function(b){f.lang=b,e.use(b.flag),a.currentUser&&g.setUserProfile().post({locale:b.mo}).then(function(){h.debug("sync display language settings to backend success."),a.currentUser.locale=b.mo})},a.contacts=function(){if(1==j.currentUser.is_premium&&0==j.currentUser.is_teacher)i.go("contacts.teacher");else{if(1!=j.currentUser.is_teacher)return r.teacher().get().then(function(a){0==a.data.length?i.go("contacts.partner"):i.go("contacts.teacher")});i.go("contacts.student"),h.info("goToSubPage fired!")}},a.signOut=function(a){a.preventDefault();var b=j.notifyObj;angular.forEach(b,function(a,c){a&&(b[c]=0)}),g.logout().then(function(a){j.$broadcast("kp_account_sign_out"),c.close(),l.loginOut(),i.go("landing")},function(a){q.open(angular.element("<body>"),"logout failed!")})},a.showTestNotificationPopup=function(){d.show()},a.openRedeemModal=function(){m.open()},a.openSchedule=function(){k.open(a)},a.updateIsAvailableInstantTutoring=function(){var b=a.currentUser.is_available_instant_tutoring?1:0;g.setTeacherProfile({is_available_instant_tutoring:b}).then(function(b){b.data.param_flag.is_available_instant_tutoring||(a.currentUser.is_available_instant_tutoring=!a.currentUser.is_available_instant_tutoring)},function(){})},a.openModalInstance=function(){o.open()},a.openPwdSet=function(){p.open({scope:a,size:"",templateUrl:"/views/component/password.not.set.html",controller:["$scope","$modalInstance","Account","userInfo",function(a,b,c,d){a.pwdObj={new_password:"",new_password1:""},a.validatePWD=function(a){return a&&a.length>=6&&a.length<=20},a.savePwd=function(){if(!a.doPwd){if(a.doPwd=!0,a.btnPwd=!0,a.validatePWD(a.pwdObj.new_password)&&a.pwdObj.new_password1==a.pwdObj.new_password)return c.passwordSet().post({password:a.pwdObj.new_password}).then(function(a){return b.close(1),KP.API.SUCC},function(b){a.errorMsg=b.msg,a.btnPwd=!1,a.doPwd=!1});a.btnPwd=!1,a.doPwd=!1}}}],resolve:{userInfo:["UserService",function(a){return a.restoreUserFromCache(),a.currentUser()}]}}).result.then(function(b){b&&(a.currentUser.no_password=0)})};var y="notification.app",z=(moment.utc([2018,0,1,0,0,0,0]).unix(),moment().utc().unix(),u.getFirstBrowserLanguage());z=z.substring(0,2),a.closeMobile=function(){j.mobileShow=!1,t.cookie.set(y,!0)},s(function(){var a=t.cookie.get(y,!0);a&&(j.mobileShow=!1)},500),a.goDownload=function(){KP.isIos&&(window.location.href="https://itunes.apple.com/us/app/italki/id1140000003"),KP.isAndroid&&(window.location.href="https://play.google.com/store/apps/details?id=com.italki.app&hl=en-us")},(KP.isIos||KP.isAndroid&&"cn"!==KP.COUNTRY)&&(j.mobileShow=!0),s(function(){var a=t.cookie.get(y,!0);a&&(j.mobileShow=!1)},500),a.goDownload=function(){KP.isIos&&(window.location.href="https://itunes.apple.com/us/app/italki/id1140000003"),KP.isAndroid&&(window.location.href="https://play.google.com/store/apps/details?id=com.italki.app&hl=en-us"),t.cookie.set(y,!0)},(KP.isIos||KP.isAndroid&&"cn"!==KP.COUNTRY)&&(j.mobileShow=!0)}]).controller("BottomCtrl",["$scope","$translate","Account","GlobalObject","$log",function(a,b,c,d,e){a.langArr=KP.LANG,a.langArr1=KP.LANSEL;var f=KP.LANG[0],g=KP.LANG[0],h=angular.lowercase(b.use());if(h){var i=angular.copy(h).substr(0,2);h=["ar","cs","de","eo","es","eu","fa","fr","it","ja","ko","nl","pl","pt","ru","th","tr","vi"].indexOf(i)>-1?i:"zh"===i?"zh_tw"===h?"zh_tw":"zh_cn":"en_us";for(var j in KP.LANG)if(KP.LANG[j].flag==h){f=KP.LANG[j];break}}d.lang=f,a.GlobalObject=d,a.onchange=function(){for(var f in KP.LANG)if(KP.LANG[f]==d.lang){g=KP.LANG[f];break}d.lang=g,b.use(g.flag),a.currentUser&&c.setUserProfile().post({locale:g.mo}).then(function(){e.debug("sync display language settings to backend success."),a.currentUser.locale=g.mo})}}]).directive("tooltipImage",function(){return{restrict:"A",link:function(a,b,c){$(b).hover(function(){$(b).tooltip("show")},function(){$(b).tooltip("hide")})}}}),angular.module("kp").run(["Restangular","FullRestangular","$log","$state",function(a,b,c,d){var e=function(a,b,e,f,g,h){c.debug("from interceptor",g);var i=angular.isObject(a),j=i?a.error:null,k=(g.status,i?a.redirect:null);if(angular.isObject(j))return c.warn("server response error { type: "+j.type+"  msg: "+j.msg),h.reject(j);if(angular.isObject(k)){switch(k.page){case"package":k.data&&d.go("sessionPackageDetail",{id:k.data});break;case"zendesk":k.data&&(window.location.href=k.data)}return h.reject(k)}return a};a.addResponseInterceptor(e),b.addResponseInterceptor(e)}]).run(["Restangular","FullRestangular","KPNotify","UserService","ENV","$log","$state",function(a,b,c,d,e,f,g){var h=function(a,b){var e=a.status;f.debug("api error handler->response:",a);var h=a.data;switch(e){case 401:break;case 400:break;case 417:d.loginOut(),g.go("landing");break;case 404:break;case 502:c.appendWithContent("failed to connect server,Please refresh later :(");break;case 500:c.appendWithContent("Sorry, it looks like there's been an error. Please contact support@italki.com.");break;case 599:}return b.reject(h?h.error:h),!1};a.setErrorInterceptor(h),b.setErrorInterceptor(h)}]),angular.module("kp").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home"),b.when("/","/home"),b.when("/register","/signup"),a.state("kp",{templateUrl:"/views/main.html"}).state("customUrl",{url:"/{uname:[a-z][a-z0-9._-]{4,18}[a-z0-9]}",templateUrl:"/views/customurl/index.html",controller:"CustomUrlCtrl"})}]),angular.module("kp").controller("italkiAutocompleteController",italkiAutocompleteController),italkiAutocompleteController.$inject=["$document","$scope"],angular.module("kp").directive("italkiAutocomplete",italkiAutocompleteDirective),italkiAutocompleteDirective.$inject=["$document"],angular.module("kp").filter("isAMTimeStr",function(){return function(a,b){var c=[];return angular.isArray(a)&&angular.forEach(a,function(a){angular.isDefined(b)?a>"12:00"&&c.push(a):"12:01">a&&c.push(a)}),c}}).filter("toAMTimeStr",function(){return function(a){var b="";if(angular.isString(a)){var c=moment(a,"HH:mm");c.isValid()&&(b=c.format("hh:mm"))}return b}}).controller("$$KPOldCalendarCtrl",["$scope","$attrs","UserService","$element","$log","$rootScope","Restangular",function(a,b,c,d,e,f,g){function h(a){var b=moment(a,"YYYY/MM/DD");return b.isValid()?b.format("LL"):""}function i(){var b=a.weeks.length;return b>2?h(a.weeks[0].d)+"-"+h(a.weeks[b-1].d):""}function j(b){var c=b.week_schedule_s;if(t=b.tea_used_time_dic||[],u=b.stu_used_time_dic||[],angular.isArray(c)){var d=c.length,e=[];for(var f in c)f!=d-1&&e.push(c[f]);a.weeks=e,a.rangeOfDay=i()}}function k(){a.weeks=null,a.rangeOfDay="",r&&angular.extend(z,{is_teacher:1}),q&&angular.extend(z,{excluded_session_id:q}),y&&angular.extend(z,{duration:y}),g.one("teacher",a.teacher.id).one("available").get(z).then(function(a){e.debug("fetch from old calendar teacher available. Result:",a),j(a.data)});var b="UTC";f.currentUser&&(b=f.currentUser.timezone_iana);var c=moment().tz(b).add(1,"days"),d=moment().tz(b).add(3,"days");s?(v=d.format("YYYY/MM/DD"),w=d.format("HH:mm")):(v=c.format("YYYY/MM/DD"),w=c.format("HH:mm"))}function l(a){var b=a.match(/([0-9]{2}):([0-9]{2})/),c=0;if(b.length>2){var d=parseInt(b[1],10),e=parseInt(b[2],10);return c=d,e>0&&(c+=.5),c}throw Error("error time str")}function m(a,b,c,d,e){if(!y||a!=c||b==d)return"";var f=15*parseInt(y,10)*1/60,g=l(d)-l(b);return e&&0>g?"":(g=Math.abs(g),f>g?"kp-calendar-student-used":"")}var n=this,o=!!b.selectable,p=c.currentUser(),q=a.excludeLessonId,r=!!a.teacher.currentUserIsTeacher,s=!!a.shouldBeAfter3Days;a.disablePrev=!0,n.selecteditem=null,this.constants={am:moment("09:00","HH:mm").format("A"),pm:moment("15:00","HH:mm").format("A")},p&&(a.isAM=!!p.is_am),a.i18n=h;var t,u,v,w,x=a.disabledItems||[],y=a.lessonLength,z={page:1,is_get_used_time:1};a.isValidDate=function(b){var c="";if(!b||!t||!u)return c;var d=b.day,f=b.time;if((v>d||d==v&&w>=f)&&(c=a.teacherUsedClass||"kp-calendar-teacher-used"))return b.used=!0,c;for(var g in t)if(t.hasOwnProperty(g)){var h=t[g];if(g==d&&h.indexOf(f)>-1){e.debug(d,f,"teacher used.","Class:",a.teacherUsedClass||"kp-calendar-teacher-used"),c=a.teacherUsedClass||"kp-calendar-teacher-used";break}for(var i in h){var j=h[i];if(c=m(d,f,g,j,!0))break}if(c)break}if(c)return b.used=!0,c;for(var i in x){var h=x[i];if(h.day==d&&h.time==f){e.debug(d,f,"should disabled already selected.","Class:","kp-calendar-student-used"),c="kp-calendar-student-used";break}if(c=m(d,f,h.day,h.time))break}if(c)return b.used=!0,c;n.selecteditem;if(c)return b.used=!0,c;for(var g in u)if(u.hasOwnProperty(g)){var h=u[g];if(g==d&&h.indexOf(f)>-1){e.debug(d,f,"student used.","Class:",a.studentUsedClass||"kp-calendar-student-used"),c=a.studentUsedClass||"kp-calendar-student-used";break}for(var i in h){var j=h[i];if(c=m(d,f,g,j,!0))break}if(c)break}if(c)b.used=!0;else if(b.used=!1,b.selected)return"kp-calendar-selected";return c},this.onNextWeek=function(){a.disablePrev=!1,z.page=++z.page,k()},this.onPrevWeek=function(){z.page=--z.page,1==z.page&&(a.disablePrev=!0),k()},a.select=function(b,c){o&&(c.used||(e.debug("selected",b,c),n.selecteditem&&(n.selecteditem.selected=!1),n.selecteditem=c,c.selected=!0,a.ontimeupdate&&a.ontimeupdate({$event:b,$item:{day:c.day,time:c.time}})))},a.onNextWeek=this.onNextWeek,a.onPrevWeek=this.onPrevWeek,k()}]).directive("kpOldCalendar",["$rootScope","Restangular","$log",function(a,b,c){return{restrict:"EA",templateUrl:"/views/kp/calendar.old.html",scope:{teacher:"=",disabledItems:"=",availabilityTimeClass:"@availabilityTimeClass",teacherUsedClass:"@",studentUsedClass:"@",lessonLength:"=",shouldBeAfter3Days:"=",excludeLessonId:"=",ontimeupdate:"&",isAm:"="},replace:!0,controller:"$$KPOldCalendarCtrl",controllerAs:"calendar",link:function(a,b,d,e){c.debug("enter old calendar teacher id:",a.teacher.id,e)}}}]),angular.module("kp").filter("kpLanguageLevel",["$translate","$log",function(a,b){return function(b){if(!angular.isDefined(b)||!angular.isNumber(b))return"";var c=a.instant;return["","A1:"+c("C0019"),"A2:"+c("C0020"),"B1:"+c("C0903"),"B2:"+c("C0021"),"C1:"+c("C0905"),"C2:"+c("C0022"),c("C0023")][b]||""}}]).filter("amDate",["$filter","$rootScope",function(a,b){return function(c,d,e,f){var g,h=d.translate();return b.currentUser&&b.currentUser.is_am&&h.indexOf("HH:mm")>-1&&(h=h.replace("HH:mm","h:mm")+"A"),g=f&&angular.isString(f)?moment(c).tz(f):e?moment(c):moment(a("clearTZ")(c)),g.format(h)}}]).filter("amAdd",["$filter","$rootScope",function(a,b){return function(a,b){return moment(a).add(b,"minutes").format("YYYY-MM-DD HH:mm")}}]).filter("kpToUsd",function(){return function(a){var a=(a/100).toFixed(2);return a}}).filter("kpSup",function(){return function(a){var b=a.toString().split(".")[0],c=a.toString().split(".")[1],d=("."+c).sup(),a=b+""+d;return a}}).filter("kpToItcToCurrency",function(){return function(a){return a/10}}).constant("MonthNumber",{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"June",7:"July",8:"Aug",9:"Sept",10:"Oct",11:"Nov",12:"Dec"}).filter("MonthName",["MonthNumber",function(a){return function(b){return a[b]}}]).filter("trustResource",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("reverse",function(){return function(a){return a.slice().reverse()}}),angular.module("kp").service("experimentTest",["Restangular",function(a){this.ABTest=function(b){return a.one("experiment/get_my_group").get({experiment_name:b})}}]).directive("italkiClickTest",["$parse","LoginAndActive","experimentTest","ShowSaveMsg","EmailNotActive","$timeout","LoginService","CourseListModal","$stateParams",function(a,b,c,d,e,f,g,h){return{scope:{pt:"=",cid:"=",pid:"=",typee:"=",teacher:"=",isMe:"=",pagState:"@",isScope:"="},compile:function(){return function(a,d){var e=a.pt,f=a.cid,g=a.pid,i=a.typee,j=a.pagState,k=a.isScope;d.on("click",function(d){a.isMe||b.open()&&c.ABTest("SchedulingFlowForClassroom").then(function(b){var c=b.data;if(a.group_name=c.group_name,"newflow1"===c.group_name){var d;if("profile"===j){if(!a.teacher.is_schedule)return;if(3===e&&(0==a.teacher.trial_left_count||a.teacher.has_had_trial||!a.teacher.teacher_info_obj.has_trial))return}d=3===e?"trial":"schedule";var l={teacherId:a.teacher.id};return f&&(l.priceId=f),("findTeacherSchedule"==j||"scheduleSessionModal"==j)&&k.$close(),void h.openNewSchedule(d,l)}if(a.teacher)switch(j){case"profile":if(a.teacher.is_schedule){if(3===e&&(0==a.teacher.trial_left_count||a.teacher.has_had_trial||!a.teacher.teacher_info_obj.has_trial))return;h.open(a.teacher.id,f,g,e,i)}break;case"contact":case"userCard":case"article":case"sessionDetail":h.open(a.teacher.id);break;case"findTeacherSchedule":case"scheduleSessionModal":k.$close(),h.open(a.teacher.id)}})})}}}}]),angular.module("kp").factory("kpCalendar",["$animate","$compile","$rootScope","$controller","$q","$http","$templateCache",function(a,b,c,d,e,f,g){return function(h){function i(a){return m.then(function(b){s||j(b,a)})}function j(e,f){if(s=angular.element(e),0===s.length)throw new Error("kp-calendar:template contains no elements; you need to wrap text nodes");if(a.enter(s,r),n=c.$new(),f)for(var g in f)n[g]=f[g];var h=d(p,{$scope:n});q&&(n[q]=h),b(s)(n)}function k(){var b=e.defer();return s?a.leave(s,function(){n.$destroy(),s=null,b.resolve()}):b.resolve(),b.promise}function l(){return!!s}if(!(!h.template^!h.templateUrl))throw new Error("Expected kp calendar have one of either `template` or `templateUrl`");var m,n,o=h.template,p=(h.timezone,h.includeToday,h.showController||!0,h.controller||angular.noop),q=h.controllerAs,r=angular.element(h.container||document.body),s=null;if(o){var t=e.defer();t.resolve(config.template),m=t.promise}else m=f.get(h.templateUrl,{cache:g}).then(function(a){return a.data});return{activate:i,deactivate:k,active:l}}}]).directive("kpCalendar",["$rootScope","$sce","$log","$timeout",function(a,b,c,d){
var e=function(a,b){var c=moment.utc().add(1,"days"),d=b?c.add(b,"days"):c,e=[];e.push(d.clone().tz(a).startOf("day"));for(var f=1;7>f;f++){var g=e[f-1].clone().add(1,"days").tz(a);e.push(g)}return e};return{restrict:"EA",templateUrl:"/views/kp/calendar.html",scope:{availability:"=availability",deleted:"=deleted",availabilityTimeClass:"@availabilityTimeClass",deletedTimeClass:"@deletedTimeClass"},replace:!0,link:function(a,b,f){var g="cal"+a.$id;b.attr("id",g);var h=f.selectable;a.$timezone||(a.$timezone=f.timezone||"UTC"),a.$courseType||(a.$courseType=f["course-type"]||"0");var i=0;a.$current=-7;var j=function(){a.$daysOfWeek=e(a.$timezone,a.$current),i=a.$daysOfWeek[0].unix();var b=$("#"+g+" table.hour tr");c.debug(b),b.each(function(a,b){var c=$($(this).children()[1]),d=c.children();d.each(function(a,b){var c=3600*parseFloat($(this).attr("data-offset"));$(this).attr("data-actual-utc",i+c)})})},k=function(){a.$current<7||(a.$current-=7,j(),a.$emit("kp_cal_prev_clicked",a.$daysOfWeek[0]),c.debug(i+" kp cal prevDays clicked startTimestamp"))},l=function(){a.$current+=7,j(),a.$current&&a.$emit("kp_cal_next_clicked",a.$daysOfWeek[0]),c.debug(i+" kp cal nextDays clicked startTimestamp")};l(),a.$nextDays=l,a.$prevDays=k,a.$watch("availability",function(a,b){}),a.$watch("deleted",function(a,b){});var m=$("#"+g+" div.hour-block.hour-select-selected");h&&m.hover(function(){$(this).addClass("hour-hovering")},function(){$(this).removeClass("hour-hovering")});var n=null;h&&m.on("click",function(){n&&$(n).removeClass("booked"),n!=this?(n=this,$(n).addClass("booked"),a._startTime=$(this).attr("data-actual-utc"),c.debug(a._startTime),d(function(){a.$emit("course_start_time_chosen",a._startTime)},200)):n=null}),a.$on("$destroy",function(){m.off("hover"),m.off("click")})}}}]).filter("moment",function(){return function(a,b){return a._isAMomentObject?a.format(b):""}}).filter("timezone",function(){return function(a,b,c){return c=c||"",a._isAMomentObject?a.tz(b||"UTC").format(c):""}});var kpNotifyError=angular.$$minErr("KPNotifyError");angular.module("kp").service("KPNotify",["$timeout",function(a){function b(a){_.pull(f,a)}function c(a,b){return e({content:a,delay:b||3e3})}function d(a,b){for(m in f)if(a==f[m].key)return f[m].content=b,!0;return!1}function e(c){if(!angular.isObject(c)||!c.content)throw kpNotifyError("invalid msg object",c);var d=(new Date).getTime()+"_"+Math.floor(1e4*Math.random());return c.key=d,c.time=(new Date).getTime(),c.status=c.status||"success",c.delay>0&&a(function(){b(c)},c.delay||3e3),f.push(c),c}var f=[];return{append:e,appendWithContent:c,remove:b,notifications:f,replaceContent:d}}]).directive("kpNotify",["KPNotify",function(a){return{restrict:"EA",templateUrl:"/views/component/notify.html",link:function(b,c,d){b.notifications=a.notifications},controller:["$scope",function(b){this.deleteItem=function(b){a.remove(b)}}]}}]).directive("kpNotifyItem",function(){return{restrict:"EA",require:"^kpNotify",templateUrl:"/views/component/notify.item.html",link:function(a,b,c,d){a.removeMe=function(a){d.deleteItem(a)}}}}),angular.module("kp").directive("kpLoadMoreButton",function(){return{restrict:"E",templateUrl:"/views/kp/loadmore.btn.html"}}),angular.module("kp").directive("kpLoading",function(){return{restrict:"EA",scope:{indicator:"="},replace:!0,templateUrl:"/views/component/loading.html",link:function(a,b,c){}}}).directive("kpFullScreenLoading",function(){return{restrict:"EA",scope:{indicator:"="},replace:!0,templateUrl:"/views/component/full.screen.loading.html",link:function(a,b,c){}}}),angular.module("kp").directive("kpVideoDisplay",["$modal","$log","geeService",function(a,b,c){return{restrict:"EA",scope:{url:"=videoUrl",title:"@videoTitle"},link:function(d,e,f){d.error=function(){b.error("loading video url:"+d.url+"got error.")};var g=function(b){function e(a){var b=/["](https:\/\/player.vimeo.com\/[^"]+)["]/i,c=b.exec(a.html);c&&(f.url=c[1],g())}b.stopPropagation(),b.preventDefault();var f=KP.Utils.getViedoUrl(d.url);d.urlObj=f;var g=function(){a.open({scope:d,size:"lg",templateUrl:"/views/component/view.video.modal.html",windowClass:"teacher_video",controller:["$scope",function(a){a.loaded=!1,a.loadUrl=function(){a.loaded=!0,a.$digest()}}]})};f.canplay&&!f.vimeo?g():f.canplay&&f.vimeo?(window.vimeo_callback=e,c.createVimeoScript(f.url,"vimeo_callback")):!f.canplay&&f.youku&&g()};e.on("click",g),d.$on("$destroy",function(){e.off("click",g)})}}}]),angular.module("kp").directive("kpVideoPlay",["$modal","$log","geeService",function(a,b,c){return{restrict:"EA",scope:{teacher:"=",title:"@videoTitle"},link:function(d,e,f){d.error=function(){b.error("loading video url:"+d.url+"got error.")},d.isQiniu=!1;var g=function(b){b.stopPropagation(),b.preventDefault();var e=function(){a.open({scope:d,size:"lg",templateUrl:"/views/component/video.modal.html",windowClass:"teacher_video",controller:["$scope",function(a){a.loaded=!1,d.playUrlObj.qiniu&&(a.loaded=!0),a.loadUrl=function(){a.loaded=!0,a.$digest()}}]})};d.playUrlObj={url:"",canplay:0};var f=function(a,b){function f(a){var b=/["](https:\/\/player.vimeo.com\/[^"]+)["]/i,c=b.exec(a.html);c&&(d.playUrlObj.url=c[1],e())}var g=KP.Utils.getViedoUrl(a);d.playUrlObj.url=g.url,g.canplay&&g.youtube&&"cn"!==KP.COUNTRY&&"ir"!==KP.COUNTRY?(d.playUrlObj.canplay=1,d.playUrlObj.youtube=g.youtube,d.playUrlObj.youtubeID=g.ytID,b&&e()):g.canplay&&g.vimeo&&"cn"!==KP.COUNTRY&&"kh"!==KP.COUNTRY&&"id"!==KP.COUNTRY&&"my"!==KP.COUNTRY&&"th"!==KP.COUNTRY&&"vn"!==KP.COUNTRY?(d.playUrlObj.canplay=1,d.playUrlObj.vimeo=1,b&&(window.vimeo_callback=f,c.createVimeoScript(d.playUrlObj.url,"vimeo_callback"))):!g.canplay&&g.youku?(d.playUrlObj.url=g.url,d.playUrlObj.canplay=0,b&&e()):g.canplay&&g.qiniu&&(d.playUrlObj.url=g.url,d.playUrlObj.canplay=g.canplay,d.playUrlObj.qiniu=g.qiniu,d.playUrlObj.youtube=g.youtube,b&&e())};f(d.teacher.teacher_info_obj.video_url,0),d.playUrlObj.canplay&&angular.isString(d.teacher.teacher_info_obj.video_url)&&d.teacher.teacher_info_obj.video_url?f(d.teacher.teacher_info_obj.video_url,1):angular.isString(d.teacher.oms_apply_video_url)&&d.teacher.oms_apply_video_url&&f(d.teacher.oms_apply_video_url,1)};e.on("click",g),d.$on("$destroy",function(){e.off("click",g)})}}}]),angular.module("kp").directive("kpTimeSchedule",["$modal","$log","$rootScope",function(a,b,c){return{restrict:"EA",scope:{teacher:"=teacher"},link:function(d,e,f){var g=function(){window._bt&&_bt.track("checked_schedule",{teacher_ID:d.teacher.id,teacher_name:d.teacher.nickname,teacher_type:d.teacher.is_pro?"pro":"tutor"}),b.debug("look up teacher time schedule",d.teacher.id);var e=c.$new();e.teacher=angular.copy(d.teacher),c.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"/teacher/{0}/schedule/time".format(d.teacher.id),title:"Schedule Lesson : Pick TIme & Date"});a.open({scope:e,templateUrl:"/views/component/time.schedule.new.html",windowClass:"time-schedule",controller:["$scope","CourseListModal","$state","LoginAndActive","$log","$rootScope","User",function(a,b,c,d,e,f,g){e.debug("About to open course list modal");var h=a.teacher.id;g.getPermission(h).then(function(b){a.canSchedule=!!b.data.is_schedule,e.info("Get permission: ",b.data.is_schedule)}),document.documentElement.style.height=window.innerHeight+"px",a.isScope=a,a.go=function(b){a.$close(),c.go("teacher",{id:b})}}]})};e.on("click",g),d.$on("$destroy",function(){e.off("click",g)})}}}]).directive("kpCourseTimeSelector",["$modal","$log",function(a,b){return{restrict:"EA",scope:{teacher:"=teacher"},link:function(c,d,e){var f=function(){b.debug("look up teacher time schedule",c.teacher.id);a.open({scope:c,size:"lg",templateUrl:"views/component/course.time.selector.html",windowClass:"time-schedule"})};d.on("click",f),c.$on("$destroy",function(){d.off("click",f)})}}}]),angular.module("kp").directive("kpCountdown",["$interval","$timeout",function(a,b){return{restrict:"E",replace:!0,template:function(){return'<div class="kp-countdown counter-separated counter-sm"><span id="countdownTimeStr"></span></div>'},link:function(c,d,e){function f(a){return(10>a?"0":"")+a}var g,h=e.end,i=!1,j=$(d).children("#countdownTimeStr"),k=function(){g&&a.cancel(g),j&&j.text("00:00")};c.$on("$destroy",function(){k()}),h&&(h=parseInt(h,10),h>0&&(new Date).getTime()<h?g=a(function(){var a=(new Date).getTime(),d=h-a,e=d/1e3,g=parseInt(e/60,10),l=parseInt(e%60,10);if(48e4>=d&&!i&&(c.$emit("kp.countdown.notify"),i=!0),0>=e)return c.$emit("kp.countdown.stoped"),void k();var m=f(g)+":"+f(l);b(function(){j.text(m)})},1e3):(c.$emit("kp.countdown.notify"),k()))}}}]),angular.module("kp").directive("kpReportConcern",["$modal","$log","$rootScope","$timeout","Restangular",function(a,b,c,d,e){return{restrict:"EA",scope:{reportItem:"=reportItem"},template:'<a class="text-light-gray" href="javascript:void(0);"><i class="fa fa-exclamation-triangle"></i>&nbsp;{{"C0110"|t}}</a>',replace:!0,link:function(f,g,h){var i=function(){if(c.currentUser&&255==c.currentUser.register_status){b.debug("Report Concern for type:",f.reportItem.reportType,"content id:",f.reportItem.reportId);var g;e.one("complaint").get({oppo_item_type:f.reportItem.reportType,oppo_item_id:f.reportItem.reportId}).then(function(b){"0"==b.data?f.noReport=!0:f.noReport=!1,f.rcontent={desc:"",isSubmit:!1},f.isValidDesc=function(a){return a?0==f.rcontent.desc.length||f.rcontent.desc.length>3&&f.rcontent.desc.length<501:f.rcontent.desc.length>3&&f.rcontent.desc.length<501},g=a.open({scope:f,size:"",templateUrl:"/views/component/kp.report.concern.html",windowClass:"report-concern"})}),f.reportConcern=function(){if(f.isValidDesc(!1)){f.rcontent.isSubmit=!0;var a={oppo_item_type:f.reportItem.reportType,oppo_item_id:f.reportItem.reportId,oppo_item_content:"",reason_description:f.rcontent.desc};return e.one("complaint").post("",a).then(function(a){return KP.API.SUCC})["finally"](function(){d(function(){g.close()},2e3)})}},f.closeW=function(){g.close()}}};g.on("click",i),f.$on("$destroy",function(){g.off("click",i)})}}}]).directive("kpReportConcerna",["$modal","$log","$rootScope","$timeout","Restangular",function(a,b,c,d,e){return{restrict:"EA",scope:{reportItem:"=reportItem"},link:function(f,g,h){var i=function(){if(c.currentUser&&255==c.currentUser.register_status){b.debug("Report Concern for type:",f.reportItem.reportType,"content id:",f.reportItem.reportId);var g;e.one("complaint").get({oppo_item_type:f.reportItem.reportType,oppo_item_id:f.reportItem.reportId}).then(function(b){"0"==b.data.toString()?f.noReport=!0:f.noReport=!1,f.rcontent={desc:"",isSubmit:!1},f.isValidDesc=function(a){return a?0==f.rcontent.desc.length||f.rcontent.desc.length>3&&f.rcontent.desc.length<501:f.rcontent.desc.length>3&&f.rcontent.desc.length<501},g=a.open({scope:f,size:"",templateUrl:"/views/component/kp.report.concern.html",windowClass:"report-concern"})}),f.reportConcern=function(){if(f.isValidDesc(!1)){f.rcontent.isSubmit=!0;var a={oppo_item_type:f.reportItem.reportType,oppo_item_id:f.reportItem.reportId,oppo_item_content:"",reason_description:f.rcontent.desc};return e.one("complaint").post("",a).then(function(a){return KP.API.SUCC})["finally"](function(){d(function(){g.close()},2e3)})}},f.closeW=function(){g.close()}}};g.on("click",i),f.$on("$destroy",function(){g.off("click",i)})}}}]),angular.module("kp").directive("kpAddFriend",["$modal","$log","$rootScope","Restangular","UserService",function(a,b,c,d,e){return{restrict:"EA",scope:{friendItem:"=friendItem"},link:function(e,f,g){var h=function(){if(c.currentUser){b.debug("Friend ID:",e.friendItem.friendId),e.rcontent={message:"",isSubmit:!1},e.isValidMsg=function(a){return a?0==e.rcontent.message.length||e.rcontent.message.length>3&&e.rcontent.message.length<501:e.rcontent.message.length>3&&e.rcontent.message.length<501};var f=a.open({scope:e,size:"",templateUrl:"/views/component/kp.add.friend.html",windowClass:"FriendRequest"});e.msg="Thanks!",e.addFriend=function(){if(e.isValidMsg(!1)){e.rcontent.isSubmit=!0;var a={receiver_id:e.friendItem.friendId,reason_description:e.rcontent.message};d.one("follower-requests").post("",a).then(function(a){a.error?e.msg=a.error.msg+" : "+a.error.type:e.msg="Message was sended!"})}},e.closeW=function(){f.close()}}};f.on("click",h),e.$on("$destroy",function(){f.off("click",h)})}}}]).directive("kpScrollDiv",["$timeout",function(a){return{restrict:"AE",scope:!1,link:function(b,c,d){angular.element(window).bind("scroll",function(){e()});var e=function(){var a=c.offset().top+c.height(),b=$(window).scrollTop(),d=($(document).height(),$(window).height()),e=c.find("div:first"),f="static"==e.css("position");f?a>b+d&&e.css("position","fixed"):b+d>=a&&e.css("position","static")};b.$parent.updateDiv=function(b){b||(b=100),a(function(){e()},b)}}}}]).service("UserMustItemSecondModal",["$rootScope","$modal","Restangular","CourseListModal","$log","$state",function(a,b,c,d,e,f){function g(d){var e=d||a.$new();b.open({scope:e,size:"lg",templateUrl:"views/component/user.must.item.second.html",windowClass:"second-modal",backdrop:"static",controller:["$scope",function(a){a.selObj={findT:"",findF:""},a.showOne=!1,a.showTwo=!1,a.done=function(){""==a.selObj.findT?a.showOne=!0:a.showOne=!1,""==a.selObj.findF?a.showTwo=!0:a.showTwo=!1,a.showOne||a.showTwo||c.one("account/contact-permission").post("",{find_teacher:a.selObj.findT,allow_contact:a.selObj.findF}).then(function(b){b.data.success&&a.$close()})}}]})}return{open:g}}]).service("EmptyPromise",["$q","$timeout",function(a,b){this.getEmptyPromise=function(c){var d=a.defer(),e=d.promise;return c?b(function(){d.reject("")},c):d.reject(""),e.then(function(a){return"r_a"},function(a){return"e_a"})}}]),angular.module("kp").service("ADResource",["Account","$q",function(a,b){var c=null;this.fetch=function(d){return c?c.promise:(c=b.defer(),a.getSiteMessage().get({location:d}).then(function(a){c.resolve(a)},function(a){c.reject(a)})["finally"](function(){c=null}),c.promise)}}]).directive("kpAdSystem",function(){return{restrict:"AE",replace:!0,templateUrl:"/views/component/ad.system.html",scope:{loc:"@"},controller:["$scope","$location","Account","GlobalObject","ADResource",function(a,b,c,d,e){var f="DAS_";a.loc&&(f=a.loc.substr(0,4));var g={location:f};a.adParam=g;var h=d[g.location+"ad"],i=function(){var b=[];return angular.forEach(h,function(c){c.location.indexOf(a.loc)>-1&&b.push(c)}),b},j=function(){var b=i();if(b.length>0){var c=[],d=[],e=[],f=[],g=[];angular.forEach(b,function(a){1==a.device_size?c.push(a):2==a.device_size?d.push(a):3==a.device_size?e.push(a):f.push(a)}),c.length>0&&g.push(c[Math.round(Math.random()*(c.length-1))]),d.length>0&&g.push(d[Math.round(Math.random()*(d.length-1))]),e.length>0&&g.push(e[Math.round(Math.random()*(e.length-1))]),f.length>0&&g.push(f[Math.round(Math.random()*(f.length-1))]),a.hs=g}else a.hs=[]};h?j():e.fetch(f).then(function(a){h=a.data,d[g.location+"ad"]=h,j()}),a.loc_one=a.loc.substring(a.loc.length)}]}}),angular.module("kp").directive("kpAddFriendRequest",["$rootScope","$location","$translate","$modal","Restangular","$log","LoginService","EmailNotActive","errorPopup",function(a,b,c,d,e,f,g,h,i){c.instant;return{restrict:"EA",scope:{receiver_id:"=receiverId"},link:function(c,f,j){var k=function(){if(a.$emit("kp.dataLayer.fired",{event:"virtualPageview",url:"{0}/add".format(b.path())}),!g.open()&&!h.open()&&a.currentUser&&255==a.currentUser.register_status){c.data={receiver_id:c.receiver_id,message:"KP443".translate()||"Hi, I'd like to be language partners on italki."};var f=d.open({scope:c,size:"",templateUrl:"/views/kp/add.friend.request.html",windowClass:"add-friend-request"});c.addFriendRequest=function(){var a=c.data.message.length;4>a||a>500||(c.processing=!0,e.one("contact/friend/request").post("",c.data).then(function(a){a.data.success>0&&f.close()},function(a){"ReachedDailyLimit"==a.type&&(f.close(),i.open()),c.errorMsg=a.msg,c.processing=!1}))}}};f.on("click",k),c.$on("$destroy",function(){f.off("click",k)})}}}]),angular.module("kp").directive("kpStatusButton",["$translate",function(a){return{restrict:"A",scope:{indicator:"@"},link:function(b,c,d){var e,f=d.dataLoadingText,g=a.instant,h=$(c),i=h.is("input");f=f?g(f):"processing...",e=i?h.val():h.text(),b.$watch(d.indicator,function(a,b){a&&a!=b?(h.addClass("disabled"),i?h.val(f):h.text(f)):(i?h.val(e):h.text(e),h.removeClass("disabled"))})}}}]),angular.module("kp").directive("kpSendMessage",["$modal","$log","$rootScope","Restangular","UserService","$filter","$state",function(a,b,c,d,e,f,g){return{restrict:"EA",scope:{messageItem:"=messageItem"},link:function(b,e,h){var i=function(){if(c.currentUser&&"255"==c.currentUser.register_status){var e;d.one("message/with/"+b.messageItem.userid).get({type:b.messageItem.type,page_size:3}).then(function(c){b.rcontent={message:"",clickFlag:!1},b.items=c.data,b.isValidMsg=function(a){return a?KP.Utils.bLength(b.rcontent.message)<2001:(b.rcontent.clickFlag=!0,b.rcontent.message.length>0&&KP.Utils.bLength(b.rcontent.message)<2001)},b.remainLen=function(){return 2e3-KP.Utils.bLength(b.rcontent.message)},e=a.open({scope:b,size:"",templateUrl:"/views/component/kp.send.message.html",windowClass:"send-message"})}),b.sendMsg=function(){if(b.isValidMsg(!1)){var a={type:b.messageItem.type,content:f("delHtmlTag")(b.rcontent.message)};d.one("message/with/"+b.messageItem.userid).post("",a).then(function(a){e.close()})}else b.rcontent.clickFlag=!0},b.closeW=function(){e.close()},b.gotomessage=function(a){e.close(),g.transitionTo("messageDetail",{id:a})}}};e.on("click",i),b.$on("$destroy",function(){e.off("click",i)})}}}]),angular.module("kp").directive("kpBlockUser",["$rootScope","alertModal","$translate","Restangular",function(a,b,c,d){var e=c.instant;return{restrict:"EA",scope:{blockData:"="},link:function(c,f,g){var h=function(){a.currentUser&&255==a.currentUser.register_status&&b.open(c,e("C0083"),e("C1008")).then(function(a){d.one("contact/block").post("",{blockee_id:c.blockData.blockee_id}).then(function(b){b.data.success>0&&"function"==typeof c.blockData.callBack&&c.blockData.callBack(c.blockData.args),a.$close()},function(a){c.doFlag=!1,b.warn(a.type+" : "+a.msg)})})};f.on("click",h),c.$on("$destroy",function(){f.off("click",h)})}}}]),angular.module("kp").directive("kpRangeSlider",["$document",function(a){return{restrict:"E",scope:{model:"=",step:"@",min:"=",max:"=",limitation:"="},template:'<div class="kp-slider-control"><div class="kp-slider"></div></div>',link:function(b,c){var d=b.model,e=c.find(".kp-slider-control"),f=c.find(".kp-slider"),g=angular.element('<div class="kp-slider-track-low"></div>'),h=angular.element('<div class="kp-slider-selection"></div>'),i=angular.element('<div class="kp-slider-track-high"></div>'),j=angular.element('<div ontouchstart="" class="kp-slider-handle kp-slider-handle-min"></div>'),k=angular.element('<div ontouchstart="" class="kp-slider-handle kp-slider-handle-max"></div>'),l={current:0,min:0,max:0};f.append(g),f.append(h),f.append(i),e.append(j),e.append(k);var m=function(c){var g=e.find(".kp-slider-handle-"+c),h=function(a){var e=a.screenX;a.originalEvent.targetTouches&&(e=a.originalEvent.targetTouches[0].clientX),b.$apply(function(){var a=(e-l.current)/f.width()*(b.max-b.min);switch(c){case"min":l.max-l.min-Math.round(a)<b.limitation?d.min=l.max-b.limitation:l.min+a<b.min?d.min=b.min:d.min=l.min+Math.round(a);break;case"max":l.max+Math.round(a)-l.min<b.limitation?d.max=l.min+b.limitation:l.max+a>b.max?d.max=b.max:d.max=l.max+Math.round(a)}return n()})},i=function(){g.removeClass("kp-slider-handle-active"),a.off("mousemove",h),a.off("touchmove",h),a.off("mouseup",i)};return function(b){b.preventDefault(),g.addClass("kp-slider-handle-active");var c=b.screenX;b.originalEvent.targetTouches&&(c=b.originalEvent.targetTouches[0].clientX),l.current=c,l.min=d.min,l.max=d.max,a.on("mousemove",h),a.on("touchmove",h),a.on("mouseup",i),a.on("touchend",i)}},n=function(){var a=(d.min-b.min)/(b.max-b.min)*100,c=(d.max-b.min)/(b.max-b.min)*100;e.find(".kp-slider-handle-min").css("left",a+"%"),e.find(".kp-slider-handle-max").css("left",c+"%"),g.css("width",a+"%"),h.css("width",c-a+"%"),i.css("width",100-c+"%")};j.on("mousedown",m("min")),j.on("touchstart",m("min")),k.on("mousedown",m("max")),k.on("touchstart",m("max")),b.$watch("model",n,!0)}}}]),function(a,b){}(window,window.angular),angular.module("kp").service("kpTitle",["$window","$translate","$state","$rootScope",function(a,b,c,d){this.title=function(c){return c?void(angular.isFunction(c)?a.document.title=c():b(c).then(function(b){a.document.title=b})):a.document.title},this.reset=function(){var a=c.$current;angular.isObject(a.data)&&a.data.title?this.title(a.data.title):this.title(d.title)}}]).directive("kpTitle",["$translate","$window","$rootScope",function(a,b,c){return{restrict:"EA",scope:{params:"=params"},link:function(d,e,f){var g=f.suffix;g=g?" - "+a.instant(g):"";var h=f.title;if(h){var i=a.instant(h);if(d.params)for(var j=d.params,k=j.length;k--;)i=i.replace(new RegExp("\\{"+k+"\\}","gm"),j[k]);b.document.title=i+g,c.title=b.document.title}}}}]).directive("kpNoFound",function(){return{scope:{items:"="},restrict:"AE",replace:!0,template:'<div class="noresult-text text-lg text-center text-muted" ng-show="items&&items.length==0"><img class="rounded" src="/static/images/icon_norecord.png"><br><span ng-bind-html="tips|t"></span></div>',controller:["$scope","$element","$attrs",function(a,b,c){c.tips?a.tips=c.tips.toString():a.tips="WK005"}]}}).directive("kpAddThis",["TeacherApplyService","$timeout","$window","$location",function(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"/views/component/add.this.html",link:function(e,f,g){var h=function(){c.addthis?(KP.initAddthisFlag||(addthis.init(),KP.initAddthisFlag=1),KP.initAddthisFlag&&b(function(){c.addthis_share.title=c.document.title,addthis.toolbox(".addthis_toolbox")},1e3)):b(h,500)};a.getLoginPromise().then(function(a){window.addthis_share&&(window.addthis_share.url=d.absUrl(),a&&(window.addthis_share.url+="?ref="+a.id)),h()})}}}]).directive("kpMoveAddthisToHere",["$timeout","$window",function(a,b){return{link:function(c,d,e){var f,g=$("#addthis_div_page"),h=function(){if(b.addthis&&KP.initAddthisFlag){var c=g.find("div");c&&(f=$(c[0]),$(d).append(f))}else a(h,500)};g&&h(),c.$on("$destroy",function(){g&&f&&g.append(f)})}}}]),angular.module("kp").directive("kpUserCard1",["User","$compile","$controller","$rootScope","$q","$templateCache","$http","ItalkiMessageBox","CourseListModal","alertModal","contactRes","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){return e.when(f.get(o)||g.get(o)).then(function(a){return angular.isObject(a)?(f.put(o,a.data),a.data):a})}var n={},o="/views/kp/user.card.html",p='<div id="{cardId}" class="popover popover2 right card fade in" onclick="event.stopPropagation()||(event.cancelBubble = true);"><div class="kp-loading" style="width: 30px;height: 30px;"></div></div>',q=function(a,b){var c=a.user;a.chatWithUC=function(){h.chatWith(c.id)},a.contactWithUC=function(){h.contactWith(c),a.removeCacheUser()},a.scheduleUC=function(){i.open(c.id)},a.removeCacheUser=function(){delete n[c.id],b.remove()},a.deleteFriend=function(){j.open(a,"C0050".translate(),"C1008".translate()).then(function(b){k.friend().remove({user_id:c.id}).then(function(c){c.data.success>0&&a.removeCacheUser(),b.$close()})})}},r=function(c,e){if(c>0){var f=d.$new();n.hasOwnProperty(c)?(f.user=n[c],q(f,e),m().then(function(a){e.html(b(a)(f))})):a.getCardInfo(c).then(function(a){n[c]=a.data,f.user=a.data,q(f,e),m().then(function(a){e.html(b(a)(f))})})}};return{restrict:"EA",scope:{userId:"=userId"},link:function(a,b,c){var d="card_"+a.$id+"_"+a.userId;a.cardId=d,a.hideDiv=function(){var a=$("#"+d);a.length>0&&a.hide()},b.css("cursor","auto"),b.css("position","relative"),b.on("mouseover",function(){var c=$("#"+d);c.length>0?c.show():(b.append(p.replace("{cardId}",d)),c=$("#"+d),r(a.userId,c))}),b.on("mouseleave",function(){l(function(){a.hideDiv(),console.dir("aaa")},300)})}}}]).directive("kpUserCard",["$rootScope","$injector","$compile","User","CommonService","$timeout",function(a,b,c,d,e,f){var g={},h="/views/kp/user.card.html",i=e.getLessionPopDiv();i.addClass("popover popover2 right card fade in usercard"),i.on("click",function(){event.stopPropagation()||(event.cancelBubble=!0)});var j=b.get("$controller"),k=function(b,f){if(b>0){var i=a.$new();g.hasOwnProperty(b)?(i.user=g[b],j("UserCardInfoCtrl",{$scope:i,element:f,UserCache:g}),e.getTemplate(h).then(function(a){f.html(c(a)(i))})):(f.html('<div class="kp-loading" style="width: 30px;height: 30px;"></div>'),d.getCardInfo(b).then(function(a){g[b]=a.data,i.user=a.data,j("UserCardInfoCtrl",{$scope:i,element:f,UserCache:g}),e.getTemplate(h).then(function(a){f.html(c(a)(i))})}))}};return{restrict:"EA",scope:{userId:"=userId"},link:function(a,b,c){b.css("cursor","auto"),b.css("position","relative"),b.on("mouseover",function(){f(function(){0==b.find(".usercard").length&&(b.append(i),k(a.userId,i))},100)}),b.on("mouseleave",function(){f(function(){i.remove()},100)})}}}]).controller("UserCardInfoCtrl",["$scope","ItalkiMessageBox","CourseListModal","alertModal","contactRes","element","UserCache",function(a,b,c,d,e,f,g){var h=a.user;a.chatWithUC=function(){b.chatWith(h.id),f.remove()},a.contactWithUC=function(){b.contactWith(h),f.remove(),delete g[h.id]},a.deleteFriend=function(){d.open(a,"C0050".translate(),"C1008".translate()).then(function(a){e.friend().remove({user_id:h.id}).then(function(b){b.data.success>0&&delete g[h.id],a.$close()})}),f.remove()}}]),angular.module("kp").directive("kpFacebookOpenGraph",["FacebookOpenGraphManager",function(a){var b='<meta property="{0}" content="{1}">',c=document.head,d=angular.element,e=function(a){a&&(a.type&&d(c).append(b.format("og:type",a.type)),a.url&&d(c).append(b.format("og:url",a.url)),a.title&&d(c).append(b.format("og:title",a.title)),a.description&&d(c).append(b.format("og:description",a.description)),a.description_facebook&&d(c).append(b.format("og:description",a.description_facebook)),a.image&&d(c).append(b.format("og:image",a.image)),a.switter_card&&d(c).append(b.format("twitter:card",a.switter_card)),a.url&&d(c).append(b.format("twitter:url",a.url)),a.title&&d(c).append(b.format("twitter:title",a.title)),a.description_switter&&d(c).append(b.format("twitter:description",a.description_switter)),a.image&&d(c).append(b.format("twitter:image",a.image)))},f=function(){angular.element("meta[property^=og]").remove()};return{restrict:"E",link:function(b,c,d){b.og=a.get(),b.$watchCollection("og",function(a){a&&e(a)}),b.$on("$destroy",function(){f()})}}}]).service("FacebookOpenGraphManager",function(){var a={title:"",image:""};this.get=function(){return a},this.update=function(b){_.merge(a,b)}}),angular.module("kp").directive("kpGoClassroom",["$modal","$log","Session","ENV",function(a,b,c,d){return{restrict:"EA",scope:{sessionObj:"="},link:function(b,e,f){var g=function(){if(KP.isMobile)a.open({size:"md",templateUrl:"/views/dashboard/modal/mobile.modal.html",controller:["$scope",function(a){a.session_item=b.sessionObj,c.getSkypeAccount({session_id:a.session_item.session_id}).then(function(b){a.session_item.skye_account=b.data.skye_account})}]});else{var e;e=d.classroomApiEndpoint+b.sessionObj.session_id,window.location.href=e}};e.on("click",g),b.$on("$destroy",function(){e.off("click",g)})}}}]),angular.module("kp").constant("OnBoardingTeacherCountry",{english:[{v:"CA",l:"Canada"},{v:"GB",l:"United Kingdom"},{v:"US",l:"United States"}],spanish:[{v:"AR",l:"Argentina"},{v:"CO",l:"Colombia"},{v:"MX",l:"Mexico"},{v:"ES",l:"Spain"},{v:"VE",l:"Venezuela"}],french:[{v:"CA",l:"Canada"},{v:"FR",l:"France"}],japanese:[{v:"JP",l:"Japan"}],german:[{v:"DE",l:"Germany"}],chinese:[{v:"CN",l:"China"}],italian:[{v:"IT",l:"Italy"}],russian:[{v:"RU",l:"Russian Federation"}]}),angular.module("kp").controller("UserMustItemFirstCtrl",userMustItemFirstCtrl),userMustItemFirstCtrl.$inject=["$rootScope","$scope","$state","$timeout","$translate","Account","DataLayerService","EmailNotActive","OnBoardingTeacherCountry","Restangular","UserService","localStorageService","step"],angular.module("kp").service("UserMustItemFirstModal",["$rootScope","$modal",function(a,b){function c(c,d){if(!a.isOpen){a.isOpen=1;var e=a.$new();b.open({scope:e,size:"lg",templateUrl:"/views/component/user.must.item.first.html",windowClass:"first-modal",backdrop:"static",keyboard:!1,controller:"UserMustItemFirstCtrl",resolve:{step:function(){return c?c.toString():""},data:function(){return d||{}}}})}}return{open:c}}]),angular.module("kp").service("$kpSocket",["socketFactory","$log","KPNotify","UserService","$timeout",function(a,b,c,d,e){function f(){i=a({url:KP.SOCKET.URL})}function g(a){var b=a.content.match(/([0-9]+)/);b&&(b[0]>2?e(function(){c.replaceContent(a.key,a.content.replace(b[0],b[0]-1))&&g(a)},1e3):c.replaceContent(a.key,"KP310".translate()))}function h(a){return f(),j=[a],i.setHandler("open",function(){k=!0,q=0,b.debug("socket open"),KP.API.PARAMS[KP.CONSTANT.TOKEN]&&i.send(l({type:"auth",token:KP.API.PARAMS[KP.CONSTANT.TOKEN]}))}).setHandler("heartbeat",function(){i.send(l({type:"h"}))}).setHandler("close",function(){if(k=!1,b.debug("socket closed"),d.currentUser()){m++;var f=n;if(q>0&&(f=q*p),f>o)return void c.appendWithContent("KP311".translate(),-1);q>0&&g(c.appendWithContent("KP309".translate().replace("{0}",Math.round(f/1e3)),f-1e3)),q=f,e(function(){h(a)},f)}}).setHandler("message",function(a){b.debug("socket message",a);var c=angular.fromJson(a.data);angular.forEach(j,function(a){try{a(c)}catch(d){b.debug("send message exception: "+d)}})}),i}var i,j,k=!1,l=angular.toJson,m=0,n=5e3,o=15e4,p=1.6,q=0;this.close=function(){i&&(k=!1,i.close(),i=null)},this.send=function(a){return k&&angular.isObject(a)&&i.send(l(a)),i},this.appendHandler=function(a){i&&angular.isFunction(a)&&j.push(a)},this.cleanHandler=function(){if(angular.isArray(j))for(;j.length>1;)j.pop()},this.getSocket=h}]),angular.module("kp").run(["$templateCache",function(a){"use strict";a.put("/views/account/active.user.html",'<kp-loading indicator="loaded"></kp-loading><style type="text/css">#preLoader {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    background-color: white;\n    z-index: 9999;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-family: \'PingFang SC\', \'Roboto\', "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;\n  }\n\n  .kp-loading {\n    z-index: 999;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin: -15px 0 0 -15px;\n    border-bottom: 3px solid rgb(245, 191, 187);\n    border-left: 3px solid rgb(245, 191, 187);\n    border-right: 3px solid rgb(245, 191, 187);\n    border-top: 3px solid rgb(255, 67, 56);\n    border-radius: 100%;\n    height: 50px;\n    width: 50px;\n    -webkit-animation: rot .5s infinite linear;\n    -moz-animation: rot .5s infinite linear;\n    animation: rot .5s infinite linear;\n  }\n\n  .kp-loading2 {\n    z-index: 999;\n    margin: 0;\n    border-bottom: 3px solid rgb(245, 191, 187);\n    border-left: 3px solid rgb(245, 191, 187);\n    border-right: 3px solid rgb(245, 191, 187);\n    border-top: 3px solid rgb(255, 67, 56);\n    border-radius: 100%;\n    height: 50px;\n    width: 50px;\n    -webkit-animation: rot .5s infinite linear;\n    -moz-animation: rot .5s infinite linear;\n    animation: rot .5s infinite linear;\n  }\n\n  @-webkit-keyframes type {\n    from {\n      width: 0\n    }\n  }\n\n  @-webkit-keyframes rot {\n    from {\n      -webkit-transform: rotate(0deg);\n    }\n    to {\n      -webkit-transform: rotate(359deg);\n    }\n  }\n\n  @-moz-keyframes rot {\n    from {\n      -moz-transform: rotate(0deg);\n    }\n    to {\n      -moz-transform: rotate(359deg);\n    }\n  }\n\n  @keyframes rot {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(359deg);\n    }\n  }</style><div id="preLoader"><div style="position: absolute;top: 50%;left: 50%;width: 100%;margin-left: -50%;margin-top:-100px;text-align: center"><div style="width: 50px; height: 50px; margin: 0 auto"><div class="kp-loading2"></div></div><h3 style="margin-top: 20px; font-weight: bold">One moment...</h3><h4><div ng-if="showError"><div ng-switch="errorType"><div ng-switch-when="CodeError">CodeError</div><div ng-switch-when="NotUser">NotUser</div><div ng-switch-when="HasConfirm">HasConfirm</div><div ng-switch-when="MysqlError">MysqlError</div><div ng-switch-default></div></div></div></h4></div></div>'),
a.put("/views/account/connect.html","<kp-notify></kp-notify>"),a.put("/views/account/facebook.hasemail.html",'<form name="fb_has_email_form" ng-submit="submit()"><div class="modal-header">{{\'KP432\'|t}}</div><div class="modal-body"><header>{{\'KP434\'|t|format:email}} {{\'KP435\'|t}}</header><div class="form-group w-icon" ng-hide="!error"><div class="alert alert-warning animated shake" ng-bind="error.msg"></div></div><h5>{{\'KP436\'|t|format:email}}</h5><div class="form-group w-icon"><label for="fb-password">{{\'ST229\'|t}}</label><input type="password" id="fb-password" name="password" class="form-control input-lg" placeholder="Password" ng-model="user.password" ng-required></div><div class="help-block" ng-hide="fb_has_email_form.password.$valid">{{\'KP433\'|t}}</div></div><div class="modal-footer form-actions"><button type="submit" class="btn btn-primary">{{\'LN116\'|t}}</button></div></form>'),a.put("/views/account/facebook.noemail.html",'<form name="fb_no_email_form" ng-submit="submit()"><div class="modal-header">{{\'KP432\'|t}}</div><div class="modal-body"><header>{{\'MH230\'|t}}</header><div class="form-group w-icon" ng-hide="!error"><div class="alert alert-warning animated shake" ng-bind="error.msg"></div></div><div class="form-group w-icon"><label for="fb-email">{{\'UR013\'|t}}</label><input type="email" id="fb-email" name="email" class="form-control input-lg" placeholder="Email" ng-model="user.email" ng-required></div><div class="help-block" ng-hide="fb_no_email_form.email.$valid">{{\'KP433\'|t}}</div></div><div class="modal-footer form-actions"><button type="submit" class="btn btn-primary">{{\'LN116\'|t}}</button></div></form>'),a.put("/views/account/quick.login.html",'<form ng-submit="login()"><div class="modal-header">Login</div><div class="modal-body"><div class="form-group w-icon" ng-hide="!error"><div class="alert alert-warning animated shake" ng-if="error.type==\'UserDeactivated\'"><div ng-bind="\'ST208\'|t"></div><div ng-if="error.msg==\'user\'" ng-bind="\'ST209\'|t"></div></div><div class="alert alert-warning animated shake" ng-if="error.type!=\'UserDeactivated\'" ng-bind="error.msg"></div></div><div class="form-group w-icon"><input type="email" name="signin_username" id="username_id" class="form-control input-lg" placeholder="Email" ng-model="user.LOGIN_PA_USERNAME" required> <span class="fa fa-user signin-form-icon"></span></div><div class="form-group w-icon"><input type="password" name="signin_password" id="password_id" class="form-control input-lg" placeholder="Password" ng-model="user.LOGIN_PA_PASSWORD" required> <span class="fa fa-lock signin-form-icon"></span></div></div><div class="modal-footer form-actions"><input type="submit" class="signin-btn bg-primary"></div></form>'),a.put("/views/account/recaptcha.html","<div></div>"),a.put("/views/account/set.new.password.html",'<div class="page-signup" style=""><div id="page-signup-bg"><div class="overlay"></div></div><div class="signup-container animated bounceInUp"><div class="signup-form"><div class="" ng-hide="!error.show"><div class="alert alert-warning animated shake" ng-if="error.type==-10012"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_ACCESS_POST__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-10013"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_DECRYPT_TICKET_FAIL__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-10014"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_USER_RESET_PASSWORD_OBJ_NOT_EXIST__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-10015"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_UPDATE_TIME_NOT_MATCH__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-1"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_UPDATE_TIME_TIMEOUT__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-2"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_USER_LOGIN_OBJ_NOT_EXIST__PRIVATE</span></div><div class="alert alert-warning animated shake" ng-if="error.type==-3"><span ng-if="error.msg">{{error.msg}}</span> <span ng-if="!error.msg">RESET_PASSWORD_SET_NEW_PASSWORD_EC_PASSWORD_LENGTH_WRONG</span></div></div><div class="alert alert-success" ng-if="updateSucc">{{\'C1002\'|t}}</div><div ng-if="!updateSucc"><div class="grid-gutter-margin-b"><h2 class="margin-0">{{\'UR064\'|t}}</h2></div><div class="form-group"><label translate="ST153"></label><input type="password" class="form-control" ng-model="pwdObj.new_password"> <span ng-hide="validatePWD(pwdObj.new_password)||(pwdObj.new_password==\'\')" class="help-block text-danger">{{\'ST155\'|t|format:6:20}}</span></div><div class="form-group"><label translate="ST154"></label><input type="password" class="form-control" ng-model="pwdObj.new_password1"> <span ng-hide="pwdObj.new_password1==pwdObj.new_password" class="help-block text-danger">{{\'UR039\'|t}}</span></div><div class="form-group"><button class="btn btn-primary" italki-click-with-spinner="savePwd()" nologin="1"></button></div></div></div></div><div class="have-account">{{\'C0084\'|t}} <a ui-sref="signin">{{\'C0071\'|t}}</a></div><div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div><div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div></div><div></div>'),a.put("/views/account/signin.div.html",'<style>button.login_fb {\n    background: #4e69a2 url(/static/images/Facebook_24px_White.png) 8px 6px no-repeat;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    text-shadow: 0px 0px 4px #2F4585;\n    padding-left: 60px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n  a.login_we {\n    background: #44b549;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    padding-left: 10px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n  .landing-logo{\n    display: block;\n    background: url(/static/svg/landing-logo.svg) 20px 20px no-repeat;\n    width: 140px;\n    height:65px;\n    background-position: center;\n    left: -8px;\n    position: absolute;\n  }\n  .btn.btn-login{\n    margin: 18px 0px 0px 20px;\n    color: rgba(255,255,255,1);\n    border-color: rgba(255,255,255,1);\n    right: 36px;\n    position: absolute;\n    font-weight: bold;\n  }\n  .btn.btn-login:hover,.btn.btn-login:active,.btn.btn-login:focus{\n    background: none!important;\n    color: rgba(255,255,255,0.7);\n    border-color: rgba(255,255,255,0.5);\n  }\n  @media (min-width: 480px){\n    .signin-button{\n      width: initial;\n      right: 12px;\n      top: -8px;\n      margin-top: 24px !important;\n    }\n    .signin-navbar{\n      height: 68px;\n      position:absolute;\n    }\n    .landing-logo-top{\n      top: 0 !important;\n      left: 10px !important;\n    }\n  }\n  @media (max-width: 480px) {\n    .signin-button{\n      width: initial;\n      right: 12px !important;\n      top: -8px\n    }\n    .signin-navbar{\n      height: 56px;\n      position:fixed;\n    }\n  }\n  @media (max-width: 1024px) and (min-width: 480px){\n    .header-regular {\n      display:table\n    }\n  }\n  @media (max-width: 480px){\n    .landing-logo{\n      background: url(/static/svg/landing-logo.svg) 20px 0px no-repeat;\n      transform: scale(0.9);\n      top: -9px;\n    }\n    .page-signin.top{\n      margin-top: -14px;\n    }\n    .page-signup.top{\n      margin-top: -14px;\n    }\n    @media (max-width: 767px) and (min-width: 480px){\n      .header-regular {\n        display:table\n      }\n    }\n  }</style><div ng-hide="regFlag" class="page-signin top"><nav class="navbar signin-navbar" role="navigation" style="z-index: 1999;width: 100%;background: #ff4338;    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);border: none" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><a class="landing-logo" italki-go-home="" style="left:-14px"></a></div><span class="pull-right"><a class="btn btn-outline btn-login text-up signin-button" style="height: 36px;line-height:inherit;border-radius: 2px;right: 12px" ng-click="turnOff(1)">{{\'C0072\'|t}}</a></span></div></nav><div style="margin-top: 68px;width: auto; display: inherit"><div class="signin-form" style="width: auto; display: inherit"><form ng-submit="login()" name="signin_form1"><button type="button" class="close" ng-click="$dismiss()" style="margin-top: 10px">×</button><h4 class="margin-0 sign-in-h3" translate="C0206" style="font-weight: bold"></h4><div class="form-actions" style="margin-top: 5px"><button class="login_fb btn-block" ng-hide="chinaWechat" type="button" italki-click-with-spinner="loginViaFB()" nologin="1" noact="1" stext="HPT95"></button> <a class="login_we btn-block" ng-show="chinaWechat" href="https://open.weixin.qq.com/connect/qrconnect?appid=wx42732fed7d492892&redirect_uri=http%3A%2F%2Fwww.italki.cn%2Fsignin&response_type=code&scope=snsapi_login"><i class="fa fa-weixin social-icon" style="padding-right: 32px"></i>{{\'OB235\'|t}}</a><hr style="margin: 15px 0 16px"></div><p style="margin-bottom: 16px;font-size: 12px"><strong>{{\'UR010\'|t}}</strong></p><div class="form-group w-icon" ng-hide="!error"><div ng-switch="error.type" style="color: #CB242B"><div ng-switch-when="UserDeactivated"><div ng-bind="\'ST208\'|t"></div><div ng-if="error.msg==\'user\'" ng-bind="\'ST209\'|t"></div></div><div ng-switch-when="username" ng-bind="\'UR013\'|t"></div><div ng-switch-when="pwd" ng-bind="\'UR015\'|t"></div><div ng-switch-when="username" ng-bind="\'UR013\'|t"></div><div ng-switch-default ng-bind="error.msg"></div></div></div><div class="form-group w-icon"><input type="email" name="signin_username" id="username_id" class="form-control input-lg" placeholder="Email" style="border-radius: 3px;font-size: 16px;color: #000000" ng-model="user.LOGIN_PA_USERNAME" ng-blur="signinUsermail1()" ng-keyup="signinUsermail1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signin_form1.mail]" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" required><p class="help-word" ng-if="signin_form1.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signin_form1.mail]">{{\'ST318\'|t}}</p><span class="fa fa-email1 signin-form-icon signin-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[signin_form1.mail]"></span></div><div class="form-group w-icon" style="margin-bottom: 10px"><input type="password" name="signin_password" id="password_id" class="form-control input-lg" style="border-radius: 3px;font-size: 16px;color: #000000" placeholder="Password" ng-model="user.LOGIN_PA_PASSWORD" maxlength="20" ng-minlength="6" ng-maxlength="20" required ng-blur="signinPassword1()" ng-keyup="signinPassword1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signin_form1.password]"><p class="help-word" ng-if="signin_form1.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signin_form1.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signin-form-icon signin-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[signin_form1.password]"></span></div><div class="form-group" ng-if="isRecaptchaSignin" style="text-align: center; margin-top: 14px"><kp-recaptcha-lib></kp-recaptcha-lib><script async ng-src="{{ recaptchaUrl }}"></script><div on-success="recaptchaCallbackSignin(response)" kp-recaptcha key="\'6LfzPwUTAAAAAHw4GiborZNwfgEmO-5Jvt1W22gs\'"></div></div><div class="row form-group w-icon" style="color: #777777;height: 48px;margin-top: 0"><i ng-init="isSelect = true" class="fa col-sm-1" type="checkbox" ng-model="user.rememberMe" ng-class="{false:\'fa-check-square\',true:\'fa-square-o\'}[isSelect]" ng-click="isSelect = !isSelect" style="height: 40px;line-height: 40px;font-size: 2em;margin: 0"></i> <span class="lbl col-sm-9 col-sm-offset-1" style="font-size: 16px;height: 40px;line-height: 40px">{{\'UR160\'|t}}</span></div><div class="form-group"><button type="submit" class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" ng-disabled="signin_form1.$invalid||waiting"><span class="btn-txt">{{\'C0206\'|t|uppercase}}</span></button></div><div class="form-actions row"><a class="forgot-password" id="forgot-password-link" ng-click="reset=true" style="cursor: pointer">{{ "UR004"|translate }}</a></div></form><div class="password-reset-form" ng-hide="!reset" id="password-reset-form"><div class=""><button type="button" class="close text-xlg" ng-click="reset=false;sendSucc=false;restor.email=\'\';" style="margin-top: 10px">×</button><h4 class="margin-0 sign-in-h3" translate="UR064" style="font-weight: bold"></h4></div><form ng-if="!sendSucc"><p style="margin-bottom: 16px">{{\'UR005\'|t}}</p><div style="color: #CB242B" ng-if="errorType===\'ResetPasswordEmailNotExist\'">{{\'UR003\'|t}}</div><div class="form-group w-icon"><input type="email" class="form-control input-lg" placeholder="{{\'UR013\'|t}}" style="border-radius: 3px;font-size: 16px;color: #000000" ng-model="restor.email" ng-blur="resetUsermail1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[resetEmail]" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" required><p class="help-word" ng-show="resetEmail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[resetEmail]">{{\'ST318\'|t}}</p><span class="fa fa-email1 signin-form-icon signin-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[resetEmail]"></span></div><div class="form-actions"><button class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" italki-click-with-spinner="resetAccount()" nologin="1" ng-disabled="!validateEmail(restor.email)"></button></div></form><div ng-if="sendSucc">{{\'UR006\'|t}}</div></div></div></div></div><div ng-hide="!regFlag" class="page-signup top" style=""><nav class="navbar signin-navbar" role="navigation" style="z-index: 1999;width: 100%;background: #ff4338;    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);border: none" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><a class="landing-logo" italki-go-home="" style="left:-14px"></a></div><span class="pull-right"><a class="btn btn-outline btn-login text-up signin-button" style="height: 36px;line-height:inherit;border-radius: 2px;right: 12px" ng-click="turnOff1(1)">{{\'C0071\'|t}}</a></span></div></nav><div style="margin-top: 68px;width: auto; display: inherit"><div class="signup-form"><form ng-submit="register()" name="signup_form1" class="top"><button type="button" class="close" ng-click="$dismiss()" style="margin-top: 10px">×</button><h4 class="sign-up-h3 margin-0" style="font-weight: bold">{{\'C0072\'|t}}</h4><div style="padding: 6px 0"><button class="login_fb btn-block" ng-hide="chinaWechat" italki-click-with-spinner="loginViaFB()" nologin="1" noact="1" stext="HPT95" style="padding-left: 10px"></button> <a class="login_we btn-block" ng-show="chinaWechat" href="https://open.weixin.qq.com/connect/qrconnect?appid=wx42732fed7d492892&redirect_uri=https%3A%2F%2Fwww.italki.com%2Fsignin&response_type=code&scope=snsapi_login"><i class="fa fa-weixin social-icon" style="padding-right: 32px"></i>{{\'OB235\'|t}}</a></div><hr style="margin: 8px 0 16px"><div class="alert alert-warning" ng-if="facebookOnly">{{\'HPT95\'|t}}</div><div ng-if="!facebookOnly"><p style="font-size: 12px;margin-bottom: 16px"><strong>{{\'UR001\'|t}}</strong></p><div class="form-group w-icon" ng-if="error.type==\'\'" style="margin-bottom: 12px"><div style="color: #CB242B" ng-bind="error.msg"></div></div><div class="form-group w-icon"><input type="text" name="signup_username" id="username_id" class="form-control input-lg" style="border-radius: 3px;font-size: 16px;color: #000000" kp-nickname-validation placeholder="Full name" ng-model="newUser[\'nickname\']" ng-blur="signupUsername1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signup_form1.foo]"><p class="help-word" ng-show="signup_form1.foo" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signup_form1.foo]">{{\'ML323\'|t}}</p><span class="fa fa-user1 signup-form-icon signup-form-icon-user" ng-class="{false: \'fa-success-user\', true: \'fa-invalid-user\'}[signup_form1.foo]"></span></div><div class="form-group w-icon"><input type="email" name="signup_email" ng-model="newUser[\'email\']" id="email_id" style="border-radius: 3px;font-size: 16px;color: #000000" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" class="form-control input-lg" ng-blur="signupUsermail1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[isExistErr||isInputErr]" ng-focus="signupUsermailshow1()" placeholder="E-mail" required><div ng-show="showcharacter||(isExistErr||isInputErr)"><p class="help-word" ng-hide="isExistErr&&!isFormalErr" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[(isExistErr||isInputErr)]">{{\'ST318\'|t}}</p></div><span class="fa fa-email1 signup-form-icon signup-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[isExistErr||isInputErr]"></span><div class="form-group" ng-if="isExistErr" ng-hide="signup_form1.signup_email.$dirty"><div style="color: #CB242B" ng-bind="error.msg"></div></div></div><div class="form-group w-icon isRecaptcha-margin"><input type="password" name="signup_password" ng-model="newUser[\'password\']" id="password_id" style="border-radius: 3px;font-size: 16px;color: #000000" class="form-control input-lg input" ng-minlength="6" ng-maxlength="20" ng-blur="signupUserpassword1()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signup_form1.password]" placeholder="Password" required><p class="help-word" ng-show="signup_form1.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signup_form1.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signup-form-icon signup-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[signup_form1.password]"></span></div><div class="form-group" ng-if="isRecaptcha" style="text-align: center; margin-top: 14px"><kp-recaptcha-lib></kp-recaptcha-lib><div on-success="recaptchaCallback(response)" kp-recaptcha key="\'6LfzPwUTAAAAAHw4GiborZNwfgEmO-5Jvt1W22gs\'"></div></div><div class="form-actions"><p style="margin-bottom: 14px;margin-top: 6px"><button type="submit" class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" ng-disabled="signup_form1.$invalid||waiting" ng-click="signup_form1.$setPristine();"><span class="btn-txt">{{\'C0072\'|t|uppercase}}</span></button></p><span translate="UR049"></span></div></div></form></div></div></div>'),a.put("/views/account/signin.html",'<style>button.login_fb{\n    background:#4e69a2 url(/static/images/Facebook_24px_White.png) 8px 6px no-repeat;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    text-shadow: 0px 0px 4px #2F4585;\n    padding-left: 60px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n  a.login_we {\n    background: #44b549;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    padding-left: 10px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }</style><div class="page-signin"><div id="page-signin-bg"><div class="overlay"></div></div><div ng-include="\'/views/common/top.tpl2.html\'"></div><div class="signin-container animated bounceInDown"><div class="signin-form"><form ng-submit="login()" name="signin_form" class="top"><h4 class="margin-0 sign-in-h3" translate="C0206" style="font-weight: bold"></h4><div style="padding: 6px 0" ng-hide="chinaWechat"><button class="login_fb btn-block" type="button" italki-click-with-spinner="loginViaFB()" nologin="1" noact="1" stext="HPT95" style="padding-left: 10px"></button></div><div style="padding: 6px 0" ng-show="chinaWechat"><a class="login_we btn-block" href="https://open.weixin.qq.com/connect/qrconnect?appid=wx42732fed7d492892&redirect_uri=http%3A%2F%2Fwww.italki.cn%2Fsignin&response_type=code&scope=snsapi_login"><i class="fa fa-weixin social-icon" style="padding-right: 32px"></i>{{\'OB235\'|t}}</a></div><hr style="margin: 8px 0 16px"><p style="font-size: 12px;margin-bottom: 16px"><strong>{{\'UR010\'|t}}</strong></p><div class="form-group w-icon" ng-hide="!error"><div ng-switch="error.type" style="color: #CB242B"><div ng-switch-when="UserDeactivated"><div ng-bind="\'ST208\'|t"></div><div ng-if="error.msg==\'user\'" ng-bind="\'ST209\'|t"></div></div><div ng-switch-when="username" ng-bind="\'UR013\'|t"></div><div ng-switch-when="pwd" ng-bind="\'UR015\'|t"></div><div ng-switch-when="username" ng-bind="\'UR013\'|t"></div><div ng-switch-default ng-bind="error.msg" class="alert alert-danger" style="margin-bottom: auto"></div></div></div><div class="form-group w-icon"><input type="email" name="signin_username" id="username_id" class="form-control input-lg" placeholder="Email" style="border-radius: 3px;font-size: 16px;color: #000000" ng-model="user.LOGIN_PA_USERNAME" ng-blur="signinUsermail()" ng-keyup="signinUsermail()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signin_form.mail]" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" required><p class="help-word" ng-if="signin_form.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signin_form.mail]">{{\'ST318\'|t}}</p><span class="fa fa-email1 signin-form-icon signin-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[signin_form.mail]"></span></div><div class="form-group w-icon" style="margin-bottom: 10px"><input type="password" name="signin_password" id="password_id" class="form-control input-lg" style="border-radius: 3px;font-size: 16px;color: #000000" placeholder="Password" ng-model="user.LOGIN_PA_PASSWORD" maxlength="20" ng-minlength="6" ng-maxlength="20" required ng-blur="signinPassword()" ng-keyup="signinPassword()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signin_form.password]"><p class="help-word" ng-if="signin_form.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signin_form.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signin-form-icon signin-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[signin_form.password]"></span></div><div class="form-group" ng-if="isRecaptchaSignin" style="text-align: center; margin-top: 14px"><kp-recaptcha-lib></kp-recaptcha-lib><script async ng-src="{{ recaptchaUrl }}"></script><div on-success="recaptchaCallbackSignin(response)" kp-recaptcha key="\'6LfzPwUTAAAAAHw4GiborZNwfgEmO-5Jvt1W22gs\'"></div></div><div class="form-group" ng-if="isItalkiRecaptcha" style="text-align: center"><div style="position: relative"><img style="position: absolute;right: 0;height: 100%;top: 0" ng-src="{{imageCodeurl}}" title="click to refresh" ng-click="generateImageCaptchaUrl();"> <input type="text" ng-model="user[\'g-recaptcha-response\']" class="form-control" ng-maxlength="4" ng-minlength="4" required style="width: 49%"> <input type="hidden" ng-model="user.spec_captcha" ng-init="user.spec_captcha=1"></div></div><div class="row form-group w-icon" style="color: #777777;height: 48px;margin-top: 0"><i ng-init="isSelect = true" class="fa col-sm-1" type="checkbox" ng-model="user.rememberMe" ng-class="{false:\'fa-check-square\',true:\'fa-square-o\'}[isSelect]" ng-click="isSelect = !isSelect" style="height: 40px;line-height: 40px;font-size: 2em;margin: 0"></i> <span class="lbl col-sm-9 col-sm-offset-1" style="font-size: 16px;height: 40px;line-height: 40px">{{\'UR160\'|t}}</span></div><div class="form-group"><button type="submit" class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" ng-disabled="signin_form.$invalid||waiting"><span class="btn-txt">{{\'C0206\'|t|uppercase}}</span></button></div><div class="form-actions row"><a class="forgot-password" id="forgot-password-link" ng-click="reset=true" style="cursor: pointer">{{ "UR004"|translate }}</a></div></form><div class="password-reset-form" ng-hide="!reset" id="password-reset-form"><div class=""><button type="button" class="close text-xlg" ng-click="reset=false;sendSucc=false;restor.email=\'\';" style="margin-top: 10px">×</button><h4 class="margin-0 sign-in-h3" translate="UR064" style="font-weight: bold"></h4></div><form ng-if="!sendSucc"><p style="margin-bottom: 16px">{{\'UR005\'|t}}</p><div style="color: #CB242B" ng-if="errorType===\'ResetPasswordEmailNotExist\'">{{\'UR003\'|t}}</div><div class="form-group w-icon"><input type="email" class="form-control input-lg" placeholder="{{\'UR013\'|t}}" style="border-radius: 3px;font-size: 16px;color: #000000" ng-model="restor.email" ng-blur="resetUsermail()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[resetEmail]" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" required><p class="help-word" ng-show="resetEmail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[resetEmail]">{{\'ST318\'|t}}</p><span class="fa fa-email1 signin-form-icon signin-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[resetEmail]"></span></div><div class="form-actions"><button class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" italki-click-with-spinner="resetAccount()" nologin="1" ng-disabled="!validateEmail(restor.email)"></button></div></form><div ng-if="sendSucc">{{\'UR006\'|t}}</div></div></div></div><div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div><div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div></div>'),a.put("/views/account/signup.html",'<style>.rc-anchor-normal {\n    height: 74px !important;\n    width: auto !important;\n  }\n  .recaptcha>p{\n    width: 100%;\n  }\n\n  iframe{\n    width:100% !important;\n  }\n\n  button.login_fb {\n    background: #4e69a2 url(/static/images/Facebook_24px_White.png) 8px 6px no-repeat;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    text-shadow: 0px 0px 4px #2F4585;\n    padding-left: 60px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n  a.login_we {\n    background: #44b549;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    padding-left: 10px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }</style><div class="page-signup" style=""><div id="page-signup-bg"><div class="overlay"></div></div><div ng-include="\'/views/common/top.tpl.html\'"></div><div class="signup-container animated bounceInUp"><div class="signup-form"><form ng-submit="register()" name="signup_form" class="top"><h4 class="sign-up-h3 margin-0" style="font-weight: bold">{{\'C0072\'|t}}</h4><div style="padding: 6px 0" ng-hide="chinaWechat"><button class="login_fb btn-block" type="button" italki-click-with-spinner="loginViaFB()" nologin="1" noact="1" stext="UR092" style="padding-left: 10px"></button></div><div style="padding: 6px 0" ng-show="chinaWechat"><a class="login_we btn-block" href="https://open.weixin.qq.com/connect/qrconnect?appid=wx42732fed7d492892&redirect_uri=http%3A%2F%2Fwww.italki.cn%2Fsignin&response_type=code&scope=snsapi_login"><i class="fa fa-weixin social-icon" style="padding-right: 32px"></i>{{\'OB225\'|t}}</a></div><hr style="margin: 8px 0 16px"><div class="alert alert-warning" ng-if="facebookOnly">{{\'UR092\'|t}}</div><div ng-if="!facebookOnly"><p style="font-size: 12px;margin-bottom: 16px"><strong>{{\'UR001\'|t}}</strong></p><div class="form-group w-icon" ng-if="error.type==\'\'" style="margin-bottom: 12px"><div style="color: #CB242B" ng-bind="error.msg"></div></div><div class="form-group w-icon"><input type="text" name="signup_username" id="username_id" class="form-control input-lg" style="border-radius: 3px;font-size: 16px;color: #000000" kp-nickname-validation placeholder="Full name" ng-model="newUser[\'nickname\']" ng-blur="signupUsername()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signup_form.foo]"><p class="help-word" ng-show="signup_form.foo" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signup_form.foo]">{{\'ML323\'|t}}</p><span class="fa fa-user1 signup-form-icon signup-form-icon-user" ng-class="{false: \'fa-success-user\', true: \'fa-invalid-user\'}[signup_form.foo]"></span></div><div class="form-group w-icon"><input type="email" name="signup_email" ng-model="newUser[\'email\']" id="email_id" style="border-radius: 3px;font-size: 16px;color: #000000" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" class="form-control input-lg" ng-blur="signupUsermail()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[isExistErr||isInputErr]" ng-focus="signupUsermailshow()" placeholder="E-mail" required><div ng-show="showcharacter||(isExistErr||isInputErr)"><p class="help-word" ng-hide="isExistErr&&!isFormalErr" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[(isExistErr||isInputErr)]">{{\'ST318\'|t}}</p></div><span class="fa fa-email1 signup-form-icon signup-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[isExistErr||isInputErr]"></span><div class="form-group" ng-if="isExistErr" ng-hide="signup_form.signup_email.$dirty"><div style="color: #CB242B" ng-bind="error.msg"></div></div></div><div class="form-group w-icon isRecaptcha-margin" style="margin-bottom: 10px"><input type="password" name="signup_password" ng-model="newUser[\'password\']" id="password_id" style="border-radius: 3px;font-size: 16px;color: #000000" class="form-control input-lg input" ng-minlength="6" ng-maxlength="20" ng-blur="signupUserpassword()" ng-class="{false: \'input-success\', true: \'input-invalid\'}[signup_form.password]" placeholder="Password" required><p class="help-word" ng-show="signup_form.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[signup_form.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signup-form-icon signup-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[signup_form.password]"></span></div><div class="form-group" ng-if="isRecaptcha" style="text-align: center; margin-top: 14px"><kp-recaptcha-lib></kp-recaptcha-lib><script async ng-src="{{ recaptchaUrl }}"></script><div class="recaptcha" on-success="recaptchaCallback(response)" kp-recaptcha key="\'6LfzPwUTAAAAAHw4GiborZNwfgEmO-5Jvt1W22gs\'"></div></div><div class="form-actions"><p style="margin-bottom: 14px;margin-top: 6px"><button type="submit" class="btn btn-primary btn-lg btn-block" style="font-weight: bold;border-radius: 3px" ng-disabled="signup_form.$invalid||waiting" ng-click="signup_form.$setPristine();"><span class="btn-txt">{{\'C0072\'|t|uppercase}}</span></button></p><span translate="UR049"></span></div></div></form></div></div><div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div><div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div></div>'),
a.put("/views/article/detail.html",'<kp-title ng-if="article" title="AR504" params="[article.title,article.learn_language]"></kp-title><kp-article-meta article="article"></kp-article-meta><div class="grid-example"><div class="grid-gutter-margin-b"><h2 class="" ng-bind="article.title"></h2><h4><ul class="list-inline"><li>{{article.learn_language|t}}</li><li><i class="fa fa-eye"></i> {{ article.view_count }}</li><li><i style="cursor: pointer" ng-disabled="is_post_praise" italki-click-with-spinner="praise(article)" class="fa" ng-class="{\'fa-thumbs-up\':is_post_praise,\'fa-thumbs-o-up\':!is_post_praise}" noe="1"></i> {{ article.praise_count }}</li><li><kp-add-this></kp-add-this></li></ul></h4></div><div class="row"><div class="col-md-9 loading-layout"><kp-loading indicator="article"></kp-loading><div style="position: relative"><img ng-src="{{article.image_url|articleImageUrl }}" width="100%"><div style="position:absolute;font-size: 12px;font-style: italic;padding: 15px;right: 0;bottom: 20px;background:url(\'/static/images/bg_gallery2.png\') left top"><div class="row no-margin"><div class="col-xs-4"><img ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor" ng-src="{{ article.creator_obj|avatar:\'50\' }}" class="rounded" ui-sref="teacher({id:article.creator_obj.id})" width="50"> <img ng-if="!(article.creator_obj.is_pro||article.creator_obj.is_tutor)" ng-src="{{ article.creator_obj|avatar:\'50\' }}" class="rounded" ui-sref="user({id:article.creator_obj.id})" width="50"></div><div class="col-xs-8"><h4 class="no-margin"><a ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor" ui-sref="teacher({id:article.creator_obj.id})"><span ng-bind="article.creator_obj.nickname"></span></a> <a ng-if="!(article.creator_obj.is_pro||article.creator_obj.is_tutor)" ui-sref="user({id:article.creator_obj.id})"><span ng-bind="article.creator_obj.nickname"></span></a><br>{{article.publish_time_user|amDate:\'TF002\'}}</h4></div></div></div></div><div class="panel"><div class="panel-body"><p ng-bind-html="article.content" class="lead"></p><hr><div class="grid-gutter-margin-b"><h4>Share</h4><kp-add-this></kp-add-this></div><div class="grid-gutter-margin-b"><h4>{{\'C0107\'|t}}</h4><a ng-repeat="tag in tags" ng-if="tags" ui-sref="article.tags({tag:tag})"><span class="label label">{{tag}}</span>&nbsp;</a></div><div><hr><div class="row no-margin"><div class="col-sm-1"><a ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor" ui-sref="teacher({id:article.creator_obj.id})"><img ng-src="{{ article.creator_obj|avatar:\'50\' }}" class="rounded" width="50"></a> <a ng-if="!(article.creator_obj.is_pro||article.creator_obj.is_tutor)" ui-sref="user({id:article.creator_obj.id})"><img ng-src="{{ article.creator_obj|avatar:\'50\' }}" class="rounded" width="50"></a></div><div class="col-sm-8"><h4 class="no-margin-t"><a ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor" ui-sref="teacher({id:article.creator_obj.id})"><span ng-bind="article.creator_obj.nickname"></span></a> <a ng-if="!(article.creator_obj.is_pro||article.creator_obj.is_tutor)" ui-sref="user({id:article.creator_obj.id})"><span ng-bind="article.creator_obj.nickname"></span></a> <i class="text-lg" ng-class="article.creator_obj.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:article.creator.origin_country_id|t}}" style="width: 1em"></i> <i class="fa fa-ii-tutor color-pro" ng-if="article.creator_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" ng-if="!article.creator_obj.is_pro && article.creator_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && article.creator_obj.exam_result_shown_obj != null && article.creator_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></h4><p ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor">{{\'C0118\'|t}} <span ng-repeat="item in article.language_obj_s|filter:{is_teaching:1}">{{item.language|t }}<span ng-hide="$last">,</span>&nbsp;</span></p><p class="text-muted hidden-phone" ng-if="!article.creator_obj.teacher_info_obj.about_me" ng-bind="article.creator_obj.teacher_info_obj.intro"></p><p class="text-muted hidden-phone" ng-if="article.creator_obj.teacher_info_obj.about_me">{{article.creator_obj.teacher_info_obj.about_me| limitTo: 200}}{{article.creator_obj.teacher_info_obj.about_me.length > 200 ? \'...\' : \'\'}}</p></div><div class="col-sm-3 text-center" ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor"><p><button class="btn btn-primary btn-block" italki-click-test pag-state="article" teacher="{id:article.creator_obj.id}">{{\'TS108\'|t}}</button></p><span class="text-bg"><span class="text-lg">$</span><span class="text-lg" ng-bind="article.creator_obj.teacher_info_obj|teacherPrice"></span>&nbsp;USD</span></div></div></div></div></div><div class="grid-gutter-margin-b"><button class="btn btn-block" ui-sref="discussionAlias.entity({id:article.discussion_id})">{{\'AR201\'|t|format:article.comment_count}}</button></div><div class="panel" ng-if="teachers"><div class="panel-body"><div class="row no-margin-b"><div class="col-md-4" ng-repeat="teacher in teachers track by $index"><div class="stat-panel"><div class="stat-cell bg-panel valign-middle" style="height:130px; overflow: hidden"><a ui-sref="teacher({id:teacher.id})"><img title="{{teacher.nickname}}" alt="{{teacher.nickname}}" ng-src="{{teacher.avatar_file_name|avatar:\'50\'}}" class="bg-icon rounded" style="width:50px; height:50px; bottom: inherit;right:20px"></a> <span class="text-bg"><i class="fa fa-circle online-status" ng-class="{online:teacher.is_online}" title="{{ teacher.is_online?\'Online\':\'Offline\' }}"></i> <a ui-sref="teacher({id:teacher.id})" ng-bind="teacher.nickname"></a>&nbsp;<i class="text-lg" ng-class="teacher.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(teacher.origin_country_id|t)}}" style="width: 1em"></i> <i class="fa fa-ii-tutor color-pro" ng-if="teacher.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" ng-if="!teacher.is_pro && teacher.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="teacher.exam_result_shown_obj.status!=0 && teacher.exam_result_shown_obj != null && badgeDisplay != false" class="fa fa-ii-oopt" style="color: #94B004" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></span><div style="width: 100%; overflow: hidden; white-space: nowrap" ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor"><p>{{\'C0118\'|t}}&nbsp;<span ng-repeat="item in teacher.language_obj_s|filter:{is_teaching:1}">{{item.language|t }}<span ng-hide="$last">,</span>&nbsp;</span></p></div><button class="btn btn-sm" italki-click-test pag-state="article" teacher="{id:teacher.id}"><span class="btn-txt">{{\'C0117\'|t}}</span></button></div></div></div></div></div></div></div><aside class="col-md-3"><div ng-if="items_f" ui-sref="articleDetail({\'id\':items_f.id,\'title\':(items_f.title|titleRevert)})" class="panel is-relative yes-cursor cursor-over" style="background:url(\'{{items_f.image_url|articleImageUrl }}\')  no-repeat left top; background-size: cover"><div class="is-absolute" style="top: 30px; left: 0px; background: #ff4338; opacity: 0.9; color: #fff; padding: 5px 10px">{{\'AR001\'|t}}</div><div class="panel no-border no-margin-b" style="margin-top: 150px"><div class="panel-body"><h4 class="no-margin-t"><a ui-sref="articleDetail({\'id\':items_f.id,\'title\':(items_f.title|titleRevert)})" title="{{items_f.title}}">{{items_f.title}}</a></h4><p><span class="text-muted" style="cursor:pointer" ng-click="toArticledetail(items_f)">{{items_f.abstract}}</span></p><ul class="list-inline"><li><i class="fa fa-eye"></i>&nbsp;{{items_f.view_count}}</li><li><span>&nbsp;{{items_f.praise_count}}</span></li><li class="last"><i class="fa fa-comments"></i>&nbsp;<a ui-sref="discussionAlias.entity({id:items_f.discussion_id})">{{items_f.comment_count}}</a></li></ul></div></div></div><p ng-if="items_f" class="grid-gutter-margin-b"><button ui-sref="article.lang({\'lang\':article.learn_language})" class="btn btn-block"><span class="btn-txt">{{\'AR103\'|t|format:(article.learn_language|t)}}</span></button></p><div ng-repeat="article in items_t" ng-if="items_t" class="panel is-relative" ng-click="toArticledetail(article)"><div class="panel no-border no-margin-b yes-cursor cursor-over"><div class="panel-body"><h4 class="no-margin-t"><a ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})" title="{{article.title}}">{{article.title}}</a></h4><p><span class="text-muted" style="cursor:pointer" ng-click="toArticledetail(article)">{{article.abstract}}</span></p><ul class="list-inline no-margin-b"><li>{{article.learn_language|t}}</li><li><i class="fa fa-eye"></i>&nbsp;{{article.view_count}}</li><li><span class="vote good2">&nbsp;{{article.praise_count}}</span></li><li class="last"><i class="fa fa-comments"></i>&nbsp;<a ui-sref="discussionAlias.entity({id:article.discussion_id})">{{article.comment_count}}</a></li></ul></div></div></div><p><a ui-sref="article()" class="btn btn-block">{{\'AR104\'|t}}</a></p><kp-ad-system loc="ART_DETAIL_R"></kp-ad-system></aside></div></div>'),a.put("/views/article/index.html",'<kp-title title="{{titleCode}}" params="titleParams"></kp-title><div class=""><h2 class="grid-gutter-margin-b">{{\'M0083\'|t}} <i style="border-left: 1px #ddd solid;margin: 0px 15px;font-size:24px">&nbsp;</i> <span style="position: relative" ng-if="filter.tag==\'\'"><div class="hidden-phone party-size-picker dtp-picker-selector select-native" style="position:absolute; left: 0px; top:-2px; float: none; width: auto;height: auto"><a class="select-label dtp-picker-selector-link ng-binding" tabindex="-1" style="white-space: nowrap;padding: 0px 30px 0px 0px">{{\'C0103\'|t|format:((filter.lang|t)||\'C0028\'|t)}}</a><select class="form-control ng-pristine ng-valid" ng-model="filter.lang" ng-change="reload()" ng-options="m as m|t for m in lans"><option value="">{{\'C0028\'|t}}</option></select></div></span> <span ng-if="filter.tag!=\'\'">{{\'AS064\'|t}}: {{filter.tag}}</span></h2><div class="row"><div class="col-md-9"><div class="visible-phone grid-gutter-margin-b"><header class="filter"><div class="party-size-picker dtp-picker-selector select-native two"><a class="select-label dtp-picker-selector-link small" tabindex="-1">{{\'C0103\'|t|format:((filter.lang|t)||\'C0028\'|t)}}</a><select class="form-control ng-pristine ng-valid" ng-model="filter.lang" ng-change="reload()" ng-options="m as m|t for m in lans"><option value="">{{\'C0027\'|t}}</option></select></div><div class="clearfix"></div></header></div><div class="article-list row" ng-if="filter.tag==\'\'"><div class="col-md-6" ng-repeat="article in items_f" ng-if="items_f"><div class="panel is-relative yes-cursor cursor-over" style="background:url(\'{{article.image_url|articleImageUrl:250 }}\')  no-repeat 0% 50%; background-size:cover" ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})"><div class="is-absolute" style="top: 30px; left: 0px; background: #ff4338; opacity: 0.9; color: #fff; padding: 5px 10px">{{\'AR001\'|t}}</div><div class="panel no-border no-margin-b featured-info"><div class="panel-body"><h3 class="no-margin-t"><a ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})" ng-bind="article.title"></a></h3><ul class="list-inline text-muted"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="article.lang({\'lang\':article.learn_language})">{{article.learn_language|t}}</a></li><li><i class="fa fa-eye"></i> {{ article.view_count }}</li><li><i class="fa fa-thumbs-up"></i> {{ article.praise_count }}</li><li><i class="fa fa-comments"></i> <a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="discussionAlias.entity({id:article.discussion_id})">{{article.comment_count}}</a></li></ul><p ng-bind="article.abstract" style="height: 80px;overflow: hidden" class="text-muted"></p><div class=""><div class="pull-left"><img ng-src="{{ article.creator_obj|avatar:\'50\' }}" class="rounded" kp-fallback-avatar ui-sref="teacher({id:article.creator_obj.id})" width="50"></div><div class="pull-left" style="margin-left: 20px"><p>By <a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({\'id\':article.creator_obj.id})" ng-bind="article.creator_obj.nickname"></a></p><p>{{\'C0118\'|t}} <span ng-repeat="lang in article.language_obj_s"><span ng-if="lang.is_teaching">{{lang.language|t}}<span ng-hide="$last">,&nbsp;</span></span></span></p></div></div></div></div></div></div></div><div class="article-list panel loading-layout"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div class="article-item yes-cursor cursor-over" ng-repeat="article in items" ng-if="items && items.length>0" ng-class="{\'animation-list-item\':$index}"><div class="panel-body row" ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})"><div class="col-md-4"><img ng-src="{{article.image_url|articleImageUrl:250 }}" class="img-responsive" alt="img"></div><div class="col-md-8"><h3 class="no-margin-t"><a ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})" ng-bind="article.title"></a></h3><ul class="list-inline text-muted"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="article.lang({\'lang\':article.learn_language})"><span ng-bind="article.learn_language|t"></span></a></li><li>By <a ng-if="article.creator_obj.is_pro||article.creator_obj.is_tutor" onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="teacher({\'id\':article.creator_obj.id})" ng-bind="article.creator_obj.nickname"></a> <a ng-if="!(article.creator_obj.is_pro||article.creator_obj.is_tutor)" onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({\'id\':article.creator_obj.id})" ng-bind="article.creator_obj.nickname"></a> <i class="fa fa-ii-tutor color-pro" ng-if="article.creator_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" ng-if="!article.creator_obj.is_pro && article.creator_obj.is_tutor" title="{{\'C0201\'|t}}"></i></li><li><i class="fa fa-eye"></i> {{ article.view_count }}</li><li><i class="fa fa-thumbs-up"></i> {{ article.praise_count }}</li><li><i class="fa fa-comments"></i> <a ui-sref="discussionAlias.entity({id:article.discussion_id})" ng-click="$event.stopPropagation();">{{article.comment_count}}</a></li><li>{{article.publish_time|prettyDate}}</li></ul><span class="text-muted" ng-bind="article.abstract"></span></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta &&meta.has_next)|| loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMore()"></button></aside><kp-ad-system loc="ART_LIST_B"></kp-ad-system></div><aside class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body" ng-show="currentUser.is_teacher"><h4 style="font-size: 17px" class="no-margin-t">{{\'KP008\'|t}}</h4><p class="grid-gutter-margin-b">{{\'KP009\'|t}}</p><a href="http://support.italki.com/entries/27830934-italki-Articles-Terms-and-Conditions" class="btn btn-lg btn-primary btn-block" target="_blank">{{\'C0171\'|t}}</a></div><div class="panel-body" ng-hide="currentUser.is_teacher"><h4 class="no-margin-t">{{\'TS285\'|t}}</h4><div class="grid-gutter-margin-b"><p>{{\'TS286\'|t}}</p></div><div class="text-center"><button italki-click-with-spinner="teacherApply()" class="btn btn-block" stext="TP100"></button></div></div></div><kp-count-time-down-dashboard ng-show="languageTime.show"></kp-count-time-down-dashboard><kp-ad-system loc="ART_LIST_R"></kp-ad-system></aside></div></div>'),a.put("/views/common/bottom.bs.html",'<style>.social-icon{\n    width: 25px;\n    height: 25px;\n    line-height: 25px;\n    text-align: center;\n    border-radius: 25px;\n    color: white;\n  }\n\n  @media (max-width: 991px) and (min-width: 768px){\n     .wechat-icon{\n       margin-top: 10px;\n     }\n  }</style><footer class="footer" ng-controller="BottomCtrl"><div class="container"><div class="grid-gutter-margin-b visible-desktop"><div class="row"><div class="col-sm-3"><h4 translate="M1001"></h4><p></p><ul class="list-unstyled"><li ng-repeat="item in langArr1" ng-if="item.t==0"><a ui-sref="teachersViaLanguage({teach:item.v})" ng-bind="\'C0105\'|t|format:(item.v|t)"></a></li><li><a ui-sref="teachers" translate="C0131"></a></li></ul><p></p></div><div class="col-sm-3"><h4 translate="C0068"></h4><p></p><ul class="list-unstyled"><li><a ui-sref="teachersViaLanguage({teach:\'professional\'})" translate="MH504"></a></li><li><a ui-sref="teachersViaLanguage({teach:\'tutoring\'})" translate="MH506"></a></li><li><a ui-sref="partner" translate="M0006"></a></li><li><a ui-sref="article" translate="M0083"></a></li><li><a ui-sref="notebook.list" translate="M0078"></a></li><li><a ui-sref="question.list" translate="M0008"></a></li><li><a ui-sref="discussion.list" translate="M0031"></a></li></ul><p></p></div><div class="col-sm-3"><h4 translate="M0066"></h4><p></p><ul class="list-unstyled"><li><a href="http://support.italki.com" target="_blank">{{\'M0120\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/categories/200405048-For-Students" target="_blank">{{\'M0121\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/sections/201133628-Language-Partners" target="_blank" translate="M0100"></a></li><li><a href="http://support.italki.com/hc/en-us/sections/201133488-Payment-italki-credits-ITC-" target="_blank">{{\'M0123\'|t}}</a></li><li><a href="http://teachers.italki.com" target="_blank">{{\'M0124\'|t}}</a></li></ul></div><div class="col-sm-3"><h4>{{\'C0040\'|t}}</h4><ul class="list-unstyled grid-gutter-margin-b"><li><a ui-sref="oet">{{\'TS287\'|t}}</a></li><li><a ui-sref="apply" translate="TS288"></a></li><li><a ui-sref="giftcard" translate="M0116"></a></li><li><a ui-sref="referral" translate="RP102" id="ReferralLink"></a></li><li><a ui-sref="company" translate="KP544"></a></li><li><a ui-sref="app">italki Apps</a></li></ul><ul class="list-inline"><li><a href="http://www.facebook.com/italkilanguages" target="_blank"><i class="fa fa-facebook social-icon" aria-hidden="true" style="background-color: #3b5998"></i></a></li><li><a href="http://twitter.com/italki" target="_blank"><i class="fa fa-twitter social-icon" aria-hidden="true" style="background-color: #55acee"></i></a></li><li><a href="http://vk.com/italkicom" target="_blank"><i class="fa fa-vk social-icon" aria-hidden="true" style="background-color: #45668e"></i></a></li><li><a href="http://weibo.com/italki" target="_blank"><i class="fa fa-weibo social-icon" aria-hidden="true" style="background-color: #da251c"></i></a></li><li class="wechat-icon"><a><i tooltip-image style="background-color: #11ce1c" class="fa fa-weixin social-icon" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" data-html="true" title="<img style=\'width:150px;height:150px;\' src=\'/static/images/static/italki_qrcode.jpg\'/>"></i></a></li><li><a href="https://www.youtube.com/user/italkilanguage" target="_blank"><i class="fa fa-youtube-play social-icon" aria-hidden="true" style="background-color: #bb0000"></i></a></li></ul></div></div></div><style>.language-divider{\n              border-top: 1px solid #e5e5e5;\n              padding-top: 5px;\n             margin: 5px 0;\n              overflow: hidden;\n\n          }</style><div class="grid-gutter-margin-b row"><div class="col-md-2" style="margin-bottom: 32px"><div class=""><div class="select-large"><select class="select-language-lang language-selector" ng-change="onchange()" ng-model="GlobalObject.lang" ng-options="m.name for m in langArr" style=""></select><a class="select-a" style="">{{GlobalObject.lang.name}}</a></div></div></div><div class="col-md-10 hidden-phone"><ul class="list-inline"><li>&copy; {{\'TS289\'|t}}</li><li><a ui-sref="about" translate="M0111"></a></li><li><a ui-sref="press" translate="M0033"></a></li><li><a ui-sref="contactus" translate="M0108"></a></li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a href="http://stories.italki.com/" target="_blank">{{\'M0125\'|t}}</a></li><li><a href="http://blog.italki.com/jobs" target="_blank" translate="M0022"></a></li><li><a ui-sref="tos" translate="M0109"></a></li><li><a ui-sref="privacy" translate="M0112"></a></li></ul></div><div class="col-md-10 text-center visible-phone"><h5><strong>&copy; {{\'TS289\'|t}}</strong></h5><ul class="list-inline"><li><a ui-sref="about" translate="M0111"></a></li><li><a ui-sref="press" translate="M0033"></a></li><li><a ui-sref="contactus" translate="M0108"></a></li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a ui-sref="tos" translate="M0109"></a></li><li><a ui-sref="privacy" translate="M0112"></a></li></ul><ul class="list-inline"><li><a href="http://www.facebook.com/italkilanguages" target="_blank"><i class="fa fa-facebook social-icon" aria-hidden="true" style="background-color: #3b5998"></i></a></li><li><a href="http://twitter.com/italki" target="_blank"><i class="fa fa-twitter social-icon" aria-hidden="true" style="background-color: #55acee"></i></a></li><li><a href="http://vk.com/italkicom" target="_blank"><i class="fa fa-vk social-icon" aria-hidden="true" style="background-color: #45668e"></i></a></li><li><a href="http://weibo.com/italki" target="_blank"><i class="fa fa-weibo social-icon" aria-hidden="true" style="background-color: #da251c"></i></a></li><li><a><i tooltip-image style="background-color: #11ce1c" class="fa fa-weixin social-icon" aria-hidden="true" data-toggle="tooltip" data-placement="top" data-html="true" title="<img style=\'width:150px;height:150px;\' src=\'/static/images/static/italki_qrcode.jpg\'/>"></i></a></li><li><a href="https://www.youtube.com/user/italkilanguage" target="_blank"><i class="fa fa-youtube-play social-icon" aria-hidden="true" style="background-color: #bb0000"></i></a></li></ul></div></div></div></footer>'),a.put("/views/common/bottom.purchasev2.html",'<style>.language {\n    margin-bottom: 5px;\n    font-size: 13px;\n    font-weight: bold;\n    line-height: 1.38;\n    color: #ffffff;\n  }\n  .visible-title {\n    display: none;\n  }\n  @media (max-width: 767px) {\n    .list-align-center {\n      text-align: center;\n    }\n    .visible-title {\n      display: block;\n    }\n    .footer {\n      margin-top: 0;\n    }\n  }\n  @media (min-width: 768px) {\n    .list {\n      margin: 20px 0 0;\n    }\n  }\n  @media (min-width: 992px) {\n    .list {\n      margin: 40px 0 0;\n    }\n  }</style><footer class="footer" ng-controller="BottomCtrl"><div class="container"><div class="row" style="margin-bottom: 20px"><div class="col-sm-12 col-md-4"><div class="row"><div class="col-xs-6 col-sm-3 col-md-6"><p class="language">Language</p><div class="select-large" style="position: relative;height: 40px"><select class="select-language-lang language-selector" ng-change="onchange()" ng-model="GlobalObject.lang" ng-options="m.name for m in langArr" style="top: 0"></select><a class="select-a" style="top: 0">{{GlobalObject.lang.name}}</a></div></div><div class="col-xs-6 col-sm-3 col-md-6"><p class="language">Display currency</p><div class="select-large" style="position: relative;height: 40px"><select style="top: 0" ng-model="data.currency" class="select-language-lang language-selector" ng-change="changeCurrency()"><option selected="{{currency.current === currentUser.currency}}" value="AED">AED</option><option selected="{{currency.current === currentUser.currency}}" value="ARS">ARS $</option><option selected="{{currency.current === currentUser.currency}}" value="AUD">AUD $</option><option selected="{{currency.current === currentUser.currency}}" value="BGN">BGN лв</option><option selected="{{currency.current === currentUser.currency}}" value="BHD">BHD BD</option><option selected="{{currency.current === currentUser.currency}}" value="BRL">BRL R$</option><option selected="{{currency.current === currentUser.currency}}" value="CAD">CAD $</option><option selected="{{currency.current === currentUser.currency}}" value="CHF">CHF CHF</option><option selected="{{currency.current === currentUser.currency}}" value="CLP">CLP $</option><option selected="{{currency.current === currentUser.currency}}" value="CNY">CNY ¥</option><option selected="{{currency.current === currentUser.currency}}" value="CZK">CZK Kč</option><option selected="{{currency.current === currentUser.currency}}" value="DKK">DKK kr</option><option selected="{{currency.current === currentUser.currency}}" value="EGP">EGP £</option><option selected="{{currency.current === currentUser.currency}}" value="EUR">EUR €</option><option selected="{{currency.current === currentUser.currency}}" value="GBP">GBP £</option><option selected="{{currency.current === currentUser.currency}}" value="HKD">HKD $</option><option selected="{{currency.current === currentUser.currency}}" value="HRK">HRK kn</option><option selected="{{currency.current === currentUser.currency}}" value="HUF">HUF Ft</option><option selected="{{currency.current === currentUser.currency}}" value="IDR">IDR Rp</option><option selected="{{currency.current === currentUser.currency}}" value="ILS">ILS ₪</option><option selected="{{currency.current === currentUser.currency}}" value="INR">INR ₨</option><option selected="{{currency.current === currentUser.currency}}" value="ISK">ISK kr</option><option selected="{{currency.current === currentUser.currency}}" value="JOD">JOD</option><option selected="{{currency.current === currentUser.currency}}" value="JPY">JPY ¥</option><option selected="{{currency.current === currentUser.currency}}" value="KRW">KRW ₩</option><option selected="{{currency.current === currentUser.currency}}" value="KWD">KWD</option><option selected="{{currency.current === currentUser.currency}}" value="LBP">LBP £</option><option selected="{{currency.current === currentUser.currency}}" value="MXN">MXN $</option><option selected="{{currency.current === currentUser.currency}}" value="MYR">MYR RM</option><option selected="{{currency.current === currentUser.currency}}" value="NOK">NOK kr</option><option selected="{{currency.current === currentUser.currency}}" value="NZD">NZD $</option><option selected="{{currency.current === currentUser.currency}}" value="PHP">PHP Php</option><option selected="{{currency.current === currentUser.currency}}" value="PLN">PLN zł</option><option selected="{{currency.current === currentUser.currency}}" value="QAR">QAR ﷼</option><option selected="{{currency.current === currentUser.currency}}" value="RUB">RUB руб</option><option selected="{{currency.current === currentUser.currency}}" value="SEK">SEK kr</option><option selected="{{currency.current === currentUser.currency}}" value="SGD">SGD $</option><option selected="{{currency.current === currentUser.currency}}" value="THB">THB ฿</option><option selected="{{currency.current === currentUser.currency}}" value="TRY">TRY ₤</option><option selected="{{currency.current === currentUser.currency}}" value="TWD">TWD NT$</option><option selected="{{currency.current === currentUser.currency}}" value="USD">USD $</option><option selected="{{currency.current === currentUser.currency}}" value="VND">VND ₫</option><option selected="{{currency.current === currentUser.currency}}" value="ZAR">ZAR R</option></select><a class="select-a" style="top: 0">{{currentUser.currency}}</a></div></div></div></div><div class="col-sm-12 col-md-8 list-align-center"><div class="row"><div class="col-sm-12"><h5 class="visible-title"><strong>&copy; {{\'TS289\'|t}}</strong></h5><ul class="list-inline list"><li class="hidden-xs">&copy; {{\'TS289\'|t}}</li><li><a ui-sref="about" translate="M0111"></a></li><li><a ui-sref="press" translate="M0033"></a></li><li><a ui-sref="contactus" translate="M0108"></a></li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a href="http://stories.italki.com/" target="_blank">{{\'M0125\'|t}}</a></li><li><a href="http://blog.italki.com/jobs" target="_blank" translate="M0022"></a></li><li><a ui-sref="tos" translate="M0109"></a></li><li><a ui-sref="privacy" translate="M0112"></a></li></ul></div></div></div></div></div></footer>'),a.put("/views/common/bottom.simple.html",'<footer class="footer" ng-controller="BottomCtrl" style="background: none; border:none; margin-top: 0px"><div class="container"><div class="grid-gutter-margin-b row"><div class="col-md-12"><ul class="list-inline"><li>&copy; {{\'TS289\'|t}}</li><li><a href="/about" translate="M0111"></a></li><li><a href="/press" translate="M0033"></a></li><li><a href="/contactus" translate="M0108"></a></li><li><a href="http://support.italki.com" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a href="http://stories.italki.com/" target="_blank">{{\'M0125\'|t}}</a></li><li><a href="http://blog.italki.com/jobs" target="_blank" translate="M0022"></a></li><li><a href="/tos" translate="M0109"></a></li><li><a href="/privacy" translate="M0112"></a></li></ul></div></div></div></footer>'),a.put("/views/common/italki.click.with.spinner.html",'<span class="btn-txt" ng-if="!noe">{{stext|t}}</span> <span class="loader" ng-class="{\'loader--white\':btn}" ng-if="!noe"><span class="loader_"></span></span>'),a.put("/views/common/language_select.html",'<select id="select_using_language" class="select common180 enterIndex"><option value="all">所有语言</option><option value="english">英语</option><option value="chinese">中文(普通话)</option><option value="french">法语</option><option value="spanish">西班牙语</option><option value="portuguese">葡萄牙语</option><option value="german">德语</option><option value="japanese">日语</option><option value="korean">韩语</option><option value="arabic">阿拉伯语</option><option value="hindi">印地语</option><option value="italian">意大利语</option><option value="russian">俄语</option><option value="">--------</option><option value="afrikaans">南非荷兰语</option><option value="akan twi">阿坎契维语</option><option value="albanian">阿尔巴尼亚语</option><option value="amharic">阿姆哈拉语</option><option value="armenian">亚美尼亚语</option><option value="azeri">阿塞语</option><option value="basque">巴斯克语</option><option value="belarusian">白俄罗斯语</option><option value="bengali">孟加拉语</option><option value="bosnian">波斯尼亚语</option><option value="bulgarian">保加利亚语</option><option value="burmese">缅甸语</option><option value="catalan">加泰罗尼亚语</option><option value="cebuano">宿务语</option><option value="chinese(cantonese)">中文(粤语)</option><option value="chinese(shanghainese)">中文(上海话)</option><option value="chinese(taiwanese)">中文(台湾话)</option><option value="chinese(other)">中文(其他方言)</option><option value="croatian">克罗地亚语</option><option value="czech">捷克语</option><option value="danish">丹麦语</option><option value="dutch">荷兰语</option><option value="dzongkha">宗卡语</option><option value="esperanto">世界语</option><option value="estonian">爱沙尼亚语</option><option value="filipino(tagalog)">菲律宾语(塔加路语)</option><option value="finnish">芬兰语</option><option value="flemish">佛兰芒语</option><option value="gaelic(irish)">盖尔语(爱尔兰语)</option><option value="gaelic (scottish)">Gaelic (Scottish)</option><option value="galician">加利西亚语</option><option value="georgian">乔治亚语</option><option value="greek">希腊语</option><option value="greenlandic">Greenlandic</option><option value="gujarati">古吉拉特语</option><option value="haitian creole">海地克利奥尔语</option><option value="hausa">豪萨语</option><option value="hawaiian">夏威夷语</option><option value="hebrew">希伯来语</option><option value="hmong">苗语</option><option value="hungarian">匈牙利语</option><option value="icelandic">冰岛语</option><option value="indonesian">印度尼西亚语</option><option value="javanese">爪哇语</option><option value="kannada">埃纳德语</option><option value="kazakh">哈萨克语</option><option value="kinyarwanda">Kinyarwanda</option><option value="khmer">高棉语</option><option value="kurdish">库尔德语</option><option value="klingon">克林贡语</option><option value="kyrgyz">柯尔克孜语</option><option value="lao">老挝语</option><option value="latin">拉丁语</option><option value="latvian">拉脱维亚语</option><option value="lithuanian">立陶宛语</option><option value="luo">Luo</option><option value="luxembourgish">卢森堡语</option><option value="macedonian">马其顿语</option><option value="malagasy">马尔加什语</option><option value="malay">马来语</option><option value="malayalam">马拉雅拉姆语</option><option value="maltese">马耳他语</option><option value="maori">毛利语</option><option value="marathi">马拉地语</option><option value="mongolian">蒙古语</option><option value="nahuatl">Nahuatl</option><option value="nepali">尼泊尔语</option><option value="norwegian">挪威语</option><option value="ojibwe">欧及布威语</option><option value="pashtu">普什图语</option><option value="persian(farsi)">波斯语</option><option value="polish">波兰语</option><option value="punjabi">旁庶比语</option><option value="quichua">Quichua</option><option value="rohingya">罗兴亚语</option><option value="romanian">罗马尼亚语</option><option value="samoan">萨摩亚语</option><option value="sanskrit">梵语</option><option value="serbian">塞尔维亚语</option><option value="sign language">手语</option><option value="sindhi">Sindhi</option><option value="sinhala">僧伽罗语</option><option value="slovak">斯洛伐克语</option><option value="slovenian">斯洛文尼亚语</option><option value="somali">索马里语</option><option value="swahili">斯瓦希里语</option><option value="swedish">瑞典语</option><option value="tajik">塔吉克语</option><option value="tamazight">柏柏尔诸语言</option><option value="tamil">泰米尔语</option><option value="tatar">鞑靼语</option><option value="telugu">泰卢固语</option><option value="thai">泰语</option><option value="tibetan">藏语</option><option value="turkish">土耳其语</option><option value="turkmen">土库曼语</option><option value="ukrainian">乌克兰语</option><option value="urdu">乌尔都语</option><option value="uyghur">维吾尔语</option><option value="uzbek">乌兹别克语</option><option value="vietnamese">越南语</option><option value="welsh">威尔士语</option><option value="xhosa">科萨语</option><option value="yiddish">意第绪语</option><option value="yoruba">约鲁巴语</option><option value="yucatec maya">尤卡</option><option value="zhuang">壮语</option><option value="zulu">祖鲁语</option><option value="other">其他</option></select>'),
a.put("/views/common/nav.html",'<nav class="navbar navbar-default" role="navigation"><div class="container-fluid"><ul class="nav navbar-nav navbar-left"><li class=""><a href="#" class="">{{ \'M0073\'|t }}</a></li><li class=""><a ui-sref="professional" class="">{{ \'M0105\'|t }}</a></li><li class=""><a ui-sref="informal" class="">{{ \'M0106\'|t }}</a></li><li class=""><a ui-sref="instant" class="">{{ \'M0113\'|t }}</a></li><li class=""><a href="#" class="">{{ \'M0083\'|t }}</a></li></ul></div></nav>'),a.put("/views/common/sub.nav.html",'<div class="grid-gutter-margin-b"><ul class="nav new" style="margin-top:30px"><li ui-sref-active="active"><a ui-sref="dashboard" class="text-up" translate="M0073"></a></li><li ui-sref-active="active"><a ui-sref="session.explore" class="text-up" ng-click="$parent.session_nav_open=!$parent.session_nav_open">Lessons</a></li><li ui-sref-active="active"><a ui-sref="contacts.follow" class="text-up" translate="M0029" ng-click="$parent.contact_nav_open=!$parent.contact_nav_open"></a></li><li ui-sref-active="active"><a ui-sref="message" class="text-up" translate="ML001"></a></li><li ui-sref-active="active"><a ui-sref="notification" class="text-up" translate="ML003"></a></li></ul></div><div class="panel no-border"><div class="panel-body" style="background: #ddd"><a href="" class="btn btn-primary btn-block text-up" translate="MH110"></a></div></div>'),a.put("/views/common/top-right-guest.html",'<div class="col10 textr alignr"><ul class="unlogin"><li class="last"><a id="IA_Login" class="buttonf" ui-sref="signin" style="color:#fff">{{\'C0071\'|t}}</a></li><li class="" style="margin:0px 10px 0px 20px"><a ui-sref="signup" class="button" style="color:#fff">{{\'C0072\'|t}}</a></li><li class="log" style="margin-top:3px"><a href="{{HOW_IT_WORKS_URL}}">{{\'HPT91\'|t}}</a></li><li class="log" style="margin-top:3px"><a href="{{WHAT_IS_ITALKI_URL}}">{{\'HPT92\'|t}}</a></li></ul><div class="clear"></div></div>'),a.put("/views/common/top.add.html",'<style>.left-responsive-fix {\n  float: left;\n}</style><nav class="navbar navbar-default" role="navigation" style="position: relative;margin-bottom: 0;height: 56px" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header left-responsive-fix"><a style="padding-bottom: 20px" italki-go-home><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a></div><div class="nav navbar-nav navbar-right navbar-collapse no-padding"><div class="add" style="margin-top: 11px"><kp-add-this></kp-add-this></div></div></div></nav>'),a.put("/views/common/top.clean.recommendation.html",'<style>.btn-back { color: white; border-color: #ccc;}</style><div ng-controller="TopNavCtrl"><div class="alert bg-danger darken no-margin no-border text-center" ng-if="currentUser&&currentUser.register_status!=255">{{\'MH008\'|t}}. {{\'UR155\'|t}} <a ng-click="openModalInstance()">{{\'MH137\'|t}}</a></div><nav class="navbar navbar-default" role="navigation" style="position: relative;height: 56px"><div class="container header-menu-mid1" style="padding-top: 0"><div class="navbar-header"><span style="padding-bottom: 20px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></span></div></div><div class="content" style="padding-top: 0"><div class="header-menu-small1"><ul class="nav navbar-nav navbar-right navbar-collapse no-padding" ng-if="currentUser" style="width: 100%"><li style="width:20%" kp-toggle-slide-in><div class="navbar-header" style="margin: 0 auto"><a class="navbar-brand logo1" italki-go-home></a></div></li></ul><div ng-if="!currentUser"><a italki-go-home style="height: 56px;padding: 0px 0px 20px 16px" kp-toggle-slide-in><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a> <span class="pull-right" style="height: 56px;line-height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;font-size: 13px;font-weight: bold"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;height: 56px"><span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="border: none;margin: 0px;padding:0px;height: 56px;width: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars" style="font-size: 24px;width: 24px;opacity: .87;line-height: 56px"></i></button></span></div></div></div></nav></div><style>@media (max-width: 479px) {\n    .header-menu-mid1 {\n      display: none\n    }\n\n    .header-menu-small1 {\n      display: block\n    }\n\n  }\n  @media (min-width: 480px) {\n    .header-menu-mid1 {\n      display: block\n    }\n\n    .header-menu-small1 {\n      display: none\n    }\n\n  }</style>'),a.put("/views/common/top.tpl.bs.html",'<nav class="navbar navbar-default header-regular" role="navigation" style="" ng-controller="TopNavCtrl"><div class="alert bg-default darken no-margin no-border" ng-if="currentUser.instant_tutoring_status==1&&currentUser.is_teacher&&currentUser.register_status==255"><div class="container no-padding-t"><div class="row"><div class="col-md-3"><span class="text-bg">Teacher Panel</span></div><div class="col-md-6 text-center"><div class="form-inline"><div class="form-group"><span class="text-bg">{{\'PB081\'|t}}&nbsp;</span></div><div class="form-group"><italki-switcher ng-model="currentUser.is_available_instant_tutoring" ng-change="updateIsAvailableInstantTutoring" class="switcher-theme-square"></italki-switcher></div></div></div><div class="col-md-3 text-right"><a class="btn btn-default test-notification-btn" style="color: #333" ng-click="showTestNotificationPopup();">{{\'KP280\'|t}}</a></div></div></div></div><div class="alert bg-danger darken no-margin no-border text-center" ng-if="currentUser&&currentUser.register_status!=255">{{\'MH008\'|t}}. {{\'UR155\'|t}} <a ng-click="openModalInstance()">{{\'MH137\'|t}}</a></div><div ng-if="currentUser[\'no_password\']" class="alert bg-danger darken no-margin no-border text-center">{{\'MH267\'|t}} <a ng-click="openPwdSet()">{{\'MH266\'|t}}</a></div><div class="container" style="padding-top: 0"><div class="navbar-header"><a italki-go-home style="padding-bottom: 20px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a></div><ul class="nav navbar-nav navbar-right navbar-collapse no-padding" id="bs-example-navbar-collapse-1" style="height: 56px"><li ng-if="!currentUser"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link text-lb" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span style="font-weight: normal" class="visible-md-inline-block visible-lg-inline-block siteLang">{{\'KP461\'|t}}: &nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div></li><li><a ui-sref="teachers" class="text-lb text-up" style="padding-top: 11px"><span class="fa fa-ii-search" style="font-size: 24px;vertical-align: middle"></span>&nbsp;{{\'M0000\'|t}}</a></li><li dropdown><a href="#" dropdown-toggle class="text-lb text-up" style="padding-top: 11px"><span class="fa fa-ii-public" style="font-size: 24px;vertical-align: middle"></span>&nbsp;{{\'M0114\'|t}}</a><ul class="dropdown-menu right dropdown-notification" role="menu"><li><a ui-sref="article" translate="M0083"></a></li><li><a ui-sref="notebook.list" translate="M0078"></a></li><li><a ui-sref="question.list" translate="M0008"></a></li><li><a ui-sref="discussion.list" translate="M0031"></a></li><li><a ui-sref="partner" translate="M0006"></a></li><li><a ui-sref="languagehacking" translate="LH100"></a></li></ul></li><li dropdown ng-if="currentUser"><a href="#" dropdown-toggle class="text-lb text-up" style="padding-top: 11px"><span class="fa fa-ii-lessons" style="font-size: 24px;vertical-align: middle"></span>&nbsp;{{\'M0038\'|t}}</a><ul class="dropdown-menu right dropdown-notification" role="menu"><li><a ui-sref="session.explore" translate="M0038"></a></li><li><a ui-sref="session.package" translate="M0076"></a></li><li><a ui-sref="session.calendar" translate="M0075"></a></li><li class="divider"></li><li><a href="" translate="TS108" ng-click="openSchedule()"></a></li><li class="divider"></li><li><a ui-sref="challenge">Language Challenge</a></li></ul></li><li dropdown ng-if="currentUser"><a class="no-padding" ng-click="contacts()"><span class="fa fa-ii-people nav-size"></span></a></li><li ng-if="currentUser" ng-controller="MessagePopCtrl as ctrl"><a href="#" class="no-padding" ng-click="ctrl.open()" title="{{\'ML001\'|t}}"><span class="fa fa-ii-message nav-size"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.muc">{{(notifyObj.muc>99) ? "99+" : notifyObj.muc}}</span></a></li><li ng-if="currentUser" ng-controller="NotificationPopCtrl as ctrl"><a href="#" class="no-padding" ng-click="ctrl.open()" title="{{\'M0027\'|t}}" ng-class="{\'notifymargin\':(notifyObj.nuc>99)}"><span class="fa fa-ii-notifications nav-size"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.nuc">{{(notifyObj.nuc>99) ? "99+" : notifyObj.nuc}}</span></a></li><li dropdown ng-if="currentUser"><a href="#" dropdown-toggle style="padding: 10px 0 11px 4px" class="select-butten text-center"><img class="mute rounded" width="25px" ng-src="{{ currentUser|avatar:\'50\' }}" kp-fallback-avatar> <span class="fa fa-angle-down"></span></a><ul class="dropdown-menu right dropdown-notification" role="menu"><li><a ui-sref="finance.overview"><p ng-if="currentUser.revenue_account">{{\'PM001\'|t}}<br><span class="text-bg">${{currentUser.revenue_account.available_itc_usd+currentUser.revenue_account.frozen_withdraw_itc_usd|kpToUsd|number:2}}</span>&nbsp;USD</p><p ng-if="currentUser.payment_account">{{\'PM002\'|t}}<br><span class="text-bg">${{ currentUser.payment_account.total_itc_usd|kpToUsd|number:2}}</span>&nbsp;USD</p></a></li><li ng-if="currentUser.payment_account" class="divider"></li><li><a ui-sref="recharge" translate="MH110"></a></li><li><a ui-sref="giftcard" translate="M0116"></a></li><li><a ng-click="openRedeemModal()" href="">{{\'M0130\'|t}}</a></li><li class="divider"></li><li><a ui-sref="user({id:currentUser.id})" translate="TP122"></a></li><li ng-if="!currentUser.is_teacher&&currentUser.apply_status!=8"><a ui-sref="setting.editProfile">{{\'MH031\'|t}}</a></li><li ng-if="currentUser.is_teacher||currentUser.apply_status==8"><a ui-sref="setting.editProfile">{{\'MH032\'|t}}</a></li><li><a ui-sref="setting.account" translate="M0086"></a></li><li class="divider"></li><li><a href="https://www.italki.com/signin/sso" translate="M0110"></a></li><li><a ng-click="signOut($event)" translate="C0073"></a></li></ul></li><li ng-if="!currentUser"><button type="button" class="btn btn-link text-up" ui-sref="signin" style="color:#ff4338;border: 1px solid #ff4338 !important;height: 36px;font-size: 14px;margin: 10px 0px 0px 20px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'C0071\'|t}}</button></li><li ng-if="!currentUser"><button type="button" class="btn btn-primary text-up" ui-sref="signup" style="border: 1px solid #ff4338 !important;height: 36px;box-shadow: none;font-size: 14px;margin: 10px 0px 0px 8px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'C0072\'|t}}</button></li></ul></div></nav><nav class="navbar navbar-default header-small" role="navigation" style="box-shadow: 0px 0px 10px rgba(0, 1, 2, 0.27);    -webkit-box-shadow: 0px 0px 10px rgba(0, 1, 2, 0.27)" ng-controller="TopNavCtrl"><div ng-if="mobileShow&&isDashboard" class="mobile-notification no-margin no-border text-center"><div class="group-text"><a class="close-btn" ng-click="closeMobile()"></a><div class="app-icon-wrap"><div class="app-icon"></div></div><div class="download-text"><div class="font-10">{{\'HPT00\'|t}}</div><strong><div class="font-10">{{\'M0131\'|t}}</div></strong></div></div><div class="download-btn text-up" ng-click="goDownload()"><div class="font-10">{{\'M0132\'|t}}</div></div></div><div class="alert bg-default darken no-margin no-border" ng-if="currentUser.instant_tutoring_status==1&&currentUser.register_status==255"><div class="teacher-notification-box"><div><span class="text-bg teacher-notification-text">{{\'PB081\'|t}}</span></div><div class="instant-btn-wrap"><italki-switcher ng-model="currentUser.is_available_instant_tutoring" ng-change="updateIsAvailableInstantTutoring" class="switcher-theme-square pull-right center-block"></italki-switcher></div><div><a class="btn btn-default pull-right text-sm test-notification-btn" style="color: #333" ng-click="showTestNotificationPopup();" ng-bind-html="\'KP335\'|t"></a></div></div></div><div class="alert bg-danger darken no-margin no-border text-center" ng-if="currentUser&&currentUser.register_status!=255">{{\'MH008\'|t}}. {{\'UR155\'|t}} <a ng-click="openModalInstance()">{{\'MH137\'|t}}</a></div><div ng-if="currentUser[\'no_password\']" class="alert bg-danger darken no-margin no-border text-center">{{\'MH267\'|t}}. <a ng-click="openPwdSet()">{{\'MH266\'|t}}</a></div><div class="content" style="padding-top: 0"><div class="header-menu-small1"><ul class="nav navbar-nav navbar-right navbar-collapse no-padding" ng-if="currentUser" style="width: 100%"><li style="width:20%" kp-toggle-slide-in><div class="navbar-header" style="margin: 0 auto"><a class="navbar-brand logo1" italki-go-home></a></div></li><li dropdown ng-if="currentUser" style="width:20%;height: 56px" kp-toggle-slide-in><a ui-sref="session.explore" class="no-padding text-center"><span class="fa fa-ii-lessons" style="color:black;font-size:24px;padding: 19px 0px 13px 0px;opacity: 0.54"></span></a></li><li ng-if="currentUser" ng-controller="MessagePopCtrl as ctrl" style="width:20%;height: 56px" kp-toggle-slide-in><a href="#" class="no-padding text-center" ng-click="ctrl.open()"><span class="fa fa-ii-message" style="color:black;font-size:24px;padding: 19px 0px 13px 0px;opacity: 0.54"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.muc">{{(notifyObj.muc>99) ? "99+" : notifyObj.muc}}</span></a></li><li ng-if="currentUser" ng-controller="NotificationPopCtrl as ctrl" style="width:20%;height: 56px" kp-toggle-slide-in><a href="#" class="no-padding text-center" ng-click="ctrl.open()" title="{{\'M0027\'|t}}" ng-class="{\'notifymargin\':(notifyObj.nuc>99)}"><span class="fa fa-ii-notifications" style="color:black;font-size:24px;padding: 19px 0px 13px 0px;opacity: 0.54"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.nuc">{{(notifyObj.nuc>99) ? "99+" : notifyObj.nuc}}</span></a></li><li dropdown ng-if="currentUser" kp-toggle-slide-out style="width:20%"><a href="#" dropdown-toggle style="padding: 15px 0 15px 4px" class="select-butten text-center"><img class="mute rounded" width="25px" ng-src="{{ currentUser|avatar:\'50\' }}" kp-fallback-avatar> <span class="fa fa-angle-down"></span></a></li></ul><div ng-if="!currentUser"><a italki-go-home style="height: 56px;padding: 0px 0px 20px 16px" kp-toggle-slide-in><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a> <span class="pull-right" style="height: 56px;line-height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;font-size: 13px;font-weight: bold"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;height: 56px"><span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="border: none;margin: 0px;padding:0px;height: 56px;width: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars" style="font-size: 24px;width: 24px;opacity: .87;line-height: 56px"></i></button></span></div></div><div class="container" style="padding-top: 0"><div class="navbar-header" style="width: 100%"><div class="header-menu-mid1"><a italki-go-home style="height: 56px;padding: 0px 0px 20px 0px" kp-toggle-slide-in><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a><ul class="nav navbar-nav navbar-right navbar-collapse no-padding" style="width: 255px"><li dropdown ng-if="currentUser" kp-toggle-slide-in><a dropdown-toggle href="#" class="no-padding" style="padding-top: 11px"><span class="fa fa-ii-lessons nav-size"></span></a><ul class="dropdown-menu right dropdown-notification" role="menu" style="position: absolute;border: 1px solid #c2c2c2;background: #ffffff"><li><a ui-sref="session.explore" translate="M0038"></a></li><li><a ui-sref="session.package" translate="M0076"></a></li><li><a ui-sref="session.calendar" translate="M0075"></a></li><li class="divider"></li><li><a href="" translate="TS108" ng-click="openSchedule()"></a></li><li class="divider"></li><li><a ui-sref="challenge">Language Challenge</a></li></ul></li><li dropdown ng-if="currentUser" kp-toggle-slide-in><a dropdown-toggle href="#" class="no-padding" ng-click="contacts()"><span class="fa fa-ii-people nav-size"></span></a></li><li ng-if="currentUser" ng-controller="MessagePopCtrl as ctrl" style="width:20%;height: 56px" kp-toggle-slide-in><a href="#" class="no-padding" ng-click="ctrl.open()"><span class="fa fa-ii-message nav-size"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.muc">{{(notifyObj.muc>99) ? "99+" : notifyObj.muc}}</span></a></li><li ng-if="currentUser" ng-controller="NotificationPopCtrl as ctrl" style="width:20%;height: 56px" kp-toggle-slide-in><a href="#" class="no-padding text-center" ng-click="ctrl.open()" title="{{\'M0027\'|t}}" ng-class="{\'notifymargin\':(notifyObj.nuc>99)}"><span class="fa fa-ii-notifications nav-size"></span> <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.nuc">{{(notifyObj.nuc>99) ? "99+" : notifyObj.nuc}}</span></a></li><li dropdown ng-if="currentUser" kp-toggle-slide-out style="width:20%"><a href="#" dropdown-toggle style="padding: 16px 0 15px 4px" class="select-butten text-center"><img class="mute rounded" width="25px" ng-src="{{ currentUser|avatar:\'50\' }}" kp-fallback-avatar> <span class="fa fa-angle-down"></span></a></li></ul><span class="pull-right" ng-if="!currentUser" style="height: 56px;line-height: 56px;margin-right: -15px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link text-lb" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span style="font-weight: normal" class="visible-md-inline-block visible-lg-inline-block siteLang">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="border: none;margin: 0px;padding:0px;height: 56px;width: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars" style="font-size: 24px;width: 24px;opacity: .87;line-height: 56px"></i></button></span></div><div class="header-menu-lg1"><a italki-go-home style="height: 56px;padding: 0px 0px 20px 0px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a><ul class="nav navbar-nav navbar-collapse no-padding" style="float: right !important"><li ng-if="!currentUser"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link text-lb" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span class="visible-md-inline-block visible-lg-inline-block" style="font-weight: normal">{{\'KP461\'|t}}: &nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div></li><li><a ui-sref="teachers" class="text-lb text-up" kp-toggle-slide-in style="padding-top: 11px"><span class="fa fa-ii-search" style="font-size: 24px;vertical-align: middle"></span>&nbsp;{{\'M0000\'|t}}</a></li><li dropdown><a href="#" dropdown-toggle class="text-lb text-up" style="padding-top: 11px" kp-toggle-slide-in><span class="fa fa-ii-public" style="font-size: 24px;vertical-align: middle"></span>&nbsp;{{\'M0114\'|t}}</a><ul class="dropdown-menu right dropdown-notification" role="menu"><li><a ui-sref="article" translate="M0083"></a></li><li><a ui-sref="notebook.list" translate="M0078"></a></li><li><a ui-sref="question.list" translate="M0008"></a></li><li><a ui-sref="discussion.list" translate="M0031"></a></li><li><a ui-sref="partner" translate="M0006"></a></li><li><a ui-sref="languagehacking" translate="LH100"></a></li></ul></li><li dropdown ng-if="currentUser"><a dropdown-toggle href="#" class="no-padding"><div class=""><span class="fa fa-ii-lessons nav-size"></span>&nbsp;</div></a><ul class="dropdown-menu right dropdown-notification" role="menu" style="position: absolute;border: 1px solid #c2c2c2;background: #ffffff"><li><a ui-sref="session.explore" translate="M0038"></a></li><li><a ui-sref="session.package" translate="M0076"></a></li><li><a ui-sref="session.calendar" translate="M0075"></a></li><li class="divider"></li><li><a href="" translate="TS108" ng-click="openSchedule()"></a></li><li class="divider"></li><li><a ui-sref="challenge">Language Challenge</a></li></ul></li><li dropdown ng-if="currentUser"><a dropdown-toggle href="#" class="no-padding" ng-click="contacts()"><div class=""><span class="fa fa-ii-people nav-size"></span>&nbsp;</div></a></li><li ng-if="currentUser" ng-controller="MessagePopCtrl as ctrl" style="height: 56px"><a href="#" class="no-padding" ng-click="ctrl.open()"><span class="fa fa-ii-message nav-size"></span>&nbsp; <span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.muc">{{(notifyObj.muc>99) ? "99+" : notifyObj.muc}}</span></a></li><li ng-if="currentUser" ng-controller="NotificationPopCtrl as ctrl" style="height: 56px"><a href="#" class="no-padding text-center" ng-click="ctrl.open()" title="{{\'M0027\'|t}}" ng-class="{\'notifymargin\':(notifyObj.nuc>99)}"><div class=""><span class="fa fa-ii-notifications nav-size"></span>&nbsp;</div><span class="badge badge-danger" style="font-size: x-small;line-height: 12px;padding: 0px 3px;top: 16px" ng-hide="!notifyObj.nuc">{{(notifyObj.nuc>99) ? "99+" : notifyObj.nuc}}</span></a></li><li dropdown ng-if="currentUser" style="width: 50px"><a href="#" dropdown-toggle style="padding: 10px 0 11px 4px" class="select-butten text-center"><img class="mute rounded" width="25px" ng-src="{{ currentUser|avatar:\'50\' }}" kp-fallback-avatar> <span class="fa fa-angle-down"></span></a><ul class="dropdown-menu right dropdown-notification" role="menu"><li><a ui-sref="finance.overview"><p ng-if="currentUser.revenue_account">{{\'PM001\'|t}}<br><span class="text-bg">${{currentUser.revenue_account.available_itc_usd+currentUser.revenue_account.frozen_withdraw_itc_usd|kpToUsd|number:2}}</span>&nbsp;USD</p><p ng-if="currentUser.payment_account">{{\'PM002\'|t}}<br><span class="text-bg">${{ currentUser.payment_account.total_itc_usd|kpToUsd|number:2}}</span>&nbsp;USD</p></a></li><li ng-if="currentUser.payment_account" class="divider"></li><li><a ui-sref="recharge" translate="MH110"></a></li><li><a ui-sref="giftcard" translate="M0116"></a></li><li><a ng-click="openRedeemModal()" href="">{{\'M0130\'|t}}</a></li><li class="divider"></li><li><a ui-sref="user({id:currentUser.id})" translate="TP122"></a></li><li ng-if="!currentUser.is_teacher&&currentUser.apply_status!=8"><a ui-sref="setting.editProfile">{{\'MH031\'|t}}</a></li><li ng-if="currentUser.is_teacher||currentUser.apply_status==8"><a ui-sref="setting.editProfile">{{\'MH032\'|t}}</a></li><li><a ui-sref="setting.account" translate="M0086"></a></li><li class="divider"></li><li><a href="https://www.italki.com/signin/sso" translate="M0110"></a></li><li><a ng-click="signOut($event)" translate="C0073"></a></li></ul></li><li ng-if="!currentUser"><span class="pull-right" ng-if="!currentUser" style="height: 56px;line-height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="border: none;margin: 0px;padding:0px;height: 56px;width: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars" style="font-size: 24px;width: 24px;opacity: .87;line-height: 56px"></i></button></span></li></ul></div></div></div></div><nav class="nav-sm" role="navigation" ng-if="!currentUser"><div class="nav-bg" kp-toggle-slide-out></div><div class="nav-content panel text-white" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper"><div style="font-size: 14px;padding: 0px;color: #000000"><div class="row lab2" ui-sref="landing" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'M0001\'|t}}</span></div></div><div class="row lab2" ui-sref="signup" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0072\'|t}}</span></div></div><div class="row lab2" ui-sref="signin" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0071\'|t}}</span></div></div><div class="row lab3" ui-sref="teachers" kp-toggle-slide-out style="height: 48px"><div class="col-xs-3" style="padding: 0px;margin:0px;width: 56px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;line-height: 48px"></span></div><div class="col-xs-9" style="padding: 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div ng-class="{\'backgro\':isCommunity}"><div class="row" style="margin: 0px;height: 48px;padding: 12px 16px"><div class="col-xs-3" style="padding: 0px;width: 56px;margin: 0px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="padding: 0px;margin: 0px" ng-click="isCommunity = !isCommunity"><div><span>{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div></div></div><div class="row" collapse="!isCommunity" style="color:#777;width: 100%"><div class="col-xs-9" kp-toggle-slide-out style="float: right"><div style="line-height: 48px;height: 48px"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" ng-if="currentUser"><div class="nav-bg" kp-toggle-slide-out></div><div class="nav-content panel text-white" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper"><div style="font-size: 14px;padding: 0px"><div ng-class="{\'backgro\':isProfile}"><div class="row" style="margin: 0px 6px 0px 6px;height: 48px"><div class="col-xs-3" style="margin-top: 10px"><a ui-sref="user({id:currentUser.id})"><img class="mute rounded" width="25px" kp-fallback-avatar ng-src="{{ currentUser|avatar:\'50\' }}"></a></div><div class="col-xs-9" style="margin-top: 11px;margin-left: -13px" ng-click="isProfile = !isProfile"><span>{{\'M0041\'|t}} & {{\'M0005\'|t}}</span> <span ng-show="!isProfile" class="fa fa-ii-expand-more" style="float: right;margin-right: -15px;font-size: 24px"></span> <span ng-show="isProfile" class="fa fa-ii-expand-less" style="float: right;margin-right: -15px;font-size: 24px"></span></div></div></div><div class="row" collapse="!isProfile" style="color:#777"><div class="col-xs-3"></div><div class="col-xs-9" kp-toggle-slide-out><div ng-class="{\'border-top\':!isProfile}"><div class="row" style="margin-right: 16px;margin-left: -15px"><div class="col-xs-9" style="margin-bottom: 0px"><p ng-if="!currentUser.is_teacher&&currentUser.apply_status!=8" ui-sref="setting.editProfile" translate="MH031" style="margin-top: 13px"></p><p ng-if="currentUser.is_teacher||currentUser.apply_status==8" ui-sref="setting.editProfile" translate="MH032" style="margin-top: 13px"></p></div><div class="col-xs-3" style="margin-top: 10px;border-left: 1px solid #dddddd"><a ui-sref="teacher({id:currentUser.id})"><span class="fa fa-ii-visibility" style="font-size: 24px;color: black;opacity: 0.54"></span></a></div></div></div><div style="border-top: 1px solid #dddddd;margin-right: 16px;margin-left: -4px"><p ui-sref="setting.account" translate="M0086" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #dddddd;margin-right: 16px;margin-left: -4px"><p ng-click="signOut($event)" translate="C0073" style="margin-top: 10px;margin-bottom: 0px"></p></div></div></div><div class="row lab1" ui-sref="finance.overview" kp-toggle-slide-out style="margin: 0px 16px 0px 16px;height: 48px"><div class="col-xs-3" style="margin: 10px 0px 0px -11px"><a><span class="fa fa-ii-account-balance" style="font-size: 24px;color: black;opacity: 0.54"></span></a></div><div class="col-xs-9" style="margin-top: 11px;margin-left: -7px"><span>{{\'M0048\'|t}}</span> <span style="float: right;margin-right: -30px" ng-if="!currentUser.is_teacher"><strong>${{currentUser.payment_account.total_itc_usd|kpToUsd|number:2}}&nbsp;USD</strong></span> <span style="float: right;margin-right: -30px" ng-if="currentUser.is_teacher"><strong>${{currentUser.revenue_account.available_itc_usd+currentUser.revenue_account.frozen_withdraw_itc_usd|kpToUsd|number:2}}&nbsp;USD</strong></span></div></div><div ng-class="{\'backgro\':isContact}"><div class="row" style="margin: 0px 10px 0px 10px;height: 48px"><div class="col-xs-3" style="margin: 10px 0px 0px -5px"><span class="fa fa-ii-contact" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="margin-top: 11px;margin-left: -10px" ng-click="isContact = !isContact"><span>{{\'M0108\'|t}}</span> <span ng-show="!isContact" class="fa fa-ii-expand-more" style="float: right;margin-right: -21px;font-size: 24px"></span> <span ng-show="isContact" class="fa fa-ii-expand-less" style="float: right;margin-right: -21px;font-size: 24px"></span></div></div></div><div class="row" collapse="!isContact" style="color:#777;height: 48px"><div class="col-xs-3"></div><div class="col-xs-9" kp-toggle-slide-out><div ng-class="{\'border-top\':!isContact}"><p ui-sref="contacts.partner" translate="M0087" style="margin-top: 10px;margin-left: -5px"></p></div><div style="border-top: 1px solid #dddddd;    margin-left: -5px"><p ui-sref="contacts.teacher" translate="M0096" style="margin-top: 10px"></p></div><div ng-if="currentUser.is_tutor||currentUser.is_pro" style="border-top: 1px solid #dddddd;    margin-left: -5px"><p ui-sref="contacts.student" translate="M0097" style="margin-top: 10px;margin-bottom: 0px"></p></div></div></div><div class="row lab1" ui-sref="teachers" kp-toggle-slide-out style="height: 48px"><div class="col-xs-3" style="margin: 10px 0px 0px -12px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338"></span></div><div class="col-xs-9" style="margin-top: 11px;margin-left: -6px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div class="row lab" style="height: 48px"><div class="col-xs-3" style="margin: 10px 0px 0px -12px"><span class="fa fa-ii-help" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="margin-top: 11px;margin-left: -6px"><a href="https://www.italki.com/signin/sso" style="color: #000000">{{\'M0110\'|t}}</a></div></div><div ng-class="{\'backgro\':isCommunity}"><div class="row" style="margin: 0px 10px 0px 10px;height: 48px"><div class="col-xs-3" style="margin: 10px 0px 0px -4px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="margin-left: -11px;margin-top: 12px" ng-click="isCommunity = !isCommunity"><div><span>{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;margin-right: -21px;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;margin-right: -21px;font-size: 24px"></span></div></div></div></div><div class="row" collapse="!isCommunity" style="color:#777;width: 100%;height: 48px"><div class="col-xs-3"></div><div class="col-xs-9" kp-toggle-slide-out><div ng-class="{\'border-top\':!isCommunity}"><p ui-sref="article" translate="M0083" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="notebook.list" translate="M0078" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="question.list" translate="M0008" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="discussion.list" translate="M0031" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="partner" translate="M0006" style="margin-top: 10px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></div></nav></nav><style>.dtp-picker-selector1-link:after{\n    content: "";\n  }\n  .hp .dtp-picker-selector-link {\n    color: black;\n    padding: 0;\n    opacity: .54;\n  }\n\n  .hp .dtp-picker-selector-link:after {\n    color: black;\n    opacity: .54;\n    top: 0;\n  }\n\n  .hp .dtp-picker-selector select {\n    color: black;\n    opacity: .54;\n  }\n  .hp.party-size-picker {\n    width: auto !important;\n    margin: 22px 20px 0 0;\n  }\n  @media (max-width: 479px) {\n    .header-menu-mid1 {\n      display: none\n    }\n\n    .header-menu-small1 {\n      display: block\n    }\n\n    .header-menu-lg1 {\n      display: none\n    }\n\n  }\n  .siteLang{\n    display: none;\n  }\n  @media (min-width: 480px) {\n    .siteLang{\n      display: initial;\n    }\n  }\n\n  @media (max-width: 767px) and (min-width: 480px) {\n    .header-menu-mid1 {\n      display: block\n    }\n\n    .header-menu-small1 {\n      display: none\n    }\n\n    .header-menu-lg1 {\n      display: none\n    }\n\n  }\n\n  @media (max-width: 991px) and (min-width: 768px) {\n    .header-menu-mid1 {\n      display: none;\n    }\n\n    .header-menu-small1 {\n      display: none;\n    }\n\n    .header-menu-lg1 {\n      display: block;\n    }\n  }\n\n  @media (min-width: 992px) {\n    .header-menu-mid1 {\n      display: none\n    }\n\n    .header-menu-small1 {\n      display: none\n    }\n\n    .header-menu-lg1 {\n      display: none\n    }\n\n    .header-regular {\n      display: block\n    }\n\n    .header-small {\n      display: none;\n    }\n  }\n\n\n  @media screen and (min-width: 768px){\n    .notification-text{\n      display: inline-block;\n    }\n  }\n\n\n  @media screen and (max-width: 480px) {\n    .teacher-notification-text {\n      display: inline-block;\n      width: 110px;\n      font-size: 12px;\n    }\n\n    .test-notification-btn{\n      padding: 5px;\n      overflow-x: hidden;\n    }\n\n    .alert{\n      padding: 5px;\n    }\n  }\n\n  .teacher-notification-box{\n    display: flex;\n    display: -webkit-flex;\n    display: flex;\n    /* for uc */\n    display: -webkit-box;\n    display: -ms-flexbox; /* TWEENER - IE 10 */\n\n    align-items:center;\n    -webkit-align-items:center;\n    box-align:center;\n    -moz-box-align:center;\n    -webkit-box-align:center;\n  }\n\n  .instant-btn-wrap{\n    -ms-flex: 1; /* IE 10 */\n    -webkit-flex: 1;\n    flex: 1;\n    /* for uc */\n    -webkit-box-flex: 1;\n    -moz-box-flex: 1;\n    -ms-flex: 1;\n    margin-right: 5px;\n  }\n\n  .mobile-notification{\n    background: linear-gradient(to top, #eeeeee, #ffffff);\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n    justify-content: space-between;\n    height: 50px;\n    padding-left: 10px;\n    padding-right: 10px;\n    color: #333;\n  }\n\n  .mobile-notification .group-text{\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  .mobile-notification .download-text{\n    vertical-align: middle;\n    display: inline-block;\n    text-align: left;\n    line-height: 1.2;\n  }\n\n  .mobile-notification .download-text .font-10{\n    font-size: 12px;\n    -webkit-transform-origin-x: 0;\n    -webkit-transform:scale(0.85);\n    font-size: 10px;\n  }\n\n  .mobile-notification .download-btn .font-10{\n    font-size: 12px;\n    -webkit-transform:scale(0.85);\n    font-size: 10px;\n  }\n\n\n\n\n  .mobile-notification .close-btn{\n    width: 9px;\n    height: 9px;\n    background: url(\'/static/images/icons/close_icon.svg\');\n    background-repeat: no-repeat;\n    background-size: contain;\n  }\n\n  .mobile-notification .download-btn{\n    border-radius: 100px;\n    border: solid 1px #333333;\n    padding: 6px 2px;\n    line-height: 1;\n  }\n\n  .mobile-notification .app-icon-wrap{\n    padding: 0 10px;\n  }\n\n  .mobile-notification .app-icon-wrap .app-icon{\n    width: 34px;\n    height: 34px;\n    background: url(/static/images/icons/italki_app_icon.png);\n    background-repeat: no-repeat;\n    background-size: contain;\n  }</style>'),
a.put("/views/common/top.tpl.clean.html",'<nav class="navbar navbar-default" role="navigation" style="position: relative;height: 56px" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><span style="padding-bottom: 20px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></span></div></div></nav>'),a.put("/views/common/top.tpl.clean.teacherv2.html",'<style>.btn-back { color: white; border-color: #ccc;}\n\n  @media (max-width: 480px) {\n    .btn-back {\n      color: white;\n      border-color: #ccc;\n      text-shadow: none;\n      line-height: 15px;\n      font-weight: 400;\n      padding: 7px 12px;\n      outline: 0 !important;\n    }\n  }\n\n  @media (min-wdith: 768px) {\n    ul.navbar-btn {margin-top: 12px; margin-right: -8px; height: 32px;}\n  }\n\n  @media (min-width: 480px) and (max-width: 768px) {\n    ul.navbar-btn { margin-top: -45px;}\n  }</style><div ng-controller="TopNavCtrl"><div class="alert bg-danger darken no-margin no-border text-center" ng-if="currentUser&&currentUser.register_status!=255">{{\'MH008\'|t}}. {{\'UR155\'|t}} <a ng-click="openModalInstance()">{{\'MH137\'|t}}</a></div><nav class="navbar navbar-default" role="navigation" style="position: relative;height: 56px"><div class="container header-menu-mid1" style="padding-top: 0"><div class="navbar-header"><span style="padding-bottom: 20px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></span></div></div><div class="content" style="padding-top: 0"><div class="header-menu-small1"><ul class="nav navbar-nav navbar-right navbar-collapse no-padding" ng-if="currentUser" style="width: 100%"><li style="width:20%" kp-toggle-slide-in><div class="navbar-header" style="margin: 0 auto"><a class="navbar-brand logo1" italki-go-home></a></div></li></ul><div ng-if="!currentUser"><a italki-go-home style="height: 56px;padding: 0px 0px 20px 16px" kp-toggle-slide-in><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a> <span class="pull-right" style="height: 56px;line-height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;font-size: 13px;font-weight: bold"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;height: 56px"><span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="border: none;margin: 0px;padding:0px;height: 56px;width: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars" style="font-size: 24px;width: 24px;opacity: .87;line-height: 56px"></i></button></span></div></div></div></nav></div><style>@media (max-width: 479px) {\n    .header-menu-mid1 {\n      display: none\n    }\n\n    .header-menu-small1 {\n      display: block\n    }\n\n  }\n  @media (min-width: 480px) {\n  .header-menu-mid1 {\n    display: block\n  }\n\n  .header-menu-small1 {\n    display: none\n  }\n\n  }</style>'),a.put("/views/common/top.tpl.html",'<style>.landing-logo{\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n    left: -8px;\n    position: absolute;\n  }\n  .btn.btn-login{\n    margin: 18px 0px 0px 20px;\n    color: rgba(255,255,255,1);\n    border-color: rgba(255,255,255,1);\n    right: 16px;\n    position: absolute;\n    font-weight: bold;\n  }\n  .btn.btn-login:hover,.btn.btn-login:active,.btn.btn-login:focus{\n    background: none!important;\n    color: rgba(255,255,255,0.7);\n    border-color: rgba(255,255,255,0.5);\n  }\n  @media (min-width: 480px){\n    .signin-button{\n      width: initial;\n      right: 12px;\n      /*top: -8px;*/\n      /*margin-top: 24px !important;*/\n    }\n    .signin-navbar{\n      height: 68px;\n      position:absolute;\n    }\n    .landing-logo-top{\n      top: 0 !important;\n      left: 16px !important;\n    }\n    .page-signup .signup-container, .page-signin .signin-container{\n       margin: 56px auto;\n    }\n  }\n  @media (max-width: 480px) {\n    .signin-button{\n      width: initial;\n      right: 12px !important;\n      /*top: -8px*/\n    }\n    .signin-navbar{\n      height: 56px;\n      position:fixed;\n    }\n  }\n    @media (max-width: 1024px) and (min-width: 480px){\n        .header-regular {\n             display:table\n        }\n    }\n    @media (max-width: 480px){\n        .landing-logo{\n            background: url(/static/svg/landing-logo.svg) no-repeat;\n            width: 73px;\n            height: 56px;\n            background-size: cover;\n            background-position: center;\n            left: 8px;\n        }\n        .top{\n            margin-top: 54px;\n        }\n      @media (max-width: 767px) and (min-width: 480px){\n        .header-regular {\n          display:table\n        }\n      }\n  }</style><nav class="navbar signin-navbar" role="navigation" style="height: 56px;margin: 0px;z-index: 1999;width: 100%;background: #ff4338;    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);border: none" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><a class="landing-logo landing-logo-top" italki-go-home=""></a></div><span class="pull-right"><a class="btn btn-outline btn-login text-up signin-button" style="margin: 10px 0px;height: 36px;line-height:inherit;border-radius: 2px" ui-sref="signin">{{\'C0071\'|t}}</a></span></div></nav>'),a.put("/views/common/top.tpl.logout.html",'<style>body{\n    font-size:16px;\n  }\n\n  h3{\n    margin-top: 0;\n  }\n\n  .hp-content{\n    margin-top: 56px;\n  }\n\n  .border-top{\n    border-top: 1px solid #dddddd;\n  }\n\n  .backgro {\n    background: #D9D9D9;\n  }\n  .siteLang{\n    display: none;\n  }\n  .btn.btn-login {\n    margin: 18px 0px 0px 20px;\n    color: rgba(255, 255, 255, 1);\n    border-color: rgba(255, 255, 255, 1);\n  }\n\n  .btn.btn-login:hover, .btn.btn-login:active, .btn.btn-login:focus {\n    background: none !important;\n    color: rgba(255, 255, 255, 0.7);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  .static-content-bottom {\n    width: 390px;\n    color: #fff;\n  }\n\n  .language-index {\n    background-size: cover !important;\n  }\n\n  .language-index:hover {\n  }\n\n  .language-index .info {\n    padding: 10px 15px;\n    padding-top: 40%;\n    background: -moz-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0%, rgba(0, 0, 0, .65)), color-stop(15%, rgba(0, 0, 0, 0.35)), color-stop(35%, rgba(0, 0, 0, 0)), color-stop(100%, rgba(0, 0, 0, 0)));\n    background: -webkit-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -o-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -ms-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: linear-gradient(to top, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#a6000000\', endColorstr=\'#00000000\', GradientType=0);\n    box-shadow: none;\n    border: none;\n  }\n\n  .language-index span.language {\n    font-size: 30px;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .language-index span.country {\n    font-size: 20px;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .language-index div.number {\n    font-size: 1.5rem;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .hp.party-size-picker {\n    width: auto !important;\n    margin: 16px 20px 0 0;\n  }\n\n  .hp .dtp-picker-selector-link {\n    color: #fff;\n    padding: 0;\n  }\n\n  .hp .dtp-picker-selector-link:after {\n    color: #fff;\n    top: 0;\n  }\n\n  .hp .dtp-picker-selector select {\n    color: #fff\n  }\n\n  .hp-language {\n    width: 100%;\n    border: none\n  }\n\n  .hp-language .dtp-picker-selector-link {\n    background: #424242;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    height: initial;\n  }\n\n  .hp-language .dtp-picker-selector-link:after {\n    color: #fff;\n    top: 1rem;\n    font-size: 30px;\n  }\n\n  .party-size-picker.lg .form-control.ui-select-toggle {\n    outline: 0;\n    background: #424242 !important;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    padding: 8px 12px;\n    height: 50px;\n  }\n\n  .ui-select-toggle .ui-select-placeholder {\n    float: none;\n  }\n\n  .ui-select-toggle .fa.fa-angle-down {\n    font-size: 30px;\n  }\n\n  .ui-select-toggle, .ui-select-search {\n    height: 50px;\n  }\n\n  .lg input.ui-select-search {\n    padding-left: 40px;\n    background: #ddd url(/static/images/icon_search.png) 10px 10px no-repeat !important;\n  }\n\n  .centric {\n    background: #ff4338;\n    width: 100px;\n    height: 100px;\n    line-height: 130px;\n    border-radius: 999999px;\n    text-align: center;\n    overflow: hidden;\n    margin: 0 auto\n  }\n\n  .centric i {\n    color: #fff\n  }\n\n\n  .p70 {\n    padding-bottom: 70px\n  }\n\n  .pt20 {\n    padding-top: 20px;\n    padding-bottom: 20px\n  }\n\n  .pt70 {\n    padding: 0 0 70px\n  }\n\n  .pb70{\n    padding-bottom: 70px;\n  }\n\n  .pt50 {\n    padding: 50px 0\n  }\n\n  .plr30 {\n    padding: 0 30px\n  }\n\n  .col-md-15 {\n    width: 20%\n  }\n\n  .class-content {\n    background: #ff7b73;\n    padding-bottom: 70px\n  }\n\n  .student-content {\n    padding-bottom: 70px;\n  }\n\n  .market-content {\n    background: #424242;\n    padding: 0 0 70px\n  }\n\n  .market-content .col-sm-4 .info {\n    background: #fff;\n    box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n    padding: 30px;\n    height: 260px\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-1 {\n    margin-left: auto;\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-2 {\n    margin-left: auto;\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-4 {\n    margin-left: auto;\n  }\n\n  .pt70 .row .col-sm-2 .language-index div.number {\n    font-size: 1.1rem;\n  }\n\n  .japanese-market-container-fix {\n    height: 260px !important;\n  }\n\n\n  @media (max-width: 992px)and (min-width: 768px) {\n\n    .second-row .col-md-4.col-sm-6.col-md-offset-4 {\n      margin-left: 25%;\n    }\n  }\n\n  @media (min-width: 1200px) {\n    .language-index .info:hover {\n      background: rgba(255, 67, 56, 0.15);\n      cursor: pointer;\n    }\n\n    .market-content .col-sm-4 .info {\n      background: #fff;\n      box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n      padding: 30px;\n      height: 200px\n    }\n  }\n\n  @media (max-width: 1199px) {\n    .trans_layout3:hover .transimage3 {\n      bottom: 0;\n      position: absolute;\n      width: 100%;\n      display: none !important;\n      height: 0 !important;\n      background: none !important;\n    }\n  }\n\n  @media (max-width: 1024px)and (min-width: 768px) {\n    .header-small {\n      display: block;\n      background: none;\n      box-shadow: none;\n    }\n\n    .market-content .col-sm-4 .info {\n      background: #fff;\n      box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n      padding: 30px;\n      height: 260px\n    }\n\n    .container.pt20 .text-lg {\n      font-size: 18px;\n    }\n\n    .language-index .info .language {\n      font-size: 20px;\n    }\n\n    .col-sm-3.second-row .number {\n      display: none;\n    }\n\n    .col-sm-2.col-md-15 .number {\n      display: none;\n    }\n\n\n\n    .col-md-4.col-sm-6 {\n      height: 250px;\n    }\n\n    .static-content {\n      width: 400px;\n      padding: 30px;\n    }\n\n    .hp-content {\n      padding: 20px 0 0;\n    }\n\n    .japanese-market-container-fix {\n      height: 330px !important;\n    }\n  }\n\n  @media (min-width: 768px){\n    .community-container .row{\n      margin-bottom: 40px;\n    }\n  }\n\n  @media (max-width: 767px)and (min-width: 480px) {\n    .siteLang{\n      display: initial;\n    }\n\n\n    .hp-content {\n      padding: 0;\n    }\n\n    .p70 {\n      padding: 120px 0 0 !important;\n      background: linear-gradient(to top, rgba(0, 0, 0, .55) 0, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0) 85%, rgba(0, 0, 0, .25) 100%);\n    }\n\n    .pt70 .row {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .pt70 .row .col-sm-4, .pt70 .row .col-sm-3, .pt70 .row .col-sm-2 {\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n\n    .pt70 .row .col-sm-4 .panel, .pt70 .row .col-sm-3 .panel, .pt70 .row .col-sm-2 .panel {\n      background-position: 50% 40% !important;\n    }\n\n\n\n    .header-small {\n      position: absolute;\n      background: none;\n      box-shadow: none;\n    }\n\n    .header-small i {\n      font-size: 24px;\n    }\n\n    .navbar-brand.logo {\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n\n    .col-md-2 {\n      width: auto;\n    }\n\n    .col-md-15 {\n      width: auto;\n    }\n\n    .language-index {\n      margin-bottom: 0;\n    }\n\n    .language-index .info {\n      padding-top: 20px;\n      height: 90px;\n    }\n\n    .language-index div.number {\n      display: none;\n    }\n\n    .class-content {\n      padding-top: 0px;\n    }\n\n    .student-content {\n      padding-top: 0px;\n      padding-bottom: 15px;\n    }\n\n    .student-content .col-md-4 {\n      margin-bottom: 20px;\n    }\n\n    .student-content .container {\n      margin-left: 15px;\n      margin-right: 15px;\n    }\n\n    .student-content .container:first-child {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .hp-language .dtp-picker-selector-link {\n      text-align: left;\n    }\n\n    .hp-language .dtp-picker-selector-link:after {\n      top: 50%;\n      content: "\\f105";\n      margin-top: -18px;\n    }\n\n    .visible-phone {\n      display: block !important;\n    }\n\n    .student-content .col-sm-6 ,.class-content .col-sm-4{\n      margin-bottom: 20px;\n      text-align: left;\n    }\n\n    .student-content .col-sm-6 img{\n      float: left;\n      width: 80px;\n    }\n\n\n    .student-content .col-sm-6 div{\n      margin-left: 120px;\n    }\n\n    .class-content .col-sm-4{\n      padding: 0 30px;\n    }\n\n    .class-content .col-sm-4 img{\n      float: left;\n      width: 170px;\n    }\n\n    .class-content .col-sm-4 div{\n      margin-left: 190px;\n      margin-top: 20px;\n    }\n\n  }\n\n  @media (max-width: 479px) {\n    .language-index span.language {\n      font-size: 30px;\n      font-weight: bold\n    }\n\n    .language-index span.country {\n      font-size: 14px;\n      font-weight: bold\n\n    }\n\n\n    .pt70 .row {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .pt70 .row .col-sm-4, .pt70 .row .col-sm-3, .pt70 .row .col-sm-2 {\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n\n    .pt70 .row .col-sm-4 .panel, .pt70 .row .col-sm-3 .panel, .pt70 .row .col-sm-2 .panel {\n      background-position: 50% 40% !important;\n    }\n\n\n    .header-small {\n      position: absolute;\n      background: none;\n      box-shadow: none;\n    }\n\n    .header-small i {\n      font-size: 24px;\n    }\n\n    .navbar-brand.logo {\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n\n    .col-md-2 {\n      width: auto;\n    }\n\n    .col-md-15 {\n      width: auto;\n    }\n\n    .language-index {\n      margin-bottom: 0;\n    }\n\n    .language-index .info {\n      padding-top: 20px;\n      height: 90px;\n    }\n\n    .language-index div.number {\n      display: none;\n    }\n\n    .class-content {\n      padding-top: 30px;\n    }\n\n\n\n    .student-content .col-md-4 {\n      margin-bottom: 20px;\n    }\n\n    .student-content .container {\n      margin-left: 15px;\n      margin-right: 15px;\n    }\n\n    .student-content .container:first-child {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n\n    .hp-language .dtp-picker-selector-link {\n      text-align: left;\n    }\n\n    .hp-language .dtp-picker-selector-link:after {\n      top: 2.2rem;\n      content: "\\f105";\n    }\n\n    .student-content .col-sm-6 ,.class-content .col-sm-4{\n      margin-bottom: 20px;\n      text-align: left;\n      padding: 0 10px;\n    }\n\n    .student-content .col-sm-6 img{\n      float: left;\n      width: 60px;\n    }\n\n    .student-content .col-sm-6 div{\n      margin-left: 75px;\n    }\n\n    .class-content .col-sm-4 img{\n      float: left;\n      width: 130px;\n    }\n\n    .class-content .col-sm-4 div{\n      margin-left: 140px;\n      padding: 0px;\n      margin-top: 10px;\n    }\n\n  }\n\n  .landing-logo {\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n  }\n\n  .slideout .navbar-default .navbar-nav > li > a .s {\n    border: 1px solid red;\n  }\n\n  .lab2{\n    height: 48px;\n    border-bottom: 1px solid #d9d9d9;\n    margin: 0px 16px;\n    line-height: 48px;\n  }\n  .lab3 {\n    border-bottom: 1px solid #dddddd;\n    height: 48px;\n    margin: 0px 16px;\n    line-height: 48px;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > .select-butten, .slideout .navbar-default .navbar-nav > .dropdown > .select-butten :hover, .slideout .navbar-default .navbar-nav > .dropdown > .select-butten:focus {\n    background: #D9D9D9;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > a > img, .slideout .navbar-default .navbar-nav > .dropdown > a > img :hover, .slideout .navbar-default .navbar-nav > .dropdown > a > img:focus {\n    background: #D9D9D9;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > a > span, .slideout .navbar-default .navbar-nav > .dropdown > a > span :hover, .slideout .navbar-default .navbar-nav > .dropdown > a > span:focus {\n    font-weight: bolder;\n  }\n\n  /* background setting*/\n  .static-content{\n    background: rgba(0,0,0,0.7);\n  }\n\n  .user-bottom .static-content{\n    background: none;\n    color:#fff;\n  }\n\n\n  .user-bottom{\n    margin-bottom: -30px;\n  }\n\n  @media (min-width: 1601px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 82px;\n      background: url(\'/static/images/homepage/homepage-hero-1200.jpg\') no-repeat;\n      background-size: cover;\n      color: #fff\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero2-1200.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-1200.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n  }\n\n  @media (min-width: 1200px) and (max-width: 1600px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 82px;\n      background: url(\'/static/images/homepage/homepage-hero-1200.jpg\') no-repeat;\n      color: #fff\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero2-1200.jpg\') no-repeat;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-1200.jpg\') no-repeat;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n\n  }\n\n  @media (min-width: 1200px){\n    .static-content-container{\n      width: 50%;\n\n    }\n\n    .static-content{\n      margin: 0 auto;\n      width: 448px;\n      padding: 62px 20px 40px;\n      /*height: 438px;*/\n    }\n\n    .user-bottom .static-content{\n      padding: 150px 20px 200px;\n    }\n  }\n\n  @media (min-width: 768px) and (max-width: 1199px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 49px;\n      background: url(\'/static/images/homepage/homepage-hero-768.jpg\') no-repeat;\n      color: #fff;\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-768.jpg\') no-repeat;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-768.jpg\') no-repeat;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .user-bottom .static-content{\n      padding: 150px 20px 130px;\n    }\n\n    .static-content-container{\n      width: 50%;\n    }\n\n    .static-content{\n      margin: 0 auto;\n      width: 368px;\n      padding: 37px 20px 40px;\n      /*height: 300px;*/\n    }\n\n    .static-content .title1{\n      font-size: 30px;\n      line-height: 36px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n    }\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 16px;\n      font-size: 14px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:36px;\n      line-height: 36px;\n    }\n\n  }\n\n  @media (min-width: 480px) and (max-width: 767px){\n\n    .hp-content {\n      width: 100%;\n      background: url(\'/static/images/homepage/homepage-hero-480.jpg\') no-repeat;\n      color: #fff\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-480.jpg\') no-repeat;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-480.jpg\') no-repeat;\n\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-480.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .static-content{\n      width: 316px;\n      height: 340px;\n      background: rgba(0, 0, 0, .7);\n      padding: 57px 0px 0px;\n    }\n\n  }\n\n  @media (max-width: 479px){\n\n    .hp-content {\n      width: 100%;\n      background: url(\'/static/images/homepage/homepage-hero-320.jpg\') no-repeat;\n      color: #fff;\n      background-position-x: 50%;\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-320.jpg\') no-repeat;\n      background-position-x: 50%;\n    }\n\n    html[kp-country="ru"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero3-320.jpg\') no-repeat;\n      background-position-x: 50%;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-320.jpg\') no-repeat;\n      background-position-x: 50%;\n    }\n\n    .user-bottom .container{\n      padding: 0;\n    }\n\n    .user-bottom .static-content{\n      margin-top: 176px;\n    }\n\n    .static-content .title1{\n      width: 320px;\n      margin: 0 auto;\n    }\n\n    .static-content{\n      background: none;\n    }\n\n  }\n\n  /*font setting*/\n\n  .text-slg {\n    font-size: 45px;\n    line-height: 48px;\n  }\n\n  h3{\n    font-size: 20px;\n    line-height: 24px;\n    margin-bottom: 16px;\n  }\n\n  @media (min-width:1200px){\n    .static-content .title1{\n      font-size: 42px;\n      line-height: 48px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n    }\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 38px;\n      font-size: 18px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:48px;\n      line-height: 48px;\n    }\n\n    .static-content h3 {\n      line-height: 24px;\n      font-size: 20px;\n      margin-bottom: 29px;\n      letter-spacing: 0px;\n      font-weight: 400;\n    }\n  }\n\n  @media (max-width:1199px){\n    .static-content .title1 {\n      font-size: 30px;\n      line-height: 36px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n      width: 300px;\n    }\n\n\n    .static-content h3 {\n      line-height: 20px;\n      font-size: 16px;\n      margin-bottom: 29px;\n      letter-spacing: 0px;\n      font-weight: 400;\n    }\n\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 16px;\n      font-size: 14px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:36px;\n      line-height: 36px;\n      width: auto !important;\n    }\n  }\n\n  @media (min-width: 768px){\n    .lesson-container{\n      padding-top: 70px;\n      padding-bottom: 70px;\n    }\n\n    .community-container{\n      padding-top: 70px;\n      padding-bottom: 30px;\n    }\n\n    .text-slg{\n      margin-bottom: 25px;\n    }\n\n  }\n\n  @media (max-width:767px){\n    .text-slg {\n      font-size: 34px;\n      line-height: 40px;\n    }\n\n    .lesson-container, .community-container{\n      padding-top: 35px !important;\n      padding-bottom: 35px;\n    }\n\n    .student-content .container {\n      padding-top: 35px !important;\n    }\n\n    .class-content{\n      padding-bottom: 35px;\n      padding-top:35px;\n    }\n\n    .text-slg{\n      margin-bottom: 16px;\n    }\n\n    .text-slg.grid-gutter-margin-b3{\n      margin-bottom: 30px;\n    }\n  }\n\n  @media (max-width:479px){\n    .static-content button {\n      margin-bottom: 0;\n      text-transform: uppercase;\n      font-size: 18px;\n      height: 61px;\n      width: 100% !important;\n    }\n\n    .static-content h3 {\n      letter-spacing: 0px;\n      width: 260px;\n      margin: 0 auto 44px;\n    }\n\n    .container-p70 {\n      background: linear-gradient(to top,  rgba(0, 0, 0, 0.7) 0, rgba(0, 0, 0, 0.7) 19%, rgba(0, 0, 0, 0) 61%,  rgba(0, 0, 0, 0) 100%);\n      padding-top: 200px;\n    }\n\n  }\n\n  @media (max-width: 365px){\n    .party-size-picker.lg .form-control.ui-select-toggle {\n      font-size: 18px;\n    }\n\n    .ui-select-toggle .fa.fa-angle-down {\n      font-size: 28px;\n    }\n  }</style><nav class="navbar visible-desktop" role="navigation" style="z-index: 1;position: absolute;width: 100%;background: #ff4338;box-shadow: none;border: none;height: 56px" ng-controller="TopNavCtrl"><div style="padding-top: 0;padding-left: 16px;padding-right: 16px"><div class="navbar-header"><a class="landing-logo" italki-go-home></a></div><style>.language-divider {\n        border-top: 1px solid #e5e5e5;\n        padding-top: 5px;\n        margin: 5px 0;\n        overflow: hidden;\n\n      }</style><span class="pull-right"><div class="pull-left is-relative" dropdown style="height:56px"><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span class="visible-md-inline-block visible-lg-inline-block" style="font-weight: normal">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><a class="btn btn-outline btn-login text-up" ui-sref="apply" style="height: 36px;font-size: 14px;margin: 10px -8px 10px 16px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'OB252\'|t}}</a> <a class="btn btn-outline btn-login text-up" ui-sref="signin" style="height: 36px;font-size: 14px;margin: 10px 8px 10px 16px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'C0071\'|t}}</a> <a class="btn btn-outline btn-login text-up" ui-sref="signup({teacherOnboarding:\'1\'})" style="height: 36px;font-size: 14px;margin: 0px;font-weight: bold;\n                      color: #ff4338;background-color: white !important;padding: 10px 16px;border-radius: 2px">{{\'C0072\'|t}}</a></span></div></nav><nav class="navbar visible-phone header-small" id="top" role="navigation" ng-controller="TopNavCtrl" style="height: 56px;background-color: #FF4338"><div class="container" style="padding-top: 0;padding-left: 16px;padding-right: 0px"><div class="navbar-header" style="width: 100%"><div class="header-menu-small"><a class="navbar-brand logo" ui-sref="landing" style="margin-left: auto"></a> <span class="pull-right" style="height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><style>.dtp-picker-selector1-link:after{\n                              content: "";\n                            }</style><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span style="font-weight: normal" class="siteLang">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="padding: 0px;width: 56px;margin: 0px;height: 56px; color:#fff"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars"></i></button></span></div></div></div><nav class="nav-sm" role="navigation" ng-if="!currentUser"><div class="nav-bg" kp-toggle-slide-out></div><div class="nav-content panel text-white" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper"><div style="font-size: 14px;padding: 0px;color: #000000"><div class="row lab2" ui-sref="landing" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'M0001\'|t}}</span></div></div><div class="row lab2" ui-sref="signup({teacherOnboarding:\'1\'})" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0072\'|t}}</span></div></div><div class="row lab2" ui-sref="signin" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0071\'|t}}</span></div></div><div class="row lab2" ui-sref="apply" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span class="text-up">{{\'OB252\'|t}}</span></div></div><div class="row lab3" ui-sref="teachers" kp-toggle-slide-out><div class="col-xs-3" style="padding: 0px;margin:0px;width: 56px;height: 48px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;line-height: 48px"></span></div><div class="col-xs-9" style="padding: 0px;margin-bottom: 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div ng-class="{\'backgro\':isCommunity}"><div class="row" style="margin: 0px;height: 48px;padding: 12px 16px"><div class="col-xs-3" style="padding: 0px;width: 56px;margin: 0px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="padding: 0px;margin: 0px" ng-click="isCommunity = !isCommunity"><div><span>{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div></div></div><div class="row" collapse="!isCommunity" style="color:#777;width: 100%"><div class="col-xs-9" kp-toggle-slide-out style="float: right"><div style="line-height: 48px;height: 48px"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white" ng-if="!currentUser" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper" style="color: #000000;padding: 0px 16px"><style>ul > li > a {\n            color: #000000;\n          }</style><ul class="menu-group list-unstyled grid-gutter-margin-b" style="line-height: 48px;margin-bottom: 0px"><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="landing">{{\'M0001\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signup({teacherOnboarding:\'1\'})">{{\'C0072\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signin">{{\'C0071\'|t}}</a></li></ul><div class="row" ui-sref="teachers" kp-toggle-slide-out style="height: 48px;border-bottom: 1px solid #d9d9d9"><div class="col-xs-3" style="width:56px;margin: 12px 0px 0px 0px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;vertical-align: middle"></span></div><div class="col-xs-9" style="margin: 12px 0px 0px 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div class="row" ng-class="{\'backgro\':isCommunity}" style="height: 48px"><div class="col-xs-3" style="margin: 12px 0px 0px 0px;width: 56px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54;vertical-align: middle"></span></div><div class="col-xs-9" ng-click="isCommunity = !isCommunity;" style="margin: 12px 0px 0px 0px"><span style="vertical-align: middle">{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div><div class="row" collapse="!isCommunity"><div class="col-xs-3" style="width: 56px"></div><div class="col-xs-9" kp-toggle-slide-out style="padding-right: inherit"><div ng-class="{\'border-top\':!isCommunity}"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white"><div class="nav-menu-wrapper"><div class=""><div class="nav-menu panel-body"><ul class="menu-group list-unstyled grid-gutter-margin-b"><li><a ui-sref="landing" class="link-mobile-menu">{{\'M0001\'|t}}</a></li><li><a ui-sref="signup({teacherOnboarding:\'1\'})" class="link-mobile-menu">{{\'C0072\'|t}}</a></li><li><a ui-sref="signin" class="link-mobile-menu">{{\'C0071\'|t}}</a></li></ul><a ui-sref="teachers" class="btn btn-warning btn-block grid-gutter-margin-b">{{\'M0000\'|t}}</a><h5 class="text-up" style="color: #888;font-size: 12px;border-bottom: 1px #888 solid;padding-bottom: 10px">{{\'M0114\'|t}}</h5><ul class="menu-group list-unstyled row-space-3"><li><a ui-sref="article" class="link-mobile-menu">{{\'M0083\'|t}}</a></li><li class=""><a ui-sref="notebook.list" class="link-mobile-menu">{{\'M0078\'|t}}</a></li><li class=""><a ui-sref="question.list" class="link-mobile-menu">{{\'M0008\'|t}}</a></li><li class=""><a ui-sref="discussion.list" class="link-mobile-menu">{{\'M0031\'|t}}</a></li><li class=""><a ui-sref="partner" class="link-mobile-menu">{{\'M0006\'|t}}</a></li><li><a ui-sref="languagehacking.list" translate="LH100"></a></li><li><a ui-sref="languagehacking" translate="LH100"></a></li></ul></div></div></div></div></nav></nav>'),
a.put("/views/common/top.tpl2.html",'<style>.landing-logo{\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n    left: -8px;\n    position: absolute;\n  }\n  .btn.btn-login{\n    margin: 18px 0px 0px 20px;\n    color: rgba(255,255,255,1);\n    border-color: rgba(255,255,255,1);\n    right: 16px;\n    position: absolute;\n    font-weight: bold;\n  }\n  .btn.btn-login:hover,.btn.btn-login:active,.btn.btn-login:focus{\n    background: none!important;\n    color: rgba(255,255,255,0.7);\n    border-color: rgba(255,255,255,0.5);\n  }\n  @media (min-width: 480px){\n    .signin-button{\n      width: initial;\n      right: 12px;\n      /*top: -8px;*/\n      /*margin-top: 24px !important;*/\n    }\n    .signin-navbar{\n      height: 68px;\n      position:absolute;\n    }\n    .landing-logo-top{\n      top: 0 !important;\n      left: 16px !important;\n    }\n    .page-signup .signup-container, .page-signin .signin-container{\n       margin: 56px auto;\n    }\n  }\n  @media (max-width: 480px) {\n    .signin-button{\n      width: initial;\n      right: 12px !important;\n      /*top: -8px*/\n    }\n    .signin-navbar{\n      height: 56px;\n      position:fixed;\n    }\n  }\n    @media (max-width: 1024px) and (min-width: 480px){\n        .header-regular {\n             display:table\n        }\n    }\n    @media (max-width: 480px){\n        .landing-logo{\n            background: url(/static/svg/landing-logo.svg) no-repeat;\n            width: 73px;\n            height: 56px;\n            background-size: cover;\n            background-position: center;\n            left: 8px;\n        }\n        .top{\n            margin-top: 54px;\n        }\n      @media (max-width: 767px) and (min-width: 480px){\n        .header-regular {\n          display:table\n        }\n      }\n  }</style><nav class="navbar signin-navbar" role="navigation" style="z-index: 1999;width: 100%;background: #ff4338;    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);border: none; height: 56px;margin: 0px" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><a class="landing-logo landing-logo-top" italki-go-home=""></a></div><span class="pull-right"><a class="btn btn-outline btn-login text-up signin-button" style="margin: 10px 0px;height: 36px;line-height:inherit;border-radius: 2px" ui-sref="signup">{{\'C0072\'|t}}</a></span></div></nav>'),a.put("/views/community/assert/discussiontab.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="discussion.list" ng-class="{\'selected\': highlightMenuTab}">{{\'M0065\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="discussion.mine({userId:currentUser.id})">{{\'GP907\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="discussion.myComments({userId:currentUser.id})">{{\'GP904\'|t}}</a></li></ul>'),a.put("/views/community/assert/languagehacking.tab.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ng-class="{\'selected\':centerSelected}" ui-sref="languagehackinglist">{{\'M0065\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ng-class="{\'selected\':missionSelected}" ui-sref="languagehackingmission({language:filter.language||\'french\',sort:selectedMission.sort})">{{\'LH102\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ng-class="{\'selected\':myCommentsSelected}" ui-sref="languagehackingmyComments">{{\'LH103\'|t}}</a></li></ul>'),a.put("/views/community/assert/notebook.correction.html",'<div class="panel-body" style="word-wrap:break-word"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="correction.corrector_obj.id"><a ui-sref="user({id:correction.corrector_obj.id})"><img ng-src="{{ correction.corrector_obj|avatar:100  }}" kp-fallback-avatar></a> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="correction.corrector_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!correction.corrector_obj.is_pro && correction.corrector_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && correction.corrector_obj.exam_result_shown_obj != null && correction.corrector_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><span ng-if="correction.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span> <span ng-show="!meta.editCorrection" ng-bind-html="html(correction.content)"></span><form name="formCorrect" ng-show="meta.editCorrection"><div class="form-group" ng-class="{\'has-error\':(correction.content.length==0 && vSubFlag1) || (correction.content.length>0 && correction.content.length<5) || charCount(correction.content)>5000}"><div class="" style="margin-bottom: 0px"><summernote config="options" code="text" height="300px" ng-model="correction.content" on-paste="paste(evt)"></summernote><span class="help-block" style="top: -22px" ng-show="correction.content.length==0 || (correction.content.length>0 && correction.content.length<5) || correction.content.length>5000">{{\'ST155\'|t|format:5:5000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}} {{5000-correction.content.length}}</p></div></div><button type="button" italki-click-with-spinner="updateNotebookCorrection()" class="btn btn-primary" stext="NB165" ng-disabled="$$oldCorrectionContent==correction.content ||  correction.content.length>5000 || correction.content.length<5"></button> <button class="btn" type="button" ng-click="cancelEditCorrtCion()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></form><div class="padding-xs-vr no-padding-b"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray no-margin-b"><span class="label" ng-bind="correction.mark_sum"></span>&nbsp;&nbsp;<li ng-hide="currentUser && currentUser.id==correction.corrector_obj.id"><a class="vote good1" title="{{correction.hasVoteUp?\'PB025\':\'C0174\'|t}}" ng-disabled="correction.hasVoteUp"><i class="fa" ng-class="{\'fa-thumbs-o-up\':!correction.hasVoteUp,\'fa-thumbs-up\':correction.hasVoteUp}" italki-click-with-spinner="correctionVote(1)" noe="1"></i></a>&nbsp;&nbsp; <a class="vote bad1" title="{{correction.hasVoteDown?\'PB025\':\'C0173\'|t}}" ng-disabled="correction.hasVoteDown"><i class="fa" ng-class="{\'fa-thumbs-o-down\':!correction.hasVoteDown,\'fa-thumbs-down\':correction.hasVoteDown}" italki-click-with-spinner="correctionVote(-1)" noe="1"></i></a></li><li ng-show="correction.device_type>0" ng-bind-html="correction.device_type|device"></li><li><a ui-sref="user({id:correction.corrector_obj.id})"><i ng-if="correction.corrector_obj.is_premium&& !correction.corrector_obj.is_pro && !correction.corrector_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{correction.corrector_obj.nickname}}</a></li><li ng-bind="correction.create_time|prettyDate"></li><li ng-if="correction.editable"><a href="" ng-click="editCorrection()">{{\'NB162\'|t}}</a></li><li><a href="" ng-click="toggleShowComment()">{{\'NB022\'|t|format:correction.comment_count}}</a> - <a href="" ng-click="showAddComment();focusInput=true;">{{\'MH114\'|t}}</a></li></ul></div></div></div><div ng-show="correction.showComment" class="widget-comments tab-pane no-padding"><hr><div class="no-padding-vr"><div ng-show="correction.meta.has_next"><p class="re_more"><a href="javascript:void(0);" ng-click="moreCorrectionComment()" ng-bind="\'MH112\'|t"></a></p></div><div class="comment" ng-repeat="comment in correction.comment_obj_s" style="padding-top: 10px"><div class="is-relative comment-card" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj|avatar:50 }}" class="comment-avatar" kp-fallback-avatar width="50"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj|avatar:50 }}"></div><div class="comment-body"><div class="comment-by"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray" style="margin-bottom: 0px"><li><span ng-bind-html="comment.device|device"></span> <a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre"></i> {{comment.commenter_obj.nickname}}</a></li><li>{{comment.create_time|prettyDate}}</li><li class="editLi" ng-if="comment.editable"><a href="" class="edit" ng-click="editCorrtComment(comment)">{{\'NB160\'|t}}</a></li></ul></div><div class="col-md-2 text-right"><a href="" ng-show="comment.editable" ng-click="editCorrtComment(comment)">{{\'NB160\'|t}}</a></div></div><div ng-show="comment.edited" style="padding: 4px  0px 0px 0px"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label></div><div ng-show="comment.isEditComment" style="padding-top: 10px"><form name="formComment"><div class="form-group" ng-class="{\'has-error\':(comment.content.length==0) || (comment.content.length>0 && comment.content.length<2) || comment.content.length>2000}"><textarea class="form-control" ng-model="comment.content" rows="5" focus-me="focusInput"></textarea><span class="help-block" ng-show="(comment.content.length==0 ) || (comment.content.length>0 && comment.content.length<2) || comment.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-comment.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateNotebookCorrectionComment(comment)" class="btn btn-primary" stext="NB165" ng-disabled="comment.content==comment.$$oldContent || comment.content.length>2000 || comment.content.length<2"></button> <button class="btn" type="button" ng-click="cancelEditCorrtComment()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div><div class="comment-text" ng-show="!comment.isEditComment" ng-bind="comment.content"></div></div></div></div><div ng-show="correction.isComment" style="padding-top: 10px"><form name="formComment"><div class="form-group" ng-class="{\'has-error\':(correction.newComment.content.length==0 && vSubFlag) || (correction.newComment.content.length>0 && correction.newComment.content.length<2) || charCount(correction.newComment.content)>2000}"><textarea class="form-control" ng-model="correction.newComment.content" rows="5" focus-me="focusInput"></textarea><span class="help-block" ng-show="(correction.newComment.content.length==0 && vSubFlag) || (correction.newComment.content.length>0 && correction.newComment.content.length<2) || charCount(correction.newComment.content)>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-charCount(correction.newComment.content)"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addComment,vSubFlag);" class="btn btn-primary" ng-disabled="correction.newComment.content.length==0  || (correction.newComment.content.length>0 && correction.newComment.content.length<2) || charCount(correction.newComment.content)>2000|| doflag"></button> <button class="btn" type="button" ng-click="correction.isComment=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div></div></div></div>'),a.put("/views/community/assert/notebook.tab.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebook.list" ng-class="{\'selected\': highlightMenuTab}">{{\'M0065\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebookAlias.mine({userId:currentUser.id})">{{\'NB105\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebookAlias.myCorrections({userId:currentUser.id})">{{\'NB104\'|t}}</a></li></ul>'),a.put("/views/community/assert/que.answer.html",'<div class="panel-body"><style>.visible-pad{\n      display: none !important;\n    }\n    @media (max-width: 992px) {\n      .visible-pad{\n        display:block !important;\n      }\n    }</style><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="answer.answerer_obj.id"><a ng-if="answer.answerer_obj.allow_profile" ui-sref="user({id:answer.answerer_obj.id})"><img ng-src="{{answer.answerer_obj|avatar:100 }}" class="comment-avatar" kp-fallback-avatar width="50"></a> <img ng-if="!answer.answerer_obj.allow_profile" class="comment-avatar" ng-src="{{answer.answerer_obj|avatar:50 }}"> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="answer.answerer_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!answer.answerer_obj.is_pro && answer.answerer_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && answer.answerer_obj.exam_result_shown_obj != null && answer.answerer_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><div ng-if="answer.status==2||answer.status==3"><h5 class="text-success no-margin-t">{{answer.status==2?\'AS154\':\'AS155\'|t}}</h5></div><span ng-if="answer.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span> <span ng-bind-html="html(answer.content)" ng-hide="meta.editAnswer "></span><form ng-show="meta.editAnswer"><div class="form-group" ng-class="{\'has-error\':(answer.raw_content.length==0 && vSubFlag2) || (answer.raw_content.length>0 && answer.raw_content.length<2) || answer.raw_content.length>2000}"><textarea class="form-control" focus-me="focusInput" ng-model="answer.raw_content" rows="5"></textarea><span class="help-block" ng-show="answer.raw_content.length==0 || (answer.raw_content.length>0 && answer.raw_content.length<2) || answer.raw_content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="text-muted">{{\'AS201\'|t}}</p><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-answer.raw_content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateAswer()" stext="NB165" ng-disabled="answer.raw_content.length<2 || answer.raw_content.length>2000 || $$oldAnswer == answer.raw_content" class="btn btn-primary"></button> <button class="btn" type="button" ng-click="cancelEditAnswer()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form><div class="padding-xs-vr no-padding-b"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray no-margin-b"><span class="label" ng-bind="answer.mark_sum"></span>&nbsp;&nbsp;<li ng-hide="currentUser && currentUser.id==answer.answerer_obj.id"><a class="vote good1" title="{{answer.hasVoteUp?\'PB025\':\'C0174\'|t}}" ng-disabled="answer.hasVoteUp"><i class="fa" ng-class="{\'fa-thumbs-up\':answer.hasVoteUp,\'fa-thumbs-o-up\':!answer.hasVoteUp}" italki-click-with-spinner="answerVote(1)" noe="1"></i></a>&nbsp;&nbsp; <a class="vote bad1" title="{{answer.hasVoteDown?\'PB025\':\'C0173\'|t}}" ng-disabled="answer.hasVoteDown"><i class="fa" ng-class="{\'fa-thumbs-down\':answer.hasVoteDown,\'fa-thumbs-o-down\':!answer.hasVoteDown}" italki-click-with-spinner="answerVote(-1)" noe="1"></i></a></li><li ng-show="answer.device>0" ng-bind-html="answer.device|device"></li><li><a ui-sref="user({id:answer.answerer_id})"><i ng-if="answer.answerer_obj.is_premium&& !answer.answerer_obj.is_pro && !answer.answerer_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i> {{answer.answerer_obj.nickname}}</a></li><li ng-bind="answer.create_time|prettyDate"></li><li ng-if="answer.editable"><a href="" ng-click="editAnswer()">{{\'NB163\'|t}}</a></li><li><a href="javascript:void(0);" ng-click="toggleShowComment()">{{\'NB022\'|t|format:answer.comment_count}} -</a> <a href="" ng-click="showAddComment();focusInput=true;">{{\'MH114\'|t}}</a></li><li style="float:right" class="visible-pad"><a italki-click-with-spinner="setBestAnswer()" stext="AS013"></a></li></ul></div><div class="col-md-2 text-right"><span kp-report-concern report-item="{reportType:\'ANR-ANR\',reportId:answer.id}"></span> <span ng-if="answer.has_set_best&&answer.status!=2&&answer.status!=3"><br><a italki-click-with-spinner="setBestAnswer()" stext="AS013"></a></span></div></div></div><div ng-show="answer.showComment" class="widget-comments tab-pane no-padding"><hr><div class="no-padding-vr"><div ng-show="answer.meta.has_next"><p class="re_more"><a href="javascript:void(0);" ng-click="moreAnsComment()" ng-bind="\'MH112\'|t"></a></p></div><div class="comment" ng-repeat="comment in answer.comment_obj_s" style="padding-top: 10px"><div class="is-relative comment-card" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj|avatar:50 }}" class="comment-avatar" kp-fallback-avatar width="50"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj|avatar:50 }}"></div><div class="comment-body"><div class="comment-by"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray" style="margin-bottom: 0px"><li><span ng-bind-html="comment.device|device"></span> <a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre"></i> {{comment.commenter_obj.nickname}}</a></li><li>{{comment.create_time|prettyDate}}</li><li class="editLi" ng-if="comment.editable"><a href="" class="edit" ng-click="editAnswerComment(comment);">{{\'NB160\'|t}}</a></li></ul></div><div class="col-md-2 text-right"><a href="" ng-if="comment.editable" ng-click="editAnswerComment(comment);">{{\'NB160\'|t}}</a></div></div></div><div ng-if="comment.edited" style="padding: 4px 0px 0px 0px"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label></div><div ng-show="comment.editComment " style="padding-top: 10px"><form><div class="form-group" ng-class="{\'has-error\':(comment.raw_content.length==0 && vSubFlag1) || (comment.raw_content.length>0 && comment.raw_content.length<2) || comment.raw_content.length>2000}"><textarea focus-me="focusInput" class="form-control" ng-model="comment.raw_content" rows="5"></textarea><span class="help-block" ng-show="comment.raw_content.length==0  || (comment.raw_content.length>0 && comment.raw_content.length<2) || comment.raw_content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-comment.raw_content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateComment(comment)" stext="NB165" class="btn btn-primary" ng-disabled="comment.raw_content.length<2||comment.raw_content.length>2000 || comment.$$oldComment==comment.raw_content"></button> <button class="btn" type="button" ng-click="cancelEditAnswerComment()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div><div class="comment-text" ng-bind-html="comment.content|replaceLineToBr " ng-hide="comment.editComment "></div></div></div><div ng-show="answer.isComment" style="padding-top: 10px"><form><div class="form-group" ng-class="{\'has-error\':(answer.newComment.content.length==0 && vSubFlag1) || (answer.newComment.content.length>0 && answer.newComment.content.length<2) || answer.newComment.content.length>2000}"><textarea focus-me="focusInput" class="form-control" ng-model="answer.newComment.content" rows="5"></textarea><span class="help-block" ng-show="(answer.newComment.content.length==0 && vSubFlag1) || (answer.newComment.content.length>0 && answer.newComment.content.length<2) || answer.newComment.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-answer.newComment.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addAnsComment,vSubFlag);" class="btn btn-primary" ng-disabled="answer.newComment.content.length<2||answer.newComment.content.length>2000 || doflag"></button> <button class="btn" type="button" ng-click="answer.isComment=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div></div></div></div>'),a.put("/views/community/assert/questiontab.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="question.list" ng-class="{\'selected\': highlightMenuTab}">{{\'M0065\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="question.mine({userId:currentUser.id})">{{\'AS020\'|t}}</a></li><li class="content-block-tab" ng-if="currentUser"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="question.myAnswers({userId:currentUser.id})">{{\'AS021\'|t}}</a></li></ul>'),a.put("/views/community/discussion/discussion.bs.html","<div ui-view></div>"),a.put("/views/community/discussion/discussion.entity.html",'<kp-title ng-if="discu" title="GP525" params="[discu.creator_obj.nickname,discu.title]"></kp-title><ul class="breadcrumb"><li><a href="/">{{\'M0001\'|t}}</a></li><li><a ui-sref="discussion.list">{{\'M0031\'|t}}</a></li><li class="active"><a ui-sref="discussion.language({language:discu.language})" ng-bind="discu.language|t"></a></li></ul><header><h2 ng-bind="discu.title"></h2></header><div class="and-detail row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="discu.creator_obj.id"><a ng-if="discu.creator_obj.allow_profile" ui-sref="user({id:discu.creator_obj.id})"><img ng-src="{{discu.creator_obj|avatar:100 }}" class="rounded" kp-fallback-avatar width="100"></a> <img ng-if="!discu.creator_obj.allow_profile" class="rounded" ng-src="{{ discu.creator_obj|avatar:100 }}"> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="discu.creator_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!discu.creator_obj.is_pro && discu.creator_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && discu.creator_obj.exam_result_shown_obj != null && discu.creator_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><span ng-if="discu.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span><div ng-show="!meta.editDiscu"><p class="lead" ng-bind-html="html(discu.content)" style="word-wrap: break-word"></p><div class="padding-xs-vr"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray"><li><span class="label" ng-bind="discu.mark_sum"></span>&nbsp;&nbsp; <span ng-hide="currentUser && currentUser.id==discu.creator_obj.id || !allowShowVoteUp"><a title="{{discu.hasVoteUp?\'PB025\':\'C1021\'|t}}" ng-disabled="discu.hasVoteUp" href="javascript:void(0);"><i ng-class="{\'fa-thumbs-o-up\':!discu.hasVoteUp,\'fa-thumbs-up\':discu.hasVoteUp}" class="fa" italki-click-with-spinner="discussionVote(1)" noe="1"></i></a>&nbsp;&nbsp; <a title="{{discu.hasVoteDown?\'PB025\':\'C1022\'|t}}" ng-disabled="discu.hasVoteDown" href="javascript:void(0);"><i ng-class="{\'fa-thumbs-o-down\':!discu.hasVoteDown,\'fa-thumbs-down\':discu.hasVoteDown}" class="fa" italki-click-with-spinner="discussionVote(-1)" noe="1"></i></a></span></li><li ng-show="discu.device_type>0" ng-bind-html="discu.device_type|device"></li><li><a ng-if="discu.creator_obj.allow_profile" onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:discu.creator_obj.id})"><i ng-if="discu.creator_obj.is_premium&& !discu.creator_obj.is_pro && !discu.creator_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{discu.creator_obj.nickname}}</a></li><li><span ng-bind="discu.create_time|prettyDate"></span></li><li>{{\'C2025\'|t|format:discu.comment_count}}</li></ul></div><div class="col-md-2 text-right"><kp-report-concern report-item="{reportType:\'GRP-DCS\',reportId:discu.id}"></kp-report-concern></div></div></div></div><div ng-show="meta.editDiscu" class="form-group" ng-class="{\'has-error\':(discu.content.length==0 && vSubFlag) || (discu.content.length>0 && discu.content.length<25) || discu.content.length>2500}"><div><summernote config="options" code="text" height="300px" ng-model="discu.content" on-paste="paste(evt)"></summernote></div><span class="help-block" style="top: -22px" ng-show="discu.content.length>5000||discu.content.length==0">{{\'ST155\'|t|format:0:5000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}} {{5000-discu.content.length}}</p><button class="btn btn-primary" italki-click-with-spinner="updateDiscu()" stext="NB165" ng-disabled="$$oldDiscuContent== discu.content || discu.content.length>5000 || discu.content.length==0"></button> <button class="btn" ng-click="cancelEditDiscu()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></div><div ng-show="!meta.editDiscu"><button class="btn" ng-if="discu.editable" ng-click="editDiscu()"><span class="btn-txt">{{\'NB160\'|t}}</span></button> <button type="button" ng-click="toAddComment();vSubFlag=false;" class="btn btn-primary"><span class="btn-txt">{{\'GP101\'|t}}</span></button></div></div></div></div></div><div class="panel loading-layout"><kp-loading indicator="discu"></kp-loading><div class="panel-body no-padding-b" ng-if="!discu.comment_count==0"><h3 class="no-margin">{{\'C0111\'|t}}</h3></div><div class="article-item" ng-repeat="comment in discu.comment_obj_s"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj|avatar:100 }}" class="comment-avatar" kp-fallback-avatar width="100"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj|avatar:100 }}"> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="comment.commenter_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!comment.commenter_obj.is_pro && comment.commenter_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && comment.commenter_obj.exam_result_shown_obj != null && comment.commenter_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><span ng-if="comment.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span> <span ng-bind-html="html(comment.content)" ng-hide="comment.editComment"></span><div ng-show="comment.editComment"><div class="form-group" ng-class="{\'has-error\':(comment.content.length==0 && vSubFlag) || (comment.content.length>0 && comment.content.length<2) || comment.content.length>2000}"><summernote config="options" code="text" height="300px" ng-model="comment.content"></summernote><span class="help-block" style="top: -22px" ng-show="comment.content.length==0  || (comment.content.length>0 &&comment.content.length<2) ||comment.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="" style="margin-top: -22px">{{\'AS005\'|t}}: <span ng-bind="2000-comment.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateComment(comment);" class="btn btn-primary" stext="NB165" ng-disabled="comment.$$oldComment==comment.content || comment.content.length<2 || comment.content.length>2000"></button> <button class="btn" type="button" ng-click="cancelEditComment()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></div><div class="padding-xs-vr no-padding-b"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray no-margin-b"><li><span class="label" ng-bind="comment.mark_sum"></span>&nbsp;&nbsp; <span ng-hide="currentUser && currentUser.id==comment.commenter_obj.id"><a title="{{comment.hasVoteUp?\'PB025\':\'C0174\'|t}}" ng-disabled="comment.hasVoteUp" href="javascript:void(0);"><i ng-class="{\'fa-thumbs-o-up\':!comment.hasVoteUp,\'fa-thumbs-up\':comment.hasVoteUp}" class="fa" italki-click-with-spinner="commentVote(1,comment)" noe="1"></i></a> &nbsp;&nbsp; <a title="{{comment.hasVoteDown?\'PB025\':\'C0173\'|t}}" ng-disabled="comment.hasVoteDown" href="javascript:void(0);"><i ng-class="{\'fa-thumbs-o-down\':!comment.hasVoteDown,\'fa-thumbs-down\':comment.hasVoteDown}" class="fa" italki-click-with-spinner="commentVote(-1,comment)" noe="1"></i></a></span></li><li ng-show="comment.device_type>0" ng-bind-html="comment.device_type|device"></li><li><a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{comment.commenter_obj.nickname}}</a></li><li ng-if="comment.editable"><a href="" ng-click="editComment(comment)">{{\'NB164\'|t}}</a></li><li ng-bind="comment.create_time|prettyDate"></li></ul></div><div class="col-md-2 text-right"><kp-report-concern report-item="{reportType:\'GRP-RPL\',reportId:comment.id}"></kp-report-concern></div></div></div></div></div></div></div><div ng-if="discu.comment_count==0"><div class="noresult-text text-lg text-center text-muted"><img class="rounded" src="/static/images/icon_norecord.png"><br><span>{{\'WK005\'|t}}</span></div></div></div><aside class="grid-gutter-margin-b" ng-show="(meta && meta.comments.has_next) ||loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMoreComment()"></button></aside><div ng-show="meta.isComment" class="panel"><div class="panel-body"><a id="formComment"></a><h3 class="no-margin-t">{{\'ML012\'|t}}</h3><form><div class="form-group" ng-class="{\'has-error\':(meta.newComment.content.length==0 && vSubFlag) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || charCount(meta.newComment.content)>2000}"><summernote config="options" code="text" height="300px" ng-model="meta.newComment.content"></summernote><span style="top: -22px" class="help-block" ng-show="(meta.newComment.content.length==0 && vSubFlag) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || charCount(meta.newComment.content)>2000">{{\'ST155\'|t|format:2:2000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}}: <span ng-bind="2000-charCount(meta.newComment.content)"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addComment,\'vSubFlag\');" class="btn btn-primary" ng-disabled="processing || meta.newComment.content.length<2 || meta.newComment.content.length>2000 || meta.newComment.content.length==0"></button> <button class="btn" type="button" ng-click="meta.isComment=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div><kp-ad-system loc="DIS_DETAIL_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body text-broken"><h4 class="no-margin-t">{{\'GP216\'|t}}</h4><div class="no-grid-gutter-h"><ul><li ng-repeat="discussion in meta.other_discussions"><a ui-sref="discussionAlias.entity({id:discussion.id})" ng-bind="discussion.title"></a></li></ul></div></div></div><kp-ad-system loc="DIS_DETAIL_R"></kp-ad-system></div></div>'),
a.put("/views/community/discussion/discussion.list.html",'<header><h2>{{\'M0031\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/discussiontab.html\'"></ng-include><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'C0007\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" ng-change="applyFilter()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'NB035\'|t}}<span ng-bind-html="filter.discussor_language?\':&nbsp;\'+(filter.discussor_language|t)+\'\':\'\'"></span></a><select ng-model="filter.discussor_language" ng-change="applyFilter()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'C0007\'|t}}">{{\'C0007\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans_1 | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'NB035\'|t}}">{{\'NB035\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="discussion in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body" ui-sref="discussionAlias.entity({id:discussion.id})"><div class="item-icon" kp-user-card user-id="discussion.creator_obj.id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="discussion.creator_obj.allow_profile" ui-sref="user({id:discussion.creator_obj.id})"><img ng-src="{{discussion.creator_obj|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a> <img ng-if="!discussion.creator_obj.allow_profile" class="rounded" ng-src="{{discussion.creator_obj|avatar:50 }}"></div><div class="item-info"><strong class="text-bg" ng-class="{\'text-premium\':discussion.creator_obj.is_premium&& !discussion.creator_obj.is_pro && !discussion.creator_obj.is_tutor}"><a ui-sref="discussionAlias.entity({id:discussion.id})" class="search-title" ng-bind="discussion.title"></a></strong><p class="truncate" ng-bind-html="html(discussion.content)"></p><ul class="list-inline no-margin-b text-light-gray"><li ng-show="discussion.device_type>0" ng-bind-html="discussion.device_type|device"></li><li><span class="label" ng-bind="discussion.mark_sum"></span></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="discussion.language({language:discussion.language})" ng-bind="discussion.language|t"></a></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:discussion.creator_obj.id})"><i ng-if="discussion.creator_obj.is_premium&& !discussion.creator_obj.is_pro && !discussion.creator_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{discussion.creator_obj.nickname}}</a></li><li><span>{{\'C2005\'|t}} <span ng-bind="discussion.update_time|prettyDate"></span></span></li><li><span ng-bind="\'C2025\'|t|format:discussion.comment_count"></span></li><li><span ng-bind="\'AS148\'|t|format:discussion.view_count"></span></li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside><kp-ad-system loc="DIS_LIST_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="text-center"><button ng-click="gotonew(\'discussionAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'GP211\'|t}}</span></button></div></div></div><kp-count-time-down-dashboard ng-show="languageTime.show"></kp-count-time-down-dashboard><kp-ad-system loc="DIS_LIST_R"></kp-ad-system></div></div>'),a.put("/views/community/discussion/discussion.mine.html",'<header><h2>{{\'M0031\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/discussiontab.html\'"></ng-include></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="discussion in items" class="animation-list-item article-item yes-cursor cursor-over"><div class="panel-body" ui-sref="discussionAlias.entity({id:discussion.id})"><div class="item-icon"><img ng-src="{{ discussion.creator_obj|avatar:50 }}" class="rounded" width="50" kp-fallback-avatar></div><div class="item-info"><strong class="text-bg"><a ui-sref="discussionAlias.entity({id:discussion.id})" class="search-title" ng-bind="discussion.title"></a></strong><p ng-bind="discussion.content" class="truncate"></p><ul class="list-inline no-margin-b text-light-gray"><li ng-show="discussion.device_type>0" ng-bind-html="discussion.device_type|device"></li><li><span class="label" ng-bind="discussion.mark_sum"></span></li><li><a ui-sref="discussion.language({language:discussion.language})" ng-bind="discussion.language|t"></a></li><li><span>{{\'C2005\'|t}} {{discussion.update_time|prettyDate}}</span></li><li><span ng-bind="\'C2025\'|t|format:discussion.comment_count"></span></li><li><span ng-bind="\'AS148\'|t|format:discussion.view_count"></span></li></ul></div></div></div></div><aside class="text-center" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="text-center"><button ui-sref="discussionAlias.new" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'GP211\'|t}}</span></button></div></div></div></div></div>'),a.put("/views/community/discussion/discussion.new.html",'<ul class="breadcrumb"><li><a ui-sref="dashboard">{{\'M0001\'|t}}</a></li><li><a ui-sref="discussion.list">{{\'M0031\'|t}}</a></li><li class="active">{{(discussion.id>0?\'C1003\':\'GP211\')|t}}</li></ul><header><h2>{{(discussion.id>0?\'C1003\':\'GP211\')|t}}</h2></header><div class="notebook row" ng-hide="discussion.id>0"><div class="col-md-9"><div class="panel"><form><div class="panel-body"><div class="row"><div class="col-md-12"><div class="form-group" ng-class="{\'has-error\':(discussion.title.length==0 && vSubFlag) || (discussion.title.length>0 && discussion.title.length<10) || discussion.title.length>110}"><label class="control-label" translate="C0106"></label><input type="text" name="title" class="form-control" ng-model="discussion.title"> <span class="help-block" ng-show="(discussion.title.length==0 && vSubFlag) || (discussion.title.length>0 && discussion.title.length<10) || discussion.title.length>110">{{\'ST155\'|t|format:10:110}}</span><p class="">{{\'AS005\'|t}} {{110-discussion.title.length}}</p></div><div class="form-group" ng-class="{\'has-error\':charCount(discussion.content)>5000}"><label class="control-label" translate="AS121"></label><span>({{\'C0043\'|t}})</span><div><summernote config="options" code="text" height="300px" ng-model="discussion.content" on-paste="paste(evt)"></summernote></div><span class="help-block" ng-show="charCount(discussion.content)>5000">{{\'ST155\'|t|format:0:5000}}</span><p class="">{{\'AS005\'|t}} {{5000-charCount(discussion.content)}}</p></div></div><div class="col-md-6"><div class="form-group" ng-class="{\'has-error\':(discussion.language.length==0 && vSubFlag)}"><label class="control-label" translate="GP039"></label><select class="form-control" ng-model="discussion.language"><option value="">{{\'C0061\'|t}}...</option><option ng-repeat="opt in currentUser.language_obj_s" value="{{opt.language}}">{{opt.language|t}}</option></select><span class="help-block" ng-show="discussion.language.length==0 && vSubFlag">{{\'C3019\'|t}}</span></div><div class="form-group" ng-class="{\'has-error\':(discussion.language2.length==0 && vSubFlag)}"><label class="control-label" translate="GP038"></label><select class="form-control" ng-model="discussion.language2"><option value="">{{\'C0061\'|t}}...</option><option ng-repeat="opt in currentUser.language_obj_s" value="{{opt.language}}">{{opt.language|t}}</option></select><span class="help-block" ng-show="discussion.language2.length==0 && vSubFlag">{{\'C3019\'|t}}</span></div></div></div><div class=""><button type="button" italki-click-with-spinner="submitForm(addDiscussion,\'vSubFlag\');" class="btn btn-primary"></button></div></div></form></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4>{{\'KP437\'|t}}</h4><div class="grid-gutter-margin-b"><p>{{\'KP438\'|t}}</p><p>{{\'KP282\'|t}}</p><p>{{\'KP283\'|t}}</p></div></div></div></div></div><div class="notebook" ng-show="discussion.id>0"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'GP219\'|t}}</p><p>{{\'LN218\'|t}}</p></div><div class="link"><ul class="list-inline"><li><a href="/discussion/{{discussion.id}}" class="btn">{{\'LN267\'|t}}</a></li><li><a href="" ng-click="discussion.id=0;vSubFlag=false;">{{\'GP211\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/community/languagehacking/languagehacking.bs.html",'<style>@font-face {\n    font-family: \'CheapPine\';\n    src: url(\'/static/images/static/cheappine.otf\');\n  }\n\n  .row_tys {\n    margin-top: 30px\n  }\n\n  .row_tys h1, h2 {\n    font-family: "CheapPine";\n  }\n\n  .row_tys h1 {\n    font-size: 100px;\n    line-height: 80px;\n    margin: 0;\n  }\n\n  .row_tys h1 strong {\n    font-family: Roboto;\n    color: #b2dde2;\n    font-weight: bolder\n  }\n\n  .row_tys h2 {\n    font-size: 40px;\n    margin: 0;\n  }\n\n  .row_tys a {\n    color: #00a6b1;\n    text-decoration: underline;\n  }\n\n  .row_tys .panel {\n    border-top: 3px #00a6b1 solid !important;\n  }\n\n  .col-sm-4 img {\n    max-width: 260px\n  }\n\n  .col-sm-4 .green {\n    background: #00a6b1;\n    padding: 20px 50px;\n    text-align: center;\n    color: #fff;\n    font-size: 14px\n  }\n\n  .logo_tys {\n    width: 70%;\n  }\n\n  .tys_title {\n    border-top: 3px #00a6b1 solid;\n    border-bottom: 3px #00a6b1 solid !important;\n    padding: 50px 0\n  }\n\n  .tys_des .col-sm-4 img {\n    width: 200px;\n  }\n\n  .lh-btn,.lh-btn:hover{\n    width:150px;\n    color:#FFFFFF;\n  }\n\n  .lh-btn{\n    font-weight:bold;\n  }\n\n  .btn-info:active {\n    color: #fff;\n    background-color: #31b0d5;\n    border-color: #31b0d5 !important;\n  }\n\n  .btn-green,.btn-green:focus{\n    background-color:#b5cc00;\n    border-color:#b5cc00;\n    color:#ffffff;\n  }\n\n  .btn-green:hover{\n    background-color:#9eb300;\n    border-color:#9eb300;\n  }\n\n\n  .btn-orange,.btn-orange:focus{\n    background-color:#f39603;\n    border-color:#f39603;\n    color:#ffffff;\n  }\n\n  .btn-orange:hover{\n    background-color:#d98702;\n    border-color:#d98702;\n  }\n\n  .btn-yellow,.btn-yellow:focus{\n    background-color:#fcc300;\n    border-color:#fcc300;\n    color:#ffffff;\n  }\n\n  .btn-yellow:hover{\n    background-color:#e3ae00;\n    border-color:#e3ae00;\n  }\n\n  .lan li{\n    margin-bottom: 10px;\n\n  }\n\n  @media (max-width: 1199px){\n    .lan{\n      width:330px;\n    }\n  }\n\n\n  @media (max-width: 767px){\n    h2{\n      line-height:1.1;\n    }\n  }\n\n  @media (max-width: 510px){\n    .activation{\n      width:100% !important;\n    }\n  }\n\n  @media (max-width:480px){\n    .tys_title {\n      padding: 30px 0;\n    }\n  }\n\n  @media (max-width:380px){\n    .lh-btn,.lh-btn:hover{\n      width:125px;\n      color:#FFFFFF;\n    }\n  }</style><kp-notify></kp-notify><ng-include src="\'/views/common/top.tpl.bs.html\'" id="top"></ng-include><div class="container"><div class="row row_tys"><div class="col-sm-12"><div class="panel tys_title"><div class="text-center"><img src="/static/images/static/languagehacking_01.png" class="logo_tys"></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/static/lh_videologo.png"></div><div class="col-sm-8"><h2 class="no-margin-t">{{\'LH211\'|t}}</h2><p ng-bind-html="\'LH212\'|t"></p><ul class="list-inline lan"><li><button class="btn btn-info lh-btn text-up" italki-click-with-spinner="goto(\'french\')" stext="LH107"></button></li><li><button class="btn btn-green lh-btn text-up" italki-click-with-spinner="goto(\'italian\')" stext="LH108"></button></li><li><button class="btn btn-orange lh-btn text-up" italki-click-with-spinner="goto(\'german\')" stext="LH109"></button></li><li><button class="btn btn-yellow lh-btn text-up" italki-click-with-spinner="goto(\'spanish\')" stext="LH110"></button></li></ul></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/static/languagehacking02.png"></div><div class="col-sm-8"><h2 class="no-margin-t">{{\'LH213\'|t}}</h2><p ng-bind-html="\'LH214\'|t"></p></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/static/languagehacking04.png"></div><div class="col-sm-8"><h2 class="no-margin-t">{{\'LH215\'|t}}</h2><p ng-bind-html="\'LH216\'|t"></p><a href="http://languagehacking.com" target="_blank">{{\'LH217\'|t}}</a></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="grid-gutter-margin-b3 text-center"><h2 class="no-margin-t">{{\'LH218\'|t}}</h2><div class="row"><div class="col-xs-12"><p ng-bind-html="\'LH219\'|t"></p><div class="row grid-gutter-margin-b3"><div class="col-sm-3 text-center"><p><a href="http://a-fwd.com/asin=1473633095" target="_blank"><img src="/static/images/static/lh_french.jpg"></a></p></div><div class="col-sm-3 text-center"><p><a href="http://a-fwd.com/asin=1473633125" target="_blank"><img src="/static/images/static/lh_italian.jpg"></a></p></div><div class="col-sm-3 text-center"><p><a href="http://a-fwd.com/asin=147363315X" target="_blank"><img src="/static/images/static/lh_german.jpg"></a></p></div><div class="col-sm-3 text-center"><p><a href="http://a-fwd.com/asin=1473633214" target="_blank"><img src="/static/images/static/lh_spanish.jpg"></a></p></div></div><h2 class="no-margin-t">{{\'LH202\'|t}}</h2><div class="col-xs-12"><p class="r" ng-bind-html="\'LH220\'|t"></p><form name="book_code" novalidate><input type="text" placeholder="{{\'LH203\'|t}}" class="form-control activation" style="display:inline-block;width:250px;margin-right:10px;margin-bottom:10px" required ng-model="code" name="code"> <span class="help-block" ng-hide="!error">{{(error.code)|t }}</span> <button type="submit" class="btn lh-btn btn-primary activation" style="margin-bottom:3px;padding:8px 12px" ng-disabled="!code" italki-click-with-spinner="book_code.$valid&&confirm()"></button></form></div></div></div></div></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/community/languagehacking/languagehacking.entity.html",'<ul class="breadcrumb"><li><a ui-sref="languagehackinglist">{{\'LH100\'|t}}</a></li><li><a ui-sref="languagehackinglistLanguage({language:lhEntity.language})">{{lhEntity.language|t}}</a></li><li><a ui-sref="languagehackingmission({language:lhEntity.language,sort:lhEntity.sort})">{{\'LH400\'|t}} {{lhEntity.sort}}</a></li><li class="active">{{(languagehacking.id>0?\'C1003\':\'C0045\')|t}}</li></ul><header><h2 ng-bind="lhEntity.mission_title"></h2></header><div class="and-detail row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="lhEntity.user_id"><a ui-sref="user({id:lhEntity.user_id})"><img ng-src="{{lhEntity.avatar_file_name|avatar:100 }}" class="rounded" kp-fallback-avatar width="100"></a> <a class="icon_lh" ng-show="lhEntity.is_active"><img src="/static/images/lh_icon.png" style="height: 24px;width: 24px"></a></div><div class="col-md-10"><span ng-if="lhEntity.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span><div ng-show="!editLhEntityContact"><div class="row"><div class="col-md-10"><h3 class="no-margin-t" style="word-wrap: break-word" ng-bind="lhEntity.title"></h3><p class="lead" style="word-wrap: break-word" ng-bind-html="lhEntity.desc"></p><div class="videowrapper"><iframe frameborder="0" ng-src="{{lhEntity.video_url}}" height="400" width="100%"></iframe></div></div></div><div class="padding-xs-vr"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray"><li><a ui-sref="user({id:lhEntity.user_id})">{{lhEntity.nickname}}</a></li><li><span ng-bind="lhEntity.language|t"></span></li><li><span>mission {{lhEntity.sort}}</span></li><li><span>{{\'LH401\'|t}} <span>{{lhEntity.create_time|prettyDate}}</span></span></li><li>{{\'C2025\'|t|format:lhEntity.comment_count}}</li><li style="float:right;padding-right: 0px"><span class="label" ng-bind="lhEntity.mark_sum"></span>&nbsp;&nbsp; <span ng-hide="currentUser && currentUser.id==lhEntity.user_id"><a title="{{lhEntity.hasVoteUp?\'PB025\':\'C1021\'|t}}" ng-disabled="lhEntity.hasVoteUp" href="javascript:void(0);"><i ng-class="{\'fa-thumbs-o-up\':!lhEntity.hasVoteUp,\'fa-thumbs-up\':lhEntity.hasVoteUp}" class="fa" italki-click-with-spinner="languageHackVote(1)" noe="1"></i></a></span></li></ul></div><div class="col-md-2 text-right"><kp-report-concern report-item="{reportType:\'LHM-HUM\',reportId:lhEntity.user_mission_id}"></kp-report-concern></div></div></div></div><div ng-show="editLhEntityContact" class="form-group"><div class="col-md-12"><form name="hackForm" novalidate><div class="form-group" ng-class="{\'has-error\':(newLHEntity.title.length==0 && vSubFlag) || (newLHEntity.title.length>0 && newLHEntity.title.length<10) || newLHEntity.title.length>110}"><label class="control-label" translate="C0106"></label><input type="text" name="title" class="form-control" ng-model="newLHEntity.title" required> <span class="help-block" ng-if="(saveEdit&&newLHEntity.title.length==0)||(newLHEntity.title.length>0 && newLHEntity.title.length<10) || newLHEntity.title.length>110">{{\'ST155\'|t|format:10:110}}</span><p class="">{{\'AS005\'|t}} {{110-newLHEntity.title.length}}</p></div><div class="form-group"><label class="control-label" translate="LH208"></label><input name="videoUrl" ng-model="newLHEntity.video_url" type="text" class="form-control" placeholder="{{\'KP274\'|t}}" ng-pattern="/(youtube.com/(v/|embed/|(watch(\\?|\\?.+&)v=)))|youtu.be/i" required> <span class="help-block" ng-if="(editLhEntityContact&&(hackForm.videoUrl.$invalid || hackForm.videoUrl.$error.required))||errorBlock">{{\'LH209\'|t}}</span><p>{{\'LH221\'|t}}</p><ul class="no-grid-gutter-h"><li ng-bind-html="\'LH222\'|t"></li><li ng-bind-html="\'LH223\'|t"></li></ul></div><div class="form-group" ng-class="{\'has-error\':charCount(newLHEntity.desc)>5000}"><label class="control-label" translate="AS121"></label><div><summernote config="options" code="text" height="200px" ng-model="newLHEntity.desc" on-paste="paste(evt)"></summernote></div><span style="top: -22px" class="help-block" ng-show="charCount(newLHEntity.desc)>5000">{{\'ST155\'|t|format:0:5000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}} {{5000-charCount(newLHEntity.desc)}}</p></div></form><p><button class="btn btn-primary" italki-click-with-spinner="hackForm.videoUrl.$valid && updateLhEntity(lhEntity.user_mission_id)" stext="NB165" ng-disabled="!updateable"></button> <button class="btn" ng-click="cancelEditLhEntity()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></div></div><div ng-show="!editLhEntityContact"><button class="btn" ng-if="currentUser&&currentUser.id==lhEntity.user_id" ng-click="editLhEntity()"><span class="btn-txt">{{\'NB160\'|t}}</span></button> <button type="button" ng-click="toAddComment();vSubFlag=false;" class="btn btn-primary"><span class="btn-txt">{{\'GP101\'|t}}</span></button></div></div></div></div></div><div class="panel loading-layout"><kp-loading indicator="lhEntityComment"></kp-loading><div class="panel-body no-padding-b"><h3 class="no-margin">{{\'C0111\'|t}}</h3></div><div class="article-item" ng-repeat="comment in lhEntityComment"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj.avatar_file_name|avatar:100 }}" class="comment-avatar" kp-fallback-avatar width="100"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj.avatar_file_name|avatar:100 }}"> <a class="icon_lh" ng-show="comment.is_active"><img src="/static/images/lh_icon.png" style="height: 24px;width: 24px"></a></div><div class="col-md-10"><span ng-bind-html="comment.content"></span><div class="padding-xs-vr no-padding-b"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray no-margin-b"><li><a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i> {{comment.commenter_obj.nickname}}</a></li><li ng-bind="comment.create_time|prettyDate"></li></ul></div><div class="col-md-2 text-right"><kp-report-concern report-item="{reportType:\'LHM-HMC\',reportId:comment.comment_id}"></kp-report-concern></div></div></div></div></div></div></div><div ng-if="lhEntity.comment_count==0"><div class="noresult-text text-lg text-center text-muted"><img class="rounded" src="/static/images/icon_norecord.png"><br><span>{{\'WK005\'|t}}</span></div></div></div><aside class="grid-gutter-margin-b" ng-show="(meta && meta.has_next) ||loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMoreComment()"></button></aside><div ng-show="isComment" class="panel"><div class="panel-body"><a id="formComment"></a><h3 class="no-margin-t">{{\'ML012\'|t}}</h3><form><div class="form-group" ng-class="{\'has-error\':(newComment.content.length==0 && vSubFlag) || (newComment.content.length>0 && newComment.content.length<2) || charCount(newComment.content)>2000}"><summernote config="options" code="text" height="300px" ng-model="newComment.content"></summernote><span style="top: -22px" class="help-block" ng-show="(newComment.content.length==0 && vSubFlag) || (meta.newComment.content.length>0 && newComment.content.length<2) || charCount(newComment.content)>2000">{{\'ST155\'|t|format:2:2000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}}: <span ng-bind="2000-charCount(newComment.content)"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addComment,\'vSubFlag\');" class="btn btn-primary" ng-disabled="processing || newComment.content.length<2 || newComment.content.length>2000 || newComment.content.length==0"></button> <button class="btn" type="button" ng-click="isComment=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body" style="padding: 0px"><div class="text-center" ng-repeat="item in buyBook | filter:lhEntity.language"><a href="{{item.buy_url}}" target="_blank"><img src="/static/images/static/get_books.jpg" style="width: 100%"></a></div></div></div><div class="panel no-border" ng-if="relatedUsers.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="relatedUsers.length>4"><a ng-click="viewAllMissionUsers(lhEntity.mission_id);">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'LH207\'|t}}</h5><div class="row"><div class="col-xs-3 dashboard-card" ng-repeat="user in relatedUsers |limitTo:4"><a ui-sref="user({id:user.id})"><img ng-src="{{user.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{user.nickname}}"></a></div></div></div></div></div></div>'),a.put("/views/community/languagehacking/languagehacking.list.html",'<style>.comment-margin{\n    position:absolute;\n    bottom:-5px;\n    margin-bottom:0px;\n\n\n  }\n  .comment-margin p{\n    margin-bottom: 0px;\n  }\n  .button-margin{\n    position:absolute;\n    bottom:0px;\n    right:0px;\n    margin-bottom:0px;\n  }\n  .media-heading{\n    margin-right:0px;\n  }\n\n  .video-info{\n    height:150px;\n  }\n\n  @media (max-width: 1199px){\n    .btn-lg{\n      font-size: 12px;\n      text-shadow: none;\n      line-height: 15px;\n      font-weight: 400;\n      padding: 7px 12px;\n      outline: 0 !important;\n    }\n\n  }\n  @media (max-width: 767px) and (min-width: 480px){\n    .col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {\n      margin-bottom: 0px;\n    }\n    .btn{\n      padding: 5px 10px;\n      font-size: 12px;\n      line-height: 1.5;\n      border-radius: 0px;\n    }\n  }\n\n  @media (max-width:480px){\n    .comment-margin{\n      position:static;\n      margin-bottom:5px;\n    }\n    .button-margin{\n      position:static;\n      display:inherit;\n    }\n    .btn {\n      width: 100%;\n      margin-bottom: 3px;\n    }\n    .col-ms-12{\n      width:100%;\n    }\n\n    .video-info{\n      height:auto;\n      margin-bottom: 0px;\n    }\n  }</style><header><h2>{{\'LH100\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/languagehacking.tab.html\'"></ng-include><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'C0007\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" ng-change="applyFilter()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t) for m in lans"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08);width: 50%" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 100%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match><span ng-bind-html="$select.selected.v|t"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="items"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="lh in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body" ui-sref="languagehackingmission({language:lh.language,sort:lh.sort})"><div class="row"><div class="col-lg-3 col-sm-4 col-xs-5 col-ms-12 is-relative" onclick="event.stopPropagation()||(event.cancelBubble = true)"><iframe width="100%" frameborder="0" ng-src="{{lh.intro_video_url}}" class=""></iframe></div><div class="col-lg-9 col-sm-8 col-xs-7 col-ms-12 video-info"><div class="row"><div class="col-xs-6"><p class="media-heading text-light-gray" ng-bind="lh.language|t"></p></div><div class="col-xs-6 text-right"><label class="label label-default" style="border-radius: 2.25em" ng-show="!lh.user_mission_obj">{{\'LH000\'|t}}</label><label class="label label-success" style="border-radius: 2.25em" ng-show="lh.user_mission_obj">{{\'TS665\'|t}}</label></div></div><div class="row"><div class="col-xs-12"><strong class="text-bg"><a ui-sref="languagehackingmission({language:lh.language,sort:lh.sort})" ng-bind="lh.title"></a></strong><p ng-bind="lh.short_desc"></p></div></div><div class="row"><div class="col-xs-6 col-ms-12 comment-margin"><p onclick="event.stopPropagation()||(event.cancelBubble = true)"><span class="text-light-gray" title="" ng-bind="lh.user_mission_count"></span> <span class="text-light-gray">{{\'LH402\'|t}}</span></p></div><div class="col-xs-6 col-ms-12 text-right button-margin"><a class="btn btn-primary mission-button-view" ng-show="!lh.user_mission_obj" ui-sref="languagehackingnew({language:lh.language,sort:lh.sort})" onclick="event.stopPropagation()||(event.cancelBubble = true)">{{\'LH105\'|t|uppercase}}</a> <a class="btn mission-button-view" ng-show="lh.user_mission_obj" onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="languagehackingentity({language:lh.language,sort:lh.sort,id:lh.user_mission_obj.user_mission_id})">{{\'LH104\'|t|uppercase}}</a></div></div></div></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="text-center"><button href="/languagehacking" ng-click="removeCookie()" class="btn btn-lg btn-primary btn-block"><span class="btn-txt" ng-bind-html="\'LH106\'|t"></span></button></div></div></div><div class="panel no-border panel-dark"><div class="panel-body" style="padding: 0px"><div class="text-center" ng-repeat="item in buyBook | filter:filter.language"><a href="{{item.buy_url}}" target="_blank"><img src="/static/images/static/get_books.jpg" style="width: 100%"></a></div></div></div><div class="panel no-border" ng-if="relatedUsers.length>0"><div class="panel-body"><span class="pull-right hidden-phone"><a ng-if="relatedUsers.length>4" ng-click="viewAllMissionUsers(filter.language);">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'LH200\'|t|format:(filter.language|t)}}</h5><div class="row"><div class="col-xs-3 dashboard-card" ng-repeat="user in relatedUsers | limitTo:4"><a ui-sref="user({id:user.id})"><img ng-src="{{user.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{user.nickname}}"></a></div></div></div></div><div class="panel no-border panel-dark"><div class="modal-header" style="background: #fff"><h5 class="no-margin-t text-bold">{{\'LH201\'|t}}: Benny Lewis</h5></div><div class="panel-body" style="padding: 0"><img src="/static/images/static/benny-lewis.jpg" style="width: 100%"></div></div><form novalidate name="book_code"><div class="panel no-border"><div class="panel-body"><h5 class="no-margin-t text-bold">{{\'LH202\'|t}}</h5><input type="text" placeholder="{{\'LH203\'|t}}" class="form-control" required ng-model="code" name="code"> <span class="help-block" ng-hide="!error">{{(error.code)|translate }}</span> <button type="submit" class="btn btn-primary btn-block" style="margin-top: 10px" ng-disabled="!code" italki-click-with-spinner="book_code.$valid&&confirm()"></button></div></div></form></div></div>'),
a.put("/views/community/languagehacking/languagehacking.mine.html",'<style>.btn-yellow:focus, .btn-yellow:hover {\n    color: #fff;\n    background-color: #f6d701;\n    border-color: #f6d701;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n\n  .btn-yellow {\n    color: #fff;\n    background-color: #fede00;\n    border-color: #fede00;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n\n  @media (min-width: 472px) and (max-width: 670px) {\n    .comment-margin {\n      margin-top: 30px;\n    }\n  }\n\n  @media (max-width: 471px) {\n    .comment-margin {\n      margin-top: 0px;\n    }\n  }\n\n  @media (min-width: 671px) {\n    .comment-margin {\n      margin-top: 50px;\n    }\n  }\n\n  @media (max-width: 600px) {\n    .mission-button-phoneview {\n      display: inherit;\n    }\n\n    .mission-button-view {\n      display: none;\n    }\n  }\n\n  @media (min-width: 599px) {\n    .mission-button-view {\n      display: inherit;\n    }\n\n    .mission-button-phoneview {\n      display: none;\n    }\n  }</style><header><h2>{{\'LH100\'|t}}</h2></header><div class="row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/languagehacking.tab.html\'"></ng-include></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="comments"></kp-loading></div><kp-no-found items="comments"></kp-no-found><div ng-repeat="comment in comments" ng-class="{\'animation-list-item\':$index}" class="article-item yes-cursor cursor-over" ui-sref="languagehackingentity({language:comment.language,sort:comment.sort,id:comment.user_mission_id})"><div class="panel-body"><div class="item-icon" kp-user-card user-id="comment.creator.id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:comment.creator.id})"><img ng-src="{{comment.creator.avatar_file_name|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a></div><div class="item-info"><strong class="text-bg" ng-class="{\'text-premium\':comment.creator.is_premium&& !comment.creator.is_pro && !comment.creator.is_tutor}"><a class="search-title" ng-bind="comment.title"></a></strong><p class="truncate" ng-bind="comment.desc"></p><ul class="list-inline no-margin-b text-light-gray"><li><span class="label" ng-bind="comment.mark_sum"></span></li><li><a ng-bind="comment.language"></a></li><li><span>{{\'LH401\'|t}} <span am-time-ago="comment.update_time"></span></span></li><li><span ng-bind="\'C2025\'|t|format:comment.comment_count"></span></li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body" style="padding: 0px"><div class="text-center"><a href="https://www.amazon.cn/dp/1473633095" target="_blank"><img src="/static/images/static/get_books.jpg" style="width: 100%"></a></div></div></div></div></div>'),a.put("/views/community/languagehacking/languagehacking.mission.html",'<style>.btn-yellow:focus, .btn-yellow:hover {\n    color: #fff;\n    background-color: #f6d701;\n    border-color: #f6d701;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n\n  .btn-yellow {\n    color: #fff;\n    background-color: #fede00;\n    border-color: #fede00;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n\n  @media (max-width: 480px) {\n    .submissions {\n      width: 100%;\n      margin-bottom: 0px;\n      margin-top: 0px;\n    }\n\n    .btn-start {\n      width: 100%;\n      margin-bottom: 0px;\n      margin-top: 0px;\n    }\n  }</style><header><h2>{{\'LH100\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/languagehacking.tab.html\'"></ng-include><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'C0007\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" ng-change="languageOnChange()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t) for m in lans"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'LH400\'|t}}&nbsp;<span>{{ selectedMission.sort }}: {{ selectedMission.title }}</span></a><select ng-model="selectedMission" ng-change="missionOnChange()" class="form-control" ng-options="\'{{\'LH400\'|t}} \' + m.sort+ \': \' +m.title for m in missionOptions"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="changeLanguage($item, $model)"><ui-select-match placeholder=""><span ng-bind-html="$select.selected.v|t"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="$parent.selectedMission" theme="bootstrap" on-select="changeMission($item, $model)"><ui-select-match placeholder="{{\'LH400\'|t}}">{{\'LH400\'|t}}&nbsp;<span ng-bind-html="$select.selected.sort"></span>:&nbsp;<span ng-bind-html="$select.selected.title"></span></ui-select-match><ui-select-choices repeat="mission in missionOptions | propsFilter: {title: $select.search}"><div><span>{{\'LH400\'|t}} {{ mission.sort }}:</span> <span ng-bind-html="mission.title|highlight: $select.search"></span></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div class="panel-body" style="background-color: #eee5e5" ng-if="mission_obj"><div class="row"><div class="col-xs-6"><p class="text-light-gray media-heading" ng-bind="mission_obj.language|t"></p></div><div class="col-xs-6 text-right"><label class="label label-default" ng-show="!has_completed" style="border-radius: 2.25em">{{\'LH000\'|t}}</label><label class="label label-success" ng-show="has_completed" style="border-radius: 2.25em">{{\'PM455\'|t}}</label></div></div><p><a class="text-lg ng-binding" target="_blank">{{\'LH400\'|t}}&nbsp;<span ng-bind="mission_obj.sort|t"></span>: <span ng-bind="mission_obj.title|t"></span></a></p><div class="row"><div class="col-sm-6"><div class="videowrapper"><iframe height="300" width="100%" frameborder="0" ng-src="{{mission_obj.intro_video_url}}" class=""></iframe></div></div><div class="col-sm-6"><span ng-bind-html="mission_obj.long_desc"></span></div></div><div class="row"><div class="col-xs-7 text-left submissions" style="margin-top: 20px"><ul class="list-inline" onclick="event.stopPropagation()||(event.cancelBubble = true)"><li><span class="text-light-gray" title=""><span ng-bind="mission_obj.user_mission_count"></span>&nbsp;{{\'LH402\'|t}}</span></li></ul></div><div class="col-xs-5 text-right btn-start" style="margin-top: 5px"><a class="btn btn-primary" ng-show="!has_completed" ui-sref="languagehackingnew({language:mission_obj.language,sort:mission_obj.sort})">{{\'LH105\'|t|uppercase}}</a></div></div></div><div ng-if="filter.page==1"><kp-loading indicator="items"></kp-loading></div><div ng-repeat="lh in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}" ui-sref="languagehackingentity({language:mission_obj.language,sort:mission_obj.sort,id:lh.user_mission_id})"><div class="panel-body"><div class="item-icon text-center" kp-user-card user-id="lh.user_id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:lh.user_id})"><img ng-src="{{lh|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a> <a class="icon_lh" ng-show="lh.is_active"><img src="/static/images/lh_icon.png" style="height: 20px;width: 20px"></a></div><div class="item-info"><strong class="text-bg"><a class="search-title" ng-bind="lh.title"></a></strong><p class="truncate" ng-bind-html="lh.desc"></p><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:lh.user_id})">{{lh.nickname}}</a></li><li><a><span ng-bind="mission_obj.language|t"></span></a></li><li><span>{{\'LH401\'|t}} <span>{{lh.create_time| limitTo : 10}}</span></span></li><li><span ng-bind="\'C2025\'|t|format:lh.comment_count"></span></li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body" style="padding: 0px"><div class="text-center" ng-repeat="item in buyBook | filter:filter.language"><a href="{{item.buy_url}}" target="_blank"><img src="/static/images/static/get_books.jpg" style="width: 100%"></a></div></div></div><div class="panel no-border" ng-if="relatedUsers&&relatedUsers.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="relatedUsersMeta.has_next"><a ng-click="viewAllMissionUsers();">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'LH204\'|t|format:selectedMission.sort}}</h5><div class="row"><div class="col-xs-3 dashboard-card" ng-repeat="user in relatedUsers track by user.id"><a ui-sref="user({id:user.id})"><img ng-src="{{user.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{user.nickname}}"></a></div></div></div></div></div></div>'),a.put("/views/community/languagehacking/languagehacking.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'C0158\'|t}}</h4></div><div class="modal-body modal-list"><div class="panel-body loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="row"><div class="col-xs-2 grid-gutter-margin-b" ng-repeat="item in data.items"><a class="deactive" ui-sref="user({id:item.id})" title="{{item.nickname}}" ng-click="$close()"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" width="100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="modal-footer" ng-show="data.meta && data.meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></div>'),a.put("/views/community/languagehacking/languagehacking.new.html",'<ul class="breadcrumb"><li><a ui-sref="languagehackinglist">{{\'LH100\'|t}}</a></li><li><a ui-sref="languagehackingmission({language:$stateParams.language,sort:$stateParams.sort})">{{$stateParams.language | t}} {{\'LH400\'|t}} {{$stateParams.sort}}</a></li><li class="active">{{(languagehacking.id>0?\'C1003\':\'C0045\')|t}}</li></ul><header><h2 ng-bind="mission_obj.title"></h2></header><div class="notebook row"><div class="col-md-9"><div class="panel"><form name="hackForm" novalidate><div class="panel-body"><div class="row grid-gutter-margin-b" ng-model="mission_obj"><div class="col-sm-6"><div class="videowrapper"><iframe frameborder="0" ng-src="{{mission_obj.intro_video_url}}" height="400" width="100%"></iframe></div></div><div class="col-sm-6"><p ng-bind-html="mission_obj.long_desc"></p></div></div><div><div class="form-group" ng-class="{\'has-error\':(languageHack.title.length==0 && vSubFlag) || (languageHack.title.length>0 && languageHack.title.length<10) || languageHack.title.length>110}"><label class="control-label" translate="C0106"></label><input type="text" name="title" class="form-control" ng-model="languageHack.title" required> <span class="help-block" ng-if="(vSubFlag&&languageHack.title.length==0)||(languageHack.title.length>0 && languageHack.title.length<10) || languageHack.title.length>110">{{\'ST155\'|t|format:10:110}}</span><p class="">{{\'AS005\'|t}} {{110-languageHack.title.length}}</p></div><div class="form-group"><label class="control-label" translate="LH208"></label><input name="videoUrl" ng-model="languageHack.url" type="text" class="form-control" placeholder="{{\'KP274\'|t}}" ng-pattern="/(youtube.com/(v/|embed/|(watch(\\?|\\?.+&)v=)))|youtu.be/i" required> <span class="help-block" ng-if="vSubFlag&&(hackForm.videoUrl.$invalid || hackForm.videoUrl.$error.required)">{{\'LH209\'|t}}</span><p>{{\'LH221\'|t}}</p><ul class="no-grid-gutter-h"><li ng-bind-html="\'LH222\'|t"></li><li ng-bind-html="\'LH223\'|t"></li></ul></div><div class="form-group" ng-class="{\'has-error\':charCount(languageHack.content)>5000}"><label class="control-label">{{\'ML012\'|t}}</label><div><summernote config="options" code="text" height="150px" ng-model="languageHack.content" on-paste="paste(evt)"></summernote></div><span style="top: -22px" class="help-block" ng-show="charCount(languageHack.content)>5000">{{\'ST155\'|t|format:0:5000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}} {{5000-charCount(languageHack.content)}}</p></div></div><p><button type="button" italki-click-with-spinner="addLanguageHack(mission_obj.mission_id);" class="btn btn-primary"></button></p></div></form></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body" style="padding: 0px"><div class="text-center" ng-repeat="item in buyBook | filter:$stateParams.language"><a href="{{item.buy_url}}" target="_blank"><img src="/static/images/static/get_books.jpg" style="width: 100%"></a></div></div></div><div class="panel no-border" ng-if="relatedUsers.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="relatedUsers.length>4"><a ng-click="viewAllMissionUsers(mission_obj.mission_id);">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'LH207\'|t}}</h5><div class="row"><div class="col-xs-3 dashboard-card" ng-repeat="user in relatedUsers |limitTo:4"><a ui-sref="user({id:user.id})"><img ng-src="{{user.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{user.nickname}}"></a></div></div></div></div></div></div>'),a.put("/views/community/languagehacking/modal/mission.users.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">Users</h4></div><div class="modal-body modal-list"><div class="panel-body loading-layout"><kp-loading indicator="items"></kp-loading><div class="row"><div class="col-xs-2 grid-gutter-margin-b" ng-repeat="item in items"><a class="deactive" ui-sref="user({id:item.id})" title="{{item.nickname}}" ng-click="$close()"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" width="100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="modal-footer" ng-show="meta && meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></div>'),a.put("/views/community/notebook/dynamic.load.ctrl.html",'<div style="text-align: center"><div dynamic-load-ctrl view-ctrl="{{ctrl}}" view-url="{{viewUrl}}" user-id="{{user_id}}"><div ng-include="viewUrl"></div></div></div>'),a.put("/views/community/notebook/notebook.bs.html","<div ui-view></div>"),a.put("/views/community/notebook/notebook.entity.html",'<kp-title ng-if="notebook" title="NB510" params="[notebook.title,notebook.language]"></kp-title><ul class="breadcrumb"><li><a ui-sref="landing">{{\'M0001\'|t}}</a></li><li><a ui-sref="notebook.list">{{\'M0078\'|t}}</a></li><li class="active"><a ui-sref="notebook.language({language:notebook.language})" ng-bind="notebook.language|t"></a></li></ul><header><h2 ng-bind="notebook.title"></h2></header><div class="and-detail row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="notebook.author_obj.id"><a ng-if="notebook.author_obj.allow_profile" ui-sref="user({id:notebook.author_obj.id})"><img ng-src="{{notebook.author_obj|avatar:100 }}" class="rounded" kp-fallback-avatar width="100"></a> <img ng-if="!notebook.author_obj.allow_profile" class="rounded" ng-src="{{ notebook.author_obj|avatar:50 }}"> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="notebook.author_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!notebook.author_obj.is_pro && notebook.author_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && notebook.author_obj.exam_result_shown_obj != null && notebook.author_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><span ng-if="notebook.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span><div ng-show="!meta.newContent"><p class="lead" style="word-wrap:break-word"><span ng-bind-html="html(notebook.content)"></span><br><img ng-if="notebook.image_url" style="max-width: 100%" ng-src="{{notebook.image_url|nbimage}}"></p><div class="padding-xs-vr"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray"><li><span class="label" ng-bind="notebook.mark_sum"></span></li><li ng-hide="(currentUser && notebook.author_obj.id==currentUser.id)"><a title="{{notebook.hasVoteUp?\'PB025\':\'C1021\'|t}}" ng-disabled="notebook.hasVoteUp" href="javascript:void(0);"><span ng-class="{\'fa-thumbs-o-up\':!notebook.hasVoteUp,\'fa-thumbs-up\':notebook.hasVoteUp}" noe="1" italki-click-with-spinner="notebookVote(1)" class="fa"></span></a>&nbsp;&nbsp; <a title="{{notebook.hasVoteDown?\'PB025\':\'C1022\'|t}}" ng-disabled="notebook.hasVoteDown" href="javascript:void(0);"><span ng-class="{\'fa-thumbs-o-down\':!notebook.hasVoteDown,\'fa-thumbs-down\':notebook.hasVoteDown}" noe="1" italki-click-with-spinner="notebookVote(-1)" class="fa"></span></a></li><li><a ng-if="notebook.author_obj.allow_profile" ui-sref="user({id:notebook.author_obj.id})"><i ng-if="notebook.author_obj.is_premium&& !notebook.author_obj.is_pro && !notebook.author_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{notebook.author_obj.nickname}}</a></li><li><span ng-bind="notebook.create_time|prettyDate"></span></li><li>{{\'NB020\'|t|format:notebook.correction_count}}</li><li>{{\'AS148\'|t|format:notebook.view_count}}</li></ul></div><div class="col-md-2 text-right" kp-report-concern report-item="{reportType:\'NBK-ETY\',reportId:notebook.id}"></div></div></div></div><div ng-show="meta.newContent" class="form-group" ng-class="{\'has-error\':(notebook.content.length==0 && vSubFlag) || (notebook.content.length>0 && notebook.content.length<25) || notebook.content.length>2500}"><div><textarea rows="8" cols="80" name="content" ng-model="notebook.content" class="form-control"></textarea></div><span class="help-block" ng-show="(notebook.content.length==0 && vSubFlag) || (notebook.content.length>0 && notebook.content.length<25) || notebook.content.length>2500">{{\'ST155\'|t|format:25:2500}}</span><p class="">{{\'AS005\'|t}}: {{2500-notebook.content.length}}</p><button class="btn btn-primary" italki-click-with-spinner="updateNotebook()" stext="NB165" ng-disabled="$$oldContent==notebook.content || notebook.content.length<25 || notebook.content.length>2500"></button> <button class="btn" ng-click="cancelEditNotebook()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></div><p ng-if="!meta.newContent"><button class="btn btn-primary" ng-if="!notebook.is_mine" ng-click="funAddCorrect()"><span class="btn-txt">{{\'NB107\'|t}}</span></button> <button class="btn" ng-if="notebook.editable" ng-click="editNotebook()"><span class="btn-txt">{{\'NB160\'|t}}</span></button> <button class="btn" ng-click="meta.hideComment=false;meta.isComment=true;focusInput=true;"><span class="btn-txt">{{\'GP101\'|t}}</span></button></p><p><a href="javascript:void(0);" ng-click="meta.hideComment=!meta.hideComment;">{{\'C2025\'|t|format:notebook.comment_count}}</a></p><div ng-hide="meta.hideComment" class="widget-comments tab-pane no-padding"><div class="no-padding-vr"><div ng-show="meta.comments.has_next"><p class="re_more"><a href="javascript:void(0);" ng-click="loadMoreComment()" ng-bind="\'MH112\'|t"></a><kp-loading indicator="loadedFlag()"></kp-loading></p></div><div class="comment" ng-repeat="comment in notebook.comment_obj_s"><div class="is-relative comment-card" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj|avatar:50 }}" class="comment-avatar" kp-fallback-avatar width="50"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj|avatar:50 }}"></div><div class="comment-body"><div class="comment-by"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray" style="margin-bottom: 0px"><li><span ng-bind-html="comment.device|device"></span> <a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre"></i> {{comment.commenter_obj.nickname}}</a></li><li>{{comment.create_time|prettyDate}}</li><li class="editLi" ng-if="comment.editable"><a href="" class="edit" ng-click="editComment(comment)">{{\'NB160\'|t}}</a></li></ul></div><div class="col-md-2 text-right"><a href="" ng-if="comment.editable" ng-click="editComment(comment)">{{\'NB160\'|t}}</a></div></div></div><div ng-if="comment.edited" style="padding: 4px  0px 0px 0px"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label></div><div class="comment-text" ng-bind="comment.content" ng-hide="comment.editComment"></div><div class="comment" ng-show="comment.editComment"><form name="formComment"><div class="form-group" ng-class="{\'has-error\':comment.content.length==0  || (comment.content.length>0 && comment.content.length<2) || comment.content.length>2000}"><textarea focus-me="focusInput" class="form-control" ng-model="comment.content" rows="5"></textarea><span class="help-block" ng-show="comment.content.length==0 || (comment.content.length>0 && comment.content.length<2) || comment.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-comment.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateNotebookComment(comment)" class="btn btn-primary" ng-disabled="comment.content.length<2 || comment.content.length>2000||comment.content==comment.$$tempContent" stext="NB165"></button> <button class="btn" type="button" ng-click="cancelEditComment()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div><div class="comment" ng-show="meta.isComment"><form name="formComment"><div class="form-group" ng-class="{\'has-error\':(meta.newComment.content.length==0 && vSubFlag) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || charCount(meta.newComment.content)>2000}"><textarea focus-me="focusInput" class="form-control" ng-model="meta.newComment.content" rows="5"></textarea><span class="help-block" ng-show="(meta.newComment.content.length==0 && vSubFlag) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || charCount(meta.newComment.content)>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-charCount(meta.newComment.content)"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addComment,vSubFlag);" class="btn btn-primary" ng-disabled="meta.newComment.content.length<2 || doCFlag || meta.newComment.content.lengthup>2000"></button> <button class="btn" type="button" ng-click="meta.isComment=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div></div></div></div></div><div class="panel loading-layout"><kp-loading indicator="loadedFlag()"></kp-loading><div class="panel-body no-padding-b"><h3 class="no-margin" ng-show="notebook.correction_obj_s.length>0">{{\'NB002\'|t}} <small><div class="pull-right" ng-show="notebook.correction_obj_s.length>2"><select ng-model="meta.sort_by" ng-change="correctionSortBy()" class="form-control visible-desktop"><option value="1">{{\'AS156\'|t}}</option><option value="2">{{\'AS158\'|t}}</option></select></div></small></h3></div><div class="article-item" ng-repeat="correction in notebook.correction_obj_s" ng-if="notebook.correction_obj_s"><kp-community-notebook-correction correction="correction"></kp-community-notebook-correction></div><div ng-if="!notebook.correction_obj_s&&loadedFlag()" class=""><div class="noresult-text text-lg text-center text-muted">{{\'NB306\'|t}}</div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.correction.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMoreCorrect()" stext="MH046"></button></aside><div ng-show="meta.isCorrection" class="panel"><a name="correctForm"></a><div class="panel-body"><h3 class="no-margin-t">{{\'NB008\'|t}}</h3><form name="formCorrect"><div class="form-group" ng-class="{\'has-error\':(meta.newCorrection.content.length==0 && vSubFlag1) || (meta.newCorrection.content.length>0 && meta.newCorrection.content.length<5) || charCount(meta.newCorrection.content)>5000}"><div><summernote config="options" code="text" height="300px" ng-model="meta.newCorrection.content" on-paste="paste(evt)"></summernote><span class="help-block" style="top: -22px" ng-show="(meta.newCorrection.content.length==0 && vSubFlag1) || (meta.newCorrection.content.length>0 && meta.newCorrection.content.length<5) || charCount(meta.newCorrection.content)>5000">{{\'ST155\'|t|format:5:5000}}</span><p style="margin-top: -22px">{{\'AS005\'|t}} {{5000-charCount(meta.newCorrection.content)}}</p></div></div><button type="button" italki-click-with-spinner="submitForm(addCorrect,vSubFlag1);" class="btn btn-primary" ng-disabled="processing||(meta.newCorrection.content.length<5 || charCount(meta.newCorrection.content)>5000)"></button> <button class="btn" type="button" ng-click="meta.isCorrection=false;vSubFlag1=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></form></div></div><kp-ad-system loc="NOT_DETAIL_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body text-broken"><h4 class="no-margin-t">{{ \'NB201\'|t|format:(notebook.language|t) }}</h4><div class="no-grid-gutter-h"><ul><li ng-repeat="correction in meta.other_notebooks"><a ui-sref="notebookAlias.entity({userId:currentUser.id,id:correction.id})" ng-bind="correction.title"></a> <span class="text-muted">({{correction.correction_count}})</span></li></ul></div></div></div><kp-ad-system loc="NOT_DETAIL_r"></kp-ad-system></div></div>'),a.put("/views/community/notebook/notebook.list.html",'<header><h2>{{\'M0078\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/notebook.tab.html\'"></ng-include><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'NB034\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" class="form-control" ng-change="applyFilter1()" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans_1"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'NB035\'|t}}<span ng-bind-html="filter.author_language?\':&nbsp;\'+(filter.author_language|t)+\'\':\'\'"></span></a><select ng-model="filter.author_language" class="form-control" ng-change="applyFilter()" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'NB034\'|t}}">{{\'NB034\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans_1 | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'NB035\'|t}}">{{\'NB035\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="notebook in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body" ui-sref="notebookAlias.entity({userId:notebook.author_obj.id, id:notebook.id})"><div class="item-icon" kp-user-card user-id="notebook.author_obj.id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="notebook.author_obj.allow_profile" ui-sref="user({id:notebook.author_obj.id})"><img ng-src="{{ notebook.author_obj|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a> <img ng-if="!notebook.author_obj.allow_profile" class="rounded" ng-src="{{ notebook.author_obj|avatar:50 }}"></div><div class="item-info"><strong class="text-bg" ng-class="{\'text-premium\':notebook.author_obj.is_premium&& !notebook.author_obj.is_pro && !notebook.author_obj.is_tutor}"><a ui-sref="notebookAlias.entity({userId:notebook.author_obj.id, id:notebook.id})" class="title" ng-bind="notebook.title"></a></strong><p ng-bind="notebook.content" class="truncate"></p><ul class="list-inline no-margin-b text-light-gray"><li><span class="label" ng-bind="notebook.mark_sum"></span></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="notebook.language({language:notebook.language})" ng-bind="notebook.language|t"></a></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:notebook.author_obj.id})"><i ng-if="notebook.author_obj.is_premium&& !notebook.author_obj.is_pro && !notebook.author_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{notebook.author_obj.nickname}}</a></li><li ng-hide="!notebook.image_url"><a ui-sref="notebook.image_url"><i class="fa fa-picture-o"></i></a></li><li>{{\'C2005\'|t}}&nbsp;<span ng-bind="notebook.update_time|prettyDate"></span></li><li>{{\'NB020\'|t|format:notebook.correction_count}}</li><li>{{\'NB022\'|t|format:notebook.comment_count}}</li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside><kp-ad-system loc="NOT_LIST_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'NB202\'|t}}</p></div><div class="text-center"><button ng-click="gotonewParams(\'notebookAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'MH127\'|t}}</span></button></div></div></div><kp-count-time-down-dashboard ng-show="languageTime.show"></kp-count-time-down-dashboard><kp-ad-system loc="NOT_LIST_R"></kp-ad-system></div></div>'),
a.put("/views/community/notebook/notebook.list1.html",'<div style="position: fixed;width: 100%;min-height:1000%;z-index: 99999999;background-color: red;overflow:scroll" ng-if="popFlag"><div style="color: #fff;text-align: right;font-size: 2em;cursor: pointer;width: 100%" ng-click="popFlag=false;">X</div><div dynamic-load-ctrl view-ctrl="{{ctrl}}" view-url="{{viewUrl}}" user-id="{{user_id}}"><div ng-include="viewUrl"></div></div></div><header><h2>{{\'M0078\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebook.list1">{{\'M0065\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebookAlias.mine({userId:currentUser.id})">{{\'NB105\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="notebookAlias.myCorrections({userId:currentUser.id})">{{\'NB104\'|t}}</a></li></ul><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'NB034\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" class="form-control" ng-change="applyFilter1()" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans_1"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'NB035\'|t}}<span ng-bind-html="filter.author_language?\':&nbsp;\'+(filter.author_language|t)+\'\':\'\'"></span></a><select ng-model="filter.author_language" class="form-control" ng-change="applyFilter()" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'NB034\'|t}}">{{\'NB034\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans_1 | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'NB035\'|t}}">{{\'NB035\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="notebook in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body" ui-sref="notebookAlias.entity({userId: notebook.author_obj.id, id:notebook.id})"><div class="item-icon" kp-user-card user-id="notebook.author_obj.id"><a ng-click="popup($event,notebook.author_obj.id)" ng-if="notebook.author_obj.allow_profile"><img ng-src="{{ notebook.author_obj|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a> <img ng-if="!notebook.author_obj.allow_profile" class="rounded" ng-src="{{ notebook.author_obj|avatar:50 }}"></div><div class="item-info"><strong class="text-bg"><a ui-sref="notebookAlias.entity({userId: notebook.author_obj.id, id:notebook.id})" class="title" ng-bind="notebook.title"></a></strong><p ng-bind="notebook.content" class="truncate"></p><ul class="list-inline no-margin-b text-light-gray"><li><span class="label" ng-bind="notebook.mark_sum"></span></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="notebook.language({language:notebook.language})" ng-bind="notebook.language|t"></a></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:notebook.author_obj.id})" ng-bind="notebook.author_obj.nickname"></a></li><li ng-hide="!notebook.image_url"><a ui-sref="notebook.image_url"><i class="fa fa-picture-o"></i></a></li><li>{{\'C2005\'|t}}&nbsp;<span ng-bind="notebook.create_time|prettyDate"></span></li><li>{{\'NB020\'|t|format:notebook.correction_count}}</li><li>{{\'NB022\'|t|format:notebook.comment_count}}</li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'NB202\'|t}}</p></div><div class="text-center"><button ng-click="gotonewParams(\'notebookAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'MH127\'|t}}</span></button></div></div></div></div></div>'),a.put("/views/community/notebook/notebook.mine.corrections.html",'<header><h2>{{\'M0078\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/notebook.tab.html\'"></ng-include><div class="panel-heading"><h4>{{\'NB023\'|t|format:meta.total}}</h4></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="notebook in items" class="animation-list-item article-item yes-cursor cursor-over"><div class="panel-body" ui-sref="notebookAlias.entity({userId: notebook.author_obj.id, id:notebook.id})"><div class="item-icon"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="notebookAlias.entity({userId: notebook.author_obj.id, id:notebook.id})"><img class="rounded" ng-src="{{ notebook.author_obj|avatar:50 }}" width="50" kp-fallback-avatar></a></div><div class="item-info"><strong class="text-bg"><a ui-sref="notebookAlias.entity({userId: notebook.author_obj.id, id:notebook.id})" class="title" ng-bind="notebook.title"></a></strong><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:notebook.author_obj.id})" ng-bind="notebook.author_obj.nickname"></a></li><li ng-hide="!notebook.image_url"><a ui-sref="notebook.image_url"><i class="fa fa-picture-o"></i></a></li><li>{{\'C2005\'|t}}&nbsp;<span ng-bind="notebook.create_time|prettyDate"></span></li><li>{{\'NB020\'|t|format:notebook.correction_count}}</li></ul></div></div></div></div><aside class="text-center" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'NB202\'|t}}</p></div><div class="text-center"><button ng-click="gotonewParams(\'notebookAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'MH127\'|t}}</span></button></div></div></div></div></div>'),a.put("/views/community/notebook/notebook.mine.html",'<header><h2>{{\'M0078\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/notebook.tab.html\'"></ng-include><div class="panel-heading"><h4>{{\'NB021\'|t|format:meta.total}}</h4></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="notebook in items" class="animation-list-item article-item yes-cursor cursor-over"><div class="panel-body" ui-sref="notebookAlias.entity({userId:notebook.author_obj.id, id:notebook.id})" style="position: relative"><div class="item-icon"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="notebookAlias.entity({userId:notebook.author_obj.id, id:notebook.id})"><img class="rounded" ng-src="{{ notebook.author_obj|avatar:50 }}" width="50" kp-fallback-avatar></a></div><div class="item-info" style="margin-right: 100px"><strong class="text-bg"><a ui-sref="notebookAlias.entity({userId:notebook.author_obj.id, id:notebook.id})" class="title" ng-bind="notebook.title"></a></strong><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:notebook.author_obj.id})" ng-bind="notebook.author_obj.nickname"></a></li><li ng-hide="!notebook.image_url"><a ui-sref="notebook.image_url"><i class="fa fa-picture-o"></i></a></li><li>{{\'C2005\'|t}}&nbsp;<span ng-bind="notebook.update_time|prettyDate"></span></li><li><span ng-bind="notebook.correction_count"></span> {{\'NB002\'|t}}</li></ul></div><div class="fa fa-trash-o" style="cursor: pointer;position: absolute;top: 50%;right: 0;margin: -13px 12px 0 0;width: 30px;height: 30px;line-height: 30px;text-align: center" ng-click="deleteNotebook(notebook,$index)" onclick="event.stopPropagation()||(event.cancelBubble = true)"></div></div></div></div><aside class="text-center" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'NB202\'|t}}</p></div><div class="text-center"><button ng-click="gotonewParams(\'notebookAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'MH127\'|t}}</span></button></div></div></div></div></div>'),a.put("/views/community/notebook/notebook.new.html",'<ul class="breadcrumb"><li><a ui-sref="dashboard">{{\'M0001\'|t}}</a></li><li><a ui-sref="notebook.list">{{\'M0078\'|t}}</a></li><li class="active">{{\'NB106\'|t}}</li></ul><header><h2 translate="NB106"></h2></header><div class="notebook row" ng-hide="notebook.id>0"><div class="col-md-9"><div class="panel" ng-app="fileUpload"><form name="subForm"><div class="panel-body"><div class="note note-info no-border"><p ng-bind-html="\'NB226\'|t"></p><span ng-bind-html="\'NB227\'|t"></span></div><div class="row"><div class="col-md-12"><div class="form-group" ng-class="{\'has-error\':(notebook.title.length==0 && vSubFlag) || (notebook.title.length>0 && notebook.title.length<5) || notebook.title.length>100}"><label class="control-label" translate="NB004"></label><input type="text" class="form-control" name="title" ng-model="notebook.title"> <span class="help-block" ng-show="(notebook.title.length==0 && vSubFlag) || (notebook.title.length>0 && notebook.title.length<5) || notebook.title.length>100">{{\'ST155\'|t|format:5:100}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="100-notebook.title.length"></span></p></div><div class="form-group" ng-class="{\'has-error\':(notebook.content.length==0 && vSubFlag) || (notebook.content.length>0 && notebook.content.length<25) || notebook.content.length>2500}"><label class="control-label" translate="NB005"></label><div><textarea rows="8" cols="80" name="content" ng-model="notebook.content" class="form-control"></textarea></div><span class="help-block" ng-show="(notebook.content.length==0 && vSubFlag) || (notebook.content.length>0 && notebook.content.length<25) || notebook.content.length>2500">{{\'ST155\'|t|format:25:2500}}</span><p class="">{{\'AS005\'|t}}: {{2500-notebook.charCount}}</p></div></div><div class="col-md-6"><div class="form-group" ng-class="{\'has-error\':(notebook.language.length==0 && vSubFlag)}"><label class="control-label" translate="NB209"></label><select name="language" class="form-control" ng-model="notebook.language"><option value="">{{\'C0061\'|t}}...</option><option ng-repeat="opt in currentUser.language_obj_s" value="{{opt.language}}">{{opt.language|t}}</option></select><span class="help-block" ng-show="(notebook.language.length==0 && vSubFlag)">{{\'AS035\'|t}}</span></div><div class="form-group"><label class="control-label" translate="NB204"></label><span class="">({{\'C0043\'|t}})</span><div><input type="file" class="button" ng-file-select="onFileSelect(files)" ng-model="files" accept="image/*"> <span class="help-block" ng-show="fileTooLargeError">{{\'ST311\'|t}}</span></div></div></div></div><div ng-if="errorMsg" ng-bind-html="errorMsg"></div><div class=""><button type="button" italki-click-with-spinner="addNotebook()" class="btn btn-primary"></button></div></div></form></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">{{\'NB113\'|t}}</h4><div class="grid-gutter-margin-b"><ul><li>{{\'KP213\'|t}}</li><li>{{\'KP214\'|t}}</li><li>{{\'KP215\'|t}}</li><li>{{\'KP216\'|t}}</li><li>{{\'KP217\'|t}}</li><li>{{\'KP218\'|t}}</li><li>{{\'KP219\'|t}}</li><li>{{\'KP220\'|t}}</li><li>{{\'KP221\'|t}}</li></ul></div></div></div></div></div><div class="notebook row" ng-show="notebook.id>0"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'NB215\'|t}}</p><p>{{\'LN217\'|t}}</p></div><div class="link"><ul class="list-inline"><li><a href="javascript:void(0);" ui-sref="notebookAlias.entity({userId:currentUser.id,id:notebook.id})" class="btn">{{\'LN266\'|t}}</a></li><li><a href="javascript:void(0);" ng-click="notebook.id=0;vSubFlag=false;">{{\'NB114\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/community/partner/index.html",'<style>.fa-angle-down{\n    margin-top: 1px;\n  }\n\n  sup {\n    font-size:100%;\n    top:0;\n  }</style><div class=""><h2 class="">{{\'CT090\'|t}}</h2><h4><small><span ng-bind-html="\'HL913\'|t"></span></small></h4><div class="row"><div class="col-md-9 community-partner"><div class="panel hidden-phone"><div class="panel-body"><header class="filter"><form class="" ng-submit="applyFilter()"><div style="margin-bottom: 10px;background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile" style="width:75%"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'CT009\'|t}}">{{\'CT009\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><button class="btn btn-lg btn-primary dtp-picker-selector-mobile" type="submit" style="width: 25%;line-height: 25px;margin-top: -1px;margin-bottom: -1px"><span class="btn-txt">{{\'C0068\'|t}}</span></button><div style="clear: both"></div></div><div><div class="party-size-picker dtp-picker-selector sm select-native dtp-picker-selector-mobile" style="width:auto;border:none"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'CT002\'|t}}">{{\'CT002\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker dtp-picker-selector select-native dtp-picker-selector-mobile" style="width:auto;border:none; margin-right: 10px;height: 22px;line-height: 22px"><a class="select-label dtp-picker-selector-link small sub" tabindex="-1" style="background: none;padding: 0px 28px 0px 0px">{{\'C0011\'|t}}<span ng-bind-html="filter.gender?\':&nbsp;<strong>\'+((filter.gender==\'\'?\'C0024\':(filter.gender==\'1\'?\'C0013\':\'C0012\')) |t)+\'</strong>\':\'\'"></span></a><select ng-model="filter.gender" class="form-control" ng-change="applyFilter()"><option value="" translate="C0024"></option><option value="2" translate="C0012"></option><option value="1" translate="C0013"></option></select></div><div class="party-size-picker dtp-picker-selector sm select-native dtp-picker-selector-mobile" style="width:auto;border:none"><ui-select ng-model="uiItems2" theme="bootstrap" on-select="uiSelected2($item, $model)"><ui-select-match placeholder="{{\'C0003\'|t}}">{{\'C0003\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker dtp-picker-selector sm select-native dtp-picker-selector-mobile" style="width:auto;border:none;height: 22px;line-height: 22px"><label class="checkbox-inline"><input type="checkbox" ng-model="filter.is_native" ng-change="applyFilter()" ng-true-value="\'1\'" ng-false-value="\'0\'" class="px"> <span class="lbl" style="font-size: 14px">{{\'CT091\'|t}}</span></label></div><style>.inputFocus:focus{\n                border-color: #ff4338 !important;\n              }</style><div class="party-size-picker dtp-picker-selector sm select-native dtp-picker-selector-mobile" style="width:auto;border:none;    height: 22px;line-height: 22px;margin-left: 11px;font-size: 14px"><div move-element="show" ng-click="show=true" style="cursor: pointer"><span>{{\'C0009\'|t}}<span ng-show="filter.city">:&nbsp;</span><strong ng-bind="filter.city"></strong> <i class="fa fa-angle-down pull-right" style="line-height: 18px;margin-top: 1px"></i></span> <input type="text" ng-show="show" class="form-control ui-select-search inputFocus" style="z-index: 999" ng-model="filter.city" placeholder="{{\'C0015\'|t}}"></div></div><div style="clear: both"></div></div></form></header></div></div><div class="visible-phone grid-gutter-margin-b"><div class="party-size-picker dtp-picker-selector select-native two"><a ng-click="opensearchmodal()" class="select-label dtp-picker-selector-link small search" tabindex="-1">{{\'CT009\'|t}}</a></div><div style="margin-top:10px"><span ng-if="filter.speak" class="visible-phone"><span class="label label-tags">{{\'practice\'|t}} {{filter.speak|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.speak=\'\';applyFilter();">&times;</button></span></span> <span ng-if="filter.learn" class="visible-phone"><span class="label label-tags">{{\'CT002\'|t}} {{filter.learn|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.learn=\'\';applyFilter();">&times;</button></span></span> <span ng-if="filter.gender" class="visible-phone"><span class="label label-tags">{{\'C0011\'|t}} {{(filter.gender==\'1\'?\'C0013\':\'C0012\')|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.gender=\'\';applyFilter();">&times;</button></span></span> <span ng-if="filter.country" class="visible-phone"><span class="label label-tags">{{\'ST239\'|t}} {{filter.country|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.country=\'\';applyFilter();">&times;</button></span></span> <span ng-if="filter.is_native==1" class="visible-phone"><span class="label label-tags">{{\'CT091\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.is_native=\'\';applyFilter();">&times;</button></span></span> <span ng-if="filter.city" class="visible-phone"><span class="label label-tags">{{\'C0009\'|t}} {{filter.city|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.city=\'\';applyFilter();">&times;</button></span></span></div></div><div class="teacher-list panel loading-layout"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><section class="teacher-item" ng-repeat="partner in items track by $index" ng-class="{\'animation-list-item\':$index}"><div class="panel-body"><div class="row"><a class="col-xs-2 is-relative" ui-sref="user({id:partner.id})"><div class="online-layout1"><div class="offline" ng-class="{online:partner.is_online}" title="{{ partner.is_online?\'Online\':\'Offline\' }}"></div></div><img ng-src="{{partner.avatar_file_name|avatar:\'100\'}}" alt="" kp-fallback-avatar></a><div class="col-xs-10"><button ui-sref="user({id:partner.id})" class="btn btn-sm pull-right visible-desktop">{{\'TP122\'|t}}</button><ul class="media-heading list-inline"><li><a ui-sref="user({id:partner.id})" ng-bind="partner.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="partner.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(partner.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="partner.is_premium && !partner.is_pro && !partner.is_tutor"><i class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 22px" title="{{\'PU009\'|t}}"></i></li><li ng-if="partner.is_pro"><i class="fa fa-ii-tutor teacher-type-fa color-pro" style="padding-bottom: 6px;font-size: 22px" title="{{\'C0200\'|t}}"></i></li><li ng-if="partner.is_tutor && !partner.is_pro"><i class="fa fa-ii-tutor teacher-type-fa color-tutor" style="padding-bottom: 6px;font-size: 22px" title="{{\'C0201\'|t}}"></i></li><li style="margin-left: 9px;font-size: 22px" ng-if="badgeDisplay != false  && partner.exam_result_shown_obj != null && partner.exam_result_shown_obj.status!=2"><a class="fa fa-ii-oopt" style="color: #94B004;font-size: 18px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></li></ul><ul class="list-inline m-r-3 no-margin-b"><li ng-repeat="item in partner.language_obj_s|orderBy:\'level\':true">{{item.language|t}}<span class="l-level l-level{{item.level}}" title="{{item.level|kpLanguageLevel}}"></span> <span ng-hide="$last">,</span></li></ul><p><ul class="list-inline m-r-3" ng-hide="(partner.language_obj_s|filter:{is_learning:1}).length<1"><li>{{\'C0007\'|t}}:</li><li ng-repeat="item in partner.language_obj_s|filter:{is_learning:1}">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></li></ul></p><p ng-show="partner.intro" class="text-muted hidden-phone" ng-bind="partner.intro"></p></div></div></div></section></div><section class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></section><kp-ad-system loc="PAR_B"></kp-ad-system></div><aside class="col-md-3"><div class="panel no-border panel-dark" ng-if="teachers"><div class="panel-body"><h4 class="no-margin-t">{{\'MH235\'|t}}</h4><div class="" ng-repeat="teacher in teachers track by $index"><div class="card-item"><div class="item-icon is-relative"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><img title="{{teacher.nickname}}" alt="{{teacher.nickname}}" ng-src="{{teacher.avatar_file_name|avatar:\'50\'}}" class="bg-icon rounded" style="width:50px; height:50px; bottom: inherit;right:20px" kp-fallback-avatar></div><div class="item-info"><span class="text-bg"><a ui-sref="teacher({id:teacher.id})" ng-bind="teacher.nickname"></a>&nbsp;<i class="text-lg" ng-class="teacher.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(teacher.origin_country_id|t)}}" style="width: 1em"></i></span><div class="text-muted"><ul class="list-inline m-r-3"><li>{{\'C0118\'|t}}</li><li ng-repeat="item in teacher.language_obj_s|filter:{is_teaching:1}"><span>{{item.language|t }}<span ng-hide="$last">,&nbsp;</span></span></li><br><li><span>{{\'KP210\'|t}} $<span ng-bind-html="teacher.teacher_info_obj.min_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<span ng-bind-html="\'KP211\'|t"></span></span></li></ul></div></div></div><button class="btn btn-block" ui-sref="teacher({id:teacher.id})"><span class="btn-txt">{{\'TP121\'|t}}</span></button></div></div></div><kp-ad-system loc="PAR_R"></kp-ad-system></aside></div></div>'),a.put("/views/community/question/question.bs.html","<div ui-view></div>"),a.put("/views/community/question/question.entity.html",'<kp-title ng-if="question" title="AS524" params="[question.title,question.language]"></kp-title><ul class="breadcrumb"><li><a href="/">{{\'M0001\'|t}}</a></li><li><a ui-sref="question.list">{{\'M0008\'|t}}</a></li><li class="active"><a ui-sref="questionsAlias.language({language:question.language})" ng-bind="question.language|t"></a></li></ul><header><p ng-switch="question.status"><label class="label label-success" ng-switch-when="0">{{\'AS098\'|t}}</label><label class="label label-warning" ng-switch-when="1">{{\'AS095\'|t}}</label><label class="label label-info" ng-switch-when="2">{{\'AS096\'|t}}</label><label class="label label-dark-gray" ng-switch-when="3">{{\'AS094\'|t}}</label></p><h2 ng-bind="question.title" class="no-margin-t"></h2></header><div class="and-detail row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-2 text-center" kp-user-card user-id="question.asker_obj.id"><a ng-if="question.asker_obj.allow_profile" ui-sref="user({id:question.asker_obj.id})"><img ng-src="{{question.asker_obj|avatar:100 }}" class="rounded" kp-fallback-avatar width="100"></a> <img ng-if="!question.asker_obj.allow_profile" class="rounded" ng-src="{{ question.asker_obj|avatar:50 }}"> <i class="fa fa-ii-tutor color-pro" style="padding-top: 4px;font-size: 24px" ng-if="question.asker_obj.is_pro" title="{{\'C0200\'|t}}"></i> <i class="fa fa-ii-tutor color-tutor" style="padding-top: 4px;font-size: 24px" ng-if="!question.asker_obj.is_pro && question.asker_obj.is_tutor" title="{{\'C0201\'|t}}"></i> <a ng-if="badgeDisplay != false  && question.asker_obj.exam_result_shown_obj != null && question.asker_obj.exam_result_shown_obj.status!=2" class="fa fa-ii-oopt" style="color: #94B004;font-size: 24px" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></div><div class="col-md-10"><span ng-if="question.edited"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label><br></span><div ng-show="!meta.editQuestion"><div class="grid-gutter-margin-b"><p class="no-margin-t lead"><span ng-bind-html="question.content|replaceLineToBr"></span></p><ul class="list-unstyled text-muted"><li>{{\'C0016\'|t}}: {{question.language|t}}</li><li>{{\'C0017\'|t}}: {{question.language2|t}}</li><li>{{\'WK056\'|t}}: {{question.category|category|t}}</li></ul></div><div class="padding-xs-vr"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray"><li><span class="label" ng-bind="question.mark_sum"></span></li><li ng-hide="(currentUser && question.asker_obj.id==currentUser.id)"><a title="{{question.hasVoteUp?\'PB025\':\'C1021\'|t}}" ng-disabled="question.hasVoteUp" href="javascript:void(0);"><i class="fa" ng-class="{\'fa-thumbs-up\':question.hasVoteUp,\'fa-thumbs-o-up\':!question.hasVoteUp}" italki-click-with-spinner="questionVote(1,question.asker_obj.id)" noe="1"></i></a>&nbsp; <a title="{{question.hasVoteDown?\'PB025\':\'C1022\'|t}}" ng-disabled="question.hasVoteDown" href="javascript:void(0);"><i class="fa" ng-class="{\'fa-thumbs-down\':question.hasVoteDown,\'fa-thumbs-o-down\':!question.hasVoteDown}" italki-click-with-spinner="questionVote(-1,question.asker_obj.id)" noe="1"></i></a></li><li ng-show="question.device>0" ng-bind-html="question.device|device"></li><li><a ng-if="question.asker_obj.allow_profile" ui-sref="user({id:question.asker_obj.id})"><i ng-if="question.asker_obj.is_premium&& !question.asker_obj.is_pro && !question.asker_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{question.asker_obj.nickname}}</a></li><li><span ng-bind="question.create_time|prettyDate"></span></li><li>{{\'AS142\'|t|format:question.answer_count}}</li><li>{{\'AS148\'|t|format:question.view_count}}</li></ul></div><div class="col-md-2 text-right" kp-report-concern report-item="{reportType:\'ANR-QST\',reportId:question.id}"></div></div></div><p><span ng-if="question.status==1"><button class="btn btn-primary" ng-if="question.is_mine" ng-click="meta.isAdditional=true;focusInput_A=true;"><span class="btn-txt">{{\'AS199\'|t}}</span></button> <button class="btn btn-primary" ng-if="!question.is_mine" ng-click="funAddAnswer()"><span class="btn-txt">{{\'AS151\'|t}}</span></button></span> <button class="btn" ng-if="question.editable" ng-click="editQuestion()"><span class="btn-txt">{{\'NB160\'|t}}</span></button> <button class="btn" ng-click="meta.isComment=true;focusInput_C=true;"><span class="btn-txt">{{\'GP101\'|t}}</span></button></p><span ng-if="question.status==1&&question.is_mine"><div ng-show="meta.isAdditional"><form><div class="form-group" ng-class="{\'has-error\':(meta.additional.content.length==0 && vSubFlag) || meta.additional.content.length>10000}"><textarea class="form-control" focus-me="focusInput_A" ng-model="meta.additional.content" rows="5"></textarea><span class="help-block" ng-show="(meta.additional.content.length==0 && vSubFlag) || meta.additional.content.length>10000">{{\'AS202\'|t}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="10000-meta.additional.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addMoreDetail,vSubFlag);" ng-disabled="meta.additional.content.length==0 || meta.additional.content.length>10000" class="btn btn-primary"></button> <button class="btn" type="button" ng-click="meta.isAdditional=false;vSubFlag=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></span></div><div class="form-group" ng-show="meta.editQuestion" ng-class="{\'has-error\':question.raw_content.length>1000}"><textarea class="form-control" rows="10" ng-model="question.raw_content"></textarea><span class="help-block" ng-show="question.raw_content.length>1000 || question.raw_content.length==0">{{\'ST155\'|t|format:0:1000}}</span><p class="">{{\'AS005\'|t}} {{1000-question.raw_content.length}}</p><button class="btn btn-primary" italki-click-with-spinner="updateQuestion()" stext="NB165" ng-disabled="$$oldQuestion==question.raw_content || question.raw_content.length>1000||question.raw_content.length==0"></button> <button class="btn" ng-click="cancelEditQuestion()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></div><p><a href="javascript:void(0);" ng-click="meta.hideComment=!meta.hideComment">{{\'NB022\'|t|format:question.comment_count}}</a></p><div ng-hide="meta.hideComment" class="widget-comments tab-pane no-padding"><div class="no-padding-vr"><div ng-show="meta.comments.has_next"><p class="re_more"><a href="javascript:void(0);" ng-click="loadMoreComment()" ng-bind="\'MH112\'|t"></a></p></div><div class="comment" ng-repeat="comment in question.comment_obj_s"><div class="is-relative comment-card" kp-user-card user-id="comment.commenter_obj.id"><a ng-if="comment.commenter_obj.allow_profile" ui-sref="user({id:comment.commenter_obj.id})"><img ng-src="{{comment.commenter_obj|avatar:50 }}" class="comment-avatar" kp-fallback-avatar width="50"></a> <img ng-if="!comment.commenter_obj.allow_profile" class="comment-avatar" ng-src="{{comment.commenter_obj|avatar:50 }}"></div><div class="comment-body"><div class="comment-by"><div class="row"><div class="col-md-10"><ul class="list-inline text-light-gray" style="margin-bottom: 0px"><li><span ng-bind-html="comment.device|device"></span> <a ui-sref="user({id:comment.commenter_obj.id})"><i ng-if="comment.commenter_obj.is_premium&& !comment.commenter_obj.is_pro && !comment.commenter_obj.is_tutor" class="fa fa-ii-premium color-premuim" title="{{\'PU009\'|t}}"></i> {{comment.commenter_obj.nickname}}</a></li><li>{{comment.create_time|prettyDate}}</li><li class="editLi" ng-if="comment.editable"><a href="" class="edit" ng-click="editQuestionComment(comment)">{{\'NB160\'|t}}</a></li></ul></div><div class="col-md-2 text-right"><a href="" ng-if="comment.editable" ng-click="editQuestionComment(comment)">{{\'NB160\'|t}}</a></div></div></div><div ng-if="comment.edited" style="padding: 4px 0px 0px 0px"><label class="label label-warning ng-binding">{{\'NB161\'|t}}</label></div><div class="comment-text" ng-bind-html="comment.content | replaceLineToBr" ng-hide="comment.editQuestionComment"></div><div class="comment" ng-show="comment.editQuestionComment"><form><div class="form-group" ng-class="{\'has-error\':(comment.raw_content.length==0 && vSubFlag1) || (comment.raw_content.length>0 && comment.raw_content.length<2) || comment.raw_content.length>2000}"><textarea class="form-control" focus-me="focusInput_C" ng-model="comment.raw_content" rows="5"></textarea><span class="help-block" ng-show="comment.raw_content.length==0  || (comment.raw_content.length>0 && comment.raw_content.length<2) || comment.raw_content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-comment.raw_content.length"></span></p></div><p><button type="button" italki-click-with-spinner="updateQuestionComment(comment)" ng-disabled="$$oldQuestionComment==comment.raw_content || comment.raw_content.length<2 || comment.raw_content.length>2000" class="btn btn-primary" stext="NB165"></button> <button class="btn" type="button" ng-click="cancelEditQuestionComment()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div><div class="comment" ng-show="meta.isComment"><form><div class="form-group" ng-class="{\'has-error\':(meta.newComment.content.length==0 && vSubFlag1) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || meta.newComment.content.length>2000}"><textarea class="form-control" focus-me="focusInput_C" ng-model="meta.newComment.content" rows="5"></textarea><span class="help-block" ng-show="(meta.newComment.content.length==0 && vSubFlag1) || (meta.newComment.content.length>0 && meta.newComment.content.length<2) || meta.newComment.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-meta.newComment.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addComment,vSubFlag1);" ng-disabled="meta.newComment.content.length<2 || meta.newComment.content.length>2000" class="btn btn-primary"></button> <button class="btn" type="button" ng-click="meta.isComment=false;vSubFlag1=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div></div></div></div></div><div class="panel loading-layout"><kp-loading indicator="question"></kp-loading><div class="panel-body no-padding-b"><h3 class="no-margin" ng-show="question.answer_obj_s.length>0">{{\'AS006\'|t}}<small><div class="pull-right" ng-show="question.answer_obj_s.length>2"><select ng-model="meta.sort_by" ng-change="answersSortBy()" class="form-control"><option value="1">{{\'AS156\'|t}}</option><option value="2">{{\'AS157\'|t}}</option><option value="3">{{\'AS158\'|t}}</option></select></div></small></h3></div><div class="article-item" ng-repeat="answer in meta.best_answer_obj_s" ng-init="answer.has_set_best=false"><kp-community-question-answer answer="answer"></kp-community-question-answer></div><div class="article-item" ng-repeat="answer in question.answer_obj_s" ng-init="answer.has_set_best=question.has_set_best"><kp-community-question-answer answer="answer"></kp-community-question-answer></div><div ng-if="question.answer_count==0"><div class="noresult-text text-lg text-center text-muted"><img class="rounded" src="/static/images/icon_norecord.png"><br><span>{{\'AS097\'|t}}</span></div></div></div><aside class="grid-gutter-margin-b text-center" ng-show="(meta && meta.answers.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMoreAnswer()"></button></aside><div ng-show="meta.isAnswer" class="panel"><div class="panel-body"><h3 class="no-margin-t">{{\'AS162\'|t}}</h3><div class=""><form><div class="form-group" ng-class="{\'has-error\':(meta.newAnswer.content.length==0 && vSubFlag2) || (meta.newAnswer.content.length>0 && meta.newAnswer.content.length<2) || meta.newAnswer.content.length>2000}"><textarea class="form-control" focus-me="focusInput" ng-model="meta.newAnswer.content" rows="5"></textarea><span class="help-block" ng-show="(meta.newAnswer.content.length==0 && vSubFlag2) || (meta.newAnswer.content.length>0 && meta.newAnswer.content.length<2) || meta.newAnswer.content.length>2000">{{\'ST155\'|t|format:2:2000}}</span><p class="text-muted">{{\'AS201\'|t}}</p><p class="">{{\'AS005\'|t}}: <span ng-bind="2000-meta.newAnswer.content.length"></span></p></div><p><button type="button" italki-click-with-spinner="submitForm(addAnswer,vSubFlag2);" ng-disabled="meta.newAnswer.content.length<2 || meta.newAnswer.content.length>2000" class="btn btn-primary"></button> <button class="btn" type="button" ng-click="meta.isAnswer=false;vSubFlag2=false;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p></form></div></div></div><kp-ad-system loc="ANS_DETAIL_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body text-broken"><h4 class="no-margin-t">{{ \'AS207\'|t|format:(question.language|t) }}</h4><div class="no-grid-gutter-h"><ul><li ng-repeat="question in meta.open_question_s"><a ui-sref="questionAlias.entity({id:question.id})" ng-bind="question.title"></a> <span class="text-muted">({{question.answer_count}})</span></li></ul></div></div></div><div class="panel no-border panel-dark"><div class="panel-body text-broken"><h4 class="no-margin-t">{{ \'AS099\'|t|format:(question.language|t) }}</h4><div class="no-grid-gutter-h"><ul><li ng-repeat="question in meta.closed_question_s"><a ui-sref="questionAlias.entity({id:question.id})" ng-bind="question.title"></a> <span class="text-muted">({{question.answer_count}})</span></li></ul></div></div></div><kp-ad-system loc="ANS_DETAIL_R"></kp-ad-system></div></div>'),
a.put("/views/community/question/question.list.html",'<header><h2>{{\'M0008\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/questiontab.html\'"></ng-include><div class="panel-body"><div class="page-header"><div class="visible-phone"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'C0007\'|t}}<span ng-bind-html="filter.language?\':&nbsp;\'+(filter.language|t)+\'\':\'\'"></span></a><select ng-model="filter.language" class="form-control" ng-change="applyFilter()" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans_1"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: #f7f7f7">{{\'C0017\'|t}}<span ng-bind-html="filter.asker_language?\':&nbsp;\'+(filter.asker_language|t)+\'\':\'\'"></span></a><select ng-model="filter.asker_language" ng-change="applyFilter()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div></div><div style="background: #f7f7f7;border: 1px solid rgba(0, 0, 0, 0.08)" class="hidden-phone"><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'AS000\'|t}}">{{\'C0007\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans_1 | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="party-size-picker lg dtp-picker-selector select-native dtp-picker-selector-mobile two" style="width: 50%"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'C0017\'|t}}">{{\'C0017\'|t}}<span ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'&nbsp;\'+(\'C0027\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="clearfix"></div></div></div></div></div><div class="teacher-list panel loading-layout no-border-t"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><kp-no-found items="items"></kp-no-found><div ng-repeat="question in items" class="article-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body" ui-sref="questionAlias.entity({id:question.id})"><div class="item-icon" kp-user-card user-id="question.asker_obj.id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="question.asker_obj.allow_profile" ui-sref="user({id:question.asker_obj.id})"><img ng-src="{{question.asker_obj|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"></a> <img ng-if="!question.asker_obj.allow_profile" class="rounded" ng-src="{{ question.asker_obj|avatar:50 }}"></div><div class="item-info is-relative answer"><div class="right-btn"><div ng-switch="question.status"><label class="label label-success" ng-switch-when="0">{{\'AS098\'|t}}</label><label class="label label-warning" ng-switch-when="1">{{\'AS095\'|t}}</label><label class="label label-info" ng-switch-when="2">{{\'AS096\'|t}}</label><label class="label label-dark-gray" ng-switch-when="3">{{\'AS094\'|t}}</label></div><span class="text-muted" ng-bind="\'AS142\'|t|format:question.answer_count"></span></div><strong class="text-bg" ng-class="{\'text-premium\':question.asker_obj.is_premium&& !question.asker_obj.is_pro && !question.asker_obj.is_tutor}"><a ui-sref="questionAlias.entity({id:question.id})" class="search-title" ng-bind-html="question.title"></a></strong><ul class="list-inline no-margin-b text-light-gray"><li><span class="label" ng-bind="question.mark_sum"></span></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="questionsAlias.language({language:question.language})" class="" ng-bind="question.language|t"></a></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:question.asker_obj.id})"><i ng-if="question.asker_obj.is_premium&& !question.asker_obj.is_pro && !question.asker_obj.is_tutor" title="{{\'PU009\'|t}}" class="icon_pre">&nbsp;</i>{{question.asker_obj.nickname}}</a></li><li><span ng-bind="question.create_time|prettyDate"></span></li></ul></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside><kp-ad-system loc="ANS_LIST_B"></kp-ad-system></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'AS211\'|t}}</p></div><div class="text-center"><button ng-click="gotonew(\'questionAlias.new\')" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'AS103\'|t}}</span></button></div></div></div><kp-count-time-down-dashboard ng-show="languageTime.show"></kp-count-time-down-dashboard><kp-ad-system loc="ANS_LIST_R"></kp-ad-system></div></div>'),a.put("/views/community/question/question.mine.html",'<header><h2>{{\'M0008\'|t}}</h2></header><div class="notebook row"><div class="col-md-9"><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/community/assert/questiontab.html\'"></ng-include><div class="panel-heading"><h4>{{(dataType==\'my_question\'?\'AS602\':\'AS603\')|t|format:meta.total}}</h4></div></div><div class="teacher-list panel loading-layout no-border-t"><kp-loading indicator="items"></kp-loading><kp-no-found items="items"></kp-no-found><div ng-repeat="question in items" class="animation-list-item article-item yes-cursor cursor-over"><div class="panel-body" ui-sref="questionAlias.entity({id:question.id})"><div class="item-icon"><img class="rounded" ng-src="{{ question.asker_obj|avatar:50 }}" width="50" kp-fallback-avatar></div><div class="item-info"><strong class="text-bg"><a ui-sref="questionAlias.entity({id:question.id})" class="search-title status" ng-bind="question.title" ng-class="\'a\'+question.status"></a></strong><ul class="list-inline no-margin-b text-light-gray"><li><span class="label" ng-bind="question.mark_sum"></span></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="questionsAlias.language({language:question.language})" ng-bind="question.language|t"></a></li><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({id:question.asker_obj.id})" ng-bind="question.asker_obj.nickname"></a></li><li><span ng-bind="question.create_time|prettyDate"></span></li><li><span ng-bind="\'AS142\'|t|format:question.answer_count"></span></li></ul></div></div></div></div><aside class="text-center" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMore()"></button></aside></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'AS211\'|t}}</p></div><div class="text-center"><button ui-sref="questionAlias.new" class="btn btn-lg btn-primary btn-block"><span class="btn-txt">{{\'AS103\'|t}}</span></button></div></div></div></div></div>'),a.put("/views/community/question/question.new.html",'<ul class="breadcrumb"><li><a ui-sref="dashboard">{{\'M0001\'|t}}</a></li><li><a ui-sref="question.list">{{\'M0008\'|t}}</a></li><li class="active">{{(discussion.id>0?\'C1003\':\'AS002\')|t}}</li></ul><header><h2 ng-hide="question.id>0">{{\'AS002\'|t}}</h2><h2 ng-show="question.id>0">{{\'C1003\'|t}}</h2></header><div class="notebook row" ng-hide="question.id>0"><div class="col-md-9"><form><div class="panel"><div class="panel-body"><div class="note note-info no-border">{{\'AS258\'|t}}</div><div class="row"><div class="col-md-12"><div class="form-group" ng-class="{\'has-error\':(question.title.length==0 && vSubFlag) || (question.title.length>0 && question.title.length<5) || question.title.length>100}"><label class="control-label">{{\'AS129\'|t}}</label><input type="text" class="form-control" ng-model="question.title"> <span class="help-block" ng-show="(question.title.length==0 && vSubFlag) || (question.title.length>0 && question.title.length<5) || question.title.length>100">{{\'ST155\'|t|format:5:100}}</span><p class="">{{\'AS005\'|t}} {{100-question.title.length}}</p></div><div class="form-group" ng-class="{\'has-error\':question.content.length>1000}"><label class="control-label" translate="AS121"></label><span>({{\'C0043\'|t}})</span><textarea class="form-control" rows="10" ng-model="question.content"></textarea><span class="help-block" ng-show="question.content.length>1000">{{\'ST155\'|t|format:0:1000}}</span><p>{{\'AS201\'|t}}</p><p class="">{{\'AS005\'|t}} {{1000-question.content.length}}</p></div></div><div class="col-md-6"><div class="form-group" ng-class="{\'has-error\':(question.language.length==0 && vSubFlag)}"><label class="control-label">{{\'AS004\'|t}}</label><select name="language" class="form-control" ng-model="question.language"><option value="">{{\'C0061\'|t}}...</option><option ng-repeat="opt in currentUser.language_obj_s" value="{{opt.language}}">{{opt.language|t}}</option></select><span class="help-block" ng-show="(question.language.length==0 && vSubFlag)">{{\'KP300\'|t}}</span></div><div class="form-group" ng-class="{\'has-error\':(question.language2.length==0 && vSubFlag)}"><label class="control-label" translate="AS036"></label><select name="language2" class="form-control" ng-model="question.language2" required><option value="">{{\'C0061\'|t}}...</option><option ng-repeat="opt in currentUser.language_obj_s" value="{{opt.language}}">{{opt.language|t}}</option></select><span class="help-block" ng-show="(question.language2.length==0 && vSubFlag)">{{\'AS037\'|t}}</span></div><div class="form-group" ng-class="{\'has-error\':(question.category.length==0 && vSubFlag)}"><label class="control-label">{{\'WK056\'|t}}</label><select class="form-control" ng-model="question.category"><option value="">{{\'C0061\'|t}}...</option><option value="1">{{\'AS401\'|t}} ({{\'AS400\'|t}})</option><option value="2">{{\'AS402\'|t}}</option><option value="3">{{\'AS403\'|t}}</option></select><span class="help-block" ng-show="(question.category.length==0 && vSubFlag)">{{\'AS303\'|t}}</span></div></div></div><div class=""><button type="button" italki-click-with-spinner="submitForm(addQuestion,\'vSubFlag\');" class="btn btn-primary"></button></div></div></div></form></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4 translate="AS257"></h4><div class="grid-gutter-margin-b"><strong>{{\'AS250\'|t}}</strong><br><br><strong>1. {{\'AS251\'|t}}</strong><br><span ng-bind-html="\'AS264\'|t"></span><br><br><strong>2. {{\'AS252\'|t}}</strong><br><span ng-bind-html="\'AS265\'|t"></span><br><br><strong>3. {{\'AS253\'|t}}</strong><br>{{\'AS266\'|t}}<br><br><strong>4. {{\'AS254\'|t}}</strong><br>{{\'AS267\'|t}}<br><br><strong>5. {{\'AS255\'|t}}</strong><br><br><strong>6.{{\'AS256\'|t}}</strong><br><span ng-bind-html="\'AS268\'|t"></span></div></div></div></div></div><div class="notebook row" ng-show="question.id>0"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b"><p>{{\'AS146\'|t}}</p><p>{{\'LN216\'|t}}</p></div><div class="link" style="margin-bottom: 106px"><ul class="list-inline"><li><a href="javascript:void(0);" ui-sref="questionAlias.entity({id:question.id})" class="btn" translate="LN265"></a></li><li><a href="javascript:void(0);" ng-click="question.id=0;vSubFlag=false;">{{\'AS101\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/component/ad.system.html",'<div class="panel no-border panel-dark" ng-repeat="item in hs" ng-class="{\'visible-xs\':item.device_size==1,\'visible-sm\':item.device_size==2,\n         \'visible-md\':item.device_size==3,\'visible-lg\':item.device_size==4}"><div class="panel-body" style="padding:0"><div ng-bind-html="item.title_html"></div><div ng-bind-html="item.content"></div></div></div>'),a.put("/views/component/add.this.html",'<div class="addthis_toolbox addthis_default_style addthis_32x32_style"><a class="addthis_button_preferred_1"></a> <a class="addthis_button_preferred_2"></a> <a class="addthis_button_preferred_3"></a> <a class="addthis_button_preferred_4"></a> <a class="addthis_button_compact"></a> <a class="addthis_counter addthis_bubble_style"></a></div>'),a.put("/views/component/caleandar2.html",'<div class="cal availability"><div class="tz-notice"><span class="tz-normal" isolate="">{{\'KP212\'|t}}</span></div><div class="controls"><a class="prev" ng-hide="!$current" ng-click="$prevDays()"><i class="fa fa-angle-left"></i> {{\'WK133\'|t}}</a><div class="title"></div><a class="next" ng-click="$nextDays()">Next <i class="fa fa-angle-right"></i></a></div><div id="cal-container"><div class="top"><table><tbody><tr><td class="small" ng-bind="cal.timezone()"></td><td ng-repeat="day in cal.days" ng-bind="day|moment:\'dd MM/DD\'" ng-class="{today:$first}"></td></tr></tbody></table></div><div class="week" style="height: 1008px"><table class="day" cellspacing="0" cellpadding="0" style="height: 1008px"><tbody><tr class="day-row"><td class="small"></td><td data-time="!1418054400000" class="day-col"><div class="events"></div></td><td data-time="!1418140800000" class="day-col"><div class="events"></div></td><td data-time="!1418227200000" class="day-col"><div class="events"></div></td><td data-time="!1418313600000" class="day-col"><div class="events"></div></td><td data-time="!1418400000000" class="day-col"><div class="events"></div></td><td data-time="!1418486400000" class="day-col"><div class="events"></div></td><td data-time="!1418572800000" class="day-col"><div class="events"></div></td></tr></tbody></table><table class="hour" cellpadding="0"><tbody><tr data-hour-marker="0"><td class="small">00:00</td><td class="major" data-hour="0"><div class="hour-block" data-offset="0"></div><div class="hour-block" data-offset="24"></div><div class="hour-block hour-select-selected" data-offset="48"></div><div class="hour-block hour-select-mod-del" data-offset="72"></div><div class="hour-block" data-offset="96"></div><div class="hour-block" data-offset="120"></div><div class="hour-block hour-select-selected" data-offset="144"></div></td></tr><tr data-hour-marker="0"><td class="small"></td><td class="minor" data-hour="0.5"><div class="hour-block" data-offset="0.5"></div><div class="hour-block" data-offset="24.5"></div><div class="hour-block hour-select-selected" data-offset="48.5"></div><div class="hour-block hour-select-mod-del" data-offset="72.5"></div><div class="hour-block" data-offset="96.5"></div><div class="hour-block" data-offset="120.5"></div><div class="hour-block hour-select-selected" data-offset="144.5"></div></td></tr><tr data-hour-marker="1"><td class="small">01:00</td><td class="major" data-hour="1"><div class="hour-block" data-offset="1"></div><div class="hour-block" data-offset="25"></div><div class="hour-block hour-select-selected" data-offset="49"></div><div class="hour-block hour-select-mod-del" data-offset="73"></div><div class="hour-block" data-offset="97"></div><div class="hour-block" data-offset="121"></div><div class="hour-block hour-select-selected" data-offset="145"></div></td></tr><tr data-hour-marker="1"><td class="small"></td><td class="minor" data-hour="1.5"><div class="hour-block" data-offset="1.5"></div><div class="hour-block" data-offset="25.5"></div><div class="hour-block hour-select-selected" data-offset="49.5"></div><div class="hour-block hour-select-mod-del" data-offset="73.5"></div><div class="hour-block" data-offset="97.5"></div><div class="hour-block" data-offset="121.5"></div><div class="hour-block hour-select-selected" data-offset="145.5"></div></td></tr><tr data-hour-marker="2"><td class="small">02:00</td><td class="major" data-hour="2"><div class="hour-block" data-offset="2"></div><div class="hour-block" data-offset="26"></div><div class="hour-block hour-select-selected" data-offset="50"></div><div class="hour-block hour-select-mod-del" data-offset="74"></div><div class="hour-block" data-offset="98"></div><div class="hour-block" data-offset="122"></div><div class="hour-block hour-select-selected" data-offset="146"></div></td></tr><tr data-hour-marker="2"><td class="small"></td><td class="minor" data-hour="2.5"><div class="hour-block" data-offset="2.5"></div><div class="hour-block" data-offset="26.5"></div><div class="hour-block hour-select-selected tt" data-offset="50.5"></div><div class="hour-block hour-select-mod-del" data-offset="74.5"></div><div class="hour-block" data-offset="98.5"></div><div class="hour-block" data-offset="122.5"></div><div class="hour-block hour-select-selected" data-offset="146.5"></div></td></tr><tr data-hour-marker="3"><td class="small">03:00</td><td class="major" data-hour="3"><div class="hour-block" data-offset="3"></div><div class="hour-block" data-offset="27"></div><div class="hour-block hour-select-selected" data-offset="51"></div><div class="hour-block hour-select-mod-del" data-offset="75"></div><div class="hour-block" data-offset="99"></div><div class="hour-block" data-offset="123"></div><div class="hour-block hour-select-selected" data-offset="147"></div></td></tr><tr data-hour-marker="3"><td class="small"></td><td class="minor" data-hour="3.5"><div class="hour-block" data-offset="3.5"></div><div class="hour-block" data-offset="27.5"></div><div class="hour-block hour-select-selected" data-offset="51.5"></div><div class="hour-block hour-select-mod-del" data-offset="75.5"></div><div class="hour-block" data-offset="99.5"></div><div class="hour-block" data-offset="123.5"></div><div class="hour-block hour-select-selected" data-offset="147.5"></div></td></tr><tr data-hour-marker="4"><td class="small">04:00</td><td class="major" data-hour="4"><div class="hour-block" data-offset="4"></div><div class="hour-block" data-offset="28"></div><div class="hour-block hour-select-selected" data-offset="52"></div><div class="hour-block hour-select-mod-del" data-offset="76"></div><div class="hour-block" data-offset="100"></div><div class="hour-block" data-offset="124"></div><div class="hour-block hour-select-selected" data-offset="148"></div></td></tr><tr data-hour-marker="4"><td class="small"></td><td class="minor" data-hour="4.5"><div class="hour-block" data-offset="4.5"></div><div class="hour-block" data-offset="28.5"></div><div class="hour-block hour-select-selected" data-offset="52.5"></div><div class="hour-block hour-select-mod-del" data-offset="76.5"></div><div class="hour-block" data-offset="100.5"></div><div class="hour-block" data-offset="124.5"></div><div class="hour-block hour-select-selected" data-offset="148.5"></div></td></tr><tr data-hour-marker="5"><td class="small">05:00</td><td class="major" data-hour="5"><div class="hour-block" data-offset="5"></div><div class="hour-block hour-select-selected tt" data-offset="29"></div><div class="hour-block hour-select-selected" data-offset="53"></div><div class="hour-block hour-select-mod-del" data-offset="77"></div><div class="hour-block" data-offset="101"></div><div class="hour-block" data-offset="125"></div><div class="hour-block hour-select-selected" data-offset="149"></div></td></tr><tr data-hour-marker="5"><td class="small"></td><td class="minor" data-hour="5.5"><div class="hour-block" data-offset="5.5"></div><div class="hour-block hour-select-selected" data-offset="29.5"></div><div class="hour-block hour-select-selected" data-offset="53.5"></div><div class="hour-block hour-select-mod-del" data-offset="77.5"></div><div class="hour-block" data-offset="101.5"></div><div class="hour-block" data-offset="125.5"></div><div class="hour-block hour-select-selected" data-offset="149.5"></div></td></tr><tr data-hour-marker="6"><td class="small">06:00</td><td class="major" data-hour="6"><div class="hour-block" data-offset="6"></div><div class="hour-block hour-select-selected" data-offset="30"></div><div class="hour-block hour-select-selected" data-offset="54"></div><div class="hour-block hour-select-mod-del" data-offset="78"></div><div class="hour-block" data-offset="102"></div><div class="hour-block" data-offset="126"></div><div class="hour-block hour-select-selected" data-offset="150"></div></td></tr><tr data-hour-marker="6"><td class="small"></td><td class="minor" data-hour="6.5"><div class="hour-block" data-offset="6.5"></div><div class="hour-block hour-select-selected" data-offset="30.5"></div><div class="hour-block hour-select-selected" data-offset="54.5"></div><div class="hour-block hour-select-mod-del" data-offset="78.5"></div><div class="hour-block" data-offset="102.5"></div><div class="hour-block" data-offset="126.5"></div><div class="hour-block hour-select-selected" data-offset="150.5"></div></td></tr><tr data-hour-marker="7"><td class="small">07:00</td><td class="major" data-hour="7"><div class="hour-block" data-offset="7"></div><div class="hour-block hour-select-selected" data-offset="31"></div><div class="hour-block hour-select-selected" data-offset="55"></div><div class="hour-block hour-select-mod-del" data-offset="79"></div><div class="hour-block" data-offset="103"></div><div class="hour-block" data-offset="127"></div><div class="hour-block hour-select-selected" data-offset="151"></div></td></tr><tr data-hour-marker="7"><td class="small"></td><td class="minor" data-hour="7.5"><div class="hour-block" data-offset="7.5"></div><div class="hour-block hour-select-selected" data-offset="31.5"></div><div class="hour-block hour-select-selected" data-offset="55.5"></div><div class="hour-block hour-select-mod-del" data-offset="79.5"></div><div class="hour-block" data-offset="103.5"></div><div class="hour-block" data-offset="127.5"></div><div class="hour-block hour-select-selected" data-offset="151.5"></div></td></tr><tr data-hour-marker="8"><td class="small">08:00</td><td class="major" data-hour="8"><div class="hour-block" data-offset="8"></div><div class="hour-block hour-select-selected" data-offset="32"></div><div class="hour-block" data-offset="56"></div><div class="hour-block" data-offset="80"></div><div class="hour-block" data-offset="104"></div><div class="hour-block" data-offset="128"></div><div class="hour-block hour-select-selected" data-offset="152"></div></td></tr><tr data-hour-marker="8"><td class="small"></td><td class="minor" data-hour="8.5"><div class="hour-block" data-offset="8.5"></div><div class="hour-block hour-select-selected" data-offset="32.5"></div><div class="hour-block" data-offset="56.5"></div><div class="hour-block" data-offset="80.5"></div><div class="hour-block" data-offset="104.5"></div><div class="hour-block" data-offset="128.5"></div><div class="hour-block hour-select-selected" data-offset="152.5"></div></td></tr><tr data-hour-marker="9"><td class="small">09:00</td><td class="major" data-hour="9"><div class="hour-block" data-offset="9"></div><div class="hour-block hour-select-selected" data-offset="33"></div><div class="hour-block" data-offset="57"></div><div class="hour-block" data-offset="81"></div><div class="hour-block" data-offset="105"></div><div class="hour-block" data-offset="129"></div><div class="hour-block hour-select-mod-del" data-offset="153"></div></td></tr><tr data-hour-marker="9"><td class="small"></td><td class="minor" data-hour="9.5"><div class="hour-block" data-offset="9.5"></div><div class="hour-block hour-select-selected" data-offset="33.5"></div><div class="hour-block" data-offset="57.5"></div><div class="hour-block" data-offset="81.5"></div><div class="hour-block" data-offset="105.5"></div><div class="hour-block" data-offset="129.5"></div><div class="hour-block hour-select-mod-del" data-offset="153.5"></div></td></tr><tr data-hour-marker="10"><td class="small">10:00</td><td class="major" data-hour="10"><div class="hour-block" data-offset="10"></div><div class="hour-block hour-select-selected" data-offset="34"></div><div class="hour-block" data-offset="58"></div><div class="hour-block" data-offset="82"></div><div class="hour-block" data-offset="106"></div><div class="hour-block" data-offset="130"></div><div class="hour-block hour-select-mod-del" data-offset="154"></div></td></tr><tr data-hour-marker="10"><td class="small"></td><td class="minor" data-hour="10.5"><div class="hour-block" data-offset="10.5"></div><div class="hour-block hour-select-selected" data-offset="34.5"></div><div class="hour-block" data-offset="58.5"></div><div class="hour-block" data-offset="82.5"></div><div class="hour-block" data-offset="106.5"></div><div class="hour-block" data-offset="130.5"></div><div class="hour-block hour-select-mod-del" data-offset="154.5"></div></td></tr><tr data-hour-marker="11"><td class="small">11:00</td><td class="major" data-hour="11"><div class="hour-block" data-offset="11"></div><div class="hour-block" data-offset="35"></div><div class="hour-block" data-offset="59"></div><div class="hour-block" data-offset="83"></div><div class="hour-block" data-offset="107"></div><div class="hour-block" data-offset="131"></div><div class="hour-block" data-offset="155"></div></td></tr><tr data-hour-marker="11"><td class="small"></td><td class="minor" data-hour="11.5"><div class="hour-block" data-offset="11.5"></div><div class="hour-block" data-offset="35.5"></div><div class="hour-block" data-offset="59.5"></div><div class="hour-block" data-offset="83.5"></div><div class="hour-block" data-offset="107.5"></div><div class="hour-block" data-offset="131.5"></div><div class="hour-block" data-offset="155.5"></div></td></tr><tr data-hour-marker="12"><td class="small">12:00</td><td class="major" data-hour="12"><div class="hour-block" data-offset="12"></div><div class="hour-block" data-offset="36"></div><div class="hour-block" data-offset="60"></div><div class="hour-block" data-offset="84"></div><div class="hour-block" data-offset="108"></div><div class="hour-block" data-offset="132"></div><div class="hour-block" data-offset="156"></div></td></tr><tr data-hour-marker="12"><td class="small"></td><td class="minor" data-hour="12.5"><div class="hour-block" data-offset="12.5"></div><div class="hour-block" data-offset="36.5"></div><div class="hour-block" data-offset="60.5"></div><div class="hour-block" data-offset="84.5"></div><div class="hour-block" data-offset="108.5"></div><div class="hour-block" data-offset="132.5"></div><div class="hour-block" data-offset="156.5"></div></td></tr><tr data-hour-marker="13"><td class="small">13:00</td><td class="major" data-hour="13"><div class="hour-block" data-offset="13"></div><div class="hour-block" data-offset="37"></div><div class="hour-block" data-offset="61"></div><div class="hour-block" data-offset="85"></div><div class="hour-block" data-offset="109"></div><div class="hour-block" data-offset="133"></div><div class="hour-block" data-offset="157"></div></td></tr><tr data-hour-marker="13"><td class="small"></td><td class="minor" data-hour="13.5"><div class="hour-block" data-offset="13.5"></div><div class="hour-block" data-offset="37.5"></div><div class="hour-block" data-offset="61.5"></div><div class="hour-block" data-offset="85.5"></div><div class="hour-block" data-offset="109.5"></div><div class="hour-block" data-offset="133.5"></div><div class="hour-block" data-offset="157.5"></div></td></tr><tr data-hour-marker="14"><td class="small">14:00</td><td class="major" data-hour="14"><div class="hour-block" data-offset="14"></div><div class="hour-block" data-offset="38"></div><div class="hour-block" data-offset="62"></div><div class="hour-block" data-offset="86"></div><div class="hour-block" data-offset="110"></div><div class="hour-block" data-offset="134"></div><div class="hour-block" data-offset="158"></div></td></tr><tr data-hour-marker="14"><td class="small"></td><td class="minor" data-hour="14.5"><div class="hour-block" data-offset="14.5"></div><div class="hour-block" data-offset="38.5"></div><div class="hour-block" data-offset="62.5"></div><div class="hour-block" data-offset="86.5"></div><div class="hour-block" data-offset="110.5"></div><div class="hour-block" data-offset="134.5"></div><div class="hour-block" data-offset="158.5"></div></td></tr><tr data-hour-marker="15"><td class="small">15:00</td><td class="major" data-hour="15"><div class="hour-block" data-offset="15"></div><div class="hour-block" data-offset="39"></div><div class="hour-block" data-offset="63"></div><div class="hour-block" data-offset="87"></div><div class="hour-block" data-offset="111"></div><div class="hour-block" data-offset="135"></div><div class="hour-block" data-offset="159"></div></td></tr><tr data-hour-marker="15"><td class="small"></td><td class="minor" data-hour="15.5"><div class="hour-block" data-offset="15.5"></div><div class="hour-block" data-offset="39.5"></div><div class="hour-block" data-offset="63.5"></div><div class="hour-block" data-offset="87.5"></div><div class="hour-block" data-offset="111.5"></div><div class="hour-block" data-offset="135.5"></div><div class="hour-block" data-offset="159.5"></div></td></tr><tr data-hour-marker="16"><td class="small">16:00</td><td class="major" data-hour="16"><div class="hour-block" data-offset="16"></div><div class="hour-block" data-offset="40"></div><div class="hour-block" data-offset="64"></div><div class="hour-block" data-offset="88"></div><div class="hour-block" data-offset="112"></div><div class="hour-block" data-offset="136"></div><div class="hour-block" data-offset="160"></div></td></tr><tr data-hour-marker="16"><td class="small"></td><td class="minor" data-hour="16.5"><div class="hour-block" data-offset="16.5"></div><div class="hour-block" data-offset="40.5"></div><div class="hour-block" data-offset="64.5"></div><div class="hour-block" data-offset="88.5"></div><div class="hour-block" data-offset="112.5"></div><div class="hour-block" data-offset="136.5"></div><div class="hour-block" data-offset="160.5"></div></td></tr><tr data-hour-marker="17"><td class="small">17:00</td><td class="major" data-hour="17"><div class="hour-block" data-offset="17"></div><div class="hour-block" data-offset="41"></div><div class="hour-block" data-offset="65"></div><div class="hour-block" data-offset="89"></div><div class="hour-block" data-offset="113"></div><div class="hour-block" data-offset="137"></div><div class="hour-block" data-offset="161"></div></td></tr><tr data-hour-marker="17"><td class="small"></td><td class="minor" data-hour="17.5"><div class="hour-block" data-offset="17.5"></div><div class="hour-block" data-offset="41.5"></div><div class="hour-block" data-offset="65.5"></div><div class="hour-block" data-offset="89.5"></div><div class="hour-block" data-offset="113.5"></div><div class="hour-block" data-offset="137.5"></div><div class="hour-block" data-offset="161.5"></div></td></tr><tr data-hour-marker="18"><td class="small">18:00</td><td class="major" data-hour="18"><div class="hour-block" data-offset="18"></div><div class="hour-block" data-offset="42"></div><div class="hour-block" data-offset="66"></div><div class="hour-block" data-offset="90"></div><div class="hour-block" data-offset="114"></div><div class="hour-block" data-offset="138"></div><div class="hour-block" data-offset="162"></div></td></tr><tr data-hour-marker="18"><td class="small"></td><td class="minor" data-hour="18.5"><div class="hour-block" data-offset="18.5"></div><div class="hour-block" data-offset="42.5"></div><div class="hour-block" data-offset="66.5"></div><div class="hour-block" data-offset="90.5"></div><div class="hour-block" data-offset="114.5"></div><div class="hour-block" data-offset="138.5"></div><div class="hour-block" data-offset="162.5"></div></td></tr><tr data-hour-marker="19"><td class="small">19:00</td><td class="major" data-hour="19"><div class="hour-block" data-offset="19"></div><div class="hour-block" data-offset="43"></div><div class="hour-block" data-offset="67"></div><div class="hour-block" data-offset="91"></div><div class="hour-block" data-offset="115"></div><div class="hour-block" data-offset="139"></div><div class="hour-block" data-offset="163"></div></td></tr><tr data-hour-marker="19"><td class="small"></td><td class="minor" data-hour="19.5"><div class="hour-block" data-offset="19.5"></div><div class="hour-block" data-offset="43.5"></div><div class="hour-block" data-offset="67.5"></div><div class="hour-block" data-offset="91.5"></div><div class="hour-block" data-offset="115.5"></div><div class="hour-block" data-offset="139.5"></div><div class="hour-block" data-offset="163.5"></div></td></tr><tr data-hour-marker="20"><td class="small">20:00</td><td class="major" data-hour="20"><div class="hour-block" data-offset="20"></div><div class="hour-block" data-offset="44"></div><div class="hour-block" data-offset="68"></div><div class="hour-block" data-offset="92"></div><div class="hour-block" data-offset="116"></div><div class="hour-block" data-offset="140"></div><div class="hour-block" data-offset="164"></div></td></tr><tr data-hour-marker="20"><td class="small"></td><td class="minor" data-hour="20.5"><div class="hour-block" data-offset="20.5"></div><div class="hour-block" data-offset="44.5"></div><div class="hour-block" data-offset="68.5"></div><div class="hour-block" data-offset="92.5"></div><div class="hour-block" data-offset="116.5"></div><div class="hour-block" data-offset="140.5"></div><div class="hour-block" data-offset="164.5"></div></td></tr><tr data-hour-marker="21"><td class="small">21:00</td><td class="major" data-hour="21"><div class="hour-block" data-offset="21"></div><div class="hour-block hour-select-selected" data-offset="45"></div><div class="hour-block hour-select-mod-del" data-offset="69"></div><div class="hour-block" data-offset="93"></div><div class="hour-block" data-offset="117"></div><div class="hour-block hour-select-selected" data-offset="141"></div><div class="hour-block hour-select-selected" data-offset="165"></div></td></tr><tr data-hour-marker="21"><td class="small"></td><td class="minor" data-hour="21.5"><div class="hour-block" data-offset="21.5"></div><div class="hour-block hour-select-selected" data-offset="45.5"></div><div class="hour-block hour-select-mod-del" data-offset="69.5"></div><div class="hour-block" data-offset="93.5"></div><div class="hour-block" data-offset="117.5"></div><div class="hour-block hour-select-selected" data-offset="141.5"></div><div class="hour-block hour-select-selected" data-offset="165.5"></div></td></tr><tr data-hour-marker="22"><td class="small">22:00</td><td class="major" data-hour="22"><div class="hour-block" data-offset="22"></div><div class="hour-block hour-select-selected" data-offset="46"></div><div class="hour-block hour-select-mod-del" data-offset="70"></div><div class="hour-block" data-offset="94"></div><div class="hour-block" data-offset="118"></div><div class="hour-block hour-select-selected" data-offset="142"></div><div class="hour-block hour-select-selected" data-offset="166"></div></td></tr><tr data-hour-marker="22"><td class="small"></td><td class="minor" data-hour="22.5"><div class="hour-block" data-offset="22.5"></div><div class="hour-block hour-select-selected" data-offset="46.5"></div><div class="hour-block hour-select-mod-del" data-offset="70.5"></div><div class="hour-block" data-offset="94.5"></div><div class="hour-block" data-offset="118.5"></div><div class="hour-block hour-select-selected" data-offset="142.5"></div><div class="hour-block hour-select-selected" data-offset="166.5"></div></td></tr><tr data-hour-marker="23"><td class="small">23:00</td><td class="major" data-hour="23"><div class="hour-block" data-offset="23"></div><div class="hour-block hour-select-selected" data-offset="47"></div><div class="hour-block hour-select-mod-del" data-offset="71"></div><div class="hour-block" data-offset="95"></div><div class="hour-block" data-offset="119"></div><div class="hour-block hour-select-selected" data-offset="143"></div><div class="hour-block hour-select-selected" data-offset="167"></div></td></tr><tr data-hour-marker="23"><td class="small"></td><td class="minor" data-hour="23.5"><div class="hour-block" data-offset="23.5"></div><div class="hour-block hour-select-selected" data-offset="47.5"></div><div class="hour-block hour-select-mod-del" data-offset="71.5"></div><div class="hour-block" data-offset="95.5"></div><div class="hour-block" data-offset="119.5"></div><div class="hour-block hour-select-selected" data-offset="143.5"></div><div class="hour-block hour-select-selected" data-offset="167.5"></div></td></tr></tbody></table></div></div></div>'),
a.put("/views/component/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()"><ol class="carousel-indicators" ng-show="slides.length > 1"><li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li></ol><div class="carousel-inner" ng-transclude></div><a class="left control" ng-style="{opacity: currentIndex === 0 ? 0.3 : 1}" ng-click="prev()" ng-show="slides.length > 1"><span class="fa fa-angle-left"></span></a> <a class="right control" ng-style="{opacity: currentIndex === (slides.length - 1) ? 0.3 : 1}" ng-click="next()" ng-show="slides.length > 1"><span class="fa fa-angle-right"></span></a></div>'),a.put("/views/component/change.display.currency.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title" id="myModalLabel">{{\'PM512\'|t}}</h4></div><div class="modal-body"><style>td, th{\n            padding: 5px;\n        }\n        td{\n            cursor: pointer;\n        }</style><table style="width: 100%"><tr><td ng-click="change(currObj.currency=\'AED\')"><a>AED</a></td><td ng-click="change(currObj.currency=\'ARS\')"><a>ARS $</a></td><td ng-click="change(currObj.currency=\'AUD\')"><a>AUD $</a></td></tr><tr><td ng-click="change(currObj.currency=\'BGN\')"><a>BGN лв</a></td><td ng-click="change(currObj.currency=\'BHD\')"><a>BHD BD</a></td><td ng-click="change(currObj.currency=\'BRL\')"><a>BRL R$</a></td></tr><tr><td ng-click="change(currObj.currency=\'CAD\')"><a>CAD $</a></td><td ng-click="change(currObj.currency=\'CHF\')"><a>CHF CHF</a></td><td ng-click="change(currObj.currency=\'CLP\')"><a>CLP $</a></td></tr><tr><td ng-click="change(currObj.currency=\'CNY\')"><a>CNY ¥</a></td><td ng-click="change(currObj.currency=\'CZK\')"><a>CZK Kč</a></td><td ng-click="change(currObj.currency=\'DKK\')"><a>DKK kr</a></td></tr><tr><td ng-click="change(currObj.currency=\'EGP\')"><a>EGP £</a></td><td ng-click="change(currObj.currency=\'EUR\')"><a>EUR €</a></td><td ng-click="change(currObj.currency=\'GBP\')"><a>GBP £</a></td></tr><tr><td ng-click="change(currObj.currency=\'HKD\')"><a>HKD $</a></td><td ng-click="change(currObj.currency=\'HRK\')"><a>HRK kn</a></td><td ng-click="change(currObj.currency=\'HUF\')"><a>HUF Ft</a></td></tr><tr><td ng-click="change(currObj.currency=\'IDR\')"><a>IDR Rp</a></td><td ng-click="change(currObj.currency=\'ILS\')"><a>ILS ₪</a></td><td ng-click="change(currObj.currency=\'INR\')"><a>INR ₨</a></td></tr><tr><td ng-click="change(currObj.currency=\'ISK\')"><a>ISK kr</a></td><td ng-click="change(currObj.currency=\'JOD\')"><a>JOD</a></td><td ng-click="change(currObj.currency=\'JPY\')"><a>JPY ¥</a></td></tr><tr><td ng-click="change(currObj.currency=\'KRW\')"><a>KRW ₩</a></td><td ng-click="change(currObj.currency=\'KWD\')"><a>KWD</a></td><td ng-click="change(currObj.currency=\'LBP\')"><a>LBP £</a></td></tr><tr><td ng-click="change(currObj.currency=\'MXN\')"><a>MXN $</a></td><td ng-click="change(currObj.currency=\'MYR\')"><a>MYR RM</a></td><td ng-click="change(currObj.currency=\'NOK\')"><a>NOK kr</a></td></tr><tr><td ng-click="change(currObj.currency=\'NZD\')"><a>NZD $</a></td><td ng-click="change(currObj.currency=\'PHP\')"><a>PHP Php</a></td><td ng-click="change(currObj.currency=\'PLN\')"><a>PLN zł</a></td></tr><tr><td ng-click="change(currObj.currency=\'QAR\')"><a>QAR ﷼</a></td><td ng-click="change(currObj.currency=\'RUB\')"><a>RUB руб</a></td><td ng-click="change(currObj.currency=\'SEK\')"><a>SEK kr</a></td></tr><tr><td ng-click="change(currObj.currency=\'SGD\')"><a>SGD $</a></td><td ng-click="change(currObj.currency=\'THB\')"><a>THB ฿</a></td><td ng-click="change(currObj.currency=\'TRY\')"><a>TRY ₤</a></td></tr><tr><td ng-click="change(currObj.currency=\'TWD\')"><a>TWD NT$</a></td><td ng-click="change(currObj.currency=\'USD\')"><a>USD $</a></td><td ng-click="change(currObj.currency=\'VND\')"><a>VND ₫</a></td></tr><tr><td ng-click="change(currObj.currency=\'ZAR\')"><a>ZAR R</a></td><td></td><td></td></tr></table></div>'),a.put("/views/component/connect.wechat.html",'<style>.minClass {\n    height: 0px;\n  }\n\n  .maxClass {\n    width: 100%;\n    height: 500px;\n  }</style><div style="padding: 0"><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'OB235\'|t}}</h4></div><div class="modal-body" style="padding: 0"><div class="videowrapper" style="width: 100%"><iframe src="https://open.weixin.qq.com/connect/qrconnect?appid=wx42732fed7d492892&redirect_uri=http%3A%2F%2Fwww.italki.cn%2Fsignin&response_type=code&scope=snsapi_login" id="printFrame1" name="printFrame1" style="width: 100%; border: 0px; solid: #000;margin:0 auto">111</iframe></div></div></div>'),a.put("/views/component/course.detail.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title text-ellipsis">{{course.title}}</h4></div><div class="modal-body padding-bottom"><kp-loading indicator="course"></kp-loading><div class="grid-gutter-margin-b"><ul class="profile_card list-inline"><li><div class="info"><h5>{{\'TP046\'|t}}<br><strong>{{course.language|t}}</strong></h5></div></li><li><div class="info"><h5>{{\'TP079\'|t}}<br><strong>{{course.session_count}}</strong></h5></div></li></ul><div class="clearfix"></div></div><div class="grid-gutter-margin-b"><strong>{{\'RS050\'|t}}</strong><p ng-bind-html="course.description|replaceLineToBr"></p></div><div><div class="schedule_in"><strong>{{\'TP039\'|t}}</strong><ul class="radio_stime"><li ng-repeat="item in course.price_obj_s">{{\'TS211\'|t|format:item.session_length*15}} - <span class="spPrice">${{item.session_price_usd|kpToUsd|number:2}} USD</span></li></ul></div><div class="schedule_in" ng-if="packages&&packages.length>0"><strong>{{\'TP040\'|t}}</strong><ul class="radio_stime"><li ng-repeat="item in packages">{{\'TS212\'|t|format:item.package_length:item.session_length*15}} - <span class="spPrice">${{item.package_price_usd|kpToUsd|number:2}} USD</span></li></ul></div></div></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()">{{\'C0064\'|t}}</button> <button class="btn btn-primary" ng-disabled="!canSchedule" ng-click="schedule(course.id,0,1);$close();">{{\'TS108\'|t}}</button></div>'),a.put("/views/component/course.list.modal.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'TS108\'|t}}</h4></div><div class="modal-body padding-bottom"><kp-course-selector courses="items" teacher-info="teacherInfo" onselect="onselect"></kp-course-selector></div><div class="modal-footer"><a type="button" class="btn btn-primary" ng-class="{disabled:disableNextStep()}" ng-click="requestSession()">{{\'C0077\'|t}}</a></div>'),a.put("/views/component/course.selector.html",'<div style="background:#f1f1f1; border-left:1px #ccc solid;border-top:1px #ccc solid;border-right:1px #ccc solid"><table class="table no-margin-b"><tr><td><strong>{{\'C0152\'|t}} / {{\'C0172\'|t}}</strong></td><td width="240"><strong>{{\'TP039\'|t}}</strong></td><td width="240"><strong>{{\'TP040\'|t}}</strong></td></tr></table></div><kp-loading indicator="courses"></kp-loading><div style="border:1px #ccc solid;height: 300px; overflow-y: auto; border-top:none"><table class="table no-margin-b" id="coursesTable"><tbody><tr ng-repeat="item in courses"><td ng-bind="decideTitle(item)"></td><td width="260"><div class="radio" ng-repeat="price in item.citems"><label ng-if="price.type==1"><input type="radio" name="course" ng-checked="price.checked" ng-click="selCourse(price)" class="px"> <span class="lbl text-lb"><span ng-bind="price.slength*15"></span> <span>minutes</span> - <span ng-bind="price.price"></span> USD</span></label></div></td><td width="240"><div class="radio" ng-repeat="price in item.citems"><label ng-if="price.type==2"><input type="radio" name="course" ng-checked="price.checked" ng-click="selCourse(price)" class="px"> <span class="lbl text-lb"><span ng-bind="price.length"></span> <span>X</span> <span ng-bind="price.slength*15"></span> <span>minutes</span> - <span ng-bind="price.price"></span> USD</span></label></div></td></tr><tr ng-if="teacherInfo.has_trial"><td><strong>{{\'TS215\'|t}}</strong><br><em class="red12">{{ teacherInfo.has_had_trial ? \'TS237\'.translate() : teacherInfo.trial_left_count == 0 ? \'TP334\'.translate() : \'TS238\'.translate().format(teacherInfo.trial_left_count) }} &nbsp; <a style="text-decoration:underline" href="http://support.italki.com/entries/21497255-What-are-Trial-Lessons-" target="_blank">{{\'C0170\'|t}}</a></em></td><td width="260"><div class="radio"><label><input name="course" type="radio" ng-click="selCourse({courseId:0,priceId:0,type:3,length:2,price:teacherInfo.trial_price})" ng-checked="teacherInfo.checked" ng-disabled="teacherInfo.has_had_trial||teacherInfo.trial_left_count<1"> <span class="lbl text-lb"><span>{{\'TS215\'|t}}</span> - <span>{{teacherInfo.trial_price}}</span> USD</span></label></div></td><td width="240"><select id="selectLan" class="form-control" ng-disabled="teacherInfo.has_had_trial||teacherInfo.trial_left_count<1" style="width: 220px" ng-model="trial.language"><option ng-repeat="item in teacherInfo.teaching_language_obj_s" value="{{ item.language }}" ng-selected="!$index">{{item.language|t}}</option></select></td></tr></tbody></table></div>'),a.put("/views/component/course.selector.v1.html",'<style>.session_nav div.layer ul li {\n    width: 50%;\n  }\n\n  .session_nav {\n    margin-bottom: 20px\n  }\n\n  div.course-item.active {\n    background: #5ebd5e;\n    color: white;\n  }\n\n  .course-check, .well:hover {\n    color: #3c763d;\n    box-shadow: 0px 0px 3px 1px rgba(0, 0, 0, .15);\n  }\n\n  .check {\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: none;\n    height: 25px;\n    width: 25px;\n    color: transparent;\n  }\n\n  .check i {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -9px;\n    margin-left: -8px;\n  }\n\n  .course-check .check {\n    background-color: #4cb64c;\n    color: #fff;\n  }\n  @media (min-width: 480px) and (max-width: 767px) {\n    .visible-phone{\n      display: inherit !important;\n    }\n  }\n\n  @media (max-width: 480px){\n    .checkout-phone-view1{\n      padding-bottom: 178px !important;\n    }\n  }</style><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="dismiss()">&times;</button><h4 class="modal-title"><a href="javascript:void(0);" ng-click="selector.gotoStep1();" ng-hide="selector.isFirstStep()||options.typee" style="display: inline-block;float: left"><i class="fa fa-angle-left text-lg"></i>&nbsp;&nbsp;</a> {{\'TS108\'|t}}</h4></div><kp-loading indicator="languages"></kp-loading><div class="modal-body no-padding-hr no-padding"><div class="tab-content tab-content-bordered no-border checkout-phone-view1" style="background: #efefef"><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first" ng-class="{current:selector.isFirstStep()}" ng-hide="options.typee" ng-click="selector.gotoStep1();"><div>{{\'KP417\'|t}}</div></li><li class="first" ng-class="{current:selector.isFirstStep()}" ng-show="options.typee"><div>{{\'KP417\'|t}}</div></li><li class="last" ng-class="{current:!selector.isFirstStep()}"><div>{{\'KP418\'|t}}</div></li></ul></div></div><div ng-hide="!selector.isFirstStep()"><div class="grid-gutter-margin-b"><div class="text-center"><h4>1. {{\'TP235\'|t}}</h4><div class="party-size-picker dtp-picker-selector select-native db" style="width: 100%; background: #fff"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none">{{(languageObj.language||\'C0061\')|t}}</a><select class="form-control" ng-model="languageObj" ng-options="lang.language|t for lang in languages" ng-change="applyFilter()"></select></div></div><div class="clearfix"></div></div><div><div class="text-center"><h4>2. {{\'TS250\'|t}}</h4><div class="panel loading-layout no-margin-b" style="height: auto;overflow-y: hidden;min-height: 350px"><div class="panel-body no-padding-vr" ng-if="hasPro"><h5 class="text-light-gray" ng-if="hasPro">{{\'M0105\'|t}}</h5><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-repeat="pro in courses|filter:proFilter" ng-click="chooseCourse(pro)" ng-class="{\'course-check\':selectedCourse.id == pro.id}"><div class=""><strong class="text-lb" ng-bind="pro.name"></strong><br><span class="text-muted" ng-bind-html="pro.description|subStrLen:200:\'...\'" style="display: inline-block;text-align: left"></span></div><div class="check"><i class="fa fa-check text-lb"></i></div></div></div><div class="panel-body no-padding-vr" ng-if="hasInformal"><hr class="no-padding no-margin" ng-if="hasPro"><h5 class="text-light-gray" ng-if="hasInformal">{{\'M0106\'|t}}</h5><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-repeat="informal in courses|filter:informalFilter" ng-class="{active:selectedCourse.id == informal.id}" ng-click="chooseCourse(informal)"><div class=""><strong class="text-lb" ng-bind="informal.name"></strong><br><span class="text-muted" ng-bind-html="informal.description|subStrLen:200:\'...\'"></span></div><div class="check"><i class="fa fa-check text-lb"></i></div></div></div><div class="panel-body no-padding-vr" ng-if="hasTrial"><hr class="no-padding no-margin" ng-if="hasInformal"><h5 class="text-light-gray" ng-if="hasTrial">{{\'TS026\'|t}}</h5><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-repeat="trial in courses|filter:{\'_type\':0}" ng-click="chooseCourse(trial)" ng-class="{active:selectedCourse._type == 0}"><div class=""><strong class="text-lb" ng-bind="trial.name"></strong></div><div class="check"><i class="fa fa-check text-lb"></i></div></div></div></div></div><div class="clearfix"></div></div></div><div ng-hide="selector.isFirstStep()"><div class="text-center"><h4>3. {{\'KP222\'|t}}</h4><div class="panel"><div class="panel-body no-padding-b"><div class="row"><div class="col-md-6 col-xs-6" ng-repeat="priceObj in prices"><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-class="{\'course-check\':selectCtrl(selectedPrice.id, priceObj.id, prices)}" ng-click="choosePrice(priceObj)">{{\'TS044\'|t|format: priceObj.length*15 }}<br><strong class="text-lb">${{ priceObj.price_usd|kpToUsd|number:2}} USD</strong><div class="check"><i class="fa fa-check text-lb"></i></div></div></div></div></div></div><h4>4. {{\'TP036\'|t}}</h4><div class="panel no-margin"><div class="panel-body no-padding-b" ng-if="selectedCourse._type!=0"><div class="row"><div class="col-md-6 col-xs-6"><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-class="{\'course-check\':!isPackage}" ng-click="chooseSingleLesson()">{{\'KP420\'|t}}<br><strong class="text-lb">${{ selectedPrice.price_usd|kpToUsd|number:2}} USD</strong><div class="check"><i class="fa fa-check text-lb"></i></div></div></div><div class="col-md-6 col-xs-6" ng-if="selectedPrice.packages"><div class="well yes-cursor cursor-over text-center is-relative" style="padding: 5px 10px" ng-click="choosePackage(selectedPrice.packages)" ng-class="{\'course-check\':isPackage}">{{\'TS044\'|t|format:selectedPrice.packages.length.toString()+\' x \'+(selectedPrice.length*15).toString()}}<br><strong class="text-lb">${{selectedPrice.packages.price_usd|kpToUsd|number:2}} USD</strong> <span class="is-absolute label label-danger text-up" style="right:-10px; top:-10px" ng-if="selectedPrice.packages.saved">{{\'KP421\'|t}} {{ selectedPrice.packages.saved }}</span><div class="check"><i class="fa fa-check text-lb"></i></div></div></div></div></div></div></div></div></div><div class="checkout-phone-view" style="box-shadow: 0px -1px 5px rgba(0,0,0,0.3)" ng-if="!selector.isFirstStep()"><div class="panel-body"><div class="row"><div class="col-md-7 col-xs-7"><div class="checkout-phone-border" style="padding: 5px 0"><h4 class="no-margin">{{\'VC103\'|t}}</h4><span class="text-lb" ng-bind="selectedCourse.name"></span><br><span class="text-muted">{{selectedCourse.language|t}}</span></div></div><div class="col-md-5 col-xs-5 text-center"><h5 class="no-margin">{{\'KP423\'|t}}</h5><strong class="text-lg">${{ totalPrice|kpToUsd|number:2 }}</strong> USD <button class="btn btn-block btn-success hidden-phone" ng-disabled="!selectedCourse" ng-click="selector.checkout()">{{\'KP422\'|t}}</button></div></div><button class="btn btn-block btn-success visible-phone" ng-disabled="!selectedCourse" ng-click="selector.checkout()">{{\'KP422\'|t}}</button></div></div></div>'),a.put("/views/component/course.time.selector.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'PB121\'|t}}</h4></div><div kp-old-calendar teacher="teacher" disabled-items="disabledItems" lesson-length="lessonLength" should-be-after-3-days="shouldBeAfter3Days" exclude-lesson-id="excludeLessonId" class="modal-body padding-bottom" selectable="true" ontimeupdate="ontimeupdate($item)"></div><div class="modal-footer"><span class="pull-left">{{\'KP212\'|t}} <mark>{{ currentUser.timezone_iana }} {{ currentUser.timezone_iana|timezoneOffset }}</mark></span> <button type="button" class="btn btn-default" ng-click="$dismiss()">{{\'C0056\'|t}}</button> <button type="button" class="btn btn-primary" ng-click="sure()" ng-class="{\'disabled\':!$$selected}">{{\'C0123\'|t}}</button></div>'),a.put("/views/component/course.time.selector.new.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'KP101\'|t}}</h4></div><div class="modal-body padding-bottom"><p class="text-center">{{\'KP212\'|t}}</p><kp-calendar-new teacher="teacher" interval="{{shouldBeAfter3Days?3:1}}" is-schedule="1" lesson-length="lessonLength" disabled-items="disabledItems" exclude-lesson-id="excludeLessonId" should-be-after-3-days="shouldBeAfter3Days" repeatable="repeatable" ontimeupdate="ontimeupdate($item)"></kp-calendar-new></div><div class="modal-footer" style="display: none"><span class="pull-left">{{\'KP212\'|t}} &nbsp;<mark>{{ currentUser.timezone_iana }} {{ currentUser.timezone_iana|timezoneOffset }}</mark></span><div class="pull-right" style="display: none"><button type="button" class="btn btn-default" ng-click="$dismiss()">{{\'TP121\'|t}}</button> <button type="button" class="btn btn-primary" ng-click="sure()" ng-class="{\'disabled\':!$$selected}">{{\'TS108\'|t}}</button></div></div>'),a.put("/views/component/delete.video.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'ST608\'|t}}</h4></div><div class="modal-body"><p class="grid-gutter-margin-b text-bg">{{\'ST609\'|t}}</p><p class="text-bg">{{\'ST610\'|t}}</p></div><div class="modal-footer"><button class="btn" ng-click="$dismiss();">{{\'C0064\'|t}}</button> <button class="btn btn-primary" ng-click="delThisVideo()"><span class="btn-txt">{{\'C0123\'|t}}</span></button></div>'),a.put("/views/component/email.not.active.model.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'UR154\'|t}}</h4></div><div class="modal-body"><div class="alert alert-success" ng-if="sendSucc">{{\'ST220\'|t|format:currentUser.email}}</div><div class="alert alert-success" ng-if="changeSucc">{{\'UR105\'|t}}</div><h4>{{\'UR145\'|t}}</h4><div class="note note-info no-border" ng-bind-html="\'UR141\'|t|format:currentUser.email"></div>{{\'UR139\'|t}}<ul class=""><li>{{\'UR138\'|t}}</li><li><a href="" ng-click="sendEmail()">{{\'UR137\'|t}}</a></li><li><a href="" ng-click="eFlag=1">{{\'UR136\'|t}}</a><div ng-show="eFlag"><p><div class="input-group"><input type="text" ng-model="newEmail" class="form-control" placeholder="{{\'C1013\'|t}}"> <span class="input-group-btn"><button class="btn" italki-click-with-spinner="save()" noact="1">{{\'C0045\'|t}}</button></span></div><span class="help-block" ng-if="error.ehave">{{\'UR018\'|t}}</span> <span class="help-block" ng-if="error.eformat">{{\'C1014\'|t}}</span> <span class="help-block" ng-if="error.esame">{{\'KP439\'|t}}</span></p></div></li></ul></div><div class="modal-footer"><button class="btn" ng-click="close()">{{\'PB106\'|t}}</button></div>'),a.put("/views/component/feedback.modal.html",'<form novalidate name="feedback_form" ng-submit="feedback_form.$valid&&confirm()" class="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TP146"></h4></div><div class="modal-body"><div class="form-group"><label class="control-label" for="feedback">{{ \'TP661\'|t }}</label><textarea id="feedback" class="form-control" ng-model="result.comment" placeholder="" name="feedback" required>\n      </textarea><span class="help-block" ng-if="feedback_form.$submitted&&(feedback_form.feedback.$error.required||result.comment.length<1||result.comment.length>1000)">{{\'ST155\'|t|format:1:1000}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="1000 - result.comment.length"></span></p></div></div><div class="modal-footer"><button type="button" class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div></form>'),a.put("/views/component/finance.transfer_itc_warn.html",'<div class="modal-body"><div class="note note-danger no-border no-margin"><h4 class="no-margin-t" translate="PM414"></h4><p class="text-danger">{{\'PM415\'|t}}</p><p><a class="text-info" ng-click="openWithdrawModal();$dismiss();">{{\'PM416\'|t}}</a></p><p>{{\'PM417\'|t}}</p></div></div><div class="modal-footer"><button class="btn btn-primary" ng-click="openTransferModal(2);$dismiss();"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div>'),a.put("/views/component/full.screen.loading.html",'<div ng-if="!indicator" style="position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background:rgba(0,0,0,0.8);\n    z-index:1001"><div style="width: 60px;\n  height: 60px;\n  position: absolute;\n  left: 50%;\n  margin: -30px;\n  top: 50%;\n  border-radius: 6px"><div class="kp-loading" style="width: 30px;height: 30px;margin:-15px"></div></div></div>'),a.put("/views/component/gmail.friends.selector.html",'<h5 style="text-align: center; margin-bottom: 15px">{{\'RP745\'|t}}</h5><form><div class="form-group has-feedback"><input type="text" class="form-control" placeholder="{{\'C0199\'|t}}" ng-model="q.name"> <i class="glyphicon glyphicon-search form-control-feedback"></i></div></form><table class="table table-striped"><thead><tr><th>Invite</th><th>Name</th><th>Email</th></tr></thead><tbody><tr ng-repeat="friend in friends|filter:q|orderBy:\'status\'"><td><label for="friend_{{ $index }}"><input type="checkbox" id="friend_{{ $index }}" ng-model="friend.checked" ng-disabled="friend.status>0"></label></td><td ng-show="friend.status==0">{{ friend.name||friend.email | cut:true:20:\' ...\'}}</td><td ng-show="friend.status>0"><span style="color: #ccc">{{ friend.name||friend.email | cut:true:20:\' ...\'}}</span></td><td ng-show="friend.status==0">{{friend.email| cut:true:30:\' ...\' }}</td><td ng-show="friend.status>0"><span style="color: #ccc">{{friend.email | cut:true:30:\' ...\'}}</span></td></tr></tbody></table>'),a.put("/views/component/gmail.friends.selector.modal.html",'<form novalidate ng-submit="confirm();"><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'RP721\'|t}}</h4></div><div class="modal-body padding-bottom" style="height: 500px;overflow-y: scroll"><kp-gmail-friends-selector friends="friends" select-action="selectAction" onselect="onselect(items)"></kp-gmail-friends-selector></div><div class="modal-footer"><div class="row"><div class="col-sm-8"><p style="text-align: left">{{\'RP723\'|t|format:items.length * 10}}</p></div><div class="col-sm-4"><button type="submit" class="btn btn-primary" ng-disabled="!items.length"><span class="btn-txt">{{\'RP724\'|t}}</span></button> <span ng-show="selectAction.select" style="float:right; display:block; text-align: center; width: 100px; padding: 10px 0"><a href="#" ng-click="selClick(false)">{{\'RP725\'|t}}</a></span> <span ng-show="!selectAction.select" style="float:right; display:block; text-align: center; width: 100px; padding: 10px 0"><a href="#" ng-click="selClick(true)">{{\'RP726\'|t}}</a></span></div></div></div></form>'),a.put("/views/component/invite.friend.html",""),a.put("/views/component/invite.friends.via.email.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="SR016"></h4></div><div class="modal-body"><div class="form-group"><span translate="RP007"></span><div><input type="text" readonly="readonly" class="form-control" ng-model="email.subject"></div></div><div class="form-group"><span translate="RP008"></span><div><textarea readonly="readonly" rows="10" class="form-control" ng-model="email.content">\n        </textarea></div></div></div><div class="modal-footer"><a href="mailto:?subject={{ email.subject }}&body={{ email.content }}" class="btn btn-primary">{{\'KP440\'|t}}</a></div>'),a.put("/views/component/kp.add.friend.html",'<div ng-hide="rcontent.isSubmit"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'CT101\'|t}}</h4></div><div class="modal-body padding-bottom"><p class="">{{\'KP441\'|t}}</p><p><strong>{{\'ML304\'|t}}</strong><br><textarea class="form-control" rows="4" ng-model="rcontent.message"></textarea><span ng-hide="isValidMsg(true)" id="spError" class="help-block">{{\'ST155\'|t|format:4:500}}</span></p></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="closeW()"><span class="btn-txt">{{\'C0064\'|t}}</span></button> <button type="button" ng-disbled="!isValidMsg(false)" ng-hide="rcontent.isSubmit" class="btn btn-primary" ng-click="addFriend()"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div></div><div ng-show="rcontent.isSubmit"><div class="sweet-alert showSweetAlert visible" data-custom-class="" data-has-cancel-button="true" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="true" data-animation="pop" data-timer="null" style="display: block"><div class="sa-icon sa-success" style="display: block"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2 ng-bind="msg"></h2><div class="sa-button-container"><button type="button" class="btn btn-lg" ng-click="closeW()"><span class="btn-txt">{{\'C0064\'|t}}</span></button> <button type="button" ng-disbled="!isValidMsg(false)" ng-hide="rcontent.isSubmit" class="btn btn-lg btn-primary" ng-click="addFriend()"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div></div></div>'),a.put("/views/component/kp.report.concern.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'PB010\'|t}}</h4></div><div ng-hide="noReport" class="modal-body padding-bottom"><div>{{\'KP444\'|t}}<br>{{\'KP445\'|t}} <a href="http://support.italki.com/forums/20787775-Reporting-a-Violation" target="_blank">{{\'KP446\'|t}}</a></div></div><div ng-show="noReport" class="modal-body padding-bottom"><div><p><span class="text-muted" ng-bind-html="\'SM204\'|t"></span></p><p><span class="text-muted">{{\'SM205\'|t}}.</span></p><p><strong>{{\'SM206\'|t}}</strong><br><textarea class="form-control" rows="4" ng-model="rcontent.desc"></textarea><span ng-hide="isValidDesc(true)" id="spError" class="help-block">{{\'ST155\'|t|format:4:500}}</span></p></div><div ng-show="rcontent.isSubmit"><p>{{\'KP447\'|t}}</p><p></p></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="closeW()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="button" ng-disbled="!isValidDesc(false)" ng-hide="!noReport || rcontent.isSubmit" class="btn btn-primary" italki-click-with-spinner="reportConcern()" smsg="{{\'C1001\'|t}}" fmsg="{{\'C1011\'|t}}"></button></div>'),a.put("/views/component/kp.send.message.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'C0079\'|t}}</h4></div><div class="modal-body modal-list"><div class="widget-notifications notifications-list loading-layout"><div class="widget-chat"><div class="panel-body"><div><p class="re_more"><a ng-click="gotomessage(messageItem.userid)" translate="MH046" href="javascript:void(0);"></a></p></div><div class="message" ng-repeat="msgItem in items track by $index" ng-if="items" ng-class="{\'\':msgItem.sender_obj.id!=messageItem.userid,\'right\':msgItem.sender_obj.id==messageItem.userid}"><img ng-src="{{msgItem.sender_obj|avatar:50 }}" alt="{{msgItem.sender_obj.nickname}}" class="message-avatar rounded" kp-fallback-avatar><div ng-mouseenter="mouseenterfordel(item)" ng-mouseleave="mouseleavefordel(item)" class="message-body"><span class="message-heading"><a ui-sref="user({id:msgItem.sender_obj.id})">{{msgItem.sender_obj.nickname}}</a> <strong>{{item.sender_obj.nickname}}</strong>&nbsp;{{msgItem.create_time|prettyDate}}</span><div class="message-text"><div><i class="fa fa-mail-reply text-light-gray" ng-if="msgItem.sender_obj.id!=messageItem.userid"></i> {{msgItem.content}}<br></div></div></div><a italki-scroll-to-here ng-if="$last"></a></div></div></div><div class="panel-body text-left" style="background: #f5f5f5"><p><textarea class="form-control" message_type="1" rows="3" ng-model="rcontent.message"></textarea><div class="text-muted">{{\'AS005\'|t}} <span ng-bind="remainLen()"></span></div><span ng-show="clickFlag && !isValidMsg(false)" class="help-block">{{\'ST155\'|t|format:1:2000}}</span></p><button type="button" class="btn btn-primary" ng-click="sendMsg()"><span class="btn-txt">{{\'C0047\'|t}}</span></button></div></div></div>'),a.put("/views/component/loading.html",'<div class="kp-loader" ng-if="!indicator"><div class="kp-loading" style="width: 30px;height: 30px"></div></div>'),a.put("/views/component/no.enough.itc.html",'<div class="sweet-alert showSweetAlert visible" data-custom-class="" data-has-cancel-button="true" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="true" data-animation="pop" data-timer="null" style="display: block"><div class="sa-icon sa-error" style="display: none"><span class="sa-x-mark"><span class="sa-line sa-left"></span> <span class="sa-line sa-right"></span></span></div><div class="sa-icon sa-warning pulseWarning" style="display: block"><span class="sa-body pulseWarningIns"></span> <span class="sa-dot pulseWarningIns"></span></div><div class="sa-icon sa-info" style="display: none"></div><div class="sa-icon sa-success" style="display: none"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2 ng-bind-html="\'TS313\'|t"></h2><div class="sa-button-container"><div class="row"><div class="col-sm-6"><button class="btn btn-primary btn-lg btn-block grid-gutter-margin-b" ui-sref="purchase" ng-click="$close()"><span class="btn-txt"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</span></button></div><div class="col-sm-6"><button class="btn btn-lg btn-block grid-gutter-margin-b" ng-click="$close()"><span class="btn-txt">{{\'C0064\'|t}}</span></button></div></div></div></div>'),
a.put("/views/component/notify.html",'<div class="kp-notifications"><kp-notify-item ng-repeat="msg in notifications"></kp-notify-item></div>'),a.put("/views/component/notify.item.html",'<div ng-click="removeMe(msg)" ng-class="msg.type" class="gr notify"><div class="info"><span ng-bind="msg.content"></span></div></div>'),a.put("/views/component/package.extension.modal.html",'<form novalidate name="package_extension_form" ng-submit="package_extension_form.$valid&&confirm()" class="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TP137"></h4></div><div class="modal-body"><p class="alert alert-warning" translate="TP434"></p><div class="form-group no-margin-hr"><label class="control-label">{{\'TP436\'|t}}</label><select id="months" name="months" ng-model="result.months" class="form-control"><option value="1">{{ 1|dateSeparator }}</option><option value="2">{{ 2|dateSeparator }}</option><option value="3">{{ 3|dateSeparator }}</option><option value="4">{{ 4|dateSeparator }}</option><option value="5">{{ 5|dateSeparator }}</option><option value="6">{{ 6|dateSeparator }}</option></select></div><div class="form-group no-margin-hr"><label for="reason" ng-model="result.reason" class="control-label">{{\'TP082\'|t}}</label><textarea id="reason" name="reason" required ng-model="result.reason" class="form-control" rows="5"></textarea><span class="help-block" ng-hide="!(package_extension_form.$submitted&&package_extension_form.reason.$error.required)">{{ \'TP340\'|translate }}</span></div></div><div class="modal-footer"><button type="button" class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div></form>'),a.put("/views/component/package.modify.modal.html",'<form novalidate name="package_modify_form" ng-submit="package_modify_form.$valid&&confirm()" class="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TP124"></h4></div><div class="modal-body"><table class="table table-bordered" width="100%"><thead><tr><td>{{\'TS030\'|t}}</td><td>{{\'TS031\'|t}}</td><td>{{\'TS041\'|t}}</td></tr></thead><tbody><tr ng-repeat="session in valid_session_obj_s"><td ng-bind="session.time_html"></td><td ng-bind-html="getStatusText(session)"></td><td><button type="button" class="btn-link" ng-if="session.package_session_status==\'0\'&&pack.user_type==\'2\'" ng-click="purge(session)" translate="TS672"></button> <button type="button" class="btn-link" ng-if="session.package_session_status==-1&&pack.user_type==\'2\'" ng-click="restore(session)">{{\'KP458\'|t}}</button></td></tr><tr ng-repeat="session in newSessions"><td ng-bind="session.time_user"></td><td translate="TS677"></td><td><button type="button" class="btn-link" ng-click="remove(session)">{{\'TS672\'|t}}</button></td></tr></tbody></table><button type="button" ng-hide="pack.user_type==\'2\'|| (newSessions.length+valid_session_obj_s.length)>=pack.sessions_total" class="btn btn-primary" ng-click="schedule()"><span class="btn-txt">{{\'TS108\'|t}}</span></button></div><div class="modal-footer"><button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'LN116\'|t}}</span></button> <button type="button" class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button></div></form>'),a.put("/views/component/password.input.html",'<form novalidate name="check_password_form" ng-submit="check_password_form.$valid&&confirm()" class="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body"><p>{{\'TS239\'|t}}</p><div class=""><input type="password" name="pwd" class="form-control" ng-model="password" maxlength="20" placeholder="{{\'UR205\'|t}}" required autofocus> <span class="help-block" ng-hide="!(check_password_form.$submitted&&check_password_form.pwd.$error.required)">{{ \'UR015\'|translate }}</span></div><p><a class="forgot-password" id="forgot-password-link" ng-click="reset=true" style="cursor: pointer">{{ "UR004"|t }}</a></p></div><div class="modal-footer"><button type="button" class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div></form>'),a.put("/views/component/password.not.set.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'MH266\'|t}}</h4></div><div class="modal-body"><div class="form-group"><label translate="ST153"></label><input type="password" class="form-control" ng-model="pwdObj.new_password"> <span class="help-block text-danger" ng-hide="validatePWD(pwdObj.new_password) || (pwdObj.new_password==\'\' && !btnPwd)">{{\'ST155\'|t|format:6:20}}</span></div><div class="form-group"><label translate="ST154"></label><input type="password" class="form-control" ng-model="pwdObj.new_password1"> <span class="help-block text-danger" ng-show="(pwdObj.new_password1!=pwdObj.new_password)&&pwdObj.new_password1.length>0">{{\'UR039\'|t}}</span></div><div ng-if="errorMsg" ng-bind="errorMsg" class="alert-warning form-group"></div></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button ng-disabled="!validatePWD(pwdObj.new_password) || pwdObj.new_password!=pwdObj.new_password1 || doPwd " class="btn btn-primary" italki-click-with-spinner="savePwd()" noact="1" stext="C0045"></button></div>'),a.put("/views/component/pending.purchase.fail.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'PM142\'|t}}</h4></div><div class="modal-body" style="min-height: 300px"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM514\'|t}}</h4><h4 class="text-center" style="font-weight: bold">{{\'PM515\'|t}}</h4><div class="text-center"><button class="btn btn-primary" ng-click="$close()">{{\'PM516\'|t}}</button></div></div>'),a.put("/views/component/pending.purchase.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'KP428\'|t}}</h4></div><div class="modal-body" style="min-height: 300px"><kp-loading indicator="done"></kp-loading><p class="text-center" style="margin-top: 180px;font-weight: bold">{{\'PM517\'|t}}...</p></div>'),a.put("/views/component/pending.purchase.pre.check.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body" style="min-height: 300px"><kp-loading indicator="done"></kp-loading><div ng-if="done"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM652\'|t}}</h4><p class="text-center">{{\'PM653\'|t}}</p><div class="text-center"><a ui-sref="{{uiSref}}" class="btn btn-primary" target="_blank" ng-click="submit()">{{\'PM659\'|t}}</a></div></div></div>'),a.put("/views/component/pending.purchase.pre.fail.html",'<div class="modal-header"><h4 class="modal-title"><p>{{\'PM518\'|t}}</p></h4></div><div class="modal-body" style="min-height: 300px" ng-switch="payError.type"><div ng-switch-when="TeacherNotAvailable"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM641\'|t}}</h4><p class="text-center">{{\'PM642\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="teachers" ng-click="$close()">{{\'M0000\'|t}}</a></div></div><div ng-switch-when="CourseChanged"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM643\'|t}}</h4><p class="text-center">{{\'PM644\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="teacher({id:payError.data.teacher_id})" ng-click="$close()">{{\'TP121\'|t}}</a></div></div><div ng-switch-when="TimesAvailable"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM645\'|t}}</h4><p class="text-center">{{\'PM646\'|t}}</p><div class="text-center"><a class="btn btn-primary" ng-click="$close()">{{\'PM647\'|t}}</a></div></div><div ng-switch-when="CommunicationChanged"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM649\'|t}}</h4><p class="text-center">{{\'PM648\'|t}}</p><div class="text-center"><a class="btn btn-primary" ng-click="$close()">{{\'PM650\'|t}}</a></div></div></div>'),a.put("/views/component/pending.purchase.pre.success.html",'<div class="modal-header"><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body" style="min-height: 300px" ng-switch="session_type" ng-if="!lesson_amount"><div ng-switch-when="1"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM654\'|t}}</h4><p class="text-center">{{\'PM655\'|t}}</p><div class="text-center"><a class="btn btn-primary" target="_blank" ng-click="goToDetail(id_list);$close()">{{\'TP143\'|t}}</a></div></div><div ng-switch-when="3"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM654\'|t}}</h4><p class="text-center">{{\'PM655\'|t}}</p><div class="text-center"><a class="btn btn-primary" target="_blank" ng-click="goToDetail(id_list);$close()">{{\'TP143\'|t}}</a></div></div><div ng-switch-when="2"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM654\'|t}}</h4><p class="text-center">{{\'PM655\'|t}}</p><div class="text-center"><a class="btn btn-primary" ng-click="goToDetailPackage(id_list);$close()">{{\'TP143\'|t}}</a></div></div></div><div class="modal-body" style="min-height: 300px" ng-if="lesson_amount"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM654\'|t}}</h4><p class="text-center">{{\'PM655\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="session.exploreViaType({viewType: \'waiting\'})" ng-click="$close()">{{\'TP158\'|t}}</a></div></div>'),a.put("/views/component/pending.purchase.success.modal.html",'<div class="modal-header"><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body" style="min-height: 300px" ng-switch="type"><div ng-switch-when="packageSuccess"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM660\'|t}}</h4><p class="text-center">{{\'PM661\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="session.package" ng-click="$close()">{{\'LN116\'|t}}</a></div></div><div ng-switch-when="lessonSuccess"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM654\'|t}}</h4><p class="text-center">{{\'PM662\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="session.explore" ng-click="$close()">{{\'LN116\'|t}}</a></div></div><div ng-switch-when="trialSuccess"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM663\'|t}}</h4><p class="text-center">{{\'PM662\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="session.explore" ng-click="$close()">{{\'LN116\'|t}}</a></div></div><div ng-switch-when="TeacherNotAvailable"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM641\'|t}}</h4><p class="text-center">{{\'PM642\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="teachers" ng-click="$close()">{{\'M0000\'|t}}</a></div></div><div ng-switch-when="CourseChanged"><h4 class="text-center" style="margin-top: 70px;font-weight: bold">{{\'PM643\'|t}}</h4><p class="text-center">{{\'PM644\'|t}}</p><div class="text-center"><a class="btn btn-primary" ui-sref="contacts.teacher" ng-click="$close()">{{\'PM664\'|t}}</a></div></div></div>'),a.put("/views/component/reason.modal.html",'<form novalidate name="reason_form" ng-submit="reason_form.$valid&&confirm()" class="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TP432"></h4></div><div class="modal-body"><div class="form-group"><label class="control-label" for="decline_reason">{{ \'TPC07\'|translate }}</label><textarea id="decline_reason" class="form-control" ng-model="result.reason" placeholder="" required name="reason">\n      </textarea><span class="help-block" ng-hide="!(reason_form.$submitted&&reason_form.reason.$error.required)">{{ \'TP340\'|t }}</span></div></div><div class="modal-footer"><button type="button" class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div></form>'),a.put("/views/component/redeemcode.html",'<form novalidate name="redeem_voucher_code_form" ng-submit="redeem_voucher_code_form.$valid&&confirm()"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'M0130\'|t}}</h4></div><div class="modal-body padding-bottom" ng-hide="!!success"><h5>{{\'VC204\'|t}}</h5><div class="form-group no-margin-hr no-padding-t no-border-t"><input type="text" class="form-control" placeholder="{{\'VC202\'|t}}" required ng-model="voucher.code" name="code"> <span class="help-block" ng-hide="!(redeem_voucher_code_form.$submitted&&redeem_voucher_code_form.code.$error.validVoucherCode)">{{ \'VC306\'|t }}</span> <span class="help-block" ng-hide="!error">{{(error.code)|translate }}</span> <span ng-show="voucherNeedPurchase">{{\'VC308\'|t}} <a href="" ng-click="goToPurchase()">www.italki.com/purchase</a></span></div></div><div class="modal-body padding-bottom" ng-if="success"><div class="alert alert-success"><h4 class="no-margin">${{success.credited_itc_usd|kpToUsd|number:2}}&nbsp;USD {{\'VC203\'|t}}</h4></div></div><div class="modal-footer" ng-hide="!!success"><button type="button" class="btn btn-default" ng-click="$dismiss()"><span class="btn-txt">{{\'C0064\'|t}}</span></button> <button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div></form>'),a.put("/views/component/schedule.session.modal.html",'<style>/* Tour Arrow */\n  div.layer ul li{background:#efefef url(/static/images/bg_tnav_r.gif) no-repeat right 50%;width:20%;float:left;text-align:center; list-style: none}\n  div.layer ul li div{padding:8px 0px 7px 0px;text-align:center;font-size:14px;margin:0px 13px 0px 0px;background:#efefef url(/static/images/bg_tnav_l.gif) no-repeat left 50%}\n  div.layer ul li.last{background:none}\n  div.des ul li{float:left;width:20%; color:#545454;list-style:none}\n  .em_div{}\n  .em_div.em_div2{}</style><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" translate="TS108"></h4></div><div class="modal-body"><div ng-show="!meta.is_my_teachers"><div class="layer"><p translate="TS251"></p><ul style="padding:0"><li><div translate="TS261"></div></li><li><div translate="TS263"></div></li><li><div translate="TS265"></div></li><li><div translate="TS267"></div></li><li class="last"><div translate="TS269"></div></li></ul><div style="clear: both"></div></div><div class="des"><ul style="padding:0"><li><div translate="TS262"></div></li><li><div translate="TS264"></div></li><li><div translate="TS266"></div></li><li><div translate="TS268"></div></li><li class="last"><div translate="TS270"></div></li></ul><div style="clear: both"></div></div><h4 translate="MH217"></h4></div><h5 class="no-margin-t" translate="MH228" ng-if="meta.is_my_teachers"></h5><div class="row em_div" ng-class="{\'em_div2\':meta.is_my_teachers}"><div class="col-md-4" ng-repeat="item in items"><div class="stat-panel"><div class="stat-cell bg-panel valign-middle card-item" style="overflow: hidden;padding:20px"><div class="item-icon"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><img title="{{item.nickname}}" ng-src="{{item|avatar:50}}" width="50" class="rounded" kp-fallback-avatar width="50" border="0"></div><div class="item-info"><span class="text-bg"><a ui-sref="teacher({id:item.id})" ng-click="$close()" ng-bind="item.nickname"></a>&nbsp;</span><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i><br><div style="width: 100%; overflow: hidden; white-space: nowrap"><p>{{"C0118"|t}}&nbsp;<span ng-repeat="item in item.language_obj_s|filter:{is_teaching:1}">{{item.language|t }}<span ng-hide="$last">,</span>&nbsp;</span></p></div><button class="btn btn-sm" ng-disabled="!item.is_schedule" italki-click-test teacher="{id:item.id}" pag-state="scheduleSessionModal" is-scope="isScope"><span class="btn-txt">{{\'C0117\'|t}}</span></button></div></div></div></div></div><p ng-if="meta.is_my_teachers"><span class="text-muted">{{\'TP258\'|t}} <a ui-sref="session.package" ng-click="$close()" translate="TP163"></span></p><div class="modal-footer"></div></div>'),a.put("/views/component/searchTmodal.html",'<div class="modal-body" style="padding-top: 20px!important;padding-left: 30px;padding-right: 30px"><h4 class="no-margin-t">{{\'C0066\'|t}}</h4><header class="filter grid-gutter-margin-b"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none">{{\'C0118\'|t}}<span ng-bind-html="filter.teach?\':&nbsp;\'+(filter.teach|t)+\'\':\'\'"></span></a><select ng-model="filter.teach" ng-change="getTagChild()" class="form-control" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><div move-element="show" ng-click="show=!show;" class="party-size-picker lg"><a href="" class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none;color: #333; padding-right: 50px"><div style="width:100%;overflow: hidden;white-space: nowrap">{{\'PB078\'|t}} <span ng-if="getAvailabilityCount()>0">:&nbsp;<strong>{{selAvailabilities}}</strong></span></div></a><div ng-show="show"><div class="dropdown-menu sub fade left in" style="display: block;width:100%"><kp-availability-time></kp-availability-time></div></div></div></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background: none">{{\'C0140\'|t}}<span ng-bind-html="filter.speak?\':&nbsp;\'+(filter.speak|t)+\'\':\'\'"></span></a><select class="form-control" ng-model="filter.speak" ng-options="m.v as (m.v==\'\'?\'C0027\':m.v)|t group by (m.t==1?\'Other\':(m.t==0?\'Popular\':\'\')) for m in lans"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><a class="select-label dtp-picker-selector-link small sub" tabindex="-1" style="background: none">{{\'C0003\'|t}}<span ng-bind-html="filter.country?\':&nbsp;\'+(filter.country|t)+\'\':\'\'"></span></a><select class="form-control" ng-model="filter.country" ng-options="m.v as m.l for m in countries"></select></div><div class="party-size-picker dtp-picker-selector select-native two db md grid-gutter-margin-b5" style="width:auto;border:none"><a class="select-label dtp-picker-selector-link small sub" tabindex="-1" style="background: none">{{\'TP065\'|t}} <span>{{filter.price_usd?(filter.price_usd==\'min-1000\'?\':&nbsp;$0-10 USD\':(filter.price_usd==\'1000-2000\'?\':&nbsp;$10-20 USD\':\':&nbsp;$20 USD +\')):\'\'}}</span></a><select class="form-control" ng-model="filter.price_usd"><option value="">Any</option><option value="min-1000">$0 - 10 USD</option><option value="1000-2000">$10 - 20 USD</option><option value="2001-max">$20 USD +</option></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><label class="checkbox-inline" style="width: 100%;padding: 12px 20px;margin-left: 18px"><input type="checkbox" ng-model="filter.is_native" class="px"> <span class="lbl">{{\'C0023\'|t}}</span></label></div><div class="party-size-picker dtp-picker-selector select-nativ two db grid-gutter-margin-b5" style="width:auto;border:none;padding-right: 20px"><label class="checkbox-inline" style="width: 100%;padding: 12px 20px;margin-left: 18px"><input type="checkbox" ng-model="filter.is_video" class="px"> <span class="lbl">{{\'ST708\'|t}}</span></label></div><div style="clear: both"></div></header><div class="row text-center"><div class="col-xs-6"><button type="button" class="btn btn-primary btn-lg" ng-click="setAllSearch();applyFilter();$close()"><span class="btn-txt">{{\'C0068\'|t}}</span></button></div><div class="col-xs-6"><button type="button" class="btn btn-lg col-xs-6" data-dismiss="modal" ng-click="$close()"><span class="btn-txt">{{\'C0064\'|t}}</span></button></div></div></div>'),a.put("/views/component/searchmodal.html",'<style>.grid-gutter-margin-b5{\n    margin-bottom: 5px!important;\n  }</style><div class="modal-body" style="padding-top: 20px!important"><h4 class="no-margin-t">{{\'C0066\'|t}}</h4><header class="filter grid-gutter-margin-b"><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none">{{\'CT009\'|t}}<span ng-bind-html="filter.speak?\':&nbsp;\'+(filter.speak|t)+\'\':\'\'"></span></a><select ng-model="filter.speak" class="form-control" ng-options="m.v as m.v|t group by (m.t==1?\'Other\':\'Popular\') for m in lans"><option value="all">{{\'C0027\'|t}}</option></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none">{{\'CT002\'|t}}<span ng-bind-html="filter.learn?\':&nbsp;\'+(filter.learn|t)+\'\':\'\'"></span></a><select ng-model="filter.learn" class="form-control" ng-options="m.v as m.v|t group by (m.t==1?\'Other\':\'Popular\') for m in lans"><option value="all">{{\'C0027\'|t}}</option></select></div><div class="party-size-picker dtp-picker-selector select-native two db md grid-gutter-margin-b5" style="width:auto;border:none"><a class="select-label dtp-picker-selector-link small sub" tabindex="-1" style="background: none">{{\'C0011\'|t}}<span ng-bind-html="filter.gender?\':&nbsp;\'+((filter.gender==\'\'?\'C0024\':(filter.gender==\'1\'?\'C0013\':\'C0012\')) |t)+\'\':\'\'"></span></a><select ng-model="filter.gender" class="form-control"><option value="" translate="C0024"></option><option value="2" translate="C0012"></option><option value="1" translate="C0013"></option></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><a class="select-label dtp-picker-selector-link small" tabindex="-1" style="background:none">{{\'C0003\'|t}}<span ng-bind-html="filter.country?\':&nbsp;\'+(filter.country|t)+\'\':\'\'"></span></a><select class="form-control" ng-model="filter.country" ng-options="m.v as m.l for m in countries"></select></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><label class="checkbox-inline" style="width: 100%;padding: 12px 20px;margin-left: 18px"><input type="checkbox" ng-model="filter.is_native" ng-true-value="\'1\'" ng-false-value="\'0\'" class="px"> <span class="lbl">{{\'CT091\'|t}}</span></label></div><div class="party-size-picker dtp-picker-selector select-native two db grid-gutter-margin-b5" style="width:auto;border:none"><input type="text" class="form-control ui-select-search" ng-model="filter.city" placeholder="{{\'C0015\'|t}}"></div><div class="clearfix"></div></header><div class="text-center row"><div class="col-xs-6"><button type="button" class="btn btn-primary btn-lg col-xs-6" ng-click="applyFilter();$close();"><span class="btn-txt">{{\'C0068\'|t}}</span></button></div><div class="col-xs-6"><button type="button" class="btn btn-lg col-xs-6" data-dismiss="modal" ng-click="$close()"><span class="btn-txt">{{\'C0064\'|t}}</span></button></div></div></div>'),a.put("/views/component/session.cannotchangetime.modal.html",'<div class="modal-header"><button type="button" class="close textlg" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'TS106\'|t}}</h4></div><div class="modal-body"><p ng-bind-html="\'TP441\'|t"></p></div>'),a.put("/views/component/session.confirm.modal.html",'<style>.grid-gutter-margin-b30{\n    margin-bottom:30px;\n  }\n\n  .rating-btn{\n    margin-right:10px;\n    width:100px;\n  }\n\n  .endorse-btn{\n    margin-right:10px;\n    margin-bottom:10px;\n  }\n  /*.rating-btn:active{*/\n  /*background-color:#428bca;*/\n  /*border-color:#428bca;*/\n  /*color:#ffffff;*/\n  /*}*/\n\n  .blue-btn{\n    background-color:#328DC8 !important;\n    border-color:#328DC8 !important;\n    color:#ffffff !important;\n  }\n\n  .green-btn{\n    background-color:#00BFBD !important;\n    border-color:#00BFBD !important;\n    color:#ffffff !important;\n  }</style><form novalidate class="modal-content" name="confirm_form" ng-submit="confirm_form.$valid&&confirm()" ng-if="true"><div class="modal-header"><a class="close" ng-click="$dismiss()">&times;</a><h4 class="modal-title">{{\'TP765\'|t}}</h4></div><div class="modal-body padding-bottom"><div class="rate-system"><div class="grid-gutter-margin-b text-center"><img class="rounded" style="width:120px" width="100" title="{{teacher_info.nickname}}" ng-src="{{teacher_info.avatar_file_name|avatar}}" kp-fallback-avatar></div><p class="text-bg text-center"><strong>{{\'SC200\'|t|format:session_count}}</strong></p><p class="text-bg text-center">{{\'SC201\'|t|format:teacher_info.nickname}}</p><div class="text-center" style="height:70px"><p><rating class="rate text-warning yes-cursor" name="rate" ng-model="evaluation.rate" state-on="\'fa fa-star text-xlg\'" state-off="\'fa fa-star-o text-xlg\'" required style="outline:none"></rating></p><p><span ng-switch="evaluation.rate"><span ng-switch-when="5" translate="TP451"></span> <span ng-switch-when="4" translate="TP452"></span> <span ng-switch-when="3" translate="TP453"></span> <span ng-switch-when="2" translate="TP454"></span> <span ng-switch-when="1" translate="TP455"></span></span><div class="help-block" style="top: -7px" ng-hide="!(confirm_form.$submitted&&confirm_form.rate.$error.required)">{{ \'TP321\'|t }}</div></p></div><p class="text-center text-bg" style="margin-bottom:15px">{{\'SC202\'|t|format:teacher_info.nickname}}</p><div class="text-center grid-gutter-margin-b30"><button class="btn endorse-btn" ng-class="{\'green-btn\':toggle}" ng-repeat="item1 in public_basic_tag_list" type="button" style="min-width: 25%" ng-click="toggle=!toggle;toggleGreen1(item1.tag_id)" id="{{item1.tag_id}}">{{item1.tag_code|t}}</button></div><div class="extra-rate"><div class="text-center grid-gutter-margin-b" ng-if="personal_tag_list.length>0"><p class="text-bg">{{\'SC203\'|t|format:teacher_info.nickname}}</p><div class="text-center grid-gutter-margin-b30"><button class="btn endorse-btn" ng-class="{\'blue-btn\':toggle}" ng-repeat="item2 in personal_tag_list" type="button" style="min-width: 25%" id="{{item2.tag_id}}" ng-click="toggle=!toggle;toggleBlue(item2.tag_id)">{{item2.tag_name}}</button></div></div><div class="text-center grid-gutter-margin-b" ng-if="public_normal_tag_list.length>0"><p class="text-bg">{{\'SC204\'|t|format:teacher_info.nickname}}</p><div class="text-center grid-gutter-margin-b30"><button class="btn endorse-btn" ng-class="{\'green-btn\':toggle}" ng-repeat="item3 in public_normal_tag_list" type="button" style="min-width: 25%" ng-click="toggle=!toggle;toggleGreen2(item3.tag_id)" id="{{item3.tag_id}}">{{item3.tag_code|t}}</button></div></div></div><p class="text-center text-bg" style="margin-bottom:15px">{{\'SC205\'|t|format:teacher_info.nickname}}</p><textarea placeholder="Write your review here..." ng-model="evaluation.comment" name="confirm" class="form-control" rows="5" ng-init="evaluation.comment=\'\'"></textarea><span class="help-block" ng-if="confirm_form.$submitted&&(evaluation.comment.length>1000)">{{\'AS122\'|t}}</span><p class="">{{\'AS005\'|t}}: <span ng-bind="1000 - evaluation.comment.length"></span></p></div></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button class="btn btn-primary" type="submit"><span class="btn-txt">{{\'LN116\'|t}}</span></button></div></form>'),a.put("/views/component/session.submit.problem.2.html",'<form novalidate name="raise_package_session_problem_form" ng-submit="raise_package_session_problem_form.$valid&&confirm()"><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="M0103"></h4></div><div class="modal-body"><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current" style="width: 33%"><div>{{\'TS096\'|t}}</div></li><li style="width: 34%"><div>{{\'TS097\'|t}}</div></li><li class="last" style="width: 33%"><div>{{\'TS098\'|t}}</div></li></ul></div></div><div class="note note-info no-border">{{\'TP281\'|t}}{{\'TP294\'|t}}</div><div class="form-group no-margin-hr"><label class="control-label">{{\'TP280\'|t}}</label><select ng-model="problem.reason" class="form-control" required name="reason"><option value="" translate="TP317"></option><option value="3" translate="TP664"></option><option value="1" translate="TP603"></option><option value="2" translate="TP602"></option><option value="100" translate="TP607"></option></select></div><div class="help-block" ng-hide="!(raise_package_session_problem_form.$submitted&&raise_package_session_problem_form.reason.$error.required)">{{ \'TP317\'.translate() }}</div><div class="form-group no-margin-hr"><label>{{\'TP293\'|t}} (optional)</label><textarea rows="8" class="form-control" ng-model="problem.msg"></textarea></div><hr><div class="form-group no-margin-hr" style="margin-bottom: 0px"><label>{{\'TP282\'|t}}</label><div class="radio"><label for="optionsRadios1"><input type="radio" name="optionsRadios" id="optionsRadios1" value="0" class="px" ng-model="problem.refund"> <span class="lbl">{{\'TP599\'|t}}</span></label></div><div class="radio"><label for="optionsRadios2"><input type="radio" name="optionsRadios" id="optionsRadios2" ng-value="session.session_price_usd" class="px" ng-model="problem.refund"> <span class="lbl">{{\'TP598\'|t}}</span></label></div></div><div class="help-block" ng-hide="!noRedund||problem.refund">{{\'TP317\'.translate()}}</div><div class="body-footer"><p><button ng-click="$dismiss()" class="btn"><span class="btn-txt">{{\'C0056\'|t}}</span></button></p><p><button type="submit" class="btn btn-primary"><span class="btn-txt">{{\'C0123\'|t}}</span></button></p></div></div></form>'),a.put("/views/component/session.submit.problem.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="M0103"></h4></div><div class="modal-body padding-bottom"><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current" style="width: 33%"><div>{{\'TS096\'|t}}</div></li><li style="width: 34%"><div>{{\'TS097\'|t}}</div></li><li class="last" style="width: 33%"><div>{{\'TS098\'|t}}</div></li></ul></div></div><div class="note note-info no-border">{{\'TP281\'|t}}{{\'TP294\'|t}}</div><div class="form-group no-margin-hr"><label class="control-label">{{\'TP280\'|t}}</label><select ng-model="problem.reason" ng-change="onReasonChange()" class="form-control"><option value="" translate="TP317"></option><option value="3" translate="TP664"></option><option value="1" translate="TP603"></option><option value="2" translate="TP602"></option><option value="100" translate="TP607"></option></select></div><div class="form-group no-margin-hr"><label>{{\'TP293\'|t}} (optional)</label><textarea rows="8" class="form-control" ng-model="problem.msg"></textarea></div><hr><div class="form-group no-margin-hr"><label>{{\'TP282\'|t}}</label><select ng-options="option.t for option in options" ng-model="problem.answer" ng-change="onAnswerChange()" class="form-control"><option value="" translate="TP317" selected="selected"></option></select></div><div class="form-group no-margin-hr" ng-hide="!showMoney"><label>{{\'TP283\'|t}}</label><ul class="list-inline"><li style="padding-right: 0px">$</li><li style="padding-right: 0px"><input type="text" ng-model="problem.money" class="form-control" style="width: 60px" ng-keypress="input_keypress($event)"></li><li style="padding-left: 0px">USD</li></ul><div class="help-block" ng-show="noMoney&&!error.money">{{\'TP283\'|t}}</div><div class="help-block" ng-hide="!error.money" ng-bind="error.money"></div></div></div><div class="modal-footer"><button ng-click="$dismiss()" class="btn"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button ng-click="confirm()" class="btn btn-primary" ng-disabled="error"><span class="btn-txt">{{\'C0123\'|t}}</span></button></div>'),
a.put("/views/component/setting.withdraw.addoredit.alipay.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'PM128\'|t}}: {{methodCode|t}}</h4></div><div class="modal-body padding-bottom"><div class="form-group no-margin-hr"><label class="control-label">{{\'PM212\'|t}}</label><input id="txt_CardID" type="text" name="email" class="form-control" ng-model="data.account"> <span ng-show="error.data.account" class="help-block">{{\'C3020\'|t}}</span> <span class="text-muted">{{\'C0127\'|t}}: xxx@yyy.com or 13912345678</span></div><div class="note note-warning no-border"><p>通过支付宝申请提现的教师，须真实提供以下信息，并由italki的中国子公司按《中华人民共和国个人所得税法》相关条款规定向当地税务部门申报劳务报酬个人所得税。<a href="http://support.italki.com/hc/zh-cn/articles/214419597" target="_blank">了解更多</a></p><h3>请用中文填写以下信息</h3><div class="row"><div class="col-sm-6"><div class="form-group no-margin-hr"><label class="control-label">姓名（须与身份证件的上一致）</label><input type="text" class="form-control" ng-model="data.name" ng-disabled="isEdit"> <span ng-show="error.data.name" class="help-block">{{\'ST155\'|t|format:1:50}}</span></div></div><div class="col-sm-6"><div class="form-group no-margin-hr"><label class="control-label">身份证号码（非中国国籍请指明国籍并提供护照号码）</label><input type="text" class="form-control" ng-model="data.id_no" ng-disabled="isEdit"> <span ng-show="error.data.id_no" class="help-block">{{\'ST155\'|t|format:1:50}}</span></div></div><div class="col-sm-6"><div class="form-group no-margin-hr"><label class="control-label">联系地址</label><input type="text" class="form-control" ng-model="data.address"> <span ng-show="error.data.address" class="help-block">{{\'ST155\'|t|format:1:200}}</span></div></div><div class="col-sm-6"><div class="form-group no-margin-hr"><label class="control-label">联系电话</label><input type="text" class="form-control" ng-model="data.phone_no"> <span ng-show="error.data.phone_no" class="help-block">{{\'ST155\'|t|format:1:200}}</span> <span ng-show="error.data.phoneFormat" class="help-block">检查电话号码</span></div></div></div></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ST229\'|t}}</label><input type="password" maxlength="20" class="form-control" ng-model="data.pwd" placeholder="{{\'ST229\'|t}}"> <span ng-show="error.data.pwd" class="help-block">{{\'UR015\'|t}}</span></div></div><div class="modal-footer"><span ng-show="error.data.pwd2" style="color: Red"><br>{{\'ST231\'|t}}</span> <button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button class="btn btn-primary" ng-click="submit()" ng-disabled="processing"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div>'),a.put("/views/component/setting.withdraw.addoredit.banktransfer.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'PM039\'|t}}: {{\'PM032\'|t}}</h4></div><div class="modal-body padding-bottom"><style>ul.list_disc li{\n            list-style: disc outside none;\n            margin-left: 20px;\n            font-size: 110%;\n            padding: 0px;\n            color: #545454;\n        }\n        .des_txt{\n            text-decoration: none;\n            font-size: 13px;\n            line-height: 150%;\n            color: #545454;\n            font-weight: bold;\n        }</style><span class="des_txt">{{\'PM500\'|t}}</span><ul class="list_disc"><li>{{\'PM501\'|t}}</li><li>{{\'PM502\'|t}}</li><li>{{\'PM503\'|t}}</li><li style="font-weight: bold">{{\'PM504\'|t}}</li></ul><table class="table table-bordered"><tr><td style="width: 31%;vertical-align: inherit">{{\'PM491\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><ui-select style="border: 1px solid #ccc" ng-model="uiItems" theme="bootstrap" on-select="uiSelectedCountry($item)"><ui-select-match placeholder="{{\'C0061\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0061\'|t)"></span></ui-select-match><ui-select-choices repeat="ct in countries"><div ng-bind-html="(ct.v?ct.v:ct.name)|t"></div></ui-select-choices></ui-select><span ng-show="error.data.country" class="help-block">{{\'PM505\'|t}}</span></td></tr><tr><td style="vertical-align: inherit">{{\'PM492\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.city"> <span ng-show="error.data.bank_city" class="help-block">{{\'ST155\'|t|format:1:50}}</span></td></tr><tr><td style="vertical-align: inherit">{{\'PM493\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.bank_name"> <span ng-show="error.data.bank_name" class="help-block">{{\'ST155\'|t|format:1:200}}</span></td></tr><tr><td>{{\'PM506\'|t}}</td><td><input type="text" class="text allwid form-control" ng-model="data.bank_address"></td></tr><tr><td>{{\'PM495\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.bank_swift_code"> <span ng-show="error.data.bank_swift_code" class="help-block">{{\'ST155\'|t|format:1:50}}</span></td></tr><tr><td>{{\'PM496\'|t}}<span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.account_number"> <span ng-show="error.data.account_number" class="help-block">{{\'ST155\'|t|format:5:50}}</span></td></tr><tr><td style="vertical-align: inherit">{{\'PM497\'|t}}<span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.user_name"> <span ng-show="error.data.user_name" class="help-block">{{\'ST155\'|t|format:1:50}}</span></td></tr><tr><td style="vertical-align: inherit">{{\'PM498\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.user_address"> <span ng-show="error.data.user_address" class="help-block">{{\'ST155\'|t|format:1:225}}</span></td></tr><tr><td>{{\'PM507\'|t}}</td><td>{{\'PM508\'|t}}<br><textarea class="textarea allwid form-control" rows="5" ng-model="data.other"></textarea></td></tr></table><div class="form-group no-margin-hr"><label class="control-label">{{\'ST229\'|t}}</label><input type="password" maxlength="20" class="form-control" ng-model="data.pwd" placeholder="{{\'ST229\'|t}}"> <span ng-show="error.data.pwd" class="help-block">{{\'UR015\'|t}}</span></div></div><div class="modal-footer"><span ng-show="error.data.pwd2" style="color: Red"><br>{{\'ST231\'|t}}</span> <button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button class="btn btn-primary" ng-click="submit()" ng-disabled="processing"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div>'),a.put("/views/component/setting.withdraw.addoredit.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'PM128\'|t}}: {{methodCode|t}}</h4></div><div class="modal-body padding-bottom"><div class="form-group no-margin-hr"><label class="control-label">{{\'PM212\'|t}}</label><input id="txt_CardID" type="text" name="email" class="form-control" ng-model="data.account"> <span ng-show="error.data.account" class="help-block">{{\'C3020\'|t}}</span> <span class="text-muted">{{\'C0127\'|t}}: {{example}}</span></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ST229\'|t}}</label><input type="password" maxlength="20" class="form-control" ng-model="data.pwd" placeholder="{{\'ST229\'|t}}"> <span ng-show="error.data.pwd" class="help-block">{{\'UR015\'|t}}</span></div></div><div class="modal-footer"><span ng-show="error.data.pwd2" style="color: Red"><br>{{\'ST231\'|t}}</span> <button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button class="btn btn-primary" ng-click="submit()" ng-disabled="processing"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div>'),a.put("/views/component/setting.withdraw.banktransferinfo.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'PM039\'|t}}: {{\'PM032\'|t}}</h4></div><div class="modal-body padding-bottom"><table class="table table-bordered"><tr><td>{{\'PM491\'|t}}</td><td>{{item.country|t}}</td></tr><tr><td>{{\'PM492\'|t}}</td><td>{{item.city}}</td></tr><tr><td>{{\'PM493\'|t}}</td><td>{{item.bank_name}}</td></tr><tr><td>{{\'PM494\'|t}}</td><td>{{item.bank_address}}</td></tr><tr><td>{{\'PM495\'|t}}</td><td>{{item.bank_swift_code}}</td></tr><tr><td>{{\'PM496\'|t}}</td><td>{{item.account_number}}</td></tr><tr><td>{{\'PM497\'|t}}</td><td>{{item.user_name}}</td></tr><tr><td>{{\'PM498\'|t}}</td><td>{{item.user_address}}</td></tr><tr><td>{{\'PM499\'|t}}</td><td>{{item.other}}</td></tr></table></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0064\'|t}}</span></button></div>'),a.put("/views/component/share.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'C3008\'|t}}</h4></div><div class="modal-body"><h5>{{\'RP004\'|t}}</h5><div kp-move-addthis-to-here></div></div>'),a.put("/views/component/teacher.apply.after.html",'<div class="modal-body padding-bottom" ng-hide="!!success"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">×</button><h3>Your application has been approved!</h3><p>Congratulations! Your application to teach / tutor on italki has been approved.<br>However, your Teacher / Tutor Profile is not complete yet.</p><div class="panel no-border"><div class="panel-body"><p>You need to input the following information.</p><ul class="list-unstyled"><li><i class="fa" ng-class="{\'fa-check\':has_course,\'fa-close\':!has_course}"></i> <a ng-click="step1()">Description of your language services</a></li><li><i class="fa" ng-class="{\'fa-check\':has_schedule_time,\'fa-close\':!has_schedule_time}"></i> <a ng-click="step2()">Your time schedule</a></li><li><i class="fa" ng-class="{\'fa-check\':has_payment_information,\'fa-close\':!has_payment_information}"></i> <a ng-click="step3()">Your payment information</a></li></ul></div></div><ul class="grid-gutter-margin-b"><li>Once that is done, you\'ll be able to offer classes to students on italki!</li><li>Finishing your profile should only take a few minutes.</li></ul><div class="text-center"><button class="btn btn-lg btn-primary" ng-click="closeMe()">Continue</button></div></div>'),a.put("/views/component/teacher.profile.survey.html",'<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><iframe ng-src="{{survey_url}}" width="700" height="600" frameborder="0" allowtransparency="true" id="myframe"></iframe>'),a.put("/views/component/test.notification.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">Notification Test</h4></div><div class="modal-body"><ul class="list-unstyled text-center"><li class="padding-sm-vr"><p>1.Make sure italki.com is allowed to play sounds in your browser window</p><p>2.Adjust the volume of your computer</p><button class="btn btn-primary" ng-click="playOrStopSound();">Start/Stop Notification Sound</button></li><li class="padding-sm-vr"><label><input type="checkbox" ng-model="desktop_noti"> Enable Desktop Notification</label><button class="btn btn-primary" ng-click="sendTestNotification()">Show Desktop Notification</button></li><li class="padding-sm-vr"><a href="http://support.italki.com/hc/en-us/sections/201133418-Instant-Tutoring" target="_blank">FAQ: Instant tutoring</a></li></ul><style>@media (max-width: 767px){\n    .modal-open {\n      overflow: hidden;\n      position: static;\n    }\n  }</style></div>'),a.put("/views/component/time.schedule.new.html",'<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'PB121\'|t}}</h4></div><div class="modal-body"><div class="checkout-phone-view2"><p class="text-center">{{\'KP212\'|t}}</p><kp-calendar-new teacher="teacher" interval="1" is-schedule="1" selectable="1"></kp-calendar-new></div></div><div class="modal-footer hidden-phone"><span class="pull-left" style="display: none">{{\'KP212\'|t}} <mark>{{ $root.currentUser.timezone }} {{ $root.currentUser.timezone_iana|timezoneOffset }}</mark></span> <button type="button" class="btn btn-default" ng-click="go(teacher.id);"><span class="btn-txt">{{\'TP121\'|t}}</span></button> <button type="button" class="btn btn-primary" italki-click-test pag-state="findTeacherSchedule" teacher="teacher" is-scope="isScope" ng-disabled="!currentUser||currentUser.id==teacher.id||!canSchedule"><span class="btn-txt">{{\'TS108\'|t}}</span></button></div><div class="checkout-phone-view visible-phone"><div class="panel-body"><span class="pull-left" style="display: none">{{\'KP212\'|t}} <mark>{{ $root.currentUser.timezone }} {{ $root.currentUser.timezone_iana|timezoneOffset }}</mark></span> <button type="button" class="btn btn-default" ng-click="go(teacher.id);"><span class="btn-txt">{{\'TP121\'|t}}</span></button> <button type="button" class="btn btn-primary" italki-click-test pag-state="findTeacherSchedule" teacher="teacher" is-scope="isScope" ng-disabled="!currentUser||currentUser.id==teacher.id||!canSchedule"><span class="btn-txt">{{\'TS108\'|t}}</span></button></div></div></div>'),a.put("/views/component/unverified.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'UR154\'|t}}</h4></div><div class="modal-body"><div class="alert alert-success">{{\'ST220\'|t}}</div><div class="alert alert-success">{{\'UR105\'|t}}</div><h4>{{\'UR155\'|t}}</h4><div class="note note-info no-border">{{\'UR141\'|t}}</div>{{\'UR139\'|t}}<ul class=""><li>{{\'UR138\'|t}}</li><li><a href="">{{\'UR137\'|t}}</a></li><li><a href="">{{\'UR136\'|t}}</a><div><input type="text" class="form-control" placeholder="{{\'C10103\'|t}}"> <span class="help-block">{{\'UR018\'|t}}</span> <button class="btn btn-primary">{{\'C0045\'|t}}</button> <button class="btn">{{\'C0056\'|t}}</button></div></li></ul></div><div class="modal-footer"><button class="btn">{{\'PB106\'|t}}</button></div>'),a.put("/views/component/update.itc.modal.html",'<form name="change_itc_form" ng-submit="confirm()" novalidate><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TS115"></h4></div><div class="modal-body"><div class="form-inline"><div class="form-group">$ <input type="text" class="form-control" name="itc" ng-model="params.newValue" style="width: 60px" ng-keypress="input_keypress($event)" ng-init="params.newValue = (params.oldValue/100)" required min="4" max="80"></div><div class="form-group">USD</div></div><div class="form-group"><span class="help-block" ng-if="params.newValue<4||params.newValue>80">{{ "TS330"|t|format:"4.00":"80.00"}}</span></div></div><div class="modal-footer"><button ng-click="$dismiss()" class="btn"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button type="submit" class="btn btn-primary" ng-disabled="params.newValue<4||params.newValue>80"><span class="btn-txt">{{\'C0123\'|t}}</span></button></div></form>'),a.put("/views/component/user.must.item.first.html",'<div class="onboading-group-b-c"><form ng-if="step==\'fb\'" role="form" name="myFormFb" style="height: 100%" ng-submit="doneFb(myFormFb.$valid&&unable)"><div class="modal-body padding-bottom phone-margin"><div class="text-center"><div class="profile-img-holder"><img ng-src="{{ User_obj.auth_info.avatar_url }}" width="100%" class="rounded yes-cursor img img-responsive" title="{{\'TP122\'|t}}" kp-fallback-avatar></div><h2>{{\'C0082\'|t}}!{{User_obj.auth_info.nick_name}}</h2><h5>{{\'MH239\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%"><li data-target="#wizard-example-stepfb" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div class="form-group" style="margin-bottom: 4px"><i class="fa fa-envelope" style="font-size:80%;position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input ng-class="{false: \'input-invalid\', true: \'\'}[!Mailerror]" style="text-indent: 20px" class="form-control" type="text" placeholder="{{\'OB221\'|t}}" ng-model="User_obj.email" ng-required="true" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i"></div><p ng-if="Mailerror.type==\'AccountEmailExist\'" style="font-size: 12px;color: #CB242B">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'AccountEmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p></div><div class="col-md-6"><span class="text-muted">{{\'OB223\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div class="form-group"><i class="fa fa-lock" style="position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input style="text-indent: 20px" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="User_obj.password" ng-required="true" maxlength="20" minlength="6"></div></div><div class="col-md-6"><span class="text-muted">{{\'OB220\'|t}}</span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-primary btn-lg" ng-disabled="!User_obj.password||!User_obj.email||unable" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div></form><form ng-if="step==\'wechat\'" role="form" name="myFormWe" style="height: 100%" ng-submit="doneWechat(myFormWe.$valid)"><div class="modal-body padding-bottom phone-margin"><div class="text-center"><div class="profile-img-holder"><img ng-src="{{ Wechat_User_obj.avatar_url }}" width="100%" class="rounded yes-cursor img img-responsive" title="{{\'TP122\'|t}}" kp-fallback-avatar></div><h2>{{\'C0082\'|t}} {{Wechat_User_obj.nickname}}!</h2><h5>{{\'MH239\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%"><li data-target="#wizard-example-stepfb" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div class="form-group" style="margin-bottom: 4px"><i class="fa fa-envelope" style="font-size:80%;position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input ng-class="{false: \'input-invalid\', true: \'\'}[!Mailerror]" style="text-indent: 20px" class="form-control" type="text" placeholder="{{\'OB221\'|t}}" ng-model="Wechat_User_obj.email" ng-required="true" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i"></div><p ng-if="Mailerror.type==\'AccountEmailExist\'" style="font-size: 12px;color: #CB242B">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'AccountEmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p></div><div class="col-md-6"><span class="text-muted">{{\'OB223\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div class="form-group"><i class="fa fa-lock" style="position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input style="text-indent: 20px" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="Wechat_User_obj.password" ng-required="true" maxlength="20" minlength="6"></div></div><div class="col-md-6"><span class="text-muted">{{\'OB220\'|t}}</span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-primary btn-lg" ng-disabled="myFormWe.$invalid ||wechatUnable" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div></form><form ng-if="step==1" role="form" name="myFormFb" style="height: 100%" ng-submit="doneFb1(myFormFb.$valid)"><div class="modal-body padding-bottom phone-margin"><div class="text-center"><div class="profile-img-holder"><img ng-src="{{ currentUser|avatar:\'50\' }}" width="100%" class="rounded yes-cursor img img-responsive" title="{{\'TP122\'|t}}" kp-fallback-avatar></div><h2>{{\'C0082\'|t}} {{user.nickname}}!</h2><h5>{{\'MH239\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%"><li data-target="#wizard-example-stepfb" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div ng-hide="emailDiv"><i class="fa fa-facebook-official" style="position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <i ng-click="emailDiv=!emailDiv" class="fa fa-pencil yes-cursor" style="position:absolute;text-indent:5px; right:20px; margin-top:8px"></i> <input placeholder="{{NewObj.email}}" style="text-indent: 20px" type="text" class="form-control" readonly="readonly"></div><div ng-show="emailDiv"><i class="fa fa-facebook-official" style="position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input name="fb_email" style="text-indent: 20px" type="text" class="form-control" ng-value="NewObj.email" ng-model="NewObj.email" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" ng-required="true" ng-blur="checkEmail()" ng-keyup="checkEmail()"><p ng-if="Mailerror.type==\'EmailExist\'" style="font-size: 12px;color: #CB242B">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'EmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p><p class="help-word" ng-show="myFormFb.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb.mail]">{{\'ST318\'|t}}</p></div></div><div class="col-md-6"><span class="text-muted" ng-bind-html="\'OB219\'|t"></span></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-6"><div class="form-group"><i class="fa fa-lock" style="position:absolute;text-indent:5px;margin: 8px 0px 0px 5px"></i> <input name="fb_password" style="text-indent: 20px" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="NewObj.password" ng-required="true" maxlength="20" minlength="6" ng-blur="setPassword1()" ng-keyup="setPassword1()"><p class="help-word" ng-show="myFormFb.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb.mail]">{{\'ST318\'|t}}</p></div></div><div class="col-md-6"><span class="text-muted">{{\'OB220\'|t}}</span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-primary btn-lg with-spinner" ng-disabled="myFormFb.$invalid" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div></form><form ng-if="step==2&&!lanset" role="form" name="myForm" style="height: 100%" ng-submit="done(myForm.$valid)"><div class="modal-body padding-bottom phone-margin"><div class="text-center"><h2>{{\'C0082\'|t}} {{user.nickname}}!</h2><h5>{{\'MH239\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="(user&&user.fb_user)||(user&&user.wechat_user)"><li data-target="#wizard-example-stepfb" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="!((user&&user.fb_user)||(user&&user.wechat_user))"><li data-target="#wizard-example-step1" class="active"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4>{{\'KP251\'|t}}</h4><div class="row"><div class="col-md-6"><select class="form-control input-lg" ng-model="selObj.learnLan" name="learnLan" ng-options="m.v as m.v|t group by (m.t?\'Other\':\'Popular\') for m in lans"><option value="">{{\'C0061\'|t}}</option></select><p class="help-block" ng-show="selObj.speakLan!=\'\' && selObj.learnLan==selObj.speakLan">{{\'C3020\'|t}}</p></div><div class="col-md-6"><span class="text-muted hidden-phone">{{\'MH246\'|t}}</span> <span class="text-muted visible-phone">{{\'KP253\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><h4>{{\'KP252\'|t}}</h4><div class="row"><div class="col-md-6"><select class="form-control input-lg" required ng-model="selObj.speakLan" ng-options="m.v as m.v|t group by (m.t?\'Other\':\'Popular\') for m in lans"><option value="">{{\'C0061\'|t}}</option></select><p class="help-block" ng-show="myForm.learnLan.$dirty && myForm.learnLan.$invalid">{{\'C3019\'|t}}</p></div><div class="col-md-6"><span class="text-muted hidden-phone">{{\'MH247\'|t}}<br>{{\'MH249\'|t}}</span> <span class="text-muted visible-phone">{{\'KP254\'|t}}</span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-primary btn-lg" ng-disabled="myForm.$invalid || selObj.learnLan==selObj.speakLan||do2Flag" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div></form><div ng-if="step==2&&lanset" class="modal-body padding-bottom phone-margin"><div class="text-center"><h2>{{\'KP328\'|t}}</h2><h5>{{\'KP321\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="(user&&user.fb_user)||(user&&user.wechat_user)"><li data-target="#wizard-example-stepfb" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="!((user&&user.fb_user)||(user&&user.wechat_user))"><li data-target="#wizard-example-step1"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" class="active"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4>{{\'KP312\'|t}}</h4><div class="row"><div class="col-md-6"><div class="form-group has-warning"><select ng-change="checkTime()" data-ng-model="user.timezone_new" class="form-control" ng-options="m.v as m.t for m in timezones" style="border: 1px solid #ccc;transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s"><option value="">{{\'C0061\'|t}}</option></select><p class="has-warning help-block" ng-if="!timezoneMatch&&!firstCheckTime">{{\'KP318\'|t}}</p></div><p class="text-warning" ng-if="!timezoneMatch&&!firstCheckTime">{{\'KP319\'|t}}</p><h4 class="text-warning" ng-if="!timezoneMatch" style="margin-top: -8px">{{m2.format(\'LLL\')}}</h4><p>{{\'KP320\'|t}}</p><h4 style="margin-top: -8px">{{m1.format(\'LLL\')}}</h4></div><div class="col-md-6"><span class="text-muted">{{\'KP315\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><h4>{{\'KP314\'|t}}</h4><div class="row"><div class="col-md-6 has-warning"><select ng-change="checkCTZones()" data-ng-model="user.living_country_id_new" class="form-control" ng-options="m.v as m.l for m in countries" style="border: 1px solid #ccc;transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s"><option value="">{{\'KP314\'|t}}</option></select><p class="has-warning help-block" ng-if="showNotMatch&&user.living_country_id_new">{{\'KP317\'|t}}</p></div><div class="col-md-6"><span class="text-muted">{{\'KP316\'|t}}</span></div></div></div></div></div></div><div ng-if="step==2&&lanset" class="modal-footer"><button class="btn btn-primary btn-lg" value="Finish" ng-click="done_ctzones()" ng-disabled="!user.timezone_new||!user.living_country_id_new||do2Flag_2"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div><div ng-if="step==3" class="modal-body padding-bottom phone-margin"><div class="text-center"><h2>{{\'C0082\'|t}} {{user.nickname}}!</h2><h5>{{\'MH248\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="(user&&user.fb_user)||(user&&user.wechat_user)"><li data-target="#wizard-example-stepfb" style="width: 25%"><span class="wizard-step-caption">{{\'ST048\'|t}}</span></li><li data-target="#wizard-example-step1" style="width: 25%"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 25%"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" class="active" style="width: 25%"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul><ul class="wizard-steps" style="left: 0px; width: 100%" ng-if="!((user&&user.fb_user)||(user&&user.wechat_user))"><li data-target="#wizard-example-step1"><span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2"><span class="wizard-step-caption">{{\'ST051\'|t}}</span></li><li data-target="#wizard-example-step3" class="active"><span class="wizard-step-caption">{{\'MH002\'|t}}</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4>{{\'KP255\'|t}}</h4><div class="row"><div class="col-md-6"><div class="radio"><label><input type="radio" value="1" name="radio1" ng-model="selObj1.findT" class="px"> <span class="lbl">{{\'C0069\'|t}}</span></label></div><div class="radio"><label><input type="radio" value="0" name="radio1" ng-model="selObj1.findT" class="px"> <span class="lbl">{{\'C0070\'|t}}</span></label></div><p class="help-block" ng-show="showOne">{{\'C3019\'|t}}</p></div><div class="col-md-6"><span class="text-muted hidden-phone">{{\'KP256\'|t}}</span> <span class="text-muted visible-phone">{{\'KP257\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><h4>{{\'KP258\'|t}}</h4><div class="row"><div class="col-md-6"><div class="radio"><label><input type="radio" value="1" name="radio2" ng-model="selObj1.findF" class="px"> <span class="lbl">{{\'KP281\'|t}}</span></label></div><div class="radio"><label><input type="radio" value="0" name="radio2" ng-model="selObj1.findF" class="px"> <span class="lbl">{{\'MH143\'|t}}</span></label></div><p class="help-block" ng-show="showTwo">{{\'C3019\'|t}}</p></div><div class="col-md-6"><span class="text-muted hidden-phone">{{\'KP259\'|t}}</span> <span class="text-muted visible-phone">{{\'KP260\'|t}}</span></div></div></div></div></div></div><div ng-if="step==3" class="modal-footer"><button class="btn btn-primary btn-lg" value="Finish" ng-click="done1()" ng-disabled="selObj1.findF==\'\'||selObj1.findT==\'\'||do3Flag"><span class="btn-txt">{{\'TP103\'|t}}</span></button></div><style ng-if="step==4">@media (max-width: 480px) {\n      .modal-body {\n        padding-top: 0% !important;\n      }\n    }</style><div ng-if="step==4" class="modal-body" style="background-color: #efefef"><div class="text-center"><h2 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH253\'|t}}!</h2><h2 ng-show="user&&user.fb_user&&(currentUser.register_status==255)">{{\'OB237\'|t}}</h2><h5 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH254\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps button-cursor" style="left: 0px; width: 100%" ng-click="done2()"><li data-target="#wizard-example-step3" style="width: 100%;background-color: #9d9d9d;padding: 7px 10px"><h5 style="color: #fff">{{\'MH003\'|t}}</h5></li></ul></div><div class="wizard-content"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4 ng-show="user&&user.fb_user&&(currentUser.register_status==255)" class="text-center">{{\'OB238\'|t}}</h4><h4 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH255\'|t|format:user.email}}</h4><a ng-click="openModalInstance()" ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH256\'|t}}</a></div></div><div class="text-center button-cursor" ng-click="done2()"><img src="/static/images/static/email_welcome.png" class="phone-width" style="border-radius:8px"></div></div><div class="text-center"><button class="btn btn-primary btn-lg" ng-click="done2()"><span class="btn-txt">{{\'MH107\'|t}}</span></button></div></div><form ng-if="step==5" role="form" name="myForm1" style="height: 100%" ng-submit="done3()"><div class="onboarding"><div class="modal-header text-center" ng-hide="email_verfied||currentUser.register_status==255"><span class="modal-title" id="myModalLabel">{{\'MH255\'|t|format:user.email}}</span> &nbsp;<a ng-click="openModalInstance()">{{\'MH256\'|t}}</a></div><div class="modal-body"><div class="checkout-phone-view2 text-center"><h4>{{\'OB200\'|t}}</h4><p>{{\'OB201\'|t}}<br>{{\'OB202\'|t}}</p><p><img width="250" height="250" src="/static/images/hp-icon1.png"></p></div></div><div class="modal-footer text-center"><button type="button" class="btn btn-primary" ng-click="done3()"><span class="btn-txt">{{\'PM109\'|t}}</span></button></div></div></form><form ng-if="step==6" role="form" name="myForm2" style="height: 100%" ng-submit="done4()"><div class="fancy-form-wrapper"><p class="info-message text-center">{{\'OB217\'|t}}</p><div class="form-content"><div class="container" style="width: 100%;padding-top: 0"><div class="row"><div class="col-md-12"><h4 class="text-center title">{{\'OB203\'|t}}</h4><div class="row"><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_pro" value="1" ng-required="true"><div class="radio-wrapper teacher pro-teacher clearfix"><div class="icon"><i class="fa fa-graduation-cap"></i></div><div class="content"><h4>{{\'C0200\'|t}}</h4><p>{{\'OB204\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 teacher"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_pro" value="2" ng-required="true"><div class="radio-wrapper teacher com-tutor clearfix"><div class="icon"><i class="fa fa-graduation-cap"></i></div><div class="content"><h4>{{\'C0201\'|t}}</h4><p>{{\'OB205\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div></div><p class="footer-info text-center" style="padding-top: 10px">{{\'OB206\'|t}}</p></div></div></div></div><div class="form-footer"><p class="float-left steps">{{\'OB240\'|t|format:1:3}}</p><button class="pull-right button" ng-disabled="myForm2.$invalid" type="submit">{{\'TP103\'|t}}&nbsp;<i class="fa fa-angle-right"></i></button></div></div></form><form ng-if="step==7" role="form" name="myForm2" style="height: 100%" ng-submit="done5()"><div class="fancy-form-wrapper"><p class="info-message text-center">{{\'OB217\'|t}}</p><div class="form-content"><div class="container" style="width: 100%;padding-top: 0"><div class="row"><div class="col-md-12"><h4 class="text-center title">{{\'OB207\'|t}}</h4><div class="col-md-6" ng-repeat="item in teacher_country.teacher_cou"><label><input type="radio" name="optionsRadios1" ng-model="selTeacher.teacher_cou" ng-value="item.v" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p ng-bind="item.v|t"></p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div></div><div class="form-footer"><p class="float-left steps">{{\'OB240\'|t|format:2:3}}</p><button class="pull-right button" ng-disabled="myForm2.$invalid" type="submit">{{\'TP103\'|t}}&nbsp;<i class="fa fa-angle-right"></i></button></div></div></form><form ng-if="step==8" role="form" name="myForm3" style="height: 100%" ng-submit="done6()"><div class="fancy-form-wrapper"><p class="info-message text-center">{{\'OB217\'|t}}</p><div class="form-content"><div class="container" style="width: 100%;padding-top: 0"><div class="row"><div class="col-md-12"><h4 class="text-center title">{{\'OB209\'|t}}</h4><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="0" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB210\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="1" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB211\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="2" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB212\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="3" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB213\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="4" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB214\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="5" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB215\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div></div><div class="form-footer"><p class="float-left steps">{{\'OB240\'|t|format:3:3}}</p><button class="pull-right button" ng-disabled="myForm3.$invalid" type="submit">{{\'TP103\'|t}}&nbsp;<i class="fa fa-angle-right"></i></button></div></div></form><style ng-if="step==9">@media (max-width: 480px) {\n      .modal-body {\n        padding-top: 0% !important;\n      }\n    }</style><div ng-if="step==9" class="modal-body" style="background-color: #efefef"><div class="text-center"><h2 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH253\'|t}}!</h2><h2 ng-show="user&&user.fb_user&&(currentUser.register_status==255)">{{\'OB237\'|t}}</h2><h5 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH254\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps button-cursor" style="left: 0px; width: 100%" ng-click="done2()"><li data-target="#wizard-example-step3" style="width: 100%;background-color: #9d9d9d;padding: 7px 10px"><h5 style="color: #fff">{{\'MH003\'|t}}</h5></li></ul></div><div class="wizard-content"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4 ng-show="user&&user.fb_user&&(currentUser.register_status==255)" class="text-center">{{\'OB238\'|t}}</h4><h4 ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH255\'|t|format:user.email}}</h4><a ng-click="openModalInstance()" ng-hide="user&&user.fb_user&&(currentUser.register_status==255)">{{\'MH256\'|t}}</a></div></div><div class="text-center button-cursor" ng-click="done2()"><img src="/static/images/static/email_welcome.png" class="phone-width" style="border-radius:8px"></div></div><div class="text-center"><button class="btn btn-primary btn-lg" ng-click="done2()"><span class="btn-txt">{{\'MH107\'|t}}</span></button></div></div></div>'),
a.put("/views/component/user.must.item.second.html",'<div class="modal-body"><div class="text-center"><h2>{{\'C0082\'|t}} {{user.nickname}}!</h2><h5>{{\'MH248\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%"><li data-target="#wizard-example-step1" class="" style="width: 33.3%"><span class="wizard-step-number">1</span> <span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" class="active" style="width: 33.3%"><span class="wizard-step-number">2</span> <span class="wizard-step-caption">{{\'MH002\'|t}}</span></li><li data-target="#wizard-example-step3" style="width: 33.3%"><span class="wizard-step-number">3</span> <span class="wizard-step-caption">{{\'TS008\'|t}}!</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" id="wizard-example-step1" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4>{{\'MH264\'|t}}</h4><div class="row"><div class="col-md-6"><div class="radio"><label><input type="radio" value="1" name="radio1" ng-model="selObj.findT" class="px"> <span class="lbl">{{\'C0069\'|t}}</span></label></div><div class="radio"><label><input type="radio" value="0" name="radio1" ng-model="selObj.findT" class="px"> <span class="lbl">{{\'C0070\'|t}}</span></label></div><p class="help-block" ng-show="showOne">{{\'C3019\'|t}}</p></div><div class="col-md-6"><span class="text-muted">{{\'MH246\'|t}}</span></div></div></div><div class="grid-gutter-margin-b"><h4>{{\'MH141\'|t}}</h4><div class="row"><div class="col-md-6"><div class="radio"><label><input type="radio" value="1" name="radio2" ng-model="selObj.findF" class="px"> <span class="lbl">{{\'KP281\'|t}}</span></label></div><div class="radio"><label><input type="radio" value="0" name="radio2" ng-model="selObj.findF" class="px"> <span class="lbl">{{\'MH143\'|t}}</span></label></div><p class="help-block" ng-show="showTwo">{{\'C3019\'|t}}</p></div><div class="col-md-6"><span class="text-muted"></span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-primary" ng-click="done()"><span class="btn-txt">{{\'C0138\'|t}}</span></button></div><div class="modal-body"><div class="text-center"><h2>{{\'MH253\'|t}}!</h2><h5>{{\'MH254\'|t}}</h5></div><div class="wizard-wrapper"><ul class="wizard-steps" style="left: 0px; width: 100%"><li data-target="#wizard-example-step1" class="" style="width: 33.3%"><span class="wizard-step-number">1</span> <span class="wizard-step-caption">{{\'C0000\'|t}}</span></li><li data-target="#wizard-example-step2" style="width: 33.3%"><span class="wizard-step-number">2</span> <span class="wizard-step-caption">{{\'MH002\'|t}}</span></li><li data-target="#wizard-example-step3" class="active" style="width: 33.3%"><span class="wizard-step-number">3</span> <span class="wizard-step-caption">{{\'TS008\'|t}}!</span></li></ul></div><div class="wizard-content panel"><div class="wizard-pane" id="wizard-example-step1" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><h4>{{\'MH255\'|t|format:user.email}}</h4><a ng-click="openModalInstance()">{{\'MH256\'|t}}</a></div></div></div></div><div class="modal-footer"><button class="btn btn-primary" ng-click="done()"><span class="btn-txt">{{\'C0138\'|t}}</span></button></div>'),a.put("/views/component/video.html",'<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><div class="modal-body no-padding"><iframe width="100%" height="450" src="{{videoUrl()}}" frameborder="0" allowfullscreen></iframe></div>'),a.put("/views/component/video.modal.html",'<style>.minClass {\n    height: 0px;\n  }\n\n  .maxClass {\n    width: 100%;\n    height: 500px;\n  }</style><style>.share-icon{\n    margin-right: 10px;\n    width: 20px;\n    position: absolute;"\n  }\n\n\n  .pickfiles {\n    position: relative;\n  }\n\n\n  .pickfiles {\n    width: 100%;\n    height: 200px;\n    cursor: pointer;\n    position: relative;\n    border: 3px dashed #ddd;\n    border-radius: 3px;\n    vertical-align: middle;\n    -webkit-transition: all .2s;\n    transition: all .2s;\n  }\n\n  .progress-bar {\n    width: 100%;\n    height: 13px;\n    background: #EDEDED;\n    border-width: 0 !important;\n  }\n\n  .upload-text{\n    width: 100%;\n    line-height: 190px;\n  }\n\n  .hide-input{\n    width: 100%;\n    height:  100%;\n    filter:alpha(opacity=0); /* IE */\n    -moz-opacity: 0; /* 老版Mozilla */\n    -khtml-opacity:0; /* 老版Safari */\n    opacity: 0; /* 支持opacity的浏览器*/\n  }\n\n  .abort-btn{\n    width: 25px;\n    height: 25px;\n    background-color: #fff;\n    background-image: url(/static/images/icons/close_icon.svg);\n    border: none;\n    background-repeat: no-repeat;\n  }\n\n  .remove-btn{\n    background: none;\n    border: none;\n    padding: 0;\n  }\n\n  .change-btn{\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n\n  .change-btn input{\n    top: 0;\n  }\n\n  .upload-detail{\n    margin-top: 10px;\n  }\n\n  .error-color{\n    color: #ff0000 !important;\n  }\n\n  .teacher-upload-panel .fa-exclamation-circle{\n    font-size: 28px;\n    color: #ff0000 !important;\n  }\n\n  .teacher-upload-panel .fa-check-circle{\n    font-size: 28px;\n    color: #5EBD5E !important;\n  }\n\n  .video-wrapper {\n    position: relative;\n  }\n\n  .video-wrapper > video {\n    width: 100%;\n    vertical-align: middle;\n  }\n\n  .video-wrapper > video.has-media-controls-hidden::-webkit-media-controls {\n    display: none;\n  }\n\n  .video-overlay-play-button {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    padding: 10px calc(50% - 50px);\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    opacity: 0.95;\n    cursor: pointer;\n    background-image: linear-gradient(transparent, rgba(90, 90, 90, 0.8));\n    transition: opacity 150ms;\n  }\n\n  .video-overlay-play-button:hover {\n    opacity: 1;\n  }\n\n  .video-overlay-play-button.is-hidden {\n    display: none;\n  }\n\n  @media (min-width: 768px){\n    .video-row{\n      padding-left: 30px;\n    }\n\n    .share-text{\n      margin-left: 30px;\n    }\n  }\n\n  @media (max-width: 767px){\n    .share-icon{\n      display: none;\n    }\n  }</style><div style="padding: 0"><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" ng-bind="title|t"></h4></div><div class="modal-body" ng-if="playUrlObj.canplay" style="padding: 0"><div ng-if="!loaded" style="z-index: -25;width: 100%" class="text-center"><div class="kp-loader"><div class="kp-loading" style="width: 30px;height: 30px"></div></div></div><div class="videowrapper" style="padding-top: 0px"><div ng-if="playUrlObj.vimeo || playUrlObj.youtube"><iframe iframe-onload="loadUrl()" ng-src="{{playUrlObj.url}}" scrolling="no" frameborder="0"></iframe></div><div ng-if="playUrlObj.qiniu"><div class="video-wrapper" kp-landing-intro-video><video ng-src="{{playUrlObj.url | trustResource}}" id="videoPoster"></video></div></div></div></div><div ng-if="!playUrlObj.canplay" style="z-index: -25;width: 100%;height: 120px" class="text-center"><br><br>{{\'KP308\'|t}}<br><a href="{{playUrlObj.url}}" target="_blank">{{playUrlObj.url}}</a></div></div>'),a.put("/views/component/view.video.modal.html",'<style>.minClass {\n    height: 0px;\n  }\n\n  .maxClass {\n    width: 100%;\n    height: 500px;\n  }</style><div class="modal-body" style="padding: 0"><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" ng-bind="title|t"></h4></div><div class="modal-body" ng-if="urlObj.canplay" style="padding: 0"><div ng-if="!loaded" style="z-index: -25;width: 100%;height: 25px" class="text-center"><div class="kp-loader"><div class="kp-loading" style="width: 30px;height: 30px"></div></div></div><div class="videowrapper"><iframe iframe-onload="loadUrl()" ng-src="{{urlObj.url}}" scrolling="no" frameborder="0"></iframe></div></div><div ng-if="!urlObj.canplay" style="z-index: -25;width: 100%;height: 120px" class="text-center"><br><br>{{\'KP308\'|t}}<br><a href="{{urlObj.url}}" target="_blank">{{urlObj.url}}</a></div></div>'),a.put("/views/component/voucher.giftcard.checkout.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" ng-if="!disabledAccount">{{\'MK008\'|t}}</h4><h4 class="modal-title" ng-if="disabledAccount">{{\'TS060\'|t}}</h4></div><div class="modal-body padding-bottom" ng-if="!disabledAccount"><table class="table"><tr><td><strong>{{\'PM024\'|t}}</strong></td><td width="20%"><strong>{{\'MK002\'|t}}</strong></td><td width="20%"><strong>{{\'TP008\'|t}}</strong></td></tr><tr><td valign="top">{{\'M0115\'|t}}</td><td valign="top">italki</td><td valign="top" rowspan="1">${{formData.itc_usd|kpToUsd|number:2}} USD <i class="fa fa-question-circle" tooltip="{{\'HL203\'|t}}"></i><br><span class="text-muted">≈ <span ng-bind="(formData.itc_usd/10)|currency"></span></span></td></tr></table><hr><div class="form-group no-margin-hr"><h4>{{\'PM002\'|t}}</h4><table class="table" style="border:2px #ff4338 solid;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px; margin-bottom:20px"><tr><td width="200">{{\'PM051\'|t}}</td><td align="left">${{currentUser.payment_account.available_itc_usd}} USD</td></tr><tr><td bgcolor="#fef7cf"><strong><span style="font-size:16px; color:#804000">{{\'PM022\'|t}}</span></strong></td><td align="left" bgcolor="#fef7cf"><strong><span style="font-size:16px; color:#804000">${{formData.itc_usd|kpToUsd|number:2}} USD</span></strong></td></tr></table></div><div class="form-group no-margin-hr"><label class="control-label">{{\'UR057\'|t}}</label><div class="form-inline"><input type="password" maxlength="20" class="form-control" ng-model="formData.pwd"></div><span ng-show="error.pwd" class="help-block">{{\'ST231\'|t}}</span></div></div><div class="modal-body padding-bottom" ng-if="disabledAccount"><h5 style="margin-bottom: 50px">{{\'KP305\'|t}}{{\'KP306\'|t}}</h5></div><div class="modal-footer" ng-if="!disabledAccount"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button class="btn btn-primary with-spinner" ng-class="{\'disabled\':!formData.pwd||submitFlag}" italki-click-with-spinner="submitAffirm()" stext="PM109"></button></div>'),a.put("/views/component/voucher.giftcard.filter.html",'<style>.modal-header{\n    width: 100%;\n    height: 50px;\n    background: #FF4338;\n  }\n\n  .modal-header .fa-chevron-left{\n    color: #fff;\n    font-size: 18px;\n    vertical-align: middle;\n  }\n\n  label{\n    display: block;\n  }</style><div class="modal-header"><a><i class="fa fa-chevron-left" aria-hidden="true"></i></a></div><div class="modal-body"><div class="radio-inline" style="margin-left:25px"><label class="checkbox-inline"><input type="checkbox" ng-model="theme_checkbox" class="px" name="checkbox1"> <span class="lbl text-lb">All</span></label><label class="checkbox-inline"><input type="checkbox" ng-model="theme_checkbox" class="px" name="checkbo2"> <span class="lbl text-lb">Standard</span></label><label class="checkbox-inline"><input type="checkbox" ng-model="theme_checkbox" class="px" name="checkbox3"> <span class="lbl text-lb">Birthday</span></label><label class="checkbox-inline"><input type="checkbox" ng-model="theme_checkbox" class="px" name="checkbox4"> <span class="lbl text-lb">Star sign</span></label></div><button class="btn btn-default">Cancel</button> <button class="btn btn-primary">Apply</button></div>'),a.put("/views/component/voucher.giftcard.preview.html",'<style>.modal-header{\n    width: 100%;\n    height: 50px;\n    background: #FF4338;\n  }\n\n  .modal-header .fa-chevron-left{\n    color: #fff;\n    font-size: 18px;\n    vertical-align: middle;\n  }\n\n  .modal-title{\n    font-size: 20px;\n    font-weight: 500;\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }</style><div class="modal-header"><a><i class="fa fa-chevron-left" ng-click="$dismiss()" aria-hidden="true"></i></a></div><div class="modal-body"><div class="modal-title">{{\'VC417\'|t}}</div><img width="73" src="/static/images/logo-100.png" style="margin-bottom: 16px"><div class="preview-wrapper" style="margin-bottom: 50px"><div class="preview-card margin-b20"><div class="text-center preview-img"><img ng-src="{{themePitchOn.img|giftcardThemeImage}}" style="width: 100%"></div><div class="preview-bottom clearfix"><div class="preview-amount">${{formData.itc_usd|kpToUsd|number:0}} USD</div><div class="preview-code">AAAA-BBBB-CCCC-DDDD</div></div></div><div class="preview-text"><p class="margin-b20">{{\'UR062\'|t|format:formData.recipient_name}}</p><p class="margin-b20">{{\'KP455\'|t|format:formData.user_name:(formData.itc_usd|kpToUsd)}}</p><p>{{formData.message}}</p></div></div><div class="preview-qa"><p class="text-bold" style="margin-bottom: 25px">{{\'KP456\'|t}}</p><ul class="text-muted"><li>{{\'KP451\'|t}}</li><li>{{\'KP452\'|t}}</li><li>{{\'KP453\'|t}}<br><a href="http://support.italki.com/entries/23397624" target="_blank">{{\'KP457\'|t}}</a></li><li>{{\'KP454\'|t}}</li></ul></div></div>'),a.put("/views/component/voucher.giftcard.print.html",'<style>.modal-body{\n    background: #f1f1f1;;\n  }\n  .modal-header{\n    width: 100%;\n    height: 50px;\n    background: #FF4338;\n  }\n\n  .modal-header .fa-chevron-left{\n    color: #fff;\n    font-size: 18px;\n    vertical-align: middle;\n  }\n\n  .modal-title{\n    font-size: 20px;\n    font-weight: 500;\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }\n\n  .preview-card{\n    -webkit-box-shadow: none;\n    box-shadow: none;\n  }\n\n  .print-preview-bottom{\n    width: 400px;\n    height: 31px;\n  }\n\n  .preview-code {\n    margin-top: -25px;\n    margin-left: 200px;\n  }\n\n  .print-show{\n    display: none;\n  }\n\n  .preview-amount {\n    margin-top: -25px;\n  }\n\n  @media print {\n    .print-show{\n      display: block;\n    }\n  }</style><div class="modal-header"><a><i class="fa fa-chevron-left" ng-click="$dismiss()" aria-hidden="true"></i></a></div><div class="modal-body"><div class="page"><a class="navbar-brand logo" style="margin-bottom: 20px;width: 100%"></a><div class="preview-card margin-b20 center-block" style="max-width: 400px; width: 100%;margin-bottom: 20px"><div class="text-center preview-img"><img ng-src="{{giftcardTheme|printGiftcardGetTheme}}"></div><div class="clearfix print-preview-bottom" style="margin: 0 auto"><img src="/static/images/giftcard/preview_bottom.png" width="400" height="31"><div class="preview-amount is-absolute">${{formData.itc_usd|kpToUsd|number:0}} USD</div><div class="preview-code is-absolute">{{giftcard_code}}</div></div></div><div class="text-center" style="margin-top: 20px"><button class="btn print-hide" style="width: 190px;margin-bottom: 20px" ng-click="print()">{{\'VC208\'|t}}</button></div><iframe id="printFrame" name="printFrame" style="width: 0px; height: 0px; border: 0px; solid: #000" src="about:blank"></iframe></div></div>'),a.put("/views/component/voucher.giftcard.theme.html",'<div class="modal-header"><style>.modal-header{\n      width: 100%;\n      height: 50px;\n      background: #FF4338;\n    }\n\n    .modal-header .fa-chevron-left{\n      color: #fff;\n      font-size: 18px;\n      vertical-align: middle;\n    }\n\n    .modal-title{\n      font-size: 20px;\n      font-weight: 500;\n      margin-top: 10px;\n      margin-bottom: 20px;\n    }\n\n    .modal-body img{\n      max-width: 400px;\n      width: 100%;\n    }\n\n    .margin-b10{\n      margin-bottom: 10px;\n    }\n\n\n\n    @media (max-width: 480px){\n\n      .modal-header button{\n        width: auto !important;\n      }\n    }</style><div ng-show="themes"><a><i class="fa fa-chevron-left" aria-hidden="true" ng-click="$dismiss()"></i></a> <button class="btn btn-sm btn-default pull-right" ng-click="themes =! themes">{{\'VC419\'|t}}</button></div><div ng-hide="themes"><a><i class="fa fa-chevron-left" aria-hidden="true" ng-click="themes =! themes"></i></a></div></div><div class="modal-body"><div ng-show="themes"><div class="modal-title">{{\'VC225\'|t}}</div><div ng-repeat="theme in constellation"><p style="margin-bottom: 5px"><img ng-src="{{theme.img|giftcardThemeImage}}" ng-click="pitchOn(theme);$dismiss()"></p><p>{{theme.name|t}}</p></div></div><div ng-hide="themes"><div class="modal-title">{{\'VC416\'|t}}</div><div class="radio-inline" style="margin-bottom: 20px"><ul class="list-unstyled"><li class="text-muted" ng-repeat="check in all_theme"><label class="checkbox-inline"><input type="radio" ng-value="check.v" class="px" ng-model="theme_ch.checkbok"> <span class="lbl text-lb">{{check.name|t}}</span></label></li></ul></div><br><button class="btn btn-primary margin-b10" ng-click="subTheme(theme_ch.checkbok);themes =! themes">{{\'ST124\'|t}}</button> <button class="btn btn-default margin-b10" ng-click="themes =! themes">{{\'C0056\'|t}}</button></div></div>'),a.put("/views/component/wechat.html",'<style>.modal-body{\n    padding: 0;\n  }\n  .wechat-content{\n    background: #fff;\n  }\n  .wechat-scan-left {\n    float: left;\n    width: auto;\n  }\n\n  .wechat-scan-right {\n    float: left;\n    width: auto;\n    margin-left: 20px;\n  }\n  .wechat-content .info-left{\n    position:absolute; bottom: 0; width: 38%; left: 0; text-align: center\n  }\n  .wechat-content .info-right{\n    padding-left: 40%\n  }\n  @media (max-width: 480px) {\n    .wechat-content .info-left{\n      display: none;\n    }\n    .wechat-content .info-right{\n      padding-left: 30px\n    }\n  }</style><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">微信约课 一手掌握</h4></div><div class="modal-body"><section id="app_download" class="wechat-content no-padding"><div class=""><div class="is-relative"><div class="info-left"><img align="bottom" src="/static/images/wechat-screen.png" width="80%"></div><div class="info-right"><div class="grid-gutter-margin-b" style="padding: 30px 30px 0 0"><p class="text-lb">立即关注 italki 微信服务号，一键注册并绑定用户。</p><p class="text-lb">挪挪手指，即可在微信端快速查找教师、预约和管理课时、点数充值，还可以第一时间在微信获取最新课时状态通知，不错过任何一个即将开始的课时。</p></div><div class="bottom-qr" style="padding: 0 0 30px 0"><img src="/static/images/qrcode_for_gh_258.jpg" width="180"></div></div></div></div></section></div>'),a.put("/views/components/tabs/tabs.html",'<italki-tabs-data></italki-tabs-data><div class="italki-tabs-labels"><ul><li class="italki-tabs-label" ng-class="{\'italki-active-tab\': $index === currentTabIndex}" ng-repeat="tab in tabs" ng-click="changeTab($index)" italki-tab-label-template="tab.label"></li></ul><div class="italki-tab-label-indicator"></div></div><div ng-repeat="tab in tabs"><div italki-tab-template="tab.body" ng-if="$index === currentTabIndex"></div>'),a.put("/views/contact/contact.block.html",'<h4 class="grid-gutter-margin-b" ng-if="!isOpen">{{\'CT223\'|t}} ({{meta.total}})</h4><div class="panel loading-layout" ng-if="!isOpen"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><div class="panel-body no-padding-vr"><div ng-class="{\'widget-notifications notifications-list\':isOpen,\'tab-pane fade widget-followers active in\':!isOpen}"><div class="follower yes-cursor cursor-over" ng-repeat="item in items track by item.id" ng-click="goUser($event,item.id)"><div class="row"><div class="col-md-1" style="width: 72px"><div class="is-absolute"><i class="fa fa-circle online-status" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></i></div><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="user({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="follower-avatar" border="0" alt="{{item.nickname}}"></a></div><div class="col-md-11 body"><div class="follower-controls"><div class="btn-group btn-group-sm"><button type="button " class="btn" ng-click="unBolck($index)">{{ "CT023"|t}}</button> <button type="button" class="btn" kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:item.id}">{{\'CT103\'|t}}</button></div></div><a ui-sref="user({id:item.id})" class="follower-name"><strong class="{{ item.is_online?\'nn\':\'nno\' }}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}">{{item.nickname}}</strong></a></div></div></div></div></div></div><div class="modal-body modal-list" ng-if="isOpen"><div class="widget-notifications notifications-list"><kp-loading indicator="items"></kp-loading><kp-no-found items="items" tips="CT303"></kp-no-found><div ng-repeat="item in items track by item.id" class="notification notification-item yes-cursor cursor-over" ng-click="goUser($event,item.id)"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="notifications-avatar img-circle" alt="{{item.nickname}}"> <a ui-sref="user({id:item.id})" ng-class="{\'notification-description\':isOpen,\'follower-name\':!isOpen}"><strong class="{{ item.is_online?\'nn\':\'nno\' }}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}">{{item.nickname}}</strong></a><div class="notification-ago"><span>{{\'C0102\'|t|format:(item.origin_country_id|t)}}</span></div><div class="btn-group-sm" style="position: absolute;right: 10px;top:25%"><button type="button " class="btn" ng-click="unBolck($index)">{{ "CT023"|t}}</button></div></div><div></div></div><aside ng-show="(meta && meta.has_next)|| loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div><div class="panel loading-layout" style="margin-top: -23px;border-top: 0px" ng-if="!loadedFlag&!isOpen"><kp-loading indicator="loadedFlag"></kp-loading></div>'),a.put("/views/contact/contact.bs.html","<div ui-view></div>"),a.put("/views/contact/contact.favorite.html",'<div class="grid-gutter-margin-b"><div id="ContactFriends"><div class="row" id="FriendsList" ng-show="meta.page_count>0"><div class="content_loop" ng-repeat="item in items track by item.id"><div class="col-md-1"><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" href="/user/{{ item.id }}"><img ng-src="{{item.avatar_file_name|avatar}}" border="0" alt="{{item.nickname}}"></a></div><div class="col-md-11"><span class="{{ item.is_online?\'nn\':\'nno\' }}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"><a class="nick_nn" href="{{user_x_url(item.id)}}">{{item.nickname}}</a></span>&nbsp; <a href="{{PREMIUM_URL}}" class="aicon icon_pu" title="{{\'PU001\'|t}}" ng-show="item.is_premium&&!isTeacher(item)">&nbsp;</a> <span ng-show="item.is_pro" class="aicon color-pro" title="{{\'TP003\'|t}}">&nbsp;</span> <span ng-show="item.is_tutor&&!item.is_pro" class="aicon icon_tutor" title="{{\'TP004\'|t}}">&nbsp;</span><br><span class="author_txt">{{ item.age}} {{ item.gender == 2&&(\'C0012\'|t)||\'\' }} {{ item.gender == 1&&(\'C0013\'|t)||\'\' }} {{\'C0102\'|t:item}}, {{\'C0009\'|t}} {{item.living_country_id}}</span><div><div class="floatl"><input class="button" type="button" value="{{\'TS108\'|t}}" ng-show="isTeacher(item)">&nbsp; <input class="buttong" type="button" value="{{\'TP126\'|t}}" nickname="item.nickname" id="chat_{{item.id}}" ng-show="item.allow_profile">&nbsp; <a href="javascript:;">{{\'C0178\'|t}}</a></div></div></div></div></div><div class ng-hide="meta.page_count>0"><p>{{\'CT301\'|t}}</p><a href="{{TEACHERS_PROFESSIONAL_URL}}" class="btn btn-primary">{{\'TP152\'|t}}</a></div></div></div><div id="divPage" class="pagination" ng-show="meta.page_count>0"><ul id="page_ul"></ul></div>'),a.put("/views/contact/contact.friends.html",'<style>@media (max-width: 480px) {\n    .col-md-2.text-right{\n      text-align: left!important;\n    }\n  }\n  @media (min-width: 481px) and (max-width: 767px) {\n    .col-md-2.text-right{\n      text-align: left!important;\n    }\n  }\n  @media (max-width: 767px) {\n    .computer-img{\n      display: none;\n    }\n    .phone-img{\n      display: inherit;\n    }\n  }\n  @media (min-width: 768px){\n    .computer-img{\n      display: inherit;\n    }\n    .phone-img{\n      display: none;\n    }\n  }</style><header><h2 class="grid-gutter-margin-b">{{\'M0099\'|t}}</h2></header><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/contact/contact.tab.html\'"></ng-include></div><div class="contact-partner teacher-list panel"><div class="panel-heading"><span class="panel-title"><span ng-show="rShow"><h4 class="no-margin-t">{{(qj_meta.total>0?\'KP411\':\'KP223\')|t|format:qj_meta.total}}</h4><a href="javascript:void(0);" ng-click="viewSentRequests()">{{\'KP409\'|t}}</a></span> <span ng-show="!rShow"><h4 class="no-margin-t">{{(qf_meta.total>0?\'KP412\':\'KP413\')|t|format:qf_meta.total}}</h4><a href="javascript:void(0);" ng-click="rShow=!rShow">{{\'KP410\'|t}}</a></span></span><ul class="pull-right panel-heading-text list-inline" ng-show="rShow&&qj_items&&qj_items.length>0"><li ng-show="rShow"><a href="javascript:void(0);" italki-click-with-spinner="requestAccept()" stext="KP414"></a></li><li ng-show="rShow"><a href="javascript:void(0);" italki-click-with-spinner="requestDecline()" stext="KP415"></a></li><li ng-hide="rShow"><a href="javascript:void(0);" italki-click-with-spinner="myRequestCancel()" stext="KP416"></a></li></ul></div><div ng-show="(rShow&&qj_items&&qj_items.length>0)||(!rShow&&myRequestItems&&myRequestItems.length>0)"><div ng-if="rShow&&qj_items&&qj_items.length>0"><div class=""><kp-loading indicator="qj_items"></kp-loading><div class=""><div class="teacher-item" ng-repeat="item in qj_items track by item.id"><div class="panel-body" style="overflow: inherit"><div class="row"><div class="computer-img"><div class="col-sm-1"><a ui-sref="user({id:item.id})"><div class="item-icon is-relative" style="width: 50px;margin: 0 auto"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><img title="{{item.nickname}}" alt="{{item.nickname}}" ng-src="{{item.avatar_file_name|avatar:\'100\'}}" class="bg-icon rounded" style="width:50px; height:50px; bottom: inherit;right:20px" kp-fallback-avatar></div></a></div><div class="col-sm-11"><div class="row"><div class="col-md-9"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p><p class="text-sm text-muted" style="background: #f3f3f3;padding: 5px 10px;display: table"><em>{{item.msg}}</em></p></div><div class="col-md-3 text-right"><button italki-click-with-spinner="requestAccept($index)" class="btn btn-sm btn-success btn-auto" stext="C0057"></button>&nbsp;&nbsp;<div class="btn-group btn-group-sm" dropdown><button italki-click-with-spinner="requestDecline($index)" type="button" class="btn btn-auto" stext="C0041"></button> <button type="button" class="btn btn-auto" dropdown-toggle><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li kp-block-user block-data="{\'args\':$index,\'blockee_id\':item.id,\'callBack\':removeRequestItems}"><a class="ng-binding">{{\'C0083\'|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:item.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></div></div></div></div><div class="phone-img"><a class="is-relative col-sm-2" ui-sref="user({id:item.id})"><div class="online-layout1"><div class="offline" ng-class="{online:item.is_online}" title="{{ item.is_online?\'C0038\':\'C0039\' }}"></div></div><img ng-src="{{item.avatar_file_name|avatar:\'100\'}}" alt="{{item.nickname}}" kp-fallback-avatar class="rounded {{ !item.allow_profile&&\'deactive\'||\'\'}}"></a><div class="col-sm-10"><div class="row"><div class="col-md-9"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p><p class="text-sm text-muted" style="background: #f3f3f3;padding: 5px 10px;display: table"><em>{{item.msg}}</em></p></div><div class="col-md-3 text-right"><button italki-click-with-spinner="requestAccept($index)" class="btn btn-sm btn-success btn-auto" stext="C0057"></button>&nbsp;&nbsp;<div class="btn-group btn-group-sm" dropdown><button italki-click-with-spinner="requestDecline($index)" type="button" class="btn btn-auto" stext="C0041"></button> <button type="button" class="btn btn-auto" dropdown-toggle><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li kp-block-user block-data="{\'args\':$index,\'blockee_id\':item.id,\'callBack\':removeRequestItems}"><a class="ng-binding">{{\'C0083\'|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:item.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></div></div></div></div></div></div></div></div><aside class="panel-body" ng-show="(qj_meta && qj_meta.has_next) || loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMore(\'request\')"></button></aside></div></div><div ng-if="!rShow&&myRequestItems&&myRequestItems.length>0"><kp-loading indicator="myRequestItems"></kp-loading><kp-no-found items="myRequestItems" tips="ML321"></kp-no-found><div class="teacher-item" ng-repeat="item in myRequestItems track by item.id"><div class="panel-body"><div class="row"><div class="computer-img"><div class="col-sm-1"><a ui-sref="user({id:item.id})"><div class="item-icon is-relative" style="width: 50px;margin: 0 auto"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><img title="{{item.nickname}}" alt="{{item.nickname}}" ng-src="{{item.avatar_file_name|avatar:\'100\'}}" class="bg-icon rounded" style="width:50px; height:50px; bottom: inherit;right:20px" kp-fallback-avatar></div></a></div><div class="col-sm-11"><div class="row"><div class="col-md-10"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p></div><div class="col-md-2 text-right"><button italki-click-with-spinner="myRequestCancel($index)" class="btn btn-sm btn-auto" stext="C0056"></button></div></div></div></div><div class="phone-img"><a class="is-relative col-sm-2" ui-sref="user({id:item.id})"><div class="online-layout1"><div class="offline" ng-class="{online:item.is_online}" title="{{ item.is_online?\'Online\':\'Offline\' }}"></div></div><img ng-src="{{item.avatar_file_name|avatar:\'100\'}}" alt="{{item.nickname}}" title="{{item.nickname}}" kp-fallback-avatar class="rounded {{ !item.allow_profile&&\'deactive\'||\'\'}}"></a><div class="col-sm-10"><div class="row"><div class="col-md-10"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p></div><div class="col-md-2 text-right"><button italki-click-with-spinner="myRequestCancel($index)" class="btn btn-sm btn-auto" stext="C0056"></button></div></div></div></div></div></div></div><aside class="panel-body" ng-show="(qf_meta && qf_meta.has_next) || loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMore(\'myRequest\')"></button></aside></div></div></div><div class="contact-partner teacher-list panel loading-layout"><kp-loading indicator="fr_items"></kp-loading><kp-no-found items="fr_items" tips="KP279"></kp-no-found><div class="panel-heading"><div class="row"><div class="col-md-9 text-lb" style="line-height: 28px">{{\'M0087\'|t}}</div><div class="col-md-3"><form><input class="form-control" type="text" placeholder="{{\'C3022\'|t}}" ng-model="friend_filter.nickname"> <button type="reset" class="close" ng-click="showData()" style="margin-top: -26px;margin-right: 10px;outline: none">&times;</button></form></div></div></div><div class="yes-cursor"><div ng-repeat="item in fr_items track by item.id" class="teacher-item cursor-over" ng-click="goUser($event,item.id)"><div class="panel-body"><div class="row"><div class="computer-img"><div class="col-sm-1"><div class="item-icon is-relative" style="width: 50px;margin: 0 auto" ui-sref="user({id:item.id})"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><img title="{{item.nickname}}" alt="{{item.nickname}}" ng-src="{{item.avatar_file_name|avatar:\'100\'}}" class="bg-icon rounded" style="width:50px; height:50px; bottom: inherit;right:20px" kp-fallback-avatar></div></div><div class="col-sm-11"><div class="row"><div class="col-md-10"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p><p class="text-muted hidden-phone" ng-bind="item.intro"></p></div><div class="col-md-2 text-right"><div class="btn-group btn-group-sm" dropdown><button type="button " class="btn btn-auto" ng-click="msgBox(item.id)"><span class="btn-txt">{{ "C0079"|t}}</span></button>&nbsp; <button type="button" class="btn btn-auto" dropdown-toggle><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li><a italki-click-with-spinner="deleteFriend($index)" stext="C0049"></a></li><li kp-block-user block-data="{\'args\':$index,\'blockee_id\':item.id,\'callBack\':removeFriendItem}"><a class="ng-binding">{{"C0083"|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:item.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></div></div></div></div><div class="phone-img"><a class="is-relative col-sm-2" ui-sref="user({id:item.id})"><div class="online-layout1"><div class="offline" ng-class="{online:item.is_online}" title="{{ item.is_online?\'C0038\':\'C0039\' }}"></div></div><img ng-src="{{item.avatar_file_name|avatar:\'100\'}}" alt="{{item.nickname}}" kp-fallback-avatar class="rounded {{ !item.allow_profile&&\'deactive\'||\'\'}}"></a><div class="col-sm-10"><div class="row"><div class="col-md-10"><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><p class="follower-username" style="white-space: nowrap;overflow: hidden"><ul ng-hide="item.language_obj_s.length<1" class="list-inline m-r-3 no-margin-b"><li><span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></li></ul><ul ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1" class="list-inline m-r-3 no-margin-b"><li><span translate="C0007"></span>:&nbsp;</li><li><span ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul></p><p class="text-muted hidden-phone" ng-bind="item.intro"></p></div><div class="col-md-2 text-right"><div class="btn-group btn-group-sm" dropdown><button type="button " class="btn btn-auto" ng-click="msgBox(item.id)"><span class="btn-txt">{{ "C0079"|t}}</span></button>&nbsp; <button type="button" class="btn btn-auto" dropdown-toggle><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li><a italki-click-with-spinner="deleteFriend($index)" stext="C0049"></a></li><li kp-block-user block-data="{\'args\':$index,\'blockee_id\':item.id,\'callBack\':removeFriendItem}"><a class="ng-binding">{{"C0083"|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:item.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></div></div></div></div></div></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(fr_meta && fr_meta.has_next) || loadMoreFlag"><button class="btn btn-labeled btn-block loader-gray" italki-click-with-spinner="loadMore(\'friend\')" stext="MH046"></button></aside>'),
a.put("/views/contact/contact.html",'<div class="wcontainer"><div class="container"></div><div class="container-fluid2"><div class="contentP"><h3 translate="M0099"></h3><ul class="tabs"><li ui-sref-active="active"><a ui-sref="contacts.follow">{{\'C0161\'|t}}</a></li><li ui-sref-active="active"><a ui-sref="contacts.follower">{{\'C0162\'|t}}</a></li><li ui-sref-active="active"><a ui-sref="contacts.favorite">{{\'C0169\'|t}}</a></li><li ui-sref-active="active"><a ui-sref="contacts.teacher">{{\'C0154\'|t}}</a></li><li ui-sref-active="active"><a ui-sref="contacts.student">{{\'C0151\'|t}}</a></li><li ui-sref-active="active"><a ui-sref="contacts.block">{{\'CT025\'|t}}</a></li></ul><div class="clear"></div><div id="Center9001Content"><div class="friends_area" ui-view></div></div></div><div class="sidebarP"><div class="spacing"><ul class="tabs_col"><li><a ui-sref="dashboard">{{\'M0073\'|t}}</a></li><li><a ui-sref="session">{{\'M0038\'|t}}</a></li><li class="active"><a href="{{CONTACTS_FOLLOWING_FRIENDS_URL}}">{{\'M0029\'|t}}</a></li><li><a ui-sref="message">{{\'ML001\'|t}}</a></li><li><a href="{{PAYMENT_MY_FINANCE_URL}}">{{\'M0048\'|t}}</a></li><li class="col"></li></ul><div style="padding:10px"><a href="{{PAYMENT_PURCHASE_SITE_URL}}?{{GA_SRC}}=italki-slide" class="button">{{\'MH110\'|t}}</a></div></div><div class="ad_areaL" id="div-gpt-ad-1359620754891-0"></div></div><div class="clear"></div></div></div>'),a.put("/views/contact/contact.student.html",'<style xmlns="http://www.w3.org/1999/html">/**\n   *  Show all filter\n   */\n  .label-all {\n    float: right;\n  }\n  .label-click{\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n  .item-info .right-btn{\n    right:20px\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .item-info .col-md-6.hidden-phone{\n      margin-top: 20px;\n    }\n    .col-md-9,.col-md-3{\n      margin-bottom: 10px;\n    }\n\n  }\n  @media (max-width: 480px) {\n    .right-btn{\n      right:0!important\n    }\n    .col-md-2.text-right{\n      text-align: left!important;\n    }\n    .btn-group.btn-group-sm{\n      width: 100%;\n      margin-bottom: -10px;\n    }\n  }\n  @media (min-width: 481px) and (max-width: 767px) {\n    .right-btn{\n      right:0!important\n    }\n    .col-md-2.text-right{\n      text-align: left!important;\n    }\n  }</style><header><h2 class="grid-gutter-margin-b">{{\'M0099\'|t}}</h2></header><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/contact/contact.tab.html\'"></ng-include></div><div class="panel loading-layout"><div class="panel-heading"><div class="row"><div class="col-md-9" style="line-height: 28px"><a><span name="PROSPECT" class="label label-click label-tags" ng-class="{\'label-click\':showClass!=2||showClass==0}" ng-click="filterByTag(tagEnum.PROSPECT)">{{\'KP400\'|t}}</span></a>&nbsp; <a><span name="ACTIVE" class="label label-click session" ng-class="{\'label-click\':showClass!=3||showClass==0}" ng-click="filterByTag(tagEnum.ACTIVE)">{{\'KP401\'|t}}</span></a>&nbsp; <a><span name="TRIAL" class="label label-click free" ng-class="{\'label-click\':showClass!=4||showClass==0}" ng-click="filterByTag(tagEnum.TRIAL)">{{\'KP402\'|t}}</span></a>&nbsp; <a><span name="INACTIVE" class="label label-click label-tags" ng-class="{\'label-click\':showClass!=1||showClass==0}" ng-click="filterByTag(tagEnum.INACTIVE)">{{\'KP403\'|t}}</span></a>&nbsp; <a name="All" class="label-all" ng-click="filterByTag(tagEnum.ALL)">{{\'TP173\'|t}}</a></div><div class="col-md-3"><form><input class="form-control" type="text" placeholder="{{\'C3022\'|t}}" ng-model="filter.nickname"> <button type="reset" class="close" ng-click="showData()" style="margin-top: -26px;margin-right: 10px;outline: none">&times;</button></form></div></div></div><kp-loading indicator="loadedFlag"></kp-loading><kp-no-found items="items" tips="CT302"></kp-no-found><div class="panel-body no-padding-b"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><div class="" ng-repeat="item in items track by item.id" ng-click="goUser($event,item.id)"><div class="stat-panel" style="overflow: inherit"><div class="stat-cell bg-panel valign-middle card-item yes-cursor cursor-over" style="overflow: inherit"><div class="item-icon"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="teacher({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar}}" width="50" class="rounded" kp-fallback-avatar border="0" alt="{{item.nickname}}"></a></div><div class="item-info"><div class="row"><div class="col-md-6 grid-gutter-margin-b5"><div class="right-btn"><span class="label label-tags" ng-if="item.tag==tagEnum.PROSPECT">{{\'KP400\'|t}}</span> <span class="label session" ng-if="item.tag==tagEnum.ACTIVE">{{\'KP401\'|t}}</span> <span class="label free" ng-if="item.tag==tagEnum.TRIAL">{{\'KP402\'|t}}</span> <span class="label label-tags" ng-if="item.tag==tagEnum.INACTIVE">{{\'KP403\'|t}}</span></div><ul class="list-inline no-margin-b"><li><a ui-sref="user({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="item.is_premium && !item.is_pro && !item.is_tutor" class="fa fa-ii-premium teacher-type-fa color-premuim" style="padding-bottom: 6px;font-size: 24px" title="{{\'PU009\'|t}}"></li></ul><ul class="list-inline"><li ng-hide="(item.language_obj_s|filter:{is_learning:1}).length<1"><ul class="list-inline"><li>{{\'C0007\'|t}}:</li><li ng-repeat="item in item.language_obj_s|filter:{is_learning:1}|orderBy:\'priority\':true">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></li></ul></li></ul><div class=""><div class="btn-group btn-group-sm"><a ng-click="goToStudentPage(item.id)" class="btn" style="border-left-color: transparent;border-right-color: transparent"><span class="btn-txt">{{\'TP172\'|t}}</span></a> &nbsp;</div><div class="btn-group btn-group-sm" dropdown><button type="button" class="btn" ng-click="msgBox(item.id)"><span class="btn-txt">{{\'C0079\'|t}}</span></button>&nbsp; <button type="button" class="btn" dropdown-toggle ng-if="item.tag==tagEnum.PROSPECT"><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li ng-click="removeUser($index)"><a href="#">{{\'C0049\'|t}}</a></li></ul></div></div></div><div class="col-md-6 hidden-phone"><p ng-hide="item.language_obj_s.length<1">{{\'PB004\'|t}}:&nbsp; <span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></p><span class="text-muted">{{item.intro}}</span></div></div></div></div></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="loadMore()"></button></aside>'),a.put("/views/contact/contact.tab.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab" ng-if="currentUser.is_tutor||currentUser.is_pro"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="contacts.student" ng-class="{\'selected\': highlightStudentTab() || highlightMenuTab}">{{\'M0097\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="contacts.teacher" ng-class="{\'selected\': highlightTeacherTab()}">{{\'M0096\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref-active="selected" ui-sref="contacts.partner" ng-class="{\'selected\': highlightPartnerTab()}">{{\'KP408\'|t}}</a></li></ul>'),a.put("/views/contact/contact.teacher.html",'<style>/**\n *  Show all filter\n */\n.label-all {\n  float: right;\n}\n  .label-click{\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  }\n  .item-info .right-btn{\n    right:20px\n  }\n@media (min-width: 768px) and (max-width: 991px) {\n  .item-info .col-md-6.hidden-phone{\n    margin-top: 20px;\n  }\n  .col-md-9,.col-md-3{\n    margin-bottom: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .right-btn{\n    right:0!important\n  }\n  .btn-group.btn-group-sm{\n    width: 100%;\n    margin-bottom: -10px;\n  }\n}\n@media (min-width: 481px) and (max-width: 767px) {\n  .right-btn{\n    right:0!important\n  }\n}</style><header><h2 class="grid-gutter-margin-b">{{\'M0099\'|t}}</h2></header><div class="panel no-margin-b no-border-b"><ng-include src="\'/views/contact/contact.tab.html\'"></ng-include></div><div class="panel loading-layout"><div class="panel-heading"><div class="row"><div class="col-md-9" style="line-height: 28px"><a><span class="label label-click label-warning" ng-class="{\'label-click\':showClass!=6||showClass==0}" ng-click="filterByTag(tagEnum.BOOKMARKED)">{{\'KP404\'|t}}</span></a>&nbsp; <a><span class="label label-click label-tags" ng-class="{\'label-click\':showClass!=5||showClass==0}" ng-click="filterByTag(tagEnum.CONTACTED)">{{\'KP405\'|t}}</span></a>&nbsp; <a><span class="label label-click free" ng-class="{\'label-click\':showClass!=4||showClass==0}" ng-click="filterByTag(tagEnum.TRIAL)">{{\'KP402\'|t}}</span></a>&nbsp; <a><span class="label label-click session" ng-class="{\'label-click\':showClass!=3||showClass==0}" ng-click="filterByTag(tagEnum.CURRENT)">{{\'KP406\'|t}}</span></a>&nbsp; <a><span class="label label-click label-tags" ng-class="{\'label-click\':showClass!=2||showClass==0}" ng-click="filterByTag(tagEnum.PAST)">{{\'KP407\'|t}}</span></a>&nbsp; <a class="label-all" ng-click="filterByTag(tagEnum.ALL)">{{\'TP173\'|t}}</a></div><div class="col-md-3"><form><input class="form-control" type="text" placeholder="{{\'C3022\'|t}}" ng-model="filter.nickname"> <button type="reset" class="close" ng-click="showData()" style="margin-top: -26px;margin-right: 10px;outline: none">&times;</button></form></div></div></div><div class="noresult-text text-lg text-center text-muted" ng-show="items&&items.length==0"><img class="rounded" src="/static/images/icon_norecord.png"><br>{{\'CT201\'|t}}<br><span class="text-lb">{{\'CT202\'|t}}</span><br><button class="btn btn-primary" ui-sref="teachers">{{\'M0000\'|t}}</button></div><div class="panel-body no-padding-b"><div class=""><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag"></kp-loading></div><div class="" ng-repeat="item in items track by item.id" ng-click="goToTeacher($event,item.id)"><div class="stat-panel" style="overflow: inherit"><div class="stat-cell bg-panel valign-middle card-item yes-cursor cursor-over" style="overflow: inherit"><div class="item-icon"><div class="online-layout"><div class="offline" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></div></div><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="teacher({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar}}" width="50" class="rounded" kp-fallback-avatar width="50" border="0" alt="{{item.nickname}}"></a></div><div class="item-info"><div class="row"><div class="col-md-6 grid-gutter-margin-b5"><div class="right-btn"><span class="label label-warning" ng-if="item.tag==tagEnum.BOOKMARKED">{{\'KP404\'|t}}</span> <span class="label label-tags" ng-if="item.tag==tagEnum.CONTACTED">{{\'KP405\'|t}}</span> <span class="label free" ng-if="item.tag==tagEnum.TRIAL">{{\'KP402\'|t}}</span> <span class="label session" ng-if="item.tag==tagEnum.CURRENT">{{\'KP406\'|t}}</span> <span class="label label-tags" ng-if="item.tag==tagEnum.PAST">{{\'KP407\'|t}}</span></div><ul class="list-inline no-margin-b"><li><a ui-sref="teacher({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li></ul><ul class="list-inline"><li class="{{item.is_pro?\'color-pro\':\'color-tutor\'}}"><i class="fa fa-ii-tutor" ng-if="item.is_pro" title="{{\'C0200\'|t}}" style="vertical-align: middle"></i> <i class="fa fa-ii-tutor" ng-if="!item.is_pro" title="{{\'C0201\'|t}}" style="vertical-align: middle"></i>&nbsp; <span translate="{{item.is_pro?\'TP003\':\'TP004\'}}" style="vertical-align: middle"></span></li><li><span ng-repeat="lang in item.language_obj_s|filter:{is_teaching:1}|orderBy:\'priority\':true">{{lang.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li><li><span>{{\'C2021\'|t|format:item.teacher_info_obj.session_count}}</span></li></ul><div class=""><div class="btn-group btn-group-sm" ng-if="[tagEnum.CURRENT,tagEnum.TRIAL,tagEnum.PAST].indexOf(item.tag)>-1"><button type="button btn-primary btn-auto" class="btn btn-primary" ng-disabled="!item.is_schedule" italki-click-test teacher="{id:item.id}" pag-state="contact"><span class="btn-txt">{{\'TS108\'|t}}</span></button>&nbsp;</div><div class="btn-group btn-group-sm"><button ng-click="goToTeacherPage(item.id)" class="btn"><span class="btn-txt">{{\'TP172\'|t}}</span></button>&nbsp;</div><div class="btn-group btn-group-sm" dropdown style="vertical-align: top"><button type="button " class="btn" ng-if="item.tag!=tagEnum.INACTIVE&&item.teacher_user_pair_obj.has_contacted" ng-click="msgBox(item.id)"><span class="btn-txt">{{"C0079"|t}}</span></button> <button type="button" class="btn" ng-if="item.tag!=tagEnum.INACTIVE&&!item.teacher_user_pair_obj.has_contacted" ng-click="contactTeacher(item)"><span class="btn-txt">{{\'TP126\'|t}}</span></button>&nbsp; <button type="button" class="btn" dropdown-toggle ng-if="item.tag!=tagEnum.CURRENT&&item.tag!=tagEnum.PAST&&item.tag!=tagEnum.TRIAL"><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li ng-click="removeTeacher($index)"><a href="#">{{\'C0049\'|t}}</a></li></ul></div></div></div><div class="col-md-6 hidden-phone"><p ng-hide="item.language_obj_s.length<1">{{\'PB004\'|t}}:&nbsp; <span ng-repeat="item in item.language_obj_s|orderBy:\'level\':true">{{item.language|t }}<em class="lv lv{{item.level}}"></em> <span ng-hide="$last">,&nbsp;</span></span></p><span class="text-muted" ng-if="!item.teacher_info_obj.about_me">{{item.teacher_info_obj.intro}}</span> <span class="text-muted" ng-if="item.teacher_info_obj.about_me">{{item.teacher_info_obj.about_me| limitTo: 200}}{{item.teacher_info_obj.about_me.length > 200 ? \'...\' : \'\'}}</span></div></div></div></div></div></div><div class="text-center" ui-sref="teachers" ng-if="items&&items.length!=0" ng-hide="(meta && meta.has_next)|| loadMoreFlag"><div class="dropzone grid-gutter-margin-b yes-cursor cursor-over" style="height: 130px; padding: 50px 0"><div class="dropzone-message text-center" style="overflow: inherit;position: absolute;top: 50%; margin-top: -30px;width: 100%; text-align: center"><i class="fa fa-plus text-xlg text-muted"></i><br><span class="text-lb">{{\'MH111\'|t}}</span></div></div></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next)|| loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside>'),a.put("/views/contact/contact.teacher2.html",'<h2 class="grid-gutter-margin-b">{{\'M0096\'|t}}</h2><div class="panel loading-layout"><kp-loading indicator="items"></kp-loading><kp-no-found items="items" tips="CT301"></kp-no-found><div class="panel-heading"><span class="panel-title">Modal with blurred background</span></div><div class="panel-body no-padding-vr"><div class="tab-pane fade widget-followers active in"><div class="follower yes-cursor cursor-over" ng-repeat="item in items track by item.id" ng-click="goTeacher($event,item.id)"><div class="row"><div class="col-md-1 is-relative" style="width: 72px"><div class="is-absolute"><i class="fa fa-circle online-status" ng-class="{online:item.is_online}" title="{{(item.is_online?\'C0038\':\'C0039\')|t}}"></i></div><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="teacher({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar}}" class="follower-avatar" border="0" alt="{{item.nickname}}"></a></div><div class="col-md-6"><ul class="media-heading list-inline"><li><a ui-sref="teacher({id:item.id})" ng-bind="item.nickname" class="text-lg"></a></li><li><i class="text-lg" ng-class="item.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(item.origin_country_id|t)}}" style="width: 1em"></i></li></ul><ul class="list-inline"><li><span ng-show="item.is_pro" class="color-pro"><span>{{\'TP003\'|t}}</span></span> <span ng-show="item.is_tutor&&!item.is_pro" class="icon_tutor"><span>{{\'TP004\'|t}}</span></span></li><li><span ng-repeat="lang in item.language_obj_s|filter:{is_teaching:1}|orderBy:\'priority\':true">{{lang.language|t}}<span ng-hide="$last">,&nbsp;</span></span></li></ul><ul class="list-inline hidden-phone ng-scope"><li><span class="label label-warning">{{\'KP404\'|t}}</span></li></ul></div><div class="col-md-5"><div class="btn-group btn-group-sm"><button type="button btn-primary" class="btn btn-primary" ng-click="schedule(item.id)">{{\'TS108\'|t}}</button></div></div></div></div></div></div></div><aside class="text-center grid-gutter-margin-b" ng-show="(meta && meta.has_next) || loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside><a ui-sref="teachers" class="btn btn-block">{{\'TP152\'|t}}</a>'),a.put("/views/course/list.modal.html",'<kp-course-selector-v1 teacher-id="teacherId" options="options" oncheckout="$close" dismiss="$dismiss"></kp-course-selector-v1>'),a.put("/views/customurl/index.html",'<div dynamic-ctrl><div ng-include="viewUrl"></div></div>'),a.put("/views/dashboard/index.html",'<style>@media (min-width: 768px){\n    .promoBox .col-sm-3{\n      padding-left: 0px;\n    }\n  }\n\n\n  .flex-box{\n    display: -webkit-flex; /* Safari */\n    display: flex;\n\n  }</style><div class="dashboard-index-page"><div class="row" style="padding-top: 30px"><div class="col-md-3 col-sm-4"><div class="grid-gutter-margin-b"><div class="row"><div class="col-xs-4"><img ng-src="{{ currentUser|avatar }}" ui-sref="user({id:currentUser.id})" class="rounded yes-cursor" title="{{\'TP122\'|t}}" style="width: 100%" kp-fallback-avatar></div><div class="col-xs-8 nickname"><strong class="text-lg yes-cursor" ng-bind="currentUser.nickname" title="{{\'TP122\'|t}}" ui-sref="user({id:currentUser.id})"></strong><br><label ng-if="!tzIsSuggestOne()" class="text-danger" tooltip-placement="bottom" tooltip="Your system clock is not aligned with your italki account."><a ui-sref="setting.account"><span class="text-up" ng-bind="currentTime()" style="vertical-align: middle"></span> <span style="vertical-align: middle">{{ currentUser.timezone_iana|timezoneOffset }}</span> <i class="fa fa-exclamation-circle" style="vertical-align: middle"></i></a></label><label ng-if="tzIsSuggestOne()"><span class="text-up" ng-bind="currentTime()"></span> <span>{{ currentUser.timezone_iana|timezoneOffset }}</span></label></div></div></div><div class="panel panel-dark widget-profile"><div class="list-group"><font class="list-group-item"><span ui-sref="finance.overview" class="yes-cursor"><i class="fa fa-database"></i> &nbsp; <strong>${{currentUser.payment_account.total_itc_usd|kpToUsd|number:2}}&nbsp;USD</strong></span> <i class="fa fa-shopping-cart pull-right yes-cursor" ui-sref="recharge" title="{{\'MH110\'|t}}"></i></font> <a ui-sref="setting.editProfile" class="list-group-item"><i class="fa fa-cog"></i> &nbsp; <span ng-if="!currentUser.is_teacher">{{\'MH031\'|t}}</span> <span ng-if="currentUser.is_teacher">{{\'MH032\'|t}}</span></a></div></div><div class="panel no-border loading-layout" style="min-height: 100px"><div class="panel-body"><h5 class="no-margin-t text-bold">{{\'MH007\'|t}}</h5><kp-loading indicator=" statistics.loaded"></kp-loading><p ng-if="statistics.loaded"><span>{{\'PB036\'|t}}</span> <a class="pull-right" ui-sref="session.exploreViaType({viewType: \'completed\'})"><span class="badge" ng-bind="statistics.this_month_completed_sessions"></span></a></p><p ng-if="statistics.loaded"><span>{{\'PB082\'|t}}</span><a class="pull-right" ui-sref="notebookAlias.mine({userId:currentUser.id})"><span class="badge" ng-bind="statistics.this_month_notebooks"></span></a></p></div></div><div class="panel no-border" ng-if="myStudents&&myStudents.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="(myStudents&&myStudents.length>3)"><a ui-sref="contacts.student">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'M0097\'|t}}</h5><div class="row"><div kp-user-card user-id="item.id" class="col-xs-3 dashboard-card" ng-repeat="item in myStudents track by item.id"><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="user({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{item.nickname}}"></a></div></div></div></div><div class="panel no-border" ng-if="myTeachers&&myTeachers.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="(myTeachers)&&(myTeachers.length>3)"><a ui-sref="contacts.teacher">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'M0096\'|t}}</h5><div class="row"><div kp-user-card user-id="item.id" class="col-xs-3 dashboard-card" ng-repeat="item in myTeachers track by item.id"><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="teacher({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" alt="{{item.nickname}}"></a></div></div></div></div><div class="panel no-border" ng-if="myFriends&&myFriends.length>0"><div class="panel-body"><span class="pull-right hidden-phone" ng-if="myFriends&&myFriends.length>3"><a ui-sref="contacts.partner">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t text-bold">{{\'M0087\'|t}}</h5><div class="row"><div kp-user-card user-id="item.id" class="col-xs-3 dashboard-card" ng-repeat="item in myFriends track by item.id"><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="user({id:item.id})"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar alt="{{item.nickname}}"></a></div></div></div></div><div class="panel no-border visible-desktop"><div class="panel-body"><p>{{\'RP114\'|t}}</p><button ui-sref="referral" class="btn btn-block" href="/referral">{{\'RP021\'|t}}</button></div></div><div class="panel no-border visible-desktop"><div class="panel-body"><h5 class="no-margin-t text-bold">{{\'MH022\'|t}}</h5><ul class="no-grid-gutter-h"><li><a href="http://support.italki.com/hc/en-us/articles/206352268-How-do-I-schedule-a-lesson-with-an-italki-teacher" target="_Blank">{{\'MH240\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/206352728-What-are-italki-credits-ITC-and-how-do-I-purchase-them" target="_Blank">{{\'MH241\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/206352728-What-are-italki-credits-ITC-and-how-do-I-purchase-them" target="_Blank">{{\'MH242\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/213716298-How-do-I-become-an-italki-teacher" target="_Blank">{{\'MH243\'|t}}</a></li></ul></div></div><kp-ad-system loc="DAS_L"></kp-ad-system></div><div class="col-md-9 col-sm-8"><kp-count-time-down-dashboard ng-show="promoBox.show"></kp-count-time-down-dashboard><div ng-show="referral.show"><div class="panel no-border promoBox is-relative" ng-show="ReferralData&&ReferralData.has_been_referral_message"><div class="panel-body"><h4 class="no-margin-t" ng-show="ReferralData.been_referral_status==2" style="color: #ff4338; font-weight: 600">{{\'RP746\'|t}}</h4><h4 class="no-margin-t" ng-show="ReferralData.been_referral_status==0" style="color: #ff4338; font-weight: 600">{{\'RP755\'|t}}</h4><div class="row"><div class="col-md-8"><p class="text-lb text-muted">{{\'RP752\'|t}}</p></div><div class="col-md-4"><a class="btn btn-primary btn-block" ui-sref="referral" target="_blank">{{\'RP748\'|t}}</a></div></div><button type="button" class="close" aria-hidden="true" ng-click="delReferralData()" style="position: absolute;z-index:1000; top: 4px;right: 6px">×</button></div></div><div class="panel no-border promoBox is-relative"><div class="panel-body"><div class="row"><div class="col-md-10 col-sm-9"><p class="text-lb text-muted no-margin-b">{{"RP745"|t}}</p></div><div class="col-md-2 col-sm-3"><a class="btn btn-primary btn-block" ui-sref="referral" target="_blank" id="Invite">{{\'RP750\'|t}}</a></div></div></div></div></div><div class="panel loading-layout mySession"><div class="panel-body no-padding-b"><h4 class="no-margin-t">{{\'M0047\'|t}}</h4><div><kp-loading indicator="statistics.loaded"></kp-loading><div ng-if="statistics.all>0"><div ng-if="!currentUser.is_teacher" class="stat-panel"><ul class="profile_card list-inline"><li><div ui-sref="session.exploreViaType({viewType: \'actionrequired\'})" class="info yes-cursor cursor-over"><span class="text-muted">{{\'MH103\'|t}}</span><br><strong class="text-lg text-muted" ng-class="{\'text-danger\':statistics.action_required!=0}">{{statistics.action_required}}</strong></div></li><li><div ui-sref="session.exploreViaType({viewType: \'waiting\'})" class="info yes-cursor cursor-over"><span class="text-muted">{{\'MH104\'|t}}</span><br><strong class="text-lg text-muted">{{statistics.waiting_response}}</strong></div></li><li><div ui-sref="session.exploreViaType({viewType: \'problem\'})" class="info yes-cursor cursor-over"><span class="text-muted">{{\'MH105\'|t}}</span><br><strong class="text-lg text-muted" ng-class="{\'text-danger\':statistics.in_problem!=0}">{{statistics.in_problem}}</strong></div></li><li><div ui-sref="session.packageViaType({viewType: \'active\'})" class="info yes-cursor cursor-over"><span class="text-muted">{{\'MH106\'|t}}</span><br><strong class="text-lg text-muted">{{statistics.activepackages}}</strong></div></li></ul><div class="clearfix"></div></div><div ng-if="currentUser.is_teacher" class="teacher-stat-panel stat-panel"><ul class="profile_card list-inline"><li><div ui-sref="session.exploreViaType({viewType: \'newrequests\'})" class="info yes-cursor cursor-over"><div class="text-muted card-title">{{\'TPA03\'|t}}</div><span class="text-lg text-muted text-slim" ng-class="{\'text-danger\':statistics.new_requests!=0}">{{teacher.statistics.new_requests}}</span></div></li><li><div ui-sref="session.exploreViaType({viewType: \'ongoing\'})" class="info yes-cursor cursor-over"><div class="text-muted card-title">{{\'TP768\'|t}}</div><span class="text-lg text-muted text-slim">{{teacher.statistics.on_going}}</span></div></li><li><div ui-sref="session.exploreViaType({viewType: \'problem\'})" class="info yes-cursor cursor-over"><div class="text-muted card-title">{{\'MH105\'|t}}</div><span class="text-lg text-muted text-slim" ng-class="{\'text-danger\':statistics.in_problem!=0}">{{teacher.statistics.in_problem}}</span></div></li><li><div ui-sref="session.exploreViaType({viewType: \'completedcancelled\'})" class="info yes-cursor cursor-over"><div class="text-muted card-title">{{\'TP769\'|t}}</div><span class="text-lg text-muted text-slim">{{teacher.statistics.completed_cancelled}}</span></div></li><li><div ui-sref="session.packageViaType({viewType: \'active\'})" class="info yes-cursor cursor-over"><div class="text-muted card-title">{{\'MH106\'|t}}</div><span class="text-lg text-muted text-slim">{{teacher.statistics.packages}}</span></div></li></ul><div class="clearfix"></div></div></div></div><h5 class="no-margin-t" ng-if="statistics.all>0"><strong>{{\'MH078\'|t}}</strong></h5><div class="widget-comments widget-comments2 fade active in" ng-if="statistics.all>0&&upsession_items&&upsession_items.length>0"><kp-loading indicator="upsession_items"></kp-loading><div class="comment yes-cursor cursor-over" ng-repeat="item in upsession_items | limitTo:5" ng-if="upsession_items&&upsession_items.length>0" ng-click="goToDetail(item)"><a><img class="rounded comment-avatar avatar-round" title="{{item.oppo_user_obj.nickname}}" ng-src="{{item.oppo_user_obj|avatar}}" kp-fallback-avatar></a><div class="row comment-content"><div class="col-md-8"><div class="comment-body" style="margin-left: 0"><div class="comment-text"><strong>{{item.session_start_time_user|amDate:\'TF004\'}} - {{item.session_end_time_user|amDate:\'HH:mm\' }}</strong> &nbsp; <span ng-show="item.message_unread>0" class="is-relative"><i class="fa fa-envelope text-muted" title="{{\'TS234\'|format:item.message_unread}}"></i> <i class="fa fa-circle text-danger" style="font-size: 9px;top: -5px;right: -5px;position: absolute !important"></i></span><div class="text-muted">{{item.focus_user_is_teacher?\'Student\':\'Teacher\'}}: {{item.oppo_user_obj.nickname}}</div><ul class="list-inline no-margin-b"><li class="text-muted course-title v-middle">{{ item|sessionCourseTitle }}</li><li class="text-muted course-id v-middle">- ID: {{item.session_id}}</li><li ng-if="item.session_type==\'2\'" class="v-middle"><span class="label package" translate="TS038"></span></li></ul></div></div></div><div class="col-md-4 panel-right no-margin-b" ng-if="item.im_type === \'Z\'"><div kp-go-classroom session-obj="item" class="btn btn-primary-new panel-right-btn text-up" ng-class="{\'btn-primary-new\':!(item.session_start_time|waitMinutes:(15*item.session_duration)),\'btn-outline-primary\':(item.session_start_time|waitMinutes:(15*item.session_duration))}">{{(item.session_start_time|waitMinutes:(15*item.session_duration))?\'RTC101\':\'RTC100\'|t}}</div></div></div></div></div><div ng-if="statistics.loaded"><div><div ng-if="statistics.all==0&&!isTeacher()"><div class="dropzone grid-gutter-margin-b"><div class="dropzone-message text-center"><p class="text-slg text-slim">{{\'M0038\'|t}}</p><div class="row"><div class="col-md-6 text-center yes-cursor" ui-sref="professional"><img src="/static/images/static/proff.png"><h3>{{\'MH504\'|t}}</h3><span class="text-lb">{{\'MH505\'|t}}</span></div><div class="col-md-6 text-center yes-cursor" ui-sref="tutor"><img src="/static/images/static/tutor.png"><h3>{{\'MH506\'|t}}</h3><span class="text-lb">{{\'MH507\'|t}}</span></div></div></div></div></div><div ng-if="statistics.all>0&&upsession_items.length==0&&!isTeacher()"><div class="dropzone grid-gutter-margin-b"><div class="dropzone-message text-center"><p><img src="/static/images/icon_norecord.png" class="rounded"></p><p class="text-lg">{{\'MH219\'|t}}</p><p class="dz-text-small">{{\'MH508\'|t}}</p><p><button class="btn btn-primary btn-lg" ng-click="openSchedule()"><span class="btn-txt">{{\'MH404\'|t}}</span></button></p><a ui-sref="teachers">{{\'M0000\'|t}}</a></div></div></div><div ng-if="isTeacher()&&upsession_items.length==0"><div class="dropzone grid-gutter-margin-b"><div class="dropzone-message text-center"><p><img src="/static/images/icon_norecord.png" class="rounded"></p><p class="text-lg">{{\'MH509\'|t}}</p><hr><div class="text-left"><ul class="list-inline text-center"><li><span class="dz-text-small">{{\'MH510\'|t}}</span></li><li><a ui-sref="setting.availability">{{\'MH511\'|t}}</a></li><li><a ui-sref="setting.course">{{\'MH512\'|t}}</a></li></ul></div></div></div></div></div></div><a class="btn btn-labeled btn-block" style="margin-bottom: 20px" ng-if="statistics.all>0&&upsession_items&&upsession_items.length>5" ui-sref="session.exploreViaType({viewType: \'upcoming\'})">{{\'MH160\'|t|format:upcoming_length}}</a></div></div><div ng-if="article" class="panel panel-default widget-support-tickets" id="dashboard-support-tickets"><div class="panel-body"><h4 class="no-margin-t">{{\'MH079\'|t}}</h4><div><strong><a ui-sref="articleDetail({\'id\':article.id,\'title\':(article.title|titleRevert)})" class="ticket-title">{{article.title}}</a></strong><p ng-bind="article.abstract"></p><span class="text-light-gray"><ul class="list-inline no-margin-b"><li><img ng-src="{{article.creator_obj.avatar_file_name|avatar:50 }}" kp-fallback-avatar class="rounded" style="width: 30px"></li><li><a ui-sref="user({\'id\':article.creator_obj.id})" ng-bind="article.creator_obj.nickname"></a></li><li><a ui-sref="article.lang({\'lang\':article.learn_language})"><span ng-bind="article.learn_language|t"></span></a></li><li>{{\'AS148\'|t|format:article.view_count}}</li><li>{{\'C2025\'|t|format:article.comment_count}}</li></ul></span></div></div></div><div class="panel panel-default plain toggle panelMove panelClose panelRefresh loading-layout"><div class="panel-body"><h4 class="no-margin-t">{{\'MH080\'|t}} <span style="border-left: 1px #ddd solid;margin: 0px 15px;font-size:24px"></span> <span style="position: relative"><div class="hidden-phone party-size-picker dtp-picker-selector select-native" style="position:absolute; left: 0px; top: -1px; float: none; width: auto;height: auto"><a class="select-label dtp-picker-selector-link dashboard" tabindex="-1" style="white-space: nowrap;padding: 0px 30px 0px 0px">{{(filter.language?filter.language:\'C0028\'|t)|t}}</a><select class="form-control ng-pristine ng-valid" ng-model="filter.language" ng-change="reload()"><option value="" class="">{{\'C0028\'|t}}</option><option value="{{item.language}}" ng-repeat="item in currentUser.language_obj_s">{{item.language|t}}</option></select></div></span></h4><div class="visible-phone party-size-picker dtp-picker-selector select-native two db"><a class="select-label dtp-picker-selector-link small" tabindex="-1">{{(filter.language?filter.language:\'C0028\'|t)|t}}</a><select class="form-control" ng-model="filter.language" ng-change="reload()"><option value="" class="">{{\'C0028\'|t}}</option><option value="{{item.language}}" ng-repeat="item in currentUser.language_obj_s">{{item.language|t}}</option></select></div><div style="clear: both"></div><div class="widget-comments widget-comments2 tab-pane no-padding fade active in"><kp-loading indicator="!loadingFlag" ng-show="!loadMoreFlag"></kp-loading><kp-no-found items="activity_items"></kp-no-found><div ng-repeat="active in activity_items" class="comment yes-cursor cursor-over" ng-click="goToSelfUrl(active)"><div class="is-relative comment-card" kp-user-card user-id="active.poster_obj.id"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({\'id\':active.poster_obj.id})"><img ng-src="{{ active.poster_obj|avatar:50 }}" kp-fallback-avatar alt="" class="comment-avatar"></a></div><div class="comment-body"><div class="comment-text"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="user({\'id\':active.poster_obj.id})">{{active.poster_obj.nickname}}</a> <span ng-switch="active.activity_type"><span ng-switch-when="1">{{\'MH207\'|t}}:</span> <span ng-switch-when="3">{{\'MH205\'|t}}:</span> <span ng-switch-when="5">{{\'MH204\'|t}}:</span> <span ng-switch-when="11">languagehacking:</span></span> <span ng-switch="active.activity_type"><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-switch-when="1" ui-sref="questionAlias.entity({id:active.post_id})">{{active.post_obj.title}}<br></a> <a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-switch-when="3" ui-sref="discussionAlias.entity({id:active.post_id})">{{active.post_obj.title}}<br></a> <a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-switch-when="5" ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}<br></a> <a onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-switch-when="11" ui-sref="languagehackingentity({language:active.post_obj.language,sort:active.post_obj.sort,id:active.post_obj.user_mission_id})">{{active.post_obj.title}}<br></a> <span ng-if="active.activity_type!=11" ng-bind-html="active.post_obj.content|delHtmlTag|subStrLen:100:\'...\'"></span> <span ng-if="active.activity_type==11" ng-bind-html="active.post_obj.desc|delHtmlTag|subStrLen:100:\'...\'"></span></span></div><div class="comment-by"><ul class="list-inline no-margin-b"><li>{{active.post_obj.language|t}}</li><li>{{active.create_time|prettyDate}}</li><li ng-if="active.post_obj.correction_count || active.post_obj.correction_count==0">{{\'NB020\'|t|format:active.post_obj.correction_count}}</li><li ng-if="active.post_obj.answer_count || active.post_obj.answer_count==0">{{\'C2030\'|t|format:active.post_obj.answer_count}}</li><li ng-if="active.post_obj.comment_count || active.post_obj.comment_count==0">{{\'GP035\'|t|format:active.post_obj.comment_count}}</li></ul></div></div></div></div><button ng-if="(meta && meta.has_next)||loadMoreFlag" class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore();" stext="MH046"></button></div></div><kp-ad-system loc="DAS_B"></kp-ad-system></div></div></div>'),
a.put("/views/dashboard/modal/mobile.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'RTC244\'|t}}</h4></div><div class="modal-body padding-top"><h5 class="no-margin-t">{{\'RTC241\'|t}}</h5><div class="grid-gutter-margin-b text-sm">{{\'RTC242\'|t}}</div><div class="text-muted text-sm">{{\'RTC243\'|t}}</div><div class="text-muted text-sm" ng-if="!session_item.skye_account">{{\'RTC251\'|t|format:session_item.oppo_user_obj.nickname}}</div><div class="text-muted text-sm" ng-if="session_item.skye_account">SKYPE ID: <strong>{{session_item.skye_account}}</strong></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$close()">{{\'C0064\'|t}}</button></div>'),a.put("/views/finance/account/index.html",'<h2>{{ \'PM000\'|t }}</h2><div class="row"><div class="col-md-12"><div class="panel"><div class="panel-body"><div ng-include="\'views/finance/common/nav.html\'"></div><div autoscroll="false" ui-view></div></div></div></div></div>'),a.put("/views/finance/account/payment/list.html",'<div class="table-light"><div class="table-header"><h4 translate="PM010"></h4><div class="row"><div class="col-md-10 pull-left"><ul class="list-inline"><li>{{ \'PM052\'|t }}: 1,100 ITC</li><li>{{ \'PM051\'|t }}: 1,100 ITC</li><li class="last">{{ \'PM054\'|t }}: 0 ITC</li></ul></div><div class="col-md-2 pull-right"><select class="form-control" name="days" ng-model="days" ng-change="changeFilter()" ng-init="days=-91"><option value="-91">{{ \'PM055\'|t }}</option><option value="-365">{{ \'PM075\'|t }}</option><option value="0">{{ \'C0024\'|t }}</option></select></div></div></div><div id="div_datacontent"><table class="table table-bordered"><thead><tr><th class="center">{{ \'PM036\'|t }}</th><th class="center">{{ \'PM037\'|t }}</th><th class="center">{{ \'PM042\'|t }}</th><th class="center">{{ \'PM040\'|t }}</th><th class="center">{{ \'PM045\'|t }}</th><th class="center">{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items"><td class="center">{{item.order_id}}</td><td class="center">{{item.utc_time|amDate:\'TF005\':true}}</td><td class="center">{{(item.status|paymentHistoryDesc:item.account_type)|t}}</td><td class="center">{{item.itc}}</td><td class="center">{{item.avai_rest_itc}}</td><td class="center"><a href="">{{ \'MH119\'|t }}</a> <span ng-if="[\'7\',\'9\',\'D\'].indexOf(item.status)>-1">&nbsp;|&nbsp;</span> <a ng-if="[\'7\',\'9\',\'D\'].indexOf(item.status)>-1">{{ \'PM127\'|t }}</a></td></tr></tbody></table><div class="pagination"><ul></ul></div></div><div id="div_templete_Related" style="display:none"><div class="margin10"><div class="floatl"><input type="button" class="button" value="Go back" onclick="returnRelatedData()"></div><div class="clear"></div></div><table cellspacing="0" cellpadding="0" class="nt"><thead><tr><th class="center">{{ \'PM036\'|t }}</th><th class="center">{{ \'PM037\'|t }} (UTC)</th><th class="center">{{ \'PM042\'|t }}</th><th class="center">{{ \'PM040\'|t }}</th></tr></thead><tbody id="tbody_Related"></tbody></table></div></div>'),a.put("/views/finance/account/purchase/list.html","<div class=\"table-light\"><div class=\"table-header\"><h4 translate=\"PM011\"></h4><ul class=\"list-inline\"><li>{{ 'PM052'|t }}: 1,100 ITC</li><li>{{ 'PM051'|t }}: 1,100 ITC</li><li class=\"last\">{{ 'PM054'|t }}: 0 ITC</li></ul></div><div><table class=\"table table-bordered\" ng-if=\"items\"><thead><tr><th>{{ 'PM036'|t }}</th><th>{{ 'PM037'|t }} (UTC)</th><th>{{ 'PM038'|t }}</th><th>{{ 'PM040'|t }}</th><th>{{ 'PM041'|t }}</th><th>{{ 'TP088'|t }}</th></tr></thead><tbody><tr ng-repeat=\"item in items\"><td>{{item.order_id }}</td><td>{{item.utc_time|amDate:'TF005':true}}</td><td>{{ getI18nKey(item.account_type)|t }}</td><td>{{ item.itc }}</td><td ng-switch=\"item.status\"><span ng-switch-when=\"1\">{{ 'PM455'|t }}</span> <span ng-switch-when=\"2\" ng-if=\"item.account_type!='0'\">{{ 'PM454'|t }}</span> <span ng-switch-default><a ng-click=\"purchaseBankTransferInfo(item.id)\">{{ 'PM457'|t }}</a></span></td><td><a href=\"\" target=\"_blank\">{{ 'TP132'|t }}</a></td></tr></tbody></table></div></div>"),a.put("/views/finance/account/revenue/entity.html",'<div class="grid-gutter-margin-b"><h4>Payment ID: P16033981484</h4><table class="table table-bordered"><tbody><tr><td><strong>Time</strong></td><td>04/10/2014 19:17</td></tr><tr><td><strong>Description</strong></td><td>西文</td></tr><tr><td><strong>Student</strong></td><td>Islanding</td></tr><tr><td><strong>Teacher</strong></td><td>skip</td></tr><tr><td><strong>Amount (ITC)</strong></td><td>80 ITC</td></tr><tr><td><strong>Status</strong></td><td>Completed</td></tr></tbody></table></div><div class=""><input type="button" class="btn" value="Go back" onclick="window.history.back()"></div>'),a.put("/views/finance/account/revenue/list.html",'<div class="table-light"><div class="table-header"><h4 translate="PM009"></h4><div class="row"><div class="col-md-10 pull-left"><ul class="list-inline"><li>{{ \'PM052\'|t }}: 391 ITC</li><li>{{ \'PM051\' }}: 391 ITC</li><li>{{ \'PM053\'|t }}: 0 ITC</li></ul></div><div class="col-md-2 pull-right"><select class="form-control" name="days" ng-model="days" ng-change="changeFilter()" ng-init="days=-91"><option value="-91">{{ \'PM055\'|t }}</option><option value="-365">{{ \'PM075\'|t }}</option><option value="-90000">{{ \'C0024\'|t }}</option></select></div></div></div><div id="div_datacontent"><table class="table table-bordered" ng-if="items"><thead><tr><th>{{ \'PM036\'|t }}</th><th>{{ \'PM037\'|t }}</th><th>{{ \'PM042\'|t }}</th><th>{{ \'PM040\'|t }}</th><th>{{ \'PM045\'|t }}</th><th>{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items"><td>{{item.order_id}}</td><td>{{item.utc_time|amDate:\'TF005\':true}}</td><td>{{item.status|revenueHistoryDesc|t}}</td><td>{{item.itc}}</td><td>{{item.avai_rest_itc}}</td><td><a ui-sref="revenueDetail.get" ng-if="item.status!=\'I\'">View detail</a> <span ng-if="item.status!=\'I\'&&[\'7\',\'F\',\'E\',\'I\'].indexOf(item.status)>-1">&nbsp;|&nbsp;</span> <a ui-sref="revenueDetail.relation" ng-if="[\'7\',\'F\',\'E\',\'I\'].indexOf(item.status)>-1">View related transactions</a></td></tr></tbody></table><div class="pagination"><ul></ul></div></div></div>'),a.put("/views/finance/account/revenue/relation.html",'<div class="grid-gutter-margin-b" id="div_templete_Related" style=""><table class="table table-bordered"><thead><tr><th>支付ID</th><th>时间 (UTC)</th><th>描述</th><th>金额 (ITC)</th></tr></thead><tbody id="tbody_Related"><tr><td class="center">P16033981484</td><td class="center">04/10/2014 11:17</td><td class="center">服务费</td><td class="center">-12</td></tr><tr><td class="center">P16033981484</td><td class="center">04/10/2014 11:17</td><td class="center">课时支付</td><td class="center">80</td></tr></tbody></table></div><div class=""><input type="button" class="btn" value="Go back" onclick="window.history.back()"></div>'),a.put("/views/finance/account/withdrawal/list.html","<div class=\"note note-info\">{{ 'PM713'|t }} {{ 'PM714'|t }}<br>{{ 'PM723'|t }}</div><div class=\"table-light\"><div class=\"table-header\"><h4 translate=\"PM009\"></h4><ul class=\"list-inline\"><li>{{ 'PM052'|t }}: 391 ITC</li><li>{{ 'PM051'|t }}: 391 ITC</li><li class=\"last\">{{ 'PM053'|t }}: 0 ITC</li></ul></div><div><table class=\"table table-bordered\" ng-if=\"items\"><thead><tr><th>{{'PM036'|t}}</th><th>{{ 'PM037'|t }} (UTC)</th><th>{{ 'PM039'|t }}</th><th>{{ 'PM040'|t }}</th><th>{{ 'PM041'|t }}</th><th>{{ 'TP088'|t }}</th></tr></thead><tbody><tr ng-repeat=\"item in items\"><td>{{item.order_id}}</td><td>{{item.create_date|amDate:'TF005':true}}</td><td>{{ getI18nKey(item.withdraw_method)|t }}({{ item.account }})</td><td>{{item.itc}}</td><td>{{ item.status|withdrawHistoryDesc|t }}</td><td><a href=\"/payment/applywithdraw.htm?op=edit\" ng-if=\"item.can_edit\">{{ 'C0053'|t }}</a> <a href=\"\" ng-if=\"item.can_cancel\">{{ 'C0056'|t }}</a></td></tr></tbody></table><kp-no-found items=\"items\"></kp-no-found></div></div>"),a.put("/views/finance/add.more.credits.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title" style="font-weight: 500">{{\'PM923\'|t}}</h4></div><div class="modal-body"><p class="more-credits-desc" ng-bind-html="\'PM924\'|t"></p><div class="more-credits"><div class="credits-container text-center"><button class="btn btn-primary pull-left btn-rounded btn-more-credits" ng-click="decreaseCredits()" ng-disabled="moreCreditsUSD <= 10"><img width="15" src="/static/images/-.png"></button> <span class="more-credits-amount">$<input class="credits-input" type="text" ng-model="moreCreditsUSD"></span> <button class="btn btn-primary pull-right btn-rounded btn-more-credits" ng-click="increaseCredits()" ng-disabled="moreCreditsUSD >= 1000"><img width="15" src="/static/images/+.png"></button></div><p ng-show="creditsInvalidMin" class="text-center" style="color: #cb242b;margin-top: 5px">{{\'PM376\'|t|format:\'10\'}}</p><p ng-show="creditsInvalidMax" class="text-center" style="color: #cb242b;margin-top: 5px">{{\'PM377\'|t|format:\'1000\'}}</p><p class="more-credits-currency">{{currentUser.currency}} {{creditsCurrency}}</p></div></div><div class="modal-footer"><button class="btn btn-default pull-left" type="button" data-dismiss="modal" ng-click="$dismiss()">{{\'PM925\'|t}}</button> <button style="text-transform: uppercase" class="btn btn-primary payment-more-credits-btn pull-right" type="button" ng-click="addCredits(moreCreditsUSD)">{{\'C0123\'|t}}</button></div>'),a.put("/views/finance/common/more.modal.html",'<div class="panel-body"><div class="table-light ng-scope"><div class="table-header"><h4 translate="PM010" class="ng-scope">Payment account details</h4><div class="row"><div class="col-md-10 pull-left"><ul class="list-inline"><li>Total Balance: 1,100 ITC</li><li>{{\'TS057\'|t}}: 1,100 ITC</li><li class="last">Purchase Pending: 0 ITC</li></ul></div><div class="col-md-2 pull-right"><select class="form-control ng-pristine ng-valid" name="days" ng-model="days" ng-change="changeFilter()" ng-init="days=-91"><option value="-91" class="ng-binding">Past 3 months</option><option value="-365" class="ng-binding">PM075</option><option value="0" class="ng-binding">All</option></select></div></div></div><div><table class="table table-bordered"><thead><tr><th>{{ \'PM036\'|t }}</th><th>{{ \'PM037\'|t }}</th><th>{{ \'PM042\'|t }}</th><th>{{ \'PM040\'|t }}</th><th>{{ \'PM045\'|t }}</th><th class="center">{{ \'TP088\'|t }}</th></tr></thead><tbody><tr class="ng-scope"><td class="center ng-binding">1004167</td><td class="center ng-binding">09/03/2015 03:52</td><td class="center ng-binding">Paid for product</td><td class="center ng-binding">-50</td><td class="center ng-binding">2149</td><td class="center"><a href="">View detail</a></td></tr><tr class="ng-scope"><td class="center ng-binding">TC2421555586</td><td class="center ng-binding">06/03/2015 02:37</td><td class="center ng-binding">Transfer from Revenue Account</td><td class="center ng-binding">50</td><td class="center ng-binding">2199</td><td class="center"><a href="">View detail</a></td></tr><tr class="ng-scope"><td class="center ng-binding">O17401465585</td><td class="center ng-binding">13/02/2015 06:17</td><td class="center ng-binding">Buy Credits</td><td class="center ng-binding">100</td><td class="center ng-binding">2149</td><td class="center"><a href="">View detail</a></td></tr><tr class="ng-scope"><td class="center ng-binding">O19491434585</td><td class="center ng-binding">13/02/2015 06:05</td><td class="center ng-binding">Buy Credits</td><td class="center ng-binding">100</td><td class="center ng-binding">2049</td><td class="center"><a href="">View detail</a></td></tr><tr class="ng-scope"><td class="center ng-binding">P14864236365</td><td class="center ng-binding">11/02/2015 03:08</td><td class="center ng-binding">Paid for session</td><td class="center ng-binding">-100</td><td class="center ng-binding">1949</td><td class="center"><a href="">View detail</a></td></tr><tr class="ng-scope"><td class="center ng-binding">1004166</td><td class="center ng-binding">23/12/2014 08:08</td><td class="center ng-binding">Paid for product</td><td class="center ng-binding">-100</td><td class="center ng-binding">2049</td><td class="center"><a href="">View detail</a></td></tr></tbody></table><div class="pagination"><ul></ul></div></div><div id="div_templete_Related" style="display:none"><div class="margin10"><div class="floatl"><input type="button" class="button" value="Go back" onclick="returnRelatedData()"></div><div class="clear"></div></div><table cellspacing="0" cellpadding="0" class="nt"><thead><tr><th class="center">Payment ID</th><th class="center">Time (UTC)</th><th class="center">Description</th><th class="center">Amount (ITC)</th></tr></thead><tbody id="tbody_Related"></tbody></table></div></div></div>'),a.put("/views/finance/common/nav.html",'<div class="grid-gutter-margin-b"><ul class="nav nav-pills"><li ng-class="{active:$state.includes(\'finance.overview\')}"><a ui-sref="finance.overview" translate="PM080"></a></li><li ng-class="{active:$state.includes(\'finance.purchase\')}"><a ui-sref="finance.purchase">{{ \'PM081\'|t }}</a></li><li ng-class="{active:$state.includes(\'finance.withdraw\')}"><a ui-sref="finance.withdraw" translate="PM082"></a></li><li ng-class="{active:$state.includes(\'finance.transfer\')}"><a ui-sref="finance.transfer" translate="PM090"></a></li><li ng-class="{active:$state.includes(\'finance.account\')}" class="dropdown open"><a href="#" class="dropdown-toggle" data-toggle="dropdown">{{\'PM083\'}}&nbsp;&nbsp;<i class="fa fa-caret-down"></i></a><ul class="dropdown-menu"><li><a ui-sref="revenueDetail.list" translate="PM009"></a></li><li><a ui-sref="paymentDetail" translate="PM010"></a></li><li><a ui-sref="purchaseHistory" translate="PM011"></a></li><li><a ui-sref="WithdrawalHistory" translate="PM012"></a></li></ul></li><li ng-class="{active:$state.includes(\'finance.settings\')}"><a ui-sref="finance.settings" translate="PM084"></a></li></ul></div>'),a.put("/views/finance/directives/stripe.checkout.html",'<script src="https://checkout.stripe.com/checkout.js"></script><button ng-click="doCharge($event)" class="btn btn-primary" ng-disabled="!sdkLoaded"><span class="btn-txt" translate="PM109"></span></button>'),a.put("/views/finance/index.html","<div ui-view></div>"),a.put("/views/finance/new.checkout.html",'<style>.btn {\n  border-radius: 2px;\n  -moz-border-radius: 2px;\n  -webkit-border-radius: 2px;\n}\n\n  @media (min-width: 992px) {\n    html, body, #main-container {\n      height: 100% !important;\n    }\n    .payment {\n      min-height: 100%;\n    }\n  }\n  .payment {\n    margin-bottom: 60px;\n    padding-top: 30px;\n  }\n  .payment [class*="col-"] {\n    margin-bottom: 0;\n  }\n  .payment .btn[disabled] {\n    opacity: 0.5;\n    background: #ff4338 !important;\n    color: white !important;\n  }\n  .payment .panel {\n    box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.08);\n  }\n  .checkout {\n    margin-top: 0;\n  }\n  @media (max-width: 991px) {\n    .payment {\n      margin-bottom: 30px;\n    }\n    .payment a:hover {\n      color: #337ab7;\n    }\n  }\n  @media (max-width: 767px) {\n    .payment {\n      margin-bottom: 0;\n    }\n    .footer {\n      margin: 0;\n    }\n  }\n  .payment-methods {\n    border-bottom: 1px solid #e8e8e8;\n    margin: 0 -20px;\n    padding: 0 35px;\n    font-size: 18px;\n    font-weight: 500;\n    color: #333;\n  }\n  .tab-name {\n    font-size: 18px;\n  }\n  @media (max-width: 991px) {\n    .tab-name {\n      margin-bottom: 0;\n    }\n  }\n  @media (max-width: 767px) {\n    .tab-name {\n      font-size: 14px;\n    }\n  }\n  .payment-active {\n    border-bottom: solid 5px #ff4338;\n  }\n  .payment-active p {\n    color: #ff4338;\n  }\n  .payment-form h3 {\n    margin: 20px 0 20px 5px;\n    font-size: 23px;\n    font-weight: 300;\n  }\n\n  @media (max-width: 767px) {\n    .payment-form h3 {\n      margin: 20px 0 20px 5px;\n      font-size: 20px;\n      font-weight: 300;\n      line-height: 1.35;\n    }\n  }\n\n  label {\n    font-size: 13px;\n    font-weight: bold;\n    color: #333333;\n    white-space: nowrap;\n  }\n\n  .credit-card {\n    height: 32px;\n    margin-right: 5px;\n    float: left;\n  }\n\n  .credit-card img {\n    height: 32px;\n    border: solid 1px #cccccc;\n    border-radius: 2px;\n  }\n\n  .credit-card-grayscale {\n    -webkit-filter: grayscale(100%);\n    filter: grayscale(100%);\n  }\n\n  .credit-card-selected {\n    -webkit-filter: none;\n    filter: none;\n  }\n\n  .credit-card-selected img {\n    border: solid 2px #000;\n  }\n\n  h3 {\n    margin:60px 0px 0px 0px;\n    font-size: 23px;\n    font-weight: 300;\n  }\n\n  h4 {\n    font-weight: 300;\n    color: #333333;\n    margin-top: 0;\n  }\n\n  .foot-note {\n    color: #333;\n    margin: 35px 0 0 0;\n  }\n  @media (max-width: 767px) {\n    .foot-note {\n      margin: 0;\n    }\n  }\n\n  .help-box {\n    margin-bottom: 0;\n  }\n  @media (max-width: 991px) {\n    .help-box {\n      margin-top: 22px;\n    }\n  }\n  @media (max-width: 767px) {\n    .help-box {\n      margin-bottom: 22px;\n    }\n  }\n  .help-box select {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    border: solid 1px #cccccc;\n    outline: none;\n    height: 32px;\n    width: 100%;\n    padding: 0;\n    margin: 5px 5px 40px 5px;\n  }\n\n  .help-box h4 {\n    font-size: 23px;\n    font-weight: 300;\n    color: #333333;\n  }\n  .help-box .ui-select-match-text {\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    width: 90%;\n    /* if not support -webkit-line-clamp */\n    height: 18px;\n  }\n  .help-box .ui-select-bootstrap .ui-select-choices-row > a{\n    white-space: normal;\n  }\n  .ui-select-toggle,.ui-select-search{\n    border: 1px solid #ccc;\n    background: #fff;\n    padding: 5px 14px;\n    font-size: 14px;\n    height: 32px;\n    cursor: pointer;\n  }\n  .credit-card-row {\n    margin-top: 35px;\n  }\n  @media (max-width: 767px) {\n    .credit-card-row {\n      margin-top: 10px;\n    }\n    .billing-country-xs-col {\n      margin-bottom: 20px !important;\n    }\n  }\n  .expired-month:after {\n    content: \'/\';\n    position: absolute;\n    top: 30px;\n    font-size: 16px;\n    font-weight: 300;\n    right: -5px;\n  }\n  .theme-white .form-control:focus {\n    border-color: #337ab7;\n  }\n  .card-input-error {\n    border-color: #cb242b !important;\n  }\n  .error-msg {\n    display: inline-block;\n    margin-top: 5px;\n    line-height: 1.38;\n    color: #cb242b;\n    font-size: 13px;\n    white-space: nowrap;\n  }\n  .payment-method-head {\n    margin: 35px 0 !important;\n    padding-top: 20px;\n    border-top: 1px solid #e8e8e8;\n  }\n  @media (max-width: 991px) {\n    .payment-method-head {\n      margin: 20px 0 10px !important;\n    }\n  }\n  .payment-desc {\n    font-size: 16px;\n    line-height: 1.19;\n    color: #333333;\n  }\n  .payment-tip {\n    margin-top: 25px;\n    font-size: 16px;\n    line-height: 1.19;\n    color: #333333;\n  }\n  @media (max-width: 991px) {\n    .payment-tip {\n      margin-top: 10px;\n    }\n  }\n  .order-info {\n    margin: 20px 0 10px;\n  }\n  @media (max-width: 991px) {\n    .order-info {\n      margin: 0;\n    }\n  }\n  .teacher {\n    margin-bottom: 20px;\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .teacher {\n      margin: 0;\n    }\n  }\n  @media (max-width: 767px) {\n    .teacher {\n      height: auto;\n      min-height: 80px;\n    }\n  }\n  .order-small-head {\n    margin-top: 0;\n    margin-bottom: 5px;\n    font-size: 12px;\n    font-weight: 400;\n    color: #777777;\n  }\n  .order-desc {\n    font-size: 12px;\n    font-weight: 400;\n    line-height: 1.17;\n    color: #333333;\n  }\n  @media (max-width: 992px) {\n    .order-desc {\n      font-size: 12px;\n    }\n  }\n  @media (max-width: 768px) {\n    .order-desc {\n      font-weight: normal;\n    }\n  }\n  .order-details-head {\n    font-size: 14px;\n    color: #777;\n    font-weight:300;\n    text-transform: capitalize;\n  }\n\n  .order-details-desc {\n    font-size: 14px;\n    line-height: 1.36;\n    color: #333333;\n  }\n  .order-teacher {\n    padding-left: 100px;\n  }\n  .course-name, .teacher-name {\n    padding-left: 100px;\n  }\n  .course {\n    margin: 0 -20px;\n    padding: 0 20px 10px;\n    border-bottom: 1px solid #f1f1f1;\n  }\n  @media (max-width: 991px) {\n    .course {\n      margin: 20px -20px 0;\n      border-top: 1px solid #f1f1f1;\n      border-bottom: 0;\n      padding-bottom: 0;\n    }\n  }\n  @media (max-width: 767px) {\n    .course {\n      margin: 0 -20px;\n    }\n  }\n  .avatar {\n    border-radius: 50%;\n    width: 80px;\n    height: 80px;\n    float: left;\n    box-shadow: 0 2px 15px 0 rgba(0, 0, 0, 0.1);\n    border: 2px solid white;\n  }\n  .order-duration, .order-time, .order-communication, .order-price, .order-checkout {\n    padding: 5px 0;\n    border-bottom: 1px solid #f1f1f1;\n  }\n  .order-checkout-detail {\n    width: 100%;\n  }\n  @media (min-width:768px) and (max-width: 991px) {\n    .order-duration, .order-time, .order-communication, .order-price {\n      width: 40%;\n    }\n    .order-price {\n      border-bottom: 0;\n    }\n    .order-checkout {\n      position: relative;\n      border-top: 1px solid #f1f1f1;\n      border-bottom: 0;\n    }\n    .order-checkout-detail {\n      width: 40%;\n    }\n  }\n  .order-total {\n    overflow: hidden;\n    padding: 20px 0 0;\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .order-total {\n      position: absolute;\n      top: 45%;\n      right: 0;\n      padding: 0;\n    }\n  }\n  @media (max-width: 767px) {\n    .order-total {\n      margin-bottom: 20px;\n    }\n  }\n  .order-price-desc {\n    overflow: hidden;\n    line-height: 1.36;\n  }\n  .order-price-item {\n    float: left;\n    font-size: 14px;\n  }\n  .order-price-value {\n    float: right;\n    font-size: 14px;\n    text-align: right;\n  }\n  .order-price-min {\n    color: #cb242b;\n  }\n  .order-dollar {\n    float: left;\n    margin-right: 20px;\n  }\n  .order-dollar > img {\n    width: 50px;\n    height: 50px;\n  }\n  @media (max-width: 767px) {\n    .order-dollar {\n      display: inline-block;\n      margin-right: 0;\n      padding-right: 15px;\n      width: 40%;\n      text-align: right;\n    }\n  }\n  .order-xs-price {\n    float: left;\n    margin-top: 6px;\n  }\n  @media (max-width: 767px) {\n    .order-xs-price {\n      display: inline-block;\n      width: 60%;\n    }\n  }\n  .order-xs-price > p {\n    font-size: 14px;\n    line-height: 1.36;\n    margin: 0;\n  }\n  @media (max-width: 767px) {\n    .show-details-xs-row {\n      margin: 0 -20px !important;\n    }\n  }\n  .show-details-xs-col {\n    text-align: right;\n  }\n  @media (max-width: 767px) {\n    .show-details-xs-col {\n      margin: 20px 0 -10px;\n      border-top: 1px solid #e8e8e8;\n      text-align: center;\n    }\n  }\n  .show-details-xs {\n    margin: 10px 10px 0;\n    text-align: center;\n  }\n  @media (max-width: 767px) {\n    .show-details-xs {\n      display: block;\n      margin: 0 -20px -10px;\n      padding-top: 15px;\n      border-top: 1px solid #e8e8e8;\n    }\n  }\n  .payment-method-img {\n    display: inline-block;\n    padding: 5px;\n    height: 32px;\n    border: 1px solid #ccc;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    transform: translate(100%, 0);\n    border-radius: 2px;\n  }\n  .payment-method-img > img {\n    display: block;\n    position: relative;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n  .match-col > .panel {\n    margin-bottom: 0 !important;\n    transition: min-height 0.1s;\n  }\n  .help-title {\n    margin: 10px 20px;\n    font-size: 18px;\n  }\n  .xs-pay {\n    margin: 0 -15px;\n  }\n  .xs-pay .panel {\n    margin: 0;\n  }\n  .help-icon {\n    display: inline-block;\n    margin-left: 0;\n    width: 16px;\n    height: 16px;\n    color: white;\n    background: black;\n    border-radius: 50%;\n    text-align: center;\n    vertical-align: text-bottom;\n    line-height: 1.2;\n    cursor: pointer;\n  }\n  .help-tips .tooltip-inner {\n    width: 180px;\n  }\n  .giftcard-cover {\n    float: left;\n    margin-right: 20px;\n  }\n  .giftcard-cover > img {\n    margin-top: 5px;\n    width: 80px;\n    border-bottom: 5px solid #ff4338;\n  }\n  .pay-btn-container-float, .pay-btn-container {\n    margin-bottom: 0;\n    border: 0\n  }\n  .pay-btn-container-float {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    visibility: hidden;\n    box-shadow: none;\n    transition: box-shadow 0.5s;\n  }\n  .btn-pay {\n    margin: 20px 0 0;\n    height: 40px;\n    line-height: 1;\n    font-size: 18px;\n    text-transform: uppercase;\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .btn-pay {\n      display: inline-block;\n      margin: 0;\n      float: right;\n      font-size: 18px;\n      min-width: 150px;\n      width: auto;\n    }\n  }\n  .btn-add-more, .btn-add-more:focus, .btn-add-more:active, .btn-add-more:hover, .btn-add-more:active:focus {\n    margin: 25px 0 10px;\n    padding-top: 0;\n    padding-bottom: 0;\n    height: 32px;\n    box-shadow: none !important;\n    border: 1px solid;\n    border-radius: 2px;\n    background: white;\n    line-height: 1;\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .btn-add-more, .btn-add-more:focus, .btn-add-more:active, .btn-add-more:hover, .btn-add-more:active:focus {\n      margin: 0;\n    }\n  }\n  @media (max-width: 767px) {\n    .btn-add-more, .btn-add-more:focus, .btn-add-more:active, .btn-add-more:hover, .btn-add-more:active:focus {\n      height: 26px;\n    }\n  }\n  .paypal-hint {\n    margin-top: 50px;\n    font-size: 16px;\n    line-height: 1.2;\n  }\n  @media (max-width: 991px) {\n    .paypal-hint {\n      margin-top: 20px;\n    }\n  }\n  .desktop-changeOrder {\n    display: block;\n    margin: 10px 0 0 10px;\n  }\n  @media (max-width: 767px) {\n    .more-credits {\n      position: absolute;\n      top: 50%;\n      left: 0;\n      width: 100%;\n      transform: translate3d(0, -50%, 0);\n    }\n  }\n  .credits-container {\n    margin: 35px auto 10px;\n    padding: 15px;\n    width: 350px;\n    height: 80px;\n    border-radius: 100px;\n    background-color: #ffffff;\n    box-shadow: inset 0 1px 8px 0 rgba(0, 0, 0, 0.2);;\n  }\n  @media (max-width: 767px) {\n    .credits-container {\n      margin: 0 auto;\n      width: 80%;\n      max-width: 350px;\n    }\n    .more-credits-desc {\n      margin-top: 30px;\n    }\n  }\n  .more-credits-amount {\n    font-size: 36px\n  }\n  .btn-more-credits {\n    width: 50px;\n    height: 50px;\n    background-color: #ff4338;\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);\n  }\n  .btn-more-credits[disabled] {\n    opacity: 0.4;\n    background: #ff2b1f !important;\n  }\n  .more-credits-currency {\n    margin-bottom: 20px;\n    font-size: 18px;\n    line-height: 1.17;\n    color: #333333;\n    text-align: center;\n  }\n  @media (max-width: 767px) {\n    .more-credits-currency {\n      margin: 10px 0 0 0;\n    }\n  }\n  .payment-tablet-btn-group {\n    margin-top: 15px;\n  }\n  .credits-input {\n    margin: 0;\n    padding: 1px;\n    width: 83px;\n    text-align: center;\n    border: 0;\n  }\n  .credits-input:focus {\n    outline: none;\n  }\n  @media (max-width: 767px) {\n    .payment-more-credits-btn {\n      margin-top: 10px;\n    }\n  }\n  .payment-billing-information {\n    margin-top: 10px;\n    font-size: 10px;\n    color: #777777;\n  }\n  @media (max-width: 767px) {\n    .payment-billing-information {\n      margin: 0 0 20px 0;\n    }\n  }</style><div ng-include="\'/views/common/top.tpl.clean.html\'"></div><kp-notify></kp-notify><kp-full-screen-loading indicator="!ui.loading"></kp-full-screen-loading><div ui-view class="container payment" ng-hide="!currentUser"><h3 class="checkout">{{\'VC103\'|t}}</h3><h4>{{\'PM390\'|t}}</h4><div class="row visible-xs-block visible-sm-block"><div class="col-xs-12"><div class="panel panel-shadow" ng-if="orderData && !isGiftCard"><div class="panel-body"><a ng-click="changeOrder()" class="visible-xs-block" style="margin-bottom: 10px">{{\'PM435\'|t}}</a><div class="order-info"><div class="teacher"><img ng-src="{{ orderData|avatar:\'50\' }}" width="50" class="avatar" kp-fallback-avatar> <a ng-click="changeOrder()" class="visible-sm-block teacher-name" style="margin-bottom: 10px">{{\'PM435\'|t}}</a><h1 class="order-small-head teacher-name visible-xs-block" style="margin-top: 0;font-size: 10px">{{\'C0122\'|t}}</h1><p class="order-desc teacher-name"><span style="margin-right: 5px;font-weight: normal;color: #777" class="visible-sm-inline-block">{{\'C0122\'|t}}</span>{{orderData.teacher_name}}</p><h1 class="order-small-head course-name visible-xs-block" style="margin-top: 0;font-size: 10px">{{\'PM439\'|t}}</h1><p ng-if="orderData.session_type == \'3\'" class="order-desc course-name"><span style="margin-right: 5px;font-weight: normal;color: #777" class="visible-sm-inline-block">{{\'PM439\'|t}}</span>{{\'TS032\'|t}}</p><p ng-if="orderData.session_type != \'3\' && orderData.course_title" class="order-desc course-name"><span style="margin-right: 5px;font-weight: normal;color: #777" class="visible-sm-inline-block">{{\'PM439\'|t}}</span>{{orderData.course_title}}</p><p ng-if="orderData.session_type != \'3\' && !orderData.course_title" class="order-desc course-name"><span style="margin-right: 5px;font-weight: normal;color: #777" class="visible-sm-inline-block">{{\'C0203\'|t}}</span>{{\'TS032\'|t}}</p><a class="visible-sm-inline-block show-details-xs" style="position: absolute;top: 40px;right: 0" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div><div class="course" ng-hide="!ui.showOrderDetails"><div class="order-duration"><h1 class="order-details-head">{{\'AS401\'|t}}</h1><p class="order-details-desc">{{orderData.language|t}}</p></div><div class="order-duration"><h1 class="order-details-head">{{\'PM444\'|t}}</h1><p class="order-details-desc">{{\'PM445\'|t|format:orderData.session_length * 15}}</p></div><div class="order-time"><h1 class="order-details-head">{{\'PM446\'|t}}</h1><div ng-repeat="time in orderData.date"><p class="order-details-desc">{{time.weekday}}, {{time.days|date:\'MM, dd, yyyy\'}}<br>{{time.hours}}</p></div></div><div class="order-communication"><h1 class="order-details-head">{{\'TP010\'|t}}</h1><p class="order-details-desc">{{orderData.communication}}: {{orderData.student_im_account}}</p></div><div class="order-price"><h1 class="order-details-head">{{\'PM478\'|t}}</h1><p class="order-price-desc"><span class="order-price-item">{{\'PM445\'|t|format:orderData.session_length * 15}}</span> <span class="order-price-value">{{orderData.price}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM051\'|t}}</span> <span class="order-price-value">{{currentUser.payment_account.available_itc_usd}}</span></p><p class="order-price-desc"><span class="order-price-item" style="font-weight: bold">{{\'VC420\'|t}}</span> <span class="order-price-value" style="font-weight: bold" ng-class="{\'order-price-min\': price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{(orderData.price - currentUser.payment_account.available_itc_usd) | kpToUsd}}<br><span ng-if="price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000" style="margin-top: 5px;color: #cb242b;font-weight: normal">{{\'PM379\'|t|format: \'10\'}}</span></span></p></div><div class="order-checkout"><h1 ng-hide="!ui.showOrderDetails" class="order-details-head">{{\'VC103\'|t}}</h1><div class="order-checkout-detail"><p class="order-price-desc" ng-style="{\'margin-top\': !ui.showOrderDetails ? \'10px\' : \'0\'}"><span class="order-price-item">{{\'VC420\'|t}} <strong ng-if="orderData.price - currentUser.payment_account.available_itc_usd < 1000" class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></span> <span class="order-price-value" ng-class="{\'order-price-min\': price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{price - moreCreditsUSD * 100 | kpToUsd}}</span></p><p class="order-price-desc" ng-style="{\'margin\': !ui.showOrderDetails ? \'10px 0 0 0\' : \'0\'}" ng-if="moreCreditsUSD"><span class="order-price-item">{{\'PM929\'|t}}</span> <span class="order-price-value">$&nbsp;{{moreCreditsUSD * 100 | kpToUsd}}</span></p><a style="display: block;margin-bottom: 10px" ng-if="moreCreditsUSD" ng-click="clearAdditionalCredits()">{{\'TS672\'|t}}</a><p class="order-price-desc"><span class="order-price-item">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></span> <span class="order-price-value">$&nbsp;{{commission}}</span></p></div><div class="visible-sm-inline-block order-total"><p class="order-price-desc"><span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83"><span class="order-price-item" style="display: inline-block;margin: 5px 10px 0 0">{{\'TS013\'|t}}</span> $&nbsp;{{amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><div class="visible-xs-block order-total"><p class="order-price-desc"><span class="order-price-item">{{\'TS013\'|t}}</span> <span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83">$&nbsp;{{amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><a class="visible-xs-block show-details-xs" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div></div><div class="panel panel-shadow" ng-if="!orderData && !isGiftCard"><div class="panel-body"><div class="row show-details-xs-row"><div class="col-xs-12 col-sm-8"><div class="order-dollar"><img src="/static/images/icons/icon_dollars.svg"></div><div class="order-xs-price"><p><a ng-click="changeOrder()">{{\'PM435\'|t}}</a></p><p>{{\'PM067\'|t}} - $&nbsp;{{price | kpToUsd}}</p></div></div><div class="col-xs-12 col-sm-4 show-details-xs-col"><a class="visible-sm-inline-block show-details-xs" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a><div class="visible-xs-block panel-body" ng-hide="!ui.showOrderDetails" style="text-align: left"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM067\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</p></div></div><div class="row"><div class="col-xs-6" ng-if="coupon.itc"><p style="font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}}</p></div><div class="col-xs-6 text-right" ng-if="coupon.itc"><p style="font-size: 16px;line-height: 1.19;margin: 0">{{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}}</p><p style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-6"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div></div><a class="visible-xs-block show-details-xs" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div><div class="visible-sm-block panel-body" ng-hide="!ui.showOrderDetails" style="margin: 20px -20px 0;padding-bottom:0;border-top: 1px solid #e8e8e8"><div class="row"><div class="col-sm-8"><div class="row"><div class="col-sm-7"><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM067\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</span></p><p ng-if="coupon.itc" style="position: relative;font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19;margin: 0">{{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}} <span ng-if="coupon.selected.voucher_sn === 0">&nbsp;{{\'PM382\'|t}}</span></span></p><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong> <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</span></p></div></div></div><div class="col-sm-4 text-right"><p style="font-size: 24px;line-height: 1.19"><span style="display: inline-block;margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</span> $&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div></div></div></div><div class="panel panel-shadow" ng-if="isGiftCard"><div class="panel-body"><div class="row show-details-xs-row"><div class="col-xs-12 col-sm-8"><div class="giftcard-cover"><img ng-src="/static/images/giftcard/{{img}}.png"></div><div class="order-xs-price"><p><a ng-click="changeOrder()">{{\'PM435\'|t}}</a></p><p>{{\'M0115\'|t}} - $&nbsp;{{price | kpToUsd}}</p></div></div><div class="col-xs-12 col-sm-4 show-details-xs-col"><a class="visible-sm-inline-block show-details-xs" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a><div class="visible-xs-block panel-body" ng-hide="!ui.showOrderDetails" style="text-align: left"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-6"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div></div><a class="visible-xs-block show-details-xs" ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div><div class="visible-sm-block panel-body" ng-hide="!ui.showOrderDetails" style="margin: 20px -20px 0;border-top: 1px solid #e8e8e8"><div class="row"><div class="col-sm-8"><div class="row"><div class="col-sm-7"><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'M0115\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</span></p><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong> <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</span></p></div></div></div><div class="col-sm-4 text-right"><p style="font-size: 24px;line-height: 1.19"><span style="display: inline-block;margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</span> $&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div></div></div></div></div></div><div class="row"><div class="col-md-9 match-col"><div class="panel panel-shadow"><div class="panel-body"><div class="payment-form"><div class="payment-methods text-center"><div class="row"><div class="col-xs-4" style="cursor: pointer;margin-bottom: 0!important" ng-click="changeTab(0)" ng-class="{\'payment-active\': ui.tabIndex === 0}"><img width="60" height="60" src="/static/images/icons/icon_credit-card.svg"><p class="tab-name"><span class="visible-xs-block">{{\'PM481\'|t}}</span> <span class="hidden-xs">{{\'PM391\'|t}}</span></p></div><div class="col-xs-4" style="cursor: pointer;margin-bottom: 0!important" ng-click="changeTab(1)" ng-class="{\'payment-active\': ui.tabIndex === 1}"><img width="60" height="60" src="/static/images/icons/icon_paypal.svg"><p class="tab-name"><span>{{\'PM034\'|t}}</span></p></div><div class="col-xs-4" style="cursor: pointer;margin-bottom: 0!important" ng-click="changeTab(2)" ng-class="{\'payment-active\': ui.tabIndex === 2}"><img width="60" height="60" src="/static/images/icons/icon_others.svg"><p class="tab-name"><span class="visible-xs-block">{{\'PM484\'|t}}</span> <span class="hidden-xs">{{\'PM392\'|t}}</span></p></div></div></div><div ng-hide="ui.tabIndex !== 0"><h3>{{\'PM393\'|t}}</h3><kp-loading indicator="!ui.stripe.loading && !ui.stripe.error"></kp-loading><form><div class="row credit-card-row"><div class="col-sm-6 col-md-5"><label>{{\'PM510\'|t}}</label><ui-select ng-model="bill_country_chosen" theme="bootstrap" on-select="changeCountry($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v ? c.v : c.name) | t | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-sm-6 col-md-5" style="margin-top:24px"><div ng-class="{\'credit-card-selected\': ui.cardType === \'Visa\', \'credit-card-grayscale\': ui.cardSelected}" class="credit-card card-visa"><img src="/static/images/icon_visa.png"></div><div ng-class="{\'credit-card-selected\': ui.cardType === \'MasterCard\', \'credit-card-grayscale\': ui.cardSelected}" class="credit-card card-master"><img src="/static/images/icon_master.png"></div><div ng-class="{\'credit-card-selected\': ui.cardType === \'American Express\', \'credit-card-grayscale\': ui.cardSelected}" class="credit-card card-amex"><img src="/static/images/icon_amex.png"></div></div></div><div class="row credit-card-row" ng-hide="currentPaymentConfig.pay_type !== \'Y\'"><div class="col-sm-6 col-md-5"><label>{{\'PM394\'|t}}*</label><input placeholder="{{\'PM395\'|t}}" id="card" ng-class="{\'card-input-error\': ui.cardNumberError}" class="form-control" type="text" ng-model="card.number" ng-change="checkCardNumber(card.number)"> <span ng-style="{\'visibility\': ui.cardNumberError ? \'visible\': \'hidden\'}" class="error-msg">{{\'PM472\'|t}}</span></div><div class="col-sm-6 col-md-5"><div class="row"><div class="col-xs-4 col-sm-3 expired-month"><label>{{\'TP269\'|t}}*</label><input ng-class="{\'card-input-error\': ui.expiryError}" placeholder="01" id="exp_month" class="form-control" type="text" ng-model="card.exp_month" ng-change="checkExpiry(card.exp_year, card.exp_month)"> <span ng-style="{\'visibility\': ui.expiryError ? \'visible\': \'hidden\'}" class="error-msg">{{\'PM474\'|t}}</span></div><div class="col-xs-4 col-sm-3"><label style="visibility: hidden">{{\'TP269\'|t}}*</label><input ng-class="{\'card-input-error\': ui.expiryError}" placeholder="2017" id="exp_year" class="form-control" type="text" ng-model="card.exp_year" ng-change="checkExpiry(card.exp_year, card.exp_month)"></div><div class="visible-sm-block visible-md-block visible-lg-block col-md-offset-1 col-sm-4 col-md-5"><label>{{\'PM397\'|t}}*</label><input ng-class="{\'card-input-error\': ui.cvcError}" placeholder="{{\'PM396\'|t}}" id="cvc" class="form-control" type="text" ng-model="card.cvc" ng-change="checkCVC(card.cvc)"> <span ng-style="{\'visibility\': ui.cvcError ? \'visible\': \'hidden\'}" class="error-msg">{{\'PM475\'|t}}</span></div></div><div class="row visible-xs-block"><div class="col-xs-4"><label>{{\'PM397\'|t}}*</label><input ng-class="{\'card-input-error\': ui.cvcError}" placeholder="{{\'PM396\'|t}}" class="form-control" type="text" ng-model="card.cvc" ng-change="checkCVC(card.cvc)"> <span ng-style="{\'visibility\': ui.cvcError ? \'visible\': \'hidden\'}" class="error-msg">{{\'PM475\'|t}}</span></div></div></div></div><div class="row credit-card-row" ng-hide="currentPaymentConfig.pay_type !== \'Y\'"><div class="col-sm-6 col-md-5"><label>{{\'PM398\'|t}}*</label><input ng-class="{\'card-input-error\': ui.cardOwnerError}" placeholder="{{\'PM399\'|t}}" id="name" class="form-control" type="text" ng-model="card.name" ng-change="checkCardOwner(card.name)"> <span ng-style="{\'visibility\': ui.cardOwnerError ? \'visible\': \'hidden\'}" class="error-msg">{{\'PM477\'|t}}</span></div></div></form><p ng-if="currentPaymentConfig.pay_type === \'8\' || currentPaymentConfig.pay_type === \'W\'" class="paypal-hint">{{\'PM422\'|t|format:(currentPaymentConfig.code|t)}}<br>{{\'PM423\'|t|format:\'Skrill\':(bill_country_chosen.v|t)}}</p><p ng-if="currentPaymentConfig.pay_type !== \'Y\' && currentPaymentConfig.pay_type !== \'8\' && currentPaymentConfig.pay_type !== \'W\'" class="paypal-hint">{{\'PM922\'|t|format:(bill_country_chosen.v|t)}}<br>{{\'PM428\'|t|format:(bill_country_chosen.v|t)}}</p></div><div ng-hide="ui.tabIndex !== 1"><h3>{{\'PM424\'|t}}</h3><div class="row credit-card-row"><div class="col-md-5"><label>{{\'PM510\'|t}}</label><ui-select ng-model="bill_country_chosen" theme="bootstrap" on-select="changeCountry($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v ? c.v : c.name) | t | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><p ng-if="paypalConfig.length === 0" class="paypal-hint">{{\'PM427\'|t|format:(bill_country_chosen.v|t)}}<br>{{\'PM428\'|t|format:(bill_country_chosen.v|t)}}</p><p ng-if="paypalConfig.length !== 0" class="paypal-hint">{{\'PM425\'|t}}<br>{{\'PM426\'|t}}</p><p style="font-size: 16px;line-height: 1.2">{{\'PM429\'|t}}</p></div><div ng-hide="ui.tabIndex !== 2"><h3>{{\'PM430\'|t}}</h3><div class="row credit-card-row"><div class="col-xs-11 col-sm-4 col-md-5 billing-country-xs-col"><label>{{\'PM510\'|t}}</label><ui-select ng-model="bill_country_chosen" theme="bootstrap" on-select="changeCountry($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v ? c.v : c.name) | t | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-xs-11 col-sm-4 col-md-5"><label>{{\'PM038\'|t}}</label><ui-select ng-model="currentPaymentConfig.selected" theme="bootstrap" on-select="changePayment($item, $model)"><ui-select-match placeholder="{{\'C0061\'|t}}">{{$select.selected.code | t}}</ui-select-match><ui-select-choices repeat="p in othersConfig"><span ng-bind-html="p.code | t | highlight: $select.search"></span></ui-select-choices></ui-select><div class="payment-method-img visible-sm-inline-block visible-md-inline-block visible-lg-inline-block"><img ng-if="currentPaymentConfig.img_name" ng-src="{{\'/static/images/payment/\' + currentPaymentConfig.img_name + \'.png\'}}" height="18" align="absmiddle"></div></div></div><h3 class="payment-method-head">{{\'PM431\'|t|format: (currentPaymentConfig.code | t)}}</h3><p class="payment-desc">{{\'PM432\'|t|format: (currentPaymentConfig.code | t)}}<br>{{\'PM433\'|t|format: (currentPaymentConfig.code | t)}}</p><p class="payment-tip">{{\'PM434\'|t|format: (currentPaymentConfig.code | t)}}</p></div></div><p ng-hide="currentPaymentConfig.pay_type !== \'Y\' || ui.tabIndex !== 0" class="foot-note">* {{\'PM420\'|t}}</p><div class="visible-sm-block" style="margin: 10px 0 0;padding: 10px 0 0;border-top: 1px solid #f1f1f1"><p>{{\'PM436\'|t}}</p><div style="line-height: 0.9;overflow: hidden;margin: 0"><span style="font-size: 24px">$&nbsp;{{amount | kpToUsd}}&nbsp;USD</span> <span ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="position: relative;top: -5px;margin: 0 0 0 10px;padding: 3px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</span></div><div class="payment-tablet-btn-group"><button ng-show="orderData && !moreCreditsUSD" class="btn btn-default btn-lg btn-add-more" ng-click="addMoreCredits()">{{\'PM926\'|t}}</button> <button ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div></div></div><p ng-if="isOneStepPayment" class="visible-md-block visible-lg-block payment-billing-information">{{\'PM571\'|t}}</p></div><div class="col-md-3 match-height"><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="orderData && !isGiftCard"><div class="panel-body"><div class="order-info"><div class="teacher"><img ng-src="{{ orderData|avatar:\'50\' }}" width="50" class="avatar" kp-fallback-avatar><h1 class="order-small-head order-teacher">{{\'C0122\'|t}}</h1><p class="order-desc teacher-name">{{orderData.teacher_name}}</p><h1 class="order-small-head course-name">{{\'PM439\'|t}}</h1><p ng-if="orderData.session_type == \'3\'" class="order-desc course-name">{{\'TS032\'|t}}</p><p ng-if="orderData.session_type != \'3\' && orderData.course_title" class="order-desc course-name">{{orderData.course_title}}</p><p ng-if="orderData.session_type != \'3\' && !orderData.course_title" class="order-desc course-name">{{\'C0203\'|t}}</p></div><div class="course" style="text-align: center"><a ng-click="toggleOrderDetails()">{{ui.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}} <i style="vertical-align: middle" ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div><div ng-hide="!ui.showOrderDetails"><div class="order-duration"><h1 class="order-details-head">{{\'AS401\'|t}}</h1><p class="order-details-desc">{{orderData.language|t}}</p></div><div class="order-duration"><h1 class="order-details-head">{{\'PM444\'|t}}</h1><p class="order-details-desc">{{\'PM445\'|t|format:orderData.session_length * 15}}</p></div><div class="order-time"><h1 class="order-details-head">{{\'PM446\'|t}}</h1><div ng-repeat="time in orderData.date"><p class="order-details-desc">{{time.weekday}}, {{time.days|date:\'MM, dd, yyyy\'}}<br>{{time.hours}}</p></div></div><div class="order-communication"><h1 class="order-details-head">{{\'TP010\'|t}}</h1><p class="order-details-desc">{{orderData.communication}}: {{orderData.student_im_account}}</p></div><div class="order-price"><h1 class="order-details-head">{{\'PM478\'|t}}</h1><p class="order-price-desc"><span class="order-price-item">{{\'PM445\'|t|format:orderData.session_length * 15}}</span> <span class="order-price-value">$&nbsp;{{orderData.price | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM051\'|t}}</span> <span class="order-price-value">$&nbsp;{{currentUser.payment_account.available_itc_usd | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item" style="font-weight: bold">{{\'VC420\'|t}}</span> <span class="order-price-value" style="font-weight: bold" ng-class="{\'order-price-min\': price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{(orderData.price - currentUser.payment_account.available_itc_usd) | kpToUsd}}</span> <span ng-if="price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000" style="float: right;margin-top: 5px;color: #cb242b;width: 100%;text-align: right">{{\'PM379\'|t|format: \'10\'}}</span></p></div></div><div class="order-checkout"><h1 ng-hide="!ui.showOrderDetails" class="order-details-head">{{\'VC103\'|t}}</h1><p class="order-price-desc" ng-style="{\'margin-top\': !ui.showOrderDetails ? \'10px\' : \'0\'}"><span class="order-price-item">{{\'VC420\'|t}} <strong ng-if="orderData.price - currentUser.payment_account.available_itc_usd < 1000" class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.subTotalTip">?</strong></span> <span class="order-price-value" ng-class="{\'order-price-min\': price === 1000 && orderData.price - currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{price - moreCreditsUSD * 100 | kpToUsd}}</span></p><p class="order-price-desc" ng-style="{\'margin\': !ui.showOrderDetails ? \'10px 0 0 0\' : \'0\'}" ng-if="moreCreditsUSD"><span class="order-price-item">{{\'PM929\'|t}}</span> <span class="order-price-value">$&nbsp;{{moreCreditsUSD * 100 | kpToUsd}}</span></p><a style="display: block;margin-bottom: 10px" ng-if="moreCreditsUSD" ng-click="clearAdditionalCredits()">{{\'TS672\'|t}}</a><p class="order-price-desc"><span class="order-price-item">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></span> <span class="order-price-value">$&nbsp;{{commission}}</span></p></div><div class="order-total"><p class="order-price-desc"><span class="order-price-item">{{\'TS013\'|t}}</span> <span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83">$&nbsp;{{amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div><button ng-show="orderData && !moreCreditsUSD" class="btn btn-default btn-lg btn-block btn-add-more" ng-click="addMoreCredits()">{{\'PM926\'|t}}</button> <button ng-style="{\'margin-top\': moreCreditsUSD ? \'25px\' : \'10px\'}" ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div></div><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="!orderData && !isGiftCard"><a ng-click="changeOrder()" class="desktop-changeOrder">{{\'PM435\'|t}}</a><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><div style="float: left;margin-right: 20px"><img style="width: 50px;height: 50px" src="/static/images/icons/icon_dollars.svg"></div><div style="float: left"><p style="font-size: 14px;line-height: 1.36;margin: 0">{{\'PM067\'|t}}</p><p style="font-size: 20px;line-height: 1.35">$&nbsp;{{price | kpToUsd}}</p></div></div><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM067\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</p></div></div><div class="row"><div class="col-xs-6" ng-if="coupon.itc"><p style="font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}}</p></div><div class="col-xs-6 text-right" ng-if="coupon.itc"><p style="font-size: 16px;line-height: 1.19;margin: 0">{{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}}</p><p style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-md-8"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></p></div><div class="col-md-4 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-5"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-7 text-right"><p style="margin-bottom: 5px;font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><button ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="isGiftCard"><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><a ng-click="changeOrder()">{{\'PM435\'|t}}</a><div style="margin: 20px auto 0;width: 90%"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{price / 100}}</p></div></div><div><img style="width: 100%;border-bottom: 10px solid #ff4338" ng-src="/static/images/giftcard/{{img}}.png"></div></div></div><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{price | kpToUsd}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-md-8"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="ui.processingFeeTip">?</strong></p></div><div class="col-md-4 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-5"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-7 text-right"><p style="margin-bottom: 5px;font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{amount | kpToUsd}}</p><p ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><button ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div><div class="panel panel-shadow help-box"><h4 class="help-title">{{\'PA254\'|t}}</h4><div class="panel-body" style="border-top: solid 1px #e8e8e8"><ui-select ng-model="ui.help" theme="bootstrap"><ui-select-match placeholder="{{\'PM448\'|t}}"><span ng-bind-html="$select.selected.value ? $select.selected.question : \'PM448\'|t"></span></ui-select-match><ui-select-choices repeat="help in ui.helps"><div ng-bind-html="(help.question | t) | highlight: $select.search"></div></ui-select-choices></ui-select><div style="margin-top: 10px"><p ng-if="ui.help.value !== 6">{{ui.answers[ui.help.value - 1]|t}}</p><p ng-if="ui.help.value === 6">{{(ui.answers[5][0]|t) + (ui.answers[5][1]|t|format: \'support@italki.com\')}}</p></div></div></div></div></div><p ng-if="isOneStepPayment" class="visible-xs-block visible-sm-block payment-billing-information">{{\'PM571\'|t}}</p><div class="visible-xs-block xs-pay pay-btn-container-float"><div class="panel panel-shadow"><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="margin: 0;font-size: 14px;line-height: 1.62">{{\'PM436\'|t}}</p><p style="margin: 0;font-size: 30px;line-height: 0.9">${{amount | kpToUsd}}<span style="font-size: 18px;vertical-align: super">&nbsp;USD</span></p></div><div class="col-xs-6"><p ng-style="{\'display\': currentUser.currency !== \'USD\' ? \'inline-block\': \'none\'}" style="float: right;margin-top: 20px;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><button ng-show="orderData && !moreCreditsUSD" class="btn btn-default btn-lg btn-block btn-add-more" ng-click="addMoreCredits()">{{\'PM926\'|t}}</button> <button ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div></div><div class="visible-xs-block xs-pay pay-btn-container"><div class="panel panel-shadow"><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="margin: 0;font-size: 14px;line-height: 1.62">{{\'PM436\'|t}}</p><p style="margin: 0;font-size: 30px;line-height: 0.9">${{amount | kpToUsd}}<span style="font-size: 18px;vertical-align: super">&nbsp;USD</span></p></div><div class="col-xs-6"><p ng-style="{\'display\': currentUser.currency !== \'USD\' ? \'inline-block\': \'none\'}" style="float: right;margin-top: 20px;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{amountCurrency / 100|number:2}}{{currentUser.currency}}</p></div></div><button ng-show="orderData && !moreCreditsUSD" class="btn btn-default btn-lg btn-block btn-add-more" ng-click="addMoreCredits()">{{\'PM926\'|t}}</button> <button ng-click="pay()" ng-disabled="ui.payDisable" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{ui.tabIndex === 0 && currentPaymentConfig.pay_type === \'Y\' ? (\'PM437\'|t) : \'\'}} {{ui.tabIndex === 0 && currentPaymentConfig.pay_type !== \'Y\' ? (\'PM109\'|t) : \'\'}} {{ui.tabIndex === 1 ? (\'PM438\'|t) : \'\'}} {{ui.tabIndex === 2 ? (\'PM109\'|t) : \'\'}}</button></div></div></div></div><div pay-container-sticky ng-include="\'/views/common/bottom.purchasev2.html\'"></div>'),
a.put("/views/finance/new.recharge.html","<style>.panel-shadow{\n    box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.08);\n  }\n  .count-container{\n    display: inline-block;\n    max-width: 350px;\n    width: 100%;\n    height: 80px;\n    line-height: 80px;\n    margin: 0px auto 0px;\n    border-radius: 100px;\n    background-color: #ffffff;\n    box-shadow: inset 0 1px 8px 0 rgba(0, 0, 0, 0.2);\n  }\n  .count-container-warning{\n    border: solid 1px #d0011b;\n  }\n  .count-container .oval-btn{\n    margin: 15px;\n    width: 50px;\n    height: 50px;\n    background-color: #ff4338;\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 31px;\n    display: inline-block;\n    font-size: 20px;\n    color: #fff;\n    line-height: 50px;\n    border: 0;\n    outline: none;\n  }\n  @media (max-width: 339px) {\n    .count-container .oval-btn{\n      margin: 15px 10px;\n    }\n  }\n  .count-container .oval-btn-right{\n    position: relative;\n    float: right;\n  }\n  .count-container .oval-btn-left{\n    position: relative;\n    float: left;\n  }\n\n  .oval-btn-left > span, .oval-btn-right > span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n  }\n\n  .count-container .count-number{\n    display: inline-block;\n    /*width: 88px;*/\n    font-size: 35px;\n    color: #FFF;\n    margin-left: 54px;\n  }\n\n  .count-container .count-text{\n    display: inline-block;\n    line-height:normal;\n    vertical-align:middle;\n    height: 42px;\n    font-size: 36px;\n  }\n  .icon-pic{\n    width: 80px;\n    height: 80px;\n  }\n  .button-disabled{\n    opacity: 0.4;\n  }\n  .btn-add{\n    width: 15px;\n  }\n  .btn-pay {\n    height: 50px;\n    min-width: 150px;\n    font-size: 18px;\n  }\n  .text-fade{\n    opacity: 0.2;\n  }\n\n  @media (min-width: 992px){\n    .visible-detail{\n      display: inherit;\n    }\n    .visible-simple{\n      display: none;\n    }\n  }\n  @media (min-width: 768px) and (max-width: 991px){\n    .visible-detail{\n      display: none;\n    }\n    .visible-simple{\n      display: inherit;\n    }\n  }\n  @media (min-width: 480px) and (max-width: 767px) {\n    .visible-phone{\n      display: inherit !important;\n    }\n  }\n  @media (min-width: 768px) {\n    .pay-button{\n      float: right\n    }\n    .pay-count img{\n      width: 50px;\n      height: 50px;\n      float: left;\n      margin-right: 20px\n    }\n\n    .pay-count div{\n      float: left\n    }\n    .text-title{\n      min-height: 27px;\n      font-size: 23px;\n      font-weight: 300;\n    }\n    .pay-word{\n      margin-top: 30px;\n      margin-bottom: 20px\n    }\n    .pay-word-trial {\n      height: 68px;\n    }\n    @media (max-width: 991px) {\n      .pay-word-trial {\n        height: 27px;\n      }\n    }\n    .payment-items {\n      padding: 0 40px;\n      margin-bottom: 50px;\n    }\n    .visible-computer{\n      display: inherit;\n    }\n  }\n  @media (max-width: 767px) {\n    .btn-pay {\n      margin: 0;\n      height: 40px;\n      width: 100%;\n    }\n    .pay-button{\n      margin: 0;\n      /*width: 150px;*/\n    }\n    .pay-count{\n      text-align: left;\n    }\n    .pay-count img{\n      width: 40px;\n      height: 40px;\n      vertical-align: middle;\n    }\n    .pay-count div{\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .icon-pic {\n      float: left;\n    }\n    .text-title{\n      font-size: 18px;\n      font-weight: 300;\n    }\n    .pay-word{\n      font-size: 14px;\n      margin: 22px 0 0 100px;\n      font-weight: 400;\n    }\n    .text-phone{\n      text-align: left;\n      margin-bottom: 20px;\n      overflow: hidden;\n    }\n    .visible-detail{\n      display: none;\n    }\n    .visible-simple{\n      display: none;\n    }\n    .visible-computer{\n      display: none;\n    }\n\n  }\n  .select-time-ul>li{\n    list-style: none;\n  }\n  .select-time-ul>li>a{\n    margin: 0 -2px;\n    padding: 5px 18px;\n    display: block;\n    clear: both;\n    font-weight: normal;\n    line-height: 20px;\n    color: #333333;\n    white-space: nowrap;\n  }\n  .select-time-ul>li>a:active,.select-time-ul>li>a:hover{\n    background: #ff4338;\n    color: white;\n  }\n  .dtp-picker-selector-link.small.sub:after {\n    top: 0.4rem;\n  }\n  .dropdown-menu:before {\n    left: 50% !important;\n    border-width:12px !important;\n  }\n  .button-style span button,.button-style span button:hover{\n    background-color: transparent !important;\n    -webkit-box-shadow: none !important;\n    box-shadow: none !important;\n    border: 1px #fff solid !important;\n    color: #000000;\n    left: 100px;\n  }\n  .button-style span .btn-danger{\n    display: none;\n  }\n  .button-style span + .btn-success{\n    display: none;\n  }\n\n\n  .switch-block-tabs{\n    list-style: none;\n    padding-left: 0;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  }\n\n  .switch-block-tab{\n    float:left;\n  }\n\n  .switch-block-tab-link{\n    display: block;\n    padding: 1rem 3rem;\n    color: #333333;\n  }\n\n  .switch-block-tabs:before, .switch-block-tabs:after {\n    content: \" \";\n    display: table;\n    clear: both;\n  }\n\n  .switch-block-tab-link.selected {\n    background: none;\n  }\n\n  .switch-block-tab-link.selected:hover {\n    box-shadow: none;\n  }\n\n  .switch-block-tab-link.selected {\n    background: #ffffff;\n    color: #ff4338;\n    border-bottom: 3px solid #ff4338;\n  }\n\n\n  .coupon-question{\n    padding-right: 2rem;\n    line-height: 47px;\n  }\n\n  .coupon-items{\n    margin-top: 20px;\n  }\n\n\n  .coupon-items .coupon-item {\n    float: left;\n    margin: 0 16px 20px 0;\n    width: 185px;\n  }\n\n\n\n  .coupon-item .c-type {\n    position: relative;\n    width: 100%;\n    overflow: hidden;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n  }\n\n  .coupon-item .c-type {\n    background: #4EA4BB;\n    position: relative;\n    width: 100%;\n    overflow: hidden;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n\n  }\n\n  .coupon-item .c-msg {\n    padding: 20px 0 15px;\n    background: #f9f9f9;\n    height:115px;\n  }\n\n  .coupon-history .coupon-item .c-type, .coupon-history .coupon-item-sm .c-type{\n    background: #D8D8D8;\n  }\n\n  .coupon-history .coupon-item.c-expired .c-msg, .coupon-history .coupon-item-sm.c-expired .c-msg{\n    background-image: url('/static/images/coupon_expired.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n  .coupon-history .coupon-item.c-used .c-msg, .coupon-history .coupon-item-sm.c-used .c-msg{\n    background-image: url('/static/images/coupon_used.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n  .coupon-history .coupon-item.c-inuse .c-msg, .coupon-history .coupon-item-sm.c-inuse .c-msg{\n    background-image: url('/static/images/coupon_inuse.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n\n\n  .coupon-item .c-btn {\n    margin-top: 20px;\n    text-align: center;\n    padding: 10px 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    width: 150px;\n    margin: 10px auto;\n    cursor: pointer;\n  }\n\n  .coupon-item .c-btn:hover{\n    background:#e4e4e4;\n  }\n\n\n  .coupon-item-sm{\n    overflow: hidden;\n    margin-bottom: 10px;\n  }\n\n  .coupon-item-sm .c-type {\n    position: relative;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n    background: #4EA4BB;\n    float: left;\n    width: 60%;\n  }\n\n  .coupon-item-sm .c-msg {\n    padding: 20px 0 15px;\n    background: #f9f9f9;\n    width: 40%;\n    float: right;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .coupon-item-sm .c-btn {\n    margin-top: 20px;\n    text-align: center;\n    padding: 10px 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    margin: 10px 10px 0;\n  }\n\n  @media (min-width: 481px){\n\n    .coupon-item-sm{\n      display: none;\n    }\n  }\n\n  @media (max-width: 480px){\n    .coupon-item{\n      display: none;\n    }\n\n    .coupon-item-sm{\n      display: flex;\n    }\n\n    .switch-block-tab {\n      width: auto;\n    }\n\n    .switch-block-tab-link.selected {\n      color: #ff4338;\n      border-bottom: 3px solid #ff4338;\n      padding-bottom: 1.3rem;\n    }\n  }\n\n  @media (max-width: 374px){\n    .coupon-item-sm .c-type {\n      padding: 20px 5px;\n    }\n  }\n\n  .carousel-indicators .active {\n    background-color: #ff4338;\n    margin: 1px;\n    width: 10px;\n    height: 10px;\n  }\n  .carousel-indicators li {\n    background-color: #cccccc;\n  }\n  .control {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 50px;\n    color: #787878;\n  }\n  .control .fa {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -16px;\n    margin-left: -4px;\n    font-size: 32px;\n  }\n  .control.left {\n    left: 0;\n  }\n  .control.right {\n    right: 0;\n  }\n  @media (max-width: 374px) {\n    .control {\n      width: 24px;\n    }\n  }\n  .carousel-inner > .item {\n    padding: 0 34px;\n    text-align: left;\n    overflow: hidden;\n  }\n  @media (max-width: 374px) {\n    .carousel-inner > .item {\n      padding: 0;\n    }\n  }\n  .coupon {\n    position: relative;\n    display: inline-block;\n    float: left;\n    margin: 20px 0;\n    width: 33.33333333%;\n    height: 128px;\n    text-align: center;\n    border-radius: 5px;\n  }\n  .phone-book-align {\n    margin-top: 50px;\n    margin-bottom: 30px;\n  }\n  @media (min-width: 768px) and (max-width: 1199px) {\n    .coupon {\n      width: 50%;\n    }\n  }\n  @media (max-width: 767px) {\n    .coupon {\n      margin: 15px 0;\n      width: 100%;\n    }\n    .phone-align{\n      margin-left: 20px;\n      text-align: left;\n    }\n    .phone-book-align{\n      margin-top: 30px;\n      margin-left: 9px;\n      text-align: left;\n    }\n  }\n  .code-bg {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 220px;\n    height: 106px;\n    transform: translate(-50%, -54%);\n    background: #fc6960;\n    border-radius: 5px;\n  }\n  .voucher-bg {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 220px;\n    height: 106px;\n    transform: translate(-50%, -54%);\n    background: url('/static/images/payment/coupon-red.png');\n    /*box-shadow: 0 5px 10px 0 rgba(0, 0, 0, 0.3);*/\n    border-radius: 5px;\n  }\n  .voucher-shadow {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 220px;\n    height: 95px;\n    transform: translate(-50%, -55%);\n    box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.25);\n    border-radius: 5px;\n  }\n  .voucher-ticket {\n    display: inline-block;\n    width: 234px;\n    height: 120px;\n    padding: 4px;\n    border: 2px solid transparent;\n    border-radius: 10px;\n    cursor: pointer;\n  }\n  .voucher-off {\n    position: relative;\n    display: inline-block;\n    float: left;\n    width: 83px;\n    height: 106px;\n    text-align: center;\n  }\n  .voucher-off > span {\n    position: absolute;\n    top: 50%;\n    font-size: 28px;\n    line-height: 1.1;\n    color: #ffffff;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n    transform: translate(-50%, -50%);\n  }\n  .voucher-off-count {\n    font-size: 31px;\n  }\n  .voucher {\n    position: relative;\n    float: left;\n    display: inline-block;\n    width: 137px;\n    height: 106px;\n    padding: 7px 15px;\n    text-align: left;\n    font-size: 10px;\n    color: #fff;\n    line-height: 1.3;\n  }\n  .voucher > p {\n    margin: 0;\n    white-space: nowrap;\n    overflow: hidden !important;\n    text-overflow: ellipsis;\n  }\n  .voucher-expiry {\n    margin: 6px 0 !important;\n  }\n  .coupons-container {\n    margin: 0 -20px;\n  }\n  .carousel-indicators {\n    bottom: -22px;\n  }\n  .coupon-code {\n    width: 170px;\n    height: 25px;\n    border: 0;\n    outline: none;\n    padding: 5px 10px;\n    font-size: 12px;\n    border-radius: 3px;\n  }\n\n  ::-webkit-input-placeholder { font-size: 11px; }\n  ::-moz-placeholder { font-size: 11px; }\n  :-ms-input-placeholder { font-size: 11px; }\n  input:-moz-placeholder { font-size: 11px; }\n\n  .coupon-code-input-error {\n    border-left: 1px solid #cb242b;\n    border-top: 1px solid #cb242b;\n    border-bottom: 1px solid #cb242b;\n  }\n  .coupon-code-msg, .coupon-voucher-msg {\n    width: 100%;\n    text-align: left;\n    font-size: 13px;\n    white-space: nowrap;\n  }\n  .coupon-code-msg {\n    margin: 120px 0 0 0;\n  }\n  .coupon-voucher-msg {\n    margin: 113px 0 0 0;\n  }\n  .coupon-error {\n    color: #cb242b;\n  }\n  .coupon-success {\n    color: #5ebd5e;\n  }\n  .redeem {\n    display: inline-block;\n    margin-top: 5px;\n    min-width: 75px;\n    height: 25px;\n    font-size: 13px;\n    line-height: 0.9;\n    box-shadow: none !important;\n  }\n  .learning-language {\n    text-transform: capitalize;\n  }\n  .coupon-code-slide {\n    display: inline-block;\n    width: 234px;\n    height: 120px;\n    position: relative;\n    border: 2px solid transparent;\n    border-radius: 10px;\n  }\n  .coupon-code-container {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    text-align: left;\n  }\n  .coupon-code-container > label {\n    color: #fff;\n  }\n  .coupon-code-selected, .voucher-ticket-selected {\n    border: 2px solid #5ebd5e;\n  }\n  .coupon-code-disabled, .voucher-ticket-disabled {\n    border: 2px solid #cb242b;\n  }\n  .pay-btn-container-float, .pay-btn-container {\n    margin-bottom: 0;\n    border: 0\n  }\n  .pay-btn-container-float {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    visibility: hidden;\n    box-shadow: none;\n    transition: box-shadow 0.5s;\n"+'  }</style><div ng-include="\'/views/common/top.tpl.bs.html\'"></div><kp-full-screen-loading indicator="!loading"></kp-full-screen-loading><div ui-view class="container" ng-hide="!currentUser"><h3 style="margin:30px 0px 24px 0px;font-size: 23px;font-weight: 300">{{\'MH402\'|t}}</h3><div class="row"><div class="col-md-9"><div class="panel panel-shadow"><div class="panel-body text-center"><p class="text-title text-center" style="margin: 10px 0 30px 0">{{\'PM241\'|t}}</p><div class="count-container text-center" ng-class="{\'count-container-warning\':numbeInvalidMin||numbeInvalidMax}"><button lan-data="lanData" class="oval-btn text-center oval-btn-left" ng-class="{\'button-disabled\':itc_usd.value <=10}" ng-click="reduceAmount()" ng-disabled="itc_usd.value <=10"><span><img class="btn-add" src="/static/images/-.png"></span></button> <span class="count-text">$<input type="text" ng-change="checkNumber()" ng-model="itc_usd.value" style="margin: 0;padding: 1px;width: 85px;text-align: center;border:none;outline: none"></span> <button lan-data="lanData" class="oval-btn text-center oval-btn-right" ng-class="{\'button-disabled\':itc_usd.value >=1000}" ng-click="addAmount()" ng-disabled="itc_usd.value >=1000"><span><img class="btn-add" src="/static/images/+.png"></span></button></div><p ng-show="numbeInvalidMin" style="color: #cb242b;margin-top: 5px">{{\'PM376\'|t|format:\'10\'}}</p><p ng-show="numbeInvalidMax" style="color: #cb242b;margin-top: 5px">{{\'PM377\'|t|format:\'1000\'}}</p><h4 ng-style="{\'visibility\': currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="margin-top: 10px">{{currentUser.currency}} {{amount_currency|number:2}}</h4><div class="row text-center payment-items"><p class="text-title phone-book-align">{{\'PM354\'|t|format:itc_usd.value}} <a ng-click="showMore = !showMore;"><img class="visible-phone" style="width: 25px;height: 25px;margin-left: 6px" src="/static/images/icons/icon_plus.svg" ng-hide="!!showMore"> <img class="visible-phone" style="width: 25px;height: 25px;margin-left: 6px" src="/static/images/icon-minus.png" ng-show="!!showMore"></a></p><div class="visible-phone" ng-show="!!showMore"><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.trial == 0) }"><img class="icon-pic" src="/static/images/icons/icons_trial.svg"><p class="text-title pay-word" ng-hide="LessonAmount.trial==\'1\'">{{\'PM371\'|t|format:LessonAmount.trial}}*</p><p class="text-title pay-word" ng-show="LessonAmount.trial==\'1\'">{{\'PM370\'|t|format:LessonAmount.trial}}*</p></div><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.promin == 0) && (LessonAmount.promax == 0)}"><img class="icon-pic" src="/static/images/icons/icons_teacher.svg"><p class="text-title pay-word" ng-hide="(LessonAmount.promin == 0)">{{\'PM372\'|t|format:(LessonAmount.promin + \' - \' + LessonAmount.promax)}}*</p><p class="text-title pay-word" ng-show="(LessonAmount.tutormin == 0) && (LessonAmount.tutormax == 0)">{{\'PM356\'|t|format: LessonAmount.promax}}*</p><p class="text-title pay-word" ng-show="(LessonAmount.promin == 0) && (LessonAmount.promax != 0)">{{\'PM386\'|t|format:LessonAmount.promax}}*</p></div><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.tutormax == 0) && (LessonAmount.tutormin == 0)}"><img class="icon-pic" src="/static/images/icons/icon_tutor.svg"><p class="text-title pay-word" ng-hide="(LessonAmount.tutormin == 0)">{{\'PM374\'|t|format:(LessonAmount.tutormin + \' - \' + LessonAmount.tutormax)}}*</p><p class="text-title pay-word" ng-show="(LessonAmount.tutormin == 0) && (LessonAmount.tutormax == 0)">{{\'PM356\'|t|format: LessonAmount.tutormax}}*</p><p class="text-title pay-word" ng-show="(LessonAmount.tutormin == 0) && (LessonAmount.tutormax != 0)">{{\'PM386\'|t|format:LessonAmount.tutormax}}*</p></div></div><div class="visible-computer"><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.trial == 0) }"><img class="icon-pic" src="/static/images/icons/icons_trial.svg"><p class="text-title pay-word" ng-class="{\'pay-word-trial\': GlobalObject.lang.name === \'Nederlands\'}">{{\'PM371\'|t|format:LessonAmount.trial}}</p><p style="font-size: 16px;font-weight: normal" ng-hide="LessonAmount.trial==\'1\' || !currentUser.learning_language">{{\'PM367\'|t|format:LessonAmount.trial:(currentUser.learning_language|t)}}*</p><p style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.trial==\'1\' && currentUser.learning_language">{{\'PM366\'|t|format:(currentUser.learning_language|t)}}*</p><p style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.trial==\'1\' && !currentUser.learning_language">{{\'PM927\'|t}}*</p><p style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.trial!=\'1\' && !currentUser.learning_language">{{\'PM928\'|t|format:LessonAmount.trial}}*</p></div><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.promin == 0) && (LessonAmount.promax == 0)}"><img class="icon-pic" src="/static/images/icons/icons_teacher.svg"><p class="text-title pay-word" ng-hide="(LessonAmount.promin == 0) || LessonAmount.promin === LessonAmount.promax">{{\'PM385\'|t|format:LessonAmount.promin:LessonAmount.promax}}</p><p class="text-title pay-word" ng-show="(LessonAmount.promin == 0) && (LessonAmount.promax == 0) || LessonAmount.promin === LessonAmount.promax">{{\'PM356\'|t|format: LessonAmount.promax}}</p><p class="text-title pay-word" ng-show="(LessonAmount.promin == 0) && (LessonAmount.promax != 0)">{{\'PM386\'|t|format:LessonAmount.promax}}</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-hide="LessonAmount.promax==\'1\' || !currentUser.learning_language">{{\'PM365\'|t|format:LessonAmount.promin:LessonAmount.promax:(currentUser.learning_language|t)}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-hide="LessonAmount.promax==\'1\' || currentUser.learning_language">{{\'PM372\'|t|format:LessonAmount.promin:LessonAmount.promax}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.promax==\'1\' && currentUser.learning_language">{{\'PM364\'|t|format:(currentUser.learning_language|t)}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.promax==\'1\' && !currentUser.learning_language">{{\'PM373\'|t}}*</p></div><div class="col-sm-4 text-phone" ng-class="{\'text-fade\':(LessonAmount.tutormax == 0) && (LessonAmount.tutormin == 0)}"><img class="icon-pic" src="/static/images/icons/icon_tutor.svg"><p class="text-title pay-word" ng-hide="(LessonAmount.tutormin == 0) || LessonAmount.tutormin === LessonAmount.tutormax">{{\'PM385\'|t|format:LessonAmount.tutormin:LessonAmount.tutormax}}</p><p class="text-title pay-word" ng-show="(LessonAmount.tutormin == 0) && (LessonAmount.tutormax == 0) || LessonAmount.tutormin === LessonAmount.tutormax">{{\'PM356\'|t|format: LessonAmount.tutormax}}</p><p class="text-title pay-word" ng-show="(LessonAmount.tutormin == 0) && (LessonAmount.tutormax != 0)">{{\'PM386\'|t|format:LessonAmount.tutormax}}</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-hide="LessonAmount.tutormax==\'1\' || !currentUser.learning_language">{{\'PM369\'|t|format:LessonAmount.tutormin:LessonAmount.tutormax:(currentUser.learning_language|t)}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-hide="LessonAmount.tutormax==\'1\' || currentUser.learning_language">{{\'PM374\'|t|format:LessonAmount.tutormin:LessonAmount.tutormax}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.tutormax==\'1\' && currentUser.learning_language">{{\'PM368\'|t|format:(currentUser.learning_language|t)}}*</p><p class="visible-computer" style="font-size: 16px;font-weight: normal" ng-show="LessonAmount.tutormax==\'1\' && !currentUser.learning_language">{{\'PM375\'|t}}*</p></div></div></div><div class="coupons-container" id="coupon"><a ng-hide="showCoupon" ng-click="showCoupon = !showCoupon;"><img style="width: 25px;height: 25px;margin-right: 5px" class="visible-computer" src="/static/images/icons/icon_plus.svg"><span class="visible-phone">+</span>{{\'PM357\'|t}}</a><p ng-show="showCoupon" class="text-title phone-align" style="">{{\'PM357\'|t}}</p><p ng-show="showCoupon" class="phone-align" style="font-size: 16px;font-weight: 300">{{\'PM387\'|t}}</p><img style="display: none" src="/static/images/payment/coupon-red.png"><carousel ng-show="showCoupon" template-url="/views/component/carousel.html" no-wrap="ui.carousel.noWrap" slideindex="ui.carousel.slideIndex"><slide uib-slide ng-repeat="page in coupon.pagination track by page.id" index="page.id" active="page.active"><div ng-repeat="v in page.data" class="coupon"><div class="voucher-shadow"></div><div ng-class="{\'voucher-bg\': !v.showCouponCode, \'code-bg\': v.showCouponCode}"></div><div class="voucher-ticket" ng-if="!v.showCouponCode" ng-click="selectVoucher(v)" ng-class="{\'voucher-ticket-selected\': v.voucher_sn === coupon.selected.voucher_sn && coupon.selected.enabled, \'voucher-ticket-disabled\': v.voucher_sn === coupon.selected.voucher_sn && !coupon.selected.enabled}"><div class="voucher-off"><span><span class="voucher-off-count">${{v.voucher_value / 100}}</span><br>OFF</span></div><div class="voucher"><p><span>{{\'PM362\'|t}}:</span><br>{{v.use_limit_itc / 100}}$</p><p class="voucher-expiry"><span>{{\'TP269\'|t}}:</span><br>{{v.end_date | amDate: \'ll\'}}</p><p><span>{{\'PM363\'|t}}:</span><br>{{\'C0027\'|t}}</p></div><p class="coupon-voucher-msg" ng-style="{visibility: v.voucher_sn === coupon.selected.voucher_sn ? \'visible\' : \'hidden\'}" ng-class="{\'coupon-error\': ui.coupon.error, \'coupon-success\': !ui.coupon.error}">{{ui.coupon.error ? (\'PM379\'|t|format:coupon.selected.use_limit_itc / 100) : (\'PM378\'|t)}}</p></div><div ng-if="v.showCouponCode" class="coupon-code-slide" ng-class="{\'coupon-code-selected\': !ui.coupon.hide && !ui.coupon.error, \'coupon-code-disabled\': !ui.coupon.hide && ui.coupon.error}"><div class="coupon-code-container"><label style="font-weight: normal;white-space: nowrap" for="coupon-code">{{\'PM383\'|t}}</label><input placeholder="{{\'PM384\'|t}}" id="coupon-code" type="text" ng-model="coupon.code" class="coupon-code" ng-class="{\'coupon-code-input-error\': ui.coupon.error}"> <button class="btn btn-primary redeem text-up" ng-click="redeem(coupon.code)">{{\'PM358\'|t}}</button></div><p class="coupon-code-msg" ng-style="{visibility: ui.coupon.hide ? \'hidden\' : \'visible\'}" ng-class="{\'coupon-error\': ui.coupon.error, \'coupon-success\': !ui.coupon.error}">{{ui.coupon.error ? (ui.coupon.errorCode|t) : (\'PM378\'|t)}}</p></div></div></slide></carousel></div></div></div></div><div class="col-md-3 visible-detail"><div class="panel panel-shadow"><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><p style="font-size: 14px;line-height: 1.36;margin-bottom: 20px">{{\'PM388\'|t}}</p><div style="float: left;margin-right: 20px"><img style="width: 50px;height: 50px" src="/static/images/icons/icon_dollars.svg"></div><div style="float: left"><p style="font-size: 14px;line-height: 1.36;margin: 0">{{\'PM067\'|t}}</p><p style="font-size: 20px;line-height: 1.35">${{itc_usd.value|number:2}}</p></div></div><div class="panel-body"><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM067\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">${{itc_usd.value|number:2}}</p></div><div class="col-xs-6" ng-if="coupon.itc"><p style="font-size: 14px;line-height: 1.36;margin: 0">{{\'VGC401\'|t}}</p><a ng-if="coupon.itc" ng-click="removeCoupon()" style="font-size: 13px;white-space: nowrap">{{\'PM381\'|t}}</a></div><div class="col-xs-6 text-right" ng-if="coupon.itc"><p style="font-size: 16px;line-height: 1.19;margin: 0">{{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}}</p><p style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</p></div><div ng-show="coupon.itc === 0" class="col-xs-12"><a ng-click="goToCoupon()">+ {{\'PM357\'|t}}</a></div></div><button ng-click="payButton()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b" style="margin-top: 20px;margin-bottom:0;font-size: 18px;height: 40px">{{\'PM389\'|t}}</button></div></div></div><div class="col-md-3 visible-simple"><div class="panel panel-shadow"><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><div class="row"><div class="col-sm-9 col-xs-12 pay-count"><img src="/static/images/icons/icon_dollars.svg"><div><p style="font-size: 14px;line-height: 1.36;margin: 0">{{\'PM067\'|t}}</p><p style="font-size: 20px;line-height: 1.35;margin: 0">${{itc_usd.value | number: 2}} <span ng-if="coupon.itc">&nbsp;+ {{\'VGC401\'|t}}: {{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}} <span style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</span> <a ng-click="removeCoupon()" style="font-size: 13px;white-space: nowrap">{{\'PM381\'|t}}</a></span></p></div></div><div class="col-sm-3 col-xs-12"><div class="pay-button"><button ng-click="payButton()" class="btn btn-primary btn-lg btn-block btn-pay">{{\'PM389\'|t}}</button></div></div></div></div></div></div></div><p class="visible-computer" style="font-size: 12px;color: #797979">* {{\'PM359\'|t|format:(currentUser.learning_language|t)}}<br><span ng-bind-html="\'PM360\'|t|format:currentUser.id"></span></p></div><div class="panel visible-phone pay-btn-container-float"><div class="panel-body"><div class="row"><div class="col-sm-6 col-xs-12 pay-count"><div><p style="font-size: 16px;line-height: 1.36;margin: 0;text-align: left">{{\'PM067\'|t}}: ${{itc_usd.value | number: 2}}</p><p style="font-size: 16px;line-height: 1.35;margin: 0" ng-if="coupon.itc">{{\'VGC401\'|t}}: {{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}} <span style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</span></p><a ng-if="coupon.itc" ng-click="removeCoupon()">{{\'PM381\'|t}}</a></div></div><div class="col-sm-6 col-xs-12" style="margin: 0"><div class="pay-button"><button ng-click="payButton()" class="btn btn-primary btn-lg btn-block btn-pay">{{\'PM389\'|t}}</button></div></div></div></div></div><div class="panel visible-phone pay-btn-container"><div class="panel-body"><div class="row"><div class="col-sm-6 col-xs-12 pay-count"><div><p style="font-size: 16px;line-height: 1.36;margin: 0;text-align: left">{{\'PM067\'|t}}: ${{itc_usd.value | number: 2}}</p><p style="font-size: 16px;line-height: 1.35;margin: 0" ng-if="coupon.itc">{{\'VGC401\'|t}}: {{coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{coupon.itc / 100|number:2}} <span style="font-size: 13px" ng-if="coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</span></p><a ng-if="coupon.itc" ng-click="removeCoupon()">{{\'PM381\'|t}}</a></div></div><div class="col-sm-6 col-xs-12" style="margin: 0"><div class="pay-button"><button ng-click="payButton()" class="btn btn-primary btn-lg btn-block btn-pay">{{\'PM389\'|t}}</button></div></div></div></div></div><div pay-container-sticky ng-include="\'/views/common/bottom.purchasev2.html\'"></div>'),a.put("/views/finance/oneStepCheckout.html",'<div class="new-checkout" ng-include="\'/views/common/top.tpl.clean.html\'"></div><kp-notify></kp-notify><kp-full-screen-loading indicator="!oneStepCheckout.loading"></kp-full-screen-loading><div class="one-step-checkout"><div ui-view class="container payment"><h3 class="checkout">{{\'VC103\'|t}}</h3><h4>{{\'PM390\'|t}}</h4><div class="row visible-xs-block visible-sm-block"><div class="col-xs-12"><div class="panel panel-shadow" ng-if="oneStepCheckout.orderData && !oneStepCheckout.isGiftCard"><div class="panel-body"><div class="order-info"><div class="teacher"><img ng-src="{{ oneStepCheckout.orderData|avatar:\'50\' }}" width="50" class="avatar" kp-fallback-avatar><p class="order-desc teacher-name">{{oneStepCheckout.orderData.teacher_name}}</p><p class="order-desc course-name">{{oneStepCheckout.orderData.course_title}}</p><a class="visible-sm-inline-block show-details-xs" style="position: absolute;top: 40px;right: 0" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div><div class="course" ng-hide="!oneStepCheckout.showOrderDetails"><div class="order-duration"><h1 class="order-details-head">{{\'AS401\'|t}}</h1><p class="order-details-desc">{{oneStepCheckout.orderData.language|t}}</p></div><div class="order-duration"><h1 class="order-details-head">{{\'PM444\'|t}}</h1><p class="order-details-desc">{{\'PM445\'|t|format:oneStepCheckout.orderData.session_length * 15}}</p></div><div class="order-time"><h1 class="order-details-head">{{\'PM446\'|t}}</h1><div ng-repeat="time in oneStepCheckout.orderData.date"><p class="order-details-desc">{{time.weekday}}, {{time.days|date:\'MM, dd, yyyy\'}}<br>{{time.hours}}</p></div></div><div class="order-communication"><h1 class="order-details-head">{{\'TP010\'|t}}</h1><p class="order-details-desc">{{oneStepCheckout.orderData.communication}}: {{oneStepCheckout.orderData.student_im_account}}</p></div><div class="order-price"><h1 class="order-details-head">{{\'PM478\'|t}}</h1><p class="order-price-desc"><span class="order-price-item">{{\'PM445\'|t|format:oneStepCheckout.orderData.session_length * 15}}</span> <span class="order-price-value">{{oneStepCheckout.orderData.price}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM051\'|t}}</span> <span class="order-price-value">{{oneStepCheckout.currentUser.payment_account.available_itc_usd}}</span></p><p class="order-price-desc"><span class="order-price-item" style="font-weight: bold">{{\'VC420\'|t}}</span> <span class="order-price-value" style="font-weight: bold" ng-class="{\'order-price-min\': oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{(oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd) | kpToUsd}}<br><span ng-if="oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000" style="margin-top: 5px;color: #cb242b;font-weight: normal">{{\'PM379\'|t|format: \'10$\'}}</span></span></p></div><div class="order-checkout"><h1 ng-hide="!oneStepCheckout.showOrderDetails" class="order-details-head">{{\'VC103\'|t}}</h1><div class="order-checkout-detail"><p class="order-price-desc" ng-style="{\'margin-top\': !oneStepCheckout.showOrderDetails ? \'10px\' : \'0\'}"><span class="order-price-item">{{\'VC420\'|t}} <strong ng-if="oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000" class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></span> <span class="order-price-value" ng-class="{\'order-price-min\': oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></span> <span class="order-price-value">$&nbsp;{{oneStepCheckout.commission}}</span></p></div><div class="visible-sm-inline-block order-total"><p class="order-price-desc"><span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83"><span class="order-price-item" style="display: inline-block;margin: 5px 10px 0 0">{{\'TS013\'|t}}</span> $&nbsp;{{oneStepCheckout.amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><div class="visible-xs-block order-total"><p class="order-price-desc"><span class="order-price-item">{{\'TS013\'|t}}</span> <span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><a class="visible-xs-block show-details-xs" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div></div><div class="panel panel-shadow" ng-if="!oneStepCheckout.orderData && !oneStepCheckout.isGiftCard"><div class="panel-body"><div class="row show-details-xs-row"><div class="col-xs-12 col-sm-8"><div class="order-dollar"><img src="/static/images/icons/icon_dollars.svg"></div><div class="order-xs-price"><p>{{\'PM067\'|t}} - $&nbsp;{{oneStepCheckout.price | kpToUsd}}<br><a ng-click="oneStepCheckout.changeOrder()">{{\'PM435\'|t}}</a></p></div></div><div class="col-xs-12 col-sm-4 show-details-xs-col"><a class="visible-sm-inline-block show-details-xs" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a><div class="visible-xs-block panel-body" ng-hide="!oneStepCheckout.showOrderDetails" style="text-align: left"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM067\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</p></div></div><div class="row"><div class="col-xs-6" ng-if="oneStepCheckout.coupon.itc"><p style="font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}}</p></div><div class="col-xs-6 text-right" ng-if="oneStepCheckout.coupon.itc"><p style="font-size: 16px;line-height: 1.19;margin: 0">{{oneStepCheckout.coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{oneStepCheckout.coupon.itc / 100|number:2}}</p><p style="font-size: 13px" ng-if="oneStepCheckout.coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-6"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div></div><a class="visible-xs-block show-details-xs" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div><div class="visible-sm-block panel-body" ng-hide="!oneStepCheckout.showOrderDetails" style="margin: 20px -20px 0;padding-bottom:0;border-top: 1px solid #e8e8e8"><div class="row"><div class="col-sm-8"><div class="row"><div class="col-sm-7"><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM067\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</span></p><p ng-if="oneStepCheckout.coupon.itc" style="position: relative;font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19;margin: 0">{{oneStepCheckout.coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{oneStepCheckout.coupon.itc / 100|number:2}} <span ng-if="oneStepCheckout.coupon.selected.voucher_sn === 0">&nbsp;{{\'PM382\'|t}}</span></span></p><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong> <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</span></p></div></div></div><div class="col-sm-4 text-right"><p style="font-size: 24px;line-height: 1.19"><span style="display: inline-block;margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</span> $&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div></div></div></div><div class="panel panel-shadow" ng-if="oneStepCheckout.isGiftCard"><div class="panel-body"><div class="row show-details-xs-row"><div class="col-xs-12 col-sm-8"><div class="giftcard-cover"><img ng-src="/static/images/giftcard/{{img}}.png"></div><div class="order-xs-price"><p>{{\'M0115\'|t}} - $&nbsp;{{oneStepCheckout.price | kpToUsd}}<br><a ng-click="oneStepCheckout.changeOrder()">{{\'PM435\'|t}}</a></p></div></div><div class="col-xs-12 col-sm-4 show-details-xs-col"><a class="visible-sm-inline-block show-details-xs" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a><div class="visible-xs-block panel-body" ng-hide="!oneStepCheckout.showOrderDetails" style="text-align: left"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-6"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div></div><a class="visible-xs-block show-details-xs" ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}}<br><i ng-class="{\'fa-angle-down\': !oneStepCheckout.showOrderDetails, \'fa-angle-up\': oneStepCheckout.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div></div><div class="visible-sm-block panel-body" ng-hide="!oneStepCheckout.showOrderDetails" style="margin: 20px -20px 0;border-top: 1px solid #e8e8e8"><div class="row"><div class="col-sm-8"><div class="row"><div class="col-sm-7"><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'M0115\'|t}} <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</span></p><p style="position: relative;font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong> <span style="position: absolute; right: 0;font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</span></p></div></div></div><div class="col-sm-4 text-right"><p style="font-size: 24px;line-height: 1.19"><span style="display: inline-block;margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</span> $&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div></div></div></div></div></div><div class="row"><div class="col-md-9 match-col"><div class="panel panel-shadow one-step-panel"><div class="panel-body"><div class="payment-authorization"><h3 class="payment-method-title">{{\'PM038\'|t}}</h3><h4 class="payment-method-sub-title">{{\'PM556\'|t}}</h4><div><div class="authorization-method" ng-repeat="s in oneStepCheckout.stripeList track by $index"><label><input ng-model="oneStepCheckout.payment.method" type="radio" name="paymentMethod" class="radio_input" ng-value="$index"> <span class="radio_btn"></span> <img class="payment-icon" width="46" height="32" ng-src="/static/images/icon_{{s.brand.toLowerCase()}}.png"> <span ng-if="s.funding !== \'unknown\'" class="authorization-card-info"><span class="capitalize">{{s.funding}}</span> {{\'PM557\'|t}}<br>{{s.last4}}</span> <span ng-if="s.funding === \'unknown\'" class="authorization-card-info">{{\'PM558\'|t}}<br>{{s.last4}}</span> <span class="authorization-card-info hidden-xs">{{\'PM559\'|t}}<br>{{s.name}}</span> <span class="authorization-card-info hidden-xs">{{\'PM560\'|t}}<br>{{s.exp_month}}.{{s.exp_year}}</span></label></div><div class="authorization-method" ng-repeat="p in oneStepCheckout.paypalList track by $index"><label><input ng-model="oneStepCheckout.payment.method" type="radio" name="paymentMethod" class="radio_input" ng-value="oneStepCheckout.stripeList.length + $index"> <span class="radio_btn"></span> <img class="payment-icon" width="46" height="32" src="/static/images/icon-paypal.svg"> <span class="authorization-card-info">{{\'PM561\'|t}}<br>{{p.paypal_email}}</span></label></div></div><p ng-if="oneStepCheckout.hasError" class="payment-error">{{\'PM565\'|t}}</p><a ui-sref="checkout({\n                  img: oneStepCheckout.img,\n                  code: oneStepCheckout.coupon.code,\n                  min: oneStepCheckout.price,\n                  voucherid: oneStepCheckout.coupon.selected.voucher_sn,\n                  orderid: oneStepCheckout.orderID,\n                  usetype: oneStepCheckout.usetype,\n                  type: oneStepCheckout.type\n                })" class="select-new-payment">{{\'PM563\'|t}}</a></div><div class="visible-sm-block" style="margin: 0;padding: 10px 0 0;border-top: 1px solid #f1f1f1"><p>{{\'PM436\'|t}}</p><div style="font-size: 30px;line-height: 0.9;overflow: hidden;margin: 0"><span>$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</span> <button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\' | t}}</button></div><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: left;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div></div></div><div class="col-md-3 match-height"><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="oneStepCheckout.orderData && !oneStepCheckout.isGiftCard"><div class="panel-body"><div class="order-info"><div class="teacher"><img ng-src="{{ oneStepCheckout.orderData|avatar:\'50\' }}" width="50" class="avatar" kp-fallback-avatar><h1 class="order-small-head order-teacher">{{\'C0122\'|t}}</h1><p class="order-desc teacher-name">{{oneStepCheckout.orderData.teacher_name}}</p><h1 class="order-small-head course-name">{{\'PM439\'|t}}</h1><p ng-if="oneStepCheckout.orderData.session_type == \'3\'" class="order-desc course-name">{{\'TS032\'|t}}</p><p ng-if="oneStepCheckout.orderData.session_type != \'3\' && oneStepCheckout.orderData.course_title" class="order-desc course-name">{{oneStepCheckout.orderData.course_title}}</p><p ng-if="oneStepCheckout.orderData.session_type != \'3\' && !oneStepCheckout.orderData.course_title" class="order-desc course-name">{{\'C0203\'|t}}</p></div><div class="course" style="text-align: center"><a ng-click="oneStepCheckout.toggleOrderDetails()">{{oneStepCheckout.showOrderDetails ? (\'PM441\'|t) : (\'PM440\'|t)}} <i style="vertical-align: middle" ng-class="{\'fa-angle-down\': !ui.showOrderDetails, \'fa-angle-up\': ui.showOrderDetails}" class="fa" aria-hidden="true"></i></a></div><div ng-hide="!oneStepCheckout.showOrderDetails"><div class="order-duration"><h1 class="order-details-head">{{\'AS401\'|t}}</h1><p class="order-details-desc">{{oneStepCheckout.orderData.language|t}}</p></div><div class="order-duration"><h1 class="order-details-head">{{\'PM444\'|t}}</h1><p class="order-details-desc">{{\'PM445\'|t|format:oneStepCheckout.orderData.session_length * 15}}</p></div><div class="order-time"><h1 class="order-details-head">{{\'PM446\'|t}}</h1><div ng-repeat="time in oneStepCheckout.orderData.date"><p class="order-details-desc">{{time.weekday}}, {{time.days|date:\'MM, dd, yyyy\'}}<br>{{time.hours}}</p></div></div><div class="order-communication"><h1 class="order-details-head">{{\'TP010\'|t}}</h1><p class="order-details-desc">{{oneStepCheckout.orderData.communication}}: {{oneStepCheckout.orderData.student_im_account}}</p></div><div class="order-price"><h1 class="order-details-head">{{\'PM478\'|t}}</h1><p class="order-price-desc"><span class="order-price-item">{{\'PM445\'|t|format:oneStepCheckout.orderData.session_length * 15}}</span> <span class="order-price-value">$&nbsp;{{oneStepCheckout.orderData.price | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM051\'|t}}</span> <span class="order-price-value">$&nbsp;{{oneStepCheckout.currentUser.payment_account.available_itc_usd | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item" style="font-weight: bold">{{\'VC420\'|t}}</span> <span class="order-price-value" style="font-weight: bold" ng-class="{\'order-price-min\': oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{(oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd) | kpToUsd}}</span> <span ng-if="oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000" style="float: right;margin-top: 5px;color: #cb242b;width: 100%;text-align: right">{{\'PM379\'|t|format: \'10\'}}</span></p></div></div><div class="order-checkout"><h1 ng-hide="!oneStepCheckout.showOrderDetails" class="order-details-head">{{\'VC103\'|t}}</h1><p class="order-price-desc" ng-style="{\'margin-top\': !oneStepCheckout.showOrderDetails ? \'10px\' : \'0\'}"><span class="order-price-item">{{\'VC420\'|t}} <strong ng-if="oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000" class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.subTotalTip">?</strong></span> <span class="order-price-value" ng-class="{\'order-price-min\': oneStepCheckout.orderData.price - oneStepCheckout.currentUser.payment_account.available_itc_usd < 1000}">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</span></p><p class="order-price-desc"><span class="order-price-item">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></span> <span class="order-price-value">$&nbsp;{{oneStepCheckout.commission}}</span></p></div><div class="order-total"><p class="order-price-desc"><span class="order-price-item">{{\'TS013\'|t}}</span> <span class="order-price-value" style="font-size: 24px;font-weight: 500;line-height: 0.83">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</span></p><p ng-style="{\'visibility\': !oneStepCheckout.amountCurrency && oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div><button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\' | t}}</button></div></div></div><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="!oneStepCheckout.orderData && !oneStepCheckout.isGiftCard"><a ng-click="oneStepCheckout.changeOrder()" class="desktop-changeOrder">{{\'PM435\'|t}}</a><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><div style="float: left;margin-right: 20px"><img style="width: 50px;height: 50px" src="/static/images/icons/icon_dollars.svg"></div><div style="float: left"><p style="font-size: 14px;line-height: 1.36;margin: 0">{{\'PM067\'|t}}</p><p style="font-size: 20px;line-height: 1.35">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</p></div></div><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'PM067\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</p></div></div><div class="row"><div class="col-xs-6" ng-if="oneStepCheckout.coupon.itc"><p style="font-size: 14px;line-height: 1.36">{{\'VGC401\'|t}}</p></div><div class="col-xs-6 text-right" ng-if="oneStepCheckout.coupon.itc"><p style="font-size: 16px;line-height: 1.19;margin: 0">{{oneStepCheckout.coupon.selected.voucher_sn !== 0 ? \'- \' : \'+ \'}}${{oneStepCheckout.coupon.itc / 100|number:2}}</p><p style="font-size: 13px" ng-if="oneStepCheckout.coupon.selected.voucher_sn === 0">{{\'PM382\'|t}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-md-8"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></p></div><div class="col-md-4 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-5"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-7 text-right"><p style="margin-bottom: 5px;font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\' | t}}</button></div></div><div class="panel panel-shadow visible-md-block visible-lg-block" ng-if="oneStepCheckout.isGiftCard"><div class="panel-body" style="border-bottom: solid 1px #e8e8e8"><a ng-click="oneStepCheckout.changeOrder()">{{\'PM435\'|t}}</a><div style="margin: 20px auto 0;width: 90%"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price / 100}}</p></div></div><div><img style="width: 100%;border-bottom: 10px solid #ff4338" ng-src="/static/images/giftcard/{{oneStepCheckout.img}}.png"></div></div></div><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="font-size: 14px;line-height: 1.36">{{\'M0115\'|t}}</p></div><div class="col-xs-6 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.price | kpToUsd}}</p></div></div><div class="row" style="border-bottom: solid 1px #e8e8e8;padding-bottom: 20px"><div class="col-md-8"><p style="font-size: 14px;line-height: 1.36">{{\'PM215\'|t}} <strong class="help-icon" tooltip-class="help-tips" tooltip-placement="right" tooltip-html="oneStepCheckout.processingFeeTip">?</strong></p></div><div class="col-md-4 text-right"><p style="font-size: 16px;line-height: 1.19">$&nbsp;{{oneStepCheckout.commission}}</p></div></div><div class="row" style="padding: 20px 0 0"><div class="col-xs-5"><p style="margin: 5px 0 0;font-size: 14px;line-height: 1.36">{{\'TS013\'|t}}</p></div><div class="col-xs-7 text-right"><p style="margin-bottom: 5px;font-size: 24px;line-height: 1.19;font-weight: 500">$&nbsp;{{oneStepCheckout.amount | kpToUsd}}</p><p ng-style="{\'visibility\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'visible\': \'hidden\'}" style="float: right;margin: 0;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\'|t}}</button></div></div><div class="panel panel-shadow help-box"><h4 class="help-title">{{\'PA254\'|t}}</h4><div class="panel-body" style="border-top: solid 1px #e8e8e8"><ui-select ng-model="oneStepCheckout.help" theme="bootstrap"><ui-select-match placeholder="{{\'PM448\'|t}}"><span ng-bind-html="$select.selected.value ? $select.selected.question : \'PM448\'|t"></span></ui-select-match><ui-select-choices repeat="help in oneStepCheckout.helps"><div ng-bind-html="(help.question | t) | highlight: $select.search"></div></ui-select-choices></ui-select><div style="margin-top: 10px"><p ng-if="oneStepCheckout.help.value !== 6">{{oneStepCheckout.answers[oneStepCheckout.help.value - 1]|t}}</p><p ng-if="oneStepCheckout.help.value === 6">{{(oneStepCheckout.answers[5][0]|t) + (oneStepCheckout.answers[5][1]|t|format: \'support@italki.com\')}}</p></div></div></div></div></div><div class="visible-xs-block xs-pay pay-btn-container-float"><div class="panel panel-shadow"><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="margin: 0;font-size: 14px;line-height: 1.62">{{\'PM436\'|t}}</p><p style="margin: 0;font-size: 30px;line-height: 0.9">${{oneStepCheckout.amount | kpToUsd}}<span style="font-size: 18px;vertical-align: super">&nbsp;USD</span></p></div><div class="col-xs-6"><p ng-style="{\'display\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'inline-block\': \'none\'}" style="float: right;margin-top: 20px;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\' | t}}</button></div></div></div><div class="visible-xs-block xs-pay pay-btn-container"><div class="panel panel-shadow"><div class="panel-body"><div class="row"><div class="col-xs-6"><p style="margin: 0;font-size: 14px;line-height: 1.62">{{\'PM436\'|t}}</p><p style="margin: 0;font-size: 30px;line-height: 0.9">${{oneStepCheckout.amount | kpToUsd}}<span style="font-size: 18px;vertical-align: super">&nbsp;USD</span></p></div><div class="col-xs-6"><p ng-style="{\'display\': oneStepCheckout.currentUser.currency !== \'USD\' ? \'inline-block\': \'none\'}" style="float: right;margin-top: 20px;padding: 2px 5px;height: 20px;background-color: #eeeeee;border-radius: 2px;font-size: 12px">≈{{oneStepCheckout.amountCurrency / 100|number:2}}{{oneStepCheckout.currentUser.currency}}</p></div></div><button ng-click="oneStepCheckout.pay()" class="btn btn-primary btn-lg btn-block grid-gutter-margin-b btn-pay">{{\'PM437\' | t}}</button></div></div></div></div><div pay-container-sticky ng-include="\'/views/common/bottom.purchasev2.html\'"></div></div>'),
a.put("/views/finance/overview.html","<style>@media (min-width: 480px) and (max-width: 767px) {\n    .visible-phone{\n      display: inherit !important;\n    }\n  }\n  .select-time-ul>li{\n    list-style: none;\n  }\n  .select-time-ul>li>a{\n    margin: 0 -2px;\n    padding: 5px 18px;\n    display: block;\n    clear: both;\n    font-weight: normal;\n    line-height: 20px;\n    color: #333333;\n    white-space: nowrap;\n  }\n  .select-time-ul>li>a:active,.select-time-ul>li>a:hover{\n    background: #ff4338;\n    color: white;\n  }\n  .dtp-picker-selector-link.small.sub:after {\n    top: 0.4rem;\n  }\n  .dropdown-menu:before {\n    left: 50% !important;\n    border-width:12px !important;\n  }\n  .button-style span button,.button-style span button:hover{\n    background-color: transparent !important;\n    -webkit-box-shadow: none !important;\n    box-shadow: none !important;\n    border: 1px #fff solid !important;\n    color: #000000;\n    left: 100px;\n  }\n  .button-style span .btn-danger{\n    display: none;\n  }\n  .button-style span + .btn-success{\n    display: none;\n  }\n\n\n  .switch-block-tabs{\n    list-style: none;\n    padding-left: 0;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  }\n\n  .switch-block-tab{\n    float:left;\n  }\n\n  .switch-block-tab-link{\n    display: block;\n    padding: 1rem 3rem;\n    color: #333333;\n  }\n\n  .switch-block-tabs:before, .switch-block-tabs:after {\n    content: \" \";\n    display: table;\n    clear: both;\n  }\n\n  .switch-block-tab-link.selected {\n    background: none;\n  }\n\n  .switch-block-tab-link.selected:hover {\n    box-shadow: none;\n  }\n\n  .switch-block-tab-link.selected {\n    background: #ffffff;\n    color: #ff4338;\n    border-bottom: 3px solid #ff4338;\n  }\n\n\n  .coupon-question{\n    padding-right: 2rem;\n    line-height: 47px;\n  }\n\n  .coupon-items{\n    margin-top: 20px;\n  }\n\n\n  .coupon-items .coupon-item {\n    float: left;\n    margin: 0 16px 20px 0;\n    width: 185px;\n  }\n\n\n\n  .coupon-item .c-type {\n    position: relative;\n    width: 100%;\n    overflow: hidden;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n  }\n\n  .coupon-item .c-type {\n    background: #4EA4BB;\n    position: relative;\n    width: 100%;\n    overflow: hidden;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n\n  }\n\n  .coupon-item .c-msg {\n    padding: 20px 0 15px;\n    background: #f9f9f9;\n    height:115px;\n  }\n\n  .coupon-history .coupon-item .c-type, .coupon-history .coupon-item-sm .c-type{\n    background: #D8D8D8;\n  }\n\n  .coupon-history .coupon-item.c-expired .c-msg, .coupon-history .coupon-item-sm.c-expired .c-msg{\n    background-image: url('/static/images/coupon_expired.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n  .coupon-history .coupon-item.c-used .c-msg, .coupon-history .coupon-item-sm.c-used .c-msg{\n    background-image: url('/static/images/coupon_used.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n  .coupon-history .coupon-item.c-inuse .c-msg, .coupon-history .coupon-item-sm.c-inuse .c-msg{\n    background-image: url('/static/images/coupon_inuse.png');\n    background-repeat: no-repeat;\n    background-size: 50% auto;\n    background-position: bottom right;\n  }\n\n\n\n  .coupon-item .c-btn {\n    margin-top: 20px;\n    text-align: center;\n    padding: 10px 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    width: 150px;\n    margin: 10px auto;\n    cursor: pointer;\n  }\n\n  .coupon-item .c-btn:hover{\n    background:#e4e4e4;\n  }\n\n\n  .coupon-item-sm{\n    overflow: hidden;\n    margin-bottom: 10px;\n  }\n\n  .coupon-item-sm .c-type {\n    position: relative;\n    color: #fff;\n    text-align: center;\n    padding: 20px;\n    background: #4EA4BB;\n    float: left;\n    width: 60%;\n  }\n\n  .coupon-item-sm .c-msg {\n    padding: 20px 0 15px;\n    background: #f9f9f9;\n    width: 40%;\n    float: right;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .coupon-item-sm .c-btn {\n    margin-top: 20px;\n    text-align: center;\n    padding: 10px 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    margin: 10px 10px 0;\n  }\n\n  @media (min-width: 481px){\n\n    .coupon-item-sm{\n      display: none;\n    }\n  }\n\n  @media (max-width: 480px){\n    .coupon-item{\n      display: none;\n    }\n\n    .coupon-item-sm{\n      display: flex;\n    }\n\n    .switch-block-tab {\n      width: auto;\n    }\n\n    .switch-block-tab-link.selected {\n      color: #ff4338;\n      border-bottom: 3px solid #ff4338;\n      padding-bottom: 1.3rem;\n    }\n  }\n\n  @media (max-width: 374px){\n    .coupon-item-sm .c-type {\n      padding: 20px 5px;\n    }\n"+'  }</style><h2>{{ \'M0048\'|t }}</h2><div class="row"><div class="col-md-9"><div ng-if="tabs.tab5!=seltab && tabs.tab6!=seltab"><div class="panel" ng-hide="!currentUser.revenue_account"><div class="panel-body"><h4 class="no-margin-t">{{\'PM001\'|t}}</h4><div class="stat-panel"><ul class="profile_card list-inline finance"><li><div class="info">{{ \'PM052\'|t }}<br><strong class="text-lg">${{(currentUser.revenue_account.available_itc_usd+currentUser.revenue_account.frozen_withdraw_itc_usd )|kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{((currentUser.revenue_account.available_itc_usd+currentUser.revenue_account.frozen_withdraw_itc_usd)/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div class="info">{{ \'PM051\'|t }}<br><strong class="text-lg">${{(currentUser.revenue_account.available_itc_usd)|kpToUsd | number:2 }} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(currentUser.revenue_account.available_itc_usd/10) *currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div class="info">{{ \'PM053\'|t }}<br><strong class="text-lg">${{(currentUser.revenue_account.frozen_withdraw_itc_usd+currentUser.revenue_account.pending_withdraw_itc_usd)| kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{((currentUser.revenue_account.frozen_withdraw_itc_usd+currentUser.revenue_account.pending_withdraw_itc_usd)/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li></ul></div><ul class="list-inline no-margin-b hidden-phone" ng-show="currentUser.revenue_account&&currentUser.revenue_account.status==\'1\'"><li><a class="btn" ng-click="openWithdrawModal()" href="javascript:void(0);">{{\'PM102\'|t}}</a></li><li><a class="btn" ng-click="openTransferModal()" href="javascript:void(0);">{{\'PM090\'|t}}</a></li></ul><p style="color:  #777;margin-top: 6px" ng-show="currentUser.currency!=\'USD\'">*{{\'PM527\'|t}}</p><p ng-hide="currentUser.revenue_account&&currentUser.revenue_account.status==\'1\'" ng-bind-html="\'KP336\'|t"></p><div class="text-center visible-phone" ng-show="currentUser.revenue_account&&currentUser.revenue_account.status==\'1\'"><hr><a ng-click="openWithdrawModal()" href="javascript:void(0);" translate="PM102"></a>&nbsp;&nbsp; <a ng-click="openTransferModal()" href="javascript:void(0);" translate="PM090"></a></div></div></div><div class="panel"><div class="panel-body"><h4 class="no-margin-t">{{\'PM002\'|t}}</h4><div class="stat-panel"><ul class="profile_card list-inline finance"><li><div>{{ \'PM052\'|t }}<br><strong class="text-lg">${{ (currentUser.payment_account.total_itc_usd)| kpToUsd | number :2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(currentUser.payment_account.total_itc_usd/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div>{{ \'PM051\'|t }}<br><strong class="text-lg">${{ (currentUser.payment_account.total_itc_usd-currentUser.payment_account.session_pending_itc_usd)| kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{((currentUser.payment_account.total_itc_usd-currentUser.payment_account.session_pending_itc_usd)/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div>{{ \'PM054\'|t }}<br><strong class="text-lg">${{(currentUser.payment_account.purchase_pending_itc_usd)| kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(currentUser.payment_account.purchase_pending_itc_usd/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li></ul></div><ul class="list-inline no-margin-b hidden-phone"><li><a class="btn btn-primary" ui-sref="recharge"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</a></li><li><a class="btn" ng-click="openRedeemModal()" href="javascript:void(0);">{{\'VC003\'|t}}</a></li></ul><p style="color:  #777;margin-top: 6px" ng-show="currentUser.currency!=\'USD\'">*{{\'PM527\'|t}}</p><p class="text-center visible-phone"><button class="btn btn-primary" ui-sref="recharge"><span class="btn-txt"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</span></button> <a ng-click="openRedeemModal()" href="javascript:void(0);" translate="VC003"></a></p></div></div></div><div ng-if="tabs.tab5==seltab || tabs.tab6==seltab"><div class="panel"><div class="panel-body"><h4 class="no-margin-t">{{\'VGC404\'|t}}</h4><div class="stat-panel"><ul class="profile_card list-inline finance"><li><div>{{\'VGC412\'|t}}<br><strong class="text-lg">${{available_itc | kpToUsd | number :2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(available_itc/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div>{{\'VGC413\'|t}}<br><strong class="text-lg">${{will_expire_itc | kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(will_expire_itc/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li><li><div>{{\'VGC414\'|t}}<br><strong class="text-lg">${{expired_itc | kpToUsd | number:2}} USD</strong><br><font class="label label-tags" ng-if="currentUser.currency!=\'USD\'">{{(expired_itc/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</font></div></li></ul></div><ul class="list-inline no-margin-b hidden-phone"><li><a class="btn btn-primary" ui-sref="recharge"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</a></li><li><a class="btn" ng-click="openRedeemModal()" href="javascript:void(0);">{{\'VC003\'|t}}</a></li></ul><p style="color:  #777;margin-top: 6px" ng-show="currentUser.currency!=\'USD\'">*{{\'PM527\'|t}}</p><p class="text-center visible-phone"><button class="btn btn-primary" ui-sref="recharge"><span class="btn-txt"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</span></button> <a ng-click="openRedeemModal()" href="javascript:void(0);" translate="VC003"></a></p></div></div></div><div class="panel"><a id="hashID"></a><ul class="content-block-tabs js-tabs-tabs no-margin-b finance"><li class="content-block-tab" ng-hide="!currentUser.revenue_account"><a class="content-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab1==seltab}" translate="PM009" ng-click="changeTab(tabs.tab1)"></a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab2==seltab}" translate="PM010" ng-click="changeTab(tabs.tab2)"></a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab3==seltab}" translate="PM011" ng-click="changeTab(tabs.tab3)"></a></li><li class="content-block-tab" ng-hide="!currentUser.revenue_account"><a class="content-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab4==seltab}" translate="PM012" ng-click="changeTab(tabs.tab4)"></a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:(tabs.tab5==seltab||tabs.tab6==seltab)}" ng-click="changeTab(tabs.tab5)">{{\'VGC402\'|t}}</a></li></ul><div class="panel-heading no-padding clearfix" ng-if="tabs.tab5==seltab||tabs.tab6==seltab" style="height: 47px"><div class="pull-left text-center"><ul class="switch-block-tabs js-tabs-tabs no-margin-b finance" style="border-bottom: none"><li class="switch-block-tab"><a class="switch-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab5==seltab}" ng-click="changeTab(tabs.tab5)">{{\'VGC401\'|t}}</a></li><li class="switch-block-tab"><a class="switch-block-tab-link js-tab-link" href="javascript:void(0);" ng-class="{selected:tabs.tab6==seltab}" ng-click="changeTab(tabs.tab6)">{{\'VGC407\'|t}}</a></li></ul></div><a href="http://support.italki.com/hc/en-us/articles/115000112893-New-italki-Coupon-System" target="_blank" style="color: #000000"><i class="fa fa-question-circle-o pull-right" style="height:47px; line-height: 47px; margin-right: 20px"></i></a></div><div class="panel-heading" ng-if="tabs.tab5!=seltab&&tabs.tab6!=seltab"><div class="row hidden-phone"><div class="col-sm-8 text-center"><div class="row"><div class="col-sm-10 text-left"><div class="input-daterange input-group" id="bs-datepicker-range"><div class="button-style" style="position: relative"><input type="text" class="input-sm form-control" name="start" placeholder="{{\'TS055\'|t}}" datepicker-popup ng-model="dataTime.dt1" is-open="status.start_opened" min-date="1950-06-22" max-date="mDate" style="padding-right: 25px;text-overflow: ellipsis" date-disabled="disabled1(date, mode)" ng-click="sopen($event);"> <i class="fa fa-calendar" style="font-size: 14px; position: absolute; right:10px; top: 10px; color:#777; z-index: 3" ng-click="sopen($event);"></i></div><span class="input-group-addon">{{\'TP024\'|t}}</span><div class="button-style" style="position: relative"><input type="text" class="input-sm form-control" name="end" placeholder="{{\'TS056\'|t}}" datepicker-popup ng-model="dataTime.dt2" is-open="status.end_opened" min-date="\'1950-06-22\'" max-date="mDate" style="padding-right: 25px;text-overflow: ellipsis" date-disabled="disabled2(date, mode)" close-text="Close" ng-click="eopen($event);"> <i class="fa fa-calendar" style="font-size: 14px; position: absolute; right:10px; top: 10px; color:#777; z-index: 3" ng-click="eopen($event);"></i></div></div><span class="help-block" ng-if="errorFlag" style="z-index: 10">{{\'C3020\'|t}}</span></div><div class="col-sm-1" style="margin-left: -10px"><button class="btn btn-primary" ng-click="submitDate()">{{\'HPT47\'|t}}</button></div></div></div><div class="col-sm-4"><form class="row"><div class="col-xs-11" style="float: right"><div style="position: relative"><input class="form-control" type="text" placeholder="{{\'PM528\'|t}}" ng-model="selId.data.id" autocomplete="on" style="padding-right: 25px;text-overflow: ellipsis" ng-keyup="changeId(selId.data.id)"> <i class="fa fa-ii-search" style="font-size: 16px; position: absolute; right:10px; top: 9px; color:#777; z-index: 3"></i></div></div></form></div></div></div><div class="panel-body"><div class="loading-layout" ng-if="tabs.tab1==seltab"><kp-loading indicator="items_1"></kp-loading><kp-no-found items="items_1"></kp-no-found><div ng-if="items_1" class="visible-phone widget-support-tickets"><div ng-repeat="item in items_1" ng-click="revenueDetail(item.id,item.status)" class="ticket dtp-finance-result is-relative"><div class="row"><div class="col-xs-8 no-margin-b"><strong>{{item.show_type|revenueHistoryDesc|t}}</strong><br><span class="text-muted">{{item.order_id}}</span></div><div class="col-xs-4 no-margin-b text-right" style="padding-top: 10px"><h4 class="no-margin">{{item.itc_usd>0?(\'+\'+item.itc_usd):item.itc_usd|kpToUsd|number:2}} USD</h4></div></div></div></div><div class="hidden-phone" ng-if="items_1"><table class="table table-striped"><thead><tr><th>{{ \'PM036\'|t }}</th><th>{{ \'PM037\'|t }}</th><th>{{ \'PM042\'|t }}</th><th class="text-right">{{ \'PM040\'|t }}</th><th class="text-right">{{ \'PM045\'|t }}</th><th>{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items_1"><td>{{item.order_id}}</td><td>{{item.utc_time|date:\'dd/MM/yyyy\'}}</td><td>{{item.show_type|revenueHistoryDesc|t}}</td><td class="text-right">{{item.itc_usd>0?(\'+\'+item.itc_usd):item.itc_usd| kpToUsd |number:2}}</td><td class="text-right">{{item.avai_rest_itc_usd| kpToUsd |number:2}}</td><td><ul class="list-inline no-margin-b"><li><a href="javascript:void(0);" ng-click="revenueDetail(item.id,item.show_type)">{{\'MH119\'|t}}</a></li><li ng-if="[3003,3004,5004,5008,5003,5007].indexOf(item.show_type)>-1"><a href="javascript:void(0);" ng-click="revenueRelation(item.order_id,item.show_type)">{{\'PM127\'|t}}</a></li></ul></td></tr></tbody></table></div></div><div class="loading-layout" ng-if="tabs.tab2==seltab"><kp-loading indicator="items_2"></kp-loading><kp-no-found items="items_2"></kp-no-found><div ng-if="items_2" class="visible-phone widget-support-tickets"><div ng-repeat="item in items_2" ng-click="paymentDetail(item.id,item.status)" class="ticket dtp-finance-result is-relative"><div class="row"><div class="col-xs-8 no-margin-b"><strong>{{(item.show_type|paymentHistoryDesc)|t}}</strong><br><span class="text-muted">{{item.order_id}}</span></div><div class="col-xs-4 no-margin-b text-right" style="padding-top: 10px"><h4 class="no-margin">${{item.itc_usd>0?(\'+\'+item.itc_usd):item.itc_usd | kpToUsd|number:2}} USD</h4></div></div></div></div><div class="hidden-phone" ng-if="items_2"><table class="table table-striped"><thead><tr><th class="center">{{ \'PM036\'|t }}</th><th class="center">{{ \'PM037\'|t }}</th><th class="center">{{ \'PM042\'|t }}</th><th class="text-right">{{ \'PM040\'|t }}</th><th class="text-right">{{ \'PM045\'|t }}</th><th>{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items_2"><td class="center">{{item.order_id}}</td><td class="center">{{item.utc_time|date:\'dd/MM/yyyy\'}}</td><td class="center">{{(item.show_type|paymentHistoryDesc)|t}}</td><td class="text-right">{{item.extra_itc_usd>0?(item.extra_itc_usd + item.itc_usd):item.itc_usd| kpToUsd |number:2}}</td><td class="text-right">{{item.extra_itc_usd>0?(item.avai_rest_itc_usd + item.extra_itc_usd):item.avai_rest_itc_usd| kpToUsd |number:2}}</td><td class="center"><ul class="list-inline no-margin-b"><li><a href="javascript:void(0);" ng-click="paymentDetail(item)">{{\'MH119\'|t}}</a></li><li ng-if="item.show_type == 5002||item.show_type ==5006"><a href="javascript:void(0);" ng-click="paymentRelation(item.order_id)">{{\'PM127\'|t}}</a></li></ul></td></tr></tbody></table></div></div><div class="loading-layout" ng-if="tabs.tab3==seltab"><kp-loading indicator="items_3"></kp-loading><kp-no-found items="items_3"></kp-no-found><div ng-if="items_3" class="visible-phone widget-support-tickets"><div ng-repeat="item in items_3" ng-click="purchaseDetail(item.id,item.status)" class="ticket dtp-finance-result is-relative"><div class="row"><div class="col-xs-8 no-margin-b"><strong ng-switch="item.status"><span ng-switch-when="1">{{ \'PM455\'|t }}</span> <span ng-switch-when="2" ng-if="item.account_type!=\'0\'">{{ \'PM454\'|t }}</span> <span ng-switch-default><a href="">{{ \'PM457\'|t }}</a></span></strong><br>{{item.utc_time|date:\'dd/MM/yyyy\'}}<br><span class="text-muted">{{item.order_id}}</span></div><div class="col-xs-4 no-margin-b text-right" style="padding-top: 10px"><h4 class="no-margin">${{item.itc_usd|kpToUsd|number:2}} USD</h4></div></div></div></div><div class="hidden-phone" ng-if="items_3"><table class="table table-striped"><thead><tr><th>{{ \'PM036\'|t }}</th><th>{{ \'PM037\'|t }}</th><th>{{ \'PM038\'|t }}</th><th class="text-right">{{ \'PM040\'|t }}</th><th>{{ \'PM041\'|t }}</th><th>{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items_3"><td>{{item.order_id }}</td><td>{{item.utc_time|amDate:\'TF005\':true}}</td><td>{{ getI18nKey(item.account_type)|t }}</td><td class="text-right">{{ item.itc_usd | kpToUsd |number:2}}</td><td ng-switch="item.status"><span ng-switch-when="0">{{\'TPA03\'|t}}</span> <span ng-switch-when="1">{{ \'PM455\'|t }}</span> <span ng-switch-when="2" ng-if="item.account_type!=\'0\'">{{ \'PM454\'|t }}</span> <span ng-switch-when="3">{{\'TPA06\'|t}}</span> <span ng-switch-when="4">{{\'TPA05\'|t}}</span> <span ng-switch-when="5">{{\'PM142\'|t}}</span> <span ng-switch-when="6">{{\'PM406\'|t}}</span> <span ng-switch-default ng-click="purchaseBankTransferInfo(item.id)"><a></a></span></td><td><ul class="list-inline no-margin-b"><li ng-if="item.status==\'1\'"><a href="javascript:void(0);" ng-click="purchaseDetail(item.id,item.status)">{{\'PM351\'|t}}</a></li><li><a href="javascript:void(0);" ng-if="item.status==\'0\' && item.account_type==\'0\'" ng-click="purchase_cancel(item.id,item.status)">{{ \'C0056\'|t }}</a></li></ul></td></tr></tbody></table></div></div><div class="loading-layout" ng-if="tabs.tab4==seltab"><kp-loading indicator="items_4"></kp-loading><kp-no-found items="items_4"></kp-no-found><div ng-if="items_4" class="visible-phone widget-support-tickets"><div ng-repeat="item in items_4" ng-click="openWithdrawModal()" class="ticket dtp-finance-result is-relative"><div class="row"><div class="col-xs-8 no-margin-b"><strong>{{ item.status|withdrawHistoryDesc|t }}</strong><br><span class="text-muted">{{item.order_id}}</span></div><div class="col-xs-4 no-margin-b text-right" style="padding-top: 10px"><h4 class="no-margin">${{item.itc_usd|kpToUsd|number:2}} USD</h4></div></div></div></div><div class="hidden-phone" ng-if="items_4"><table class="table table-striped"><thead><tr><th>{{\'PM036\'|t}}</th><th>{{ \'PM037\'|t }}</th><th>{{ \'PM039\'|t }}</th><th class="text-right">{{ \'PM040\'|t }}</th><th>{{ \'PM041\'|t }}</th><th>{{ \'TP088\'|t }}</th></tr></thead><tbody><tr ng-repeat="item in items_4"><td>{{item.order_id}}</td><td>{{item.create_date|amDate:\'TF005\':true}}</td><td>{{ getI18nKey(item.withdraw_method)|t }}<br>{{ item.account }}</td><td class="text-right">{{item.itc_usd| kpToUsd |number:2}}</td><td>{{ item.status|withdrawHistoryDesc|t }}</td><td><a href="javascript:void(0);" ng-click="withdrawDetail(item.id)">{{\'MH119\'|t}}</a></td></tr></tbody></table></div></div><div class="loading-layout" ng-if="tabs.tab5==seltab"><kp-loading indicator="items_5"></kp-loading><kp-no-found items="items_5"></kp-no-found><div class="coupon-items clearfix" ng-if="items_5"><div class="coupon-item" ng-repeat="item in items_5"><div class="c-type" ng-style="{background:((item.unstart)?\'#D8D8D8\':\'#4EA4BB\')}"><h3 class="c-price no-margin-t">${{item.voucher_value|kpToUsd|number:2}} OFF</h3><div class="c-limit" style="margin-bottom: 10px">Purchase ${{item.use_limit_itc|kpToUsd|number:2}} USD in italki credits</div><div class="c-time">UTC<br>{{item.start_date|amDate:\'YYYY.MM.DD\'}} - {{item.end_date|amDate:\'YYYY.MM.DD\'}}</div></div><div class="c-msg text-center"><div class="c-range">Language：unlimited</div><div class="c-btn" ng-click="nowUseThisCoupon(item)">Use It Now</div></div></div><div class="coupon-item-sm" ng-repeat="item in items_5"><div class="c-type" ng-style="{background:((item.unstart)?\'#D8D8D8\':\'#4EA4BB\')}"><h3 class="c-price no-margin-t">${{item.voucher_value|kpToUsd|number:2}} OFF</h3><div class="c-limit" style="margin-bottom: 10px">Purchase ${{item.use_limit_itc|kpToUsd|number:2}} USD in italki credits</div><div class="c-time">UTC<br>{{item.start_date|amDate:\'YYYY.MM.DD\'}} - {{item.end_date|amDate:\'YYYY.MM.DD\'}}</div></div><div class="c-msg text-center"><div><div class="c-range">Language：unlimited</div><div class="c-btn" ng-click="nowUseThisCoupon(item)">Use It Now</div></div></div></div></div></div><div class="loading-layout" ng-if="tabs.tab6==seltab"><kp-loading indicator="items_6"></kp-loading><kp-no-found items="items_6"></kp-no-found><div class="coupon-items clearfix coupon-history" ng-if="items_6"><div class="coupon-item" ng-repeat="item in items_6" ng-class="{\'c-used\':item.voucher_status==1||item.voucher_status==2,\'c-expired\':item.voucher_status==3||item.voucher_status==0}"><div class="c-type"><h3 class="c-price no-margin-t">${{item.voucher_value|kpToUsd|number:2}} OFF</h3><div class="c-limit" style="margin-bottom: 10px">Purchase ${{item.use_limit_itc|kpToUsd|number:2}} USD in italki credits</div><div class="c-time">UTC<br>{{item.start_date|amDate:\'YYYY.MM.DD\'}} - {{item.end_date|amDate:\'YYYY.MM.DD\'}}</div></div><div class="c-msg text-center"><div class="c-range">Language：unlimited</div></div></div><div class="coupon-item-sm" ng-repeat="item in items_6" ng-class="{\'c-used\':item.voucher_status==1||item.voucher_status==2,\'c-expired\':item.voucher_status==3||item.voucher_status==0}"><div class="c-type"><h3 class="c-price no-margin-t">${{item.voucher_value|kpToUsd|number:2}} OFF</h3><div class="c-limit" style="margin-bottom: 10px">Purchase ${{item.use_limit_itc|kpToUsd|number:2}} USD in italki credits</div><div class="c-time">UTC<br>{{item.start_date|amDate:\'YYYY.MM.DD\'}} - {{item.end_date|amDate:\'YYYY.MM.DD\'}}</div></div><div class="c-msg text-center"><div><div class="c-range">Language：unlimited</div></div></div></div></div></div><button ng-if="tabs.tab1==seltab && (items_1_meta&&items_1_meta.has_next) " italki-click-with-spinner="loadMore(tabs.tab1)" stext="MH046" class="btn btn-block"></button> <button ng-if="tabs.tab2==seltab && (items_2_meta&&items_2_meta.has_next)" italki-click-with-spinner="loadMore(tabs.tab2)" stext="MH046" class="btn btn-block"></button> <button ng-if="tabs.tab3==seltab && (items_3_meta&&items_3_meta.has_next)" italki-click-with-spinner="loadMore(tabs.tab3)" stext="MH046" class="btn btn-block"></button> <button ng-if="tabs.tab4==seltab && (items_4_meta&&items_4_meta.has_next)" italki-click-with-spinner="loadMore(tabs.tab4)" stext="MH046" class="btn btn-block"></button> <button ng-if="tabs.tab5==seltab && (items_5_meta&&items_5_meta.has_next)" italki-click-with-spinner="loadMore(tabs.tab5)" stext="MH046" class="btn btn-block"></button> <button ng-if="tabs.tab6==seltab && (items_6_meta&&items_6_meta.has_next)" italki-click-with-spinner="loadMore(tabs.tab6)" stext="MH046" class="btn btn-block"></button></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><button class="btn btn-primary btn-lg btn-block grid-gutter-margin-b" ui-sref="recharge"><span class="btn-txt"><i class="fa fa-shopping-cart"></i>&nbsp;{{\'MH110\'|t}}</span></button><p><a class="" ui-sref="giftcard"><i class="fa fa-credit-card"></i>&nbsp;{{\'M0116\'|t}}</a></p><p ng-hide="!currentUser.revenue_account"><a ui-sref="setting.withdraw"><i class="fa fa-cog"></i>&nbsp;{{\'PM005\'|t}}</a></p></div></div><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'RP001\'|t}}</h4><p>{{\'RP238\'|t|format:10}}</p><table class="table table-striped"><tr><td class="text-muted">{{\'RP014\'|t}}</td><td>{{currentUser.referral_account.total_referrals}}</td></tr><tr><td class="text-muted">{{\'RP015\'|t}}</td><td>{{currentUser.referral_account.bonus_due}}</td></tr><tr><td class="text-muted">{{\'RP016\'|t}}</td><td>{{currentUser.referral_account.bonus_paid}}</td></tr></table><a href="/referral" class="">{{\'MH119\'|t}}</a></div></div><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'PA254\'|t}}</h4><div class="grid-gutter-margin-b"><p>{{\'PA255\'|t}}</p></div><div class=""><a class="btn btn-block" href="http://support.italki.com/"><span class="btn-txt">{{\'M0110\'|t}}</span></a></div></div></div></div></div>'),a.put("/views/finance/payment.detail.html",'<kp-full-screen-loading indicator="itemData"></kp-full-screen-loading><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM036\'|t}}: {{itemData.order_id}}</h4></div><div class="modal-body grid-gutter-margin-b"><table class="table table-bordered"><tbody><tr><td><strong>{{\'PM037\'|t}}</strong></td><td>{{itemData.time_user|amDate:\'TF005\':true}}</td></tr><tr><td><strong>{{\'PM042\'|t}}</strong></td><td ng-bind-html="itemData|revenuePaymentDes|t"></td></tr><tr ng-if="itemData.s_nickname"><td><strong>{{\'C0115\'|t}}</strong></td><td>{{itemData.s_nickname}}</td></tr><tr ng-if="itemData.t_nickname"><td><strong>{{\'C0122\'|t}}</strong></td><td>{{itemData.t_nickname}}</td></tr><tr><td><strong>{{\'PM040\'|t}}</strong></td><td>{{itemData.itc_usd|kpToUsd|number:2}} USD</td></tr><tr ng-if="itemData.status&&itemData.status!=\'7009\'"><td><strong>{{\'PM041\'|t}}</strong></td><td>{{itemData|paymentDetailStatus|t}}</td></tr><tr ng-if="itemData.status==\'7009\'&&itemData.reason!=\'102\'"><td><strong>{{\'PM048\'|t}}</strong></td><td>{{(itemData.reason==\'202\'?\'RP016\':\'C0087\')|t}}</td></tr><tr ng-if="itemData.withdraw_method"><td><strong>{{\'PM039\'|t}}</strong></td><td>{{itemData.withdraw_method}}</td></tr><tr ng-if="itemData.package_id"><td><strong>{{\'TP037\'|t}}</strong></td><td>{{itemData.package_id}}</td></tr><tr ng-if="itemData.session_id"><td><strong>{{\'TP026\'|t}}</strong></td><td>{{itemData.session_id}}</td></tr><tr ng-if="itemData.product_code"><td><strong>Product Code</strong></td><td>{{itemData.product_code}}</td></tr><tr ng-if="itemData.product_number"><td><strong>Product Number</strong></td><td>{{itemData.product_number}}</td></tr></tbody></table></div>'),a.put("/views/finance/payment.relation.html",'<kp-full-screen-loading indicator="items"></kp-full-screen-loading><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM127\'|t}}</h4></div><div class="modal-body grid-gutter-margin-b" id="div_templete_Related" style=""><table class="table table-bordered"><thead><tr><th>{{\'PM036\'|t}}</th><th>{{\'PM037\'|t}} (UTC)</th><th>{{\'PM042\'|t}}</th><th>{{\'PM040\'|t}}</th></tr></thead><tbody id="tbody_Related"><tr ng-repeat="item in items"><td class="center">{{item.order_id}}</td><td class="center">{{item.finish_date|amDate:\'TF005\':true}}</td><td class="center">{{item.show_type|paymentHistoryDesc:item.account_type|t}}</td><td class="center">{{item.itc_usd|kpToUsd|number:2}}</td></tr></tbody></table></div>'),a.put("/views/finance/purchare.relation.html",""),a.put("/views/finance/purchase.bank.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">×</button><h4 class="modal-title">HOW TO PAY BY BANK TRANSFER</h4></div><div class="modal-body"><div class="note note-info no-border"><ul class="no-grid-gutter-h"><li>Purchasing italki Credits via Bank Transfer is not instantaneous. Typically this may take 3 to 7 business days. Your purchase of italki Credits will be credited to your italki account upon settlement of your bank transfer.</li><li>The amount of italki Credits you receive is based on the exact Bank Transfer amount that italki receives. This amount may be slightly greater or less than expected due to adjustments in international bank transfer and currency exchange rates.</li><li>Bank Transfers should be made in USD. Bank Transfers made in other currencies will be converted to USD based on exchange rates at the time of transfer.</li><li><span class="text-danger">Bank Transfers must include the reference ID for the italki Credits purchase. Make sure to write the reference ID under the "Notes" section when completing your Bank Transfer application. If you do not provide a reference ID, your italki Credits purchase cannot be processed. We do not accept responsiblity for payments made without a reference number.</span></li></ul></div><div class=""><div class="note note-success no-border"><ul class="list-unstyled"><li>You have generated an order to purchase:<h3><span ng-bind="data.itc_usd|kpToUsd|number:2"></span> USD in italki Credits</h3></li><li>To complete your purchase please go to your bank (or use online banking) and make a bank transfer for the amount<h3><span ng-bind="data.amount|number:2"></span> USD</h3></li></ul></div><div class="grid-gutter-margin-b"><h3>Remittance Instructions</h3><table class="table table-bordered"><tbody><tr><td>Reference ID</td><td><h4 class="text-danger no-margin" id="div_OrderID"><span ng-bind="data.order_id"></span></h4><span class="text-danger">Important, please write the Reference ID in the Notes section of your Bank Transfer application</span></td></tr><tr><td>Beneficiary Name</td><td>ITALKI HK LIMITED</td></tr><tr><td>Beneficiary Account No.</td><td>640-044426-838</td></tr><tr><td>Beneficiary Bank Name</td><td>HSBC Hong Kong</td></tr><tr><td>Beneficiary Bank Code</td><td>004</td></tr><tr><td>SWIFT Code</td><td>HSBCHKHHHKH</td></tr><tr><td>Branch Address</td><td>1 Queen\'s Road Central, HK, Hong Kong</td></tr><tr><td>Beneficiary Address</td><td>Units 903-906A, 9/F, Kowloon Centre 33 Ashley Road, Tsimshatsui, Kowloon, Hong Kong</td></tr></tbody></table></div><div class="grid-gutter-margin-b"><p class="text-muted">Your purchase of italki Credits will be credited to your italki account upon settlement of your bank transfer. Typically this may take 3 to 7 business days. Please keep a copy of your receipt as proof of payment.</p><p class="text-muted">If you have questions on the status of your bank transfer, please obtain a copy of your receipt or bank statement (indicating the day the funds were taken from your account). Scan your proof of payment and email it to support@italki.com.</p></div><button type="button" class="btn btn-primary" onclick="window.print()"><i class="fa fa-print"></i> Print this page</button></div></div>'),
a.put("/views/finance/purchase.bank_transfer.modal.html",'<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">{{\'PM600\'|t}}</h4></div><div class="modal-body page"><div class="note note-success no-border"><ul class="list-unstyled"><li>{{\'PM601\'|t}}<h3>{{data.itc_usd|kpToUsd|number:2}} USD</h3></li><li>{{\'PM602\'|t}}<h3><span ng-bind="data.real_usd"></span> USD</h3></li></ul></div><div class="grid-gutter-margin-b"><h3>{{\'KP277\'|t}}</h3><table class="table table-bordered tabPrint" style="margin-bottom:15px;border-collapse:collapse; border-style: solid;border-width: 1px;border-color:#e4e4e4"><thead style="border-bottom: solid 2px #e4e4e4"><tr style="vertical-align: top"><td style="border-right: solid 1px #e4e4e4;width: 30%;padding: 8px">Reference ID</td><td style="padding: 8px"><h4 class="text-danger no-margin" id="div_OrderID" style="margin: 0px !important;font-size: 18px"><span ng-bind="data.order_id"></span></h4><span class="text-danger">{{\'PM296\'|t}}</span></td></tr></thead><tbody><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Beneficiary Name</td><td style="padding: 8px">ITALKI HK LIMITED</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Beneficiary Account No.</td><td style="padding: 8px">640-044426-838</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Beneficiary Bank Name</td><td style="padding: 8px">HSBC Hong Kong</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Beneficiary Bank Code</td><td style="padding: 8px">004</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">SWIFT Code</td><td style="padding: 8px">HSBCHKHHHKH</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Branch Address</td><td style="padding: 8px">1 Queen\'s Road Central, HK, Hong Kong</td></tr><tr style="border-bottom: solid 1px #e4e4e4;    height: 30px"><td style="border-right: solid 1px #e4e4e4;padding: 8px">Beneficiary Address</td><td style="padding: 8px">Units 903-906A, 9/F, Kowloon Centre 33 Ashley Road, Tsimshatsui, Kowloon, Hong Kong</td></tr></tbody></table></div><div><span>{{\'PM615\'|t}}</span><p><span>{{\'PM616\'|t}}</span></p></div></div><div class="modal-footer"><button type="button" class="btn" data-dismiss="modal" aria-hidden="true" ng-click="$close()">{{ \'C0064\'|t }}</button> <button type="button" class="btn btn-primary" ng-click="print()"><i class="fa fa-print text-xs"></i>{{\'KP103\'|t}}</button><iframe id="printFrame" name="printFrame" style="width: 0px; height: 0px; border: 0px; solid: #000" src="about:blank"></iframe></div></div>'),a.put("/views/finance/purchase.cancel.html",'<div class="note note-info">你的订单已取消</div>'),a.put("/views/finance/purchase.detail.html",'<style></style><kp-full-screen-loading indicator="itemData"></kp-full-screen-loading><button type="button" style="position: relative" class="close print-hide" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><div class="page-invoice"><div class="invoice"><div class="invoice-header"><div class="pull-left"><div style="margin-bottom: 15px"><a italki-go-home="" style="height: 56px;padding: 0px 0px 20px 0px"><img src="/static/images/navigation/italki_logo_73x56.svg" style="height: 45px;margin-top: 5px"></a></div><div class="clearfix"></div><div><strong>ITALKI HK LIMITED</strong><br>Units 903-906A, 9/F, Kowloon Centre<br>33 Ashley Road, Tsimshatsui<br>Kowloon, Hong Kong<br>payment@italki.com</div></div><div class="pull-right"><h2 class="no-margin-t text-right" style="margin-bottom: 32px">Invoice</h2><table class="no-border" style="width: inherit;\n    display: inline-block"><tr><td class="no-padding text-right">Invoice #:</td><td class="no-padding">{{itemData.order_id}}</td></tr><tr><td class="no-padding text-right">Invoice Date:</td><td class="no-padding">{{itemData.finish_date|amDate:\'TF002\':true}}</td></tr><tr><td class="no-padding text-right">Customer ID:</td><td class="no-padding">{{currentUser.textid}}</td></tr><tr><td class="no-padding text-right">Status:</td><td class="no-padding">{{itemData|printPaymentDetailStatus|t}}</td></tr></table></div></div><div class="invoice-info"><div ng-show="!clickFlag" class="invoice-recipient noprint"><div class="row"><div class="col-md-6"><p>Please bill to:</p><p><textarea placeholder="Type your name and address here" class="form-control" ng-model="myText" ng-init="myText=\'\';"></textarea></p><input type="button" value="{{ \'C0055\'|t }}" class="btn" ng-click="clickFlag=true;"></div></div></div><div class="invoice-recipient" ng-show="clickFlag"><p>Please bill to:</p><p><span ng-bind-html="myText|replaceLineToBr"></span></p></div><div class="invoice-total"><span>${{itemData.real_usd.toFixed(2)|number}} USD</span> TOTAL:</div></div><hr><div class="invoice-table"><table><thead><tr><th>Items</th><th>Amount</th></tr></thead><tbody><tr><td>italki Credits</td><td>${{itemData.total|kpToUsd|number:2}} USD</td></tr></tbody></table><hr><div class="row"><div class="col-md-9">&nbsp;</div><div class="col-md-3"><table class="confirm"><tbody><tr><td colspan="3" align="right">Sub Total:</td><td>${{itemData.total|kpToUsd|number:2}} USD</td></tr><tr ng-if="itemData.voucher_condition==3"><td colspan="3">Discount:</td><td>${{itemData.voucher_value|kpToUsd|number:2}} USD</td></tr><tr><td colspan="3" align="right">Processing Fee:</td><td>${{itemData.fee|number:2}} USD</td></tr><tr><td colspan="3" align="right">Sales Tax:</td><td>$0.00 USD</td></tr><tr><td colspan="3" align="right">Total:</td><td>${{itemData.real_usd.toFixed(2)|number:2}} USD</td></tr></tbody></table></div></div></div><div class="row noprint grid-gutter-margin-b"><div class="col-md-6">Thank you very much for your purchase!</div><div class="col-md-6 text-right"><button ng-show="clickFlag" type="button" class="btn print-hide" ng-click="print()"><i class="fa fa-print text-xs"></i> {{\'PM350\'|t}}</button><iframe id="printFrame" name="printFrame" style="width: 0px; height: 0px; border: 0px; solid: #000" src="about:blank"></iframe></div></div></div></div>'),a.put("/views/finance/purchase.html",'<style>.purchase-a-color:hover,.purchase-a-color:visited,.purchase-a-color:active,.purchase-a-color:link,.purchase-a-color{\n    color: #fff;\n  }\n  .dtp-picker-selector-link1{\n    height: auto;\n    background: #fff;\n    padding: 10px 16px;\n    font-size: 14px;\n    position: relative;\n    display: block;\n    color: #333;\n    z-index: 1;\n  }\n  .coupon-item.selected_coupon .c-msg{\n    padding: 20px 0 18px;\n  }\n\n  .selected_coupon{\n    border: 1px solid red;\n  }</style><div ng-if="!currentUser" kp-login-div=""></div><kp-notify></kp-notify><div ng-include="\'/views/common/top.tpl.clean.html\'"></div><kp-full-screen-loading indicator="!loading"></kp-full-screen-loading><div class="container no-padding-t" ng-show="currentUser"><h2>{{ \'MH110\'|t }}</h2><div class="row"><div class="col-md-9"><div class="panel" ng-show="ifGiftcard"><div class="panel-body"><h4 class="no-margin-t">{{ \'PM241\'|t }}</h4><h6 ng-if="min&&min<1000"><span class="text-primary">The minimum purchase is $10 USD.</span><a href="http://support.italki.com/hc/en-us/articles/220181608" target="_blank" style="padding-left: 0.5em">Learn more</a></h6><div class="row"><div class="col-md-6"><div class="party-size-picker dtp-picker-selector select-native dtp-picker-selector-mobile" style="width: 100%"><a class="select-label small selected purchase-choose purchase-a-color" tabindex="-1" ng-class="{true:\'dtp-picker-selector-link\',false:\'dtp-picker-selector-link1\'}[ifGiftcard]">{{ itc_usd.label }}</a><select class="form-control input-lg amount" ng-model="itc_usd" ng-options="option.label for option in availITCOptions"></select></div></div><div class="col-md-3"><div class="label label-tags" style="padding: 10px" ng-if="currentUser.currency != \'USD\'"><span ng-if="currentUser"><span>≈</span> {{getTotal2()|number:2}} {{currentUser.currency}}</span></div><br><a href="javascript:void (0)" ng-click="openChange()" style="text-decoration: underline;color:#777">{{\'PM509\'|t}}</a></div></div><h5><small>{{ \'PM242\'|t }}</small></h5><div ng-if="uiItems1.v == \'US\'"><p ng-if="selectedType==\'8\'" class="alert alert-warning animated shake">{{\'PM513\'|t}}</p></div></div></div><style>.panel-group .panel {\n          margin-top: 5px !important;;\n        }\n\n        .selected {\n          background: #1ab395;\n          font-weight: 700;\n          color: #fff\n\n        }\n\n        .selected a.accordion-toggle.collapsed {\n          color: #fff\n        }\n\n        .selected:hover {\n          box-shadow: 0px 0px 9px rgba(26, 179, 149, .5);\n        }\n\n        .hovered:hover {\n          box-shadow: 0px 0px 9px rgba(0, 0, 0, .5);\n\n        }\n\n        .confirmed {\n          box-shadow: 0px 0px 9px rgba(26, 179, 149, .5);\n          border: 1px #0e856c solid !important\n\n        }\n\n        .payment-selItem {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          z-index: 1000\n        }\n\n        .payment-selItem-static {\n\n          position: static;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          z-index: 1000\n        }\n\n        .amount {\n          background: #1ab395;\n          border: 1px #0e856c solid;\n          color: #fff;\n        }</style><div class="panel" ng-if="showCouponOrGiftcard"><div class="vgc-control-panel clearfix"><h4 ng-if="shouldShowGift" class="no-margin pull-left">{{\'VGC201\'|t}}</h4><h4 ng-if="!shouldShowGift" class="no-margin pull-left">{{\'VGC416\'|t}}</h4><i ng-click="showCoupon = !showCoupon" class="fa pull-left" ng-class="{\'fa-angle-down\': !showCoupon,\'fa-angle-up\': showCoupon}" aria-hidden="true"></i> <a href="http://support.italki.com/hc/en-us/articles/115000112893-New-italki-Coupon-System" target="_blank" style="color: #000000"><i class="fa fa-question-circle-o pull-right" style="line-height: 26px"></i></a></div><div ng-show="showCoupon"><ul class="switch-block-tabs js-tabs-tabs no-margin-b" ng-if="shouldShowGift"><li class="switch-block-tab"><a ui-sref-active="selected" class="switch-block-tab-link js-tab-link" ng-class="{selected:(couponTab.tab1==seltab || couponTab.tab3==seltab)}" ng-click="changeCouponTab(couponTab.tab1)">{{\'VGC401\'|t}}</a></li><li class="switch-block-tab"><a ui-sref-active="selected" class="switch-block-tab-link js-tab-link" ng-class="{selected:couponTab.tab2==seltab}" ng-click="changeCouponTab(couponTab.tab2)">{{\'M0115\'|t}}</a></li></ul><div class="vgc-panel-header" ng-if="couponTab.tab1==seltab || couponTab.tab3==seltab"><ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ng-class="{selected:couponTab.tab1==seltab}" ng-click="changeCouponTab(couponTab.tab1)">{{\'VGC402\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ng-class="{selected:couponTab.tab3==seltab}" ng-click="changeCouponTab(couponTab.tab3)">{{\'VGC403\'|t}}</a></li></ul></div><div class=""><div class="loading-layout vgc-panel-body" ng-if="couponTab.tab1==seltab"><kp-no-found items="couponData"></kp-no-found><div class="coupon-items clearfix"><div class="coupon-item" ng-repeat="item in couponData" ng-class="{selected_coupon:(item.voucher_sn==spec_sn && !isNoUse)}" ng-click="useThisCoupon(item,itc_usd)"><div class="c-type" ng-style="{background:((item.use_limit_itc<=itc_usd.value && !item.unstart)?\'#4EA4BB\':\'#D8D8D8\')}"><h3 class="c-price no-margin-t">${{item.voucher_value|kpToUsd|number:2}} OFF</h3><div class="c-limit" style="margin-bottom: 10px">Purchase ${{item.use_limit_itc|kpToUsd|number:2}} USD in italki credits</div><div class="c-time">UTC<br>{{item.start_date|amDate:\'YYYY.MM.DD\'}} - {{item.end_date|amDate:\'YYYY.MM.DD\'}}</div></div><div class="c-msg text-center"><div class="c-range">Language：unlimited</div></div></div></div><div style="text-align: center" ng-if="meta && meta.has_next"><i ng-click="showMore()" class="fa fa-angle-down" style="cursor: pointer"></i></div></div><div ng-if="couponTab.tab2==seltab"><div class="vgc-panel-body"><div ng-repeat="(id,code) in codes"><div class="row"><div class="col-sm-8"><div class="gift-item text-bg">{{code.code}}</div><span class="delCode" ng-click="removeThisGiftCardCode(id)"></span></div></div></div><div class="row"><div class="col-sm-8"><input class="gift-input" type="text" ng-model="use.giftCardCode"></div><div class="col-sm-4"><button class="btn btn-primary gift-btn" ng-click="subGiftCardCode(use.giftCardCode)">{{\'VGC415\'|t}}</button></div></div></div><div class="error-msg" ng-show="giftCardError"><span ng-switch="giftCardError.type"><span ng-switch-when="VoucherHasExpired">{{\'VGC303\'|t}}</span> <span ng-switch-when="VoucherHasBeenRedeemed">{{\'VGC304\'|t}}</span> <span ng-switch-default>{{\'VGC305\'|t}}</span></span></div><div class="error-msg" ng-if="error"><span>{{error.code|t}}</span></div></div><div ng-if="couponTab.tab3==seltab"><div class="vgc-panel-body"><div ng-show="validCouponCode && !invalidCode"><div class="row"><div class="col-sm-8"><div class="gift-item text-bg">{{use.couponCode}}</div><span class="delCode" ng-click="removeThisCouponCode();"></span></div></div></div><div class="row" ng-hide="validCouponCode && !invalidCode"><div class="col-sm-8"><input class="gift-input" type="text" ng-model="use.couponCode"></div><div class="col-sm-4"><button class="btn btn-primary gift-btn" ng-click="subCouponCode(use.couponCode)">Redeem</button></div></div></div><div class="error-msg-group"><div class="error-msg" ng-show="couponError"><span ng-switch="couponError.type"><span ng-switch-when="1">{{\'VGC300\'|t}}</span> <span ng-switch-when="2">{{\'VGC301\'|t}}</span> <span ng-switch-when="3">{{\'VGC302\'|t}}</span> <span ng-switch-default>{{\'VGC302\'|t}}</span></span></div><div class="error-msg" ng-show="invalidCode">{{\'VGC301\'|t}}</div><div class="error-msg" ng-show="validCouponCode && !invalidCode && invalid ">{{\'VGC202\'|t|format:(voucherITC|kpToUsd|number:2)}}</div></div></div></div></div><div class="error-msg-group" ng-show="errType"><div class="error-msg"><span ng-switch="errType"><span ng-switch-when="1">{{\'VGC300\'|t}}</span> <span ng-switch-when="2">{{\'VGC301\'|t}}</span> <span ng-switch-default>{{\'VGC302\'|t}}</span></span></div></div></div><div class="pull-right text-muted code-word" ng-show="showCouponOrGiftcard&&shouldShowGift">{{\'VGC200\'|t}}</div><style>.vgc-control-panel{\n          margin: 0;\n          padding: 15px;\n        }\n\n        .vgc-control-panel .fa-angle-down ,.vgc-control-panel .fa-angle-up\n        {\n          font-size: 26px;\n          margin-left: 10px;\n          vertical-align: middle;\n          color: #777;\n        }\n\n\n\n\n        .switch-block-tabs{\n            background: #E4E4E4;\n            list-style: none;\n            padding-left: 0;\n            border: 1px solid #E4E4E4;\n          }\n\n        .switch-block-tab{\n          float:left;\n        }\n\n        .switch-block-tab-link{\n          display: block;\n          padding: 9px 3rem;\n          color: #333333;\n        }\n\n        .switch-block-tabs:before, .switch-block-tabs:after {\n          content: " ";\n          display: table;\n          clear: both;\n        }\n\n        .switch-block-tab-link.selected:hover {\n          box-shadow: none;\n        }\n\n        .switch-block-tab-link.selected {\n          background: #ffffff;\n          color: #ff4338;\n          border-bottom: 3px solid #ff4338;\n        }\n\n        .content-block-tab-link{\n          padding: 7px 0;\n        }\n\n        .content-block-tab-link.selected{\n          background: none;\n          padding-bottom: 7px;\n        }\n\n\n        .content-block-tab-link.selected:hover {\n          box-shadow: none;\n        }\n\n        .vgc-panel-header{\n          padding: 0 20px;\n          border-top: none;\n          border-bottom: none;\n        }\n\n        .vgc-panel-body{\n          padding: 20px;\n          border-top: none;\n        }\n\n        .coupon-items .coupon-item {\n          float: left;\n          margin: 0 15px 20px 0;\n          width: 185px;\n          cursor: pointer;\n        }\n\n        .coupon-item .c-type {\n          position: relative;\n          width: 100%;\n          overflow: hidden;\n          background: #4EA4BB;\n          color: #fff;\n          text-align: center;\n          padding: 20px;\n        }\n\n        .coupon-item .c-msg {\n          padding: 20px 0;\n          background: #f9f9f9;\n        }\n\n        .coupon-item .c-btn {\n          margin-top: 20px;\n          text-align: center;\n          padding: 10px 10px;\n          border: 1px solid #ccc;\n          border-radius: 5px;\n          width: 150px;\n          margin: 10px auto;\n          cursor: pointer;\n        }\n\n        .coupon-item .c-btn:hover{\n          background:#e4e4e4;\n        }\n\n        .coupon-item-sm{\n          overflow: hidden;\n          margin-bottom: 10px;\n        }\n\n        .coupon-item-sm .c-type {\n          position: relative;\n          color: #fff;\n          text-align: center;\n          padding: 20px;\n          background: #4EA4BB;\n          float: left;\n          width: 60%;\n        }\n\n        .coupon-item-sm .c-msg {\n          padding: 20px 0 15px;\n          background: #f9f9f9;\n          width: 40%;\n          float: right;\n          display: -webkit-box;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: -webkit-flex;\n          display: flex;\n          -webkit-box-pack: center;\n          -moz-box-pack: center;\n          -webkit-justify-content: center;\n          -webkit-box-align: center;\n          -moz-box-align: center;\n          -webkit-align-items: center;\n          -ms-flex-align: center;\n          align-items: center;\n        }\n\n        .coupon-item-sm .c-btn {\n          margin-top: 20px;\n          text-align: center;\n          padding: 10px 10px;\n          border: 1px solid #ccc;\n          border-radius: 5px;\n          margin: 10px 10px 0;\n        }\n\n        .gift-item{\n          height:43px;\n          line-height: 43px;\n          border-bottom: 1px solid #C2C2C2;\n          margin-bottom: 5px;\n          position: relative;\n        }\n\n        .delCode{\n          content: url(/static/images/icons/close_circle_icon.svg);\n          width: 30px;\n          height: 30px;\n          position: absolute;\n          right: 0;\n          bottom: 8px;\n        }\n\n        .gift-input{\n          height: 36px;\n          width:  100%;\n          border: 1px solid #C2C2C2;\n          padding-left:10px;\n        }\n\n        .gift-btn{\n          height: 36px;\n        }\n\n        .error-msg{\n          padding-left: 20px;\n          background: #e5e5e5;\n          padding: 5px 20px;\n          color: red;\n        }\n\n        .code-word{\n          padding-right:10px;\n          margin-top: -22px;\n        }\n\n        @media (max-width:767px){\n          .code-word{\n            float: none !important;\n            padding-right: 0px;\n            margin-top: -22px;\n          }\n        }\n\n        @media (min-width: 481px){\n\n          .coupon-item-sm{\n            display: none;\n          }\n        }\n\n        @media (max-width: 480px){\n          .coupon-items .coupon-item{\n           width: 100%;\n          }\n\n          .coupon-item .c-price{\n            margin-bottom: 5px;\n            font-size: 20px;\n          }\n\n          .coupon-item .c-type{\n            padding: 10px;\n          }\n\n          .coupon-item .c-msg{\n            padding: 10px;\n          }\n\n          .coupon-item-sm{\n            display: -webkit-box;\n            display: -moz-box;\n            display: -ms-flexbox;\n            display: -webkit-flex;\n            display: flex;\n          }\n\n          .content-block-tab {\n            width: auto;\n          }\n\n          .content-block-tab-link.selected {\n            color: #ff4338;\n            border-bottom: 3px solid #ff4338;\n          }\n        }\n\n        @media (max-width: 374px){\n          .coupon-item-sm .c-type {\n            padding: 20px 5px;\n          }\n        }\n        /*gift card code button*/\n        @media (max-width: 767px){\n          .gift-item{\n            width: 100%;\n          }\n\n          .gift-input{\n            width: 100%;\n          }\n          .gift-btn{\n            width:100%;\n            margin-top: 10px;\n          }\n\n\n\n        }</style><div class="panel"><div class="panel-body"><h4 class="no-margin-t">{{\'PM510\'|t}}</h4><div class="row form-group"><div class="col-md-4"><div class="form-control" style="padding: 0;height: auto"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices repeat="m in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(m.v?m.v:m.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div></div><h4 class="no-margin-t">{{\'PM511\'|t}}</h4><div class="panel-group panel-group-default"><kp-loading indicator="defaultPays"></kp-loading><div class="panel no-border" ng-repeat="item in defaultPays"><div class="note no-margin-b no-padding no-border" ng-class="{selected:$parent.selItem==item}" ng-click="$parent.selItem=item;$parent.selectedType=item.pay_type;updateDiv();"><a class="accordion-toggle collapsed hovered" data-toggle="collapse" data-parent="#accordion-info-example" href=""><div class="row"><div class="col-md-9"><label class="checkbox-inline"><input style="vertical-align: text-bottom" ng-click="$parent.selItem!=item;$parent.selectedType=item.pay_type;updateDiv();$event.stopPropagation()||($event.cancelBubble = true);" type="radio" name="ddd" value="{{item.pay_type}}" ng-model="$parent.selectedType" class="px"> <span class="lbl"><strong>{{item.code|t}}</strong>&nbsp;<img ng-src="{{\'/static/images/payment/\'+item.img_name + \'.png\'}}" height="18" align="absmiddle"></span></label></div><div class="col-md-3"><span class="pull-right">{{ \'PM215\'|t }} $<span>{{$parent.getCommission(item)}}</span> USD</span></div></div></a></div></div></div></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><div class="grid-gutter-margin-b"><h4 class="no-margin-t">{{\'PM733\'|t}}</h4><span class="text-muted">"{{\'PM734\'|t}}"<br>- italki user, Nicole</span></div><div class="grid-gutter-margin-b"><h4>{{\'PM735\'|t}}</h4><span class="text-muted">{{\'PM736\'|t}}</span></div><div class="grid-gutter-margin-b text-muted" ng-bind-html="\'PM529\'|t"></div></div></div></div></div></div><div style="height: 152px" kp-scroll-div update-div-flag="updateDivFlag" ng-show="currentUser"><div style="position:relative;bottom: 0;left: 0;width: 100%;z-index: 1"><div class="visible-phone"><div style="background: url(\'/static/images/bg_gallery2.png\');padding: 20px;text-align: center;box-shadow: 0px 0px 3px 3px rgba(0,0,0,0.15)"><p>{{\'PM214\'|t}}: <strong>${{itc_usd.value|kpToUsd|number:2}} USD</strong></p><p>{{\'PM216\'|t}}: <strong>${{getTotal()}}</strong> USD</p><p><button type="button" ng-click="checkout()" ng-disabled="!selItem || checkflag" ng-if="!selItem||selItem.pay_type!=\'Y\'||getTotal()==0" class="btn btn-primary"><span class="btn-txt">{{\'PM134\'|t}}</span></button><stripe-checkout ng-if="selItem.pay_type==\'Y\'&&getTotal()!=0" order-info="{\'source_type\':options.sourceType,\'cents\':getUSD(),\'fee\':getCommission(selItem),\'unpay_id\':orderId,\'code\':getCode(),\'use_type\':use_type}"></stripe-checkout></p><a ng-click="cancelPayment();">{{\'PM133\'|t}}</a></div></div><div class="container visible-desktop" style="padding-top: 0"><div class="row"><div class="col-md-9"><div class="panel confirmed" style="margin-bottom: -1px"><div class="panel-body"><div class="row"><div class="col-sm-7"><table><tr><td style="padding:5px" align="right">{{\'PM038\'|t}}:</td><td style="padding:5px"><strong>{{selItem.code|t}}</strong></td></tr><tr><td style="padding:5px" align="right">{{\'PM214\'|t}}:</td><td style="padding:5px"><strong>${{itc_usd.value|kpToUsd|number:2}} USD</strong></td></tr><tr ng-if="giftCardITC>0"><td style="padding:5px" align="right">{{\'M0115\'|t}}:</td><td style="padding:5px"><strong>${{giftCardITC|kpToUsd|number:2}} USD</strong></td></tr><tr ng-if="voucherITC>0 && voucherFullReduction==3 && !isNoUse"><td style="padding:5px" align="right">{{\'VGC400\'|t}}:</td><td style="padding:5px"><strong>$ - {{voucherITC|kpToUsd|number:2}} USD</strong></td></tr><tr><td style="padding:5px" align="right">{{\'PM215\'|t}}:</td><td style="padding:5px"><strong>${{getCommission(selItem)|number:2}} USD</strong></td></tr></table></div><div class="col-sm-5 text-right"><span class="text-lg">{{\'PM216\'|t}}: <strong>${{getTotal()|number:2}}</strong> USD</span><p ng-hide="currentUser && currentUser.currency==\'USD\'"><label class="label label-tags" ng-if="currentUser">≈{{getUserTotal()|number}}{{currentUser.currency}}</label></p><ul class="list-inline"><li class="no-padding"><button class="btn btn-link" ng-click="cancelPayment();">{{\'PM133\'|t}}</button> &nbsp;&nbsp;</li><li class="no-padding"><button type="button" ng-click="checkout()" ng-disabled="!selItem || checkflag" ng-if="!selItem||selItem.pay_type!=\'Y\'||getTotal()==0" class="btn btn-primary"><span class="btn-txt">{{\'PM109\'|t}}</span></button><stripe-checkout ng-if="selItem.pay_type==\'Y\'&&getTotal()!=0" order-info="{\'source_type\':options.sourceType,\'cents\':getUSD(),\'fee\':getCommission(selItem),\'unpay_id\':orderId,\'code\':getCode(),\'use_type\':use_type}"></stripe-checkout></li></ul></div></div></div></div></div></div></div></div></div><div ng-include="\'/views/common/bottom.simple.html\'"></div>'),a.put("/views/finance/purchase.iframe.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button></div><div class="modal-body" style="padding: 0"><iframe ng-src="" scrolling="no" frameborder="0" width="100%" height="640"></iframe></div>'),a.put("/views/finance/purchase.succ.html",'<div ng-hide="unpay_id"><h2>{{\'PM014\'|t}}</h2><div class="panel no-border"><div class="sweet-alert showSweetAlert visible" data-custom-class="" data-has-cancel-button="true" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="true" data-animation="pop" data-timer="null" style="display: block"><div ng-switch="msg"><div ng-switch-when="M"><div class="sa-icon sa-warning pulseWarning"><span class="sa-body pulseWarningIns"></span> <span class="sa-dot pulseWarningIns"></span></div><h2>{{\'PM332\'|t}}</h2><p class="text-lb">Order ID not exist.</p><p class="text-lb text-center"><button class="btn btn-primary" ng-if="needAutoclose" ng-click="close()">Close</button></p></div><div ng-switch-when="1"><div class="text-center" ng-if="needAutoclose">The page will automatically close in <span style="font-weight: bold" class="text-primary">{{ secondsRemained }}</span> seconds.</div><div class="sa-icon sa-success" style=""><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2>{{\'PA410\'|t}}</h2><div class="grid-gutter-margin-b"><p class="text-lb">{{\'PA411\'|t}}</p><p class="text-lb text-left">{{\'PA412\'|t|format:order_id}}</p></div><div class=""><button class="btn btn-primary" ui-sref="finance.purchasehistory">{{\'MH101\'|t}}</button> &nbsp; <button class="btn" ng-click="purchaseDetail()" style="margin-right: 14px">{{\'PM351\'|t}}</button></div></div><div ng-switch-when="E"><div class="sa-icon sa-error" style=""><span class="sa-x-mark"><span class="sa-line sa-left"></span> <span class="sa-line sa-right"></span></span></div><h2>Failed</h2><p class="text-lb">{{\'PM332\'|t}}</p><p class="text-lb">{{\'PA412\'|t}}</p><p class="text-lb text-center"><button class="btn btn-primary" ng-if="needAutoclose" ng-click="close()">Close</button></p></div><div ng-switch-default><div class="loading-layout" style="padding-top: 180px"><kp-loading indicator="loaded"></kp-loading><span ng-if="error" class="text-muted">{{\'PM223\'|t}}</span></div></div></div></div></div></div><div ng-show="unpay_id"><div ng-show="unpayError"><h3>{{\'PM643\'|t}}</h3><div class="panel"><div class="panel-body"><div class="col-md-12 text-center"><div class="row"><div class="col-sm-1 col-sm-offset-2"><i class="fa fa-check-circle" aria-hidden="true" style="font-size: 50px; color: green"></i></div><div class="col-sm-9"><p class="text-left" style="font-size:18px"><strong>{{\'NT401\'|t}}</strong> {{\'PM651\'|t}}<br>{{\'PM658\'|t}}</p></div></div></div><br><h4 class="welcome text-center" style="margin-top: 50px; color:red">{{\'PM648\'|t}} {{\'KP007\'|t}}</h4><hr></div></div></div><div ng-hide="unpayError"><div ng-show="lesson_amount"><h3>{{\'TS600\'|translate}}</h3><div class="panel"><div class="panel-body"><p ng-bind-html="\'TS631\'|t|format:\'48 hours\'"></p><p><button class="btn btn-primary" ui-sref="session.exploreViaType({viewType: \'waiting\'})"><span class="btn-txt">{{\'TP143\'|t}}</span></button></p><hr><ul class="list-inline"><li><a ui-sref="session.explore">{{\'TP158\'|t}}</a></li><li><a ui-sref="dashboard">{{\'TP159\'|t}}</a></li></ul></div></div></div><div ng-hide="lesson_amount"><h3>{{\'TS600\'|translate}}</h3><div class="panel"><div class="panel-body"><p ng-bind-html="\'TS631\'|t|format:\'48 hours\'"></p><p><button class="btn btn-primary" ng-click="goToDetail(id_list)"><span class="btn-txt">{{\'TP143\'|t}}</span></button></p><hr><ul class="list-inline"><li><a ui-sref="session.explore">{{\'TP158\'|t}}</a></li><li><a ui-sref="dashboard">{{\'TP159\'|t}}</a></li></ul></div></div></div></div></div><style>.sweet-overlay {\n    background-color: black;\n    /* IE8 */\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";\n    /* IE8 */\n    background-color: rgba(0, 0, 0, 0.4);\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    display: none;\n    z-index: 100;\n  }\n\n  .sweet-alert {\n    background-color: white;\n    font-family: \'Open Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n    width: 478px;\n    padding: 17px;\n    text-align: center;\n    position: inherit;\n    left: 50%;\n    top: 50%;\n    margin-left: -256px;\n    overflow: hidden;\n    display: none;\n    z-index: 100;\n  }\n\n  @media all and (max-width: 540px) {\n    .sweet-alert {\n      width: auto;\n      margin-left: 0;\n      margin-right: 0;\n      left: 15px;\n      right: 15px;\n    }\n  }\n\n  .sweet-alert h2 {\n    color: #575757;\n    font-size: 30px;\n    text-align: center;\n    font-weight: 600;\n    text-transform: none;\n    position: relative;\n    margin: 25px 0;\n    padding: 0;\n    line-height: 40px;\n    display: block;\n  }\n\n  .sweet-alert p {\n    color: #797979;\n    font-size: 16px;\n    text-align: center;\n    font-weight: 300;\n    position: relative;\n    text-align: inherit;\n    float: none;\n    margin: 0;\n    padding: 0;\n    line-height: normal;\n  }\n\n  .sweet-alert fieldset {\n    border: none;\n    position: relative;\n  }\n\n  .sweet-alert .sa-error-container {\n    background-color: #f1f1f1;\n    margin-left: -17px;\n    margin-right: -17px;\n    overflow: hidden;\n    padding: 0 10px;\n    max-height: 0;\n    webkit-transition: padding 0.15s, max-height 0.15s;\n    transition: padding 0.15s, max-height 0.15s;\n  }\n\n  .sweet-alert .sa-error-container.show {\n    padding: 10px 0;\n    max-height: 100px;\n    webkit-transition: padding 0.2s, max-height 0.2s;\n    transition: padding 0.25s, max-height 0.25s;\n  }\n\n  .sweet-alert .sa-error-container .icon {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background-color: #ea7d7d;\n    color: white;\n    line-height: 24px;\n    text-align: center;\n    margin-right: 3px;\n  }\n\n  .sweet-alert .sa-error-container p {\n    display: inline-block;\n  }\n\n  .sweet-alert .sa-input-error {\n    position: absolute;\n    top: 29px;\n    right: 26px;\n    width: 20px;\n    height: 20px;\n    opacity: 0;\n    -webkit-transform: scale(0.5);\n    transform: scale(0.5);\n    -webkit-transform-origin: 50% 50%;\n    transform-origin: 50% 50%;\n    -webkit-transition: all 0.1s;\n    transition: all 0.1s;\n  }\n\n  .sweet-alert .sa-input-error::before, .sweet-alert .sa-input-error::after {\n    content: "";\n    width: 20px;\n    height: 6px;\n    background-color: #f06e57;\n    border-radius: 3px;\n    position: absolute;\n    top: 50%;\n    margin-top: -4px;\n    left: 50%;\n    margin-left: -9px;\n  }\n\n  .sweet-alert .sa-input-error::before {\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-input-error::after {\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-input-error.show {\n    opacity: 1;\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n\n  .sweet-alert input {\n    width: 100%;\n    box-sizing: border-box;\n    border-radius: 3px;\n    border: 1px solid #d7d7d7;\n    height: 43px;\n    margin-top: 10px;\n    margin-bottom: 17px;\n    font-size: 18px;\n    box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.06);\n    padding: 0 12px;\n    display: none;\n    -webkit-transition: all 0.3s;\n    transition: all 0.3s;\n  }\n\n  .sweet-alert input:focus {\n    outline: none;\n    box-shadow: 0px 0px 3px #c4e6f5;\n    border: 1px solid #b4dbed;\n  }\n\n  .sweet-alert input:focus::-moz-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input:focus:-ms-input-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input:focus::-webkit-input-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input::-moz-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert input:-ms-input-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert input::-webkit-input-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert.show-input input {\n    display: block;\n  }\n\n  .sweet-alert button {\n    font-size: 17px;\n    font-weight: 500;\n    padding: 10px 32px;\n    margin: 26px 5px 0 5px;\n    cursor: pointer;\n  }\n\n  .sweet-alert button.cancel {\n    background-color: #D0D0D0;\n  }\n\n  .sweet-alert button.cancel:hover {\n    background-color: #c8c8c8;\n  }\n\n  .sweet-alert button.cancel:active {\n    background-color: #b6b6b6;\n  }\n\n  .sweet-alert button.cancel:focus {\n    box-shadow: rgba(197, 205, 211, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset !important;\n  }\n\n  .sweet-alert button::-moz-focus-inner {\n    border: 0;\n  }\n\n  .sweet-alert[data-has-cancel-button=false] button {\n    box-shadow: none !important;\n  }\n\n  .sweet-alert[data-has-confirm-button=false][data-has-cancel-button=false] {\n    padding-bottom: 40px;\n  }\n\n  .sweet-alert .sa-icon {\n    width: 80px;\n    height: 80px;\n    border: 4px solid gray;\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    margin: 20px auto;\n    padding: 0;\n    position: relative;\n    box-sizing: content-box;\n  }\n\n  .sweet-alert .sa-icon.sa-error {\n    border-color: #F27474;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-x-mark {\n    position: relative;\n    display: block;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line {\n    position: absolute;\n    height: 5px;\n    width: 47px;\n    background-color: #F27474;\n    display: block;\n    top: 37px;\n    border-radius: 2px;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-left {\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    left: 17px;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-right {\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    right: 16px;\n  }\n\n  .sweet-alert .sa-icon.sa-warning {\n    border-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-warning .sa-body {\n    position: absolute;\n    width: 5px;\n    height: 47px;\n    left: 50%;\n    top: 10px;\n    -webkit-border-radius: 2px;\n    border-radius: 2px;\n    margin-left: -2px;\n    background-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-warning .sa-dot {\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n    margin-left: -3px;\n    left: 50%;\n    bottom: 10px;\n    background-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-info {\n    border-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-info::before {\n    content: "";\n    position: absolute;\n    width: 5px;\n    height: 29px;\n    left: 50%;\n    bottom: 17px;\n    border-radius: 2px;\n    margin-left: -2px;\n    background-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-info::after {\n    content: "";\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    margin-left: -3px;\n    top: 19px;\n    background-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-success {\n    border-color: #A5DC86;\n  }\n\n  .sweet-alert .sa-icon.sa-success::before, .sweet-alert .sa-icon.sa-success::after {\n    content: \'\';\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    position: absolute;\n    width: 60px;\n    height: 120px;\n    background: white;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success::before {\n    -webkit-border-radius: 120px 0 0 120px;\n    border-radius: 120px 0 0 120px;\n    top: -7px;\n    left: -33px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    -webkit-transform-origin: 60px 60px;\n    transform-origin: 60px 60px;\n  }\n\n  .sweet-alert .sa-icon.sa-success::after {\n    -webkit-border-radius: 0 120px 120px 0;\n    border-radius: 0 120px 120px 0;\n    top: -11px;\n    left: 30px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    -webkit-transform-origin: 0px 60px;\n    transform-origin: 0px 60px;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-placeholder {\n    width: 80px;\n    height: 80px;\n    border: 4px solid rgba(165, 220, 134, 0.2);\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    box-sizing: content-box;\n    position: absolute;\n    left: -4px;\n    top: -4px;\n    z-index: 2;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-fix {\n    width: 5px;\n    height: 90px;\n    background-color: white;\n    position: absolute;\n    left: 28px;\n    top: 8px;\n    z-index: 1;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line {\n    height: 5px;\n    background-color: #A5DC86;\n    display: block;\n    border-radius: 2px;\n    position: absolute;\n    z-index: 2;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-tip {\n    width: 25px;\n    left: 14px;\n    top: 46px;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-long {\n    width: 47px;\n    right: 8px;\n    top: 38px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-custom {\n    background-size: contain;\n    border-radius: 0;\n    border: none;\n    background-position: center center;\n    background-repeat: no-repeat;\n  }\n\n  /*\n   * Animations\n   */\n  @-webkit-keyframes showSweetAlert {\n    0% {\n      transform: scale(0.7);\n      -webkit-transform: scale(0.7);\n    }\n    45% {\n      transform: scale(1.05);\n      -webkit-transform: scale(1.05);\n    }\n    80% {\n      transform: scale(0.95);\n      -webkit-transform: scale(0.95);\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @keyframes showSweetAlert {\n    0% {\n      transform: scale(0.7);\n      -webkit-transform: scale(0.7);\n    }\n    45% {\n      transform: scale(1.05);\n      -webkit-transform: scale(1.05);\n    }\n    80% {\n      transform: scale(0.95);\n      -webkit-transform: scale(0.95);\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @-webkit-keyframes hideSweetAlert {\n    0% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n    100% {\n      transform: scale(0.5);\n      -webkit-transform: scale(0.5);\n    }\n  }\n\n  @keyframes hideSweetAlert {\n    0% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n    100% {\n      transform: scale(0.5);\n      -webkit-transform: scale(0.5);\n    }\n  }\n\n  @-webkit-keyframes slideFromTop {\n    0% {\n      top: 0%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @keyframes slideFromTop {\n    0% {\n      top: 0%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @-webkit-keyframes slideToTop {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 0%;\n    }\n  }\n\n  @keyframes slideToTop {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 0%;\n    }\n  }\n\n  @-webkit-keyframes slideFromBottom {\n    0% {\n      top: 70%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @keyframes slideFromBottom {\n    0% {\n      top: 70%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @-webkit-keyframes slideToBottom {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 70%;\n    }\n  }\n\n  @keyframes slideToBottom {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 70%;\n    }\n  }\n\n  .showSweetAlert[data-animation=pop] {\n    -webkit-animation: showSweetAlert 0.3s;\n    animation: showSweetAlert 0.3s;\n  }\n\n  .showSweetAlert[data-animation=none] {\n    -webkit-animation: none;\n    animation: none;\n  }\n\n  .showSweetAlert[data-animation=slide-from-top] {\n    -webkit-animation: slideFromTop 0.3s;\n    animation: slideFromTop 0.3s;\n  }\n\n  .showSweetAlert[data-animation=slide-from-bottom] {\n    -webkit-animation: slideFromBottom 0.3s;\n    animation: slideFromBottom 0.3s;\n  }\n\n  .hideSweetAlert[data-animation=pop] {\n    -webkit-animation: hideSweetAlert 0.2s;\n    animation: hideSweetAlert 0.2s;\n  }\n\n  .hideSweetAlert[data-animation=none] {\n    -webkit-animation: none;\n    animation: none;\n  }\n\n  .hideSweetAlert[data-animation=slide-from-top] {\n    -webkit-animation: slideToTop 0.4s;\n    animation: slideToTop 0.4s;\n  }\n\n  .hideSweetAlert[data-animation=slide-from-bottom] {\n    -webkit-animation: slideToBottom 0.3s;\n    animation: slideToBottom 0.3s;\n  }\n\n  @-webkit-keyframes animateSuccessTip {\n    0% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    54% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    70% {\n      width: 50px;\n      left: -8px;\n      top: 37px;\n    }\n    84% {\n      width: 17px;\n      left: 21px;\n      top: 48px;\n    }\n    100% {\n      width: 25px;\n      left: 14px;\n      top: 45px;\n    }\n  }\n\n  @keyframes animateSuccessTip {\n    0% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    54% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    70% {\n      width: 50px;\n      left: -8px;\n      top: 37px;\n    }\n    84% {\n      width: 17px;\n      left: 21px;\n      top: 48px;\n    }\n    100% {\n      width: 25px;\n      left: 14px;\n      top: 45px;\n    }\n  }\n\n  @-webkit-keyframes animateSuccessLong {\n    0% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    65% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    84% {\n      width: 55px;\n      right: 0px;\n      top: 35px;\n    }\n    100% {\n      width: 47px;\n      right: 8px;\n      top: 38px;\n    }\n  }\n\n  @keyframes animateSuccessLong {\n    0% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    65% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    84% {\n      width: 55px;\n      right: 0px;\n      top: 35px;\n    }\n    100% {\n      width: 47px;\n      right: 8px;\n      top: 38px;\n    }\n  }\n\n  @-webkit-keyframes rotatePlaceholder {\n    0% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    5% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    12% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n    100% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n  }\n\n  @keyframes rotatePlaceholder {\n    0% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    5% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    12% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n    100% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n  }\n\n  .animateSuccessTip {\n    -webkit-animation: animateSuccessTip 0.75s;\n    animation: animateSuccessTip 0.75s;\n  }\n\n  .animateSuccessLong {\n    -webkit-animation: animateSuccessLong 0.75s;\n    animation: animateSuccessLong 0.75s;\n  }\n\n  .sa-icon.sa-success.animate::after {\n    -webkit-animation: rotatePlaceholder 4.25s ease-in;\n    animation: rotatePlaceholder 4.25s ease-in;\n  }\n\n  @-webkit-keyframes animateErrorIcon {\n    0% {\n      transform: rotateX(100deg);\n      -webkit-transform: rotateX(100deg);\n      opacity: 0;\n    }\n    100% {\n      transform: rotateX(0deg);\n      -webkit-transform: rotateX(0deg);\n      opacity: 1;\n    }\n  }\n\n  @keyframes animateErrorIcon {\n    0% {\n      transform: rotateX(100deg);\n      -webkit-transform: rotateX(100deg);\n      opacity: 0;\n    }\n    100% {\n      transform: rotateX(0deg);\n      -webkit-transform: rotateX(0deg);\n      opacity: 1;\n    }\n  }\n\n  .animateErrorIcon {\n    -webkit-animation: animateErrorIcon 0.5s;\n    animation: animateErrorIcon 0.5s;\n  }\n\n  @-webkit-keyframes animateXMark {\n    0% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    50% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    80% {\n      transform: scale(1.15);\n      -webkit-transform: scale(1.15);\n      margin-top: -6px;\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n      margin-top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animateXMark {\n    0% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    50% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    80% {\n      transform: scale(1.15);\n      -webkit-transform: scale(1.15);\n      margin-top: -6px;\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n      margin-top: 0;\n      opacity: 1;\n    }\n  }\n\n  .animateXMark {\n    -webkit-animation: animateXMark 0.5s;\n    animation: animateXMark 0.5s;\n  }\n\n  @-webkit-keyframes pulseWarning {\n    0% {\n      border-color: #F8D486;\n    }\n    100% {\n      border-color: #F8BB86;\n    }\n  }\n\n  @keyframes pulseWarning {\n    0% {\n      border-color: #F8D486;\n    }\n    100% {\n      border-color: #F8BB86;\n    }\n  }\n\n  .pulseWarning {\n    -webkit-animation: pulseWarning 0.75s infinite alternate;\n    animation: pulseWarning 0.75s infinite alternate;\n  }\n\n  @-webkit-keyframes pulseWarningIns {\n    0% {\n      background-color: #F8D486;\n    }\n    100% {\n      background-color: #F8BB86;\n    }\n  }\n\n  @keyframes pulseWarningIns {\n    0% {\n      background-color: #F8D486;\n    }\n    100% {\n      background-color: #F8BB86;\n    }\n  }\n\n  .pulseWarningIns {\n    -webkit-animation: pulseWarningIns 0.75s infinite alternate;\n    animation: pulseWarningIns 0.75s infinite alternate;\n  }\n\n  /* Internet Explorer 9 has some special quirks that are fixed here */\n  /* The icons are not animated. */\n  /* This file is automatically merged into sweet-alert.min.js through Gulp */\n  /* Error icon */\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-left {\n    -ms-transform: rotate(45deg) \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-right {\n    -ms-transform: rotate(-45deg) \\9;\n  }\n\n  /* Success icon */\n  .sweet-alert .sa-icon.sa-success {\n    border-color: transparent \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-tip {\n    -ms-transform: rotate(45deg) \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-long {\n    -ms-transform: rotate(-45deg) \\9;\n  }</style>'),
a.put("/views/finance/redeem.giftcard.succ.html",'<style>.sweet-overlay {\n    background-color: black;\n    /* IE8 */\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";\n    /* IE8 */\n    background-color: rgba(0, 0, 0, 0.4);\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    display: none;\n    z-index: 100;\n  }\n\n  .sweet-alert {\n    background-color: white;\n    font-family: \'Open Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n    width: 478px;\n    padding: 17px;\n    text-align: center;\n    position: inherit;\n    left: 50%;\n    top: 50%;\n    margin-left: -256px;\n    overflow: hidden;\n    display: none;\n    z-index: 100;\n  }\n\n  @media all and (max-width: 540px) {\n    .sweet-alert {\n      width: auto;\n      margin-left: 0;\n      margin-right: 0;\n      left: 15px;\n      right: 15px;\n    }\n  }\n\n  .sweet-alert h2 {\n    color: #575757;\n    font-size: 30px;\n    text-align: center;\n    font-weight: 600;\n    text-transform: none;\n    position: relative;\n    margin: 25px 0;\n    padding: 0;\n    line-height: 40px;\n    display: block;\n  }\n\n  .sweet-alert p {\n    color: #797979;\n    font-size: 16px;\n    text-align: center;\n    font-weight: 300;\n    position: relative;\n    text-align: inherit;\n    float: none;\n    margin: 0;\n    padding: 0;\n    line-height: normal;\n  }\n\n  .sweet-alert fieldset {\n    border: none;\n    position: relative;\n  }\n\n  .sweet-alert .sa-error-container {\n    background-color: #f1f1f1;\n    margin-left: -17px;\n    margin-right: -17px;\n    overflow: hidden;\n    padding: 0 10px;\n    max-height: 0;\n    webkit-transition: padding 0.15s, max-height 0.15s;\n    transition: padding 0.15s, max-height 0.15s;\n  }\n\n  .sweet-alert .sa-error-container.show {\n    padding: 10px 0;\n    max-height: 100px;\n    webkit-transition: padding 0.2s, max-height 0.2s;\n    transition: padding 0.25s, max-height 0.25s;\n  }\n\n  .sweet-alert .sa-error-container .icon {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background-color: #ea7d7d;\n    color: white;\n    line-height: 24px;\n    text-align: center;\n    margin-right: 3px;\n  }\n\n  .sweet-alert .sa-error-container p {\n    display: inline-block;\n  }\n\n  .sweet-alert .sa-input-error {\n    position: absolute;\n    top: 29px;\n    right: 26px;\n    width: 20px;\n    height: 20px;\n    opacity: 0;\n    -webkit-transform: scale(0.5);\n    transform: scale(0.5);\n    -webkit-transform-origin: 50% 50%;\n    transform-origin: 50% 50%;\n    -webkit-transition: all 0.1s;\n    transition: all 0.1s;\n  }\n\n  .sweet-alert .sa-input-error::before, .sweet-alert .sa-input-error::after {\n    content: "";\n    width: 20px;\n    height: 6px;\n    background-color: #f06e57;\n    border-radius: 3px;\n    position: absolute;\n    top: 50%;\n    margin-top: -4px;\n    left: 50%;\n    margin-left: -9px;\n  }\n\n  .sweet-alert .sa-input-error::before {\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-input-error::after {\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-input-error.show {\n    opacity: 1;\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n\n  .sweet-alert input {\n    width: 100%;\n    box-sizing: border-box;\n    border-radius: 3px;\n    border: 1px solid #d7d7d7;\n    height: 43px;\n    margin-top: 10px;\n    margin-bottom: 17px;\n    font-size: 18px;\n    box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.06);\n    padding: 0 12px;\n    display: none;\n    -webkit-transition: all 0.3s;\n    transition: all 0.3s;\n  }\n\n  .sweet-alert input:focus {\n    outline: none;\n    box-shadow: 0px 0px 3px #c4e6f5;\n    border: 1px solid #b4dbed;\n  }\n\n  .sweet-alert input:focus::-moz-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input:focus:-ms-input-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input:focus::-webkit-input-placeholder {\n    transition: opacity 0.3s 0.03s ease;\n    opacity: 0.5;\n  }\n\n  .sweet-alert input::-moz-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert input:-ms-input-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert input::-webkit-input-placeholder {\n    color: #bdbdbd;\n  }\n\n  .sweet-alert.show-input input {\n    display: block;\n  }\n\n  .sweet-alert button {\n    font-size: 17px;\n    font-weight: 500;\n    padding: 10px 32px;\n    margin: 26px 5px 0 5px;\n    cursor: pointer;\n  }\n\n  .sweet-alert button.cancel {\n    background-color: #D0D0D0;\n  }\n\n  .sweet-alert button.cancel:hover {\n    background-color: #c8c8c8;\n  }\n\n  .sweet-alert button.cancel:active {\n    background-color: #b6b6b6;\n  }\n\n  .sweet-alert button.cancel:focus {\n    box-shadow: rgba(197, 205, 211, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset !important;\n  }\n\n  .sweet-alert button::-moz-focus-inner {\n    border: 0;\n  }\n\n  .sweet-alert[data-has-cancel-button=false] button {\n    box-shadow: none !important;\n  }\n\n  .sweet-alert[data-has-confirm-button=false][data-has-cancel-button=false] {\n    padding-bottom: 40px;\n  }\n\n  .sweet-alert .sa-icon {\n    width: 80px;\n    height: 80px;\n    border: 4px solid gray;\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    margin: 20px auto;\n    padding: 0;\n    position: relative;\n    box-sizing: content-box;\n  }\n\n  .sweet-alert .sa-icon.sa-error {\n    border-color: #F27474;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-x-mark {\n    position: relative;\n    display: block;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line {\n    position: absolute;\n    height: 5px;\n    width: 47px;\n    background-color: #F27474;\n    display: block;\n    top: 37px;\n    border-radius: 2px;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-left {\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    left: 17px;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-right {\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    right: 16px;\n  }\n\n  .sweet-alert .sa-icon.sa-warning {\n    border-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-warning .sa-body {\n    position: absolute;\n    width: 5px;\n    height: 47px;\n    left: 50%;\n    top: 10px;\n    -webkit-border-radius: 2px;\n    border-radius: 2px;\n    margin-left: -2px;\n    background-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-warning .sa-dot {\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n    margin-left: -3px;\n    left: 50%;\n    bottom: 10px;\n    background-color: #F8BB86;\n  }\n\n  .sweet-alert .sa-icon.sa-info {\n    border-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-info::before {\n    content: "";\n    position: absolute;\n    width: 5px;\n    height: 29px;\n    left: 50%;\n    bottom: 17px;\n    border-radius: 2px;\n    margin-left: -2px;\n    background-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-info::after {\n    content: "";\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    margin-left: -3px;\n    top: 19px;\n    background-color: #C9DAE1;\n  }\n\n  .sweet-alert .sa-icon.sa-success {\n    border-color: #A5DC86;\n  }\n\n  .sweet-alert .sa-icon.sa-success::before, .sweet-alert .sa-icon.sa-success::after {\n    content: \'\';\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    position: absolute;\n    width: 60px;\n    height: 120px;\n    background: white;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success::before {\n    -webkit-border-radius: 120px 0 0 120px;\n    border-radius: 120px 0 0 120px;\n    top: -7px;\n    left: -33px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    -webkit-transform-origin: 60px 60px;\n    transform-origin: 60px 60px;\n  }\n\n  .sweet-alert .sa-icon.sa-success::after {\n    -webkit-border-radius: 0 120px 120px 0;\n    border-radius: 0 120px 120px 0;\n    top: -11px;\n    left: 30px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    -webkit-transform-origin: 0px 60px;\n    transform-origin: 0px 60px;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-placeholder {\n    width: 80px;\n    height: 80px;\n    border: 4px solid rgba(165, 220, 134, 0.2);\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n    border-radius: 50%;\n    box-sizing: content-box;\n    position: absolute;\n    left: -4px;\n    top: -4px;\n    z-index: 2;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-fix {\n    width: 5px;\n    height: 90px;\n    background-color: white;\n    position: absolute;\n    left: 28px;\n    top: 8px;\n    z-index: 1;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line {\n    height: 5px;\n    background-color: #A5DC86;\n    display: block;\n    border-radius: 2px;\n    position: absolute;\n    z-index: 2;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-tip {\n    width: 25px;\n    left: 14px;\n    top: 46px;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-long {\n    width: 47px;\n    right: 8px;\n    top: 38px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .sweet-alert .sa-icon.sa-custom {\n    background-size: contain;\n    border-radius: 0;\n    border: none;\n    background-position: center center;\n    background-repeat: no-repeat;\n  }\n\n  /*\n   * Animations\n   */\n  @-webkit-keyframes showSweetAlert {\n    0% {\n      transform: scale(0.7);\n      -webkit-transform: scale(0.7);\n    }\n    45% {\n      transform: scale(1.05);\n      -webkit-transform: scale(1.05);\n    }\n    80% {\n      transform: scale(0.95);\n      -webkit-transform: scale(0.95);\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @keyframes showSweetAlert {\n    0% {\n      transform: scale(0.7);\n      -webkit-transform: scale(0.7);\n    }\n    45% {\n      transform: scale(1.05);\n      -webkit-transform: scale(1.05);\n    }\n    80% {\n      transform: scale(0.95);\n      -webkit-transform: scale(0.95);\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @-webkit-keyframes hideSweetAlert {\n    0% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n    100% {\n      transform: scale(0.5);\n      -webkit-transform: scale(0.5);\n    }\n  }\n\n  @keyframes hideSweetAlert {\n    0% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n    100% {\n      transform: scale(0.5);\n      -webkit-transform: scale(0.5);\n    }\n  }\n\n  @-webkit-keyframes slideFromTop {\n    0% {\n      top: 0%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @keyframes slideFromTop {\n    0% {\n      top: 0%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @-webkit-keyframes slideToTop {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 0%;\n    }\n  }\n\n  @keyframes slideToTop {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 0%;\n    }\n  }\n\n  @-webkit-keyframes slideFromBottom {\n    0% {\n      top: 70%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @keyframes slideFromBottom {\n    0% {\n      top: 70%;\n    }\n    100% {\n      top: 50%;\n    }\n  }\n\n  @-webkit-keyframes slideToBottom {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 70%;\n    }\n  }\n\n  @keyframes slideToBottom {\n    0% {\n      top: 50%;\n    }\n    100% {\n      top: 70%;\n    }\n  }\n\n  .showSweetAlert[data-animation=pop] {\n    -webkit-animation: showSweetAlert 0.3s;\n    animation: showSweetAlert 0.3s;\n  }\n\n  .showSweetAlert[data-animation=none] {\n    -webkit-animation: none;\n    animation: none;\n  }\n\n  .showSweetAlert[data-animation=slide-from-top] {\n    -webkit-animation: slideFromTop 0.3s;\n    animation: slideFromTop 0.3s;\n  }\n\n  .showSweetAlert[data-animation=slide-from-bottom] {\n    -webkit-animation: slideFromBottom 0.3s;\n    animation: slideFromBottom 0.3s;\n  }\n\n  .hideSweetAlert[data-animation=pop] {\n    -webkit-animation: hideSweetAlert 0.2s;\n    animation: hideSweetAlert 0.2s;\n  }\n\n  .hideSweetAlert[data-animation=none] {\n    -webkit-animation: none;\n    animation: none;\n  }\n\n  .hideSweetAlert[data-animation=slide-from-top] {\n    -webkit-animation: slideToTop 0.4s;\n    animation: slideToTop 0.4s;\n  }\n\n  .hideSweetAlert[data-animation=slide-from-bottom] {\n    -webkit-animation: slideToBottom 0.3s;\n    animation: slideToBottom 0.3s;\n  }\n\n  @-webkit-keyframes animateSuccessTip {\n    0% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    54% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    70% {\n      width: 50px;\n      left: -8px;\n      top: 37px;\n    }\n    84% {\n      width: 17px;\n      left: 21px;\n      top: 48px;\n    }\n    100% {\n      width: 25px;\n      left: 14px;\n      top: 45px;\n    }\n  }\n\n  @keyframes animateSuccessTip {\n    0% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    54% {\n      width: 0;\n      left: 1px;\n      top: 19px;\n    }\n    70% {\n      width: 50px;\n      left: -8px;\n      top: 37px;\n    }\n    84% {\n      width: 17px;\n      left: 21px;\n      top: 48px;\n    }\n    100% {\n      width: 25px;\n      left: 14px;\n      top: 45px;\n    }\n  }\n\n  @-webkit-keyframes animateSuccessLong {\n    0% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    65% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    84% {\n      width: 55px;\n      right: 0px;\n      top: 35px;\n    }\n    100% {\n      width: 47px;\n      right: 8px;\n      top: 38px;\n    }\n  }\n\n  @keyframes animateSuccessLong {\n    0% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    65% {\n      width: 0;\n      right: 46px;\n      top: 54px;\n    }\n    84% {\n      width: 55px;\n      right: 0px;\n      top: 35px;\n    }\n    100% {\n      width: 47px;\n      right: 8px;\n      top: 38px;\n    }\n  }\n\n  @-webkit-keyframes rotatePlaceholder {\n    0% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    5% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    12% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n    100% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n  }\n\n  @keyframes rotatePlaceholder {\n    0% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    5% {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n    }\n    12% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n    100% {\n      transform: rotate(-405deg);\n      -webkit-transform: rotate(-405deg);\n    }\n  }\n\n  .animateSuccessTip {\n    -webkit-animation: animateSuccessTip 0.75s;\n    animation: animateSuccessTip 0.75s;\n  }\n\n  .animateSuccessLong {\n    -webkit-animation: animateSuccessLong 0.75s;\n    animation: animateSuccessLong 0.75s;\n  }\n\n  .sa-icon.sa-success.animate::after {\n    -webkit-animation: rotatePlaceholder 4.25s ease-in;\n    animation: rotatePlaceholder 4.25s ease-in;\n  }\n\n  @-webkit-keyframes animateErrorIcon {\n    0% {\n      transform: rotateX(100deg);\n      -webkit-transform: rotateX(100deg);\n      opacity: 0;\n    }\n    100% {\n      transform: rotateX(0deg);\n      -webkit-transform: rotateX(0deg);\n      opacity: 1;\n    }\n  }\n\n  @keyframes animateErrorIcon {\n    0% {\n      transform: rotateX(100deg);\n      -webkit-transform: rotateX(100deg);\n      opacity: 0;\n    }\n    100% {\n      transform: rotateX(0deg);\n      -webkit-transform: rotateX(0deg);\n      opacity: 1;\n    }\n  }\n\n  .animateErrorIcon {\n    -webkit-animation: animateErrorIcon 0.5s;\n    animation: animateErrorIcon 0.5s;\n  }\n\n  @-webkit-keyframes animateXMark {\n    0% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    50% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    80% {\n      transform: scale(1.15);\n      -webkit-transform: scale(1.15);\n      margin-top: -6px;\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n      margin-top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animateXMark {\n    0% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    50% {\n      transform: scale(0.4);\n      -webkit-transform: scale(0.4);\n      margin-top: 26px;\n      opacity: 0;\n    }\n    80% {\n      transform: scale(1.15);\n      -webkit-transform: scale(1.15);\n      margin-top: -6px;\n    }\n    100% {\n      transform: scale(1);\n      -webkit-transform: scale(1);\n      margin-top: 0;\n      opacity: 1;\n    }\n  }\n\n  .animateXMark {\n    -webkit-animation: animateXMark 0.5s;\n    animation: animateXMark 0.5s;\n  }\n\n  @-webkit-keyframes pulseWarning {\n    0% {\n      border-color: #F8D486;\n    }\n    100% {\n      border-color: #F8BB86;\n    }\n  }\n\n  @keyframes pulseWarning {\n    0% {\n      border-color: #F8D486;\n    }\n    100% {\n      border-color: #F8BB86;\n    }\n  }\n\n  .pulseWarning {\n    -webkit-animation: pulseWarning 0.75s infinite alternate;\n    animation: pulseWarning 0.75s infinite alternate;\n  }\n\n  @-webkit-keyframes pulseWarningIns {\n    0% {\n      background-color: #F8D486;\n    }\n    100% {\n      background-color: #F8BB86;\n    }\n  }\n\n  @keyframes pulseWarningIns {\n    0% {\n      background-color: #F8D486;\n    }\n    100% {\n      background-color: #F8BB86;\n    }\n  }\n\n  .pulseWarningIns {\n    -webkit-animation: pulseWarningIns 0.75s infinite alternate;\n    animation: pulseWarningIns 0.75s infinite alternate;\n  }\n\n  /* Internet Explorer 9 has some special quirks that are fixed here */\n  /* The icons are not animated. */\n  /* This file is automatically merged into sweet-alert.min.js through Gulp */\n  /* Error icon */\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-left {\n    -ms-transform: rotate(45deg) \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-error .sa-line.sa-right {\n    -ms-transform: rotate(-45deg) \\9;\n  }\n\n  /* Success icon */\n  .sweet-alert .sa-icon.sa-success {\n    border-color: transparent \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-tip {\n    -ms-transform: rotate(45deg) \\9;\n  }\n\n  .sweet-alert .sa-icon.sa-success .sa-line.sa-long {\n    -ms-transform: rotate(-45deg) \\9;\n  }</style><div><div class="panel no-border"><div class="sweet-alert showSweetAlert visible" style="display: block"><div class="sa-icon sa-success" style=""><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><div class="grid-gutter-margin-b"><p class="text-lb">{{\'VGC207\'|t}}</p><br><a class="btn btn-primary" ui-sref="session.exploreViaType({viewType: \'waiting\'})" ng-click="$close()">{{\'TP158\'|t}}</a></div></div></div></div>'),a.put("/views/finance/revenue.detail.html",'<kp-full-screen-loading indicator="itemData"></kp-full-screen-loading><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM036\'|t}}: {{itemData.order_id}}</h4></div><div class="modal-body grid-gutter-margin-b"><table class="table table-bordered"><tbody><tr><td><strong>{{\'PM037\'|t}}</strong></td><td>{{itemData.time_user|amDate:\'TF005\':true}}</td></tr><tr><td><strong>{{\'PM042\'|t}}</strong></td><td ng-bind-html="itemData|revenuePaymentDes|t"></td></tr><tr ng-if="itemData.s_nickname"><td><strong>{{\'C0115\'|t}}</strong></td><td>{{itemData.s_nickname}}</td></tr><tr ng-if="itemData.t_nickname"><td><strong>{{\'C0122\'|t}}</strong></td><td>{{itemData.t_nickname}}</td></tr><tr><td><strong>{{\'PM040\'|t}}</strong></td><td>{{itemData.itc_usd|kpToUsd|number:2}} USD</td></tr><tr ng-if="itemData.status&&itemData.status!=\'7009\'"><td><strong>{{\'PM041\'|t}}</strong></td><td ng-if="!itemData.withdraw_status">{{itemData|paymentDetailStatus|t}}</td><td ng-if="itemData.withdraw_status">{{itemData.withdraw_status.toString()|withdrawHistoryDesc|t}}</td></tr><tr ng-if="itemData.status==\'7009\'&&itemData.reason!=\'102\'"><td><strong>{{\'PM048\'|t}}</strong></td><td>{{(itemData.reason==\'202\'?\'RP016\':\'C0087\')|t}}</td></tr><tr ng-if="itemData.withdraw_method"><td><strong>{{\'PM039\'|t}}</strong></td><td>{{getI18nKey(itemData.withdraw_method)|t}}</td></tr><tr ng-if="itemData.package_id"><td><strong>{{\'TP037\'|t}}</strong></td><td>{{itemData.package_id}}</td></tr><tr ng-if="itemData.session_id"><td><strong>{{\'TP026\'|t}}</strong></td><td>{{itemData.session_id}}</td></tr></tbody></table></div>'),a.put("/views/finance/revenue.relation.html",'<kp-full-screen-loading indicator="items"></kp-full-screen-loading><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM127\'|t}}</h4></div><div class="modal-body" id="div_templete_Related" style=""><table class="table table-bordered"><thead><tr><th>{{\'PM036\'|t}}</th><th>{{\'PM037\'|t}} (UTC)</th><th>{{\'PM042\'|t}}</th><th>{{\'PM040\'|t}}</th></tr></thead><tbody id="tbody_Related"><tr ng-repeat="item in items"><td class="center">{{item.order_id}}</td><td class="center">{{item.finish_date|amDate:\'TF005\':true}}</td><td class="center">{{item.show_type|revenueHistoryDesc|t}}</td><td class="center">{{item.trans_amount>0?(\'+\'+item.trans_amount):item.trans_amount|kpToUsd|number:2}}</td></tr></tbody></table></div>'),a.put("/views/finance/transfer.html",'<div class="modal-header visible-phone"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM090\'|t}}</h4></div><button type="button" class="close hidden-phone" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><div class="modal-body"><div class="note note-success no-border" ng-show="submitSucceed"><h3>{{\'PM346\'|t}}</h3><br><button class="btn" ng-click="$close()">{{\'C0064\'|t}}</button></div><div class="row" ng-hide="submitSucceed"><div class="col-md-9"><div class="alert alert-danger" ng-show="revenue_account.available_itc==0">{{\'PA408\'|t}}</div><div class="panel panel-info widget-profile"><div class="panel-heading padding-sm"><div class="widget-profile-bg-icon"><i class="fa fa-sign-in"></i></div><div class="widget-profile-header"><h4 class="no-margin">{{\'PM001\'|t}}</h4></div></div><div class="row widget-profile-counters"><div class="col-xs-6"><strong class="text-lg">${{revenue_account.available_itc_usd+revenue_account.frozen_withdraw_itc_usd|kpToUsd|number:2}} USD</strong><br>{{ \'PM052\'|t }}</div><div class="col-xs-6"><strong class="text-lg">${{ revenue_account.available_itc_usd|kpToUsd|number:2}} USD</strong><br>{{\'PM051\'|t}}</div></div></div><div class="note note-danger no-border text-danger"><h4 class="no-margin-t" translate="PM414"></h4>{{ \'PM415\'|t }}<br>{{ \'PM416\'|t }}<br>{{ \'PM417\'|t }}</div><div ng-hide="revenue_account.available_itc_usd==0"><div class="form-group no-margin-hr"><h4>{{\'PA222\'|t}}</h4><div class="form-inline"><ul class="list-inline no-margin-b"><li><div class="form-group">$&nbsp;<input type="text" class="form-control" ng-model="itc_usd" ng-keypress="input_keypress($event)"></div></li><li><span class="">USD</span></li></ul></div><span ng-show="!validData() && !processing" class="help-block">{{\'PA262\'|t|format:revenue_account.available_itc_usd/100}}</span></div><div class="form-group no-margin-hr"><h4 class="no-margin-t">{{\'ST229\'|t}}</h4><div class=""><label><input type="password" maxlength="20" class="form-control" autocomplete="off" ng-model="formData.pwd" placeholder="{{\'ST229\'|t}}"></label></div><span ng-show="errorPwd" class="help-block">{{\'ST231\'|t}}</span></div><div class="form-group no-margin-hr"><input type="checkbox" ng-model="isConfirm">&nbsp;<strong>{{ \'PM290\'|t }}</strong></div><button class="btn btn-primary" ng-disabled="!validData(true)||processing" italki-click-with-spinner="submit()" stext="C0045"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div></div><div class="col-md-3"><div class=""><div class=""><h4 class="no-margin-t">Italki Credits {{\'PA407\'|t}}</h4><span class="text-muted">{{ \'PM719\'|t }}</span></div></div></div></div></div>'),a.put("/views/finance/withdraw.addoredit.banktransfer.page.html",'<style>ul.list_disc li{\n    list-style: disc outside none;\n    margin-left: 20px;\n    font-size: 110%;\n    padding: 0px;\n    color: #545454;\n  }\n  .des_txt{\n    text-decoration: none;\n    font-size: 13px;\n    line-height: 150%;\n    color: #545454;\n    font-weight: bold;\n  }</style><h2>{{\'PM032\'|t}}</h2><div class="panel"><div class="panel-body"><span class="des_txt">{{\'PM500\'|t}}</span><ul class="list_disc"><li>{{\'PM503\'|t}}</li><li style="font-weight: bold">{{\'PM504\'|t}}</li></ul><form name="form" novalidate><table class="table table-bordered"><tr><td style="width: 31%;vertical-align: inherit">{{\'PM491\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><ui-select style="border: 1px solid #ccc" ng-model="uiItems" theme="bootstrap" on-select="uiSelectedCountry($item)" name="country" required><ui-select-match placeholder="{{\'C0061\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0061\'|t)"></span></ui-select-match><ui-select-choices repeat="ct in countries"><div ng-bind-html="(ct.v?ct.v:ct.name)|t"></div></ui-select-choices></ui-select><p class="help-block" ng-if="form.$submitted&&form.country.$error.required">{{\'PM505\'|t}}</p></td></tr><tr><td style="vertical-align: inherit">{{\'PM492\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.bank_city" name="bankCity" ng-minlength="1" ng-maxlength="50" required><p class="help-block" ng-if="form.$submitted && (form.bankCity.$error.required || (form.bankCity.$error.minlength||form.bankCity.$error.maxlength))">{{\'ST155\'|t|format:1:50}}</p></td></tr><tr><td style="vertical-align: inherit">{{\'PM493\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.bank_name" name="bankName" ng-minlength="1" ng-maxlength="200" required><p class="help-block" ng-if="form.$submitted&&(form.bankName.$error.required ||(form.bankName.$error.minlength||form.bankName.$error.maxlength))">{{\'ST155\'|t|format:1:50}}</p></td></tr><tr><td>{{\'PM506\'|t}}</td><td><input type="text" class="text allwid form-control" ng-model="data.bank_address"></td></tr><tr><td>{{\'PM495\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.bank_swift_code" name="bankSwiftCode" ng-minlength="1" ng-maxlength="50" required><p class="help-block" ng-if="form.$submitted && (form.bankSwiftCode.$error.required ||(form.bankSwiftCode.$error.minlength||form.bankSwiftCode.$error.maxlength))">{{\'ST155\'|t|format:1:50}}</p></td></tr><tr><td>{{\'PM496\'|t}}<span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.account" name="bankAccount" ng-minlength="5" ng-maxlength="50" required><p class="help-block" ng-if="form.$submitted && (form.bankAccount.$error.required ||(form.bankAccount.$error.minlength||form.bankAccount.$error.maxlength))">{{\'ST155\'|t|format:5:50}}</p></td></tr><tr><td style="vertical-align: inherit">{{\'PM497\'|t}}<span style="color: red;vertical-align: sub">*</span></td><td><input type="text" class="text allwid form-control" ng-model="data.user_name" name="bankUserName" ng-minlength="1" ng-maxlength="50" required><p class="help-block" ng-if="form.$submitted && (form.bankUserName.$error.required ||(form.bankUserName.$error.minlength||form.bankUserName.$error.maxlength))">{{\'ST155\'|t|format:1:50}}</p></td></tr><tr><td style="vertical-align: inherit">{{\'PM498\'|t}} <span style="color: red;vertical-align: sub">*</span></td><td><input type="text" style="display: none" ng-model="data.user_address" name="bankUserAddress" required> <input type="text" class="text allwid form-control" ng-model="data.user_address" name="bankUserAddress" ng-minlength="1" ng-maxlength="225" required><p class="help-block" ng-if="form.$submitted && (form.bankUserAddress.$error.required ||(form.bankUserAddress.$error.minlength||form.bankUserAddress.$error.maxlength))">{{\'ST155\'|t|format:1:50}}</p></td></tr><tr><td>{{\'PM507\'|t}}</td><td>{{\'PM508\'|t}}<br><textarea class="textarea allwid form-control" rows="5" ng-model="data.other"></textarea></td></tr></table><div class="form-group no-margin-hr"><label class="control-label">{{\'ST229\'|t}}</label><div class="row"><div class="col-md-6"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|t}}" maxlength="20" class="form-control" ng-model="data.pwd" name="bankPWD" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div></div></div><p class="help-block" ng-if="form.$submitted && (form.bankPWD.$error.required ||form.bankPWD.$error.maxlength)">{{\'UR015\'|t}}</p><p class="help-block" ng-if="error">{{\'ST231\'|t}}</p></div><div class=""><p translate="TS222"></p><button class="btn btn-primary with-spinner" ng-disabled="processing" italki-click-with-spinner="form.$valid&&submit()" stext="LN116"></button></div></form></div></div>'),a.put("/views/finance/withdraw.detail.modal.html","<kp-full-screen-loading indicator=\"itemData\"></kp-full-screen-loading><div class=\"modal-header\"><button type=\"button\" class=\"close\" aria-hidden=\"true\" ng-click=\"$close()\">&times;</button><h4 class=\"modal-title\">{{'MH119'|t}}</h4></div><div class=\"modal-body grid-gutter-margin-b\"><table class=\"table table-bordered table-striped\"><tbody><tr><td><strong>{{'PM036'|t}}</strong></td><td>{{itemData.order_id}}</td></tr><tr><td><strong>{{'PM148'|t}}</strong></td><td><ul class=\"list-inline no-margin\"><li class=\"no-padding\">${{itemData.itc_usd|kpToUsd|number:2}} USD</li></ul></td></tr><tr><td><strong>{{'PM143'|t}}</strong></td><td ng-if=\"itemData.complete_data\"><a href=\"http://support.italki.com/hc/en-us/articles/210002367\" target=\"_blank\">{{'PM522'|t}}</a> <span ng-if=\"itemData.complete_data.italki_fee>0\">+ ${{itemData.complete_data.italki_fee|number:2}} USD {{'PM170'|t}}</span></td><td ng-if=\"!itemData.complete_data\"><a href=\"http://support.italki.com/hc/en-us/articles/210002367\" target=\"_blank\">{{'PM522'|t}}</a> <span ng-if=\"itemData.withdraw_type==2\">+ $10.00 USD {{'PM170'|t}}</span></td></tr><tr><td><strong>{{'PM039'|t}}</strong></td><td>{{getI18nKey(itemData.withdraw_method)|t}}<br><span ng-if=\"itemData.withdraw_method=='0'\">{{itemData.bank_name}}<br>{{itemData.account}} <span ng-if=\"itemData.status=='0'||itemData.status=='1'\"><br>{{itemData.bank_beneficiary_info.user_name}}<br>{{itemData.bank_beneficiary_info.bank_swift_code}}</span></span> <span ng-if=\"itemData.withdraw_method!='0'\">{{itemData.account}}</span></td></tr><tr><td><strong>{{'PM041'|t}}</strong></td><td><label class=\"label\" ng-class=\"{0: 'label-warning', 1: 'label-warning',2: 'label-success', 3: 'label-danger',4: 'label-defalt', 5: 'label-defalt', 6: 'label-defalt',7: 'label-success'}[itemData.status]\">{{itemData.status|withdrawHistoryDesc|t}}</label><br><span ng-if=\"itemData.status=='0'||itemData.status=='1'\"><p>{{formatPaymentDate(itemData)}}</p><span ng-if=\"['2','7','V'].indexOf(itemData.withdraw_method)>-1&&itemData.withdraw_type!=2\"><a ng-click=\"withdrawalImmediateApply()\">{{'PM150'|t}}</a></span></span> <span ng-if=\"itemData.status=='2'\">{{'PM151'|t|format:(formatDate(itemData.finish_date_user,'TF002'))}}<br><span ng-bind-html=\"'PM152'|t\"></span></span> <span ng-if=\"itemData.status=='3'\">{{'PM153'|t|format:(formatDate(finish_date_user,'TF002'))}}</span> <span ng-if=\"itemData.status=='4'\">{{'PM154'|t}}</span> <span ng-if=\"itemData.status=='5'\">{{'PM155'|t|format:(formatDate(itemData.finish_date_user,'TF002'))}}</span></td></tr></tbody></table><div style=\"margin-left: 1px\"><button ng-if=\"itemData.status=='0'\" class=\"btn\" italki-click-with-spinner=\"cancelWithdrawal(itemData.id)\" stext=\"{{'PM157'|t}}\"></button>&nbsp;&nbsp; <button ng-if=\"itemData.can_edit\" ng-disabled=\"processing\" class=\"btn btn-primary\" ng-click=\"$close();openWithdrawModal()\">{{'PM158'|t}}</button></div></div>"),
a.put("/views/finance/withdraw.html",'<style>.themewhite1 {\n    background-color: rgb(241, 241, 241) !important;\n  }</style><div class="modal-header visible-phone"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM102\'|t}}</h4></div><button type="button" class="close hidden-phone" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><div class="modal-body" ng-class="{themewhite1:step==2}"><a id="div_nav"></a><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first" ng-class="{current:step==1}" style="width: 50%"><div>{{\'PM093\'|t}}</div></li><li class="last" ng-class="{current:step==2}" style="width: 50%"><div>{{\'PM094\'|t}}</div></li></ul></div></div><div class="row" ng-hide="step==2"><div class="col-md-9"><div class=""><div class=""><div class=""><div class="note note-danger no-border"><h4>{{\'PM252\'|t}}<span ng-if="hisWithDraw">: {{\'C0053\'|t}}</span></h4><p>{{\'PM253\'|t}}</p></div><ul><li><div class="grid-gutter-margin-b"><h4 class="no-margin-t">{{\'PM058\'|t}} ({{\'PM169\'|t}}: $30.00 USD, {{\'TP113\'|t}}: ${{maxITC|number:2}} USD)</h4><div class="form-inline"><ul class="list-inline"><li><div class="form-group">$&nbsp;<input type="text" ng-keypress="input_keypress($event)" class="form-control" ng-model="itc_usd"></div></li><li>USD</li></ul></div><span ng-show="itc_usd&&(itc_usd<30||itc_usd>maxITC)&&maxITC>=30" class="help-block">{{\'PA258\'|t|format:(maxITC|number:2)}}</span> <span ng-show="maxITC<30" class="help-block">{{\'PA261\'|t}}</span></div></li><li><div class="grid-gutter-margin-b"><h4 class="no-margin-t">{{\'PM039\'|t}}</h4><div ng-if="withdrawalPromotion" class="row" style="margin: inherit; padding: 20px; background-color: aliceblue"><i class="fa fa-volume-up" aria-hidden="true" style="vertical-align: text-bottom"></i> <span ng-bind-html="withdrawalPromotion.title_html"></span></div><div ng-repeat="withdraw_config_obj in withdrawData.withdraw_config_obj_s" class="{{formData.method==withdraw_config_obj.withdraw_method?\'alert\':\'alert alert-none\'}}" style="padding: 0"><div class="form-group no-margin" ng-mouseover="mouseoverMethod=withdraw_config_obj.withdraw_method" ng-mouseleave="mouseoverMethod=0"><label for="ra_{{withdraw_config_obj.withdraw_method}}" class="no-margin" style="display: block;padding: 15px 15px 15px 35px"><span class="pull-right" ng-if="\'0UV\'.indexOf(withdraw_config_obj.withdraw_method)==-1" ng-show="mouseoverMethod==withdraw_config_obj.withdraw_method"><a ui-sref="setting.withdraw" ng-click="$close()">{{\'C0053\'|t}}</a></span> <input type="radio" id="ra_{{withdraw_config_obj.withdraw_method}}" name="r_primaryMethod" value="{{withdraw_config_obj.withdraw_method}}" ng-model="formData.method" class="px"> <span class="lbl"><img src="/static/images/payment/i{{withdraw_config_obj.withdraw_method.toLowerCase()}}.gif" align="absmiddle">&nbsp;{{getI18nKey(withdraw_config_obj.withdraw_method)|t}} &nbsp;&nbsp;{{\'PM212\'|t}}:&nbsp;{{withdraw_config_obj.account}}</span></label></div></div><p><a ui-sref="setting.withdraw" ng-click="$close()">+ {{\'PA250\'|t}}</a></p></div></li></ul><div class=""><div class="text-center" style="float: left; width: 40px"></div><div style="margin-left: 40px"><button class="btn btn-primary" ng-disabled="!validData()||processing" italki-click-with-spinner="next()" stext="C0045"></button></div></div></div></div></div></div><div class="col-md-3"><div class=""><div class=""><h4 class="no-margin-t" translate="PM708"></h4><div><h5>{{\'PM709\'|t}}</h5><p><strong>{{\'PM710\'|t}}</strong><br>{{\'PM711\'|t}}</p><h5>{{\'PM712\'|t}}</h5><span>{{\'PM724\'|t}} {{\'PM725\'|t}}</span><ul><li>{{\'PM726\'|t}}</li><li>{{\'PM727\'|t}}</li></ul><p><span>{{\'PM728\'|t}}</span></p><p><span>{{\'PM729\'|t}} (<a href="http://support.italki.com/entries/21786815-How-and-when-do-I-get-paid-as-a-teacher-" target="_blank">{{\'C0171\'|t}}</a>)</span></p><p><span>{{\'PM723\'|t}}</span></p></div></div></div></div></div><div class="row" ng-show="step==2"><div class="col-lg-12"><div class="panel"><div class="panel-body"><table class="table table-striped no-margin"><tbody><tr><td><strong class="text-md">{{\'PM058\'|t}}</strong></td><td><ul class="list-inline no-margin"><li class="no-padding">${{formData.itc_usd|kpToUsd|number:2}} USD</li></ul></td></tr><tr><td><strong>{{\'PM143\'|t}}</strong></td><td><a href="http://support.italki.com/hc/en-us/articles/210002367" target="_blank">{{\'PM522\'|t}}</a></td></tr><tr><td><strong>{{\'PM039\'|t}}</strong></td><td>{{getI18nKey(formData.method)|t}}<br><span ng-if="formData.method==\'0\'">{{withdrawData.bank_beneficiary_info.bank_name}}<br>{{withdrawData.bank_beneficiary_info.account_number}}<br>{{withdrawData.bank_beneficiary_info.user_name}}<br>{{withdrawData.bank_beneficiary_info.bank_swift_code}}</span> <span ng-if="formData.method!=\'0\'">{{withdrawAccount()}}</span></td></tr><tr><td><strong>{{\'PM144\'|t}}</strong></td><td>{{processingTimeDesc()}}</td></tr></tbody></table></div></div><div class="panel"><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'PM254\'|t}}</h4><p class="text-muted">{{\'PM255\'|t}}</p><div class="checkbox"><label><input type="checkbox" ng-model="isConfirm"> <strong class="lbl">{{\'PM256\'|t}}</strong></label></div></div></div></div><div class="panel"><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'ST229\'|t}}</h4><div class="form-group no-margin"><label><input type="password" maxlength="20" class="form-control" autocomplete="off" ng-model="formData.pwd" placeholder="{{\'ST229\'|t}}" style="width: 250px"></label><span ng-show="errorPwd" class="help-block">{{\'ST231\'|t}}<br></span></div></div></div></div><div class=""><a class="btn" ng-click="backStep1()">{{\'C0076\'|t}}</a>&nbsp;&nbsp; <a class="btn btn-primary" ng-disabled="!validData()||processing" italki-click-with-spinner="submit()" stext="C0045" style="font-size: 14px;line-height: 15px"></a></div></div></div></div>'),a.put("/views/finance/withdraw.immdiate.apply.modal.html",'<kp-full-screen-loading indicator="itemData"></kp-full-screen-loading><div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PM167\'|t}}</h4></div><div class="modal-body grid-gutter-margin-b"><div><h4>{{\'PM159\'|t}}</h4><ul class="no-grid-gutter-h"><li>{{\'PM160\'|t}}</li><li>{{\'PM161\'|t}}</li><li>{{\'PM162\'|t}}</li><li>{{\'PM163\'|t}} <a href="http://support.italki.com/hc/en-us/articles/206351888" target="_blank">{{\'PM164\'|t}}</a>.</li></ul><h4>{{\'PM254\'|t}}</h4><label style="margin-left: 20px"><input type="checkbox" ng-model="isConfirm1" class="px ng-pristine ng-untouched ng-valid"> <span class="lbl"><span>{{\'PM165\'|t}}</span></span></label><br><label style="margin-left: 20px"><input type="checkbox" ng-model="isConfirm2" class="px ng-pristine ng-untouched ng-valid"> <span class="lbl"><span>{{\'PM166\'|t}}</span></span></label></div><div style="margin-left: 1px;margin-top: 20px"><button class="btn btn-primary" ng-disabled="!isConfirm1||!isConfirm2||processing" italki-click-with-spinner="immediateApply()" stext="C0045"></button></div></div>'),a.put("/views/kp/add.friend.request.error.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'PU201\'|t}}</h4></div><div><div class="panel-body"><p class="">{{\'PU090\'|t}}</p><p class="">{{\'PU091\'|t}}</p><p class="">{{\'PU092\'|t}}</p><p class="">{{\'PU093\'|t}}</p><p class="">{{\'PU094\'|t}}</p><p class="">{{\'PU095\'|t}}</p><p class="">{{\'PU096\'|t}}</p><p class="">{{\'PU097\'|t}}</p><p class="">{{\'PU098\'|t}}</p><p ng-bind-html="\'PU099\'|t"></p><p ng-bind-html="\'PU100\'|t"></p></div></div>'),a.put("/views/kp/add.friend.request.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'CT101\'|t}}</h4></div><div class="modal-body"><div class=""><br><p class="">{{\'KP441\'|t}}</p><p><strong>{{\'KP442\'|t}}</strong><br><textarea class="form-control" rows="4" ng-model="data.message"></textarea><span ng-show="data.message.length<4||data.message.length>500" class="help-block">{{\'ST155\'|t|format:4:500}}</span></p></div><div ng-show="errorMsg"><p class="r" ng-bind="errorMsg"></p><p></p></div></div><div class="modal-footer"><button type="button" ng-disabled="processing" class="btn btn-primary" ng-click="addFriendRequest()"><span class="btn-txt">{{\'C0045\'|t}}</span></button> <button type="button" class="btn btn-default" ng-click="$close()">{{\'C0064\'|t}}</button></div>'),a.put("/views/kp/autocomplete.html",'<div class="italki-autocomplete-container"><form ng-submit="autocomplete.search()"><div class="form-group no-margin"><input name="auto" type="text" class="form-control" placeholder="{{autocomplete.placeholder}}" ng-model="autocomplete.value.text" ng-click="autocomplete.activate($event)"></div><div class="autocomplete-list" ng-show="autocomplete.items.length"><div class="autocomplete-item" ng-repeat="item in autocomplete.items" ng-click="autocomplete.search(item.text)"><strong>{{item.highlighted}}</strong>{{item.restTexts}}</div></div></form></div>'),a.put("/views/kp/calendar.div.html",'<div class="cal availability loading-layout"><div class="controls" ng-if="DateData"><a class="prev" ng-hide="!current||options.isRepeat" ng-click="prevDays()"><i class="fa fa-angle-left text-lg"></i></a><div class="title" ng-if="DateData"><span ng-if="!selectObj.show" style="cursor: pointer" ng-click="!options.isRepeat&&(selectObj.show=!selectObj.show);">{{showTitle()}}</span><select ng-model="selectObj.selValue" ng-if="selectObj.show" style="width: 300px" ng-options="m.s + \' - \' + m.e for m in selectObj.arr" ng-change="selChange()"></select></div><a class="next holder-position" ng-hide="!options.isRepeat">&nbsp;</a> <a class="next" ng-click="nextDays()" ng-hide="options.isRepeat"><i class="fa fa-angle-right text-lg"></i></a></div><div class="controls" ng-if="DateData&&repeatable"><label for="repeatControl"><input type="checkbox" value="Repeat every week" name="repeat" id="repeatControl" ng-model="options.isRepeat"> <span style="font-size: 12px;font-weight: normal" translate="TS104"></span></label></div><kp-loading indicator="DateData"></kp-loading><div ng-if="DateData"><div class="top" notranslate=""><table><tbody><tr><td class="small">UTC{{tzObj.utc}}</td><td ng-repeat="w in DateData.weeks track by $index" ng-if="$index<7">{{w.sname}}</td></tr></tbody></table></div><div class="week" notranslate=""><table class="hour" cellpadding="0"><tbody><tr ng-repeat="h in DateData.hours" ng-if="h.show" ng-class="{\'falseSelectable\':selectable}"><td class="small">{{h.s}}</td><td class="major"><div class="hour-block" kp-hovering-card pop-object="{show:!(w==0||w==6),flag:w,times:getTimeLong(h,w,$index),t:h.index,l:$index,interval:interval,lessonLength:lessonLength,selectable:selectable}" ng-repeat="w in h.weeks track by $index" ng-click="dataClick($event,h,w,$index)" ng-class="{\'hour-select-selected\':w==1,\'hour-select-mod-del\':w==2,\'hour-frozen\':w==4,\'hour-student-used\':w==3,\'hour-student-cur-used\':(w==6||w==8)}" ng-if="$index<7"></div></td></tr></tbody></table></div><div class="top" notranslate=""><table><tbody><tr><td class="small">UTC{{tzObj.utc}}</td><td ng-repeat="w in DateData.weeks track by $index" ng-if="$index<7">{{w.sname}}</td></tr></tbody></table></div></div></div>'),a.put("/views/kp/calendar.html",'<div class="cal availability"><div class="tz-notice"><span class="tz-normal" isolate="">{{\'KP212\'|t}}</span> <span class="tz-aligned" isolate="">All availability will be saved in the <var><b class="tz-current"></b></var> timezone.</span> <span class="tz-unaligned" isolate="">Your availability was last saved in the <var><b class="tz-saved"></b></var> timezone, but will now be saved in the <b class="tz-current"></b> timezone. To change your timezone, go to <a href="/settings">your profile</a>.</span></div><div class="controls"><a class="prev" ng-hide="!$current" ng-click="$prevDays()"><i class="fa fa-angle-left"></i> Previous</a><div class="title" notranslate=""></div><a class="next" ng-click="$nextDays()">Next <i class="fa fa-angle-right"></i></a></div><div id="cal-container"><div class="top" notranslate=""><table><tbody><tr><td class="small" ng-bind="$timezone"></td><td ng-repeat="day in $daysOfWeek" ng-bind="day|moment:\'dd MM/DD\'" ng-class="{today:$first}"></td></tr></tbody></table></div><div class="week" notranslate="" style="height: 1008px"><table class="day" cellspacing="0" cellpadding="0" style="height: 1008px"><tbody><tr class="day-row"><td class="small"></td><td data-time="!1418054400000" class="day-col"><div class="events"></div></td><td data-time="!1418140800000" class="day-col"><div class="events"></div></td><td data-time="!1418227200000" class="day-col"><div class="events"></div></td><td data-time="!1418313600000" class="day-col"><div class="events"></div></td><td data-time="!1418400000000" class="day-col"><div class="events"></div></td><td data-time="!1418486400000" class="day-col"><div class="events"></div></td><td data-time="!1418572800000" class="day-col"><div class="events"></div></td></tr></tbody></table><table class="hour" cellpadding="0"><tbody><tr data-hour-marker="0"><td class="small">00:00</td><td class="major" data-hour="0"><div class="hour-block" data-offset="0"></div><div class="hour-block" data-offset="24"></div><div class="hour-block hour-select-selected" data-offset="48"></div><div class="hour-block hour-select-mod-del" data-offset="72"></div><div class="hour-block" data-offset="96"></div><div class="hour-block" data-offset="120"></div><div class="hour-block hour-select-selected" data-offset="144"></div></td></tr><tr data-hour-marker="0"><td class="small"></td><td class="minor" data-hour="0.5"><div class="hour-block" data-offset="0.5"></div><div class="hour-block" data-offset="24.5"></div><div class="hour-block hour-select-selected" data-offset="48.5"></div><div class="hour-block hour-select-mod-del" data-offset="72.5"></div><div class="hour-block" data-offset="96.5"></div><div class="hour-block" data-offset="120.5"></div><div class="hour-block hour-select-selected" data-offset="144.5"></div></td></tr><tr data-hour-marker="1"><td class="small">01:00</td><td class="major" data-hour="1"><div class="hour-block" data-offset="1"></div><div class="hour-block" data-offset="25"></div><div class="hour-block hour-select-selected" data-offset="49"></div><div class="hour-block hour-select-mod-del" data-offset="73"></div><div class="hour-block" data-offset="97"></div><div class="hour-block" data-offset="121"></div><div class="hour-block hour-select-selected" data-offset="145"></div></td></tr><tr data-hour-marker="1"><td class="small"></td><td class="minor" data-hour="1.5"><div class="hour-block" data-offset="1.5"></div><div class="hour-block" data-offset="25.5"></div><div class="hour-block hour-select-selected" data-offset="49.5"></div><div class="hour-block hour-select-mod-del" data-offset="73.5"></div><div class="hour-block" data-offset="97.5"></div><div class="hour-block" data-offset="121.5"></div><div class="hour-block hour-select-selected" data-offset="145.5"></div></td></tr><tr data-hour-marker="2"><td class="small">02:00</td><td class="major" data-hour="2"><div class="hour-block" data-offset="2"></div><div class="hour-block" data-offset="26"></div><div class="hour-block hour-select-selected" data-offset="50"></div><div class="hour-block hour-select-mod-del" data-offset="74"></div><div class="hour-block" data-offset="98"></div><div class="hour-block" data-offset="122"></div><div class="hour-block hour-select-selected" data-offset="146"></div></td></tr><tr data-hour-marker="2"><td class="small"></td><td class="minor" data-hour="2.5"><div class="hour-block" data-offset="2.5"></div><div class="hour-block" data-offset="26.5"></div><div class="hour-block hour-select-selected tt" data-offset="50.5"></div><div class="hour-block hour-select-mod-del" data-offset="74.5"></div><div class="hour-block" data-offset="98.5"></div><div class="hour-block" data-offset="122.5"></div><div class="hour-block hour-select-selected" data-offset="146.5"></div></td></tr><tr data-hour-marker="3"><td class="small">03:00</td><td class="major" data-hour="3"><div class="hour-block" data-offset="3"></div><div class="hour-block" data-offset="27"></div><div class="hour-block hour-select-selected" data-offset="51"></div><div class="hour-block hour-select-mod-del" data-offset="75"></div><div class="hour-block" data-offset="99"></div><div class="hour-block" data-offset="123"></div><div class="hour-block hour-select-selected" data-offset="147"></div></td></tr><tr data-hour-marker="3"><td class="small"></td><td class="minor" data-hour="3.5"><div class="hour-block" data-offset="3.5"></div><div class="hour-block" data-offset="27.5"></div><div class="hour-block hour-select-selected" data-offset="51.5"></div><div class="hour-block hour-select-mod-del" data-offset="75.5"></div><div class="hour-block" data-offset="99.5"></div><div class="hour-block" data-offset="123.5"></div><div class="hour-block hour-select-selected" data-offset="147.5"></div></td></tr><tr data-hour-marker="4"><td class="small">04:00</td><td class="major" data-hour="4"><div class="hour-block" data-offset="4"></div><div class="hour-block" data-offset="28"></div><div class="hour-block hour-select-selected" data-offset="52"></div><div class="hour-block hour-select-mod-del" data-offset="76"></div><div class="hour-block" data-offset="100"></div><div class="hour-block" data-offset="124"></div><div class="hour-block hour-select-selected" data-offset="148"></div></td></tr><tr data-hour-marker="4"><td class="small"></td><td class="minor" data-hour="4.5"><div class="hour-block" data-offset="4.5"></div><div class="hour-block" data-offset="28.5"></div><div class="hour-block hour-select-selected" data-offset="52.5"></div><div class="hour-block hour-select-mod-del" data-offset="76.5"></div><div class="hour-block" data-offset="100.5"></div><div class="hour-block" data-offset="124.5"></div><div class="hour-block hour-select-selected" data-offset="148.5"></div></td></tr><tr data-hour-marker="5"><td class="small">05:00</td><td class="major" data-hour="5"><div class="hour-block" data-offset="5"></div><div class="hour-block hour-select-selected tt" data-offset="29"></div><div class="hour-block hour-select-selected" data-offset="53"></div><div class="hour-block hour-select-mod-del" data-offset="77"></div><div class="hour-block" data-offset="101"></div><div class="hour-block" data-offset="125"></div><div class="hour-block hour-select-selected" data-offset="149"></div></td></tr><tr data-hour-marker="5"><td class="small"></td><td class="minor" data-hour="5.5"><div class="hour-block" data-offset="5.5"></div><div class="hour-block hour-select-selected" data-offset="29.5"></div><div class="hour-block hour-select-selected" data-offset="53.5"></div><div class="hour-block hour-select-mod-del" data-offset="77.5"></div><div class="hour-block" data-offset="101.5"></div><div class="hour-block" data-offset="125.5"></div><div class="hour-block hour-select-selected" data-offset="149.5"></div></td></tr><tr data-hour-marker="6"><td class="small">06:00</td><td class="major" data-hour="6"><div class="hour-block" data-offset="6"></div><div class="hour-block hour-select-selected" data-offset="30"></div><div class="hour-block hour-select-selected" data-offset="54"></div><div class="hour-block hour-select-mod-del" data-offset="78"></div><div class="hour-block" data-offset="102"></div><div class="hour-block" data-offset="126"></div><div class="hour-block hour-select-selected" data-offset="150"></div></td></tr><tr data-hour-marker="6"><td class="small"></td><td class="minor" data-hour="6.5"><div class="hour-block" data-offset="6.5"></div><div class="hour-block hour-select-selected" data-offset="30.5"></div><div class="hour-block hour-select-selected" data-offset="54.5"></div><div class="hour-block hour-select-mod-del" data-offset="78.5"></div><div class="hour-block" data-offset="102.5"></div><div class="hour-block" data-offset="126.5"></div><div class="hour-block hour-select-selected" data-offset="150.5"></div></td></tr><tr data-hour-marker="7"><td class="small">07:00</td><td class="major" data-hour="7"><div class="hour-block" data-offset="7"></div><div class="hour-block hour-select-selected" data-offset="31"></div><div class="hour-block hour-select-selected" data-offset="55"></div><div class="hour-block hour-select-mod-del" data-offset="79"></div><div class="hour-block" data-offset="103"></div><div class="hour-block" data-offset="127"></div><div class="hour-block hour-select-selected" data-offset="151"></div></td></tr><tr data-hour-marker="7"><td class="small"></td><td class="minor" data-hour="7.5"><div class="hour-block" data-offset="7.5"></div><div class="hour-block hour-select-selected" data-offset="31.5"></div><div class="hour-block hour-select-selected" data-offset="55.5"></div><div class="hour-block hour-select-mod-del" data-offset="79.5"></div><div class="hour-block" data-offset="103.5"></div><div class="hour-block" data-offset="127.5"></div><div class="hour-block hour-select-selected" data-offset="151.5"></div></td></tr><tr data-hour-marker="8"><td class="small">08:00</td><td class="major" data-hour="8"><div class="hour-block" data-offset="8"></div><div class="hour-block hour-select-selected" data-offset="32"></div><div class="hour-block" data-offset="56"></div><div class="hour-block" data-offset="80"></div><div class="hour-block" data-offset="104"></div><div class="hour-block" data-offset="128"></div><div class="hour-block hour-select-selected" data-offset="152"></div></td></tr><tr data-hour-marker="8"><td class="small"></td><td class="minor" data-hour="8.5"><div class="hour-block" data-offset="8.5"></div><div class="hour-block hour-select-selected" data-offset="32.5"></div><div class="hour-block" data-offset="56.5"></div><div class="hour-block" data-offset="80.5"></div><div class="hour-block" data-offset="104.5"></div><div class="hour-block" data-offset="128.5"></div><div class="hour-block hour-select-selected" data-offset="152.5"></div></td></tr><tr data-hour-marker="9"><td class="small">09:00</td><td class="major" data-hour="9"><div class="hour-block" data-offset="9"></div><div class="hour-block hour-select-selected" data-offset="33"></div><div class="hour-block" data-offset="57"></div><div class="hour-block" data-offset="81"></div><div class="hour-block" data-offset="105"></div><div class="hour-block" data-offset="129"></div><div class="hour-block hour-select-mod-del" data-offset="153"></div></td></tr><tr data-hour-marker="9"><td class="small"></td><td class="minor" data-hour="9.5"><div class="hour-block" data-offset="9.5"></div><div class="hour-block hour-select-selected" data-offset="33.5"></div><div class="hour-block" data-offset="57.5"></div><div class="hour-block" data-offset="81.5"></div><div class="hour-block" data-offset="105.5"></div><div class="hour-block" data-offset="129.5"></div><div class="hour-block hour-select-mod-del" data-offset="153.5"></div></td></tr><tr data-hour-marker="10"><td class="small">10:00</td><td class="major" data-hour="10"><div class="hour-block" data-offset="10"></div><div class="hour-block hour-select-selected" data-offset="34"></div><div class="hour-block" data-offset="58"></div><div class="hour-block" data-offset="82"></div><div class="hour-block" data-offset="106"></div><div class="hour-block" data-offset="130"></div><div class="hour-block hour-select-mod-del" data-offset="154"></div></td></tr><tr data-hour-marker="10"><td class="small"></td><td class="minor" data-hour="10.5"><div class="hour-block" data-offset="10.5"></div><div class="hour-block hour-select-selected" data-offset="34.5"></div><div class="hour-block" data-offset="58.5"></div><div class="hour-block" data-offset="82.5"></div><div class="hour-block" data-offset="106.5"></div><div class="hour-block" data-offset="130.5"></div><div class="hour-block hour-select-mod-del" data-offset="154.5"></div></td></tr><tr data-hour-marker="11"><td class="small">11:00</td><td class="major" data-hour="11"><div class="hour-block" data-offset="11"></div><div class="hour-block" data-offset="35"></div><div class="hour-block" data-offset="59"></div><div class="hour-block" data-offset="83"></div><div class="hour-block" data-offset="107"></div><div class="hour-block" data-offset="131"></div><div class="hour-block" data-offset="155"></div></td></tr><tr data-hour-marker="11"><td class="small"></td><td class="minor" data-hour="11.5"><div class="hour-block" data-offset="11.5"></div><div class="hour-block" data-offset="35.5"></div><div class="hour-block" data-offset="59.5"></div><div class="hour-block" data-offset="83.5"></div><div class="hour-block" data-offset="107.5"></div><div class="hour-block" data-offset="131.5"></div><div class="hour-block" data-offset="155.5"></div></td></tr><tr data-hour-marker="12"><td class="small">12:00</td><td class="major" data-hour="12"><div class="hour-block" data-offset="12"></div><div class="hour-block" data-offset="36"></div><div class="hour-block" data-offset="60"></div><div class="hour-block" data-offset="84"></div><div class="hour-block" data-offset="108"></div><div class="hour-block" data-offset="132"></div><div class="hour-block" data-offset="156"></div></td></tr><tr data-hour-marker="12"><td class="small"></td><td class="minor" data-hour="12.5"><div class="hour-block" data-offset="12.5"></div><div class="hour-block" data-offset="36.5"></div><div class="hour-block" data-offset="60.5"></div><div class="hour-block" data-offset="84.5"></div><div class="hour-block" data-offset="108.5"></div><div class="hour-block" data-offset="132.5"></div><div class="hour-block" data-offset="156.5"></div></td></tr><tr data-hour-marker="13"><td class="small">13:00</td><td class="major" data-hour="13"><div class="hour-block" data-offset="13"></div><div class="hour-block" data-offset="37"></div><div class="hour-block" data-offset="61"></div><div class="hour-block" data-offset="85"></div><div class="hour-block" data-offset="109"></div><div class="hour-block" data-offset="133"></div><div class="hour-block" data-offset="157"></div></td></tr><tr data-hour-marker="13"><td class="small"></td><td class="minor" data-hour="13.5"><div class="hour-block" data-offset="13.5"></div><div class="hour-block" data-offset="37.5"></div><div class="hour-block" data-offset="61.5"></div><div class="hour-block" data-offset="85.5"></div><div class="hour-block" data-offset="109.5"></div><div class="hour-block" data-offset="133.5"></div><div class="hour-block" data-offset="157.5"></div></td></tr><tr data-hour-marker="14"><td class="small">14:00</td><td class="major" data-hour="14"><div class="hour-block" data-offset="14"></div><div class="hour-block" data-offset="38"></div><div class="hour-block" data-offset="62"></div><div class="hour-block" data-offset="86"></div><div class="hour-block" data-offset="110"></div><div class="hour-block" data-offset="134"></div><div class="hour-block" data-offset="158"></div></td></tr><tr data-hour-marker="14"><td class="small"></td><td class="minor" data-hour="14.5"><div class="hour-block" data-offset="14.5"></div><div class="hour-block" data-offset="38.5"></div><div class="hour-block" data-offset="62.5"></div><div class="hour-block" data-offset="86.5"></div><div class="hour-block" data-offset="110.5"></div><div class="hour-block" data-offset="134.5"></div><div class="hour-block" data-offset="158.5"></div></td></tr><tr data-hour-marker="15"><td class="small">15:00</td><td class="major" data-hour="15"><div class="hour-block" data-offset="15"></div><div class="hour-block" data-offset="39"></div><div class="hour-block" data-offset="63"></div><div class="hour-block" data-offset="87"></div><div class="hour-block" data-offset="111"></div><div class="hour-block" data-offset="135"></div><div class="hour-block" data-offset="159"></div></td></tr><tr data-hour-marker="15"><td class="small"></td><td class="minor" data-hour="15.5"><div class="hour-block" data-offset="15.5"></div><div class="hour-block" data-offset="39.5"></div><div class="hour-block" data-offset="63.5"></div><div class="hour-block" data-offset="87.5"></div><div class="hour-block" data-offset="111.5"></div><div class="hour-block" data-offset="135.5"></div><div class="hour-block" data-offset="159.5"></div></td></tr><tr data-hour-marker="16"><td class="small">16:00</td><td class="major" data-hour="16"><div class="hour-block" data-offset="16"></div><div class="hour-block" data-offset="40"></div><div class="hour-block" data-offset="64"></div><div class="hour-block" data-offset="88"></div><div class="hour-block" data-offset="112"></div><div class="hour-block" data-offset="136"></div><div class="hour-block" data-offset="160"></div></td></tr><tr data-hour-marker="16"><td class="small"></td><td class="minor" data-hour="16.5"><div class="hour-block" data-offset="16.5"></div><div class="hour-block" data-offset="40.5"></div><div class="hour-block" data-offset="64.5"></div><div class="hour-block" data-offset="88.5"></div><div class="hour-block" data-offset="112.5"></div><div class="hour-block" data-offset="136.5"></div><div class="hour-block" data-offset="160.5"></div></td></tr><tr data-hour-marker="17"><td class="small">17:00</td><td class="major" data-hour="17"><div class="hour-block" data-offset="17"></div><div class="hour-block" data-offset="41"></div><div class="hour-block" data-offset="65"></div><div class="hour-block" data-offset="89"></div><div class="hour-block" data-offset="113"></div><div class="hour-block" data-offset="137"></div><div class="hour-block" data-offset="161"></div></td></tr><tr data-hour-marker="17"><td class="small"></td><td class="minor" data-hour="17.5"><div class="hour-block" data-offset="17.5"></div><div class="hour-block" data-offset="41.5"></div><div class="hour-block" data-offset="65.5"></div><div class="hour-block" data-offset="89.5"></div><div class="hour-block" data-offset="113.5"></div><div class="hour-block" data-offset="137.5"></div><div class="hour-block" data-offset="161.5"></div></td></tr><tr data-hour-marker="18"><td class="small">18:00</td><td class="major" data-hour="18"><div class="hour-block" data-offset="18"></div><div class="hour-block" data-offset="42"></div><div class="hour-block" data-offset="66"></div><div class="hour-block" data-offset="90"></div><div class="hour-block" data-offset="114"></div><div class="hour-block" data-offset="138"></div><div class="hour-block" data-offset="162"></div></td></tr><tr data-hour-marker="18"><td class="small"></td><td class="minor" data-hour="18.5"><div class="hour-block" data-offset="18.5"></div><div class="hour-block" data-offset="42.5"></div><div class="hour-block" data-offset="66.5"></div><div class="hour-block" data-offset="90.5"></div><div class="hour-block" data-offset="114.5"></div><div class="hour-block" data-offset="138.5"></div><div class="hour-block" data-offset="162.5"></div></td></tr><tr data-hour-marker="19"><td class="small">19:00</td><td class="major" data-hour="19"><div class="hour-block" data-offset="19"></div><div class="hour-block" data-offset="43"></div><div class="hour-block" data-offset="67"></div><div class="hour-block" data-offset="91"></div><div class="hour-block" data-offset="115"></div><div class="hour-block" data-offset="139"></div><div class="hour-block" data-offset="163"></div></td></tr><tr data-hour-marker="19"><td class="small"></td><td class="minor" data-hour="19.5"><div class="hour-block" data-offset="19.5"></div><div class="hour-block" data-offset="43.5"></div><div class="hour-block" data-offset="67.5"></div><div class="hour-block" data-offset="91.5"></div><div class="hour-block" data-offset="115.5"></div><div class="hour-block" data-offset="139.5"></div><div class="hour-block" data-offset="163.5"></div></td></tr><tr data-hour-marker="20"><td class="small">20:00</td><td class="major" data-hour="20"><div class="hour-block" data-offset="20"></div><div class="hour-block" data-offset="44"></div><div class="hour-block" data-offset="68"></div><div class="hour-block" data-offset="92"></div><div class="hour-block" data-offset="116"></div><div class="hour-block" data-offset="140"></div><div class="hour-block" data-offset="164"></div></td></tr><tr data-hour-marker="20"><td class="small"></td><td class="minor" data-hour="20.5"><div class="hour-block" data-offset="20.5"></div><div class="hour-block" data-offset="44.5"></div><div class="hour-block" data-offset="68.5"></div><div class="hour-block" data-offset="92.5"></div><div class="hour-block" data-offset="116.5"></div><div class="hour-block" data-offset="140.5"></div><div class="hour-block" data-offset="164.5"></div></td></tr><tr data-hour-marker="21"><td class="small">21:00</td><td class="major" data-hour="21"><div class="hour-block" data-offset="21"></div><div class="hour-block hour-select-selected" data-offset="45"></div><div class="hour-block hour-select-mod-del" data-offset="69"></div><div class="hour-block" data-offset="93"></div><div class="hour-block" data-offset="117"></div><div class="hour-block hour-select-selected" data-offset="141"></div><div class="hour-block hour-select-selected" data-offset="165"></div></td></tr><tr data-hour-marker="21"><td class="small"></td><td class="minor" data-hour="21.5"><div class="hour-block" data-offset="21.5"></div><div class="hour-block hour-select-selected" data-offset="45.5"></div><div class="hour-block hour-select-mod-del" data-offset="69.5"></div><div class="hour-block" data-offset="93.5"></div><div class="hour-block" data-offset="117.5"></div><div class="hour-block hour-select-selected" data-offset="141.5"></div><div class="hour-block hour-select-selected" data-offset="165.5"></div></td></tr><tr data-hour-marker="22"><td class="small">22:00</td><td class="major" data-hour="22"><div class="hour-block" data-offset="22"></div><div class="hour-block hour-select-selected" data-offset="46"></div><div class="hour-block hour-select-mod-del" data-offset="70"></div><div class="hour-block" data-offset="94"></div><div class="hour-block" data-offset="118"></div><div class="hour-block hour-select-selected" data-offset="142"></div><div class="hour-block hour-select-selected" data-offset="166"></div></td></tr><tr data-hour-marker="22"><td class="small"></td><td class="minor" data-hour="22.5"><div class="hour-block" data-offset="22.5"></div><div class="hour-block hour-select-selected" data-offset="46.5"></div><div class="hour-block hour-select-mod-del" data-offset="70.5"></div><div class="hour-block" data-offset="94.5"></div><div class="hour-block" data-offset="118.5"></div><div class="hour-block hour-select-selected" data-offset="142.5"></div><div class="hour-block hour-select-selected" data-offset="166.5"></div></td></tr><tr data-hour-marker="23"><td class="small">23:00</td><td class="major" data-hour="23"><div class="hour-block" data-offset="23"></div><div class="hour-block hour-select-selected" data-offset="47"></div><div class="hour-block hour-select-mod-del" data-offset="71"></div><div class="hour-block" data-offset="95"></div><div class="hour-block" data-offset="119"></div><div class="hour-block hour-select-selected" data-offset="143"></div><div class="hour-block hour-select-selected" data-offset="167"></div></td></tr><tr data-hour-marker="23"><td class="small"></td><td class="minor" data-hour="23.5"><div class="hour-block" data-offset="23.5"></div><div class="hour-block hour-select-selected" data-offset="47.5"></div><div class="hour-block hour-select-mod-del" data-offset="71.5"></div><div class="hour-block" data-offset="95.5"></div><div class="hour-block" data-offset="119.5"></div><div class="hour-block hour-select-selected" data-offset="143.5"></div><div class="hour-block hour-select-selected" data-offset="167.5"></div></td></tr></tbody></table></div><div class="bottom" notranslate=""><table><tbody><tr><td class="small" ng-bind="$timezone"></td><td ng-repeat="day in $daysOfWeek" ng-bind="day|moment:\'MMM MM/DD\'" ng-class="{today:$first}"></td></tr></tbody></table></div><div class="no-events">No sessions available for this week</div></div></div>'),
a.put("/views/kp/calendar.old.html",'<div class="loading-layout"><kp-loading indicator="weeks"></kp-loading><div ng-hide="!weeks" class="row" style="padding: 0px 0px 20px"><div class="col-xs-2 text-left"><a href="" ng-show="!disablePrev" ng-click="onPrevWeek()"><i class="fa fa-chevron-left"></i></a></div><div class="col-xs-8 text-center"><strong>{{ rangeOfDay }}</strong></div><div class="col-xs-2 text-right"><a href="" ng-click="onNextWeek()"><i class="fa fa-chevron-right"></i></a></div></div><table class="table table-bordered no-margin-b" ng-hide="!weeks"><thead><tr><th width="14%" bgcolor="#efefef" class="text-center" ng-repeat="day in weeks"><strong ng-bind="day.w"></strong><br><span class="" ng-bind="i18n(day.d)"></span></th></tr></thead><tbody><tr><td class="" valign="top" ng-repeat="day in weeks"><div ng-if="!isAM"><ul class="list-unstyled text-center"><li title="{{ day.d+\' \'+hour }}" ng-init="item={day:day.d,time:hour,id:$id}" ng-class="isValidDate(item)" data-value="{{ day.d+\' \'+hour }}" ng-repeat="hour in day[\'hm_s\']" ng-bind="hour" ng-click="select($event,item)"></li></ul></div><div ng-if="isAM"><ul class="list-unstyled text-center"><li style="display: block;cursor: inherit" ng-bind="calendar.constants.am"></li><li title="{{ day.d+\' \'+hour}}" ng-init="item={day:day.d,time:hour,id:$id}" ng-class="isValidDate(item)" data-value="{{ day.d+\' \'+hour }}" ng-repeat="hour in day[\'hm_s\']|isAMTimeStr" ng-bind="hour" ng-click="select($event,item)"></li></ul><ul class="list-unstyled text-center"><li style="display: block;cursor: inherit" ng-bind="calendar.constants.pm"></li><li title="{{ day.d+\' \'+hour}}" ng-init="item={day:day.d,time:hour,id:$id}" ng-class="isValidDate(item)" data-value="{{ day.d+\' \'+hour }}" ng-repeat="hour in day[\'hm_s\']|isAMTimeStr:false" ng-bind="hour|toAMTimeStr" ng-click="select($event,item)"></li></ul></div></td></tr></tbody></table></div>'),a.put("/views/kp/instant.alert.list.html",'<div class="it-alert instant-lesson-alert-list" style="z-index: 9998"><div ng-repeat="item in items|kpInstantMobileCollectionFilter track by item.id"><div ng-switch="item.type"><div ng-switch-when="new"><div class="single new-request" ng-class="{\'is-student\':item.isStudent}"><div class="row"><div class="col-xs-3"><p><img class="rounded" ng-src="{{ item.user|avatar }}" style="width: 100%" kp-fallback-avatar></p><kp-countdown end="{{item.end }}"></kp-countdown></div><div class="col-xs-9"><a class="close" ng-click="close(item)">&times;</a><p ng-if="!item.isStudent">{{ \'TS901\'|t|format:item.user.nickname }}</p><p ng-if="item.isStudent" translate="TS900"></p><a ng-click="navToSessionDetail(item)"><button class="btn" translate="KP268"></button></a></div></div></div></div><div ng-switch-when="suspended"><div class="single bg-danger suspended"><div class="row"><div class="col-md-12"><a class="close" ng-click="close(item)">&times;</a> {{ \'TS908\'|t }} <a href="http://support.italki.com/entries/23395239-Why-are-my-Instant-Tutoring-privileges-suspended-andhow-can-I-get-my-Instant-Tutoring-privileges-ba" target="_blank" translate="C0171"></a></div></div></div></div><div ng-switch-when="accepted" ng-class="{\'is-student\':item.isStudent}"><div class="single bg-danger accepted"><div class="row"><div class="col-md-12"><a class="close" ng-click="close(item)">&times;</a> {{ \'TS907\'|t }} <a ng-click="navToSessionDetail(item)" translate="KP268"></a></div></div></div></div><div ng-switch-when="timeout"><div class="single bg-danger timeout"><div class="row"><div class="col-md-12" ng-if="!item.isStudent"><a class="close" ng-click="close(item)">&times;</a> {{ \'TS904\'|t }} {{ \'TS909\'|t }} {{ \'TS910\'|t }}</div><div class="col-md-12" ng-if="item.isStudent"><a class="close" ng-click="close(item)">&times;</a> {{ \'TS906\'|t }}</div></div></div></div><div ng-switch-when="canceledBySystem"><div class="single bg-danger cancel"><div class="row"><div class="col-md-12"><a class="close" ng-click="close(item)">&times;</a> {{\'KP269\'|t}} <a ng-click="navToSessionDetail(item)" translate="KP268"></a></div></div></div></div><div ng-switch-when="followUp"><div class="single bg-danger follow-up"><div class="row"><div class="col-md-12"><a class="close" ng-click="close(item)">&times;</a> {{ \'TS902\'|t }}</div></div></div></div><div ng-switch-when="canceled" ng-class="{\'is-student\':item.isStudent}"><div class="single bg-danger canceled" ng-click="click(item);"><div class="row"><div class="col-md-12"><a class="close" ng-click="close(item)">&times;</a> {{ (item.isStudent?\'TS906\':\'TS905\')|t}} <a ng-click="navToSessionDetail(item)" translate="KP268"></a></div></div></div></div><div ng-switch-when="deleted"></div></div></div></div>'),a.put("/views/kp/lession.card.html",'<div class="popover-content"><h4 class="no-margin-t">Notice</h4><div><div ng-if="lessionInfo.flag==1"><p>You can schedule:</p><span class="label" ng-class="{\'label-success\':lessionInfo.times>=1}">30 minutes</span> <span class="label" ng-class="{\'label-success\':lessionInfo.times>=2}">60 minutes</span> <span class="label" ng-class="{\'label-success\':lessionInfo.times>=3}">90 minutes</span></div><div style="width: 100%" ng-if="lessionInfo.flag==3">{{\'TP369\'|t}}</div><div style="width: 100%" ng-if="lessionInfo.flag==4">{{\'TS220\'|t}}</div><div style="width: 100%" ng-if="lessionInfo.flag==8">{{\'TP367\'|t}}</div></div></div>'),a.put("/views/kp/loadmore.btn.html",'<button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button>'),a.put("/views/kp/message.html",'<header><h2>{{\'C0079\'|t}}</h2></header><div><ul class="send-message-list"><li ng-repeat="message in messages track by message.id"></li></ul><div class="send-message-action-container"><form action=""><textarea maxlength="1800" placeholder="message body" ng-model="pendingMessage.body">\n      </textarea><button class="btn btn-primary">{{\'C0047\'|t}}</button></form></div></div>'),a.put("/views/kp/modal.window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal" modal-animation-class="fade" modal-in-class="in" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)"><div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div ng-click="$parent.$dismiss();" class="instant-tips"><div kp-instant-modal-tips><div class="alert alert-warning" style="margin-bottom: 0" ng-if="hasNewInstantRequest()"><p ng-click="navToSessionDetail();" translate="KP267"></p></div></div></div><div class="modal-content" modal-transclude></div></div></div>'),a.put("/views/kp/search.user.typeahead.html",'<a><img ng-src="{{ match.model|avatar }}" width="16"> <span bind-html-unsafe="match.model.nickname | typeaheadHighlight:query"></span></a>'),a.put("/views/kp/upload.video.html",'<style>.share-icon{\n    margin-right: 10px;\n    width: 20px;\n    position: absolute;"\n  }\n\n\n  .pickfiles {\n    position: relative;\n  }\n\n\n  .pickfiles {\n    width: 60%;\n    height: 160px;\n    min-width: 230px;\n    margin: 0 auto;\n    cursor: pointer;\n    position: relative;\n    border: 3px dashed #ddd;\n    border-radius: 3px;\n    vertical-align: middle;\n    -webkit-transition: all .2s;\n    transition: all .2s;\n  }\n\n  .progress-bar {\n    width: 100%;\n    height: 13px;\n    background: #EDEDED;\n    border-width: 0 !important;\n  }\n\n  .upload-text{\n    width: 100%;\n    line-height: 160px;\n  }\n\n  .hide-input{\n    width: 100%;\n    height:  100%;\n    filter:alpha(opacity=0); /* IE */\n    -moz-opacity: 0; /* 老版Mozilla */\n    -khtml-opacity:0; /* 老版Safari */\n    opacity: 0; /* 支持opacity的浏览器*/\n  }\n\n  .abort-btn{\n    width: 25px;\n    height: 25px;\n    background-color: #fff;\n    background-image: url(/static/images/icons/close_icon.svg);\n    border: none;\n    background-repeat: no-repeat;\n  }\n\n  .remove-btn{\n    background: none;\n    border: none;\n    padding: 0;\n  }\n\n  .change-btn{\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n\n  .change-btn input{\n    top: 0;\n  }\n\n  .upload-detail{\n    margin-top: 10px;\n  }\n\n  .error-color{\n    color: #ff0000 !important;\n  }\n\n  .teacher-upload-panel .fa-exclamation-circle{\n    font-size: 28px;\n    color: #ff0000 !important;\n  }\n\n  .teacher-upload-panel .fa-check-circle{\n    font-size: 28px;\n    color: #5EBD5E !important;\n  }\n\n  .video-wrapper {\n    position: relative;\n  }\n\n  .video-wrapper > video {\n    width: 100%;\n    vertical-align: middle;\n  }\n\n  .video-wrapper > video.has-media-controls-hidden::-webkit-media-controls {\n    display: none;\n  }\n\n  .video-overlay-play-button {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    padding: 10px calc(50% - 50px);\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    opacity: 0.95;\n    cursor: pointer;\n    background-image: linear-gradient(transparent, rgba(90, 90, 90, 0.8));\n    transition: opacity 150ms;\n  }\n\n  .video-overlay-play-button:hover {\n    opacity: 1;\n  }\n\n  .video-overlay-play-button.is-hidden {\n    display: none;\n  }\n\n  @media (min-width: 768px){\n    .video-row{\n      padding-left: 30px;\n    }\n\n    .share-text{\n      margin-left: 30px;\n    }\n  }\n\n  @media (max-width: 767px){\n    .share-icon{\n      display: none;\n    }\n  }</style><div class="row"><div class="col-sm-9"><div ng-hide="video.have"><div ng-show="video.uploadBtn"><div class="pickfiles text-center is-relative"><div class="is-absolute upload-text text-lb"><a>+ {{\'ST605\'|t}}</a></div><input type="file" class="form-control hide-input" ng-file-select ng-model="files" ng-change="uploadVideo(files,\'0\')"></div><p ng-show="video.maxSizeError" class="error-color">{{\'ST613\'|t}}</p><p ng-show="status==3" class="error-color">{{\'ST615\'|t}}</p></div><div ng-hide="video.uploadBtn"><div ng-hide="uploadSuccess"><p class="clearfix"><span>{{data.name}} {{data.size}}</span></p><div class="progress" style="margin-bottom: 10px"><div class="progress-bar" ng-style="{\'width\': progress+\'%\',\'background-color\':(errorUpload?\'#ff0000\':\'#5EBD5E\')}"></div></div><div class="text-right" ng-show="progressVisible">{{\'ST611\'|t|format:progress}}</div><div ng-hide="progressVisible"><div class="text-center"><i ng-show="errorUpload" class="fa fa-exclamation-circle" aria-hidden="true"></i> <i ng-show="nowUploadSuccess" class="fa fa-check-circle" aria-hidden="true"></i><p class="upload-detail" ng-bind-html="data.detail|t"></p></div><div class="is-relative change-btn text-lb" ng-show="errorUpload"><a>+ {{\'ST606\'|t}}</a> <input type="file" class="form-control is-absolute hide-input" ng-file-select ng-show="errorUpload" data-label="<i class=\'glyphicon glyphicon-circle-arrow-up\'></i>  选择文件" ng-model="files" ng-change="uploadVideo(files,\'1\')"></div></div></div><div class="text-center" ng-show="uploadSuccess"><i class="fa fa-check-circle" aria-hidden="true"></i><p class="upload-detail">{{data.detail|t}}</p></div></div></div><div ng-show="video.have"><div ng-if="video.url" class="video-wrapper" kp-landing-intro-video thumbnail="video.thumbnail"><video ng-src="{{video.url}}" id="videoPoster"></video></div><br><div class="is-relative change-btn text-lb"><a>+ {{\'ST606\'|t}}</a> <input type="file" class="is-absolute hide-input file inline uploadInput uploadVideo" ng-file-select data-label="<i class=\'glyphicon glyphicon-circle-arrow-up\'></i>  选择文件" ng-model="files" ng-change="uploadVideo(files,\'2\')"></div><div ng-if="!showCol3"><a><button class="remove-btn text-lb" ng-click="delVideo(video_id)">- {{\'ST607\'|t}}</button></a></div></div></div><div class="col-sm-3 text-right" ng-show="video.have && showCol3"><span ng-switch="status"><label class="label label-warning" ng-switch-when="4">{{\'ST196\'|t}}</label><label class="label label-success" ng-switch-when="5">{{\'ST127\'|t}}</label><label class="label label-success" ng-switch-when="6">{{\'ST127\'|t}}</label><label class="label label-danger" ng-switch-when="7">{{\'ST039\'|t}}</label></span></div></div>'),a.put("/views/kp/user.card.html",'<div class="popover-content"><h4 class="no-margin-t"><ul class="media-heading list-inline"><li>{{user.nickname}}</li><li><i class="text-lg" ng-class="user.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(user.origin_country_id|t)}}" style="width: 1em"></i></li><li ng-if="user.is_pro"><i class="fa fa-ii-tutor color-pro" title="{{\'C0200\'|t}}"></i></li><li ng-if="!user.is_pro && user.is_tutor"><i class="fa fa-ii-tutor color-tutor" title="{{\'C0201\'|t}}"></i></li><i class="fa fa-ii-premium color-premuim" ng-if="user.is_premium && !user.is_pro && !user.is_tutor" title="{{\'PU009\'|t}}"></i><li ng-if="badgeDisplay != false  && user.exam_result_shown_obj != null && user.exam_result_shown_obj.status!=2"><a class="fa fa-ii-oopt" style="color: #94B004" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></li></ul></h4><ul class="list-inline m-r-3"><li ng-repeat="item in user.language_obj_s|orderBy:\'level\':true">{{item.language|t}}<span class="l-level l-level{{item.level}}" title="{{item.level|kpLanguageLevel}}"></span><span ng-hide="$last">,</span></li></ul><ul class="list-inline m-r-3" ng-if="(user.is_pro||user.is_tutor)&&(user.language_obj_s|filter:{is_teaching:1}).length>0"><li>{{\'C0118\'|t}}:</li><li ng-repeat="item in user.language_obj_s|filter:{is_teaching:1}|orderBy:\'level\':true">{{item.language|t}}<span ng-hide="$last">,</span></li></ul><ul class="list-inline m-r-3" ng-if="(user.language_obj_s|filter:{is_learning:1}).length>0"><li>{{\'C0007\'|t}}:</li><li ng-repeat="item in user.language_obj_s|filter:{is_learning:1}|orderBy:\'level\':true">{{item.language|t}}<span ng-hide="$last">,</span></li></ul><div class="popover-footer" ng-if="currentUser&&(currentUser.id!=user.id)&&!user.is_blockee"><ul class="list-inline"><li onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="user.is_friend" ng-click="deleteFriend()"><span class="badge badge-dark-gray yes-cursor" style="padding: 4px 4px;border-radius: 9999px;color: #fff" title="{{\'CT008\'|t}}"><i class="fa fa-user-times"></i></span></li><li onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="user.allow_send_friend_request" ng-click="removeCacheUser()" kp-add-friend-request receiver-id="user.id"><span class="badge badge-success yes-cursor" style="padding: 4px 4px;border-radius: 9999px;color: #fff" title="{{\'CT101\'|t}}"><i class="fa fa-user-plus"></i></span></li><li onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="(user.is_pro||user.is_tutor)&&!user.has_contacted" ng-click="contactWithUC()"><span class="badge badge-dark-gray yes-cursor" style="padding: 4px 5px;border-radius: 9999px;color: #fff" title="{{\'TP126\'|t}}"><i class="fa fa-envelope"></i></span></li><li onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-click="chatWithUC()" ng-if="(!user.is_pro&&!user.is_tutor&&user.allow_message)||user.has_contacted"><span class="badge badge-dark-gray yes-cursor" style="padding: 4px 5px;border-radius: 9999px;color: #fff" title="{{\'ML100\'|t}}"><i class="fa fa-envelope"></i></span></li><li onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="giftcardToUser({id:user.id})"><span class="badge badge-dark-gray yes-cursor" style="padding: 4px 7px;border-radius: 9999px;color: #fff" title="{{\'M0117\'|t}}"><i class="fa fa-gift"></i></span></li></ul><p ng-if="user.has_friend_requested">{{\'CT007\'|t}}&nbsp;<a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="contacts.partner">{{\'C0060\'|t}}</a></p><p><button onclick="event.stopPropagation()||(event.cancelBubble = true)" class="btn btn-primary btn-sm btn-block" pag-state="userCard" italki-click-test teacher="user" ng-if="(user.is_pro||user.is_tutor)&&user.allow_schedule">{{\'TS108\'|t}}</button></p></div></div>'),a.put("/views/languagechallenge/challenge.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'"></div><link href="https://fonts.googleapis.com/css?family=Walter+Turncoat" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet"><script type="text/javascript">var addthis_config = {\n    "data_track_addressbar": false,\n    "data_track_clickback": false,\n    "data_ga_property": \'UA-1200794-24\',\n    "data_ga_social": true\n  };</script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=italkicom"></script><kp-facebook-open-graph></kp-facebook-open-graph><kp-lc-loading indicator="lanData"></kp-lc-loading><div ng-switch="lanData.template_name" style="background: #ffffff"><div ng-switch-when="1"><kp-language-challenge1 lan-data="lanData"></kp-language-challenge1></div><div ng-switch-when="1b"><kp-language-challenge1b lan-data="lanData"></kp-language-challenge1b></div><div ng-switch-when="2"><kp-language-challenge2 lan-data="lanData"></kp-language-challenge2></div><div ng-switch-when="2b"><kp-language-challenge2b lan-data="lanData"></kp-language-challenge2b></div><div ng-switch-when="3"><kp-language-challenge3 has-subscribed="lanData.has_subscribe" lan-data="lanData"></kp-language-challenge3><kp-language-challenge3a lan-data="lanData"></kp-language-challenge3a></div><div ng-switch-when="3b1"><kp-language-challenge3b1 lan-data="lanData"></kp-language-challenge3b1></div><div ng-switch-when="3b2"><kp-language-challenge3b2 lan-data="lanData"></kp-language-challenge3b2></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/languagechallenge/count.time.down.html",'<div class="timer text-left" style="padding-top:10px"><p ng-if="showTwo">{{\'LC085\'|t}}: {{myInfo.completed_minutes/60}} hours<br>{{\'LC086\'|t}}: {{myInfo.rank}} of {{myInfo.count_user}}</p><p ng-if="!showTwo">{{\'LC043\'|t}}</p><div class="days-wrapper" style="margin-left: 3px"><p style="margin: 0px"><span class="days" ng-if="showObect.days>=10">{{showObect.days}}</span> <span class="days" ng-if="showObect.days<10">0{{showObect.days}}</span></p><span style="font-family: \'Roboto Slab\', serif">{{\'LC044\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="hours-wrapper"><p style="margin: 0px"><span class="hours" ng-if="showObect.hours>=10">{{showObect.hours}}</span> <span class="hours" ng-if="showObect.hours<10">0{{showObect.hours}}</span></p><span style="font-family: \'Roboto Slab\', serif">{{\'LC010\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="minutes-wrapper"><p style="margin: 0px"><span class="minutes" ng-if="showObect.minutes>=10">{{showObect.minutes}}</span> <span class="minutes" ng-if="showObect.minutes<10">0{{showObect.minutes}}</span></p><span style="font-family: \'Roboto Slab\', serif">{{\'LC045\'|t}}</span></div><div class="remain" ng-if="showTwo">{{\'LC087\'|t}}</div></div>'),a.put("/views/languagechallenge/count.time.down.new.html",'<div class="clearfix" style="display: inline-block"><style>.timer{\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      margin-bottom: 40px;\n    }\n    .timer > * {\n      width: 85px;\n      height: 62px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n      flex-direction: column;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      padding: 10px;\n      font-size: 26px;\n      border: 1px solid #fff;\n      color: #fff;\n      z-index: 1;\n      -webkit-transform-style: preserve-3d;\n      transform-style: preserve-3d;\n    }\n\n    /*.timer-1 > *:not(:last-child) {*/\n      /*margin-right: 10px;*/\n    /*}*/\n\n    .timer :first-child {\n      border-top-left-radius: 33px;\n      border-bottom-left-radius: 33px;\n      border-right: 0px;\n    }\n\n\n    .timer :last-child {\n      border-top-right-radius: 33px;\n      border-bottom-right-radius: 33px;\n      border-left: 0px;\n    }\n\n    .timer > *.flip {\n      -webkit-animation: flip 999ms ease infinite;\n      animation: flip 999ms ease infinite;\n    }\n\n    .timer > *:after {\n      position: absolute;\n      bottom: -35px;\n      font-size: 14px;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n\n    .d:after {\n      content: \'{{\'LC044\'|t}}\';\n    }\n\n    .h:after {\n      content: \'{{\'LC010\'|t}}\';\n    }\n\n    .m:after {\n      content: \'{{\'LC045\'|t}}\';\n    }\n\n    .timer-title{\n      color: #fff;\n      margin-bottom: 20px;\n    }\n\n    @media (max-width: 480px){\n      .timer-title{\n        text-align: center;\n      }\n    }</style><p class="timer-title">{{\'LC341\'|t}}:</p><div class="timer"><div class="d"><span ng-if="showObect.days>=10">{{showObect.days}}</span> <span ng-if="showObect.days<10">0{{showObect.days}}</span></div><div class="h"><span ng-if="showObect.hours>=10">{{showObect.hours}}</span> <span ng-if="showObect.hours<10">0{{showObect.hours}}</span></div><div class="m"><span ng-if="showObect.minutes>=10">{{showObect.minutes}}</span> <span ng-if="showObect.minutes<10">0{{showObect.minutes}}</span></div></div></div>'),a.put("/views/languagechallenge/cover.layer.html",'<div><div class="modal-header text-bg">Language Challenge <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button></div><div class="modal-body" id="bootstrap_Message_Message"><div class="modal-bodyp"><div><h5>{{\'LC037\'|t}}</h5></div><ng-form name="Form1"><div class="has-feedback form-group"><input type="password" placeholder="{{\'ST229\'|translate}}" class="form-control" ng-model="pwd" ng-change="perror=1" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-if="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span> <span ng-if="!perror&&error&&error.type==\'incorrect_password\'" class="help-block" ng-bind="error.msg"></span></ng-form></div></div><div class="modal-footer"><div class="text-right"><button class="btn btn-primary with-spinner" italki-click-with-spinner="submit(Form1)" stext="LC002"></button></div></div></div>'),a.put("/views/languagechallenge/language.challenge.leaderboard.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'"></div><div class="container no-padding-hr lc lc-1b lc-2b lc-2 company" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow\n     }" autoscroll><div class="board-container" style="padding-bottom: 30px; background: #fff"><div class="container" style="max-width: 866px; padding-top: 30px"><a class="go-back-btn" href="/languagechallenge">{{\'C0076\'|t}}</a><div class="row board-row" style="margin-top: 20px"><div class="col-xs-12 no-padding"><div class="board-title">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry" class="trackBtnClick"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage" class="trackBtnClick"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix text-right">{{\'LC384\'|t}}</div></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div><style>.pointer{\n    cursor: pointer;\n  }\n\n  .pointer:hover{\n    color: #23527c;\n  }\n\n\n\n  .board-container{\n    color: #3f3f3f;\n  }\n\n  .board-row{\n    margin: 0;\n    -webkit-box-shadow: 0 2px 5px 0 rgba(0,0,0,.16), 0 2px 10px 0 rgba(0,0,0,.12);\n    box-shadow: 0 2px 5px 0 rgba(0,0,0,.16), 0 2px 10px 0 rgba(0,0,0,.12);\n  }\n\n  .board-row .col-sm-5 ,.board-row .col-sm-7{\n    padding: 0;\n  }\n\n  .board-title{\n    font-size: 16px;\n    padding: 20px;\n    -webkit-box-shadow: 0 3px 10px 0px rgba(0,0,0,.12);\n    box-shadow: 0 3px 10px 0px rgba(0,0,0,.12);\n  }\n\n\n  .board-user-photo{\n    width: 25px;\n    margin-right: 10px;\n  }\n\n  .board-container .table > tbody > tr > td{\n    padding: 11px;\n  }\n\n  .my_rank{\n    background: #f2f2f2;\n  }\n\n  .board-container .board-text{\n    padding: 10px 20px 10px;\n    font-size: 14px;\n    border-top: 1px solid #ddd;\n  }\n\n  .view-more{\n    font-size: 14px;\n    color: #ff5859;\n  }\n\n  .filter-btn{\n    display: inline-block;\n    width: 15px;\n    height: 11px;\n    background: url(/static/images/languagechallenge/filter_icon.png) 50% 50%;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n\n  .filter-text{\n    color:#ff5859;\n  }\n\n  .filter-cover{\n    position: absolute;\n    width: 100%;\n    background: #FFF;\n    -webkit-box-shadow: 0 3px 10px 0px rgba(0,0,0,.12);\n    box-shadow: 0 3px 10px 0px rgba(0,0,0,.12);\n  }\n\n  .filter-option{\n    font-size: 14px;\n    padding: 12px 16px;\n    border-bottom: 1px solid #f3f3f3;\n    cursor: pointer;\n  }\n\n  .board-body{\n    min-height: 400px;\n  }\n\n  .board-body{\n    min-height: 400px;\n  }\n\n  .board-body .grid-1{\n    width: 20%;\n  }\n\n  .board-body .grid-2{\n    width: 50%;\n  }\n\n  .board-body .grid-3{\n    width: 30%;\n  }\n\n  .board-nick-cut{\n    display: none;\n  }\n\n\n  @media (max-width: 991px){\n    .board-body .grid-1{\n      width: 10%;\n    }\n\n    .board-body .grid-2{\n      width: 55%;\n    }\n\n    .board-body .grid-3{\n      width: 35%;\n    }\n\n    .board-nick{\n      display: none;\n    }\n\n    .board-nick-cut{\n      display: inline-block;\n    }\n  }\n\n  .go-back-btn{\n    border: 1px solid #ececec;\n    background: #ff5859;\n    color: #fff;\n    padding: 15px 40px;\n    border-radius: 30px;\n    display: inline-block;\n    font-size: 14px;\n    marign-bottom: 20px;\n  }\n\n  a.go-back-btn:hover{\n    color: #fff;\n  }</style>'),a.put("/views/languagechallenge/language.challenge1.html",'<div class="lc-1802"><div class="container no-padding-hr lc company" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center is-relative"><div class="page-container-responsive"><div class="middle-box-container"><div class="middle-box"><div class="banner1-text"><div class="text-lg text-slim">italki <span class="text-bold">New Year</span></div><div class="text-lg text-slim grid-gutter-margin-b">Language Challenge</div><div class="banner1-main"><p class="text-up">{{\'LC546\'|t}}</p><p>{{\'LC547\'|t}} {{\'LC548\'|t}}</p><p ng-bind-html="\'LC549\'|t|format:peopleNumber"></p><p><a class="join-btn text-up" lan-data="lanData" kp-cover-layer-request>{{\'LC038\'|t}}</a></p></div></div></div></div></div></div><div class="step-container"><div class="container no-padding-t"><div class="row text-center step-box"><h2 class="text-up">{{\'LC307\'|t}}</h2><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step1-icon"></div><p class="no-margin-t" ng-bind-html="\'LC423\'|t"></p></div></div><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step2-icon"></div><p class="no-margin-t">{{\'LC424\'|t}}</p></div></div><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step3-icon"></div><p class="no-margin-t">{{\'LC425\'|t}}</p></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center"><h2 class="text-up">{{\'LC311\'|t}}</h2><div class="badge-text center-block">{{\'LC426\'|t}}</div><div class="badge-wrap"><span class="badge-icon lc-12hr-badge"></span> <span class="badge-icon lc-16hr-badge"></span> <span class="badge-icon lc-19hr-badge"></span> <span class="badge-icon lc-20hr-badge"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge11.html",'<div class="container company no-padding-hr lc2016 lc-2" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="lc-bg-container text-center"><img class="lc-mb-logo" src="/static/images/lc_mb_logo.png"><div class="lc-bg-text text-center">{{\'LC000\'|t}}</div><a lan-data="lanData" kp-cover-layer-request class="lc-join-button lc-join-btn1 text-center text-up"><span>{{\'LC038\'|t}}</span></a></div><div class="step-container"><div class="container no-padding-t"><div class="row-wrapper grid-gutter-margin-b"><div class="row text-center step-box"><h3>{{\'LC001\'|t}}</h3><div class="col-sm-4"><div class="lc-step"><img class="lc-icon lc-icon-1" src="/static/images/lc_join_icon.png"><p class="text-lb" ng-bind-html="\'LC039\'|t"></p><hr class="red-devider"><p>{{\'LC003\'|t}}</p></div></div><div class="col-sm-4"><div class="lc-step"><img class="lc-icon lc-icon-1" src="/static/images/lc_take_icon.png"><p class="text-lb" ng-bind-html="\'LC004\'|t"></p><hr class="red-devider"><p>{{\'LC005\'|t}}</p></div></div><div class="col-sm-4"><div class="lc-step"><img class="lc-icon lc-icon-1" src="/static/images/lc_win_icon.png"><p class="text-lb" ng-bind-html="\'LC006\'|t"></p><hr class="red-devider"><p>{{\'LC007\'|t}}</p></div></div></div><div class="text-center last-text">{{\'LC008\'|t}}</div><div class="text-center"><a lan-data="lanData" kp-cover-layer-request class="lc-join-button lc-join-btn2 text-center text-up"><span>{{\'LC038\'|t}}</span></a></div></div></div></div><div class="goals-container"><div class="container no-padding-t"><div class="row-wrapper"><div class="row text-left"><div class="col-sm-4 left-box"><p class="text-up goals-title">{{\'LC009\'|t}}</p></div><div class="col-sm-8 right-box"><strong class="hrs-icon hrs-12">12 {{\'LC010\'|t}}</strong><p class="grid-gutter-margin-b">{{\'LC011\'|t}}</p><strong class="hrs-icon hrs-16">16 {{\'LC010\'|t}}</strong><p class="grid-gutter-margin-b">{{\'LC012\'|t}}</p><strong class="hrs-icon hrs-19">19 {{\'LC010\'|t}}</strong><p class="grid-gutter-margin-b" ng-bind-html="\'LC094\'|t"></p><strong class="hrs-icon hrs-20">20 {{\'LC010\'|t}}</strong><p>{{\'LC014\'|t}}</p></div></div></div></div></div><div class="testmonial-container"><div class="container no-padding-t"><div class="row-wrapper grid-gutter-margin-b"><h3 class="no-margin-t text-center color-white">{{\'LC040\'|t}}</h3><div class="row grid-gutter-margin-b"><div class="col-sm-4 text-center"><div class="bg-white"><img src="/static/images/lc_testmoinal_profile1.png"></div><div class="text-box text-left"><p class="grid-gutter-margin-b30">{{\'LC034\'|t}}</p><a class="color-red learn-more" href="http://stories.italki.com/story/1325" target="_blank">{{\'TC625\'|t}}</a></div></div><div class="col-sm-4 text-center"><div class="bg-white"><img src="/static/images/lc_testmoinal_profile2.png"></div><div class="text-box text-left"><p class="grid-gutter-margin-b30">{{\'LC035\'|t}}</p><a class="color-red learn-more" href="http://stories.italki.com/story/2296" target="_blank">{{\'TC625\'|t}}</a></div></div><div class="col-sm-4 text-center"><div class="bg-white"><img src="/static/images/lc_testmoinal_profile3.png"></div><div class="text-box text-left"><p class="grid-gutter-margin-b30">{{\'LC036\'|t}}</p><a class="color-red learn-more" href="http://stories.italki.com/story/2699" target="_blank">{{\'TC625\'|t}}</a></div></div></div><div class="text-center last-text">{{\'LC008\'|t}}</div><div class="text-center"><a lan-data="lanData" kp-cover-layer-request class="lc-join-button lc-join-btn2 text-center text-up"><span>{{\'LC038\'|t}}</span></a></div></div></div></div><div class="faq-container"><div class="container no-padding-t"><div class="row-wrapper grid-gutter-margin-b text-center"><div class="row"><div class="text-center grid-gutter-margin-b"><h2 class="no-margin-t">{{\'LC015\'|t}}</h2></div><div class="row"><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC016\'|t}}</strong></p><p>{{\'LC017\'|t}}</p></div></div><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC018\'|t}}</strong></p><p>{{\'LC019\'|t}}</p></div></div><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC020\'|t}}</strong></p><p>{{\'LC021\'|t}}</p></div></div></div><div class="row"><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC022\'|t}}</strong></p><p>{{\'LC023\'|t}}</p></div></div><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC024\'|t}}</strong></p><p>{{\'LC025\'|t}}</p></div></div><div class="col-sm-4 plr30 grid-gutter-margin-b"><div class="lc-faq"><p><strong>{{\'LC026\'|t}}</strong></p><p>{{\'LC027\'|t}}</p></div></div></div></div></div></div></div></div>'),
a.put("/views/languagechallenge/language.challenge1b.html",'<div class="lc-1802"><div class="container no-padding-hr lc company lc-2b" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center is-relative"><div class="page-container-responsive"><div class="middle-box-container"><div class="middle-box"><div class="banner1-text"><div class="text-lg text-slim">italki <span class="text-bold">New Year</span></div><div class="text-lg text-slim grid-gutter-margin-b">Language Challenge</div><div class="banner1-main"><p>{{\'RP410\'|t}} {{currentUser.nickname}}!</p><p class="text-bold">{{\'LC551\'|t}}</p><p>{{\'LC552\'|t}} {{\'LC553\'|t}}</p><p><a class="schedule-btn" href="/contacts/teacher">{{\'LC554\'|t}}</a></p><p ng-bind-html="\'LC549\'|t|format:peopleNumber"></p></div></div></div></div></div></div><div class="step-container"><div class="container no-padding-t"><div class="row text-center step-box"><h2 class="text-up">{{\'LC307\'|t}}</h2><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step1-icon"></div><p class="no-margin-t" ng-bind-html="\'LC423\'|t"></p></div></div><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step2-icon"></div><p class="no-margin-t">{{\'LC424\'|t}}</p></div></div><div class="col-sm-4"><div class="lc-step"><div class="lc-step-icon lc-step3-icon"></div><p class="no-margin-t">{{\'LC425\'|t}}</p></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center"><h2 class="text-up">{{\'LC311\'|t}}</h2><div class="badge-text center-block">{{\'LC426\'|t}}</div><div class="badge-wrap"><span class="badge-icon lc-12hr-badge"></span> <span class="badge-icon lc-16hr-badge"></span> <span class="badge-icon lc-19hr-badge"></span> <span class="badge-icon lc-20hr-badge"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge2.html",'<div class="lc-1802"><div class="container no-padding-hr lc company lc-2b lc-2" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center"><div class="banner-text-container"><div class="banner-title">italki <span class="text-bold">New Year</span></div><div class="banner-title margin-b30">Language Challenge</div><div class="margin-b40 text-bg" ng-bind-html="\'LC530\'|t"></div><a class="notify-btn btn btn-primary text-up" ng-if="!has_subscribe" italki-click-with-spinner="sumbitEmail(currentUser.email)" stext="LC531"></a><div class="col-sm-12 form-group text-center notify-help" ng-if="has_subscribe">{{\'LC096\'|t}}</div><div class="notify-text text-bg" style="margin-bottom: 100px" ng-bind-html="\'LC532\'|t"></div></div></div><div class="board-container"><div class="container"><div class="row board-row"><div class="col-xs-12 no-padding" style="margin-top: -64px"><div class="board-title bg-white">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><kp-no-found items="rankObj"></kp-no-found><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix">{{\'LC384\'|t}}<br><a class="view-more" italki-click-with-spinner="goAllRank()" id="LCLeaderboard" stext="LC383"></a></div></div></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge2b.html",'<div class="lc-1802"><div class="container no-padding-hr lc lc-2b" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center is-relative"><div class="page-container-responsive"><div class="middle-box-container"><div class="middle-box"><div class="banner1-text"><div class="banner-title">italki <span class="text-bold">New Year</span></div><div class="banner-title grid-gutter-margin-b">Language Challenge</div><kp-count-time-down-new class="clearfix"></kp-count-time-down-new><div class="margin-b40" style="margin-top: 30px" ng-bind-html="\'LC533\'|t"></div><div class="is-absolute social-share"><div class="twitter-share-btn trackBtnClick" ng-click="twitterShare($event)" id="LCTwitter1"></div><div ng-click="ctrl.facebookShare()" class="facebook-share-btn fb-btn trackBtnClick" id="LCFacebook1"></div></div></div></div></div><div class="banner-user-container text-left clearfix"><img class="rounded user-profile-img pull-left" ng-src="{{currentUser|avatar}}" kp-fallback-avatar> <span class="user-info-text pull-left"><span>{{\'LC526\'|t|format:my_info.completed_minutes/60}}</span><br><span>{{\'LC527\'|t|format:residueDay}}</span></span><div class="pull-right text-center goal-wrapper"><span>{{\'LC352\'|t}}:</span><br><div class="goal-number" style="text-transform: uppercase">{{\'LC332\'|t|format:userGoal}}</div></div></div></div></div><div class="calendar-ruler" style="margin-bottom: 80px"><div class="ruler"><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'01\'}"><span class="lg-calendar">1</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'02\'}"><span class="lg-calendar">2</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'03\'}"><span class="lg-calendar">3</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'04\'}"><span class="lg-calendar">4</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'05\'}"><span class="lg-calendar">5</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'06\'}"><span class="lg-calendar">6</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'07\'}"><span class="lg-calendar">7</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'08\'}"><span class="lg-calendar">8</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'09\'}"><span class="lg-calendar">9</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'10\'}"><span class="lg-calendar">10</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'11\'}"><span class="lg-calendar">11</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'12\'}"><span class="lg-calendar">12</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'13\'}"><span class="lg-calendar">13</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'14\'}"><span class="lg-calendar">14</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'15\'}"><span class="lg-calendar">15</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'16\'}"><span class="lg-calendar">16</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'17\'}"><span class="lg-calendar">17</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'18\'}"><span class="lg-calendar">18</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'19\'}"><span class="lg-calendar">19</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'20\'}"><span class="lg-calendar">20</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'21\'}"><span class="lg-calendar">21</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'22\'}"><span class="lg-calendar">22</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'23\'}"><span class="lg-calendar">23</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'24\'}"><span class="lg-calendar">24</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'25\'}"><span class="lg-calendar">25</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'26\'}"><span class="lg-calendar">26</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'27\'}"><span class="lg-calendar">27</span><span class="dot sm-calendar"></span></div><div class="mm" ng-class="{\'date-selected\':getMonthDay==\'28\'}"><span class="lg-calendar">28</span><span class="dot sm-calendar"></span></div></div></div><div class="rank-container" style="margin-bottom: 100px"><div class="container is-relative"><div class="progress-wrapper" id="progress"><div ng-class="{progress: true}" class="no-margin-b"><div ng-class="[\'progress-color\', progressMyCompleted>0?\'gradient-bar\':\'\']" ng-style="{width:progressMyCompleted + \'%\'}"><div class="is-relative">&nbsp;</div></div><div class="timeline-circle-first is-absolute"><span class="timeline-inner-circle-first"></span></div><div class="timeline-circle-last is-absolute" ng-if="progressMyCompleted>0" ng-style="{left:progressMyCompleted+\'%\'}"><span class="timeline-inner-circle-last"></span></div><div class="timeline-circle-first hr12 is-absolute" ng-show="my_info.completed_minutes/60>12"><span class="timeline-inner-circle-first"></span></div><div class="timeline-circle-first hr16 is-absolute" ng-show="my_info.completed_minutes/60>16"><span class="timeline-inner-circle-first"></span></div><div class="timeline-circle-first hr19 is-absolute" ng-show="my_info.completed_minutes/60>19"><span class="timeline-inner-circle-first"></span></div><div class="timeline-circle-first hr20 is-absolute" ng-show="my_info.completed_minutes/60>20"><span class="timeline-inner-circle-first"></span></div><div class="timeline-dot hr12 is-absolute" ng-show="my_info.completed_minutes/60<12"></div><div class="timeline-dot hr16 is-absolute" ng-show="my_info.completed_minutes/60<16"></div><div class="timeline-dot hr19 is-absolute" ng-show="my_info.completed_minutes/60<19"></div><div class="timeline-dot hr20 is-absolute" ng-show="my_info.completed_minutes/60<20"></div><div class="timeline-dot hr200 is-absolute"></div><div class="timeline-hour hr1 is-absolute"><span>0</span></div><div class="timeline-hour hr12 is-absolute"><span>12</span></div><div class="timeline-hour hr16 is-absolute"><span>16</span></div><div class="timeline-hour hr19 is-absolute"><span>19</span></div><div class="timeline-hour hr20 is-absolute"><span>20</span></div></div></div><p class="is-absolute hour-unit">{{\'LC362\'|t}}</p></div></div><div class="board-container margin-b30"><div class="container"><div class="row board-row"><div class="col-xs-12 no-padding"><div class="board-title bg-white">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><kp-no-found items="rankObj"></kp-no-found><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix">{{\'LC384\'|t}}<br><a class="view-more" italki-click-with-spinner="goAllRank()" id="LCLeaderboard" stext="LC383"></a></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center"><h2 class="text-up">{{\'LC311\'|t}}</h2><div class="badge-text center-block">{{\'LC426\'|t}}</div><div class="badge-wrap"><span class="badge-icon lc-12hr-badge"></span> <span class="badge-icon lc-16hr-badge"></span> <span class="badge-icon lc-19hr-badge"></span> <span class="badge-icon lc-20hr-badge"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge3.html",'<div class="lc-1802"><div class="container no-padding-hr lc company lc-2b lc-2" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center"><div class="banner-text-container"><div class="banner-title">italki <span class="text-bold">New Year</span></div><div class="banner-title margin-b30">Language Challenge</div><div class="margin-b40 text-bg"><div>{{\'LC407\'|t}}</div><div>{{\'LC564\'|t}}</div></div><a class="notify-btn btn btn-primary text-up" ng-if="!has_subscribe" italki-click-with-spinner="sumbitEmail(currentUser.email)" stext="LC542"></a><div class="col-sm-12 form-group text-center notify-help" ng-if="has_subscribe">{{\'LC096\'|t}}</div><div class="notify-text text-bg" style="margin-bottom: 100px" ng-bind-html="\'LC565\'|t"></div></div></div><div class="board-container"><div class="container"><div class="row board-row"><div class="col-xs-12 no-padding" style="margin-top: -64px"><div class="board-title bg-white">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><kp-no-found items="rankObj"></kp-no-found><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix">{{\'LC384\'|t}}<br><a class="view-more" italki-click-with-spinner="goAllRank()" id="LCLeaderboard" stext="LC383"></a></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center"><h2 class="text-up">{{\'LC311\'|t}}</h2><div class="badge-text center-block">{{\'LC426\'|t}}</div><div class="badge-wrap"><span class="badge-icon lc-12hr-badge"></span> <span class="badge-icon lc-16hr-badge"></span> <span class="badge-icon lc-19hr-badge"></span> <span class="badge-icon lc-20hr-badge"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge3b1.html",'<div class="lc-1802"><div class="container no-padding-hr lc company lc-2b lc-2 lc-3" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center"><div class="banner-text-container"><div class="banner-title">italki <span class="text-bold">New Year</span></div><div class="banner-title margin-b30">Language Challenge</div><div class="text-bg banner-text">{{\'LC566\'|t|format:\'italki New Year Language Challenge\'}}<br>{{\'LC536\'|t}}<br><br>{{\'LC537\'|t}}</div></div></div><div class="board-container"><div class="container"><div class="row board-row"><div class="col-xs-12 no-padding" style="margin-top: -64px"><div class="board-title bg-white">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><kp-no-found items="rankObj"></kp-no-found><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix">{{\'LC384\'|t}}<br><a class="view-more" italki-click-with-spinner="goAllRank()" id="LCLeaderboard" stext="LC383"></a></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center"><h2 class="text-up">{{\'LC311\'|t}}</h2><div class="badge-text center-block">{{\'LC426\'|t}}</div><div class="badge-wrap"><span class="badge-icon lc-12hr-badge"></span> <span class="badge-icon lc-16hr-badge"></span> <span class="badge-icon lc-19hr-badge"></span> <span class="badge-icon lc-20hr-badge"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),a.put("/views/languagechallenge/language.challenge3b2.html",'<div class="lc-1802"><div class="container no-padding-hr lc company lc-2b lc-2 lc-3" ng-class="{unconfirm:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\']}" autoscroll><div class="fixed-center-container"><div class="lc-banner-container text-center"><div class="banner-text-container"><div class="banner-title">italki <span class="text-bold">New Year</span></div><div class="banner-title margin-b30">Language Challenge</div><div class="text-bg banner-text"><div>{{\'LC566\'|t|format:\'italki New Year Language Challenge\'}}<br>{{\'LC539\'|t}}<br><br>{{\'LC540\'|t}} {{\'LC541\'|t}}</div></div></div></div><div class="board-container"><div class="container"><div class="row board-row"><div class="col-xs-12 no-padding" style="margin-top: -64px"><div class="board-title bg-white">{{\'LC031\'|t}} <span class="pull-right filter-text" ng-click="openFilter()">{{\'VC419\'|t}}<span class="filter-btn"></span></span></div><div class="filter-cover" ng-show="open"><div class="filter-option" ng-click="allFilter()">{{\'LC359\'|t}}</div><div class="filter-option no-padding"><ui-select ng-model="uiItems" theme="bootstrap" on-select="countryFilter($item, $model)" id="LCCountry"><ui-select-match placeholder="{{\'LC360\'|t}}"><span>{{\'LC360\'|t}}</span> <span ng-show="filter.top_country_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="ct in leaderboardCountry | propsFilter: {v: $select.search}"><div ng-bind-html="(ct.v?ct.v:ct.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filter-option no-padding no-border"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="languageFilter($item, $model)" id="LCLanguage"><ui-select-match placeholder="{{\'LC128\'|t}}"><span>{{\'LC128\'|t}}</span> <span ng-show="filter.top_language_list" ng-bind-html="$select.selected.v?\':&nbsp;<strong>\'+($select.selected.v|t)+\'</strong>\':\'\'"></span></ui-select-match><ui-select-choices repeat="lan in leaderboardLan | propsFilter: {v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="board-body"><kp-no-found items="rankObj"></kp-no-found><table class="table no-margin-b" ng-repeat="rank in rankObj"><tr ng-class="{\'my_rank\':rank.is_self}"><td class="text-center grid-1">{{rank.rank}}</td><td class="grid-2"><img class="rounded board-user-photo pointer" ng-src="{{rank.avatar_file_name|avatar}}" kp-fallback-avatar ui-sref="user({id:rank.id})"> <span class="board-nick pointer" ui-sref="user({id:rank.id})">{{rank.nickname}}</span> <span class="board-nick-cut pointer" ui-sref="user({id:rank.id})">{{rank.nickname|cut:true:10:\' ...\'}}</span></td><td class="text-center grid-3"><span ng-show="(item.completed_minutes/60)==1">{{\'PM355\'|t}}</span> <span ng-show="(item.completed_minutes/60)!=1">{{\'PM356\'|t|format:rank.completed_minutes/60}}</span></td></tr></table></div><div class="board-text clearfix">{{\'LC384\'|t}}<br><a class="view-more" italki-click-with-spinner="goAllRank()" id="LCLeaderboard" stext="LC383"></a></div></div></div></div></div><div class="rewards-container no-margin-b"><div class="container no-padding-t text-center" style="max-width: 600px"><h2>{{\'LC311\'|t}}</h2><div class="badge-text center-block"><span ng-show="badgeHour>=12">{{\'LC543\'|t}}</span> <span ng-hide="badgeHour>=12">{{\'LC544\'|t}} {{\'LC545\'|t}}</span></div><div class="badge-wrap" ng-if="badgeHour>=12" style="margin-top: 30px"><span class="badge-icon lc-{{badgeHour}}hr-badge" style="margin: 0 auto"></span></div></div></div><div class="faq-container"><div class="container no-padding-t"><h2 class="text-center">FAQ</h2><div class="row faq-row"><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC374\'|t}}</p><p>{{\'LC375\'|t}}</p></div><div class="q-group"><p class="q-title">{{\'LC372\'|t}}</p><p>{{\'LC373\'|t}}</p></div></div><div class="col-sm-4"><div class="q-group"><p class="q-title">{{\'LC370\'|t}}</p><p>{{\'LC427\'|t}}</p><p class="q-title">{{\'LC428\'|t}}</p><p>{{\'LC429\'|t}}</p></div></div><div class="col-sm-4"><div class="margin-b20"><p class="q-title">{{\'LC376\'|t}}</p><p>{{\'LC377\'|t}}</p><p class="q-title">{{\'LC378\'|t}}</p><p>{{\'LC430\'|t}}</p></div></div></div></div></div></div></div></div>'),
a.put("/views/languagechallenge/language.video.html",'<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">2016 New Year Language Challenge</h4></div><div class="modal-body"><iframe frameborder="0" marginheight="0" marginwidth="0" src="https://www.youtube.com/embed/E3MRcAYwEHQ?rel=0&amp;modestbranding=1&amp;autohide=1&amp;showinfo=0&amp;controls=0" height="315" width="560"></iframe></div></div>'),a.put("/views/languagechallenge/language.video1.html",'<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" id="myModalLabel">2016 New Year Language Challenge</h4></div><div class="modal-body"><iframe frameborder="0" marginheight="0" marginwidth="0" src="https://www.youtube.com/embed/ulztdWx_050?rel=0&modestbranding=1&autohide=1&showinfo=0&controls=0" height="315" width="560"></iframe></div></div>'),a.put("/views/languagechallenge/more.info.html",'<style>@media (min-width: 768px) {\n  h3.margin-responsive {\n    margin-top: 0px !important;\n  }\n}\n\n@media (min-width: 480px) and (max-width: 767px){\n  h3.margin-responsive {\n    margin-top: 20px !important;\n  }\n}</style><div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">Lottery Terms and Conditions</h4></div><div class="modal-body"><p>This lottery is open to all participants in the italki Language Challenge except italki staff and all other related promotional partners.</p><p>The winner will be notified by email.</p><p>The prize must be claimed within one month of the date of drawing. All unclaimed prizes will be forfeited.</p><p>The date of the draw will be November 16th.</p><p>Customers are to abide by the rules and regulations stated by the organizer.</p><p>In case of dispute, the organizer’s decision is final and no correspondence will be entertained.</p><p>italki HK LTD reserves the right to amend the terms and conditions of or withdraw this lottery if required by the authorities.</p></div></div>'),a.put("/views/languagechallenge/pop.up.html",'<div class="modal-body goal-modal"><style>/*.lc-popup{*/\n    /*margin-left: auto;*/\n    /*margin-right: auto;*/\n    /*width: 650px;*/\n  /*}*/\n\n  .lc-popup h4{\n    font-weight: 400;\n  }\n\n  .lc-popup p+p{\n    margin-bottom: 40px;\n    /*max-width: 400px;*/\n    margin: 0 auto;\n  }\n\n\n  .lc-popup .list-inline > li{\n    padding: 0px 30px 10px 0px;\n  }\n\n  .goal-modal{\n    font-size: 14px;\n    color: #3b3b3b;\n    overflow-x: hidden;\n  }\n\n  .goal-circle h4{\n    font-size: 18px;\n  }\n\n  .goal-modal{\n    padding-top: 40px;\n    padding-bottom: 40px;\n  }\n\n  .goal-circle-group{\n    margin-top: 50px;\n    margin-bottom: 80px;\n  }\n\n  .goal-circle-btn{\n    border-radius: 50%;\n    width: 70px;\n    height: 70px;\n    border: none;\n    box-shadow: 0px 3px 20px rgba(0,0,0,0.2);\n    background: #FFF;\n    position: relative;\n    z-index:1;\n  }\n\n\n\n  .goal-circle-btn-selected{\n    background: radial-gradient(at 0px 0px,#ff776a,#ff453a);\n    transform: scale(1.2);\n    color: #fff;\n    box-shadow: 0px 8px 17px rgba(0,0,0,0.3);\n  }\n\n  .goal-circle-btn:focus{\n    outline: none;\n  }\n\n  .circle-shadow{\n    width: 260px;\n    height: 60px;\n    background: url(/static/images/languagechallenge/shadow.png) 35% 100%;\n    position: absolute;\n    margin-top: -27px;\n  }\n\n  .circle-shadow.hr12{\n    left: 28px;\n  }\n\n  .circle-shadow.hr16{\n    left: 132px;\n  }\n\n  .circle-shadow.hr19{\n    left: 235px;\n  }\n\n  .circle-shadow.hr20 {\n    left: 340px;\n  }\n\n\n\n  .circle-number{\n    font-size: 20px;\n  }\n\n  .cancel-btn{\n    width: 100%;\n    height: 60px;\n    line-height: 60px;\n    font-size: 20px;\n    color: #b8b8b8;\n    background: #eeeeee;\n    appearance: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    border:none;\n  }\n\n  .set-this-btn{\n    width: 100%;\n    height: 60px;\n    line-height: 60px;\n    font-size: 20px;\n    color: #fff;\n    appearance: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    border:none;\n    background: radial-gradient(at 0px 0px,#ff776a,#ff453a);\n  }\n\n  .set-this-btn-lg{\n    width: 100%;\n    height: 60px;\n    line-height: 60px;\n    font-size: 20px;\n    color: #fff;\n    appearance: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    border:none;\n    background: radial-gradient(at 0px 0px,#ff776a,#ff453a);\n  }\n\n  .cancel-btn:focus ,.set-this-btn:focus{\n    outline: none;\n  }\n\n  @media (max-width: 767px) and (min-width: 590px){\n    .goal-circle-group{\n      width: 590px;\n      margin: 50px auto 0;\n      position: relative;\n    }\n\n    .goal-text{\n      margin-top: 40px;\n    }\n  }\n\n  @media(max-width: 565px){\n\n    .lc-popup .list-inline > li{\n      padding: 0px 0px 10px 0px;\n    }\n\n    .circle-shadow.hr12 ,.circle-shadow.hr16 ,.circle-shadow.hr19 ,.circle-shadow.hr20{\n      left: 50%;\n      transform: translateX(-50%);\n      margin-top: -50px;\n      margin-left: 16px;\n    }\n\n    .goal-circle-group {\n      margin-top: 30px;\n      margin-bottom: 0px;\n    }\n\n    .goal-circle-btn {\n      margin-bottom: 20px;\n    }\n\n    .goal-circle-group li{\n      display: block;\n      margin-top: 10px;\n    }\n\n    .goal-circle-btn.selected + .goal-circle-btn{\n      margin-top: 50px;\n    }\n  }</style><div class="text-center lc-popup"><h4 class="no-margin-t">Hi, {{currentUser.nickname}}, {{\'LC556\'|t}}</h4><p style="margin-bottom: 15px">{{\'LC557\'|t}}</p><p>{{\'LC519\'|t}}</p><ul class="list-inline goal-circle-group"><li><button class="goal-circle-btn" ng-click="checked(\'12\')" ng-class="{\'goal-circle-btn-selected\':checkGoal==12}"><span class="circle-number">12</span> <span>hours</span></button><div class="circle-shadow hr12" ng-show="checkGoal==12"></div></li><li><button class="goal-circle-btn" ng-click="checked(\'16\')" ng-class="{\'goal-circle-btn-selected\':checkGoal==16}"><span class="circle-number">16</span><br>hours</button><div class="circle-shadow hr16" ng-show="checkGoal==16"></div></li><li><button class="goal-circle-btn" ng-click="checked(\'19\')" ng-class="{\'goal-circle-btn-selected\':checkGoal==19}"><span class="circle-number">19</span><br>hours</button><div class="circle-shadow hr19" ng-show="checkGoal==19"></div></li><li style="padding-right: 0"><button class="goal-circle-btn" ng-click="checked(\'20\')" ng-class="{\'goal-circle-btn-selected\':checkGoal==20}"><span class="circle-number">20</span><br>hours</button><div class="circle-shadow hr20" ng-show="checkGoal==20"></div></li></ul><p class="goal-text" ng-show="checkGoal==12">{{\'LC559\'|t|format:3}}</p><p class="goal-text" ng-show="checkGoal==16">{{\'LC559\'|t|format:4}}</p><p class="goal-text" ng-show="checkGoal==19">{{\'LC560\'|t|format:5}}</p><p class="goal-text" ng-show="checkGoal==20">{{\'LC559\'|t|format:5}}</p></div></div><button class="set-this-btn-lg text-up" ng-click="setGoal(checkGoal)">{{\'LC338\'|t}}</button>'),a.put("/views/main.html",'<kp-notify></kp-notify><ng-include src="\'/views/common/top.tpl.bs.html\'" id="top"></ng-include><div ui-view class="container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow}" autoscroll="false"></div><div ui-view="modal"></div><ng-include src="\'/views/common/bottom.bs.html\'"></ng-include>'),a.put("/views/message/modal.html","<style>.text{\n        color: #555;\n        opacity: .3;\n    }\n    .text:hover{\n        color: #555;\n            opacity:0.8;\n    }\n    .text:focus{\n       color: #555;\n\n    }</style><style>/**\n *  A few caveats with using z-index:\n *  It can only be used IFF position is defined to be relative, absolute or fixed.\n *  A stacking order is defined only if z-index is initialized.\n */\n.message-stacking {\n  position: relative;\n  z-index: 0;\n}\n\n.delete-single-message {\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  height: auto;\n  width: 150px;\n  z-index: 10;\n  position: absolute;\n  right: 0px;\n  margin-top: 20px;\n  padding: 5px;\n  background-color: white;\n  color: #333333;\n  font-family: 'PingFang SC', 'Roboto', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  display:none;\n}\n\n.delete-all-dropdown-parent {\n  z-index: 10;\n  position: absolute;\n  right: 10px;\n  top: 50%;\n}\n\n.delete-all-messages {\n  float: right;\n  position: relative !important;\n  margin-right: -10px !important;\n  text-align: left !important;\n}\n\n.delete-all-messages-dropdown {\n  top: 20px;\n  right: 10px;\n  margin-bottom: 10px;\n}\n\n.delete-single-message-span {\n  padding: 5px 15px;\n  margin: 0px -7px;\n  z-index: 10;\n}\n.delete-single-message-span:hover {\n  background-color: #FF433D;\n  color: white;\n}\n\n.delete-message-hide-dropdown {\n  display: none;\n}\n\n.delete-message-show-dropdown {\n  display: inline-block;\n}\n\n.bin-position-right {\n  margin-right: 14px !important;\n}\n\n.bottom-arrow-fix {\n  margin-top: -80px !important;\n}\n\n.bottom-arrow-fix:before {\n  border-bottom: none !important;\n  border-top-color: rgba(0, 0, 0, 0.15) !important;\n}\n\n.bottom-arrow-fix:after {\n  margin-top: -1px;\n}\n\n.change-wrap {\n  white-space: inherit !important;\n}\n\n.single-message-delete-arrow {\n  left: -140px !important;\n}\n.adjust-picture{\n  width: 100% !important;\n  height: auto !important;\n}\n.arrow-position-fix {\n  left: -150px !important;\n}\n.top-arrow-fix:before {\n  right: 2px !important;\n}\n.top-arrow-fix:after {\n  right: 3px !important;\n}\n.single-message-dropdown-downwards-fix:before {\n  border-top-color: rgba(0, 0, 0, 0.15);\n  border-bottom-color: transparent !important;\n}\n\n.single-message-dropdown-downwards-fix {\n  margin-top: -130px;\n}\n@media (min-width: 480px) and (max-width: 767px) {\n  .visible-phone{\n    display: inherit !important;\n  }\n"+'}</style><div class="modal-header" style="height: 50px"><button type="button" class="close" ng-click="$dismiss()">×</button> <a ng-if="ctrl.isList()" class="pull-right icon_com icon_markread" ng-click="ctrl.markAllAsRead()">&nbsp;</a> <button ng-if="ctrl.isList()" ng-click="ctrl.getToNew()" type="button" class="btn btn-sm btn-primary pull-right hidden-phone" style="margin-right: 15px"><span class="btn-txt">{{\'ML006\'|t}}</span></button><h4 class="modal-title" ng-if="ctrl.isNew()"><a href="javascript:void(0);" ng-click="ctrl.backToList()">{{\'ML001\'|t}}</a> <i class="fa fa-angle-right"></i> {{\'ML006\'|t}}</h4><h4 class="modal-title" translate="ML001" ng-if="ctrl.isList()"></h4><h4 class="modal-title text-center" ng-if="ctrl.isDetail()"><div dropdown class="delete-all-dropdown-parent" style="z-index: 100;right: 34px;top: 15px" all-messages-dropdown-orientation parent-container="\'.modal-dialog\'" child-container="\'.right\'"><a href="javascript:void(0);" class="text" style="display: inline-block;float: right;margin-right: 20px" ng-if="ctrl.isDetail()" dropdown-toggle><i class="fa fa-ellipsis-h"></i></a><ul class="dropdown-menu right delete-single-message delete-message-hide-dropdown"><li><a ng-click="ctrl.deleteChat(ctrl.metaForDetail.with_user_obj.id)">{{ "C0050"|translate }}</a></li><li><a kp-report-concerna ng-if="ctrl.metaForDetail.with_user_obj.id !=0 " report-item="{reportType:\'USR-MSG\',reportId:ctrl.metaForDetail.with_user_obj.id}">{{\'PB010\'|t}}</a></li></ul></div><a href="javascript:void(0);" class="text" ng-click="ctrl.backToList()" style="display: inline-block;float: left"><i class="fa fa-angle-left text-lg"></i></a> <span>{{ctrl.metaForDetail.with_user_obj.nickname}}</span></h4></div><div class="modal-body modal-list2" ng-hide="!ctrl.isList()"><div class="visible-phone message-plus-area" ng-click="ctrl.getToNew()"><span class="fa fa-plus message-plus-icon"></span></div><div class="panel-body" style="border-bottom: 1px #e4e4e4 solid"><form><input type="text" placeholder="{{\'C3022\'|t}}" autofocus class="form-control" ng-model="allMessagesList.q"></form></div><div class="widget-notifications notifications-list loading-layout"><kp-loading indicator="ctrl.items"></kp-loading><kp-no-found items="ctrl.items"></kp-no-found><div class=""><div class="notification notification-item yes-cursor cursor-over bg-info" ng-click="ctrl.gotoSessionListWithNewMessage()" ng-hide="!notifyObj.smuc||!sessionMessageLoaded||!hasSessionMessage"><div class="notification-description text-center" style="color:#fff">{{\'KP224\'|t|format:sMsgUnread}}</div></div><div class="notification notification-item yes-cursor cursor-over bg-info" ng-click="ctrl.gotoSessionListWithNewMessage(true)" ng-hide="!notifyObj.smuc||!sessionMessageLoaded||!hasPackageMessage"><div class="notification-description text-center" style="color:#fff">{{\'KP250\'|t|format:pMsgUnread}}</div></div><div class="notification notification-item yes-cursor cursor-over" ng-class="{\'unread\': msg.unread_count}" ng-repeat="msg in ctrl.items track by msg.id"><div><img ng-src="{{ msg.oppo_user_obj|avatar }}" alt="" class="notifications-avatar img-circle" kp-fallback-avatar nav-to-user-and-close-modal="{{ msg.oppo_user_obj.id }}"><div class="notification-description" ng-click="ctrl.goToDetail(msg.oppo_user_obj.id,msg)"><strong ng-bind="msg.oppo_user_obj.nickname"></strong> <span class="thread-time" am-time-ago="msg.create_time"></span> <span ng-if="msg.unread_count>0" ng-bind="msg.unread_count" class="badge bg-danger no-border"></span><br><span class="thread-title"><i class="fa fa-mail-reply text-light-gray" ng-if="msg.login_user_is_sender"></i> <span ng-bind-html="msg.content"></span></span></div></div><div dropdown class="delete-all-dropdown-parent" style="z-index: inherit" all-messages-dropdown-orientation parent-container="\'.modal-dialog\'" child-container="\'.right\'" overflow-classes="bottom bottom-arrow-fix"><ul class="delete-single-message delete-message-hide-dropdown dropdown-menu right" style="width: 170px"><li><a ng-click="ctrl.deleteChat(msg.oppo_user_obj.id)" style="white-space:inherit !important">{{\'ML133\'|t}}</a></li></ul><div class="fa fa-trash-o yes-cursor pull-right notification-icon bin-position-right" style="cursor: pointer;margin-right: 20px" dropdown-toggle single-message-delete-dropdown></div></div></div></div><aside class="text-center" ng-hide="!ctrl.meta.has_next"><button class="btn btn-labeled btn-block" stext="MH046" italki-click-with-spinner="ctrl.loadMoreChat()"></button></aside></div></div><div class="modal-body modal-list message-detail" ng-if="ctrl.isDetail()"><div class=""><div class="widget-chat"><div class="panel-body padding-bottom" style="padding-top: 5px"><div class="text-center" style="font-size: 12px;color: #999">{{\'ML326\'|t}}</div><hr style="margin-top: 5px; maring-bottom: 10px"><kp-loading indicator="ctrl.itemsForDetail" style="height: 300px"></kp-loading><div ng-hide="!ctrl.metaForDetail.has_next"><p class="re_more"><a italki-click-with-spinner="ctrl.loadMoreMessage()" href="javascript:void(0);" stext="MH046"></a></p></div><div class="text-lg text-center text-muted" style="margin-top: 15%" ng-if="ctrl.getMsgNum()==0&&ctrl.itemsForDetail"><img class="rounded" src="/static/images/icon_norecord.png"><br><span class="ng-binding">No messages here.</span></div><div class="message message-item" ng-repeat="item in ctrl.itemsHistoryForDetail" ng-class="{\'\':item.login_user_is_sender,\'right\':!item.login_user_is_sender}"><img ng-src="{{ item.sender_obj|avatar:\'50\' }}" alt="{{item.sender_obj.nickname}}" class="message-avatar rounded" kp-fallback-avatar nav-to-user-and-close-modal="{{ item.sender_id }}"><div class="message-body"><span class="message-heading"><a ng-if="item.sender_obj.allow_profile" nav-to-user-and-close-modal="{{ item.sender_id }}">{{item.sender_obj.nickname}}</a> <strong ng-if="!item.sender_obj.allow_profile" nav-to-user-and-close-modal="{{ item.sender_id }}">{{item.sender_obj.nickname}}</strong>&nbsp;{{item.create_time|prettyDate}} <span class="pull-right message-item-action">&nbsp; <i class="fa fa-trash-o yes-cursor" ng-click="ctrl.deleteMessage(item)"></i></span></span><div class="message-text"><div adjust-message-picture><span ng-bind-html="item.content|angularBracketsToEscape|replaceLineToBr"></span><br></div></div></div></div><span dropdown><ul class="dropdown-menu right" style="top: 50px;left: 127px"><li><a ng-click="ctrl.deleteChat(ctrl.metaForDetail.with_user_obj.id)">{{ "C0050"|translate }}</a></li></ul></span><div class="message message-item message-stacking" ng-repeat="item in ctrl.itemsForDetail" ng-class="{\'\':item.login_user_is_sender,\'right\':!item.login_user_is_sender}"><img ng-src="{{ item.sender_obj|avatar:\'50\' }}" alt="{{item.sender_obj.nickname}}" class="message-avatar rounded" kp-fallback-avatar nav-to-user-and-close-modal="{{ item.sender_id }}"><div class="message-body"><span class="message-heading"><a ng-if="item.sender_obj.allow_profile" nav-to-user-and-close-modal="{{ item.sender_id }}">{{item.sender_obj.nickname}}</a> <strong ng-if="!item.sender_obj.allow_profile" nav-to-user-and-close-modal="{{ item.sender_id }}">{{item.sender_obj.nickname}}</strong>&nbsp;{{item.create_time|prettyDate}} <span all-messages-dropdown-orientation parent-container="\'.widget-chat\'" child-container="\'.right\'" overflow-classes="bottom single-message-dropdown-downwards-fix" dropdown style="z-index: 10"><i href="javascript:void(0);" class="fa fa-trash-o yes-cursor pull-right" ng-if="ctrl.isDetail()" dropdown-toggle single-message-delete-dropdown><ul overlapping-bin-patch class="delete-single-message delete-message-hide-dropdown dropdown-menu right single-message-delete-arrow arrow-position-fix top-arrow-fix" style="width: 170px"><li><a class="change-wrap" ng-click="ctrl.deleteMessage(item)">{{\'ML134\'|t}}</a></li></ul></i></span></span><div class="message-text"><div adjust-message-picture><span ng-bind-html="item.content|angularBracketsToEscape|replaceLineToBr"></span><br></div></div></div><a italki-scroll-to-here ng-if="$last"></a></div></div></div></div></div><div class="modal-body modal-list" ng-if="ctrl.isNew()"><div><div class="panel-body" style="border-bottom: 1px #e4e4e4 solid"><form><input type="text" placeholder="{{\'C3022\'|t}}" autofocus class="form-control" ng-model="newMode.q"></form></div><div class="widget-notifications notifications-list"><kp-loading indicator="newMode.users"></kp-loading><div ng-repeat="user in newMode.users | filter:{nickname:newMode.q}" class="notification notification-item yes-cursor cursor-over"><div ng-click="ctrl.goToDetail(user.id)"><img ng-src="{{ user|avatar }}" class="notifications-avatar img-circle" kp-fallback-avatar><div ng-bind="user.nickname" class="notification-description"></div><div class="notification-ago"><span>{{\'C0102\'|t|format:(user.origin_country_id|t)}}</span></div></div></div></div></div></div><div class="modal-footer message-detail text-left" ng-if="ctrl.isDetail()&&ctrl.metaForDetail.with_user_obj.id!=0" style="background: #f5f5f5"><div class="" ng-if="ctrl.itemsForDetail&&ctrl.allowSend"><form name="send_message_form"><div class="visible-phone"><div class="input-group"><input type="text" class="form-control" ng-model="newMsg.content" autofocus ng-required kp-ios-scroll-patcher> <span class="input-group-btn"><button class="btn" italki-click-with-spinner="ctrl.sendMsg()" stext="C0047"></button></span></div><span ng-show="clickFlag && (newMsg.content.length<1||newMsg.content.length>2000)" class="text-danger">{{\'ST155\'|t|format:1:2000}}</span></div><div class="hidden-phone"><p><textarea class="form-control hidden-phone" rows="3" ng-model="newMsg.content" autofocus ng-required>\n        </textarea><span ng-show="clickFlag && (newMsg.content.length<1||newMsg.content.length>2000)" class="text-danger">{{\'ST155\'|t|format:1:2000}}</span></p></div><div><button type="submit" class="btn btn-primary with-spinner hidden-phone pull-left" italki-click-with-spinner="ctrl.sendMsg()" stext="C0047"></button></div></form></div></div>'),a.put("/views/message/teacher.template.message.html",'<form novalidate name="teacher_template_message_form" ng-submit="teacher_template_message_form.$valid&&confirm()"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'M0108\'|t}}<span id="sm_nickname"></span>&nbsp;<span ng-bind="teacher.nickname"></span></h4></div><div class="modal-body padding-bottom"><div class="note note-info no-border"><strong>{{\'SM200\'|t}}</strong><ul class="no-grid-gutter-h no-margin-b"><li><a href="http://support.italki.com/entries/21570743-What-are-italki-Credits-ITC-" target="_blank">{{\'SM201\'|t}}</a></li><li><a href="http://support.italki.com/entries/21593567-How-do-I-schedule-a-lesson-with-an-italki-teacher-" target="_blank">{{\'SM202\'|t}}</a></li><li><a href="http://support.italki.com/forums" target="_blank">{{\'SM203\'|t}}</a></li></ul></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ML211\'|t}}</label><select ng-model="options.reason" required name="reason" class="form-control"><option value="" selected="selected">{{\'C0061\'|t}}...</option><option value="1">{{\'ML212\'|t}}</option><option value="2">{{\'ML213\'|t}}</option><option value="3">{{\'ML214\'|t}}</option><option value="4">{{\'ML215\'|t}}</option><option value="5">{{\'ML216\'|t}}</option><option value="6">{{\'ML217\'|t}}</option><option value="7">{{\'C0087\'|t}}</option></select><span class="help-block" ng-hide="!(teacher_template_message_form.$submitted&&teacher_template_message_form.reason.$error.required)">{{\'C3019\'|t}}</span></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ML218\'|t}}</label><select ng-model="options.interest" required name="interest" class="form-control"><option value="" selected="selected">{{\'C0061\'|t}}...</option><option value="1">{{\'ML219\'|t}}</option><option value="2">{{\'ML220\'|t}}</option><option value="3">{{\'ML221\'|t}}</option><option value="4">{{\'ML222\'|t}}</option><option value="5">{{\'ML223\'|t}}</option></select><span class="help-block" ng-hide="!(teacher_template_message_form.$submitted&&teacher_template_message_form.interest.$error.required)">{{\'C3019\'|t}}</span></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ML224\'|t}}</label><select ng-model="options.howOften" required name="howOften" class="form-control"><option value="" selected="selected">{{\'C0061\'|t}}...</option><option value="1">{{\'ML226\'|t}}</option><option value="2">{{\'ML227\'|t}}</option><option value="3">{{\'ML228\'|t}}</option><option value="4">{{\'ML229\'|t}}</option></select><span class="help-block" ng-hide="!(teacher_template_message_form.$submitted&&teacher_template_message_form.howOften.$error.required)">{{\'C3019\'|t}}</span></div><div class="form-group no-margin-hr"><label class="control-label">{{\'ML230\'|t}}</label><textarea ng-model="options.intro" name="intro" rows="3" required maxlength="1700" class="form-control"></textarea><span ng-bind="1700-options.intro.length" style="float:right"></span> <span class="help-block" ng-hide="!(teacher_template_message_form.$submitted&&teacher_template_message_form.intro.$error.required)">{{\'C3019\'|t}}</span></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">{{\'C0047\'|t}}</button></div></form>'),a.put("/views/notification/modal.html",'<style>.text{\n        color: #555;\n        opacity: .3;\n    }\n    .text:hover{\n        color: #555;\n            opacity:0.8;\n    }\n    .text:focus{\n       color: #555;\n\n    }</style><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button> <a ng-hide="ctrl.isDetail()||view.type!=\'ordinary\'" class="pull-right icon_com icon_markread" ng-click="markAllAsRead()">&nbsp;</a><h4 class="modal-title" translate="ML003" ng-if="ctrl.isList()"></h4><h4 class="modal-title text-center text-ellipsis" ng-if="ctrl.isDetail()"><a href="javascript:void(0);" class="text" ng-click="ctrl.backToList()" style="display: inline-block;float: left"><i class="fa fa-angle-left text-lg"></i></a> <span>{{ctrl.actionObj.title}}</span></h4></div><div class="modal-body" style="padding: 0"><div class="notification-tab" ng-if="ctrl.isList()" ng-hide="!ctrl.loaded"><form><div class="btn-group btn-group-sm btn-group-justified" data-toggle="buttons"><label class="btn" ng-model="view.type" btn-radio="\'action\'">{{\'ML023\'|t}} <i class="fa fa-circle text-danger" style="font-size: 9px" ng-if="notifyObj.anc"></i></label><label class="btn" ng-model="view.type" btn-radio="\'ordinary\'">{{\'C0087\'|t}} <i class="fa fa-circle text-danger" style="font-size: 9px" ng-if="notifyObj.onc"></i></label></div></form></div><div class="loading-layout"><kp-loading indicator="ctrl.loaded"></kp-loading><div class="widget-notifications notifications-list modal-list" ng-hide="!ctrl.loaded"><div ng-hide="ctrl.isDetail()||view.type!=\'action\'" class="notification-p-50"><div class="notification notification-item cursor-over yes-cursor" ng-if="ctrl.upcoming" ng-click="navToSessionDetail({\'detail\':ctrl.upcoming})"><div class="notification-title text-info"></div><img class="notifications-avatar img-circle" ng-src="{{ctrl.upcoming.oppo_user_obj|avatar:\'50\' }}" width="30" alt="" kp-fallback-avatar><div class="notification-description"><strong>{{ ctrl.upcoming|sessionCourseTitle }}</strong> <span class="label session" translate="M0070"></span></div><div class="notification-ago"><i class="fa fa-clock-o" style="vertical-align: middle;padding-right:2px"></i><span am-time-ago="ctrl.upcoming.session_start_time" style="vertical-align: middle"></span></div><div class="notification-icon fa fa-chevron-right text-light-gray"></div></div><div class="notification notification-item cursor-over yes-cursor" ng-repeat="action in ctrl.actions" ng-click="ctrl.goToDetail(action)"><div class="notification-title text-info"></div><img class="notifications-avatar img-circle" ng-src="{{action.avatar|avatar:\'50\' }}" width="30" alt="" kp-fallback-avatar><div class="notification-description"><strong ng-bind-html="action.title"></strong></div><div class="notification-ago"><i class="fa fa-clock-o" style="vertical-align: middle;padding-right:2px"></i><span ng-bind="action.timeStr" style="vertical-align: middle"></span></div><div class="notification-icon fa fa-chevron-right text-light-gray"></div></div><kp-no-found items="ctrl.actions&&ctrl.upcomings" tips="ML322"></kp-no-found></div><div class="notification notification-item cursor-over yes-cursor" ng-repeat="noti in ctrl.actionObj.items" ng-hide="ctrl.isList()" ng-click="navToSessionDetail(noti)"><div class="notification-title text-info"></div><img class="notifications-avatar img-circle" ng-src="{{noti.oppo_user_obj|avatar:\'50\' }}" width="30" alt="" kp-fallback-avatar><div class="notification-description"><ul class="list-unstyled"><li class="text-bold text-danger" ng-if="!noti.detail.session_end_time_user"></li><li ng-if="noti.type==1012"><strong>{{ noti.args }}</strong></li><li ng-if="noti.detail.session_end_time_user"><strong>{{noti.detail.session_start_time_user|amDate:\'TF004\'}} - {{noti.detail.session_end_time_user|amDate:\'HH:mm\' }}</strong></li><li ng-if="noti.type>1999">{{\'TP026\'|t}}: {{ noti.detail.session_id||noti.detail.package_id }}</li><li ng-bind-html="noti.detail|sessionCourseTitle"></li></ul></div><div class="notification-ago"><i class="fa fa-clock-o" style="vertical-align: middle"></i> <span ng-if="noti.type!=1012" style="vertical-align: middle">{{ noti.time_text }}</span> <span ng-if="noti.type==1012" am-time-ago="noti.create_time" style="vertical-align: middle"></span></div></div><div ng-hide="ctrl.isDetail()||view.type!=\'ordinary\'" class="notification-p-50"><div class="notification notification-item cursor-over yes-cursor animation-list-item" ng-repeat="noti in ctrl.items track by noti.id" ng-click="showDetail(noti)"><div class="notification-title text-info"></div><img class="notifications-avatar img-circle" ng-if="noti.type!=2111" ng-src="{{noti.oppo_user_obj|avatar:\'50\' }}" width="30" alt="" kp-fallback-avatar> <img class="notifications-avatar img-circle" ng-if="noti.type==2111" src="static/images/static/Snip20170125_10.jpg" alt="" kp-fallback-avatar><div class="notification-description"><strong ng-bind-html="noti.content" ng-if="noti.type!=2111"></strong> <strong ng-bind-html="noti.content.tile" ng-if="noti.type==2111"></strong><div class="" ng-hide="!noti.showDetail"><div ng-if="noti.type==2111"><span ng-bind-html="noti.content.text"></span> <a ng-click="navToLanguageChallenge(noti,1)">{{\'LC516\'|t}}</a></div><ul class="list-unstyled" ng-if="noti.type>1999 && noti.type!=2109 && noti.type!=2111 " ng-click="navToSessionDetail(noti,1)"><li class="text-bold text-danger" ng-if="!noti.detail.session_end_time_user">{{ noti.time_text }}</li><li ng-if="noti.detail.session_end_time_user"><strong>{{noti.detail.session_start_time_user|amDate:\'TF004\'}} - {{noti.detail.session_end_time_user|amDate:\'HH:mm\' }}</strong></li><li>{{\'TP026\'|t}}: {{ noti.detail.session_id||noti.detail.package_id }}</li><li ng-bind-html="noti.detail|sessionCourseTitle"></li></ul></div></div><div class="notification-description" ng-if="noti.type==2109"><ul class="list-unstyled"><li style="margin: 7px 0px"><span ng-bind-html="\'NT042\'|t"></span> <a href="http://support.italki.com/hc/en-us/articles/115000173007-What-are-Endorsements" target="_blank">{{\'C0171\'|t}}</a></li><li>{{\'TP026\'|t}}: {{ noti.detail.session_id||noti.detail.package_id }}</li></ul></div><div class="notification-ago"><i class="fa fa-clock-o" style="vertical-align: middle"></i> <span am-time-ago="noti.create_time||noti.detail.session_start_time" am-preprocess="utc" style="vertical-align: middle"></span></div><div class="fa fa-trash-o yes-cursor notification-icon" ng-click="markAsRead(noti,$index);"></div></div><aside class="text-center" ng-hide="ctrl.isDetail()||!ctrl.meta.has_next||view.type!=\'ordinary\'"><button class="btn btn-labeled btn-block" italki-click-with-spinner="ctrl.loadMoreNotification()" stext="MH046"></button></aside><kp-no-found items="ctrl.items" tips="ML322"></kp-no-found></div></div></div></div>'),a.put("/views/organization/detail/adjust.history.html",'<div class="organization"><div class="panel loading-layout no-border"><kp-loading indicator="items"></kp-loading><kp-no-found items="items"></kp-no-found><div><table class="adjust-history-list bg-white padding-20"><tr class="purchase-adjust-list-tr"><th>{{\'PM930\'|t}}</th><th>{{\'PM931\'|t}}</th><th>{{\'PM042\'|t}}</th><th class="amount-col">{{\'PM040\'|t}}</th></tr><tr class="purchase-adjust-list-tr" ng-repeat="item in items_ad" ng-class-odd="\'bg-listgrey\'" ng-class="{\'animation-list-item\':$index}"><td>{{item.create_time |amDate:\'TF005\':true}}</td><td>{{item.operator_name}}</td><td>{{(item.from_wallet_id==organization.id?\'PM932\':\'PM933\')|t}}</td><td class="text-right">{{item.trans_amount| kpToUsd}}</td></tr></table><button class="btn btn-labeled btn-block" ng-if="(meta_ad && meta_ad.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div></div>'),a.put("/views/organization/detail/purchase.history.html",'<div class="organization"><div class="panel loading-layout no-border"><kp-loading indicator="items"></kp-loading><kp-no-found items="items"></kp-no-found><div><table class="purchase-history-list bg-white padding-20"><tr class="purchase-adjust-list-tr"><th>{{\'PM930\'|t}}</th><th>{{\'PM036\'|t}}</th><th>{{\'PM038\'|t}}</th><th class="text-center">{{\'PM041\'|t}}</th><th class="amount-col">{{\'PM040\'|t}}</th></tr><tr class="purchase-adjust-list-tr" ng-repeat="item in items" ng-class-odd="\'bg-listgrey\'" ng-class="{\'animation-list-item\':$index}"><td>{{item.finish_time |amDate:\'TF005\':true}}</td><td>{{item.order_id}}</td><td>{{ getI18nKey(item.pay_type)|t}}</td><td class="text-center">{{(item.status==1?\'PM455\':\'PM967\')|t}}</td><td class="text-right">{{item.amount| kpToUsd}}</td></tr></table><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div></div>'),
a.put("/views/organization/finance.html",'<div class="organization"><div class="bg-white margin-b-20 padding-20 finance-list"><div><div class="col-md-8 finance-list-left">{{\'PM942\'|t}}</div><div class="col-md-4 finance-list-right color-green">${{organizStatistics.wallet_sv | kpToUsd}} USD</div></div><div><div class="col-md-8 finance-list-left margin-t-5">{{\'PM943\'|t}}</div><div class="col-md-4 finance-list-right margin-t-5">${{organizStatistics.purchased_itc-organizStatistics.wallet_sv | kpToUsd}} USD</div></div><div><div class="col-md-8 finance-list-leftb margin-t-10">{{\'TS013\'|t}}</div><div class="col-md-4 finance-list-rightb margin-t-10">${{organizStatistics.purchased_itc | kpToUsd}} USD</div></div></div><div class="bg-white finance-history-title color-black"><a class="history-title margin-r-20" ng-class="{\'history-title-active\':historyIndex == 1}" href="javascript:void(0);" ng-click="focus(1)">{{\'PM944\'|t}}</a> <a class="history-title" ng-class="{\'history-title-active\':historyIndex == 2}" href="javascript:void(0);" ng-click="focus(2)">{{\'PM945\'|t}}</a></div><div ng-if="historyIndex == 1" ng-include=" \'/views/organization/detail/purchase.history.html\' "></div><div ng-if="historyIndex == 2" ng-include=" \'/views/organization/detail/adjust.history.html\' "></div></div>'),a.put("/views/organization/main.html",'<style>.navbar-default .navbar-nav > li > a {\n    color: #dedede;\n  }\n  .navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {\n    color: #fff;\n    background-color: transparent;\n  }\n  .tab-inactive{\n    border-bottom: 2px solid #f1f1f1;\n  }</style><div class="organization organiz-top"><div class="help-page-banner" style="background: -webkit-linear-gradient(bottom,rgba(0,0,0,.7),rgba(0,0,0,.7)),url(/static/images/static/business_hero.jpg) 50% 45%;\n    padding: 0;\n    height: 300px;\n    background-size: cover;\n    width: 100%;\n    position: relative"><div class="organiz-nav"><div class="container no-padding-t"><div class="organiz-nav-left no-margin no-padding" style="padding: 10px 0!important"><a><img src="/static/images/logo-responsive.png"></a></div><div class="organiz-nav-right"><img ng-src="{{ currentUser|avatar:\'50\' }}" kp-fallback-avatar class="rounded"> <span class="organiz-logined" ng-click="signOut($event)">Log out</span></div></div></div><div style="position: absolute; top: 30px;font-family: Times; width: 100%"><div class="container"><div style="font-size: 42px; color: rgba(255,255,255,1)">Language Training</div><div style="font-size: 26px; color: rgba(255,255,255,0.7)">For Business, Organizations and Schools</div></div></div><nav class="navbar-default" style="box-shadow: none;background: rgba(255,255,255,.1); position: absolute; bottom: 0; width: 100%" role="navigation"><div class="container no-padding-t"><ul class="nav navbar-nav navbar-left navbar-collapse no-padding" id="bs-example-navbar-collapse-1" style="height: 56px"><li class="trans_layout3"><a class="text-lb text-up tab-inactive" style="padding-top: 11px" ui-sref="bos.overview" ng-class="{\'tab-active\':$state.current.name==\'bos.overview\'}" href="javascript:void(0);">{{\'PM080\'|t}}</a><div class="trans2 transimage3" style="height: 2px; background: #ff4338; transition: all .2s ease-in-out 0s"></div></li><li class="trans_layout3"><a class="text-lb text-up tab-inactive" style="padding-top: 11px" ui-sref="bos.members" ng-class="{\'tab-active\': $state.current.name==\'bos.members\'}" href="javascript:void(0);">{{\'PM946\'|t}}</a><div class="trans2 transimage3" style="height: 2px; background: #ff4338; transition: all .2s ease-in-out 0s"></div></li><li class="trans_layout3"><a class="text-lb text-up tab-inactive" style="padding-top: 11px" ui-sref="bos.reports" ng-class="{\'tab-active\': $state.current.name==\'bos.reports\'}" href="javascript:void(0);">{{\'PM947\'|t}}</a><div class="trans2 transimage3" style="height: 2px; background: #ff4338; transition: all .2s ease-in-out 0s"></div></li><li class="trans_layout3"><a class="text-lb text-up tab-inactive" style="padding-top: 11px" ui-sref="bos.finance" ng-class="{\'tab-active\':$state.current.name==\'bos.finance\'}" href="javascript:void(0);">{{\'M0048\'|t}}</a><div class="trans2 transimage3" style="height: 2px; background: #ff4338; transition: all .2s ease-in-out 0s"></div></li><li class="trans_layout3"><a class="text-lb text-up tab-inactive" style="padding-top: 11px" ui-sref="bos.settings" ng-class="{\'tab-active\':$state.current.name==\'bos.settings\'}" href="javascript:void(0);">{{\'M0005\'|t}}</a><div class="trans2 transimage3" style="height: 2px; background: #ff4338; transition: all .2s ease-in-out 0s"></div></li></ul></div></nav></div><div class="container" style="padding-top: 30px;padding-bottom: 20px"><div class="row"><div class="col-sm-4"><strong class="text-xlg yes-cursor font-weight-500" ng-if="$state.current.name==\'bos.overview\'">{{\'PM080\'|t}}</strong> <strong class="text-xlg yes-cursor font-weight-500 organiz-first-upper" ng-if="$state.current.name==\'bos.members\'">{{\'PM946\'|t}}</strong> <strong class="text-xlg yes-cursor font-weight-500 organiz-first-upper" ng-if="$state.current.name==\'bos.reports\'">{{\'PM947\'|t}}</strong> <strong class="text-xlg yes-cursor font-weight-500" ng-if="$state.current.name==\'bos.finance\'">{{\'M0048\'|t}}</strong> <strong class="text-xlg yes-cursor font-weight-500" ng-if="$state.current.name==\'bos.settings\'">{{\'M0005\'|t}}</strong></div><div class="col-sm-8 text-right"><button class="btn color-white bg-red no-border margin-r-5" ng-click="openOrganizPurchase()"><i class="fa fa-shopping-cart"></i> {{\'MH110\'|t}}</button> <button class="btn" ng-click="addNewMember()">{{\'PM948\'|t}}</button></div></div></div><div ui-view="" class="container padding-t-0"></div><footer class="footer organiz-footer"><div class="container"><div class="col-md-10 hidden-phone"><ul class="list-inline"><li>&copy; {{\'TS289\'|t}}</li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a ui-sref="tos" translate="M0109"></a></li></ul></div></div></footer></div>'),a.put("/views/organization/members.html",'<div class="organization"><div class="bg-white"><ul class="member-list member-list-title profile_card list-inline margin-0"><li class="member-list-newscol"></li><li class="member-list-sessions font-weight-bold">{{\'UR091\'|t}}</li><li class="member-list-balance font-weight-bold">{{\'PM045\'|t}} <i class="fa fa-question-circle" tooltip-placement="bottom" tooltip="{{\'PM949\'|t}}"></i></li><li class="member-list-lastlesson font-weight-bold">{{\'PB039\'|t}}</li><li class="member-list-status font-weight-bold">{{\'C0030\'|t}}</li><li class="width-20p"></li></ul><kp-loading indicator="items"></kp-loading><ul class="member-list padding-tb-8 profile_card list-inline margin-0" ng-repeat="item in items" ng-class-odd="\'bg-listgrey\'" ng-class="{\'animation-list-item\':$index}"><li class="member-list-newscol"><div class="member-list-first"><img ng-src="{{item.user_obj.avatar_file_name|avatar:50 }}" kp-fallback-avatar class="rounded"><div class="member-news member-news-col"><strong>{{item.user_obj.nickname}}</strong><span ng-if="item.permi_type==1" class="margin-l-5 member-status">{{\'PM950\'|t}}</span><div>{{item.user_obj.email}}</div></div></div></li><li class="member-list-sessions member-middle">{{item.user_obj.session_count}}</li><li class="member-list-balance member-middle">{{item.sv | kpToUsd }}</li><li class="member-list-lastlesson height-20 member-middle">{{item.user_obj.last_session_time_user?(item.user_obj.last_session_time_user |amDate:\'TF005\':true):\'--\'}}</li><li class="member-list-status member-middle"><span class="padding-5 radius" ng-class="{\'bg-lightgrey\':item.status==1,\'inactive-status\':item.status==0}">{{item.status==1?\'active\':\'Inactive\'}}</span></li><li class="width-20p text-right member-middle"><div class="btn-group" dropdown><button type="button" class="btn btn-xs" dropdown-toggle><span class="member-action">{{\'PM951\'|t}}</span><i class="fa fa-sort-desc member-action-list"></i></button><ul class="dropdown-menu right list margin-t-10"><li ng-if="item.status==1" class="float-none"><a class="block-display" ng-click="creditsTransfer(item)">{{\'PM936\'|t}}</a></li><li ng-if="currentUser.id!=item.user_id&&item.status==1" class="float-none"><a class="block-display" href="javascript:void(0);" ng-click="adminChange(item)">{{(item.permi_type==1?\'PM952\':\'PM953\')|t}}</a></li><li ng-if="currentUser.id!=item.user_id" class="float-none"><a class="block-display" href="javascript:void(0);" ng-click="statusChange(item)">{{(item.status==1?\'PM954\':\'PM955\')|t}}</a></li><li ng-if="item.user_obj.session_count>0" class="float-none"><a class="block-display" target="_blank" href="{{downloadUrl(item)}}">{{\'PM956\'|t}}</a></li></ul></div></li></ul></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div>'),a.put("/views/organization/modal/add.new.member.html",'<div class="organiz-modal"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h5 class="modal-title">{{\'PM934\'|t}}</h5></div><div class="modal-body bg-darkwhite"><form class="form-horizontal" name="signup_form"><div class="form-group email-padding"><span class="error-msg margin-l-0" ng-bind-html="\'PM968\'|t"></span></div><div class="form-group"><span class="col-sm-4 text-right form-title">{{\'PM061\'|t}}</span><div class="col-sm-8"><input type="email" name="signup_email" ng-model="formObj.email" id="email_id" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" class="form-control input-lg input-val" ng-blur="checkUsermail()" required><div ng-show="showcharacter||(isExistErr||isInputErr)"><p class="help-word" ng-hide="isExistErr&&!isFormalErr">{{\'ST318\'|t}}</p></div><div class="form-group email-padding" ng-if="isExistErr"><span class="error-msg margin-l-0" ng-bind-html="\'KP439\'|t"></span></div></div></div><div class="form-group"><span class="col-sm-4 text-right form-title">{{\'PM970\'|t}}</span><div class="col-sm-8"><input type="text" name="signup_username" id="username_id" class="form-control input-lg input-val" ng-model="formObj.nickname" ng-blur="signup_form.foo=signup_form.signup_username.$invalid" required><p class="help-word" ng-show="signup_form.foo">{{\'PM971\'|t}}</p></div></div></form></div><div class="modal-footer bg-greywhite"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0064\'|t}}</span></button> <button class="btn btn-primary" ng-disabled="signup_form.$invalid" italki-click-with-spinner="confirm()"><span class="btn-txt">{{\'C0123\'|t}}</span></button></div></div>'),a.put("/views/organization/modal/organiz.purchase.bank.html",'<div class="organization"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">×</button><h4 class="modal-title">HOW TO PAY BY BANK TRANSFER</h4></div><div class="modal-body"><div class="note note-info no-border"><ul class="no-grid-gutter-h"><li>Purchasing italki Credits via Bank Transfer is not instantaneous. Typically this may take 3 to 7 business days. Your purchase of italki Credits will be credited to your italki account upon settlement of your bank transfer.</li><li>The amount of italki Credits you receive is based on the exact Bank Transfer amount that italki receives. This amount may be slightly greater or less than expected due to adjustments in international bank transfer and currency exchange rates.</li><li>Bank Transfers should be made in USD. Bank Transfers made in other currencies will be converted to USD based on exchange rates at the time of transfer.</li><li><span class="text-danger">Bank Transfers must include BOS ID for the italki Credits purchase. Make sure to write the BOS ID under the "Notes/Reference” section for italki to see when completing your Bank Transfer application. If you do not provide the BOS ID, your italki Credits purchase cannot be processed. We do not accept responsibility for payments made without the BOS ID.</span></li></ul></div><div class=""><div class="note note-success no-border"><div class="organiz_id">BOS ID: <span ng-bind="organization.id" class="color-red"></span></div></div><div class="grid-gutter-margin-b"><h3>Remittance Instructions</h3><table class="table table-bordered"><tbody><tr><td>Beneficiary Name</td><td>ITALKI HK LIMITED</td></tr><tr><td>Beneficiary Account No.</td><td>640-044426-838</td></tr><tr><td>Beneficiary Bank Name</td><td>HSBC Hong Kong</td></tr><tr><td>Beneficiary Bank Code</td><td>004</td></tr><tr><td>SWIFT Code</td><td>HSBCHKHHHKH</td></tr><tr><td>Branch Address</td><td>1 Queen\'s Road Central, HK, Hong Kong</td></tr><tr><td>Beneficiary Address</td><td>Units 903-906A, 9/F, Kowloon Centre 33 Ashley Road, Tsimshatsui, Kowloon, Hong Kong</td></tr></tbody></table></div><div class="grid-gutter-margin-b"><p class="text-muted">Your purchase of italki Credits will be credited to your italki account upon settlement of your bank transfer. Typically this may take 3 to 7 business days. Please keep a copy of your receipt as proof of payment.</p><p class="text-muted">If you have questions on the status of your bank transfer, please obtain a copy of your receipt or bank statement (indicating the day the funds were taken from your account). Scan your proof of payment and email it to support@italki.com.</p></div><button type="button" class="btn btn-primary" onclick="window.print()"><i class="fa fa-print"></i> Print this page</button></div></div></div>'),a.put("/views/organization/modal/transfer.credits.html",'<div class="organiz-modal"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h5 class="modal-title">{{\'PM936\'|t}}</h5></div><div class="modal-body bg-darkwhite"><form class="form-horizontal" name="form"><div class="form-group" ng-if="formObj.transferType==-1"><span class="col-sm-4 text-right">{{\'PM937\'|t}}</span> <span class="col-sm-8">${{organization.wallet_sv | kpToUsd}} USD</span></div><div class="form-group" ng-if="formObj.transferType==1"><span class="col-sm-4 text-right">{{\'PM938\'|t}}</span> <span class="col-sm-8">${{memberItc| kpToUsd}} USD</span></div><div class="form-group"><span class="col-sm-4 text-right form-title">{{\'TP088\'|t}}</span><select class="col-sm-8 transfer-action" ng-model="formObj.transferType"><option value="-1">{{\'PM939\'|t}}</option><option value="1">{{\'PM940\'|t}}</option></select></div><div class="form-group"><span class="col-sm-4 text-right form-title">{{\'PM941\'|t}}(USD)</span> <input type="text" class="form-control col-sm-8 adjust-val" ng-model="formObj.usd" required></div><div class="form-group"><span class="col-sm-4 text-right form-title">{{\'C0096\'|t}}</span><div class="col-sm-8 pwd-val"><input type="password" name="signup_password" id="password" class="form-control input-lg input-val" ng-model="formObj.password"><p class="help-word" ng-show="error" ng-class="error ? \'help-word-invalid\' : \'help-word-success\' ">{{\'TS315\' |t}}</p></div></div></form></div><div class="modal-footer bg-greywhite"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0064\'|t}}</span></button> <button class="btn btn-primary" ng-disabled="form.$invalid" italki-click-with-spinner="confirm()"><span class="btn-txt">{{\'C0123\'|t}}</span></button></div></div>'),a.put("/views/organization/overview.html",'<div class="organization"><div class="bg-white margin-b-20 padding-20"><ul class="profile_card list-inline overview-news"><li><div class="info"><div class="organiz-first-upper">{{\'PM946\'|t}}</div><strong><a class="color-black" ui-sref="bos.members">{{organization.members}}</a></strong></div></li><li><div class="info"><div>{{\'PM957\'|t}} <i class="fa fa-question-circle" tooltip-placement="bottom" tooltip="{{\'PM969\'|t}}"></i></div><strong>{{organizStatistics.lesson_count}}</strong></div></li><li><div class="info"><div>{{\'PM958\'|t}}</div><strong>$<a class="color-black" ui-sref="bos.finance">{{organizStatistics.purchased_itc | kpToUsd}}</a> USD</strong><br></div></li><li><div class="info"><div>{{\'PM942\'|t}}</div><strong>${{organizStatistics.wallet_sv | kpToUsd}} USD</strong><br></div></li></ul></div><div class="text-xlg font-weight-500 organiz-first-upper margin-t-30 margin-b-20">{{\'PM972\'|t}}</div><div class="panel loading-layout"><kp-no-found items="items"></kp-no-found><kp-loading indicator="items"></kp-loading><div class="margin-b-20"><div class="bg-white padding-20 lesson-list" ng-repeat="item in items" ng-class="{\'animation-list-item\':$index}"><div class="row"><div class="col-md-7"><strong>{{item.start_time_user | amDate:\'TF005\':true}} - {{item.end_time_user | amDate:\'TF015\':true}}</strong><div><ul class="list-inline no-margin-b"><li class="text-muted">{{item|sessionCourseTitle}}</li><li class="text-muted">{{item.learn_language|t}}</li><li class="text-muted">#{{item.session_id}}</li></ul></div><span class="margin-t-5 color-white bg-roseRed package-status radius padding-5" ng-if="item.session_type==\'2\'">{{\'TS038\'|t}}</span></div><div class="col-md-3 lesson-list-center"><img ng-src="{{item.student_obj.avatar_file_name|avatar:50 }}" kp-fallback-avatar class="rounded"><div class="member-news-col"><strong>{{item.student_obj.nickname}}</strong><br><span>{{item.student_obj.email}}</span></div></div><div class="col-md-2"><span ng-bind-html="getTag(item)"></span></div></div></div></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div>'),a.put("/views/organization/reports.html",'<div class="organization"><div class="panel loading-layout"><kp-no-found items="items"></kp-no-found><kp-loading indicator="items"></kp-loading><div class="bg-white"><ul class="report-list profile_card list-inline margin-0" ng-if="items.length>0"><li class="width-20p font-weight-bold text-left">{{\'AS404\'|t}}</li><li class="width-20p font-weight-bold">{{\'UR091\'|t}}</li><li class="width-20p font-weight-bold text-right">{{\'PM959\'|t}} (USD)</li><li class="width-20p font-weight-bold text-right">{{\'PM960\'|t}} (USD)</li><li class="width-20p"></li></ul><ul class="report-list padding-tb-8 profile_card list-inline margin-0" ng-repeat="item in items" ng-class-odd="\'bg-listgrey\'" ng-class="{\'animation-list-item\':$index}"><li class="width-20p text-left">{{item.time}}</li><li class="width-20p">{{item.lesson_count}}</li><li class="width-20p text-right">{{item.lesson_avg_price | kpToUsd}}</li><li class="width-20p text-right">{{item.lesson_all_price | kpToUsd}}</li><li class="width-20p text-right"><a class="color-black" href="{{downloadUrl(item)}}" target="_blank"><i class="fa fa-download"></i></a></li></ul></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div>'),a.put("/views/organization/settings.html",'<div class="organization"><div class="bg-white"><div class="setting-title padding-20">{{\'PM961\'|t}}:</div><div class="setting-list padding-10 margin-t-10"><div class="col-md-3">{{\'PM962\'|t}}:</div><div class="col-md-9 organiz_id">{{settingInfo.id}}</div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'ST049\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.display_name"></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'PM963\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.legal_name"></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'PM964\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.vat_number"></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'LC120\'|t}}:</div><div class="col-md-9"><select class="country-list" data-ng-model="settingInfo.country" class="form-control" ng-options="m.v as m.l for m in countries" required><option value="">{{\'C0014\'|t}}</option></select></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'PM965\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.billing_address"></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'M0108\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.contacts"></div></div><div class="setting-list padding-10"><div class="col-md-3">{{\'PM966\'|t}}:</div><div class="col-md-9"><input type="text" ng-model="settingInfo.phone"></div></div><div class="setting-submit padding-10"><button ng-disabled="!checkData()" class="btn color-white bg-red no-border btn-save" italki-click-with-spinner="settingsChange()" stext="C0055"></button></div></div></div>'),a.put("/views/page/about.html",'<h2>{{\'M0017\'|t}}</h2><div class="row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b text-center"><iframe width="657" height="370" src="//www.youtube.com/embed/px6TQ0ZMIsw" frameborder="0" allowfullscreen></iframe></div><div class="grid-gutter-margin-b"><h4>LEARN WITH REAL PEOPLE</h4><span class="text-muted">We believe that the key thing that is missing from language education is <strong>people</strong>. We built italki to make human connections between language learners and language teachers. On our platform, you can find a teacher from the US to tutor you in English, or a person in China to practice Chinese with you.</span><p class="r"><span class="text-mutedtxt">We believe that everyone can become fluent in any foreign language with a teacher.</span></p></div><div class="grid-gutter-margin-b"><h4>OVER A MILLION STUDENTS</h4><span class="text-muted">italki now has a global community of <strong>over a million language learners and more than a thousand language teachers</strong>, studying over a hundred languages. Hundreds of thousands of paid language lessons have taken place on italki, and every day, more and more students and teachers are discovering how quickly they can learn with personal online lessons.</span></div><div class="grid-gutter-margin-b"><h4>MAKING LANGUAGE LEARNING ACCESSIBLE</h4><span class="text-muted">We believe that language education is going to radically change as traditional methods of language learning are disrupted by the availability of online language teachers. Language education has historically been expensive and inefficient, and only people who studied abroad could gain fluency. Now that <strong>language teachers can reach any student with an internet connection</strong>, we believe anyone, anywhere in the world can become fluent in a foreign language.</span></div><div class="grid-gutter-margin-b"><blockquote><p>"italki has helped me connect with native speakers and experienced language teachers. It\'s ideal for people who can\'t be in the country, but want to get busy speaking the language!"</p><small>Benny Lewis<br>Polyglot Blogger<br>www.Fluentin3months.com</small></blockquote></div></div></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">More about italki</h4><ul class="list-unstyled"><li><a ui-sref="about">{{\'M0017\'|t}}</a></li><li><a href="http://blog.italki.com" target="_blank">{{\'M0018\'|t}}</a></li><li><a ui-sref="press">{{\'M0033\'|t}}</a></li><li class="active"><a ui-sref="contactus">{{\'M0016\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/page/app.html",'<style>.app-bg{\n    background: url("/static/images/app_bg.jpg") no-repeat 48% 20%;\n    background-size: cover;\n    width: 100%;\n    margin-top: -80px;\n\n  }\n\n  .bg-p{\n    padding-top: 350px;\n    padding-bottom: 150px;\n    background: linear-gradient(to top, rgba(0, 0, 0, .55) 0, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0) 85%, rgba(0, 0, 0, .25) 100%);\n  }\n\n  .bg-white{\n    background-color: #FFFFFF;\n  }\n\n  .mt15{\n    margin-top: 15px;\n  }\n\n  .pv30{\n    padding-top: 30px;\n    padding-bottom: 30px;\n  }\n\n  .ph50{\n    padding-left: 50px;\n    padding-right:50px;\n  }\n\n  .app-feature .col-sm-3{\n    padding: 20px;\n  }\n\n  .app-bullet ul li{\n    margin-bottom: 15px !important;\n  }\n\n  .download-icon{\n    height: 88.88px;\n  }\n  @media(min-width: 991px){\n    .app-feature .row{\n      margin-left:15px;\n    }\n  }\n\n  @media(max-width:767px){\n    .col-sm-3{\n      min-height: 150px;\n    }\n    .app-feature  .col-sm-3 img{\n      float:left;\n      height: 150px;\n      margin-left: 0px !important;\n    }\n\n    .app-feature .col-sm-3 .app-icon{\n      display: inline;\n      float: left;\n    }\n\n    .app-feature .col-sm-3 .app-icon img{\n      height:130px;\n      margin-top: 0px;\n      margin-left: 14px !important;\n    }\n\n\n    .download-icon{\n      width:230px;\n      height:68px;\n    }\n\n    .apple-icon{\n      margin-right: 15px !important;\n\n    }\n\n    .app-bullet ul{\n      min-height: 0px !important;\n      margin-bottom: 40px;\n    }\n\n\n  }\n\n  @media (max-width: 767px)and (min-width: 480px) {\n    .bg-p{\n      padding-top: 250px;\n      padding-bottom: 60px;\n      background: linear-gradient(to top, rgba(0, 0, 0, .55) 0, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0) 85%, rgba(0, 0, 0, .25) 100%);\n    }\n\n    .app-feature .col-sm-3 img{\n      margin-right:20px;\n    }\n\n    .app-feature .col-sm-3 .app-icon{\n      margin-right:20px !important;\n    }\n\n    .app-feature .col-sm-3{\n      padding-left: 30px;\n      padding-right: 30px;\n    }\n  }\n\n  @media (max-width: 479px) {\n    .bg-p{\n      padding-top: 250px;\n      padding-bottom: 0px;\n      background: linear-gradient(to top, rgba(0, 0, 0, .8) 0, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0) 85%, rgba(0, 0, 0, .25) 100%);\n    }\n\n    .apple-icon{\n      margin-bottom: 15px;\n      margin-right: 0px !important;\n    }\n    .app-feature .col-sm-3{\n      padding: 10px;\n    }\n\n    .app-bg h2{\n      margin-bottom: 0px !important;\n    }\n    .app-bg .google-link{\n      display: block;\n    }\n\n\n  }</style><div ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><div class="container company no-padding-hr" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow}" autoscroll><div class="app-bg"><div class="text-center bg-p"><h1 style="color: white">italki apps</h1><h2 style="color: white; font-weight: 400; margin-top: 10px; padding-left:15px;padding-right: 15px; margin-bottom: 50px">{{\'APP001\'|t}}</h2><div><a target="_blank" href="https://itunes.apple.com/us/app/italki/id1140000003"><img class="download-icon apple-icon" src="/static/images/static/apple-store-badge.svg" width="300" style="margin-right: 40px"></a> <a class="google-link" target="_blank" href="https://play.google.com/store/apps/details?id=com.italki.app"><img class="download-icon google-icon" src="/static/images/static/google-play-badge.png" width="300"></a></div></div></div></div><section class="app-feature"><div class="container no-padding-t bg-white mt15"><div class="text-center pv30 ph50"><h3>{{\'APP002\'|t}}</h3><p class="text-lb">{{\'APP003\'|t}}</p></div><div class="row" style="margin-bottom: 50px"><div class="col-sm-3 text-left"><div class="text-center"><img src="/static/images/hp-icon1.png" width="150" style="margin-left: -15px"></div><div class="icon-box"><h4>{{\'C0119\'|t}}</h4><p class="text-lb">{{\'APP004\'|t}}</p></div></div><div class="col-sm-3 text-left"><div class="text-center"><img src="/static/images/hp-icon3.png" width="150"></div><div class="icon-box"><h4>{{\'APP005\'|t}}</h4><p class="text-lb">{{\'APP006\'|t}}</p></div></div><div class="col-sm-3 text-left"><div class="app-icon" style="width: 150px; height: 150px;margin:0 auto"><img src="/static/images/italki_app_icon.png" width="130" style="margin-top: 5px"></div><div class="icon-box"><h4>{{\'ML003\'|t}}</h4><p class="text-lb">{{\'APP007\'|t}}</p></div></div><div class="col-sm-3 text-left"><div class="text-center"><img src="/static/images/hp-icon2.png" width="150" style="margin-left: -30px"></div><div class="icon-box"><h4>{{\'APP008\'|t}}</h4><p class="text-lb">{{\'APP009\'|t}}</p></div></div></div></div></section><section class="app-bullet"><div class="container no-padding-t bg-white mt15"><div class="row" style="margin-bottom: 50px"><div class="col-sm-12 text-center pv30"><h3 ng-bind-html="\'APP021\'|t"></h3></div><div class="col-sm-6"><div style="margin: 0 auto; max-width:380px"><ul class="text-bg" style="min-height: 350px"><li>{{\'APP022\'|t}}</li><li>{{\'APP023\'|t}}</li><li>{{\'APP024\'|t}}</li><li>{{\'APP025\'|t}}</li><li>{{\'APP026\'|t}}</li></ul><div class="text-center"><a target="_blank" href="https://itunes.apple.com/us/app/italki/id1140000003"><img class="download-icon" src="/static/images/static/apple-store-badge.svg" width="300"></a></div></div></div><div class="col-sm-6"><div style="margin: 0 auto; max-width:380px"><ul class="text-bg" style="min-height: 350px"><li>{{\'APP027\'|t}}</li><li>{{\'APP028\'|t}}</li><li>{{\'APP029\'|t}}</li><li>{{\'APP030\'|t}}</li><li>{{\'APP031\'|t}}</li></ul><div class="text-center"><a target="_blank" href="https://play.google.com/store/apps/details?id=com.italki.app"><img class="download-icon" src="/static/images/static/google-play-badge.png" width="300"></a></div><div class="text-center" ng-if="showDownload" style="padding-top: 10px"><a ng-click="downloadApp()" target="_blank">Download italki app apk</a></div></div></div></div></div></section><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/calendarTest.html",'<style>/*!\n * FullCalendar v1.6.4 Stylesheet\n * Docs & License: http://arshaw.com/fullcalendar/\n * (c) 2013 Adam Shaw\n */\n\n  .fc {\n    direction: ltr;\n    text-align: left;\n  }\n\n  .fc table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  html .fc,\n  .fc table {\n    font-size: 1em;\n  }\n\n  .fc td,\n  .fc th {\n    padding: 0;\n    vertical-align: top;\n  }\n\n  /* Header\n  ------------------------------------------------------------------------*/\n\n  .fc-header td {\n    white-space: nowrap;\n  }\n\n  .fc-header-left {\n    width: 25%;\n    text-align: left;\n  }\n\n  .fc-header-center {\n    text-align: center;\n  }\n\n  .fc-header-right {\n    width: 25%;\n    text-align: right;\n  }\n\n  .fc-header-title {\n    display: inline-block;\n    vertical-align: top;\n  }\n\n  .fc-header-title h2 {\n    margin-top: 0;\n    white-space: nowrap;\n  }\n\n  .fc .fc-header-space {\n    padding-left: 10px;\n  }\n\n  .fc-header .fc-button {\n    margin-bottom: 1em;\n    vertical-align: top;\n  }\n\n  /* buttons edges butting together */\n\n  .fc-header .fc-button {\n    margin-right: -1px;\n  }\n\n  .fc-header .fc-corner-right, /* non-theme */\n  .fc-header .ui-corner-right {\n    /* theme */\n    margin-right: 0; /* back to normal */\n  }\n\n  /* button layering (for border precedence) */\n\n  .fc-header .fc-state-hover,\n  .fc-header .ui-state-hover {\n    z-index: 2;\n  }\n\n  .fc-header .fc-state-down {\n    z-index: 3;\n  }\n\n  .fc-header .fc-state-active,\n  .fc-header .ui-state-active {\n    z-index: 4;\n  }\n\n  /* Content\n  ------------------------------------------------------------------------*/\n\n  .fc-content {\n    clear: both;\n    zoom: 1; /* for IE7, gives accurate coordinates for [un]freezeContentHeight */\n  }\n\n  .fc-view {\n    width: 100%;\n    overflow: hidden;\n  }\n\n  /* Cell Styles\n  ------------------------------------------------------------------------*/\n\n  .fc-widget-header, /* <th>, usually */\n  .fc-widget-content {\n    /* <td>, usually */\n    border: 1px solid #ddd;\n  }\n\n  .fc-state-highlight {\n    /* <td> today cell */\n    /* TODO: add .fc-today to <th> */\n    background: #fcf8e3;\n  }\n\n  .fc-cell-overlay {\n    /* semi-transparent rectangle while dragging */\n    background: #bce8f1;\n    opacity: .3;\n    filter: alpha(opacity=30); /* for IE */\n  }\n\n  /* Buttons\n  ------------------------------------------------------------------------*/\n\n  .fc-button {\n    position: relative;\n    display: inline-block;\n    padding: 0 .6em;\n    overflow: hidden;\n    height: 1.9em;\n    line-height: 1.9em;\n    white-space: nowrap;\n    cursor: pointer;\n  }\n\n  .fc-state-default {\n    /* non-theme */\n    border: 1px solid;\n  }\n\n  .fc-state-default.fc-corner-left {\n    /* non-theme */\n  }\n\n  .fc-state-default.fc-corner-right {\n    /* non-theme */\n  }\n\n  /*\n      Our default prev/next buttons use HTML entities like &lsaquo; &rsaquo; &laquo; &raquo;\n      and we\'ll try to make them look good cross-browser.\n  */\n\n  .fc-text-arrow {\n    margin: 0 .1em;\n    font-size: 2em;\n    font-family: "Courier New", Courier, monospace;\n    vertical-align: baseline; /* for IE7 */\n  }\n\n  .fc-button-prev .fc-text-arrow,\n  .fc-button-next .fc-text-arrow {\n    /* for &lsaquo; &rsaquo; */\n    font-weight: bold;\n  }\n\n  /* icon (for jquery ui) */\n\n  .fc-button .fc-icon-wrap {\n    position: relative;\n    float: left;\n    top: 50%;\n  }\n\n  .fc-button .ui-icon {\n    position: relative;\n    float: left;\n    margin-top: -50%;\n    *margin-top: 0;\n    *top: -50%;\n  }\n\n  /*\n    button states\n    borrowed from twitter bootstrap (http://twitter.github.com/bootstrap/)\n  */\n\n  .fc-state-default {\n    background-color: #f5f5f5;\n    background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\n    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\n    background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\n    background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\n    background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\n    background-repeat: repeat-x;\n    border-color: #e6e6e6 #e6e6e6 #bfbfbf;\n    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n    color: #333;\n    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n  }\n\n  .fc-state-hover,\n  .fc-state-down,\n  .fc-state-active,\n  .fc-state-disabled {\n    color: #333333;\n    background-color: #e6e6e6;\n  }\n\n  .fc-state-hover {\n    color: #333333;\n    text-decoration: none;\n    background-position: 0 -15px;\n    -webkit-transition: background-position 0.1s linear;\n    -moz-transition: background-position 0.1s linear;\n    -o-transition: background-position 0.1s linear;\n    transition: background-position 0.1s linear;\n  }\n\n  .fc-state-down,\n  .fc-state-active {\n    background-color: #cccccc;\n    background-image: none;\n    outline: 0;\n    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n  }\n\n  .fc-state-disabled {\n    cursor: default;\n    background-image: none;\n    opacity: 0.65;\n    filter: alpha(opacity=65);\n    box-shadow: none;\n  }\n\n  /* Global Event Styles\n  ------------------------------------------------------------------------*/\n\n  .fc-event-container > * {\n    z-index: 8;\n  }\n\n  .fc-event-container > .ui-draggable-dragging,\n  .fc-event-container > .ui-resizable-resizing {\n    z-index: 9;\n  }\n\n  .fc-event {\n    border: 1px solid #3a87ad; /* default BORDER color */\n    background-color: #3a87ad; /* default BACKGROUND color */\n    color: #fff; /* default TEXT color */\n    font-size: .85em;\n    cursor: default;\n  }\n\n  a.fc-event {\n    text-decoration: none;\n  }\n\n  a.fc-event,\n  .fc-event-draggable {\n    cursor: pointer;\n  }\n\n  .fc-rtl .fc-event {\n    text-align: right;\n  }\n\n  .fc-event-inner {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .fc-event-time,\n  .fc-event-title {\n    padding: 0 1px;\n  }\n\n  .fc .ui-resizable-handle {\n    display: block;\n    position: absolute;\n    z-index: 99999;\n    overflow: hidden; /* hacky spaces (IE6/7) */\n    font-size: 300%; /* */\n    line-height: 50%; /* */\n  }\n\n  /* Horizontal Events\n  ------------------------------------------------------------------------*/\n\n  .fc-event-hori {\n    border-width: 1px 0;\n    margin-bottom: 1px;\n  }\n\n  .fc-ltr .fc-event-hori.fc-event-start,\n  .fc-rtl .fc-event-hori.fc-event-end {\n    border-left-width: 1px;\n  }\n\n  .fc-ltr .fc-event-hori.fc-event-end,\n  .fc-rtl .fc-event-hori.fc-event-start {\n    border-right-width: 1px;\n  }\n\n  /* resizable */\n\n  .fc-event-hori .ui-resizable-e {\n    top: 0 !important; /* importants override pre jquery ui 1.7 styles */\n    right: -3px !important;\n    width: 7px !important;\n    height: 100% !important;\n    cursor: e-resize;\n  }\n\n  .fc-event-hori .ui-resizable-w {\n    top: 0 !important;\n    left: -3px !important;\n    width: 7px !important;\n    height: 100% !important;\n    cursor: w-resize;\n  }\n\n  .fc-event-hori .ui-resizable-handle {\n    _padding-bottom: 14px; /* IE6 had 0 height */\n  }\n\n  /* Reusable Separate-border Table\n  ------------------------------------------------------------*/\n\n  table.fc-border-separate {\n    border-collapse: separate;\n  }\n\n  .fc-border-separate th,\n  .fc-border-separate td {\n    border-width: 1px 0 0 1px;\n  }\n\n  .fc-border-separate th.fc-last,\n  .fc-border-separate td.fc-last {\n    border-right-width: 1px;\n  }\n\n  .fc-border-separate tr.fc-last th,\n  .fc-border-separate tr.fc-last td {\n    border-bottom-width: 1px;\n  }\n\n  .fc-border-separate tbody tr.fc-first td,\n  .fc-border-separate tbody tr.fc-first th {\n    border-top-width: 0;\n  }\n\n  /* Month View, Basic Week View, Basic Day View\n  ------------------------------------------------------------------------*/\n\n  .fc-grid th {\n    text-align: center;\n  }\n\n  .fc .fc-week-number {\n    width: 22px;\n    text-align: center;\n  }\n\n  .fc .fc-week-number div {\n    padding: 0 2px;\n  }\n\n  .fc-grid .fc-day-number {\n    float: right;\n    padding: 0 2px;\n  }\n\n  .fc-grid .fc-other-month .fc-day-number {\n    opacity: 0.3;\n    filter: alpha(opacity=30); /* for IE */\n    /* opacity with small font can sometimes look too faded\n         might want to set the \'color\' property instead\n         making day-numbers bold also fixes the problem */\n  }\n\n  .fc-grid .fc-day-content {\n    clear: both;\n    padding: 2px 2px 1px; /* distance between events and day edges */\n  }\n\n  /* event styles */\n\n  .fc-grid .fc-event-time {\n    font-weight: bold;\n  }\n\n  /* right-to-left */\n\n  .fc-rtl .fc-grid .fc-day-number {\n    float: left;\n  }\n\n  .fc-rtl .fc-grid .fc-event-time {\n    float: right;\n  }\n\n  /* Agenda Week View, Agenda Day View\n  ------------------------------------------------------------------------*/\n\n  .fc-agenda table {\n    border-collapse: separate;\n  }\n\n  .fc-agenda-days th {\n    text-align: center;\n  }\n\n  .fc-agenda .fc-agenda-axis {\n    width: 50px;\n    padding: 0 4px;\n    vertical-align: middle;\n    text-align: right;\n    white-space: nowrap;\n    font-weight: normal;\n  }\n\n  .fc-agenda .fc-week-number {\n    font-weight: bold;\n  }\n\n  .fc-agenda .fc-day-content {\n    padding: 2px 2px 1px;\n  }\n\n  /* make axis border take precedence */\n\n  .fc-agenda-days .fc-agenda-axis {\n    border-right-width: 1px;\n  }\n\n  .fc-agenda-days .fc-col0 {\n    border-left-width: 0;\n  }\n\n  /* all-day area */\n\n  .fc-agenda-allday th {\n    border-width: 0 1px;\n  }\n\n  .fc-agenda-allday .fc-day-content {\n    min-height: 34px; /* TODO: doesnt work well in quirksmode */\n    _height: 34px;\n  }\n\n  /* divider (between all-day and slots) */\n\n  .fc-agenda-divider-inner {\n    height: 2px;\n    overflow: hidden;\n  }\n\n  .fc-widget-header .fc-agenda-divider-inner {\n    background: #eee;\n  }\n\n  /* slot rows */\n\n  .fc-agenda-slots th {\n    border-width: 1px 1px 0;\n  }\n\n  .fc-agenda-slots td {\n    border-width: 1px 0 0;\n    background: none;\n  }\n\n  .fc-agenda-slots td div {\n    height: 20px;\n  }\n\n  .fc-agenda-slots tr.fc-slot0 th,\n  .fc-agenda-slots tr.fc-slot0 td {\n    border-top-width: 0;\n  }\n\n  .fc-agenda-slots tr.fc-minor th,\n  .fc-agenda-slots tr.fc-minor td {\n    border-top-style: dotted;\n  }\n\n  .fc-agenda-slots tr.fc-minor th.ui-widget-header {\n    *border-top-style: solid; /* doesn\'t work with background in IE6/7 */\n  }\n\n  /* Vertical Events\n  ------------------------------------------------------------------------*/\n\n  .fc-event-vert {\n    border-width: 0 1px;\n  }\n\n  .fc-event-vert.fc-event-start {\n    border-top-width: 1px;\n  }\n\n  .fc-event-vert.fc-event-end {\n    border-bottom-width: 1px;\n  }\n\n  .fc-event-vert .fc-event-time {\n    white-space: nowrap;\n    font-size: 10px;\n  }\n\n  .fc-event-vert .fc-event-inner {\n    position: relative;\n    z-index: 2;\n  }\n\n  .fc-event-vert .fc-event-bg {\n    /* makes the event lighter w/ a semi-transparent overlay  */\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    opacity: .25;\n    filter: alpha(opacity=25);\n  }\n\n  .fc .ui-draggable-dragging .fc-event-bg, /* TODO: something nicer like .fc-opacity */\n  .fc-select-helper .fc-event-bg {\n    display: none \\9; /* for IE6/7/8. nested opacity filters while dragging don\'t work */\n  }\n\n  /* resizable */\n\n  .fc-event-vert .ui-resizable-s {\n    bottom: 0 !important; /* importants override pre jquery ui 1.7 styles */\n    width: 100% !important;\n    height: 8px !important;\n    overflow: hidden !important;\n    line-height: 8px !important;\n    font-size: 11px !important;\n    font-family: monospace;\n    text-align: center;\n    cursor: s-resize;\n  }\n\n  .fc-agenda .ui-resizable-resizing {\n    /* TODO: better selector */\n    _overflow: hidden;\n  }</style><div class="container"><div class="panel"><div class="panel-body"><div id="calendar" class="vertical-box-column p-15 calendar fc fc-ltr"><table class="fc-header" style="width:100%"><tbody><tr><td class="fc-header-left"><span class="fc-button fc-button-today fc-state-default fc-corner-left fc-corner-right fc-state-disabled" unselectable="on">today</span><span class="fc-header-space"></span><span class="fc-button fc-button-prev fc-state-default fc-corner-left" unselectable="on"><span class="fc-text-arrow">‹</span></span><span class="fc-button fc-button-next fc-state-default fc-corner-right" unselectable="on"><span class="fc-text-arrow">›</span></span><span class="fc-header-space"></span></td><td class="fc-header-center"><span class="fc-header-title"><h2>November 2015</h2></span></td><td class="fc-header-right"><span class="fc-button fc-button-month fc-state-default fc-corner-left fc-state-active" unselectable="on">month</span><span class="fc-button fc-button-agendaWeek fc-state-default" unselectable="on">week</span><span class="fc-button fc-button-agendaDay fc-state-default fc-corner-right" unselectable="on">day</span></td></tr></tbody></table><div class="fc-content" style="position: relative"><div class="fc-view fc-view-month fc-grid" style="position:relative" unselectable="on"><table class="fc-border-separate" style="width:100%" cellspacing="0"><thead><tr class="fc-first fc-last"><th class="fc-day-header fc-sun fc-widget-header fc-first" style="width: 14%">Sun</th><th class="fc-day-header fc-mon fc-widget-header" style="width: 14%">Mon</th><th class="fc-day-header fc-tue fc-widget-header" style="width: 14%">Tue</th><th class="fc-day-header fc-wed fc-widget-header" style="width: 14%">Wed</th><th class="fc-day-header fc-thu fc-widget-header" style="width: 14%">Thu</th><th class="fc-day-header fc-fri fc-widget-header" style="width: 14%">Fri</th><th class="fc-day-header fc-sat fc-widget-header fc-last" style="width: 14%">Sat</th></tr></thead><tbody><tr class="fc-week fc-first"><td class="fc-day fc-sun fc-widget-content fc-past fc-first" data-date="2015-11-01"><div style="min-height: 119px"><div class="fc-day-number">1</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label action">11:30 - 12:15 Namhee</div><div class="label action">21:30 - 22:15 Caroline</div>&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-past" data-date="2015-11-02"><div><div class="fc-day-number">2</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label cancel">11:30 - 12:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-past" data-date="2015-11-03"><div><div class="fc-day-number">3</div><div class="fc-day-content"><div style="position: relative; height: 120px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-past" data-date="2015-11-04"><div><div class="fc-day-number">4</div><div class="fc-day-content"><div style="position: relative; height: 120px">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-today fc-state-highlight" data-date="2015-11-05"><div><div class="fc-day-number">5</div><div class="fc-day-content"><div style="position: relative; height: 120px">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-future" data-date="2015-11-06"><div><div class="fc-day-number">6</div><div class="fc-day-content"><div style="position: relative; height: 120px">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-future fc-last" data-date="2015-11-07"><div><div class="fc-day-number">7</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-future fc-first" data-date="2015-11-08"><div style="min-height: 118px"><div class="fc-day-number">8</div><div class="fc-day-content"><div style="position: relative; height: 92px"><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-future" data-date="2015-11-09"><div><div class="fc-day-number">9</div><div class="fc-day-content"><div style="position: relative; height: 92px">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-future" data-date="2015-11-10"><div><div class="fc-day-number">10</div><div class="fc-day-content"><div style="position: relative; height: 92px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-future" data-date="2015-11-11"><div><div class="fc-day-number">11</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-future" data-date="2015-11-12"><div><div class="fc-day-number">12</div><div class="fc-day-content"><div style="position: relative; height: 92px">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-future" data-date="2015-11-13"><div><div class="fc-day-number">13</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-future fc-last" data-date="2015-11-14"><div><div class="fc-day-number">14</div><div class="fc-day-content"><div style="position: relative; height: 92px">&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-future fc-first" data-date="2015-11-15"><div style="min-height: 118px"><div class="fc-day-number">15</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-future" data-date="2015-11-16"><div><div class="fc-day-number">16</div><div class="fc-day-content"><div style="position: relative; height: 88px"><div class="label new">16:30 - 17:15 Makie Kim</div>&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-future" data-date="2015-11-17"><div><div class="fc-day-number">17</div><div class="fc-day-content"><div style="position: relative; height: 88px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-future" data-date="2015-11-18"><div><div class="fc-day-number">18</div><div class="fc-day-content"><div style="position: relative; height: 88px">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-future" data-date="2015-11-19"><div><div class="fc-day-number">19</div><div class="fc-day-content"><div style="position: relative; height: 88px"><div class="label new">14:30 - 15:15 Jackey</div>&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-future" data-date="2015-11-20"><div><div class="fc-day-number">20</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">14:30 - 15:15 Jackey</div><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-future fc-last" data-date="2015-11-21"><div><div class="fc-day-number">21</div><div class="fc-day-content"><div style="position: relative; height: 120px"><div class="label new">14:30 - 15:15 Jackey</div><div class="label new">21:30 - 22:15 Namhee</div>&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-future fc-first" data-date="2015-11-22"><div style="min-height: 118px"><div class="fc-day-number">22</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-future" data-date="2015-11-23"><div><div class="fc-day-number">23</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-future" data-date="2015-11-24"><div><div class="fc-day-number">24</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-future" data-date="2015-11-25"><div><div class="fc-day-number">25</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-future" data-date="2015-11-26"><div><div class="fc-day-number">26</div><div class="fc-day-content"><div style="position: relative; height: 0px"><div class="label new">14:30 - 15:15 Jackey</div>&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-future" data-date="2015-11-27"><div><div class="fc-day-number">27</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-future fc-last" data-date="2015-11-28"><div><div class="fc-day-number">28</div><div class="fc-day-content"><div style="position: relative; height: 0px"><div class="label new">16:30 - 17:15 Makie Kim</div>&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-future fc-first" data-date="2015-11-29"><div style="min-height: 118px"><div class="fc-day-number">29</div><div class="fc-day-content"><div style="position: relative; height: 0px"><div class="label new">14:30 - 15:15 Jackey</div>&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-future" data-date="2015-11-30"><div><div class="fc-day-number">30</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-other-month fc-future" data-date="2015-12-01"><div><div class="fc-day-number">1</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-other-month fc-future" data-date="2015-12-02"><div><div class="fc-day-number">2</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-other-month fc-future" data-date="2015-12-03"><div><div class="fc-day-number">3</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-other-month fc-future" data-date="2015-12-04"><div><div class="fc-day-number">4</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-other-month fc-future fc-last" data-date="2015-12-05"><div><div class="fc-day-number">5</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td></tr><tr class="fc-week fc-last"><td class="fc-day fc-sun fc-widget-content fc-other-month fc-future fc-first" data-date="2015-12-06"><div style="min-height: 119px"><div class="fc-day-number">6</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-other-month fc-future" data-date="2015-12-07"><div><div class="fc-day-number">7</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-other-month fc-future" data-date="2015-12-08"><div><div class="fc-day-number">8</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-other-month fc-future" data-date="2015-12-09"><div><div class="fc-day-number">9</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-other-month fc-future" data-date="2015-12-10"><div><div class="fc-day-number">10</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-other-month fc-future" data-date="2015-12-11"><div><div class="fc-day-number">11</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-other-month fc-future fc-last" data-date="2015-12-12"><div><div class="fc-day-number">12</div><div class="fc-day-content"><div style="position: relative; height: 0px">&nbsp;</div></div></div></td></tr></tbody></table></div></div></div></div></div></div><pre ng-bind="teacherInfo|json"></pre>'),
a.put("/views/page/challenge.html","<div ng-include=\"'/views/common/top.tpl.bs.html'\"></div><style>.navbar{\n    z-index:100\n  }\n  h1{\n    font-family: 'Walter Turncoat', cursive;\n    color:#555;\n  }\n  .back-wave small{\n    color:#fff\n  }\n  .content .btn, .bg-faq .btn, .hero .btn{\n    border-radius: 10px;\n    font-size: 18px;\n    font-weight: 200;\n    padding: 15px 30px;\n    border:none\n  }\n  .lc_user_con .btn{\n    background: #75d7af;\n  }\n  .footer{\n    margin-top: 0;\n  }\n  .lc_user_con h1{\n    margin-top: 40px;\n  }\n  .lc_user_con p.text-lb{\n    margin:0 30px 50px\n  }\n  .hero .row .col-sm-4{\n    padding: 0 55px;\n  }\n  .back-wave{\n    padding-top:80px;\n    padding-bottom:120px;\n    background: url('/static/images/bg_wave_pattern.png') repeat;\n    color: #fff\n  }\n  .main-content{\n    background: url('/static/images/bg_ricepaper.png') repeat;\n    position: relative;\n  }\n  .main-content .bg-gp{\n    background: url('/static/images/bg_gp.png') no-repeat top center; position: absolute;\n    left: 0;\n    right: 0;\n    top: -60px;\n    height: 160px;\n  }\n  .main-content .line{\n    background: url('/static/images/static/line.png') no-repeat top center; position: absolute;\n    left: 0;\n    right: 0;\n    top: -30px;\n    height: 2950px;\n  }\n  .main-content .content{\n    position: relative;\n    left: 0;\n    right:0;\n  }\n\n  .three-guys button{\n    border-radius: 10px;\n    font-size: 25px;\n    font-weight: 200;\n    padding: 15px 30px;\n  }\n  .back-white{\n    position: absolute;\n    background: #fff;\n    border-radius: 10px;\n    padding: 15px;\n    top: 150px;\n    left: 30px;\n    right: 30px;\n  }\n  .back-white .arrow{\n    position: absolute;\n    background: url('/static/images/static/lc_icon_arrow.png') no-repeat;\n    width: 40px;\n    height: 24px;\n    top: -24px;\n    left: 50%;\n    margin-left: -20px;\n  }\n  .back-white .num{\n    position: absolute;\n    background: url('/static/images/static/lc_num1.png') no-repeat;\n    width: 64px;\n    height: 64px;\n    top: -32px;\n    left: -32px;\n  }\n  .back-white .num.num2{\n    background: url('/static/images/static/lc_num2.png') no-repeat;\n  }\n  .back-white .num.num3{\n    background: url('/static/images/static/lc_num3.png') no-repeat;\n  }\n  .back-white .text-lb{\n    padding: 0 20px\n  }\n  .hero-video{\n    background: url('/static/images/static/bg_hero.jpg');\n    background-size: cover;\n    height:680px;\n    position: relative;\n  }\n  .hero-video .text-center h1{\n    font-size: 60px;\n    color: #fff;\n  }\n  .hero-video div{\n    position: absolute;\n    top:50%;\n    margin-top: -100px;\n    left: 0;\n    right:0;\n    color:#fff\n  }\n  .hero-video i{\n    font-size: 80px\n  }\n  .bg-faq h1{\n    margin-top: 40px\n  }\n  .bg-user h1{\n    margin-top: 0\n  }\n  .bg-footer{\n    background: url('/static/images/static/bg_lc_footer.png') left -50px;\n    height: 250px;\n    padding-top: 0;\n  }\n  .bg-footer h1{\n    margin-bottom: 22px\n  }\n  @media (max-width: 1024px) and (min-width: 768px) {\n    .lc_user_pic{\n      width: 100%;\n    }\n    .lc_user_con h1{\n      margin-top: 0;\n    }\n    .hero .row .col-sm-4{\n      padding: 0;\n    }\n    .back-white{\n      left: 15px;\n      right: 15px;\n    }\n    .back-white .text-lb{\n      padding: 0;\n    }\n    .back-white h3{\n      font-size: 20px;\n    }\n  }\n\n  @media (max-width: 767px) and (min-width: 480px) {\n    .header-small.navbar {\n      margin-bottom: 0;\n    }\n    h1{\n      font-size: 26px;\n    }\n    .back-wave h3,.main-content h3{\n      font-size: 18px;\n    }\n    .back-wave{\n      padding-top: 20px;\n    }\n    .lc_user_pic{\n      width: 100%;\n    }\n    .lc_user_con{\n      padding-top: 40px;\n    }\n    .lc_user_con h1{\n      font-size: 30px;\n      margin-top: 0;\n    }\n    .lc_user_con p.text-lb{\n      margin: 0 0 50px;\n    }\n    .container.hero{\n      padding-top: 0;\n    }\n    .hero .row .col-sm-4{\n      padding: 0;\n    }\n    .hero .visible-phone {\n      display: initial!important;\n    }\n    .hero .row .col-sm-4 h4{\n      padding: 0 30px;\n    }\n    .back-white{\n      left:50px;\n      right:50px\n    }\n    .back-white .text-lb{\n      padding: 0\n    }\n    .main-content .line{\n      background: url('/static/images/static/line-2.png') no-repeat top center; position: absolute;\n      left: 0;\n      right: 0;\n      top: -30px;\n      height: 4650px;\n    }\n    .hero-video{\n      background-position: 65% 50%;\n    }\n    .hero-video .text-center h1{\n      font-size: 40px;\n    }\n    .bg-footer{\n      background: none;\n      height: inherit;\n      padding-bottom: 20px;\n    }\n  }\n  @media (max-width:480px) {\n    h1{\n      font-size: 26px;\n    }\n    .back-wave .container{\n      padding-top: 0px!important;\n    }\n    .back-wave h3,.main-content h3{\n      font-size: 18px;\n    }\n    .back-wave{\n      padding-top: 20px;\n    }\n    .lc_user_pic{\n      width: 100%;\n    }\n    .lc_user_con{\n      padding-top: 40px;\n    }\n    .lc_user_con h1{\n      font-size: 30px;\n      margin-top: 0;\n    }\n    .lc_user_con p.text-lb{\n      margin: 0 0 50px;\n    }\n    .hero .row .col-sm-4{\n      padding: 0;\n    }\n    .hero .visible-phone {\n      display: initial!important;\n    }\n    .hero .row .col-sm-4 h4{\n      padding: 0 30px;\n    }\n    .back-white{\n      left:50px;\n      right:50px\n    }\n    .back-white .text-lb{\n      padding: 0\n    }\n    .main-content .line{\n      background: url('/static/images/static/line-2.png') no-repeat top center; position: absolute;\n      left: 0;\n      right: 0;\n      top: -30px;\n      height: 4650px;\n    }\n    .hero-video{\n      background-position: 65% 50%;\n    }\n    .hero-video .text-center h1{\n      font-size: 40px;\n    }\n    .bg-footer{\n      background: none;\n      height: inherit;\n      padding-bottom: 20px;\n    }\n"+'  }</style><link href="https://fonts.googleapis.com/css?family=Walter+Turncoat" rel="stylesheet" type="text/css"><div style="overflow: hidden"><div class="back-wave" style=""><div class="container text-center hero"><div class="row grid-gutter-margin-b visible-desktop hidden-768"><div class="col-md-12"><img src="/static/images/static/lc_logo.png"></div></div><div class="visible-phone"><img src="/static/images/static/lc_logo2.png"><h3>Start 2016 exploring The Mysterious<br>Land of language learning</h3><button class="btn btn-danger" onclick="sign_up()">START THE JOURNEY</button></div><h3>How Does It Work</h3><div class="row"><div class="col-sm-4"><img src="/static/images/static/lc_icon1.png"> <span class="text-bg visible-phone">Sign Up</span><h3 class="hidden-phone">Sign Up</h3><h4 class="text-slim" style="font-size: 17px">Join the challenge for free and start the year speaking a foreign language!</h4></div><div class="col-sm-4"><img src="/static/images/static/lc_icon2.png"> <span class="text-bg visible-phone">Take lessons</span><h3 class="hidden-phone">Take lessons</h3><h4 class="text-slim" style="font-size: 17px">Improve your language skills by taking lessons with italki teachers between 16th January and 29th February.</h4></div><div class="col-sm-4"><img src="/static/images/static/lc_icon3.png"> <span class="text-bg visible-phone">Get rewards</span><h3 class="hidden-phone">Get rewards</h3><h4 class="text-slim" style="font-size: 17px">There are multiple prizes waiting for you. Nothing beats learning and winning at the same time!</h4></div></div></div></div><div class="main-content"><div class="bg-gp"></div><div class="line"></div><div class="content"><div class="container text-center no-padding-t grid-gutter-margin-b three-guys"><h1>The first step for any<br>Explorer is finding a map!</h1><h5 class="text-muted text-lb">Schedule your first lesson and receive a language learning guide from Richard Simcott.<br>Join thousands of language learners and discover how far you can go...</h5><button class="btn btn-danger grid-gutter-margin-b" onclick="sign_up()">JOIN</button><h1>Take 10, 20 or 30 hours of lessons and get the rewards below!</h1><div class="row"><div class="col-sm-4 is-relative"><img src="/static/images/static/lc_man1.png"><div class="back-white"><div class="arrow"></div><div class="num"></div><h3 style="font-family: \'Walter Turncoat\', cursive; margin-top:0">Language Tourist</h3><div class="text-lb"><p>italki will donate $1 to Wikitongues to protect endangered languages.</p>Enter a lucky draw of $500 for a trip to the country of your choice.</div></div></div><div class="col-sm-4"><img src="/static/images/static/lc_man2.png"><div class="back-white"><div class="arrow"></div><div class="num num2"></div><h3 style="font-family: \'Walter Turncoat\', cursive; margin-top:0">Language Explorer</h3><div class="text-lb"><p>Online access to the movie "The Hyperglot", an inspiring work of art that all language explorers should watch.</p><p>Ask your questions in a webcast with famous polyglots like Richard Simcott and Olly Richards.</p><p>+ All rewards from Language Tourist!</p></div></div></div><div class="col-sm-4"><img src="/static/images/static/lc_man3.png"><div class="back-white"><div class="arrow"></div><div class="num num3"></div><h3 style="font-family: \'Walter Turncoat\', cursive; margin-top:0">Language Captain</h3><div class="text-lb"><p>An italki tshirt that will help you start conversations in other languages!</p><p>Display your language skills with our italki stickers.</p><p>A flashlight pen! A must have for any Language Captain.</p><p>+ All rewards from Language Tourist & Explorer!</p></div></div></div></div></div><style>#bootstrap_Message_Box{\n          position: fixed!important;\n        }</style><div class="hero-video"><div class="text-center"><h1>The Language Challenge</h1><h3 class="grid-gutter-margin-b">How Does It Work</h3><a href="javascript:void()" onclick="ITALKI.util.bootstrap.ShowMsgBoxIF(\'2016 New Year Language Challenge\',\'https://www.youtube.com/embed/E3MRcAYwEHQ?rel=0&modestbranding=1&autohide=1&showinfo=0&controls=0\',600,338)"><img src="/static/images/static/play.png"></a></div></div><div class="container text-center bg-faq"><div class="row"><div class="col-md-4 col-sm-4 bg-user hidden-phone"><img src="/static/images/static/lc_ut.png" class="lc_user_pic"><h1 style="">Anwen</h1></div><div class="col-md-6 col-md-offset-1 col-sm-8 col-sm-offset-0 lc_user_con"><h1>WE DID IT! SO CAN YOU!</h1><div class="visible-phone text-center"><img src="/static/images/static/lc_ut2.png"></div><h3>Our Language Challenges have proven to help language learners get into a habit of learning. They help set a clear goal.</h3><p class="text-lb text-muted">"Accepting the italki Challenge was one of the best things I’ve done. I didn’t know any Japanese, or anything about it. By the end of the Challenge, I could read and write basic Japanese, and could hopefully get by in Japan. That’s incredible!... <a href="http://stories.italki.com/story/1909" class="text-danger">read full story</a></p><button class="btn btn-success grid-gutter-margin-b" onclick="top.location=\'http://stories.italki.com/story/category/language-challenge\'">Read more success stories</button></div></div><h1 style="">Frequently Asked Questions</h1><div class="row"><div class="col-sm-4"><h3>When will you start<br>counting the lessons?</h3><span class="text-lb">The Language Challenge takes place from January 16th until February 29th. We start counting completed "hours" on January 16th. If you join the Language Challenge after Jan 16th (registration ends on January 31st), all sessions taken between Jan 16th and Jan 31st will still count towards the challenge.</span></div><div class="col-sm-4"><h3>Can I take Instant<br>Tutoring lessons?</h3><span class="text-lb">Yes. Instant Tutoring lessons count, but as they are only 30 minutes in length, 2 Instant Tutoring lessons count for 1 completed one hour lesson</span></div><div class="col-sm-4"><h3>Do I have to pay for<br>the lessons I take?</h3><span class="text-lb">Yes. These lessons must be paid by the Challenger.</span></div></div><div class="row grid-gutter-margin-b3"><div class="col-sm-4"><h3>Do I have to take the<br>lessons on italki?</h3><span class="text-lb">Yes. the language lessons must be taken with a Professional Teacher or Community Tutor on italki.</span></div><div class="col-sm-4"><h3>How do I get the rewards?</h3><span class="text-lb">The challengers will get the rewards after the Language Challenge ends (after 29th Feb), according to the hours of lessons taken at italki (10, 20 or 30). Any participants taking more than 10 hours of lessons will enter the lucky draw of $500 for a trip. <a href="javascript:void()" onclick="moreinfo()">See full terms and conditions here</a></span></div><div class="col-sm-4"><h3>Who are Richard Simcott<br>and Olly Richards?</h3><span class="text-lb">"Richard Simcott is a polyglot who speaks 20 languages and has collaborated with The Times and Forbes on articles for language learning. Olly Richards is a travelling linguist who speaks 8 languages and writes about strategies for language learning at iwillteachyoualanguage.com"</span></div></div><button class="btn btn-danger grid-gutter-margin-b3" onclick="sign_up()">How do I start? Start here!</button></div><div class="bg-footer"><div class="container text-center no-padding-t"><h1>Language Challenge Partners</h1><div class="row"><div class="col-sm-3 col-xs-6"><img src="/static/images/static/lc_pr.png"></div><div class="col-sm-3 col-xs-6"><img src="/static/images/static/lc_pr2.png"></div><div class="col-sm-3 col-xs-6"><img src="/static/images/static/lc_pr3.png"></div><div class="col-sm-3 col-xs-6"><img src="/static/images/static/lc_pr4.png"></div></div><div class="row"><div class="col-sm-3 col-xs-6"><img src="/static/images/static/lc_pr5.png"></div></div><button class="btn btn-danger visible-phone" onclick="sign_up()">How do I start? Start here!</button></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/communitypolicy.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Community Policy</h3><ul><li>Introduction to Community Policy</li><li>Community Conduct Policy</li><li>Community Content Policy</li><li>Reporting Violations of italki Community Policy</li></ul><hr><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Introduction to Community Policy</h4><p>italki’s Community Policy help ensure that italki is a safe place where language learners from all over the world can connect with one another and help each other learn a language.</p><p>italki’s default position is to not delete, censor, or edit user generated content in any of italki’s community features. However, there are cases in which italki may take extraordinary steps in response to violations of the Community Policy, the Terms of Service, and other policies.</p><p>These actions can include:<br>* Deleting or banning users<br>* Editing or removing content</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Community Conduct Policy</h4><p><strong>1. Do NOT Spam:</strong> Do not send the same message to multiple users or repeatedly post the same message in discussions, notebooks or answers sections.</p><p><strong>2. Do NOT Post or Send Commercial Advertisements:</strong> Do not post or comment for commercial purposes.</p><p><strong>3. Do NOT Search for a Romantic Relationship:</strong> Do not contact other italki members for dating, or to find sexual partners. italki considers this harassment. italki takes reports of unwanted sexual advances very seriously.</p><p><strong>4. Do NOT Harass, Bully, or Stalk:</strong> italki does not tolerate harassment, bullying or stalking. italki will take action on all reports of abusive behavior. Repeatedly messaging another user with unwanted friend requests or messages is a form of harassment.</p><p><strong>5. Do NOT Create False Identities:</strong> Claiming to be another person, creating a false presence for an organization, or creating multiple accounts is not allowed. Duplicate, fake, and joke profiles are not allowed.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Community Content Policy</h4><p>User Generated Content that falls into any of the following categories is prohibited and italki will remove this content. Any italki user that is in violation of italki policies can and will be removed from the italki system.</p><p><strong>1. Hate Speech and Offensive Language</strong><br>italki does not permit hate speech or offensive language. We do not permit users to attack others based on their race, ethnicity, national origin, religion, sex, gender, sexual orientation, disability or medical condition.</p><p><strong>2. Commercial or Promotional Content</strong><br>We ask that you respect our members by not contacting them for commercial purposes without their consent. In addition, do not make posts or comments that are solely for commercial purposes since this detracts from, and does not add anything of value to the language-learning community.</p><p><strong>3. Sexual and Pornographic Content</strong><br>italki has a strict policy against the sharing of pornographic content and any sexually explicit content. We also impose limitations on the display of nudity.</p><p><strong>4. Personally Identifiable Information</strong> italki does not allow publishing a user\'s personal information without a person\'s consent.</p><p><strong>5. Pirated Content</strong><br>italki does not allow users to share content on italki, where they do not have the rights to do so. We ask that you respect copyrights, trademarks, and other legal rights.</p><p><strong>6. Political or Religious Discussions</strong><br>italki does not permit discussions or graphics relating to political or religious events or groups. Politics and religion are sensitive topics that often lead to polarizing and hateful comments. It is our position to not have these types of discussions on a site that is meant for language learning.</p><p><strong>7. Violence</strong><br>We remove content when we think there is a risk of physical harm, or a threat to public or individual safety. You may not threaten others, or suggest acts of violence. We do not allow promoting, planning or celebrating any actions if they could result in harm to others, including theft and vandalism.</p><p><strong>8. Self-Harm</strong><br>italki takes threats of self-harm seriously. We remove any promotion or encouragement of self-mutilation, eating disorders, or drug abuse. We also work with suicide prevention agencies around the world to provide assistance for people in distress.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Reporting Violations of italki Community Policy</h4><p>If you think another user is violating the italki Community Policy or Terms of Service, please report this to italki. <a target="_blank" href="http://support.italki.com/hc/en-us/requests/new">Notify the italki team</a></p><p>If you see a post or comment that violates the Community Policy or Terms of Service, please use the "flag this comment" or "report concern" button.</p><p>Learn more about <a target="_blank" href="http://support.italki.com/hc/en-us/articles/206353478-How-do-I-report-inappropriate-or-abusive-things-on-italki-">reporting abuse.</a></p></div></div></div></div>'),a.put("/views/page/company.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><div class="container company no-padding-hr" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow\n     }" autoscroll><div class="bg-content"><div class="row text-center bg-content-row"><a class="support" href="http://support.italki.com/" target="_blank"><span>{{\'M0110\'|t}}</span>&nbsp;&nbsp;<i class="fa fa-question-circle-o red"></i></a><div class="company-h" ng-class="{false: \'submit-h\', true: \'col-sm-6\'}[!submitFlag1]"><h1 ng-bind-html="\'KP543\'|t"></h1><h4 class="text-slim">{{\'KP545\'|t}}</h4></div><div class="col-sm-6 col-sm-6-second"><div class="company-form" ng-if="!submitFlag1"><div class="static-heading"><p class="no-margin-vr"><strong>{{\'KP554\'|t}}</strong></p></div><form name="companyForm" novalidate><div class="static-content"><div class="form-group"><input type="text" class="form-control input-lg" placeholder="{{\'KP537\'|t}}" name="contactName" ng-model="landing.contact_name" ng-minlength="2" ng-maxlength="20" required><p class="help-block" ng-if="companyForm.$submitted&&companyForm.contactName.$error.required">{{\'KP332\'|t}}</p><p class="help-block" ng-if="companyForm.$submitted&&(companyForm.contactName.$error.minlength||companyForm.contactName.$error.maxlength)">{{\'ST155\'|t|format:2:20}}</p></div><div class="form-group"><input type="email" class="form-control input-lg" placeholder="{{\'KP538\'|t}}" name="contactEmail" ng-model="landing.email" ng-maxlength="100" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" required><p class="help-block" ng-if="companyForm.$submitted&&(companyForm.contactEmail.$error.required||companyForm.contactEmail.$invalid)||companyForm.contactEmail.$error.maxlength">{{\'C1014\'|t}}</p></div><div class="form-group"><input class="form-control input-lg" placeholder="{{\'KP539\'|t}}" name="contactPhone" ng-model="landing.phone" ng-maxlength="100"><p class="help-block" ng-if="companyForm.$submitted&&companyForm.contactPhone.$error.maxlength">{{\'ST155\'|t|format:0:100}}</p></div><div class="form-group"><div class="row"><div class="col-sm-7"><input type="text" class="form-control input-lg" placeholder="{{\'KP540\'|t}}" name="companyName" ng-model="landing.company_name" ng-minlength="2" ng-maxlength="100" required><p class="help-block" ng-if="companyForm.$submitted&&companyForm.companyName.$error.required">{{\'KP333\'|t}}</p><p class="help-block" ng-if="companyForm.$submitted&&(companyForm.companyName.$error.minlength||companyForm.companyName.$error.maxlength)">{{\'ST155\'|t|format:2:100}}</p></div><div class="col-sm-5 no-margin-b"><select data-ng-model="landing.interested_num" class="form-control select" name="interestedNum" ng-class="{\'changeColor\':landing.interested_num == \'\'}" required><option value disabled="disabled" selected="selected">{{\'KP541\'|t}}</option><option value="1">1-10</option><option value="2">10-29</option><option value="3">30-59</option><option value="4">60-99</option><option value="5">100-499</option><option value="6">500-999</option><option value="7">1000-9999</option><option value="8">&gt;10,000</option></select><p class="help-block" ng-if="companyForm.$submitted&&companyForm.interestedNum.$error.required">{{\'KP334\'|t}}</p></div></div></div><div class="form-group"><textarea rows="4" class="form-control input-lg" placeholder="{{\'KP542\'|t}}" name="comment" ng-model="landing.comment" ng-maxlength="1000">\n                </textarea><p class="help-block" ng-if="companyForm.$submitted&&companyForm.comment.$error.maxlength">{{\'ST155\'|t|format:0:1000}}</p></div><button class="btn btn-primary btn-block" type="submit" italki-click-with-spinner="companyForm.$valid&&sumbit()" nologin="0" stext="C0045"></button><p class="text-client-login text-left" ng-bind-html="\'KP558\'|t"></p></div></form></div></div></div></div><section class="point-content container" ng-if="!submitFlag1"><div class="row"><div class="col-sm-4 text-center"><i class="fa fa-globe" aria-hidden="true"></i><h5>{{\'KP546\'|t}}</h5><p class="text-sm">{{\'KP551\'|t}}</p></div><div class="col-sm-4 text-center"><i class="fa fa-calendar" aria-hidden="true"></i><h5>{{\'KP548\'|t}}</h5><p class="text-sm">{{\'KP549\'|t}}</p></div><div class="col-sm-4 text-center"><i class="fa fa-usd" aria-hidden="true"></i><h5>{{\'KP550\'|t}}</h5><p class="text-sm">{{\'KP547\'|t}}</p></div></div></section><section class="company-submit text-center" ng-if="submitFlag1"><h5>{{\'KP552\'|t}}</h5><p class="text-sm">{{\'KP553\'|t}}<span>{{\'KP555\'|t}}</span></p><a class="btn btn-primary" ng-if="!currentUser" href="/home">{{\'KP104\'|t}}</a> <a class="btn btn-primary" ng-if="currentUser" href="/dashboard">{{\'KP105\'|t}}</a></section></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/contactus.html",'<h2 translate="M0016"></h2><div class="row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b"><h4>If you have any questions about the website, please go to our <strong>support center</strong>:</h4><span><a href="http://support.italki.com">http://support.italki.com</a></span></div><div class="grid-gutter-margin-b"><h4>If you\'re interested in learning more about the company, please read our <strong>blog</strong> at:</h4><span><a href="http://blog.italki.com">http://blog.italki.com</a></span></div><div class="grid-gutter-margin-b"><h4>Become a Language Teacher on italki</h4><span>If you are interested in being a language teacher on italki, you can apply here.<br><a href="https://www.italki.com/teacher/apply">https://www.italki.com/teacher/apply</a></span></div><div class="grid-gutter-margin-b"><h4>Job Opportunities</h4><span>If you\'re interested in working at italki, please check out our job listings on our blog at<br><a href="http://blog.italki.com/jobs/">http://blog.italki.com/jobs/</a></span></div><div class="grid-gutter-margin-b"><h4>Media and Business Inquiries</h4><span>If you\'re from the media or a potential business partner, and are interested in contacting a company representative, please write to <strong>business@italki.com</strong>. We\'ll get back to you as fast as possible.</span></div><div class="grid-gutter-margin-b"><h4>Company Address</h4><p><span>italki is a Hong Kong registered company with development offices in Shanghai, China. Please let us know if you\'re interested in visiting us!</span></p><p><span><strong>ITALKI HK LIMITED</strong><br>Units 903-906A, 9/F, Kowloon Centre<br>33 Ashley Road, Tsimshatsui<br>Kowloon, Hong Kong</span></p><p><span><strong>ITALKI SHANGHAI</strong><br>990 Changping Road, Building 8<br>Jing\'an District, Shanghai, China</span></p></div></div></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">More about italki</h4><ul class="list-unstyled"><li><a ui-sref="about">{{\'M0017\'|t}}</a></li><li><a href="http://blog.italki.com" target="_blank">{{\'M0018\'|t}}</a></li><li><a ui-sref="press">{{\'M0033\'|t}}</a></li><li class="active"><a ui-sref="contactus">{{\'M0016\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/page/copyrightpolicy.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Copyright Policy</h3><ul><li>Removal of Material for Which Copyright Infringement is Claimed</li><li>Copyright and italki Articles<ul><li>Original Work</li><li>Article Copyright</li></ul></li><li>Contacting italki</li></ul><hr><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Removal of Material for Which Copyright Infringement is Claimed</h4><p><strong>italki</strong> has implemented procedures for receiving written notification of claimed infringements and for processing such claims in accordance with applicable law. If you believe your copyrights are being infringed by a user of the Services available at the domain and sub-domains of www.italki.com, please notify Customer Service with written notice as detailed within this subsection.</p><p>The information requested substantively complies with the safe harbor provisions of the Digital Millennium Copyright Act, 17 USC. § 512(c)(3)(A), which provides:</p><p class="no-margin-b">To be effective under this subsection, a notification of claimed infringement must be a written communication provided to the designated agent of a user that includes substantially the following:<br></p><ul><li>A physical or electronic signature of a person authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.</li><li>Identification of the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online Site are covered by a single notification, a representative list of such works at that Site.</li><li>Identification of the material that is claimed to be infringing or to be the subject of infringing activity and that is to be removed or access to which is to be disabled, and information reasonably sufficient to permit the teacher to locate the material.</li><li>Information reasonably sufficient to permit the teacher to contact the complaining party such as an address, telephone number, and if available, an electronic mail address at which the complaining party may be contacted.</li><li>A statement that the complaining party has a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent or the law.</li><li>A statement that the information in the notification is accurate, and under penalty of perjury, that the complaining party is authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.</li></ul><p>Notification from a copyright owner or from a person authorized to act on behalf of the copyright owner that fails to comply substantially with the provisions above shall not be considered as providing actual knowledge or an awareness of facts or circumstances from which infringing activity is apparent.</p><p>italki reserves the right, under appropriate circumstances and at its discretion, to disable and/or terminate the account or access of any user who repeatedly infringes or is repeatedly charged with infringing the copyrights or other intellectual property rights of others.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Copyright and italki Articles</h4><p>italki respects the intellectual property rights of others and desires to offer a platform which contains no content that violates those rights. We require that information submitted by members be accurate, lawful and not in violation of the rights of third parties.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Original Work</h4><p>All of the writing in an article submitted to italki must be your own.</p><p>Plagiarism is theft of intellectual property. It is dishonest and unethical. Plagiarism can constitute copyright infringement and you can be held accountable. If you reference any other works (books, news articles, publications, websites, etc.), you MUST give credit to the source. If your article is found to have plagiarized sections, it will be automatically rejected, and you will no longer be able to write articles for italki.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Article Copyright</h4><p class="no-margin-b">You retain the copyright to all articles that you submit to italki. When you submit an article to italki, you grant italki:</p><ul><li>Publishing Rights (first electronic rights)</li><li>Archival Rights</li><li>Editing and Formatting Rights</li></ul><h5 class="no-margin-b">Publishing Rights:</h5><ul><li>italki does not own the copyright, and italki does not have the right to resell content you submit.</li><li>italki reserves exclusive First Electronic Rights for the article globally. italki has the right to publish and republish the piece on the italki website, e-mail, downloadable file, and any other digital media.</li><li>Articles you submit could also be used in italki marketing materials.</li><li>All articles submitted to italki will give credit to you (the author), and will link to your italki profile page.</li><li>italki reserves the right to publish or not publish any content that is submitted.</li></ul><h5 class="no-margin-b">Archival Rights:</h5><ul><li>italki reserves the right to republish the article and keep it accessible by visitors for an indefinite period of time.</li></ul><h5 class="no-margin-b">Editing and Formatting Rights:</h5><ul><li>italki reserves the right to edit and reformat the final version of the article. italki will not change the meaning or alter the substance of the piece, but may edit the article for errors and wording.</li><li>italki reserves the right to reformat the article for the web, mobile and other applications.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Contacting italki</h4><p>If you wish to report a violation of Site, Application or Service Policies, have any questions or need assistance, please contact italki Customer Service as follows:</p>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></div></div></div></div>'),
a.put("/views/page/count.time.down.dashboard.html",'<style>.timer {\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    margin: 0 auto;\n    color:#2c2c2c;\n    padding-bottom: 5px;\n  }\n\n  .timer .days-wrapper, .timer .hours-wrapper, .timer .minutes-wrapper, .timer .seconds-wrapper {\n    display: inline-block;\n    width: 40px;\n    text-align: center;\n    margin: 0;\n    font-size: 18px;\n    cursor: pointer;\n    -o-transition: all .3s;\n    -moz-transition: all .3s;\n    -webkit-transition: all .3s;\n    -ms-transition: all .3s;\n    transition: all .3s;\n    text-shadow: none;\n    font-weight: 100;\n    line-height:1;\n\n  }\n\n  .timer .days, .timer .hours, .timer .minutes, .timer .seconds {\n    font-size: 40px;\n    font-weight: 300;\n  }\n\n  .timer-text{\n    background:#ffffff;\n    padding:20px;\n  }\n  @media (max-width:991px){\n    .timer{\n      padding-top :5px;\n    }\n  }</style><div class="panel no-border panel-dark"><div class="panel-body" class="is-relative"><div ng-if="!dashboard" class="not-dashboard"><div class="timer text-left"><p>{{\'LC043\'|t}}</p><div class="days-wrapper" style="margin-left: 3px"><p style="margin: 0px"><span class="days" ng-if="showObect.days>=10">{{showObect.days}}</span> <span class="days" ng-if="showObect.days<10">0{{showObect.days}}</span></p><span style="font-weight:300">{{\'LC044\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="days-wrapper"><p style="margin: 0px"><span class="hours" ng-if="showObect.hours>=10">{{showObect.hours}}</span> <span class="hours" ng-if="showObect.hours<10">0{{showObect.hours}}</span></p><span style="font-weight:300">{{\'LC010\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="days-wrapper"><p style="margin: 0px"><span class="minutes" ng-if="showObect.minutes>=10">{{showObect.minutes}}</span> <span class="minutes" ng-if="showObect.minutes<10">0{{showObect.minutes}}</span></p><span style="font-weight:300">{{\'LC045\'|t}}</span></div><div class="remain" ng-if="showTwo">{{\'LC087\'|t}}</div></div><a class="btn btn-primary btn-block text-up" ui-sref="challenge">{{\'C0171\'|t}}</a></div><div ng-if="dashboard"><div class="row"><div class="col-md-7"><h4 style="color: red;font-size: 16px">{{\'LC420\'|t}}</h4><span class="text-lb">{{\'LC421\'|t}}</span></div><div class="col-md-5"><div class="timer text-left" style="width: 250px; margin: 0 auto"><p>{{\'LC043\'|t}}</p><div class="days-wrapper" style="margin-left: 3px"><p style="margin: 0px"><span class="days" ng-if="showObect.days>=10">{{showObect.days}}</span> <span class="days" ng-if="showObect.days<10">0{{showObect.days}}</span></p><span style="font-weight:300">{{\'LC044\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="days-wrapper"><p style="margin: 0px"><span class="hours" ng-if="showObect.hours>=10">{{showObect.hours}}</span> <span class="hours" ng-if="showObect.hours<10">0{{showObect.hours}}</span></p><span style="font-weight:300">{{\'LC010\'|t}}</span></div><div class="days-wrapper"><span class="days"></span><br></div><div class="days-wrapper"><p style="margin: 0px"><span class="minutes" ng-if="showObect.minutes>=10">{{showObect.minutes}}</span> <span class="minutes" ng-if="showObect.minutes<10">0{{showObect.minutes}}</span></p><span style="font-weight:300">{{\'LC045\'|t}}</span></div><div class="remain" ng-if="showTwo">{{\'LC087\'|t}}</div></div><a style="width: 240px;margin: 0 auto" class="btn btn-lg btn-primary btn-block text-up" ui-sref="challenge">{{\'C0171\'|t}}</a></div></div><button type="button" class="close" aria-hidden="true" ng-click="closeBox()" style="position: absolute;z-index:1000; top: 4px;right: 6px">×</button></div></div></div>'),a.put("/views/page/giftcard.html",'<kp-notify></kp-notify><div ng-include="\'/views/common/top.tpl.bs.html\'"></div><style>.gift-input textarea{\n    resize: none;\n  }\n\n  .gift-input input.form-control{\n    height: 40px;\n  }\n\n  .gift-input h4{\n    margin-bottom: 15px;\n  }\n\n  @media (min-width: 767px) {\n    .gift-input input.form-control{\n      margin-bottom: 40px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    .gift-input .form-control{\n      width: 240px;\n    }\n\n    .gift-input h4 {\n      margin-bottom: 5px;\n    }\n  }\n\n\n\n  .margin-b10{\n    margin-bottom: 10px;\n  }\n\n  .margin-b20{\n    margin-bottom: 20px;\n  }\n\n  .margin-b30{\n    margin-bottom: 30px;\n  }\n\n  .margin-b40{\n    margin-bottom: 40px;\n  }\n\n  .gift-bg{\n    background: url(\'/static/images/giftcard/gift_header_bg.png\') no-repeat 50% 0;\n    background-size: cover;\n    width: 100%;\n    margin-top: 56px;\n    padding-top: 99px;\n    padding-bottom: 56px;\n  }\n\n\n  .form-style{\n    border: 1px solid #ccc;\n    box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);\n    -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);\n  }\n\n  .gift-bg .bg-content{\n    /*height: 229px;*/\n    text-align: center;\n\n  }\n\n  .gift-bg h1{\n    font-size:55px;\n    color: #fff;\n    margin-bottom: 48px;\n  }\n\n  .gift-bg .redeem-btn{\n    font-size: 14px;\n  }\n\n  .select-amount{\n    height: 50px;\n    line-height: 48px;\n    border: 1px solid #CCC;\n  }\n\n  .select-amount.selected ,.select-another.selected{\n    border: 3px solid #04BE02;\n    line-height: 44px;\n  }\n\n  .form-row{\n    padding-left: 28px;\n  }\n\n\n\n  .gift-container h3{\n    margin-bottom: 20px;\n  }\n\n  .grid-gutter-margin-b2{\n    marign-bottom: 20px;\n  }\n\n  .select-hr{\n    height: 1px;\n    background-color: #b4b4b4;\n    border: none;\n    outline: none;\n    position: relative;\n    margin-top: 34px;\n    margin-bottom: 34px;\n    width: 60%;\n  }\n\n  .select-hr:before{\n    content: "or";\n    position: absolute;\n    top: 0;\n    left: 50%;\n    color: #b4b4b4;\n    background: #FFF;\n    font-size: 20px;\n    padding: 0 20px;\n    -webkit-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n  }\n\n  .select-another{\n    width: 247px;\n    box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);\n    border: solid 1px #cccccc;\n    position: relative;\n  }\n\n  .select-another select{\n    width: 247px;\n    height: 40px;\n    appearance:none;\n    -moz-appearance:none;\n    -webkit-appearance:none;\n    border-radius: 0px;\n    border: none;\n    background: none;\n    font-size: 14px;\n    padding-left: 20px;\n  }\n\n  .select-another select:focus{\n    outline: none;\n  }\n\n  .select-another .fa.fa-angle-down{\n    font-size: 20px;\n    position: absolute;\n    right: 20px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n\n  .theme-btn{\n    width: 98px;\n    height: 40px;\n    line-height: 38px;\n    text-align: center;\n    font-size: 14px;\n    cursor: pointer;\n  }\n\n  .theme-btn.selected{\n    border: 3px solid #04BE02;\n    line-height: 34px;\n  }\n\n\n\n  .theme-btn + .theme-btn{\n    margin-left: 22px;\n  }\n\n  .theme-img-wrapper .theme-img img{\n    width: 175px;\n  }\n\n  .theme-img{\n    margin-right: 14px;\n    margin-bottom: 10px;\n    cursor: pointer;\n    border: 3px solid #fff;\n  }\n\n  .theme-img.selected{\n    border: 3px solid #04BE02;\n  }\n\n  .date-select{\n    width: 195px;\n    height: 40px;\n    padding-left: 60px;\n    text-overflow: ellipsis;\n    box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);\n    -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);\n    border: solid 1px #cccccc;\n  }\n\n  .date-select :focus{\n    outline: none;\n  }\n\n  .date-select-wrapper .fa-calendar{\n    font-size: 14px;\n    width: 40px;\n    height: 40px;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    z-index: 3;\n    text-align: center;\n    background: #777;\n    color: #FFF;\n  }\n\n  .date-select-wrapper .fa-calendar:before{\n    vertical-align: -13px;\n  }\n\n  .preview-wrapper{\n    width: 100%;\n    background: #FFF;\n    padding: 20px;\n    box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.2);\n    -webkit-box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.2);\n  }\n\n  .preview-card{\n    width: 100%;\n    box-shadow: 0 6px 10px 3px rgba(0, 0, 0, 0.2);\n    -webkit-box-shadow: 0 6px 10px 3px rgba(0, 0, 0, 0.2);\n    border-radius: 20px;\n  }\n\n  .preview-img img{\n    border-top-left-radius: 20px;\n    border-top-right-radius: 20px;\n  }\n\n  .preview-bottom{\n    background:#ff4338;\n    padding:5px;\n    border-bottom-left-radius: 20px;\n    border-bottom-right-radius: 20px;\n  }\n\n  .preview-amount{\n    float:left;\n    color:#fff;\n    font-size:14px;\n    padding-left: 28px;\n  }\n\n  .preview-code{\n    color:#fff;\n    float: right;\n    width: 203px;\n    text-align: center;\n    font-size: 14px;\n  }\n\n  .preview-text{\n    font-size: 16px;\n    color: #555;\n    font-weight: 500;\n  }\n\n  .preview-qa{\n    font-size: 18px;\n\n  }\n\n  .preview-qa ul{\n    padding-left: 0;\n  }\n\n  .preview-qa ul li{\n    list-style:none;\n    font-size: 14px;\n    padding:0px;\n    color:#545454;\n  }\n\n  .md-screen{\n    display: none !important;\n  }\n\n  .visible-ms{\n    display: none !important;\n  }\n\n  .invisible-ms{\n    display: block !important;\n  }\n\n  .calendar-text{\n    font-size: 14px;\n    margin-left: 10px;\n    display: inline-block;\n  }\n\n  .preview-btn{\n    display: inline-block;\n    margin-right: 5px;\n  }\n\n  .form-row{\n    margin-bottom: 60px;\n  }\n\n\n  @media (max-width: 991px) {\n    .lg-screen{\n      display: none !important;\n    }\n\n    .md-screen{\n      display: block !important;\n    }\n\n    .preview-card , .preview-text{\n      max-width: 440px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n\n    .fivetheme{\n      width: 30%;\n      margin-right:3%;\n      border: 3px solid #FFF;\n    }\n\n    .fivetheme.selected{\n      border: 3px solid #04BE02;\n    }\n\n    .more-btn{\n      right: 0;\n      bottom: 10px;\n    }\n\n    .more-btn2{\n      width: auto;\n      margint-top: 10px;\n    }\n\n    .main-gift .preview-amount{\n      padding-left: 10px;\n    }\n\n  }\n\n  @media (max-width: 767px) {\n    .gift-bg{\n      margin-top: 0px;\n      background: url(\'/static/images/giftcard/gift_header_bg_sm.png\') no-repeat 50% 0;\n      padding-top: 104px;\n      padding-bottom: 60px;\n      background-size: cover;\n    }\n\n    .gift-bg .main-title{\n      font-size: 30px;\n      margin-bottom: 10px;\n    }\n\n    .gift-bg .sub-title{\n      font-size: 18px;\n    }\n\n    .gift-bg h1{\n      margin-bottom: 20px;\n    }\n\n    .gift-bg .redeem-btn{\n      font-size: 12px;\n      padding: 7px 12px;\n      width: auto;\n    }\n\n    .calendar-text{\n      display: block;\n      margin-top: 5px;\n      margin-left: 0px;\n    }\n\n    .form-row-marginb{\n      margin-bottom: 30px;\n    }\n\n    .date-row .margin-b30{\n      margin-bottom: 15px;\n    }\n\n    .date-row .text-bg{\n      font-size: 14px;\n    }\n\n\n\n  }\n\n\n  @media (max-width: 480px){\n    .more-btn{\n      position: static;\n    }\n\n    .more-btn a{\n      text-shadow: none;\n      line-height: 15px;\n      font-weight: 400;\n      padding: 7px 12px;\n      outline: 0 !important;\n    }\n\n\n    .select-amount {\n      font-size: 14px;\n    }\n\n    .visible-ms{\n      display: inline-block !important;\n    }\n\n    .invisible-ms{\n      display: none !important;\n    }\n\n    .select-amount .amount-number{\n      display:inline-block;line-height:normal;vertical-align:middle;\n    }\n\n    .gift-container h3{\n      font-size: 20px;\n    }\n\n    .select-hr:before{\n      font-size: 16px;\n    }\n\n    .select-hr {\n      margin-top: 20px;\n      margin-bottom: 20px;\n      width: 90%;\n    }\n\n  }\n\n  @media (max-width: 375px){\n    .form-row{\n      padding-left: 0;\n    }\n  }\n\n  @media (max-width: 340px){\n    .preview-amount{\n      padding-left: 10px;\n    }\n  }</style><div class="gift-bg main-gift container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n        \'notification\':isTopShow}"><div class="bg-content"><h1 style="text-shadow: 0px 1px 2px #333" class="no-margin-t"><div class="main-title">{{\'VC004\'|t}}</div><div class="sub-title">{{\'VC005\'|t}}</div></h1><a href="javascript:;" ng-click="openRedeemModal()" class="btn redeem-btn btn-lg text-up">REDEEM A GIFT CARD</a></div></div><div class="container gift-container no-padding-t"><div ng-hide="giftBuy.buySuccess"><ng-form name="Form"><div class="row"><div class="col-md-7 form-wrapper"><div class="panel"><div class="panel-body"><h3>1. {{\'VC006\'|t}}</h3><div class="form-row form-row-marginb"><div class="row grid-gutter-margin-b2"><div class="col-xs-4 no-margin-b"><div class="select-amount form-style text-lg text-center" ng-class="{\'selected\':liUSD==2000}" ng-click="changeLiITC(2000)"><span>$20 USD</span></div></div><div class="col-xs-4 no-margin-b"><div class="select-amount form-style text-lg text-center" ng-class="{\'selected\':liUSD==5000}" ng-click="changeLiITC(5000)"><span>$50 USD</span></div></div><div class="col-xs-4 no-margin-b"><div class="select-amount form-style text-lg text-center" ng-class="{\'selected\':liUSD==10000}" ng-click="changeLiITC(10000)"><span>$100 USD</span></div></div></div><hr class="select-hr"><div class="select-another" ng-class="{\'selected\':liUSD==0}"><ui-select ng-model="option" theme="bootstrap" on-select="uiSelected($item)"><ui-select-match placeholder="{{\'VC223\'|t}}"><span ng-bind="option.label"></span></ui-select-match><ui-select-choices repeat="option in availITCOptions"><div ng-bind-html="option.label"></div></ui-select-choices></ui-select></div></div><h3>2. {{\'VC226\'|t}}</h3><div class="form-row clearfix lg-screen form-row-marginb"><div class="theme-btn-wrapper clearfix margin-b30"><div class="theme-btn form-style pull-left" ng-class="{\'selected\':tab==\'standard\'}" ng-click="changeTheme(\'standard\')">{{\'VC400\'|t}}</div><div class="theme-btn form-style pull-left" ng-class="{\'selected\':tab==\'birthday\'}" ng-click="changeTheme(\'birthday\')">{{\'VC401\'|t}}</div><div class="theme-btn form-style pull-left" ng-class="{\'selected\':tab==\'startSign\'}" ng-click="changeTheme(\'startSign\')">{{\'VC402\'|t}}</div></div><div class="theme-img-wrapper"><p class="text-lb margin-b20"><span style="font-weight: 500">{{\'VC418\'|t}}:</span> {{themePitchOn.name|t}}</p><div ng-repeat="item in constellation" class="theme-img pull-left" ng-class="{\'selected\':item.v == formData.theme}"><img ng-src="{{item.img|giftcardThemeImage}}" ng-click="pitchOn(item)"></div></div></div><div class="md-screen form-row clearfix is-relative form-row-marginb"><div ng-show="showFiveTheme"><div ng-repeat="oneTheme in fiveThemes" class="pull-left fivetheme clearfix margin-b10" ng-class="{\'selected\':oneTheme.v == formData.theme}"><img style="width: 100%" ng-src="{{oneTheme.img|giftcardThemeImage}}" ng-click="pitchOn(oneTheme)"></div><div class="pull-left text-center fivetheme is-absolute more-btn"><a class="btn form-style btn-lg" style="background: #fff;width: 100%" ng-click="openTheme();changeTheme(\'all\')">{{\'C0040\'|t}}</a></div></div><div ng-hide="showFiveTheme" class="clearfix"><img ng-src="{{themePitchOn.img|giftcardThemeImage}}" style="width: 100%; max-width: 400px"><br><a class="btn form-style btn-lg more-btn2" style="background: #fff; margin-top: 10px" ng-click="openTheme();changeTheme(\'all\')">{{\'C0040\'|t}}</a></div></div><h3 style="margin-bottom: 10px">3. {{\'VC007\'|t}}</h3><div class="form-row form-row-marginb"><div ng-include="\'/views/page/giftcard.user.html\'" ng-if="formData.user_id>0"></div><div ng-include="\'/views/page/giftcard.other.html\'" ng-if="!formData.user_id"></div></div><div><h3>4. {{\'VC008\'|t}}</h3><div class="form-row date-row"><p class="text-bg margin-b30">{{\'VC221\'|t}}</p><div class="date-select-wrapper is-relative"><input type="text" class="date-select" name="end" placeholder="Now" datepicker-popup ng-model="send_mail_date" is-open="opened" min-date="mDate" close-text="Close" ng-click="eopen($event);"> <i class="fa fa-calendar" ng-click="eopen($event);"></i><div class="calendar-text text-muted">{{\'VC222\'|t}}</div></div><hr style="border-top: 2px solid #D8D8D8"><div class="md-screen"><div class="text-right"><span class="text-muted text-lb">{{\'VC420\'|t}}</span><br><strong class="no-margin-t text-lg">${{formData.itc_usd|kpToUsd|number:0}} USD</strong><br><p ng-hide="currentUser && currentUser.currency==\'USD\'"><label class="label label-tags" ng-if="currentUser">≈{{(formData.itc_usd/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</label></p></div></div><p class="text-muted margin-b40">*{{\'VC307\'|t}}<br><span ng-bind-html="\'VC220\'|t"></span></p><p><button class="btn btn-lg md-screen pull-left preview-btn" ng-class="{\'disabled\':!enableContinue}" ng-click="preview()" ng-disabled="!enableContinue">{{\'VC104\'|t}}</button> <a ng-if="isOneStepPayment && (currentUser.hasPaypalList || currentUser.hasStripeList)" type="submit" class="btn btn-primary btn-lg with-spinner checkout-btn" target="_blank" ui-sref="oneStepCheckout({min:formData.itc_usd,type:\'giftcard\',img:themePitchOn.img})" ng-click="submit(Form,$event)" ng-class="{\'disabled\':!enableContinue}"><span translate="VC103"></span></a> <a ng-if="!isOneStepPayment" type="submit" class="btn btn-primary btn-lg with-spinner checkout-btn" target="_blank" ui-sref="checkout({min:formData.itc_usd,type:\'giftcard\',img:themePitchOn.img})" ng-click="submit(Form,$event)" ng-class="{\'disabled\':!enableContinue}"><span translate="VC103"></span></a></p></div></div></div></div></div><div class="col-md-5 lg-screen"><div class="panel"><div class="panel-body"><h3>{{\'VC417\'|t}}</h3><img width="73" src="/static/images/logo-100.png" style="margin-bottom: 16px"><div class="preview-wrapper" style="margin-bottom: 50px"><div class="preview-card margin-b20"><div class="text-center preview-img"><img ng-src="{{themePitchOn.img|giftcardThemeImage}}" style="width: 100%"></div><div class="preview-bottom clearfix"><div class="preview-amount">${{formData.itc_usd|kpToUsd|number:0}} USD</div><div class="preview-code">AAAA-BBBB-CCCC-DDDD</div></div></div><div class="preview-text"><p class="margin-b20">{{\'UR062\'|t|format:(formData.recipient_name?formData.recipient_name:\'\')}}<span ng-if="!formData.recipient_name">({{\'VC009\'|t}})</span></p><p class="margin-b20"><span ng-if="!formData.user_name">{{\'VC011\'|t}}</span> {{\'KP455\'|t|format:(formData.user_name?formData.user_name:\'\'):(formData.itc_usd|kpToUsd)}}</p><p>{{formData.message}}</p></div></div><div class="preview-qa"><p style="font-weight: 500">{{\'KP456\'|t}}</p><ul class="text-muted"><li>{{\'KP451\'|t}}</li><li>{{\'KP452\'|t}}</li><li>{{\'KP453\'|t}}<br><a href="http://support.italki.com/entries/23397624" target="_blank">{{\'KP457\'|t}}</a></li><li>{{\'KP454\'|t}}</li></ul></div></div></div><div class="panel"><div class="panel-body"><h3 class="margin-b20">{{\'VC420\'|t}}</h3><p class="text-muted text-bg margin-b30">{{\'VC227\'|t}}</p><hr style="border-top: 2px solid #D8D8D8"><div class="text-right"><span class="text-muted text-lb">{{\'VC421\'|t}}</span><br><strong class="no-margin-t text-lg">${{formData.itc_usd|kpToUsd|number:0}} USD</strong><br><p ng-hide="currentUser && currentUser.currency==\'USD\'"><label class="label label-tags" ng-if="currentUser">≈{{(formData.itc_usd/10)*currentUser.currency_rate|number:2}} {{currentUser.currency}}</label></p></div></div></div></div></div></ng-form></div><div ng-include="\'/views/page/giftcard.result.html\'" ng-if="giftBuy.buySuccess"></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/giftcard.other.html",'<div class="gift-input"><div class="row"><div ng-hide="formData.send_type==3"><div class="col-sm-6"><h4>{{\'VC009\'|t}}</h4><input ng-model="formData.recipient_name" type="text" class="form-style form-control"><div class="clear"></div><span id="er_recipient_name" style="color: Red;display:none" class="validMsg">{{\'C3019\'|t}}</span> <span id="er_recipient_name2" style="color: Red;display:none" class="validMsg">{{\'ST155\'|format:3:20}}</span></div><div class="col-sm-6"><h4>{{\'VC010\'|t}}</h4><input ng-model="formData.recipient_email" type="email" class="form-style form-control"><div class="clear"></div><span id="er_recipient_email" style="color: Red;display:none" class="validMsg">{{\'C3019\'|t}}</span> <span id="er_recipient_email2" style="color: Red;display:none" class="validMsg">{{\'C3020\'|t}}</span></div></div><div class="col-sm-6"><h4>{{\'VC011\'|t}}</h4><input ng-model="formData.user_name" type="text" class="form-style form-control"><div class="clear"></div><span id="er_user_name" style="color: Red;display:none" class="validMsg">{{\'C3019\'|t}}</span> <span id="er_user_name2" style="color: Red;display:none" class="validMsg">{{\'ST155\'|format:3:20}}</span></div><div class="col-sm-6"><h4>{{\'VC012\'|t}}</h4><input ng-model="formData.user_email" type="email" class="form-style form-control"><div class="clear"></div><span id="er_user_email" style="color: Red;display:none" class="validMsg">{{\'C3019\'|t}}</span> <span id="er_user_email2" style="color: Red;display:none" class="validMsg">{{\'C3020\'|t}}</span></div><div class="col-sm-12"><h4>{{\'VC013\'|t}} <span style="font-weight:normal">({{\'VC014\'|t}})</span></h4><textarea ng-model="formData.message" class="form-style form-control" rows="6"></textarea><div class="clear"></div><span id="er_message" style="color: Red;display:none" class="validMsg">{{\'ST155\'|format:0:500}}</span></div></div></div>'),a.put("/views/page/giftcard.result.html",'<div class="panel"><div class="panel-body"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="sweet-alert" style="display: block; position: relative; width: auto; margin-left: auto; left: auto;z-index: 0"><div class="sa-icon sa-success"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2>{{\'NT401\'|t}}</h2><div><p ng-bind-html="\'PM521\'|t" style="font-weight: 500"></p></div></div><div class="text-center"><button class="btn btn-lg" style="width: 240px;margin-bottom: 20px" ng-click="printgiftcard()">{{\'VC208\'|t}}</button></div><div class="text-center"><button class="btn btn-lg" ui-sref="finance.overview" href="/finance/overview" style="width: 240px;margin-bottom: 20px">{{\'MH101\'|t}}</button></div><div class="text-center"><button class="btn btn-primary btn-lg" ui-sref="giftcard" ng-click="reloadRoute()" style="width: 240px;margin-bottom: 20px">{{\'KP449\'|t}}</button></div></div></div></div></div>'),a.put("/views/page/giftcard.user.html",'<div class="gift-input"><div class="row"><div class="col-md-6"><h4>{{\'VC009\'|t}}</h4><input ng-model="formData.recipient_name" type="text" class="form-style form-control" disabled="disabled"><div class="clear"></div></div><div class="col-md-6"><h4>{{\'VC011\'|t}}</h4><input ng-model="formData.user_name" type="text" class="form-style form-control" disabled="disabled"><div class="clear"></div></div><div class="col-md-12"><h4>{{\'VC013\'|t}} <span style="font-weight:normal">({{\'VC014\'|t}})</span></h4><textarea ng-model="formData.message" class="form-style form-control" rows="6"></textarea><div class="clear"></div><span id="er_message" style="color: Red;display:none" class="validMsg">{{\'ST155\'|format:0:500}}</span></div></div></div>'),a.put("/views/page/groupD.html",'<style>.rc-anchor-normal {\n    height: 74px !important;\n    width: auto !important;\n  }\n\n  .recaptcha > p {\n    width: 100%;\n  }\n\n  iframe {\n    width: 100% !important;\n  }\n\n  button.login_fb {\n    background: #4e69a2 url(/static/images/Facebook_24px_White.png) 8px 6px no-repeat;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    text-shadow: 0px 0px 4px #2F4585;\n    padding-left: 60px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n\n  a.login_we {\n    background: #44b549;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 38px;\n    height: 36px;\n    color: #fff;\n    padding-left: 10px;\n    border: none;\n    border-radius: 2px;\n    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n  }\n\n  .landing-logo {\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n    left: 8px;\n    position: absolute;\n  }\n\n  .btn.btn-login {\n    margin: 18px 0px 0px 20px;\n    color: rgba(255, 255, 255, 1);\n    border-color: rgba(255, 255, 255, 1);\n    right: 16px;\n    position: absolute;\n    font-weight: bold;\n  }\n\n  .btn.btn-login:hover, .btn.btn-login:active, .btn.btn-login:focus {\n    background: none !important;\n    color: rgba(255, 255, 255, 0.7);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  .btn-txt {\n    text-transform: uppercase;\n  }\n\n  .sub-txt {\n    margin-top: 10px;\n  }\n\n  .modal-header {\n    background-color: #0072b6;\n    color: white;\n    width: 100%;\n  }\n\n  .modal-header h2 {\n    font-size: 24px;\n    line-height: 32px;\n    color: white;\n  }\n\n  .modal-header h5 {\n    font-size: 14px;\n    line-height: 20px;\n    color: white;\n  }\n\n  .teacher-header {\n    background-color: #01B1AE;\n    padding: 20px 0;\n  }\n\n  .modal-body {\n    padding: 0 0 15px 0;\n  }\n\n  .modal-body h2 {\n    font-size: 24px;\n    line-height: 32px;\n  }\n\n  .modal-body h4 {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .modal-footer .helper {\n    float: left;\n    color: rgba(0, 0, 0, 0.54);\n    display: block;\n    font-size: 14px;\n    line-height: 40px;\n    height: 40px;\n  }\n\n  .panel {\n    border: none;\n    margin-bottom: 0;\n  }\n\n  /* styling for form elements */\n\n  label {\n    display: block;\n  }\n\n  input[type="radio"] {\n    display: none;\n  }\n\n  .radio-wrapper {\n    border: 1px solid #ddd;\n    padding: 12px 12px 12px 8px;\n    border-radius: 3px;\n    background-color: #fff;\n    position: relative;\n    min-height: 48px;\n  }\n\n  .radio-wrapper div {\n    float: left;\n  }\n\n  .radio-wrapper .content {\n    width: 80%;\n    font-weight: normal;\n    padding-left: 0;\n    padding-right: 16px;\n  }\n\n  .radio-wrapper .content p {\n    font-family: \'Roboto\', sans-serif;\n    font-size: 13px;\n    margin-top: 0;\n    color: rgba(0, 0, 0, 0.54);\n  }\n\n  .radio-wrapper .radio-icon {\n    text-align: right;\n    float: right;\n    position: absolute;\n    top: 14px;\n    right: 12px;\n  }\n\n  .radio-wrapper .radio-icon span {\n    height: 18px;\n    width: 18px;\n    display: inline-block;\n    position: relative;\n    border: 1px solid #ccc;\n    border-radius: 50%;\n  }\n\n  .radio-wrapper .radio-icon span:after {\n    content: "";\n    background-color: white;\n    position: absolute;\n    height: 8px;\n    width: 8px;\n    top: 4px;\n    left: 4px;\n    border-radius: 50%;\n  }\n\n  .radio-wrapper-blue .radio-icon span {\n    border: 2px solid #ccc;\n  }\n\n  input[type="radio"]:checked + .radio-wrapper {\n    border-color: #4285f4;\n  }\n\n  input[type="radio"]:checked + .radio-wrapper .radio-icon span:after {\n    background-color: #4285f4;\n  }\n\n  input[type="radio"]:checked + .radio-wrapper .radio-icon span {\n    border-color: #4285f4;\n  }\n\n  .pro-teacher h4 {\n    color: #CC8D00;\n    margin-top: 1px;\n    margin-bottom: 3px;\n  }\n\n  .pro-teacher .icon {\n    color: #CC8D00;\n    font-size: 24px;\n    margin-top: -8px;\n    margin-left: 8px;\n    margin-right: 8px;\n  }\n\n  input[type="radio"]:checked + .pro-teacher {\n    border-color: #CC8D00;\n  }\n\n  input[type="radio"]:checked + .pro-teacher .radio-icon span:after {\n    background-color: #CC8D00;\n  }\n\n  input[type="radio"]:checked + .pro-teacher .radio-icon span {\n    border-color: #CC8D00;\n  }\n\n  input[type="radio"]:checked + .pro-teacher .icon {\n    color: #CC8D00;\n  }\n\n  .com-tutor h4 {\n    color: #0071B9;\n    margin-top: 1px;\n    margin-bottom: 3px;\n  }\n  .com-tutor .icon {\n    color: #0071B9;\n    font-size: 24px;\n    margin-top: -8px;\n    margin-left: 8px;\n    margin-right: 8px;\n  }\n\n  .select-wrapper {\n    border: 1px solid #ddd;\n    padding: 12px;\n    border-radius: 3px;\n    background-color: #fff;\n    position: relative;\n    height: 48px;\n    width: 100%;\n    color: #777;\n  }\n\n  .select-wrapper:focus {\n    border: 1px solid #4285f4;\n    box-shadow: none;\n  }\n\n  .select-wrapper-active{\n    border: 1px solid #4285f4;\n  }\n\n  /* custom styling for specific pages with unique designs */\n\n  .find-teacher {\n    background-color: #01B1AE;\n  }\n\n  @media (min-width: 480px) {\n    .find-teacher {\n      border-top: none;\n    }\n  }\n\n  /* styling for different screen sizes */\n\n  /* all screen sizes except mobile */\n  @media (min-width: 480px) {\n    .signin-button {\n      width: initial;\n      right: 12px;\n      /*top: -8px;*/\n      /*margin-top: 24px !important;*/\n    }\n\n    .signin-navbar {\n      height: 68px;\n      position: absolute;\n    }\n\n    .landing-logo-top {\n      top: 0 !important;\n      left: 16px !important;\n    }\n\n    .page-signup .signup-container, .page-signin .signin-container {\n      margin: 56px auto;\n    }\n\n    .signin-container {\n      box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.75);\n    }\n  }\n\n  /* big screens only */\n  @media (min-width: 767px) {\n    .modal-box {\n      width: 766px;\n      height: 100%;\n      margin: 24px auto 0 auto;\n      box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);\n    }\n\n    .welcome-header {\n      padding-top: 80px;\n      background: #0071B9 url(/static/images/onboarding_welcome_header.png) no-repeat;\n      padding-bottom: 10px;\n    }\n    .not-find-teacher-button{\n\n    }\n\n  }\n  /*@media(min-width:768px){*/\n    /*.modal-body{*/\n      /*height:280px*/\n    /*}*/\n  /*}*/\n\n  /* mobile only */\n  @media (max-width: 480px) {\n    .signin-button {\n      width: initial;\n      right: 12px !important;\n      /*top: -8px*/\n    }\n\n    .signin-navbar {\n      height: 56px;\n      position: fixed;\n    }\n\n    .modal-header {\n      position: relative;\n      margin-top: 56px;\n    }\n\n    .modal-footer {\n      position: fixed;\n    }\n\n    .modal-body {\n      padding-top: 0 !important;\n    }\n\n    .landing-logo {\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n      left: 8px;\n    }\n\n    .top {\n      margin-top: 54px;\n    }\n\n    /*\n    .radio-wrapper .radio-icon span {\n      height: 16px;\n      width: 16px;\n    }\n\n    .radio-wrapper .radio-icon span {\n      top: 3px;\n      right: 3px;\n    }\n\n    .radio-wrapper .radio-icon span:after {\n      height: 8px;\n      width: 8px;\n      top: 2px;\n      left: 2px;\n    }\n    */\n  }\n\n  /* tablet only */\n  @media (max-width: 768px) and (min-width: 480px) {\n    .modal-footer, .modal-header {\n      position: relative;\n    }\n  }\n\n  @media (max-width: 768px) {\n    .modal-body {\n      padding-top: 0 !important;\n    }\n\n    .modal-footer {\n      position: fixed;\n    }\n\n    .theme-white {\n      background: #fff !important;\n    }\n\n    .btn.btn-primary.is-relative {\n      width: auto !important;\n      margin-bottom: 0px !important;\n    }\n\n    .col-xs-6 {\n      margin-bottom: 0 !important;\n    }\n\n  }\n\n  /* Group G */\n  .ui-select-group > a {\n    padding-left: 35px;\n  }\n  .ui-select-choices-row {\n    margin: 0 -2px;\n    width: 100%;\n  }\n  .ui-select-toggle {\n    padding: 14px 16px !important;\n    height: 48px !important;\n  }\n  .ui-select-search {\n    padding: 14px 16px 14px 50px !important;\n    height: 50px !important;\n    background: url("/static/images/icons/icon-search.svg") no-repeat 15px center / 28px 28px;\n  }\n  .ui-select-bootstrap .ui-select-choices-row.active > a {\n    padding-left: 35px;\n    color: #000000;\n    background: #ffffff url("/static/images/icons/icon-checkmark.svg") no-repeat 15px center / 12px 12px;\n  }\n  .ui-select-bootstrap > .ui-select-choices {\n    border-top: 1px solid #f2f2f2;\n  }\n  .ui-select-choices-group-label {\n    font-size: 12px !important;\n    font-weight: 500;\n    color: #333;\n  }\n  .onboarding-native-language {\n    display: block;\n    margin: 0 auto;\n    max-width: 350px;\n    height: 50px;\n    border: solid 1px #dddddd;\n  }\n  .onboarding-native-language .ui-select-choices {\n    position: absolute;\n    top: 50px;\n  }\n  .onboarding-country, .onboarding-timezone {\n    display: block;\n    margin: 0 auto;\n    height: 50px;\n    border: solid 1px #dddddd;    \n  }\n  .onboarding-timezone .ui-select-match-text > span {\n    display: inline-block;\n    width: 300px;\n    height: 18px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  @media (max-width: 767px) {\n    .onboarding-timezone .ui-select-match-text > span {\n      width: 230px;\n    }\n  }\n  .onboarding-native-language-hint {\n    margin: 30px 0 60px;\n  }</style><div class="page-signup"><div id="page-signup-bg"></div><nav class="navbar signin-navbar" role="navigation" style="height: 56px;margin: 0px;z-index: 1999;width: 100%;background: #ff4338;    box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.4);border: none" ng-controller="TopNavCtrl"><div class="container" style="padding-top: 0"><div class="navbar-header"><a class="landing-logo landing-logo-top" italki-go-home=""></a></div><span class="pull-right"></span></div></nav><div class="signup-container" style="width: 100%"><kp-loading indicator="step==\'fb\'||user||step==\'we\'"></kp-loading><form role="form" name="myFormFb" style="height: 100%" ng-submit="doneFb(myFormFb.$valid&&unable)" novalidate="novalidate"><div class="modal-box" ng-if="step==\'fb\'&&!lanset"><div class="modal-header text-center"><p class="text-lg">{{\'OB244\'|t}}</p><span>{{\'MH239\'|t}}</span></div><div class="modal-body padding-bottom phone-margin" style="height: auto!important"><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class=""><div class=""><div class="text-lb text-bold text-center" style="padding: 0px 0 10px">{{\'UR154\'|t}}</div><div class="text-center text-muted" style="margin-bottom: 10px" ng-bind-html="\'OB219\'|t"></div></div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group" style="margin-bottom: 4px"><i class="fa fa-facebook-square" style="position: absolute;left: 10px;top: 8px;font-size: 22px;color: #369"></i> <input name="fb_email" ng-class="{false: \'input-invalid\', true: \'\'}[!Mailerror]" style="padding-left: 50px" class="form-control" type="text" placeholder="{{\'OB221\'|t}}" ng-model="User_obj.email" ng-required="true" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" ng-blur="checkEmail()" ng-keyup="checkEmail()"><p ng-if="Mailerror.type==\'AccountEmailExist\'" style="font-size: 12px;color: #CB242B" ng-blur="checkEmail()" ng-keyup="checkEmail()">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'AccountEmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p><p class="help-word" ng-show="myFormFb.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb.mail]">{{\'ST318\'|t}}</p></div></div></div></div><div class=""><div class="text-center"><div class="text-lb text-bold text-center" style="padding: 20px 0 10px">{{\'OB248\'|t}}</div><div class="text-center text-muted" style="margin-bottom: 10px" ng-bind-html="\'OB220\'|t"></div></div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group"><input name="fb_password" style="padding-left: 50px" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="User_obj.password" ng-minlength="6" ng-maxlength="20" ng-blur="setPassword()" ng-keyup="setPassword()" required><p class="help-word" ng-show="myFormFb.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signup-form-icon signup-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[myFormFb.password]"></span></div></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="!User_obj.password||!User_obj.email||unable" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 5px"></i></button></div></div></div></div></form><form role="form" name="myFormFb1" style="height: 100%" ng-submit="doneFb1(myFormFb1.$valid)"><div class="modal-box" ng-if="step==1"><div class="modal-header text-center"><p class="text-lg">{{\'OB244\'|t}}</p><span>{{\'MH239\'|t}}</span></div><div class="modal-body padding-bottom phone-margin"><div class="wizard-content"><div class="wizard-pane" style="display: block; opacity: 1"><div class="" style="margin-bottom: 5px"><div class="text-lb text-bold text-center" style="padding: 0px 0 10px">{{\'UR154\'|t}}</div><div class="text-center text-muted" style="margin-bottom: 10px" ng-bind-html="\'OB219\'|t"></div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group" ng-hide="emailDiv"><i class="fa fa-facebook-official" style="position: absolute;left: 10px;top: 8px;font-size: 22px;color: #369"></i> <i ng-click="emailDiv=!emailDiv" class="fa fa-pencil yes-cursor" style="position: absolute;right: 10px;top: 8px;font-size: 22px;color: #369"></i> <input placeholder="{{NewObj.email}}" style="padding-left: 50px" type="text" class="form-control" readonly="readonly"></div><div class="form-group" ng-show="emailDiv"><i class="fa fa-facebook-official" style="position: absolute;left: 10px;top: 8px;font-size: 22px;color: #369"></i> <input name="fb_email1" style="padding-left: 50px" type="text" class="form-control" ng-value="NewObj.email" ng-model="NewObj.email" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" ng-required="true" ng-blur="checkEmail1()" ng-keyup="checkEmail1()"><p ng-if="Mailerror.type==\'EmailExist\'" style="font-size: 12px;color: #CB242B">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'EmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p><p class="help-word" ng-show="myFormFb1.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb1.mail]">{{\'ST318\'|t}}</p></div></div></div></div><div class=""><div class="text-center"><div class="text-lb text-bold text-center" style="padding: 20px 0 10px">{{\'OB248\'|t}}</div><div class="text-center text-muted" style="margin-bottom: 10px" ng-bind-html="\'OB220\'|t"></div></div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group"><input style="padding-left: 50px" name="fb_password1" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="NewObj.password" ng-minlength="6" ng-maxlength="20" ng-blur="setPassword1()" ng-keyup="setPassword1()" required><p class="help-word" ng-show="myFormFb1.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormFb1.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signup-form-icon signup-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[myFormFb1.password]"></span></div></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><button class="btn btn-primary is-relative with-spinner" style="padding-right: 30px" ng-disabled="myFormFb1.$invalid " type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 6px"></i></button></div></div></div></div></form><form role="form" name="myFormWe" style="height: 100%" ng-submit="doneWechat(myFormWe.$valid)"><div class="modal-box" ng-if="step==\'we\'&&!lanset"><div class="modal-header text-center"><p class="text-lg">{{\'OB244\'|t}}</p><span>{{\'MH239\'|t}}</span></div><div class="modal-body padding-bottom phone-margin"><div class="wizard-content panel"><div class="wizard-pane" style="display: block; opacity: 1"><div class="text-center"><div class="text-lb text-bold text-center" style="padding: 0px 0 10px">{{\'ST048\'|t}}</div></div><div class="" style="margin-bottom: 5px"><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group"><i class="fa fa-weixin" style="position: absolute;left: 10px;top: 8px;font-size: 22px;color: #09bb07"></i> <input style="padding-left: 50px" class="form-control" kp-nickname-validation placeholder="Full name" ng-model="Wechat_User_obj.nickname" ng-required="true"></div></div></div></div><div class="" style="margin-bottom: 5px"><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group"><input name="wechat_email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[myFormWe.mail]" style="padding-left: 50px" class="form-control" type="text" placeholder="{{\'OB221\'|t}}" ng-model="Wechat_User_obj.email" ng-required="true" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}$/i" ng-blur="checkWechatMail()" ng-keyup="checkWechatMail()"> <span class="fa fa-email1 signup-form-icon signin-form-icon-email" ng-class="{false: \'fa-success-email\', true: \'fa-invalid-email\'}[myFormWe.mail]"></span><p ng-if="Mailerror.type==\'AccountEmailExist\'" style="font-size: 12px;color: #CB242B">{{\'OB218\'|t}}<a href="/login" ng-click="$close();">{{\'OB224\'|t}}</a></p><p ng-if="Mailerror&&(Mailerror.type!=\'AccountEmailExist\')" style="font-size: 12px;color: #CB242B">{{Mailerror.msg}}</p><p class="help-word" ng-show="myFormWe.mail" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormWe.mail]">{{\'ST318\'|t}}</p></div></div></div></div><div class=""><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3"><div class="form-group"><input name="wechat_password" style="padding-left: 50px" class="form-control" type="password" placeholder="{{\'OB222\'|t}}" ng-model="Wechat_User_obj.password" ng-minlength="6" ng-maxlength="20" ng-blur="setWechatPassword()" ng-keyup="setWechatPassword()" required><p class="help-word" ng-show="myFormWe.password" ng-class="{false: \'help-word-success\', true: \'help-word-invalid\'}[myFormWe.password]">{{\'UR161\'|t}}</p><span class="fa fa-lock1 signup-form-icon signup-form-icon-password" ng-class="{false: \'fa-success-password\', true: \'fa-invalid-password\'}[myFormWe.password]"></span></div></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><button class="btn btn-primary is-relative with-spinner" style="padding-right: 30px" ng-disabled="myFormWe.$invalid ||wechatUnable" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 6px"></i></button></div></div></div></div></form><form ng-if="step==\'groupD1\'&&!lanset" role="form" name="myFormgroupD1" style="height: 100%" ng-submit="doneD1(myFormgroupD1.$valid)"><div class="modal-box"><div class="modal-header text-center welcome-header"><p class="text-lg">{{\'C0082\'|t}} {{user.nickname}}!</p><span ng-hide="teacherOnboarding">{{\'MH239\'|t}}</span> <span ng-show="teacherOnboarding">{{\'OB312\'|t}}</span></div><div class="modal-body padding-bottom phone-margin"><div class="wizard-content" style="height: 100%"><div class="wizard-pane" style="display: block; opacity: 1"><div class="grid-gutter-margin-b"><div class="text-lb text-bold text-center" style="padding: 10px 0 20px">{{\'KP252\'|t}}</div><div ng-if="isGroupG" class="onboarding-native-language"><ui-select ng-model="speakLanguage.selected" ng-change="changeSpeakLanguage()"><ui-select-match placeholder="{{\'AS000\'|t}}"><span>{{$select.selected.v|t}}</span></ui-select-match><ui-select-choices group-by="recommendedLanguages" repeat="lan in languages | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="isGroupG" class="text-light-gray text-sm text-center onboarding-native-language-hint">{{\'OB239\'|t}}</div><div ng-if="!isGroupG"><div class="row" style="margin-bottom: 20px"><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadiosspeakLan" ng-model="selObj.speak_language" ng-value="defaultLan"><div class="radio-wrapper"><div class="content no-padding"><p ng-bind="defaultLan|t"></p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><select class="select-wrapper" ng-class="{\'select-wrapper-active\':selObj.speak_language!=defaultLan&&selObj.speak_language!=\' \'}" ng-model="selObj.speak_language" ng-options="m.v as m.v|t group by (m.t?\'Other\':\'Popular\') for m in languages"><option value="">{{\'AS403\'|t}}</option></select></div></div><div class="text-light-gray text-sm text-center" ng-show="teacherOnboarding">{{\'OB313\'|t}}</div><div class="text-light-gray text-sm text-center">{{\'OB239\'|t}}</div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6 text-left" style="line-height: 30px"><span class="text-muted">{{\'OB240\'|t|format:1:3}}</span></div><div class="col-xs-6"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="!selObj.speak_language ||do2Flag" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 5px"></i></button></div></div></div></div></form><div ng-if="step==\'groupD1\'&&(lanset==\'1\')" class="modal-box"><div class="padding-bottom phone-margin"><div class="modal-header text-center"><p class="text-lg">{{\'C0082\'|t}} {{user.nickname}}!</p><span ng-hide="teacherOnboarding">{{\'MH239\'|t}}</span> <span ng-show="teacherOnboarding">{{\'OB312\'|t}}</span></div><div class="modal-body"><div class="wizard-pane" style="display: block; opacity: 1" ng-style="{\'padding\': isGroupG ? \'10px 20px\' : \'\'}"><div class="grid-gutter-margin-b text-center"><div class="text-lb text-bold text-center" style="padding: 20px 0 10px">{{\'KP312\'|t}}</div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 text-left"><div ng-if="isGroupG" class="onboarding-timezone"><ui-select ng-model="timezone.selected" search-enabled="false" ng-change="checkTime()"><ui-select-match placeholder="{{\'C0061\'|t}}"><span>{{$select.selected.t}}</span></ui-select-match><ui-select-choices repeat="time in timezones"><div ng-bind-html="time.t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="form-group has-warning" ng-if="!isGroupG"><select class="select-wrapper" ng-change="checkTime()" data-ng-model="user.timezone_new" class="form-control" ng-options="m.v as m.t for m in timezones"><option value="">{{\'C0061\'|t}}</option></select></div><div class="text-light-gray text-sm text-left" style="padding: 10px 0 5px">{{\'KP320\'|t}} {{m1.format(\'LLL\')}}</div><span class="text-warning text-left" ng-if="!timezoneMatch&&!firstCheckTime">{{\'KP319\'|t}}</span> <span class="text-warning text-left" ng-if="!timezoneMatch">{{m2.format(\'LLL\')}}</span></div></div></div><div class=""><div class="text-lb text-bold text-center" style="padding: 0px 0 10px">{{\'KP314\'|t}}</div><div class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 has-warning text-center"><div ng-if="isGroupG" class="onboarding-country"><ui-select ng-model="country.selected" search-enabled="false" ng-change="checkCTZones()"><ui-select-match placeholder="{{\'C0061\'|t}}"><span>{{$select.selected.v|t}}</span></ui-select-match><ui-select-choices repeat="c in countries"><div ng-bind-html="c.v|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><select class="select-wrapper" ng-change="checkCTZones()" data-ng-model="user.living_country_id_new" class="form-control" ng-options="m.v as m.l|t for m in countries" ng-if="!isGroupG"><option value="">{{\'KP314\'|t}}</option></select><p class="has-warning help-block" ng-if="showNotMatch&&user.living_country_id_new">{{\'KP317\'|t}}</p></div></div></div></div></div></div><div ng-if="step==\'groupD1\'&&(lanset==\'1\')" class="modal-footer"><div class="row"><div class="col-xs-6 text-left" style="line-height: 30px"><span class="text-muted">{{\'OB240\'|t|format:2:3}}</span></div><div class="col-xs-6"><button class="btn btn-primary is-relative" style="padding-right: 20px" value="Finish" ng-click="doneD11()" ng-disabled="!user.timezone_new||!user.living_country_id_new||do2Flag_2"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 5px"></i></button></div></div></div></div><form ng-if="step==\'groupD2\'" role="form" name="myFormgroupD2" style="height: 100%" ng-submit="doneD2()"><div class="modal-box"><div class="modal-header text-center"><p class="text-lg">{{\'C0082\'|t}} {{user.nickname}}!</p><span ng-hide="teacherOnboarding">{{\'MH239\'|t}}</span> <span ng-show="teacherOnboarding">{{\'OB312\'|t}}</span></div><div class="modal-body padding-bottom phone-margin"><div class="wizard-content"><div class="wizard-pane" style="display: block; opacity: 1"><div class=""><div ng-hide="teacherOnboarding" class="text-lb text-bold text-center" style="padding: 20px 0 10px">{{\'KP251\'|t}}</div><div ng-show="teacherOnboarding" class="text-lb text-bold text-center" style="padding: 20px 0 10px">{{\'OB314\'|t}}</div><div ng-hide="teacherOnboarding" class="text-center text-muted" style="margin-bottom: 10px">{{\'OB239\'|t}}</div><div ng-show="teacherOnboarding" class="text-center text-muted" style="margin-bottom: 10px">{{\'OB315\'|t}}</div><div class="row"><div class="col-xs-12" ng-if="isGroupG"><div class="onboarding-native-language"><ui-select ng-model="nativeLanguage.selected" ng-change="changeNativeLanguage()"><ui-select-match placeholder="{{\'ST187\'|t}}"><span>{{$select.selected.v|t}}</span></ui-select-match><ui-select-choices group-by="recommendedLanguages" repeat="lan in newLearninglan | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-6 col-sm-6" ng-repeat="item in studentObj.learnLan" ng-if="!isGroupG"><label><input type="radio" name="optionsRadioslearnLan" ng-model="selObj.learn_language" ng-change="radioChecked(\'1\')" ng-value="item.v"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p ng-bind="item.v|t"></p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6" ng-if="!isGroupG"><select class="select-wrapper" name="learn_language" ng-change="radioChecked(\'2\')" ng-class="{\'select-wrapper-active\':optionLearn}" ng-model="selObj.learn_language" ng-options="m.v as m.v|t group by (m.t?\'Other\':\'Popular\') for m in learninglan"><option value="">{{\'AS403\'|t}}</option></select></div></div><div ng-if="isGroupG" class="text-lb text-bold text-center" style="padding: 30px 0 20px">{{\'OB331\'|t|format: (nativeLanguage.selected.name|t)}}</div><div ng-if="isGroupG" class="row"><div class="col-sm-3"><label><input type="radio" ng-model="learning.level" value="1"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content">Beginner</div><div class="radio-icon"><span></span></div></div></label></div><div class="col-sm-3"><label><input type="radio" ng-model="learning.level" value="2"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content">Elementary</div><div class="radio-icon"><span></span></div></div></label></div><div class="col-sm-3"><label><input type="radio" ng-model="learning.level" value="3"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content">Intermediate</div><div class="radio-icon"><span></span></div></div></label></div><div class="col-sm-3"><label><input type="radio" ng-model="learning.level" value="5"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content">Advanced</div><div class="radio-icon"><span></span></div></div></label></div></div></div></div><div ng-if="!isGroupG" class="text-light-gray text-sm text-center">{{\'OB239\'|t}}</div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6 text-left" style="line-height: 30px"><span class="text-muted">{{\'OB240\'|t|format:3:3}}</span></div><div class="col-xs-6"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="selObj.learn_language==\'\'||do3Flag" type="submit"><span class="btn-txt">{{\'TP103\'|t}}</span> <i class="fa fa-angle-right is-absolute" style="right: 8px; font-weight:700; top: 5px"></i></button></div></div></div></div></form><form ng-if="step==\'groupD3\'" role="form" name="myFormgroupD3" style="height: 100%" ng-submit="doneD3()"><style>@media (max-width:480px){\n    .onb-step3{\n      margin-top: 56px\n    }\n  }\n  @media (max-width: 480px){\n    .checkout-phone-view2 {\n      padding-bottom: 0px !important;\n      box-sizing: border-box;\n      height: 100%;\n      overflow-y: auto;\n      padding-left: 20px;\n      padding-right: 20px;\n    }\n    .find-teacher.modal-footer{\n      border-top:none;\n    }\n    .find-teacher .btn{\n      width: auto!important;\n    }\n    .special-step3{\n      position: fixed;\n      left: 0;\n      right: 0;\n      height: 100%;\n      bottom: 0;\n      top: 56px;\n      background: #01b1ae;\n    }\n  }\n  @media (max-width:768px){\n\n    .special-step3{\n      position: fixed;\n      left: 0;\n      right: 0;\n      height: 100%;\n      bottom: 0;\n      top: 56px;\n      background: #01b1ae;\n    }\n  }</style><div class="modal-box special-step3"><div class="onboarding"><div class="modal-body onb-step3" style="background-color: #01B1AE; color: #FFF"><div class="checkout-phone-view2 text-center"><p><img width="180" src="/static/images/hp-icon1.png"></p><span class="text-lg">{{\'OB200\'|t}}</span><p>{{\'OB242\'|t}}<br>{{\'OB320\'|t}}</p></div></div><div class="modal-footer find-teacher text-center" style="position: relative;padding: 0 0 30px"><button type="button" class="btn btn-primary" ng-click="doneD3()" style="background-color: #fff; border:none;border-radius: 2px"><span class="btn-txt" style="color: #01B1AE; border:none; background-color: #fff"><i class="fa fa-search"></i>&nbsp;&nbsp;{{\'M0000\'|t}}</span></button></div><div class="modal-footer find-teacher text-center" style="position: relative;padding: 50px 0 20px 0"><button type="button" class="btn btn-primary" ng-click="doneNotFindTeacher()" style="background-color: #15b1af; border: solid 1px #ffffff;border-radius: 2px"><span class="btn-txt" style="color: #ffffff; border:none;background-color: #15b1af;color: #ffffff">{{\'OB321\'|t}}</span></button></div></div></div></form><form ng-if="step==\'groupD4\'" role="form" name="myFormgroupD4" style="height: 100%"><div class="modal-box"><div class="modal-header teacher-header text-center"><span class="text-lg">{{\'OB200\'|t}}</span></div><div class="modal-body"><div class="" style="width: 100%; padding: 0 20px 0"><div class="text-center text-lb text-bold" style="padding: 20px 0 10px">{{\'OB203\'|t}}</div><div class="row"><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_pro" value="1" ng-required="true"><div class="radio-wrapper teacher pro-teacher clearfix"><div class="icon"><i class="fa fa-graduation-cap"></i></div><div class="content"><h4>{{\'C0200\'|t}}</h4><p>{{\'OB204\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6 teacher"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_pro" value="0" ng-required="true"><div class="radio-wrapper teacher com-tutor clearfix"><div class="icon"><i class="fa fa-graduation-cap"></i></div><div class="content"><h4>{{\'C0201\'|t}}</h4><p>{{\'OB205\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><span class="is-relative"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="selTeacher.teacher_pro==\'\'||do4Flag" type="submit" italki-click-with-spinner-one="doneD4()" ng-bind="\'TP103\'|t"></button><i class="fa fa-angle-right is-absolute is-relative" style="right: 8px; font-weight:700; top: 0px; color: #fff"></i></span></div></div></div></div></form><form ng-if="step==\'groupD5\'" role="form" name="myFormgroupD5" style="height: 100%"><div class="modal-box"><div class="modal-header teacher-header text-center"><span class="text-lg">{{\'OB200\'|t}}</span></div><div class="modal-body"><div class="" style="width: 100%; padding: 0 20px 0"><div class=""><div class=""><div class="text-center text-lb text-bold" style="padding: 20px 0 10px">{{\'KP258\'|t}}</div><p class="text-center" style="margin: 0 0 10px">{{\'KP260\'|t}}<br>{{\'OB245\'|t}}</p><div class="row"><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.find_partner" value="1" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: 90px"><div class="content"><p><strong>{{\'C0069\'|t}}</strong></p><p>{{\'OB227\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6 teacher"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.find_partner" value="0" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: 90px"><div class="content"><p><strong>{{\'C0070\'|t}}</strong></p><p>{{\'OB246\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><span class="is-relative"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="!myFormgroupD5.$dirty||do5Flag" type="submit" italki-click-with-spinner-one="doneD5()" ng-bind="\'TP103\'|t"></button><i class="fa fa-angle-right is-absolute is-relative" style="right: 8px; font-weight:700; top: 0px; color: #fff"></i></span></div></div></div></div></form><form ng-if="step==\'groupD6\'" role="form" name="myFormgroupD6" style="height: 100%"><div class="modal-box"><div class="modal-header teacher-header text-center"><span class="text-lg">{{\'OB200\'|t}}</span></div><div class="modal-body"><div class="fancy-form-wrapper"><div class="form-content"><div class="" style="width: 100%; padding: 0 20px 0"><div class="text-center text-lb text-bold" style="padding: 20px 0 10px">{{\'OB247\'|t}}</div><p class="text-center" style="margin: 0 0 10px">{{\'OB245\'|t}}</p><div class="row"><div class="col-md-6 col-sm-6" ng-repeat="item in teacherObj.teacher_cou"><label><input type="radio" name="optionsRadios1" ng-model="selTeacher.teacher_cou" ng-value="item.v" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p ng-bind="item.v|t"></p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><span class="is-relative"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="!myFormgroupD6.$dirty||do6Flag" type="submit" italki-click-with-spinner-one="doneD6()" ng-bind="\'TP103\'|t"></button><i class="fa fa-angle-right is-absolute is-relative" style="right: 8px; font-weight:700; top: 0px; color: #fff"></i></span></div></div></div></div></form><ng-form ng-if="step==\'groupD7\'" role="form" name="myFormgroupD7" style="height: 100%"><div class="modal-box"><div class="modal-header teacher-header text-center"><span class="text-lg">{{\'OB200\'|t}}</span></div><div class="modal-body"><div class="fancy-form-wrapper"><div class="form-content"><div class="" style="width: 100%; padding: 0 20px 0"><div class="text-center text-lb text-bold" style="padding: 20px 0 10px">{{\'OB209\'|t}}</div><p class="text-center" style="margin: 0 0 10px">{{\'OB245\'|t}}</p><div class="row"><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="0" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB210\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="1" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB211\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="2" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB212\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="3" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB213\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="4" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB214\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div><div class="col-md-6 col-sm-6"><label><input type="radio" name="optionsRadios" ng-model="selTeacher.teacher_tags" value="5" ng-required="true"><div class="radio-wrapper teacher clearfix" style="height: auto"><div class="content"><p>{{\'OB215\'|t}}</p></div><div class="radio-icon"><span></span></div></div></label></div></div></div></div></div></div><div class="modal-footer"><div class="row"><div class="col-xs-6"></div><div class="col-xs-6"><span class="is-relative"><button class="btn btn-primary is-relative" style="padding-right: 20px" ng-disabled="myFormgroupD7.$invalid||do7Flag" type="submit" italki-click-with-spinner-one="doneD7()" ng-bind="\'TP103\'|t"></button><i class="fa fa-angle-right is-absolute is-relative" style="right: 8px; font-weight:700; top: 0px; color: #fff"></i></span></div></div></div></div></ng-form><style>.check-email{\n        border-top: 0px;\n      }\n      @media (max-width: 480px){\n        .check-email.modal-footer{\n          border-top:none;\n        }\n        .checkout-phone-view2 {\n          padding-bottom: 0px !important;\n          box-sizing: border-box;\n          height: 100%;\n          overflow-y: auto;\n          padding-left: 20px;\n          padding-right: 20px;\n        }\n        .check-email .btn{\n          width: auto!important;\n        }\n        .special-step8{\n          position: fixed;\n          left: 0;\n          right: 0;\n          height: 100%;\n          bottom: 0;\n          top: 56px;\n          background: #fff;\n        }\n      }</style><div ng-if="step==\'groupD8\'" class="modal-box special-step8"><div class="onboarding"><div class="modal-body onb-step8" style="background-color: #fff"><div class="checkout-phone-view2 text-center"><div class="text-center button-cursor" style="padding:20px 0" ng-click="done2()"><img src="/static/images/static/email_welcome.png" width="230"></div><span class="text-lg">{{\'MH253\'|t}}</span><p>{{\'MH255\'|t|format:user.email}}<br><a ng-click="openModalInstance()">{{\'MH256\'|t}}</a></p></div></div><div class="modal-footer check-email text-center" style="position: relative;\n    padding: 0 0 30px"><button type="button" class="btn btn-primary" ng-click="done2()">{{\'MH107\'|t}}</button></div></div></div><style>@media (max-width: 480px) {\n        .modal-body {\n          padding-top: 0% !important;\n        }\n      }.check-email{\n        border-top: 0px;\n      }\n      @media (max-width: 480px){\n        .check-email.modal-footer{\n          border-top:none;\n        }\n        .checkout-phone-view2 {\n          padding-bottom: 0px !important;\n          box-sizing: border-box;\n          height: 100%;\n          overflow-y: auto;\n          padding-left: 20px;\n          padding-right: 20px;\n        }\n        .check-email .btn{\n          width: auto!important;\n        }\n        .special-step8{\n          position: fixed;\n          left: 0;\n          right: 0;\n          height: 100%;\n          bottom: 0;\n          top: 56px;\n          background: #fff;\n        }\n        .onb-step8{\n          height: auto!important;\n        }\n      }</style><div ng-if="step==4" class="modal-box special-step8"><div class="modal-body onb-step8" style="background-color: #fff"><div class="checkout-phone-view2 text-center"><div class="text-center button-cursor" style="padding:20px 0" ng-click="done2()"><img src="/static/images/static/email_welcome.png" width="230"></div><div class="text-center" style="padding: 0 30px"><span class="text-lg" ng-show="user&&(currentUser.find_teacher==1)&&!email_verfied">{{\'OB322\'|t}}</span> <span class="text-lg" ng-show="user&&(currentUser.find_teacher==1)&&email_verfied">{{\'OB327\'|t}}</span> <span class="text-lg" ng-show="user&&user.fb_user&&(currentUser.register_status==255 || email_verfied)&&(currentUser.find_teacher==0)">{{\'OB241\'|t}}!</span> <span class="text-lg" ng-show="(!(user&&user.fb_user&&currentUser.register_status==255 || email_verfied))&&(currentUser.find_teacher==0)">{{\'OB322\'|t}}!</span><p ng-show="(!(user&&user.fb_user&&currentUser.register_status==255 || email_verfied))&&(currentUser.find_teacher==0)" ng-bind-html="\'OB249\'|t"></p><p ng-show="((!(user&&user.fb_user&&currentUser.register_status==255 || email_verfied))&&(currentUser.find_teacher==1))" ng-bind-html="\'OB326\'|t"></p></div></div></div><div class="modal-footer check-email text-center" style="padding: 0 0 30px; position: relative"><button class="btn btn-primary" ng-click="done2()"><span class="btn-txt" ng-hide="user&&(currentUser.find_teacher==1)">{{\'MH107\'|t}}</span> <span class="btn-txt" ng-show="user&&(currentUser.find_teacher==1)">{{\'OB233\'|t}}</span></button></div></div><div ng-if="step==\'notFindTeacher\'" class="modal-box special-step8"><div class="modal-body onb-step8" style="background-color: #fff"><div class="checkout-phone-view2 text-center"><div class="text-center button-cursor" style="padding:20px 0" ng-click="doneNotFindTeacher2()"><img src="/static/images/static/email_welcome.png" width="230"></div><div class="text-center" style="padding: 0 30px"><span ng-hide="user&&user.fb_user&&currentUser.register_status==255 || email_verfied" class="text-lg">{{\'OB322\'|t}}</span> <span ng-show="user&&user.fb_user&&currentUser.register_status==255 || email_verfied" class="text-lg">{{\'OB324\'|t}}</span><p ng-hide="user&&user.fb_user&&currentUser.register_status==255 || email_verfied">{{\'OB323\'|t}}</p></div></div></div><div class="modal-footer check-email text-center" style="padding: 0 0 30px; position: relative"><button class="btn btn-primary" ng-click="doneNotFindTeacher2()"><span class="btn-txt" style="text-transform: uppercase">{{\'MH107\'|t}}</span></button></div></div><div ng-if="step==5" class="modal-box special-step8"><div class="modal-body onb-step8" style="background-color: #fff"><div class="checkout-phone-view2 text-center"><div class="text-center button-cursor" style="padding:20px 0" ng-click="done3()"><img src="/static/images/static/email_welcome.png" width="230"></div><div class="text-center" style="padding: 0 30px"><span class="text-lg">{{\'OB316\'|t}}</span><p ng-bind-html="\'OB317\'|t"></p><p ng-bind-html="\'OB318\'|t"></p></div></div></div><div class="modal-footer check-email text-center" style="padding: 0 0 30px; position: relative"><button class="btn btn-primary" ng-click="done3()"><span class="btn-txt">{{\'OB319\'|t}}</span></button></div></div></div><div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div><div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff"></div></div>'),
a.put("/views/page/how-it-works.html",'<div class="row"><div class="col-md-9"><h2>{{\'HPT65\'|t}}</h2><h4><small>{{\'HPT44\'|t}}</small></h4></div></div><div class=""><div class="panel"><div class="panel-body"><div class=""><div class="grid-gutter-margin-b text-center"><iframe width="560" height="315" src="//www.youtube.com/embed/8RnLis07Luo" frameborder="0" allowfullscreen></iframe></div><div class="row"><div class="col-md-6"><div class="grid-gutter-margin-b"><h2>{{\'HPT45\'|t}}</h2><h4><small>{{\'HPT46\'|t}}</small></h4></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork7.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT47\'|t}}</h3><p class="r text-muted">{{\'HPT48\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork1.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT49\'|t}}</h3><p class="r text-muted">{{\'HPT50\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork2.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT51\'|t}}</h3><p class="r text-muted">{{\'HPT52\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork3.png"></div><div class="col-md-9"><h3 class="no-margin-t" style="text-transform: uppercase">{{\'HPT53\'|t}}</h3><p class="r text-muted">{{\'HPT54\'|t}}</p></div></div></div></div><div class="col-md-6"><div class="grid-gutter-margin-b"><h2>{{\'HPT55\'|t}}</h2><h4><small>{{\'HPT56\'|t}}</small></h4></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork4.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT57\'|t}}</h3><p class="r text-muted">{{\'HPT58\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork9.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT59\'|t}}</h3><p class="r text-muted">{{\'HPT60\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork6.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT61\'|t}}</h3><p class="r text-muted">{{\'HPT62\'|t}}</p></div></div></div><div class="grid-gutter-margin-b"><div class="row"><div class="col-md-3 text-center"><img src="/static/images/icon_howitwork8.png"></div><div class="col-md-9"><h3 class="no-margin-t">{{\'HPT63\'|t}}</h3><p class="r text-muted">{{\'HPT64\'|t}}</p></div></div></div></div></div></div><div class=""><div class=""><div style="background: url(\'/static/images/static/headshot-bg.jpg\') no-repeat 0% 0%;background-size: cover;padding:50px 100px"><h4>{{\'HPT41\'|t}}</h4><span class="text-muted"><p class="r">{{\'HPT42\'|t}}</p><p class="r">{{\'HPT43\'|t}}</p></span><div class="grid-gutter-margin-b"><a class="btn btn-primary btn-lg" href="{{REGISTER_URL}}">{{\'HL937\'|t}}</a></div></div></div></div></div></div></div>'),a.put("/views/page/instructorterms.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Teacher Terms of Service</h3><p>Last Updated June 14, 2017 - Version 2017.1.1</p><ul><li>Teacher Registration and Service Listing<ul><li>Approval for Teaching Services</li><li>Teaching Services Description</li></ul></li><li>Providing Teaching Services<ul><li>Guidelines for providing your Teaching Services</li><li>Guidelines if you will be unable to provide your Teaching Service</li><li>Guidelines for after you have provided your Teaching Service</li><li>Student Complaints and Refunds</li><li>Additional Guidelines for Teaching Services</li></ul></li><li>Teacher Removal From the Site</li><li>License Grants<ul><li>License Grant for Teacher Content to Students</li><li>License Grant for Teacher Content to italki</li><li>License Grant for Teacher Introduction Video</li><li>License Grant for Teacher Logos</li></ul></li><li>Contacting Customer Service</li></ul><hr><p>If you want to offer Teaching Services on italki, you must read and agree to be bound by these Terms and Conditions for Teachers ("Teacher Terms") which are part of and incorporated into the italki Terms of Service and Payment Terms of Service ("Terms"). These Teacher Terms will apply to any Account that is approved to be a Teacher on the Site. If you do not accept these Teacher Terms in full, you are not authorized to teach on the Site and you are not eligible to receive any benefits from italki for any Teaching Services you provide.</p><div class="grid-gutter-margin-b"><h4>Teacher Registration and Service Listing</h4><h5 class="no-margin-b">Approval for Teaching Services</h5><p>In order to become a "Teacher", you must first submit a complete Teacher Application. Completed Teacher Applications are evaluated by italki for approval. If your Teacher Application is approved, your member status will be changed to a "Teacher." You will have the ability to create and manage a Teacher Profile on our Site. As a Teacher, you can begin providing "Teaching Services".</p><h5 class="no-margin-b">Teaching Services Description</h5><p class="no-margin-b">In order to provide lessons, Teachers must create a description of their Teaching Services on italki. When creating the description of your Teaching Services, you agree to the following guidelines:</p><ul><li>Write a specific, detailed service description with clear scope, deliverables and lessons.</li><li>Set expectations that you can meet or exceed.</li><li>Not create services that are made with the intent to commit fraud, or provide services other than the ones outlined in the description. This includes offering your Services in exchange for positive feedback or for no cost.</li></ul></div><div class="grid-gutter-margin-b"><h4>Providing Teaching Services</h4><h5 class="no-margin-b">Guidelines for providing your Teaching Services</h5><p class="no-margin-b">Once you have received a Teaching Services request, you agree to the following guidelines:</p><ul><li>Use the italki platform to manage Student requests.</li><li>Respond promptly, within one business day, to all lesson-related communication, whether from the Student or from italki.</li><li>Maintain a record of all communication between you and the Student. Communication methods can include outside emails, instant messages, telephone or in-person conversations. Important details includes information on the scope, deliverables, time frames, price, feedback, revisions, schedule changes, vacation, availability, delays, acceptance of deliverables, and completion of lessons.</li><li>Inform the Student of your availability and response time.</li><li>Inform the Student if you will be unavailable for more than one business day.</li></ul><h5 class="no-margin-b">Guidelines if you will be unable to provide your Teaching Service</h5><ul><li>Immediately inform the Student offering an explanation and proposing a revised date.</li><li>Immediately alert italki Customer Service so that italki is aware of the situation and can offer assistance to the Student.</li></ul><h5 class="no-margin-b">Guidelines for after you have provided your Teaching Service</h5><ul><li>Use the italki Payment Service to handle all financial matters related to your Teaching Service.</li><li>Provide helpful, objective, balanced feedback for the Student.</li></ul><h5 class="no-margin-b">Student Complaints and Refunds</h5><p>Any Student who is dissatisfied with your Teaching Service is required to contact you directly through the Site or Application regarding any issues or complaints. You should try to resolve any issue or complaint directly with the Student first.</p><p class="no-margin-b">If the issue or complaint cannot be resolved, between the Teacher and the Student, italki will use all records of communication as evidence to make a determination on how to adjudicate the dispute. italki shall have the right, in our sole discretion:</p><ul><li>To transfer credits, offer a refund, or reverse a transaction.</li><li>To designate who shall bear the expenses resulting from any such actions.</li></ul><h5 class="no-margin-b">Additional Guidelines for Teaching Services</h5><ul><li>Agree to maintain the privacy of italki Students. This includes not soliciting any personally identifiable information (such as birth date, age, government issued number, phone number, or home address).</li><li>Agree to maintain the privacy of your personal details. This includes personal financial information regarding your Teacher Wallet.</li><li>Agree to maintain personal records for all invoices and payments.</li><li>Agree to cooperate with italki in anti-fraud actions, and in Dispute Resolution.</li><li>Report any conduct violations, including misuse of ratings and feedback.</li><li>Not use Prohibited Content, or content that violates copyright.</li></ul></div><div class="grid-gutter-margin-b"><h4>Providing Teaching Services</h4><p class="no-margin-b">You are expected to perform in a manner that results in a consistently high level of Student satisfaction. You are in breach of these Teacher Terms if you:</p><ul><li>Fail to deliver any Teaching Service for which payment was accepted.</li><li>Fail to take reasonable efforts to resolve a dispute with a Student.</li><li>Create unacceptable levels of Student dissatisfaction</li><li>Violate the Terms of Service, Privacy Policy or other policies</li></ul><p class="no-margin-b">italki reserves the following rights to take any of the following actions at any time and at our sole discretion:</p><ul><li>Cancel your listed Teaching Service</li><li>Limit your Account privileges</li><li>Suspend or terminate your Account</li><li>Adjust your Teacher Wallet balance and withhold all payments</li><li>Contact law enforcement or seek legal remedies</li></ul></div><div class="grid-gutter-margin-b"><h4>License Grants</h4><h5 class="no-margin-b">License Grant for Teacher Content to Students</h5><p>You hereby agree that any user who purchases your Teaching Services will be granted a right to use the Content in your Teaching Services solely for personal and noncommercial educational purposes. You acknowledge that all of the Content you submit to the Site is subject to the representations, warranties, license grants and other provisions contained in the Terms.</p><h5 class="no-margin-b">License Grant for Teacher Content to italki</h5><p>You acknowledge that italki may use your Content and information about your Teaching Services in marketing, advertising and promotion of our Site or Application in any medium. You also give italki permission to use your name as part of marketing, advertising or promotion.</p><h5 class="no-margin-b">License Grant for Teacher Logos</h5><p>We encourage you to highlight your Teaching Services by using your trademarks, service marks or brands ("Logos") on our Site. You give us permission to display your Logos and to make modifications to the appearance of the Logos as may be reasonably necessary. You represent that you own all rights to your Logo. You retain ownership and all rights to any Logo that you submit. Logos may not contain any Prohibited Content. We reserve the right to remove your Logos from the Site at any time in our sole discretion.</p><h5 class="no-margin-b">License Grant for Teacher Introduction Video</h5><p>italki has the rights to use your Teacher Introduction video for marketing, advertising or promotional purposes. italki may publish teacher videos to our official channels in third-party video hosting and streaming services, such as Youtube, Vimeo, Youku, or others, as to ensure accessibility and visibility to italki students regardless of location.</p><p>italki will remove Teacher Introduction videos published to our official channels in third-party video hosting and streaming services upon written notice sent to <a target="_blank" href="http://support.italki.com">support.italki.com</a>.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Contacting Customer Service</h4><p>If you wish to report a violation of Site, Application or Service Policies, have any questions or need assistance, please contact italki Customer Service as follows:</p>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></div></div></div></div>'),a.put("/views/page/jobs.html",""),a.put("/views/page/kids-learn.html","<style>.theme-white {\n    background: #fff;\n  }\n\n  .logo_outreach {\n    position: absolute;\n    top: 30px;\n    left: 30px;\n    width:200px;\n  }\n\n  p {\n    font-size: 16px;\n    color: #333;\n  }\n\n  ul.social-share {\n    display: inline-block;\n    list-style-type: none;\n    padding: 0;\n  }\n\n  ul.social-share li {\n    float: left;\n    width: 60px;\n    height: 40px;\n  }\n\n  ul.social-share li a{\n    display: block;\n    width: 60px;\n    height: 40px;\n  }\n\n  li.social-email {\n    background: url('/static/images/static/icon_mail.png');\n    background-size: 60px 40px;\n  }\n\n  li.social-twitter {\n    background: url('/static/images/static/icon_twitter.png');\n    background-size: 60px 40px;\n  }\n\n  li.social-facebook {\n    background: url('/static/images/static/icon_facebook.png');\n    background-size: 60px 40px;\n  }\n\n  .bg-container {\n    height: 750px;\n    width: 100%;\n    background: url('/static/images/static/bg_kids-learn.png') 50% 50%;\n    background-size: cover;\n    padding-top: 400px;\n  }\n\n  .container {\n    max-width: 1000px;\n    padding-top: 0px;\n  }\n\n  .container h2 {\n    font-size: 40px;\n    font-weight: 300;\n    text-align: center;\n  }\n\n  .bg-container h1 {\n    font-size: 50px;\n    font-weight: 300;\n    margin-bottom: 40px;\n    line-height: 0.94;\n    text-align: center;\n    color: #ffffff;\n  }\n\n  .bg-container p {\n    font-size: 20px;\n    font-weight: 300;\n    text-align: center;\n    color: #ffffff;\n  }\n\n  .bg-container h2 {\n    font-size: 40px;\n    font-weight: 300;\n    line-height: 1.18;\n    text-align: center;\n    color: #333333;\n    margin-bottom: 38px;\n  }\n\n  .fa-angle-down {color:white; font-size:36px; margin-top:120px;}\n\n  .video-container {\n    position: relative;\n    width: 100%;\n    height: 0;\n    padding-bottom: 56.25%;\n    margin: 50px auto;\n  }\n\n  .video {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n\n\n  /*slider CSS */\n\n  .testimonial-bg{\n    background: #F5F5F5;\n  }\n\n  .carousel-inner{\n    height: 338px;\n    max-width: 750px;\n    margin: 0 auto;\n  }\n\n  .carousel-control{\n    display: none;\n  }\n\n  .carousel-indicators .active {\n    margin-left: 10px;\n    background-color: #333;\n  }\n\n  .carousel-indicators li {\n    margin-left: 10px;\n    border: 1px solid #333;\n    background-color: none;\n  }\n\n  .testimonials-slide{\n    color: #333;\n  }\n\n  .slide-img{\n    width: 145px;\n    margin: 60px 50px 0 0;\n  }\n\n  .slide-content{\n    width: 550px;\n  }\n\n  .slide-name{\n    font-size: 30px;\n    line-height: 40px;\n    font-weight: 300;\n    margin-top: 60px;\n  }\n\n  .slide-date{\n    margin-bottom: 25px;\n  }\n\n  /*end slider css*/\n\n  .mid_page_banner {\n    background: url('/static/images/static/banner_want-to-help.png');\n    background-size: 1000px 205px;\n    height: 205px;\n  }\n\n  .mid_page_banner h2 {\n    color: white;\n    padding: 20px;\n    margin: 20px 0;\n    font-size: 30px;\n  }\n\n  .mid_page_banner button {\n    border: 2px solid #fff;\n    height: 60px;\n    width: 222px;\n    background: none;\n    color: white;\n    text-transform: uppercase;\n    font-size: 18px;\n    display: block;\n    margin: 0 auto;\n  }\n\n  .divider_banner {\n    background-color: #ff4338;\n    height: 80px;\n  }\n\n  .divider_banner h2 {\n    background-color: #ff4338;\n    margin-top:12px;\n    font-size: 20px;\n    font-weight: 300;\n    width: 520px;\n    color: #ffffff;\n    float: right;\n  }\n\n  .divider_banner button {\n    border: 2px solid #fff;\n    height: 50px;\n    width: 184px;\n    background: none;\n    color: white;\n    text-transform: uppercase;\n    font-size: 18px;\n    float:left;\n    margin-top: 15px;\n  }\n\n  .activities_lc {\n    width: 470px;\n    height:300px;\n    overflow: auto;\n    background: url('/static/images/static/banner_saving-languges.png');\n    background-size: 470px 300px;\n    display: inline-block;\n  }\n\n  .activities_lc h3, .activities_kids h3 {\n    font-size: 40px;\n    font-weight: 300;\n    text-align: center;\n    color: #ffffff;\n    margin-top: 100px;\n  }\n\n  .activities_kids {\n    width: 470px;\n    height:300px;\n    overflow: auto;\n    background: url('/static/images/static/banner_refugee.png');\n    background-size: 470px 300px;\n    display: inline-block;\n  }\n\n  footer {\n    padding-top: 30px;\n    background: #000;\n    height: 100%;\n    text-align: center;\n    color: #fff;\n  }\n\n  footer span {\n    display: block;\n    color: #737373;\n    margin-bottom: 10px;\n  }\n\n  footer ul {\n    display: inline-block;\n    list-style-type: none;\n    padding: 0;\n  }\n\n  footer li {\n    display:inline-block;\n    margin-bottom: 10px;\n  }\n\n  footer li a {\n    margin:10px;\n    color: #737373;\n    text-decoration: none;\n  }\n\n  footer li a:hover {\n    color: #ccc;\n  }\n\n  @media (max-width: 991px) {\n    .divider_banner {\n      height: auto;\n    }\n    .divider_banner h2 {\n      float: none;\n      width: auto;\n    }\n    .divider_banner button {\n      float: none;\n      margin-bottom: 20px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    .divider_banner {\n      height: auto;\n    }\n    .divider_banner h2 {\n      float: none;\n      width: auto;\n    }\n    .divider_banner button {\n      float: none;\n    }\n  }\n\n  @media (max-width: 480px) {\n\n    .logo_outreach {\n      width: 35%;\n    }\n\n    .mid_page_banner h2 {\n      font-size: 20px;\n    }\n\n    .activities_lc, .activities_kids {\n      width: 320px;\n    }\n\n    .bg-container {\n      height: 350px;\n      padding-top: 150px;\n    }\n\n    .bg-container h1 {\n      font-size: 38px;\n      line-height: 1.2em;\n      margin-bottom: 10px;\n    }\n\n    .about-us img {\n      width: 80px;\n      margin-top: 30px;\n    }\n\n    .divider_banner h2 {\n      font-size: 14px;\n      margin-top: 20px;\n    }\n\n    .fa-angle-down {margin-top:-15px;}\n\n  }\n\n  h3 {\n    font-size: 16px;\n"+'  }</style><div class="bg-container text-center"><img src="static/images/static/logo-outreach_white.svg" class="logo_outreach"><h1>Helping kids learn languages</h1><i class="fa fa-angle-down" aria-hidden="true"></i></div><div class="container"><p style="margin:25px auto">italki is working with schools in underprivileged regions to offer children online learning opportunities that will prepare them for the future.</p><p>We are currently working to expand our offline network of schools and organizations supporting children’s education. Please reach out if you would be interested in collaborating to offer young students in your region the opportunity to learn languages through interactive online lessons with native speakers.</p><div class="row about-us text-center" style="margin:50px auto"><div class="col-sm-4"><img src="static/images/static/icon_love.png" width="100"><h3>Love</h3><p>Children deserve the chance to reach their full potential.</p></div><div class="col-sm-4"><img src="static/images/static/icon_language.png" width="100"><h3>Languages</h3><p>Speaking foreign languages connects children with their world.</p></div><div class="col-sm-4"><img src="static/images/static/icon_future.png" width="100"><h3>Future</h3><p>Language ability offers children a lasting opportunity to grow.</p></div></div></div><div class="container" style="margin: 50px auto"><div class="mid_page_banner"><h2>Would you like to help?</h2><a href="mailto:support@italki.com"><button>Contact Us</button></a></div></div><div class="divider_banner text-center"><div class="container"><div class="row"><div class="col-md-8"><h2>italki is a language lgearning platform connecting students and teachers for immersive online lessons in any language</h2></div><div class="col-md-4"><a href="/"><button>discover more</button></a></div></div></div></div><div class="container" style="margin: 0px auto 50px"><h2 style="margin: 40px auto">Related activities</h2><div class="row"><div class="col-md-6 text-center"><a href="/languagechallenge"><div class="activities_lc"><h3>Diversity Language Challenge</h3></div></a></div><div class="col-md-6 text-center"><a href="/refugee-outreach"><div class="activities_kids"><h3>italki Refugee Outreach</h3></div></a></div></div></div><footer><span>&copy; 2017 italki HK Limited</span><ul><li><a href="/about">About</a></li><li><a href="/press">Press</a></li><li><a href="/contactus">Contact</a></li><li><a href="http://blog.italki.com/">Blog</a></li><li><a href="http://stories.italki.com/">Stories</a></li><li><a href="/tos">Terms</a></li><li><a href="/privacy">Privacy</a></li></ul></footer>'),a.put("/views/page/landing.html",'<kp-notify></kp-notify><style>body{\n    font-size:16px;\n  }\n\n  h3{\n    margin-top: 0;\n  }\n\n  .hp-content{\n    margin-top: 56px;\n  }\n\n  .navbar-desktop{\n    z-index: 1;\n    position: absolute;\n    width: 100%;\n    background: #ff4338;\n    box-shadow: none;\n    border: none;\n    height: 56px;"\n  }\n\n  .navbar-desktop.top-notification{\n    height: 114px;\n  }\n\n  @media (min-width: 768px){\n    .hp-content.top-notification{\n      margin-top: 114px;\n    }\n  }\n\n\n\n\n  .border-top{\n    border-top: 1px solid #dddddd;\n  }\n\n  .backgro {\n    background: #D9D9D9;\n  }\n  .siteLang{\n    display: none;\n  }\n  .btn.btn-login {\n    margin: 18px 0px 0px 20px;\n    color: rgba(255, 255, 255, 1);\n    border-color: rgba(255, 255, 255, 1);\n  }\n\n  .btn.btn-login:hover, .btn.btn-login:active, .btn.btn-login:focus {\n    background: none !important;\n    color: rgba(255, 255, 255, 0.7);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  .static-content-bottom {\n    width: 390px;\n    color: #fff;\n  }\n\n  .language-index {\n    background-size: cover !important;\n  }\n\n  .language-index:hover {\n  }\n\n  .language-index .info {\n    padding: 10px 15px;\n    padding-top: 40%;\n    background: -moz-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0%, rgba(0, 0, 0, .65)), color-stop(15%, rgba(0, 0, 0, 0.35)), color-stop(35%, rgba(0, 0, 0, 0)), color-stop(100%, rgba(0, 0, 0, 0)));\n    background: -webkit-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -o-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: -ms-linear-gradient(bottom, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    background: linear-gradient(to top, rgba(0, 0, 0, .65) 0, rgba(0, 0, 0, .35) 15%, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0) 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#a6000000\', endColorstr=\'#00000000\', GradientType=0);\n    box-shadow: none;\n    border: none;\n  }\n\n  .language-index span.language {\n    font-size: 30px;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .language-index span.country {\n    font-size: 20px;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .language-index div.number {\n    font-size: 1.5rem;\n    color: #fff;\n    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n  }\n\n  .hp.party-size-picker {\n    width: auto !important;\n    margin: 16px 20px 0 0;\n  }\n\n  .hp .dtp-picker-selector-link {\n    color: #fff;\n    padding: 0;\n  }\n\n  .hp .dtp-picker-selector-link:after {\n    color: #fff;\n    top: 0;\n  }\n\n  .hp .dtp-picker-selector select {\n    color: #fff\n  }\n\n  .hp-language {\n    width: 100%;\n    border: none\n  }\n\n  .hp-language .dtp-picker-selector-link {\n    background: #424242;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    height: initial;\n  }\n\n  .hp-language .dtp-picker-selector-link:after {\n    color: #fff;\n    top: 1rem;\n    font-size: 30px;\n  }\n\n  .party-size-picker.lg .form-control.ui-select-toggle {\n    outline: 0;\n    background: #424242 !important;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    padding: 8px 12px;\n    height: 50px;\n  }\n\n  .ui-select-toggle .ui-select-placeholder {\n    float: none;\n  }\n\n  .ui-select-toggle .fa.fa-angle-down {\n    font-size: 30px;\n  }\n\n  .ui-select-toggle, .ui-select-search {\n    height: 50px;\n  }\n\n  .lg input.ui-select-search {\n    padding-left: 40px;\n    background: #ddd url(/static/images/icon_search.png) 10px 10px no-repeat !important;\n  }\n\n  .centric {\n    background: #ff4338;\n    width: 100px;\n    height: 100px;\n    line-height: 130px;\n    border-radius: 999999px;\n    text-align: center;\n    overflow: hidden;\n    margin: 0 auto\n  }\n\n  .centric i {\n    color: #fff\n  }\n\n\n  .p70 {\n    padding-bottom: 70px\n  }\n\n  .pt20 {\n    padding-top: 20px;\n    padding-bottom: 20px\n  }\n\n  .pt70 {\n    padding: 0 0 70px\n  }\n\n  .pb70{\n    padding-bottom: 70px;\n  }\n\n  .pt50 {\n    padding: 50px 0\n  }\n\n  .plr30 {\n    padding: 0 30px\n  }\n\n  .col-md-15 {\n    width: 20%\n  }\n\n  .class-content {\n    background: #ff7b73;\n    padding-bottom: 70px\n  }\n\n  .student-content {\n    padding-bottom: 70px;\n  }\n\n  .market-content {\n    background: #424242;\n    padding: 0 0 70px\n  }\n\n  .market-content .col-sm-4 .info {\n    background: #fff;\n    box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n    padding: 30px;\n    height: 260px\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-1 {\n    margin-left: auto;\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-2 {\n    margin-left: auto;\n  }\n\n  .second-row .col-md-4.col-sm-6.col-md-offset-4 {\n    margin-left: auto;\n  }\n\n  .pt70 .row .col-sm-2 .language-index div.number {\n    font-size: 1.1rem;\n  }\n\n  .japanese-market-container-fix {\n    height: 260px !important;\n  }\n\n\n  @media (max-width: 992px)and (min-width: 768px) {\n\n    .second-row .col-md-4.col-sm-6.col-md-offset-4 {\n      margin-left: 25%;\n    }\n  }\n\n  @media (min-width: 1200px) {\n    .language-index .info:hover {\n      background: rgba(255, 67, 56, 0.15);\n      cursor: pointer;\n    }\n\n    .market-content .col-sm-4 .info {\n      background: #fff;\n      box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n      padding: 30px;\n      height: 200px\n    }\n  }\n\n  @media (max-width: 1199px) {\n    .trans_layout3:hover .transimage3 {\n      bottom: 0;\n      position: absolute;\n      width: 100%;\n      display: none !important;\n      height: 0 !important;\n      background: none !important;\n    }\n  }\n\n  @media (max-width: 1024px)and (min-width: 768px) {\n    .header-small {\n      display: block;\n      background: none;\n      box-shadow: none;\n    }\n\n    .market-content .col-sm-4 .info {\n      background: #fff;\n      box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.15);\n      padding: 30px;\n      height: 260px\n    }\n\n    .container.pt20 .text-lg {\n      font-size: 18px;\n    }\n\n    .language-index .info .language {\n      font-size: 20px;\n    }\n\n    .col-sm-3.second-row .number {\n      display: none;\n    }\n\n    .col-sm-2.col-md-15 .number {\n      display: none;\n    }\n\n\n\n    .col-md-4.col-sm-6 {\n      height: 250px;\n    }\n\n    .static-content {\n      width: 400px;\n      padding: 30px;\n    }\n\n    .hp-content {\n      padding: 20px 0 0;\n    }\n\n    .japanese-market-container-fix {\n      height: 330px !important;\n    }\n  }\n\n  @media (min-width: 768px){\n    .community-container .row{\n      margin-bottom: 40px;\n    }\n  }\n\n  @media (max-width: 767px)and (min-width: 480px) {\n    .siteLang{\n      display: initial;\n    }\n\n\n    .hp-content {\n      padding: 0;\n    }\n\n    .p70 {\n      padding: 120px 0 0 !important;\n      background: linear-gradient(to top, rgba(0, 0, 0, .55) 0, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0) 85%, rgba(0, 0, 0, .25) 100%);\n    }\n\n    .pt70 .row {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .pt70 .row .col-sm-4, .pt70 .row .col-sm-3, .pt70 .row .col-sm-2 {\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n\n    .pt70 .row .col-sm-4 .panel, .pt70 .row .col-sm-3 .panel, .pt70 .row .col-sm-2 .panel {\n      background-position: 50% 40% !important;\n    }\n\n\n\n    /*.header-small {*/\n    /*position: absolute;*/\n    /*background: none;*/\n    /*box-shadow: none;*/\n    /*}*/\n\n    .header-small i {\n      font-size: 24px;\n    }\n\n    .navbar-brand.logo {\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n\n    .col-md-2 {\n      width: auto;\n    }\n\n    .col-md-15 {\n      width: auto;\n    }\n\n    .language-index {\n      margin-bottom: 0;\n    }\n\n    .language-index .info {\n      padding-top: 20px;\n      height: 90px;\n    }\n\n    .language-index div.number {\n      display: none;\n    }\n\n    .class-content {\n      padding-top: 0px;\n    }\n\n    .student-content {\n      padding-top: 0px;\n      padding-bottom: 15px;\n    }\n\n    .student-content .col-md-4 {\n      margin-bottom: 20px;\n    }\n\n    .student-content .container {\n      margin-left: 15px;\n      margin-right: 15px;\n    }\n\n    .student-content .container:first-child {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .hp-language .dtp-picker-selector-link {\n      text-align: left;\n    }\n\n    .hp-language .dtp-picker-selector-link:after {\n      top: 50%;\n      content: "\\f105";\n      margin-top: -18px;\n    }\n\n    .visible-phone {\n      display: block !important;\n    }\n\n    .student-content .col-sm-6 ,.class-content .col-sm-4{\n      margin-bottom: 20px;\n      text-align: left;\n    }\n\n    .student-content .col-sm-6 img{\n      float: left;\n      width: 80px;\n    }\n\n\n    .student-content .col-sm-6 div{\n      margin-left: 120px;\n    }\n\n    .class-content .col-sm-4{\n      padding: 0 30px;\n    }\n\n    .class-content .col-sm-4 img{\n      float: left;\n      width: 170px;\n    }\n\n    .class-content .col-sm-4 div{\n      margin-left: 190px;\n      margin-top: 20px;\n    }\n\n  }\n\n  @media (max-width: 479px) {\n    .language-index span.language {\n      font-size: 30px;\n      font-weight: bold\n    }\n\n    .language-index span.country {\n      font-size: 14px;\n      font-weight: bold\n\n    }\n\n\n    .pt70 .row {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .pt70 .row .col-sm-4, .pt70 .row .col-sm-3, .pt70 .row .col-sm-2 {\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n\n    .pt70 .row .col-sm-4 .panel, .pt70 .row .col-sm-3 .panel, .pt70 .row .col-sm-2 .panel {\n      background-position: 50% 40% !important;\n    }\n\n\n    /*.header-small {*/\n    /*position: absolute;*/\n    /*background: none;*/\n    /*box-shadow: none;*/\n    /*}*/\n\n    .header-small i {\n      font-size: 24px;\n    }\n\n    .navbar-brand.logo {\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n\n    .col-md-2 {\n      width: auto;\n    }\n\n    .col-md-15 {\n      width: auto;\n    }\n\n    .language-index {\n      margin-bottom: 0;\n    }\n\n    .language-index .info {\n      padding-top: 20px;\n      height: 90px;\n    }\n\n    .language-index div.number {\n      display: none;\n    }\n\n    .class-content {\n      padding-top: 30px;\n    }\n\n\n\n    .student-content .col-md-4 {\n      margin-bottom: 20px;\n    }\n\n    .student-content .container {\n      margin-left: 15px;\n      margin-right: 15px;\n    }\n\n    .student-content .container:first-child {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n\n    .hp-language .dtp-picker-selector-link {\n      text-align: left;\n    }\n\n    .hp-language .dtp-picker-selector-link:after {\n      top: 2.2rem;\n      content: "\\f105";\n    }\n\n    .student-content .col-sm-6 ,.class-content .col-sm-4{\n      margin-bottom: 20px;\n      text-align: left;\n      padding: 0 10px;\n    }\n\n    .student-content .col-sm-6 img{\n      float: left;\n      width: 60px;\n    }\n\n    .student-content .col-sm-6 div{\n      margin-left: 75px;\n    }\n\n    .class-content .col-sm-4 img{\n      float: left;\n      width: 130px;\n    }\n\n    .class-content .col-sm-4 div{\n      margin-left: 140px;\n      padding: 0px;\n      margin-top: 10px;\n    }\n\n  }\n\n  .landing-logo {\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n  }\n\n  .slideout .navbar-default .navbar-nav > li > a .s {\n    border: 1px solid red;\n  }\n\n  .lab2{\n    height: 48px;\n    border-bottom: 1px solid #d9d9d9;\n    margin: 0px 16px;\n    line-height: 48px;\n  }\n  .lab3 {\n    border-bottom: 1px solid #dddddd;\n    height: 48px;\n    margin: 0px 16px;\n    line-height: 48px;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > .select-butten, .slideout .navbar-default .navbar-nav > .dropdown > .select-butten :hover, .slideout .navbar-default .navbar-nav > .dropdown > .select-butten:focus {\n    background: #D9D9D9;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > a > img, .slideout .navbar-default .navbar-nav > .dropdown > a > img :hover, .slideout .navbar-default .navbar-nav > .dropdown > a > img:focus {\n    background: #D9D9D9;\n  }\n\n  .slideout .navbar-default .navbar-nav > .dropdown > a > span, .slideout .navbar-default .navbar-nav > .dropdown > a > span :hover, .slideout .navbar-default .navbar-nav > .dropdown > a > span:focus {\n    font-weight: bolder;\n  }\n\n  /* background setting*/\n  .static-content{\n    background: rgba(0,0,0,0.7);\n  }\n\n  .user-bottom .static-content{\n    background: none;\n    color:#fff;\n  }\n\n\n  .user-bottom{\n    margin-bottom: -30px;\n  }\n\n  @media (min-width: 1601px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 82px;\n      background: url(\'/static/images/homepage/homepage-hero-1200.jpg\') no-repeat;\n      background-size: cover;\n      color: #fff\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero2-1200.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-1200.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n  }\n\n  @media (min-width: 1200px) and (max-width: 1600px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 82px;\n      background: url(\'/static/images/homepage/homepage-hero-1200.jpg\') no-repeat;\n      color: #fff\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero2-1200.jpg\') no-repeat;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-1200.jpg\') no-repeat;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n\n  }\n\n  @media (min-width: 1200px){\n    .static-content-container{\n      width: 50%;\n\n    }\n\n    .static-content{\n      margin: 0 auto;\n      width: 448px;\n      padding: 62px 20px 40px;\n      /*height: 438px;*/\n    }\n\n    .user-bottom .static-content{\n      padding: 150px 20px 200px;\n    }\n  }\n\n  @media (min-width: 768px) and (max-width: 1199px){\n\n    .hp-content {\n      width: 100%;\n      padding: 73px 0 49px;\n      background: url(\'/static/images/homepage/homepage-hero-768.jpg\') no-repeat;\n      color: #fff;\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-768.jpg\') no-repeat;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-768.jpg\') no-repeat;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-768.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .user-bottom .static-content{\n      padding: 150px 20px 130px;\n    }\n\n    .static-content-container{\n      width: 50%;\n    }\n\n    .static-content{\n      margin: 0 auto;\n      width: 368px;\n      padding: 37px 20px 40px;\n      /*height: 300px;*/\n    }\n\n    .static-content .title1{\n      font-size: 30px;\n      line-height: 36px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n    }\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 16px;\n      font-size: 14px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:36px;\n      line-height: 36px;\n    }\n\n  }\n\n  @media (min-width: 480px) and (max-width: 767px){\n\n    .hp-content {\n      width: 100%;\n      background: url(\'/static/images/homepage/homepage-hero-480.jpg\') no-repeat;\n      color: #fff;\n      background-position-y: 100%;\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-480.jpg\') no-repeat;\n      background-position-y: 100%;\n    }\n\n    html[kp-country="ru"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero3-480.jpg\') no-repeat;\n      background-position-y: 100%;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-480.jpg\') no-repeat;\n      background-size: cover;\n    }\n\n    .static-content{\n      width: 316px;\n      height: 340px;\n      background: rgba(0, 0, 0, .7);\n      padding: 57px 0px 0px;\n    }\n\n  }\n\n  @media (max-width: 479px){\n\n    .hp-content {\n      width: 100%;\n      background: url(\'/static/images/homepage/homepage-hero-320.jpg\') no-repeat;\n      color: #fff;\n      background-position-x: 50%;\n      background-position-y: 70%;\n    }\n\n    html[kp-country="cn"] .hp-content,html[kp-country="kp"] .hp-content,html[kp-country="jp"] .hp-content,html[kp-country="kr"] .hp-content,html[kp-country="sg"] .hp-content,html[kp-country="my"] .hp-content {\n      background: url(\'/static/images/homepage/homepage-hero2-320.jpg\') no-repeat;\n      background-position-x: 50%;\n      background-position-y: 70%;\n    }\n\n    html[kp-country="ru"] .hp-content{\n      background: url(\'/static/images/homepage/homepage-hero3-320.jpg\') no-repeat;\n      background-position-x: 50%;\n      background-position-y: 70%;\n    }\n\n    .user-bottom{\n      background: url(\'/static/images/homepage/homepage-guy-320.jpg\') no-repeat;\n      background-position-x: 50%;\n    }\n\n    .user-bottom .container{\n      padding: 0;\n    }\n\n    .user-bottom .static-content{\n      margin-top: 176px;\n    }\n\n    .static-content-container.top-container{\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n    }\n\n\n    .static-content .title1{\n      width: 320px;\n      margin: 0 auto;\n    }\n\n    .static-content{\n      background: none;\n    }\n\n  }\n\n  /*font setting*/\n\n  .text-slg {\n    font-size: 45px;\n    line-height: 48px;\n  }\n\n  h3{\n    font-size: 20px;\n    line-height: 24px;\n    margin-bottom: 16px;\n  }\n\n  @media (min-width:1200px){\n    .static-content .title1{\n      font-size: 42px;\n      line-height: 48px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n    }\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 38px;\n      font-size: 18px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:48px;\n      line-height: 48px;\n    }\n\n    .static-content h3 {\n      line-height: 24px;\n      font-size: 20px;\n      margin-bottom: 29px;\n      letter-spacing: 0px;\n      font-weight: 400;\n    }\n  }\n\n  @media (max-width:1199px){\n    .static-content .title1 {\n      font-size: 30px;\n      line-height: 36px;\n      font-weight: 700;\n      margin-bottom: 32px;\n      letter-spacing: 1px;\n      width: 300px;\n    }\n\n\n    .static-content h3 {\n      line-height: 20px;\n      font-size: 16px;\n      margin-bottom: 29px;\n      letter-spacing: 0px;\n      font-weight: 400;\n    }\n\n\n    .static-content button {\n      margin-bottom: 25px;\n      padding: 0 16px;\n      font-size: 14px;\n      font-weight: 500;\n      text-transform: uppercase;\n      height:36px;\n      line-height: 36px;\n      width: auto !important;\n    }\n  }\n\n  @media (min-width: 768px){\n    .lesson-container{\n      padding-top: 70px;\n      padding-bottom: 70px;\n    }\n\n    .community-container{\n      padding-top: 70px;\n      padding-bottom: 30px;\n    }\n\n    .text-slg{\n      margin-bottom: 25px;\n    }\n\n  }\n\n  @media (max-width:767px){\n    .text-slg {\n      font-size: 34px;\n      line-height: 40px;\n    }\n\n    .lesson-container, .community-container{\n      padding-top: 35px !important;\n      padding-bottom: 35px;\n    }\n\n    .student-content .container {\n      padding-top: 35px !important;\n    }\n\n    .class-content{\n      padding-bottom: 35px;\n      padding-top:35px;\n    }\n\n    .text-slg{\n      margin-bottom: 16px;\n    }\n\n    .text-slg.grid-gutter-margin-b3{\n      margin-bottom: 30px;\n    }\n\n    .hp-content{\n      margin-top: 0;\n    }\n  }\n\n  @media (max-width:479px){\n    .static-content button {\n      margin-bottom: 0;\n      text-transform: uppercase;\n      font-size: 18px;\n      height: 61px;\n      width: 100% !important;\n    }\n\n    .static-content h3 {\n      letter-spacing: 0px;\n      width: 260px;\n      margin: 0 auto 44px;\n    }\n\n    .container-p70 {\n      background: linear-gradient(to top,  rgba(0, 0, 0, 0.7) 0, rgba(0, 0, 0, 0.7) 19%, rgba(0, 0, 0, 0) 61%,  rgba(0, 0, 0, 0) 100%);\n      height: 447px;\n      position: relative;\n    }\n\n  }\n\n  @media (max-width: 365px){\n    .party-size-picker.lg .form-control.ui-select-toggle {\n      font-size: 18px;\n    }\n\n    .ui-select-toggle .fa.fa-angle-down {\n      font-size: 28px;\n    }\n  }\n\n\n  .mobile-notification{\n    background: linear-gradient(to top, #eeeeee, #ffffff);\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n    justify-content: space-between;\n    height: 50px;\n    padding-left: 10px;\n    padding-right: 10px;\n    color: #333;\n  }\n\n  .mobile-notification .group-text{\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  .mobile-notification .download-text{\n    vertical-align: middle;\n    display: inline-block;\n    text-align: left;\n    line-height: 1.2;\n  }\n\n  .mobile-notification .download-text .font-10{\n    font-size: 12px;\n    -webkit-transform-origin-x: 0;\n    -webkit-transform:scale(0.85);\n    font-size: 10px;\n  }\n\n  .mobile-notification .download-btn .font-10{\n    font-size: 12px;\n    -webkit-transform:scale(0.85);\n    font-size: 10px;\n  }\n\n\n\n\n  .mobile-notification .close-btn{\n    width: 9px;\n    height: 9px;\n    background: url(\'/static/images/icons/close_icon.svg\');\n    background-repeat: no-repeat;\n    background-size: contain;\n  }\n\n  .mobile-notification .download-btn{\n    border-radius: 100px;\n    border: solid 1px #333333;\n    padding: 6px 2px;\n    line-height: 1;\n  }\n\n  .mobile-notification .app-icon-wrap{\n    padding: 0 10px;\n  }\n\n  .mobile-notification .app-icon-wrap .app-icon{\n    width: 34px;\n    height: 34px;\n    background: url(/static/images/icons/italki_app_icon.png);\n    background-repeat: no-repeat;\n    background-size: contain;\n  }\n  /* A/B test */\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .pt70 {\n      padding-bottom: 20px;\n    }\n    div[italki-abtest="on"] .language-index span.language {\n      font-weight: 300;\n      text-shadow: none;\n    }\n  }\n  .italki-optimize-abtest {\n    display: none;\n  }\n  .italki-optimize-abtest .btn-italki {\n    min-width: 313px;\n    width: auto;\n  	height: 50px;\n    background: transparent;\n  	border-radius: 2px;\n  	border: solid 1px #ff4338;\n	  font-size: 18px;\n	  text-align: center;\n	  color: #ff4338;\n  }\n  .italki-optimize-abtest .btn-italki:hover {\n    border-color: #B22E27;\n    color: #B22E27;\n  }\n  .italki-optimize-abtest .btn-italki:focus {\n    outline: none;\n  }\n  @media (max-width: 767px) {\n    .italki-optimize-abtest .btn-italki {\n      margin-top: 5px;\n      padding: 0 20px;\n      font-size: 14px;\n    }\n  }\n  div[italki-abtest="on"] .language-index span.language {\n    font-size: 20px;\n  }\n  .community-icon {\n    float: left;\n    width: 20%;\n    text-align: center;\n  }\n  @media (max-width: 767px) {\n    .community-icon {\n      float: none;\n      display: block;\n      width: 100%;\n      text-align: left;\n      overflow: hidden;\n    }\n  }\n  .community-icon > img {\n    margin-bottom: 30px;\n    width: 80px;\n    height: 80px;\n  }\n  @media (max-width: 767px) {\n    .community-icon > img {\n      float: left;\n      margin-bottom: 0;\n      width: 60px;\n      height: 60px;\n    }\n    .community-icon > p {\n      margin-bottom: 20px;\n      padding-left: 90px;\n      height: 60px;\n      line-height: 60px;\n    }\n  }\n  .community-icon-text {\n    font-size: 20px;\n  }\n  .community-title {\n    margin-bottom: 90px;\n    font-size: 45px;\n    font-weight: 300;\n    text-align: center;\n  }\n  @media (max-width: 767px) {\n    .community-title {\n      margin-bottom: 30px;\n    }\n  }\n  .italki-optimize-abtest .user-bottom {\n    background: url(\'/static/images/landingv2/bottom.jpg\') no-repeat center / cover !important;\n  }\n  @media (max-width: 767px) {\n    .italki-optimize-abtest .user-bottom {\n      background: url(\'/static/images/landingv2/bottom-mobile.jpg\') no-repeat center top / cover !important;\n    }\n  }\n  .user-bottom-title1 {\n    margin-bottom: 25px;\n    width: 370px;\n	  font-size: 42px;\n	  font-weight: 300;\n	  line-height: 1.3;\n  }\n  @media (max-width: 767px) {\n    .user-bottom-title1 {\n      width: 100%;\n      text-align: center;\n      font-size: 30px;\n	    font-weight: 300;\n    }\n  }\n  .user-bottom-desc {\n    margin-bottom: 30px;\n    width: 370px;\n  	font-size: 20px;\n	  line-height: 1.5;\n  }\n  @media (max-width: 767px) {\n    .user-bottom-desc {\n      width: 100%;\n      font-size: 14px;\n	    line-height: 1.5;\n    	text-align: center;\n    }\n    div[italki-abtest="on"] .container-p70 {\n      position: relative;\n      min-height: 500px;\n      background: none;\n    }\n  }\n  div[italki-abtest="on"] .hp-content {\n    padding-bottom: 0;\n    background: url(\'/static/images/landingv2/hero.jpg\') no-repeat center / cover !important;\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .hp-content {\n      background: url(\'/static/images/landingv2/hero-mobile.jpg\') no-repeat center top / cover !important;\n    }\n  }\n  div[italki-abtest="on"] .static-content {\n    background: none;\n  }\n  @media (min-width: 768px) {\n    div[italki-abtest="on"] .container-p70 .static-content {\n      padding-top: 0;\n    }\n    div[italki-abtest="on"] .static-content {\n      text-align: left !important;\n    }\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .static-content {\n      width: auto;\n      height: auto;\n    }\n  }\n  div[italki-abtest="on"] .static-content .title1 {\n    font-weight: 300;\n    line-height: 1.3;\n  }\n  @media (min-width: 768px) {\n    div[italki-abtest="on"] .static-content .title1 {\n      width: 500px;\n      min-height: 112px;\n      font-size: 42px;\n    }\n  }\n  @media (max-width: 768px) {\n    div[italki-abtest="on"] .static-content .title1 {\n      width: auto;\n    }\n  }\n  div[italki-abtest="on"] .static-content h3 {\n    font-size: 20px;\n    line-height: 1.5;\n  }\n  @media (min-width: 768px) {\n    div[italki-abtest="on"] .static-content h3 {\n      width: 500px;\n      min-height: 90px;\n    }\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .static-content h3 {\n      margin-left: auto;\n      margin-right: auto;\n      width: 80%;\n      font-size: 14px;\n	    line-height: 1.5;\n    }\n  }\n  div[italki-abtest="on"] .static-content button {\n    height: 60px;\n    background-image: linear-gradient(to bottom, #ff786b, #ff4338);\n    border: none;\n    border-radius: 3px;\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .static-content button {\n      display: block;\n      margin: 0 auto;\n      width: 100% !important;\n    }\n  }\n  div[italki-abtest="on"] .italki-optimize-original {\n    display: none !important;\n  }\n  div[italki-abtest="on"] .italki-optimize-abtest {\n    display: block;\n  }\n  div[italki-abtest="on"] .student-content {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n  div[italki-abtest="on"] .community-container {\n    padding: 50px 0;\n  }\n  div[italki-abtest="on"] .community-container .community-wrapper {\n    padding: 0 15px;\n    overflow: hidden;\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .community-container .community-wrapper {\n      padding: 0 20px;\n    }\n  }\n  div[italki-abtest="on"] .static-content-container {\n    margin: 0 auto;\n    width: 85%;\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .static-content-container {\n      position: relative;\n      margin: 0;\n      padding-bottom: 40px;\n      width: 100%;\n      min-height: 400px;\n    }\n    div[italki-abtest="on"] .static-content-container.top-container {\n      position: absolute;\n      bottom: 0;\n    }\n  }\n  div[italki-abtest="on"] .static-content-container .static-content {\n    margin: 0;\n    padding-left: 0;\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .static-content-container .static-content {\n      position: absolute;\n      bottom: 20px;\n      margin: 0;\n      padding: 0 20px;\n      width: 100%;\n    }\n  }\n  .italki-company-logos {\n    margin: 0 auto;\n    width: 85%;\n    overflow: hidden;\n    border-top: 1px solid #fff;\n  }\n  .italkit-company-logo {\n    float: left;\n    width: 14.2857142857%;\n    height: 90px;\n    text-align: center;\n    line-height: 90px;\n  }\n  @media (min-width: 992px) and (max-width: 1199px) {\n    .italkit-company-logo > img {\n      max-width: 90%;\n    }\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .italkit-company-logo > img {\n      max-width: 85%;\n    }\n  }\n  @media (max-width: 767px) {\n    .italki-company-logos {\n      display: none;\n    }\n  }\n  @media (max-width: 767px) {\n    div[italki-abtest="on"] .pt50 .text-primary {\n      display: block;\n    }\n    div[italki-abtest="on"] .pt70 .language-index {\n      margin: 10px 0;\n      border-radius: 4px;\n      overflow: hidden;\n    }\n    div[italki-abtest="on"] .pt70 .info {\n      background: rgba(0, 0, 0, 0.25);\n    }\n  }\n  .italki-howitworks-image {\n    width: 250px;\n    height: 250px;\n  }\n  .italki-howitworks-image {\n    margin: 0 auto;\n  }\n  @media (min-width: 768px) and (max-width: 1199px) {\n    .italki-howitworks-image {\n      width: 150px;\n      height: 150px;\n    }\n  }\n  @media (max-width: 767px) {\n    .italki-howitworks-image {\n      width: 100px !important;\n      height: 100px;\n    }\n\n    div[italki-abtest="on"] .community-title {\n      font-size: 30px;\n    }\n    div[italki-abtest="on"] .community-icon > p {\n      font-size: 16px;\n    }\n    div[italki-abtest="on"] .plr30 {\n      margin-left: 120px;\n      font-size: 12px;\n      line-height: 1.5;\n    }\n    div[italki-abtest="on"] .plr30 h3 {\n      margin-bottom: 10px;\n      font-size: 14px;\n      font-weight: 500;\n    }\n  }\n\n  @media (min-width: 1200px) {\n    div[italki-abtest="on"] .italki-optimize-abtest .info {\n      height: 150px;\n    }\n  }\n\n  @media (min-width: 768px) {\n    div[italki-abtest="on"] .italki-optimize-abtest .info {\n      padding-top: 65%;\n    }\n    div[italki-abtest="on"] .italki-optimize-abtest .landing-teacher-info {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: 0;\n      padding: 10px;\n      background: rgba(0, 0, 0, 0.4);\n      border-radius: 0 0 4px 4px;\n    }\n    div[italki-abtest="on"] .language-index .info:hover {\n      background: none;\n    }\n  }\n  .homepage-c {\n    display: none;\n  }\n  div[italki-abtest="c"] .homepage-c {\n    display: block;\n  }\n  div[italki-abtest="c"] .hp-content {\n    display: none;\n  }\n  div[italki-abtest="c"] .home-page-ab {\n    display: none;\n  }</style><div class="hp-content" ng-class="{\'top-notification\':isTopShow}"><nav class="navbar visible-desktop navbar-desktop" role="navigation" ng-class="{\'top-notification\':isTopShow}" ng-controller="TopNavCtrl"><div style="padding-top: 0;padding-left: 16px;padding-right: 16px"><div class="navbar-header"><a class="landing-logo" italki-go-home></a></div><style>.language-divider {\n          border-top: 1px solid #e5e5e5;\n          padding-top: 5px;\n          margin: 5px 0;\n          overflow: hidden;\n\n        }</style><span class="pull-right"><div class="pull-left is-relative" dropdown style="height:56px"><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span class="visible-md-inline-block visible-lg-inline-block" style="font-weight: normal">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><a class="btn btn-outline btn-login text-up" ui-sref="apply" style="height: 36px;font-size: 14px;margin: 10px -8px 10px 16px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'OB252\'|t}}</a> <a class="btn btn-outline btn-login text-up" ui-sref="signin" style="height: 36px;font-size: 14px;margin: 10px 8px 10px 16px;font-weight: bold;padding: 10px 16px;border-radius: 2px">{{\'C0071\'|t}}</a> <a class="btn btn-outline btn-login text-up" ui-sref="signup" style="height: 36px;font-size: 14px;margin: 0px;font-weight: bold;\n                      color: #ff4338;background-color: white !important;padding: 10px 16px;border-radius: 2px">{{\'C0072\'|t}}</a></span></div></nav><nav class="navbar visible-phone header-small" id="top" role="navigation" ng-controller="TopNavCtrl" style="background-color: #FF4338"><div ng-if="mobileShow" class="mobile-notification no-margin no-border text-center"><div class="group-text"><a class="close-btn" ng-click="closeMobile()"></a><div class="app-icon-wrap"><div class="app-icon"></div></div><div class="download-text"><div class="font-10">{{\'HPT00\'|t}}</div><strong><div class="font-10">{{\'M0131\'|t}}</div></strong></div></div><div class="download-btn text-up" ng-click="goDownload()"><div class="font-10">{{\'M0132\'|t}}</div></div></div><div class="container" style="padding-top: 0;padding-left: 16px;padding-right: 0px"><div class="navbar-header" style="width: 100%"><div class="header-menu-small"><a class="navbar-brand logo" ui-sref="landing" style="margin-left: auto"></a> <span class="pull-right" style="height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><style>.dtp-picker-selector1-link:after{\n                              content: "";\n                            }</style><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span style="font-weight: normal" class="visible-md-inline-block visible-lg-inline-block siteLang">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="padding: 0px;width: 56px;margin: 0px;height: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars"></i></button></span></div></div></div><nav class="nav-sm" role="navigation" ng-if="!currentUser"><div class="nav-bg" kp-toggle-slide-out></div><div class="nav-content panel text-white" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper"><div style="font-size: 14px;padding: 0px;color: #000000"><div class="row lab2" ui-sref="landing" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'M0001\'|t}}</span></div></div><div class="row lab2" ui-sref="signup" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0072\'|t}}</span></div></div><div class="row lab2" ui-sref="signin" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0071\'|t}}</span></div></div><div class="row lab2" ui-sref="apply" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span class="text-up">{{\'OB252\'|t}}</span></div></div><div class="row lab3" ui-sref="teachers" kp-toggle-slide-out><div class="col-xs-3" style="padding: 0px;margin:0px;width: 56px;height: 48px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;line-height: 48px"></span></div><div class="col-xs-9" style="padding: 0px;margin-bottom: 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div ng-class="{\'backgro\':isCommunity}"><div class="row" style="margin: 0px;height: 48px;padding: 12px 16px"><div class="col-xs-3" style="padding: 0px;width: 56px;margin: 0px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="padding: 0px;margin: 0px" ng-click="isCommunity = !isCommunity"><div><span>{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div></div></div><div class="row" collapse="!isCommunity" style="color:#777;width: 100%"><div class="col-xs-9" kp-toggle-slide-out style="float: right"><div style="line-height: 48px;height: 48px"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white" ng-if="!currentUser" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper" style="color: #000000;padding: 0px 16px"><style>ul > li > a {\n              color: #000000;\n            }</style><ul class="menu-group list-unstyled grid-gutter-margin-b" style="line-height: 48px;margin-bottom: 0px"><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="landing">{{\'M0001\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signup">{{\'C0072\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signin">{{\'C0071\'|t}}</a></li></ul><div class="row" ui-sref="teachers" kp-toggle-slide-out style="height: 48px;border-bottom: 1px solid #d9d9d9"><div class="col-xs-3" style="width:56px;margin: 12px 0px 0px 0px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;vertical-align: middle"></span></div><div class="col-xs-9" style="margin: 12px 0px 0px 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div class="row" ng-class="{\'backgro\':isCommunity}" style="height: 48px"><div class="col-xs-3" style="margin: 12px 0px 0px 0px;width: 56px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54;vertical-align: middle"></span></div><div class="col-xs-9" ng-click="isCommunity = !isCommunity;" style="margin: 12px 0px 0px 0px"><span style="vertical-align: middle">{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div><div class="row" collapse="!isCommunity"><div class="col-xs-3" style="width: 56px"></div><div class="col-xs-9" kp-toggle-slide-out style="padding-right: inherit"><div ng-class="{\'border-top\':!isCommunity}"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white"><div class="nav-menu-wrapper"><div class=""><div class="nav-menu panel-body"><ul class="menu-group list-unstyled grid-gutter-margin-b"><li><a ui-sref="landing" class="link-mobile-menu">{{\'M0001\'|t}}</a></li><li><a ui-sref="signup" class="link-mobile-menu">{{\'C0072\'|t}}</a></li><li><a ui-sref="signin" class="link-mobile-menu">{{\'C0071\'|t}}</a></li></ul><a ui-sref="teachers" class="btn btn-warning btn-block grid-gutter-margin-b">{{\'M0000\'|t}}</a><h5 class="text-up" style="color: #888;font-size: 12px;border-bottom: 1px #888 solid;padding-bottom: 10px">{{\'M0114\'|t}}</h5><ul class="menu-group list-unstyled row-space-3"><li><a ui-sref="article" class="link-mobile-menu">{{\'M0083\'|t}}</a></li><li class=""><a ui-sref="notebook.list" class="link-mobile-menu">{{\'M0078\'|t}}</a></li><li class=""><a ui-sref="question.list" class="link-mobile-menu">{{\'M0008\'|t}}</a></li><li class=""><a ui-sref="discussion.list" class="link-mobile-menu">{{\'M0031\'|t}}</a></li><li class=""><a ui-sref="partner" class="link-mobile-menu">{{\'M0006\'|t}}</a></li><li><a ui-sref="languagehacking.list" translate="LH100"></a></li><li><a ui-sref="languagehacking" translate="LH100"></a></li></ul></div></div></div></div></nav></nav><div class="container-p70"><div class="static-content-container top-container"><div class="text-center static-content"><div class="title1" ng-bind-html="\'KP462\'|t"></div><h3 class="italki-optimize-original">{{\'KP463\'|t}}</h3><h3 class="italki-optimize-abtest">{{\'M0515\'|t}}</h3><button type="button" class="btn btn-primary btn-lg" style="" ui-sref="signup">{{\'HPT90\'|t}}</button><ul class="list-inline hidden-phone no-margin-b"><li style="vertical-align: middle; opacity: 0.9" ng-click="openVideoModal()" class="yes-cursor"><i class="fa fa-play-circle" style="font-size:30px"></i></li><li style="font-size: 20px; opacity: 0.9" ng-click="openVideoModal()" class="yes-cursor">{{\'KP464\'|t}}</li></ul></div></div></div><div class="italki-optimize-abtest"><div class="italki-company-logos"><div class="italkit-company-logo"><img src="/static/images/companies/bbc.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/theguardian.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/business.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/lifehacker.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/tc.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/quartz.svg"></div><div class="italkit-company-logo"><img src="/static/images/companies/post.svg"></div></div></div></div><div class="home-page-ab"><section class="hidden-phone italki-optimize-original" style="background: #333;color:#fff"><div class="container pt20"><div class="row"><div class="col-sm-10 text-center"><span class="text-lg">{{\'KP465\'|t}}</span></div><div class="col-sm-2 text-center"><a class="btn btn-outline btn-login no-margin btn-block" ui-sref="signup">{{\'KP466\'|t}}</a></div></div></div></section><section class="pt70"><div ui-view class="container no-padding-t"><div class="text-center pt50"><div class="text-slg text-slim no-margin-b">{{\'KP467\'|t}} <span class="text-primary">{{\'HC001\'|t}}</span></div></div><div class=""><div class="row"><a ng-class="{\'col-sm-4\':item.c==4,\'col-sm-3\':item.c==3,\'col-sm-2\':item.c==2,\'second-row\':item.c==3,\'col-md-15\':item.c15}" ng-repeat="item in teachersBylan" href="{{getUrlAddress(item)}}"><div class="panel no-border language-index trans_layout3 italki-optimize-original" style="background-position: 50% 50%;background-repeat: no-repeat; width:100%" ng-style="{\'background-image\': \'url({{getimage(item)}})\'}"><div class="info"><span class="language" ng-bind="item.lan" style="text-transform: capitalize"></span> <span ng-if="item.ct" class="country">&nbsp;{{item.ctn}}</span><div class="number" ng-if="isLoaded" ng-hide="item.c==2&&!item.c15">{{item.p}} {{\'M0053\'|t}}<br>{{item.t}} {{\'KP468\'|t}}</div></div><div class="trans2 transimage3" style="height: 5px; background: #ff4338"></div></div><div pulse-hover class="panel no-border language-index trans_layout3 italki-optimize-abtest" style="background-position: 50% 50%;background-repeat: no-repeat; width:100%;border-radius: 4px;overflow: hidden" ng-style="{\'background-image\': \'url({{getimage(item)}})\'}"><div class="info"><div class="landing-teacher-info"><span class="language" style="text-transform: capitalize">{{(item.lan === \'chinese\' ? \'TC418\' : item.lan) | t}}</span> <span ng-if="item.ct" class="country">&nbsp;{{item.ctn}}</span><div class="number" ng-if="isLoaded" ng-hide="item.c==2&&!item.c15">{{item.p + item.t}} {{\'M0053\'|t}}</div></div></div></div></a></div><div class="italki-optimize-original"><div class="party-size-picker lg dtp-picker-selector dtp-picker-selector1-link select-native dtp-picker-selector-mobile" style="width: 100%"><div class="ui-select-container ui-select-bootstrap dropdown open"><div class="ui-select-match"><span tabindex="-1" class="form-control ui-select-toggle" ng-click="showFlag=!showFlag;" style="outline: 0"><span class="ui-select-placeholder">{{\'KP469\'|t}}</span> <i class="fa fa-angle-down pull-right"></i> <a style="margin-right: 10px" class="btn-link pull-right ng-hide"><i class="fa fa-times"></i></a></span></div><ul ng-show="showFlag" class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu ng-scope"><li class="ui-select-choices-group"><div class="ui-select-choices-group-label dropdown-header ng-binding ng-hide"></div><div class="ui-select-choices-row ng-scope" ng-repeat="m in lans"><a href="javascript:void(0)" ng-click="gourl1(m)" class="ui-select-choices-row-inner" uis-transclude-append=""><div class="ng-binding ng-scope" ng-bind="m|t"></div></a></div></li></ul></div></div></div><div class="italki-optimize-abtest text-center"><button type="button" ng-click="goToTeachers()" class="btn-italki">{{\'M0507\'|t}}</button></div></div></div></section><section class="class-content"><div class="container text-center"><div class="grid-gutter-margin-b3"><p class="text-slg text-slim italki-optimize-original" style="color: #fff">{{\'KP470\'|t}}</p><p class="text-slg text-slim italki-optimize-abtest" style="color: #fff">{{\'KP243\'|t}}</p><span class="text-lg italki-optimize-original" style="color: #fff">{{\'KP471\'|t}}!</span></div><div class=""><div class="row"><div class="col-sm-4 text-center clearfix" style="color: #fff"><img class="italki-optimize-original" width="100%" src="/static/images/homepage/hp-icon1.png"> <img class="italki-optimize-abtest italki-howitworks-image" src="/static/images/homepage/hp-icon1.png"><div class="plr30"><h3>1. {{\'MH131\'|t}}</h3><span>{{\'KP472\'|t}}</span></div></div><div class="col-sm-4 text-center clearfix" style="color: #fff"><img class="italki-optimize-original" width="100%" src="/static/images/homepage/hp-icon2.png"> <img class="italki-optimize-abtest italki-howitworks-image" src="/static/images/homepage/hp-icon2.png"><div class="plr30"><h3>2. {{\'KP473\'|t}}</h3><span>{{\'KP474\'|t}}</span></div></div><div class="col-sm-4 text-center clearfix" style="color: #fff"><img class="italki-optimize-original" width="100%" src="/static/images/homepage/hp-icon3.png"> <img class="italki-optimize-abtest italki-howitworks-image" src="/static/images/homepage/hp-icon3.png"><div class="plr30"><h3>3. {{\'ST106\'|t}}!</h3><span>{{\'KP475\'|t}}</span></div></div></div></div></div></section><section class="text-center market-content hidden-phone"><div class="container"><div class="grid-gutter-margin-b3 italki-optimize-original"><p class="text-slg text-slim" style="color: #fff">{{\'KP476\'|t}}</p><span class="text-lg" style="color: #fff">{{\'KP477\'|t}}</span></div><div class="grid-gutter-margin-b3 italki-optimize-abtest"><p class="text-slg text-slim" style="color: #fff">{{\'M0504\'|t}}</p></div><div class="row italki-optimize-original"><div class="col-sm-4 text-center"><div style="background: url(/static/images/homepage/hp-marketplace1.jpg) no-repeat; background-size: cover; height: 400px; background-position: 0% 10%"></div><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}"><h3 class="no-margin-t">{{\'KP478\'|t}}</h3><span ng-bind-html="\'KP479\'|t"></span></div></div><div class="col-sm-4 text-center"><div style="background: url(/static/images/homepage/hp-marketplace3.jpg) no-repeat; background-size: cover; height: 400px; background-position: 85% 0%"></div><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}"><h3 class="no-margin-t">{{\'KP480\'|t}}</h3><span ng-bind-html="\'KP481\'|t"></span></div></div><div class="col-sm-4 text-center"><div style="background: url(/static/images/homepage/hp-marketplace2.jpg) no-repeat; background-size: cover; height: 400px; background-position: 25% 0%"></div><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}"><h3 class="no-margin-t">{{\'KP482\'|t}}</h3><span ng-bind-html="\'KP483\'|t"></span></div></div></div><div class="row italki-optimize-abtest"><div class="col-sm-4 text-center"><img style="display: block;margin-bottom: -1px;width: 100%;background: #fff;border-radius: 4px 4px 0 0" src="/static/images/landingv2/illustrations-01.svg"><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}" style="box-shadow: none;padding-top: 0;border-radius: 0 0 4px 4px"><h3 class="no-margin-t">{{\'M0508\'|t}}</h3><span ng-bind-html="\'M0509\'|t"></span></div></div><div class="col-sm-4 text-center"><img style="display: block;margin-bottom: -1px;width: 100%;background: #fff;border-radius: 4px 4px 0 0" src="/static/images/landingv2/illustrations-02.svg"><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}" style="box-shadow: none;padding-top: 0;border-radius: 0 0 4px 4px"><h3 class="no-margin-t">{{\'M0510\'|t}}</h3><span ng-bind-html="\'M0511\'|t"></span></div></div><div class="col-sm-4 text-center"><img style="display: block;margin-bottom: -1px;width: 100%;background: #fff;border-radius: 4px 4px 0 0" src="/static/images/landingv2/illustrations-03.svg"><div class="info" ng-class="{\'japanese-market-container-fix\': japaneseMarketContainerStyle()}" style="box-shadow: none;padding-top: 0;border-radius: 0 0 4px 4px"><h3 class="no-margin-t">{{\'M0512\'|t}}</h3><span ng-bind-html="\'M0520\'|t"></span></div></div></div></div></section><section class="text-center student-content"><div class="italki-optimize-original container"><div class="grid-gutter-margin-b3"><p class="text-slg text-slim">{{\'KP484\'|t}}</p><span class="text-lg">{{\'KP485\'|t}}</span></div></div><div class="italki-optimize-original container grid-gutter-margin-b3 lesson-container" style="background: #fff"><div><p class="text-slg text-slim grid-gutter-margin-b3">{{\'M0038\'|t}}</p><div class="row"><div class="col-md-4 col-sm-6 col-md-offset-1 text-center plr30 yes-cursor clearfix" ui-sref="professional"><img class="grid-gutter-margin-b" src="/static/images/homepage/proff.png"><div><h3>{{\'MH504\'|t}}</h3><span>{{\'MH505\'|t}}</span></div></div><div class="col-md-4 col-sm-6 col-md-offset-2 text-center plr30 yes-cursor clearfix" ui-sref="tutor"><img class="grid-gutter-margin-b" src="/static/images/homepage/tutor.png"><div><h3>{{\'MH506\'|t}}</h3><span>{{\'MH507\'|t}}</span></div></div></div></div></div><div class="italki-optimize-original container community-container" style="background: #fff"><div><p class="text-slg text-slim grid-gutter-margin-b3">{{\'M0114\'|t}}</p><div class="row"><div class="col-md-4 col-sm-6 col-md-offset-1 text-center plr30 yes-cursor clearfix" ui-sref="article"><img class="grid-gutter-margin-b" src="/static/images/homepage/articles.png"><div><h3>{{\'M0083\'|t}}</h3><span>{{\'KP486\'|t}}</span></div></div><div class="col-md-4 col-sm-6 col-md-offset-2 text-center plr30 yes-cursor clearfix" ui-sref="partner"><img class="grid-gutter-margin-b" src="/static/images/homepage/exchange.png"><div><h3>{{\'M0100\'|t}}</h3><span>{{\'KP487\'|t}}</span></div></div></div><div class="row"><div class="col-md-4 col-sm-6 col-md-offset-1 text-center plr30 yes-cursor clearfix" ui-sref="notebook.list"><img class="grid-gutter-margin-b" src="/static/images/homepage/notebook.png"><div><h3>{{\'M0078\'|t}}</h3><span>{{\'KP488\'|t}}</span></div></div><div class="col-md-4 col-sm-6 col-md-offset-2 text-center plr30 yes-cursor clearfix" ui-sref="discussion.list"><img class="grid-gutter-margin-b" src="/static/images/homepage/discussions.png"><div><h3>{{\'M0031\'|t}}</h3><span>{{\'KP489\'|t}}</span></div></div></div><div class="row"><div class="col-md-4 col-sm-6 col-md-offset-1 text-center plr30 yes-cursor clearfix" ui-sref="question.list"><img class="grid-gutter-margin-b" src="/static/images/homepage/answers.png"><div><h3>{{\'M0055\'|t}}</h3><span>{{\'KP490\'|t}}</span></div></div></div></div></div><div class="italki-optimize-abtest community-container" style="background: #fff"><div class="community-wrapper"><p class="community-title">{{\'M0516\'|t}}</p><div class="community-icon yes-cursor" ui-sref="article"><img src="/static/images/homepage/articles.png"><p class="community-icon-text">{{\'M0083\'|t}}</p></div><div class="community-icon yes-cursor" ui-sref="notebook.list"><img src="/static/images/homepage/notebook.png"><p class="community-icon-text">{{\'M0078\'|t}}</p></div><div class="community-icon yes-cursor" ui-sref="question.list"><img src="/static/images/homepage/answers.png"><p class="community-icon-text">{{\'M0055\'|t}}</p></div><div class="community-icon yes-cursor" ui-sref="discussion.list"><img src="/static/images/homepage/discussions.png"><p class="community-icon-text">{{\'M0031\'|t}}</p></div><div class="community-icon yes-cursor" ui-sref="partner"><img src="/static/images/homepage/exchange.png"><p class="community-icon-text">{{\'M0100\'|t}}</p></div></div></div></section><section class="italki-optimize-original user-bottom text-center"><div class="container no-padding-t"><div class="static-content-container"><div class="static-content"><div class="title1">{{\'KP491\'|t}}</div><h3>{{\'KP492\'|t}}</h3><button type="button" class="btn btn-primary btn-lg text-up" style="" ui-sref="signup"><span class="btn-txt">{{\'HPT90\'|t}}</span> <span class="loader loader--white"><span class="loader_"></span></span></button></div></div></div></section><section class="italki-optimize-abtest"><section class="user-bottom"><div class="no-padding-t"><div class="static-content-container"><div class="static-content"><div class="user-bottom-title1">{{\'M0505\'|t}}</div><p class="user-bottom-desc">{{\'M0506\'|t}}</p><button type="button" class="btn btn-primary btn-lg text-up" style="" ui-sref="signup"><span class="btn-txt">{{\'HPT90\'|t}}</span> <span class="loader loader--white"><span class="loader_"></span></span></button></div></div></div></section></section><div ng-include="\'/views/common/bottom.bs.html\'"></div></div><div class="homepage-c"><div class="homepage"><section class="homepagec_container" ng-controller="navcontrol"><div class="homec_dropshow" ng-show="isdropmenu"></div><div class="homec_videoshow"><video ng-if="desktop" landing-version-check style="object-fit: fill" class="homec_video homec_videoShow" autoplay="autoplay" loop poster="/static/images/homepagec/hero-img.jpg"></video><div class="col-sm-12 homec_headerShow"><div class="homec_blank2"></div></div></div><div class="homec_top_shadow"></div><section class="nav_bar"><div class="navheader"><a href="" class="homec-landing-logo"></a></div><div class="homec_pullright"><div ng-show="iscover" class="cover" style="position:  absolute;top: 0;bottom: 0;  background: #756764; left: 0; right: 0;display: none"></div><div class="homec_pullleft"><span dropdown on-toggle="toggled(open)"><a class="choselang" dropdown-toggle><span class="sitelangu hidden-xs" style="color:white">{{"KP461"|t}}:</span> <span style="color:white">{{GlobalObject.lang.name}}</span> <span class="fa fa-ii-expand-more" style="color:white;font-size: 12px"></span></a><ul class="dropdown-menu" aria-labelledby="simple-dropdown"><li ng-repeat="item in langArr" style="border-bottom: 1px solid white"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></span></div><a href="" class="homec_btn" ui-sref="signin">{{\'C0071\'|t}}</a> <a href="" class="homec_btn" ui-sref="signup">{{"C0072"|t}}</a> <a href="" class="homec_btn last-btn" ui-sref="apply">{{\'OB252\'|t}}</a><div style="float: right;color:white" class="homec_icon" ng-click="homecShow()"><img src="/static/images/homepagec/icon-menu.svg" style="width: 25px;height: 22px"></div></div></section><section class="homec_links" ng-show="homec_linkShow" style="background:rgba(0, 0, 0, 0.8) !important"><ul><li style="color: white;font-size: 28px;margin-top: 4px" ng-click="homec_inconShow()"><img src="/static/images/homepagec/icon-exit.svg" style="width: 35px;height: 35px"></li><li ui-sref="signup"><a href="">{{\'C0072\'|t}}</a></li><li ui-sref="signin"><a href="">{{\'C0071\'|t}}</a></li><li ui-sref="apply"><a href="">{{\'OB252\'|t}}</a></li><li ui-sref="teachers"><a href="">{{"M0000"|t}}</a></li><li ng-click="isCommunity()"><a href="">{{"M0114"|t}} <span ng-show="!homc_iscommunity" class="fa fa-ii-expand-more" style="font-size: 24px"></span> <span ng-show="homc_iscommunity" class="fa fa-ii-expand-less" style="font-size: 24px"></span></a></li></ul><ul ng-show="isComuniopen" class="homec_secLink"><li ui-sref="article"><a href="">{{"M0083"|t}}</a></li><li ui-sref="notebook.list"><a href="">{{"M0078"|t}}</a></li><li ui-sref="question.list"><a href="">{{"AS006"|t}}</a></li><li ui-sref="discussion.list"><a href="">{{"GP020"|t}}</a></li><li ui-sref="partner"><a href="">{{"M0006"|t}}</a></li><li ui-sref="languagehacking"><a href="">{{"LH100"|t}}</a></li></ul></section><div class="homec_lan_part"><div ng-bind-html="\'KP462\'|t" style="text-transform: uppercase"></div><p ng-bind-html="\'M0515\'|t"></p><button ng-bind-html="\'HPT90\'|t" ui-sref="signup" style="text-transform: uppercase"></button></div><div class="homc_blank"></div><div class="homec_Circle" ng-click="homec_scroll()" ng-controller="scrollControl"><a><img class="homec_Circle_img" src="/static/images/homepagec/arrow-down.svg" alt=""></a></div></section><div class="homc_pageination"><ul class="homec_logs"><li><img class="homec_log_img" src="/static/images/homepagec/bbc.svg" alt="bbc" style="height: 17.1px"></li><li><img class="homec_log_img" src="/static/images/homepagec/business.svg" alt="BUSINESS INSIDER" style="height:17.1px"></li><li><img class="homec_log_img" src="/static/images/homepagec/theguardian.svg" alt="theguardian" style="height:14.1px"></li><li><img class="homec_log_img" src="/static/images/homepagec/tc.svg" alt="TC" style="height:15px"></li><li><img class="homec_log_img" src="/static/images/homepagec/quartz.svg" alt="Quartz" style="height:14px"></li><li><img class="homec_log_img" src="/static/images/homepagec/lifehacker-new.svg" alt="lifehacker" style="height:23px"></li><li><img class="homec_log_img" src="/static/images/homepagec/post.svg" alt="theguardian" style="height: 46px;margin-right: 0"></li></ul></div><div class="homec_box"><div style="text-align: center" class="homec_font-format homec_title1">{{"KP467"|t}}&nbsp<span style="color: #ff4338">{{"HC001"|t}}</span></div><div ng-controller="homec_Carousel2"><carousel class="homec_carli c1" id="carousel-test2" interval="myInterval"><slide class="homec_box1 cc1" ng-repeat="lis in slides track by lis.index"><div class="hc-Carousel-box-item"><a ng-repeat=" div in lis.image track by $index" href="{{getUrlAddress(div)}}"><img class="homec_teacherimg" ng-src="{{div.src}}"><div class="hometecard"><div class="homecard_content"><div class="homc_card_icon"><img ng-src="{{div.flagsrc}}"></div><div class="teachercountry"><div class="homec_country">{{div.country}}</div><div class="homc_teacNumber"><span>{{div.p+div.t}}</span> <span>{{\'M0053\'|t}}</span></div></div></div></div></a></div></slide></carousel></div><div class="homec_findteacher" ui-sref="teachers"><a href="">{{"M0518"|t}}</a></div><div style="text-align: center" class="homec_font-format homec_title2">{{"M0504"|t}}</div><div class="resons"><div class="reason"><div class="reason_box"><img src="/static/images/landingv2/illustrations-01.svg" alt=""><div class="resontitle">{{"M0508"|t}}</div><div class="homec_segmentation"></div><div class="text_font">{{"M0509"|t}}</div><div class="homec_stripe_one homec_stripe"></div></div></div><div class="reason"><div class="reason_box"><img src="/static/images/landingv2/illustrations-02.svg" alt=""><div class="resontitle">{{"M0510"|t}}</div><div class="homec_segmentation"></div><div class="text_font">{{"M0513"|t}}</div><div class="homec_stripe_two homec_stripe"></div></div></div><div class="reason"><div class="reason_box"><img src="/static/images/landingv2/illustrations-03.svg" alt=""><div class="resontitle">{{"M0512"|t}}</div><div class="homec_segmentation"></div><div class="text_font">{{"M0520"|t}}</div><div class="homec_stripe_three homec_stripe"></div></div></div></div><div><div class="fontcenter homec_font-format homec_title3">{{"M0514"|t}}</div></div><div class="homc_pc"><div class="homec_row1"><div class="homec_work_img1"><img src="/static/images/homepagec/desktop_teachers_search.gif" alt=""></div><div class="homec_workstep1"><div class="work_intropart"><span class="step">1</span><div class="workinro"><div class="home-work-title">{{"MH131"|t}}</div><p class="home-work-intro">{{\'KP472\'|t}}</p></div></div></div></div><div class="homec_row1"><div class="homec_workstep1" style="width: 46%"><div class="work_intropart"><div class="homec_data_change"><div class="home-work-title2">{{"KP473"|t}}</div><div class="home-work-intro2">{{"KP474"|t}}</div></div><div><span class="step2">2</span></div></div></div><div class="homec_work_img2 homec_work_img1"><img src="/static/images/homepagec/desktop_schedule_a_lesson.gif" alt=""></div></div><div class="homec_row1"><div class="homec_work_img1"><img src="/static/images/homepagec/desktop_chat.gif" alt=""></div><div class="homec_workstep1"><div class="work_intropart"><span class="step">3</span><div class="workinro"><div class="home-work-title">{{"HPT53"|t}}</div><p class="home-work-intro">{{"KP475"|t}}</p></div></div></div></div></div><div class="homc_mob"><div><div class="work_intropart"><div class="workinro"><div class="home-work-title">{{"MH131"|t}}</div><p class="home-work-intro">{{\'KP472\'|t}}</p></div></div></div><div class="homc_mob_img"><img src="/static/images/homepagec/desktop_teachers_search.gif" alt=""></div><div class=""><div class=""><div class="work_intropart"><div class="workinro"><div class="home-work-title">{{"KP473"|t}}</div><p class="home-work-intro">{{"KP474"|t}}</p></div></div></div><div class="homc_mob_img"><img src="/static/images/homepagec/desktop_schedule_a_lesson.gif" alt=""></div></div><div class=""><div class=""><div class="work_intropart"><div class="workinro"><div class="home-work-title">{{"HPT53"|t}}</div><p class="home-work-intro">{{"KP475"|t}}</p></div></div></div><div class="homc_mob_img"><img src="/static/images/homepagec/desktop_chat.gif" alt=""></div></div></div><div><div class="fontcenter homec_font-format homec_title4">{{"M0516"|t}}</div></div><div class="homc_pc_language"><section class="homec_langugLove"><div class="homec_lovelangu"><div class="homc_loveinfo" ui-sref="article"><div class="homec_lovelangimg"><img src="/static/images/homepagec/articles.svg" alt=""></div><div class="homec_loveintro"><div class="homec_lvetitle">{{"M0083"|t}}</div><p class="homec_lveintro">{{"KP486"|t}}</p></div></div></div><div class="homec_lovelangu"><div class="homc_loveinfo" ui-sref="partner"><div class="homec_lovelangimg"><img src="/static/images/homepagec/language-exchange.svg" alt=""></div><div class="homec_loveintro"><div class="homec_lvetitle">{{"M0100"|t}}</div><p class="homec_lveintro">{{"KP487"|t}}</p></div></div></div></section><section class="homec_langugLove"><div class="homec_lovelangu"><div class="homc_loveinfo" ui-sref="notebook.list"><div class="homec_lovelangimg"><img src="/static/images/homepagec/notebook.svg" alt=""></div><div class="homec_loveintro"><div class="homec_lvetitle">{{"M0078"|t}}</div><p class="homec_lveintro">{{"KP488"|t}}</p></div></div></div><div class="homec_lovelangu"><div class="homc_loveinfo" ui-sref="discussion.list"><div class="homec_lovelangimg"><img src="/static/images/homepagec/discussions.svg" alt=""></div><div class="homec_loveintro"><div class="homec_lvetitle">{{"GP020"|t}}</div><p class="homec_lveintro">{{"KP489"|t}}</p></div></div></div></section></div><div class="homc_mobile_language"><div class="homec_lovelangu"><div class="homec_word" ui-sref="article" style="padding-bottom: 10px"><div class="homec_lovelangimg" style="float: left"><img src="/static/images/homepagec/articles.svg" alt=""></div><div class="homec_loveintro" style="margin-left: 109px;text-align: left"><div class="homec_lvetitle">{{"M0083"|t}}</div><p class="homec_lveintro">{{"KP486"|t}}</p></div></div></div><div class="homec_lovelangu"><div class="homec_word" ui-sref="partners"><div class="homec_lovelangimg" style="float: right"><img src="/static/images/homepagec/language-exchange.svg" alt=""></div><div class="homec_loveintro" style="margin-right: 109px;text-align: right"><div class="homec_lvetitle">{{"M0100"|t}}</div><p class="homec_lveintro">{{"KP487"|t}}</p></div></div></div><div class="homec_lovelangu"><div class="homec_word" ui-sref="notebook.list"><div class="homec_lovelangimg" style="float: left"><img src="/static/images/homepagec/notebook.svg" alt=""></div><div class="homec_loveintro" style="margin-left: 109px;text-align: left"><div class="homec_lvetitle">{{"M0078"|t}}</div><p class="homec_lveintro">{{"KP488"|t}}</p></div></div></div><div class="homec_lovelangu" style="margin-bottom: 30px"><div class="homec_word" ui-sref="discussion.list" style="padding-bottom: 10px"><div class="homec_lovelangimg" style="float: right"><img src="/static/images/homepagec/discussions.svg" alt=""></div><div class="homec_loveintro" style="margin-right: 109px;text-align: right"><div class="homec_lvetitle">{{"GP020"|t}}</div><p class="homec_lveintro">{{"KP489"|t}}</p></div></div></div></div></div><section class="homec_userbottom"><div class="homec_backimg"></div><div class="homc_bottom"><div class="homc_title2">{{"M0505"|t}}</div><h3 class="homec_intro2">{{"M0506"|t}}</h3><button class="homec_btn2" ui-sref="signup">{{\'HPT90\'|t}}</button></div><div class="homec_stripe_four"><span style="width:11%;background:#18ebbd"></span> <span style="width:30%;background: #0071b9"></span> <span style="width:14%;background: #00bfbd"></span> <span style="width:29%;background:#ffbd00"></span> <span style="width:16%;background:#ff4338"></span></div></section><footer class="footer homec-footer" ng-controller="BottomCtrl"><div class="container"><div class="grid-gutter-margin-b visible-desktop"><div class="row"><div class="col-sm-3"><h4 translate="M1001"></h4><p></p><ul class="list-unstyled"><li ng-repeat="item in langArr1" ng-if="item.t==0"><a ui-sref="teachersViaLanguage({teach:item.v})" ng-bind="\'C0105\'|t|format:(item.v|t)"></a></li><li><a ui-sref="teachers" translate="C0131"></a></li></ul><p></p></div><div class="col-sm-3"><h4 translate="C0068"></h4><p></p><ul class="list-unstyled"><li><a ui-sref="teachersViaLanguage({teach:\'professional\'})" translate="MH504"></a></li><li><a ui-sref="teachersViaLanguage({teach:\'tutoring\'})" translate="MH506"></a></li><li><a ui-sref="partner" translate="M0006"></a></li><li><a ui-sref="article" translate="M0083"></a></li><li><a ui-sref="notebook.list" translate="M0078"></a></li><li><a ui-sref="question.list" translate="M0008"></a></li><li><a ui-sref="discussion.list" translate="M0031"></a></li></ul><p></p></div><div class="col-sm-3"><h4 translate="M0066"></h4><p></p><ul class="list-unstyled"><li><a href="http://support.italki.com" target="_blank">{{\'M0120\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/categories/200405048-For-Students" target="_blank">{{\'M0121\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/sections/201133628-Language-Partners" target="_blank" translate="M0100"></a></li><li><a href="http://support.italki.com/hc/en-us/sections/201133488-Payment-italki-credits-ITC-" target="_blank">{{\'M0123\'|t}}</a></li><li><a href="http://teachers.italki.com" target="_blank">{{\'M0124\'|t}}</a></li></ul></div><div class="col-sm-3"><h4>{{\'C0040\'|t}}</h4><ul class="list-unstyled grid-gutter-margin-b"><li><a ui-sref="oet">{{\'TS287\'|t}}</a></li><li><a ui-sref="apply" translate="TS288"></a></li><li><a ui-sref="giftcard" translate="M0116"></a></li><li><a ui-sref="referral" translate="RP102" id="ReferralLink"></a></li><li><a ui-sref="company" translate="KP544"></a></li><li><a ui-sref="app">italki Apps</a></li></ul><ul class="list-inline social-icons-list"><li><a href="http://www.facebook.com/italkilanguages" target="_blank"><img src="/static/images/homepagec/icons-11.svg" style="width:30px;height:30px" alt=""></a></li><li><a href="http://twitter.com/italki" target="_blank"><img src="/static/images/homepagec/icons-12.svg" style="width:30px;height:30px" alt=""></a></li><li><a href="https://www.instagram.com/italki/" target="_blank"><img src="/static/images/homepagec/icons-13.svg" style="width:30px;height:30px" alt=""></a></li><li><a href="http://vk.com/italkicom" target="_blank"><img src="/static/images/homepagec/icons-14.svg" style="width:30px;height:30px" alt="Vk"></a></li><li><a href="https://www.youtube.com/user/italkilanguage" target="_blank"><img src="/static/images/homepagec/icons-15.svg" style="width:30px;height:30px" alt="youtube"></a></li><li><a href="http://weibo.com/italki" target="_blank"><img src="/static/images/homepagec/icons-16.svg" style="width:30px;height:30px" alt="Webo"></a></li><li><a target="_blank" tooltip-image aria-hidden="true" data-toggle="tooltip" data-placement="top" data-html="true" title="<img style=\'width:150px;height:150px;\' src=\'/static/images/static/italki_qrcode.jpg\'/>"><img src="/static/images/homepagec/icons-17.svg" style="width:30px;height:30px" alt="Wechat"></a></li></ul></div></div></div><style>.language-divider{\n            border-top: 1px solid #e5e5e5;\n            padding-top: 5px;\n            margin: 5px 0;\n            overflow: hidden;\n\n          }</style><div class="grid-gutter-margin-b row"><div class="col-md-2" style="margin-bottom: 32px"><div class=""><div class="select-large"><select class="select-language-lang language-selector" ng-change="onchange()" ng-model="GlobalObject.lang" ng-options="m.name for m in langArr" style=""></select><a class="select-a" style="">{{GlobalObject.lang.name}}</a></div></div></div><div class="col-md-10 hidden-phone"><ul class="list-inline"><li>&copy; {{\'TS289\'|t}}</li><li><a ui-sref="about" translate="M0111"></a></li><li><a ui-sref="press" translate="M0033"></a></li><li><a ui-sref="contactus" translate="M0108"></a></li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a href="http://stories.italki.com/" target="_blank">{{\'M0125\'|t}}</a></li><li><a href="http://blog.italki.com/jobs" target="_blank" translate="M0022"></a></li><li><a ui-sref="tos" translate="M0109"></a></li><li><a ui-sref="privacy" translate="M0112"></a></li></ul></div><div class="col-md-10 text-center visible-phone"><h5><strong>&copy; {{\'TS289\'|t}}</strong></h5><ul class="list-inline"><li><a ui-sref="about" translate="M0111"></a></li><li><a ui-sref="press" translate="M0033"></a></li><li><a ui-sref="contactus" translate="M0108"></a></li><li><a href="https://www.italki.com/signin/sso" target="_blank" translate="M0110"></a></li><li><a href="http://blog.italki.com" target="_blank" translate="M0018"></a></li><li><a ui-sref="tos" translate="M0109"></a></li><li><a ui-sref="privacy" translate="M0112"></a></li></ul><ul class="list-inline" style="white-space:nowrap"><li><a href="http://www.facebook.com/italkilanguages" target="_blank"><img src="/static/images/homepagec/icons-11.svg" style="width:30px; height:30px;display: inline-block" alt=""></a></li><li><a href="http://twitter.com/italki" target="_blank"><img src="/static/images/homepagec/icons-12.svg" style="width:30px;height:30px" alt=""></a></li><li><a href="https://www.instagram.com/italki/" target="_blank"><img src="/static/images/homepagec/icons-13.svg" style="width:30px;height:30px" alt=""></a></li><li><a href="http://vk.com/italkicom" target="_blank"><img src="/static/images/homepagec/icons-14.svg" style="width:30px;height:30px" alt="Vk"></a></li><li><a href="https://www.youtube.com/user/italkilanguage" target="_blank"><img src="/static/images/homepagec/icons-15.svg" style="width:30px;height:30px" alt="youtube"></a></li><li><a href="http://weibo.com/italki" target="_blank"><img src="/static/images/homepagec/icons-16.svg" style="width:30px;height:30px" alt="Webo"></a></li><li><a target="_blank" tooltip-image aria-hidden="true" data-toggle="tooltip" data-placement="top" data-html="true" title="<img style=\'width:150px;height:150px;\' src=\'/static/images/static/italki_qrcode.jpg\'/>"><img src="/static/images/homepagec/icons-17.svg" style="width:30px;height:30px" alt="Wechat"></a></li></ul></div></div></div></footer></div></div>'),
a.put("/views/page/oet.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'"></div><div style="padding-top:80px;padding-bottom:120px; background: url(\'/static/images/header.jpg\') no-repeat 0% 30%;background-size:cover; margin-bottom:-130px; color: #fff"><div class="container"><div class="row grid-gutter-margin-b"><div class="col-md-12 text-center"><h1 style="text-shadow: 0px 1px 2px #333"><span style="font-size: 60px">{{\'KP493\'|t}}!</span><br><span style="font-size: 40px">{{\'KP494\'|t}}</span></h1></div></div></div></div><div class="container"><div class="grid-example"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-6"><span class="text-lb" ng-bind-html="\'KP495\'|t"></span><br><br><span class="text-muted">{{\'KP496\'|t}}</span><br><br><span class="text-muted">{{\'KP497\'|t}}</span></div><div class="col-md-5 col-md-offset-1"><img src="/static/images/oet_1.png"></div></div><hr><div class="row"><div class="col-md-6"><h3>{{\'KP498\'|t}}</h3><p class="text-muted">{{\'KP499\'|t}}</p><p class="text-muted">{{\'KP500\'|t}}</p><h3>{{\'KP501\'|t}}</h3><p class="text-muted">{{\'KP502\'|t}}</p><p class="text-muted">{{\'KP503\'|t}}</p><h3>{{\'KP504\'|t}}</h3><p class="text-muted" ng-bind-html="\'KP495\'|t"></p></div><div class="col-md-6" style="margin-top: 60px"><img style="height: 408px;width: 100%" src="/static/images/chart_big.gif"></div></div><hr><div class="text-center" style="margin-bottom: 20px"><h4>{{\'KP506\'|t}}?</h4><h2 class="no-margin-t">{{\'KP507\'|t}}.</h2><br><button class="btn btn-primary btn-lg" ui-sref="productPurchase({PCode:\'S0010001\'})" style="font-size: 25px; line-height: 30px">{{\'KP508\'|t}}!</button></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/paymentterms.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Payment Terms of Service</h3><p>Last Updated June 14, 2017 - Version 2017.1.1</p><ol class="grid-gutter-margin-b"><li>Terms of Service</li><li>Modification</li><li>Eligibility</li><li>Account Registration and Identity Verification</li><li>Key Terms for Payment Services</li><li>General Relationship</li><li>Financial Terms for Students<ul><li>Purchasing italki Credits</li><li>No Refunds on Authorized Payments</li><li>Third Party Payment Method Fees</li><li>Cancelled Lesson Requests</li><li>Confirmation of Lessons</li><li>Feedback and Ratings on Lessons</li><li>Disputes with Teachers</li><li>Lesson Packages</li></ul></li><li>Financial Terms for Teachers<ul><li>Accepting Teacher Service Requests</li><li>Cancellations of Lesson Requests</li><li>Disputes with Students</li><li>Lesson Packages</li><li>italki Service Fees</li><li>Circumvention of Service Fees</li><li>Withdrawal of Funds</li><li>Withholding or Delaying Disbursement of Funds</li><li>italki\'s Rights Regarding Reimbursements</li><li>Rounding Off</li></ul></li><li>Taxes</li><li>italki Credits Policies<ul><li>italki Credits are not Bank Deposits</li><li>italki Credits Expiration Policy</li><li>Foreign Exchange Risk</li><li>italki Credit Limitations</li></ul></li><li>italki\'s Rights Regarding User Accounts and Funds<ul><li>Security and financial fraud</li><li>Interest compensation</li><li>Reservation of Rights for Erroneous Transactions</li></ul></li><li>User Conduct</li><li>Enforcement of Terms of Service</li><li>Disclaimers</li><li>Limitation of Liability</li><li>Indemnification</li><li>Entire Agreement</li><li>Assignment</li><li>Notices</li><li>Controlling Law and Jurisdiction</li><li>Dispute Resolution</li><li>General</li><li>Contacting Customer Service</li></ol><hr><div class="grid-gutter-margin-b"><h4 class="no-margin-b">1. Terms of Service</h4><p>These terms and conditions (“Payments Terms”) govern the Payment Services between you and italki HK Limited (italki HK Limited is hereinafter referred to as "italki", "we", "us", or "our"). italki HK Limited will handle any and all payments and payouts conducted through or in connection with the Site, Application or Services ("Payment Services").</p><p>These Payment Terms constitute a binding legal agreement between you and italki HK Limited.</p><p>YOU ACKNOWLEDGE AND AGREE THAT, BY USING THE PAYMENT SERVICES, YOU ARE INDICATING THAT YOU HAVE READ, AND THAT YOU UNDERSTAND AND AGREE TO BE BOUND BY THESE PAYMENTS TERMS. IF YOU DO NOT AGREE TO THESE PAYMENTS TERMS, THEN YOU HAVE NO RIGHT TO ACCESS OR USE THE PAYMENT SERVICES.</p><p>Failure to use the Payment Services in accordance with these Payments Terms may subject you to civil and criminal penalties. If you accept or agree to these Payments Terms on behalf of a company or other legal entity, you represent and warrant that you have the authority to bind that company or other legal entity to these Payments Terms and, in such event, “you” and “your” will refer and apply to that company or other legal entity.</p><p>PLEASE NOTE THAT, AS STATED ABOVE, THE SITE, APPLICATION AND SERVICES ARE INTENDED TO BE USED TO FACILITATE TEACHERS AND STUDENTS CONNECTING AND BOOKING ONLINE LANGUAGE LESSONS DIRECTLY WITH EACH OTHER. ITALKI CANNOT AND DOES NOT CONTROL THE CONTENT CONTAINED IN ANY TEACHER OR STUDENT PROFILES AND IS NOT RESPONSIBLE FOR THE METHODS, MATERIALS, ONLINE DELIVERY TOOLS AND ALL ASPECTS OF THE LESSONS. ITALKI IS NOT RESPONSIBLE FOR AND DISCLAIMS ANY AND ALL LIABILITY RELATED TO ANY AND ALL LESSONS. ACCORDINGLY, ANY PAYMENT SERVICES WILL BE MADE OR ACCEPTED AT THE MEMBER\'S OWN RISK.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">2. Modification</h4><p>italki reserves the right, at its sole discretion, to modify or terminate the Payment Services or to modify these Payments Terms at any time and without prior notice. If we modify these Payments Terms, we will either post the modification on the Site or via the Application or otherwise provide you with notice of the modification. We will also update the “Last Updated” date at the top of these Payments Terms. By continuing to use the Payment Services after we have posted a modification on the Site or via the Application or have provided you with notice of a modification, you are indicating that you agree to be bound by the modified Payments Terms. If the modified Payments Terms are not acceptable to you, your only recourse is to cease using the Payment Services.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">3. Eligibility</h4><p>The Payment Services are intended solely for persons who are 18 or older. Any use of the Payment Services by anyone under 18 is expressly prohibited. By using the Payment Services you represent and warrant that you are 18 or older.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">4. Account Registration and Identity Verification</h4><p>In order to use the Payment Services, you must first register to create an italki Account and become a Member in accordance with the Terms of Service. You acknowledge, consent and agree that anyone you authorize to use your Member Account may use the Payment Services on your behalf and that you will be responsible for any payments made by such person.</p><p>You authorize italki, directly or through third parties, to make any inquiries we consider necessary to help verify or check your identity or prevent fraud. This may include asking you to provide a form of government identification (e.g. driver’s license or passport), your date of birth, and other information requiring you to take steps to confirm ownership of your email address, Payment Methods or Payout Methods; or attempting to screen your information against third party databases. You further authorize italki (or its affiliates) to request a consumer report on you from a Consumer Reporting Agency. This consumer report will be requested and utilized in compliance with applicable law, included the Fair Credit Reporting Act. italki reserves the right to close, suspend, or limit access to the Payment Services in the event we are unable to obtain or verify any of this information.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">5. Key Terms for Payment Services</h4><p><strong>"italki Credits"</strong> - italki Credits are a virtual currency purchased from italki. They can be used solely on the Site or Application to purchase Services and have no value outside of italki. All Services on the Site or Application are paid for with italki Credits.</p><p><strong>"Lesson Fees"</strong> and "Package Fees" - Lesson and Package Fees are the amounts that are due and payable by a Student for confirmed language lessons that have been given by a Teacher. The Teacher alone, and not italki, is responsible setting the Lesson Fees or Package Fees.</p><p><strong>"Service Fees"</strong> - Service Fees are the fees italki charges to the Teacher when using italki Services.</p><p><strong>"Student Wallet"</strong> - A Student Wallet is an account created by Students to purchase italki Credits that will be spent on italki. italki Credits in a Student Wallet can be used to pay for services provided by Teachers, and other Services offered by the Site or Application.<br>A Student may add italki Credits to their Student Wallet by any of the payment methods available on the Site or Application. The Student must reasonably intend that such amounts will be used to pay italki or Teachers for Services purchased through the Site or Application.</p><p><strong>"Payment Method"</strong> - Payment Method is the service that a Student uses to purchase italki Credits. Examples of payment methods are credit card, debit card, or PayPal.</p><p><strong>"Teacher Wallet"</strong> - A Teacher Wallet is an account created by Teachers to receive payment for Teacher Services. As a Teacher, you must use the Teacher Wallet Service to receive payment from Students.</p><p><strong>"Withdrawal Method"</strong> - Withdrawal Method is the service that a Teacher uses to exchange italki Credits for currency. Examples of withdrawal methods are PayPal, and other third party payment providers.</p></div><div class="grid-gutter-margin-b"><h4>6. General Relationship</h4><p><strong>italki Provides the Venue</strong><br>italki makes the Site or Application available as an online venue where Members locate and connect with each other and take advantage of the Services. italki is not involved in the dealing and contracting between Students and Teachers, or in the Teachers\' delivery of Teaching Services to Students. italki has no control over and does not guarantee the quality, safety or legality of Teaching Services advertised, the truth or accuracy of listings, the qualifications, background, or abilities of Teachers, the ability of Teachers to deliver Teaching Services, the ability of Students to pay for Teaching Services, or that a Student or Teacher can or will actually complete a transaction.</p><p><strong>Performance of Lesson Contracts</strong><br>Upon confirmation of Teacher Services, time, and price by both the Student and the Teacher, the Student agrees to purchase, and the Teacher agrees to deliver, the Teacher Services in accordance with the Terms of Service (collectively the "Lesson Contract"). You agree not to enter into any contractual provisions in conflict with the Terms of Service. The Student and Teacher each covenants and agrees to act with good faith and fair dealing in performance of the Lesson Contract. Furthermore, the Student and Teacher each acknowledges and agrees that the value, reputation, and goodwill of the Site or Application depend on their performance of the foregoing covenants and agreements. The Student and the Teacher therefore agree that italki has the right to take such actions with respect to the Lesson Contract, including without limitation suspension, termination, or legal actions, as italki in its sole discretion deems necessary to protect the value, reputation, and goodwill of the Site or Application.</p><p><strong>Period of Exclusivity</strong><br>Students and Teachers must agree that for a period of one year after acceptance of the first teaching services, providing services for this relationship between the Student and the Teacher will be done exclusively on the site.</p><p>IF YOU ARE A STUDENT, YOU AGREE THAT FOR A PERIOD OF ONE YEAR AFTER ACCEPTANCE OF TEACHING SERVICES FOUND ON ITALKI, IF YOU SOLICIT OR PURCHASE ANY SERVICES FROM THE SAME TEACHER YOU WILL DO SO EXCLUSIVELY ON THE SITE, WHETHER SUCH SERVICES ARE RELATED TO THE PREVIOUS SERVICES, OR FOR NEW UNRELATED SERVICES.</p><p>IF YOU ARE A TEACHER, YOU AGREE THAT FOR A PERIOD OF ONE YEAR AFTER ACCEPTANCE OF YOUR TEACHING SERVICES, IF YOU PROPOSE OR PROVIDE ANY SERVICES TO THE SAME STUDENT YOU WILL DO SO EXCLUSIVELY ON THE SITE, WHETHER SUCH SERVICES ARE RELATED TO THE PREVIOUS SERVICES, OR FOR NEW UNRELATED SERVICES.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">7. Financial Terms for Students</h4>For Students, you must use italki Credits to receive Teaching Services from a Teacher. italki provides Students with a "Student Wallet". The Student Wallet is used to hold italki Credits, and to make payments with italki Credits, for the purchase of Teaching Services.<h5 class="no-margin-b">Purchasing italki Credits</h5><p>In order to acquire italki Credits, you use a third party payment method (example: credit card, PayPal, and others) to pay for the necessary amount. By providing italki with your credit card or bank account information, you authorize us to charge such credit card or bank account for the amounts stated on the payment page. Following a successful transaction, your Student Wallet will have the corresponding amount of italki Credits.</p><h5 class="no-margin-b">No Refunds on Authorized Payments</h5><p>Authorized payments are final. No refunds will be given for italki Credits purchased.</p><h5 class="no-margin-b">Third Party Payment Method Fees</h5><p>When purchasing italki Credits, there may be fees that are charged to a Student by the third party payment provider or the Student\'s bank. These fees are not under italki\'s control, and italki disclaims all liability in this regard. Whatever Payment Method you use may be subject to additional terms and conditions imposed by the applicable third-party payment provider. It is up to the user to review the terms and conditions before using a third party payment method.</p><h5 class="no-margin-b">Cancelled Lesson Requests</h5><p>If a Lesson Request is cancelled by the Student, declined by the teacher, or expires (not confirmed by the Teacher within the request period), the italki Credits will be fully refunded to the Student’s Student Wallet.</p><h5 class="no-margin-b">Confirmation of Lessons</h5><p>As a Student, when you confirm a lesson was successful, you instruct italki to pay the Teacher using the Student Wallet Service. You confirm that the Teacher has completed the applicable Services fully and satisfactorily, and you are instructing italki to transfer italki Credits from your Student Wallet to the Teacher’s Teacher Wallet.</p><h5 class="no-margin-b">Feedback and Ratings on Lessons</h5><p>As a Student, when you confirm a lesson was successful, you will also be asked to leave feedback and a rating for the teacher. Leaving feedback or a rating is optional. However, if you do so, you agree that your feedback will not be used to artificially raise or lower a teacher\'s rating, commit fraud, spam, insult, harass, threaten, or enact intentional misuse.</p><p>You agree to report violations or abuses of our rating and feedback system immediately by contacting Customer Service, and agree not to take any actions that undermine the integrity of the feedback system.</p><h5 class="no-margin-b">Disputes with Teachers</h5><p>In the event there is a disagreement with a teacher, there are two phases to resolving the dispute.<br><strong>Phase 1: Member Resolution</strong> – The Student and Teacher should discuss and reach agreement on what services should be provided, and whether the italki Credits should be transferred to the Student or the Teacher. Any new terms that are agreed by the Student and Teacher should be submitted to italki, for a written record.<br><strong>Phase 2: italki Dispute Judgment</strong> – If the Student and Teacher cannot agree, then the dispute will be handled by italki. italki will review any evidence and submitted materials pertaining to the Dispute and make a final ruling.</p><h5 class="no-margin-b">Lesson Packages</h5><p>Session packages on italki are valid for 6 months. Reminders will be sent to both the Student and the Teacher when the expiration date of their package comes due. If there is no action taken by the Student, then all remaining italki Credits in the package will be sent to the Teacher, minus italki\'s normal commission. If no action is taken by the Teacher, then all remaining italki Credits in the package will be returned to the Student.</p><p>In the event that there is a dispute as to who cancelled a package and the Student and Teacher cannot reach a compromise, then italki will mediate the dispute. italki\'s decision on the dispute is final.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">8. Financial Terms for Teachers</h4><p>For Teachers, you must use italki Credits to receive payment for Teaching Services from a Student. italki provides Teachers with a "Teacher Wallet". The Teacher Wallet is used to hold italki Credits, and to make withdrawals of italki Credits to a Teacher\'s personal funds.</p><p>You agree to italki\'s Teacher Terms of Service at <a ui-sref="instructorterms">www.italki.com/instructorterms</a>.</p><h5 class="no-margin-b">Accepting Teacher Service Requests</h5><p>Teachers will receive requests for Teacher Services ("Lesson Requests"). By accepting a Lesson Request, you agree to provide your Teaching Services to the Student at the date and time set inside the request. You can choose to decline the request. If you do not respond, the request will automatically expire.</p><h5 class="no-margin-b">Cancellations of Lesson Requests</h5><p>If italki decides for any reason that it is necessary or desirable to cancel a confirmed Teacher Services Request made via the Site, Application and Services pursuant to italki Terms of Service, you agree that italki and the relevant Student or Teacher will not have any liability for such cancellations or refunds.</p><h5 class="no-margin-b">Disputes with Students</h5><p>In the event there is a disagreement with a student, there are two phases to resolving the dispute.<br><strong>Phase 1: Member Resolution</strong> – The Student and Teacher should discuss and reach agreement on what services should be provided, and whether the italki Credits should be transferred to the Student or the Teacher. Any new terms that are agreed by the Student and Teacher should be submitted to italki, for a written record.<br><strong>Phase 2: italki Dispute Judgment</strong> – If the Student and Teacher cannot agree, then the dispute will be handled by italki. italki will review any evidence and submitted materials pertaining to the Dispute and make a final ruling.</p><h5 class="no-margin-b">Lesson Packages</h5><p>Session packages on italki are valid for 6 months. Reminders will be sent to both the Student and the Teacher when the expiration date of their package comes due. If there is no action taken by the Student, then all remaining italki Credits in the package will be sent to the Teacher, minus italki\'s normal commission. If no action is taken by the Teacher, then all remaining italki Credits in the package will be returned to the Student.</p><p>In the event that there is a dispute as to who cancelled a package and the Student and Teacher cannot reach a compromise, then italki will mediate the dispute. italki\'s decision on the dispute is final. Please note that in the case of a dispute, it is up to the Teacher and the Student to provide proof to italki to support their positions.</p><h5 class="no-margin-b">italki Service Fees</h5><p>italki collects commission fees when a Teaching Service ("lesson") is confirmed by the Student. <strong>For each transaction on the Site or Application, the commission is 15% of the total cost of the Teacher Service ("lesson").</strong> Fees due to italki are deducted upon transfer of italki Credits to the Teacher\'s Teacher Wallet.</p><p>The balance shown on the Teacher\'s Teacher Wallet is the full balance after all fees have been deducted. Amounts may be rounded up or down as described the “Rounding Off” section.</p><p>italki does not charge any fees for the Teacher to register or create a listing for Teacher Services on italki. To the extent any refunds are issued, commission fees will be based on the amount that is not refunded back to the Student.</p><h5 class="no-margin-b">Circumvention of Service Fees</h5><p class="no-margin-b">Teachers agree not to engage in any action or activity meant to circumvent the service fees. Prohibited practices include (but are not limited to) the following:</p><ul><li>Suggesting, soliciting, or accepting payment by other means outside the italki Payment Service.</li><li>Failing to report accurate or final service prices on the Site, or a service price different than that agreed between Student and Teacher.</li></ul><h5 class="no-margin-b">Withdrawal of Funds</h5><p>When withdrawing italki Credits, there may be fees that are charged to a Teacher by the third-party payment method or the Teacher\'s bank. These fees are not under italki\'s control, and italki disclaims all liability in this regard. Whatever third-party payment method that is used by Teachers may be subject to additional terms and conditions imposed by the third-party payment provider. It is up to the Teacher to review the terms and conditions before using a third-party payment method.</p><h5 class="no-margin-b">Withholding or Delaying Disbursement of Funds</h5><p>If italki reasonably concludes, based on information available to italki, that a Teacher\'s actions may have resulted or will result in a significant number of disputes, refunds or other claims from users who purchased their Teaching Services, italki reserves the right to delay or stop the disbursement of all funds accrued in a Teacher\'s Teacher Wallet. If italki concludes that a teacher has violated the Terms (including the Privacy Policy, Community Policy, and Teacher Terms), italki can refuse to disburse the funds accrued in the Teacher\'s Teacher Wallet and debit such funds from the Teacher Wallet.</p><h5 class="no-margin-b">italki\'s Rights Regarding Reimbursements</h5><p>italki reserves the right to seek reimbursement from a Teacher if italki, in its sole discretion, (a) provides a refund to a Student if the Teacher cannot promptly deliver the purchased Teacher Services, or (b) discover erroneous or duplicate transactions. The Teacher authorizes italki to obtain such reimbursement by deducting from future payments owed to the Teacher, reversing any credits to the Teacher\'s Account, debiting the Teacher\'s bank account, or seeking such reimbursement from the Teacher by any other lawful means.</p><h5 class="no-margin-b">Rounding Off</h5><p>italki may, in its sole discretion, round up or round down amounts that are payable from or to Teachers or Students to the nearest whole functional base unit in which the currency is denominated (e.g. to the nearest dollar); for example italki will round up an amount of $101.50 to $102.00, and $101.49 to $101.00.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">9. Taxes</h4><p>With the exception of Teachers in Hong Kong and the People\'s Republic of China, a Teacher understands and agrees that they are solely responsible for determining their applicable Tax reporting requirements and obligations relating to applicable Taxes for their services. They are also solely responsible for remitting to the relevant authority any Taxes included or received. italki cannot and does not offer Tax-related advice to any Members.</p><p><strong>Teachers in Hong Kong</strong> - italki will report the income of teachers based in Hong Kong.<br><strong>Teachers in the People\'s Republic of China (China)</strong> - italki will report the income of teachers based in China.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">10. italki Credits Policies</h4><h5 class="no-margin-b">italki Credits are not Bank Deposits</h5><p>You acknowledge that: (1) italki is not a bank and the Student Wallet and Teacher Wallet is a payment service rather than a banking service; and (2) italki is not acting as a trustee or fiduciary with respect to your funds, but is acting only as an agent and custodian. (3) ITALKI IS NOT A BANK, AND AMOUNTS TRANSFERRED THROUGH OR STORED IN THE STUDENT WALLET OR TEACHER WALLET ARE NOT INSURED DEPOSITS.</p><h5 class="no-margin-b">italki Credits Expiration Policy</h5><p>italki Credits in a member account will be valid for as long as the member remains active on italki. If the member has not logged into his/her account at least once in the previous year, the italki Credits will expire. For a member to keep their italki Credits active, they must login at least once every year to their italki account. italki Credits are then valid for another 1 year following the most recent login date.</p><h5 class="no-margin-b">Foreign Exchange Risk</h5><p>The Student Wallet and Teacher Wallet Services operates in italki Credits which are tied to US Dollars. italki is not responsible for currency fluctuations that occur when billing or crediting a credit or debit card denominated in a currency other than USD, nor is italki responsible for currency fluctuations that occur when receiving or sending payment via third party payments when purchasing italki Credits or withdrawing an italki Credits balance.</p><h5 class="no-margin-b">italki Credits Limitations</h5><p>italki Credits are valid only when purchased on italki or through authorized italki partners. italki Credits in the form of italki Gift Cards or Vouchers cannot be resold or redeemed for cash. italki Credits redeemed from Gift Cards or Vouchers purchased through unofficial sources or channels are subject to cancellation without notice.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">11. italki\'s Rights Regarding User Accounts and Funds</h4><h5 class="no-margin-b">Security and financial fraud</h5><p>As a security measure, italki may impose transaction limits on some or all Students and Teachers relating to the value of any transaction or disbursement, the cumulative value of all transactions or disbursements during a period of time, or the number of transactions per day or other period of time. We will impose these limits before any services are rendered if we determine it is necessary for security reasons or the prevention of fraud.</p><p>italki reserves the right to void italki Credit purchases if purchases are found to be fraudulent. This includes italki Credits that have been redeemed from fraudulent italki Gift Card purchases.</p><h5 class="no-margin-b">Interest compensation</h5><p>italki may earn interest or other compensation from the balances in bank accounts that result from the timing difference between the payment for Teacher Services and the disbursement of the corresponding funds to Teachers. Teachers and Students are not entitled to any such interest or other compensation.</p><h5 class="no-margin-b">Reservation of Rights for Erroneous Transactions</h5><p>italki reserves the right to seek reimbursement from any Teacher or Student. The Teacher or Student will reimburse italki if italki discovers erroneous or duplicate transactions for the amount of such transaction from such Teacher or Student. italki may obtain such reimbursement by deducting from future payments owed to such Teacher, by reversing any credits to such Teacher\'s bank account, or by seeking reimbursement from such Teacher by any other lawful means.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">12. User Conduct</h4><p class="no-margin-b">You understand and agree that you are solely responsible for compliance with any and all laws, rules, regulations, and tax obligations that may apply to your use of the Payment Services. In connection with your use of the Payment Services, you may not and you agree that you will not:</p><ul><li>Violate any local, state, provincial, national, or other law or regulation, or any order of a court;</li><li>Use the Payment Services for any commercial or other purposes that are not expressly permitted by these Terms;</li><li>Use the Payment Services to transmit, distribute, post or submit any information concerning any other person or entity, including without limitation, personal contact information or credit, debit, calling card or account numbers, or photographs of others without their permission;</li><li>Register any Payment Method with your italki account that is not yours or you do not have authorization to use;</li><li>Attempt to probe, scan, or test the vulnerability of any italki system or network or breach any security or authentication measures;</li><li>Avoid, bypass, remove, deactivate, impair, descramble, or otherwise circumvent any technological measure implemented by italki or any other third party (including another user) to protect the Payment Services;</li><li>Forge any TCP/IP packet header or any part of the header information in any email or newsgroup posting, or in any way use the Payment Services to send altered, deceptive or false source-identifying information;</li><li>Attempt to decipher, decompile, disassemble or reverse engineer any of the software used to provide the Payment Services;</li><li>Advocate, encourage, or assist any third party in doing any of the foregoing.</li></ul><p>italki has the right to investigate and prosecute violations of any of the above to the fullest extent of the law. In addition, and as set in these Payments Terms, italki may take a range of actions against you, including but not limited to limiting access to your italki Account and any associated Payment Services, for a violation of these Payments Terms.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">13. Enforcement of Terms of Service</h4><p>We may suspend or cancel your Member Account if we believe that you have violated or acted inconsistently with the letter or spirit of the Terms of Service, or violated our rights or those of another party. Without limiting italki\'s other remedies, we will suspend or terminate your Member Account and refuse to provide any Services to you if: (a) you breach any terms and conditions of the Terms of Service and the other written policies and procedures posted on the Site or Application; (b) we are unable to verify or authenticate any information you provide to us; or (c) we believe that your actions may cause legal liability for you, our Users or for italki.</p><p>Once suspended or terminated, you may not continue to use the italki service under a different Account or re-register under a new Account. This includes usage of any associated Payment Services. In addition, violations of the Terms of Service may be prosecuted to the fullest extent of the law and may result in additional penalties and sanctions. If a User or Member engages in actions or activities which circumvent the Site or Application or otherwise reduces service fees owed italki under the Terms of Service, that User or Member will be liable to italki for the service fees due, and may be subject to additional sanctions including, but not limited to, suspension or termination of italki membership. italki reserves the right to terminate any User or project for any reason, at its sole discretion and to refuse to provide registration and membership to you in the future. When your membership is canceled, you may no longer have access to data, messages, files and other material you keep on the Site or Application.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">14. Disclaimers</h4><p>IF YOU CHOOSE TO USE THE PAYMENT SERVICES, YOU DO SO AT YOUR SOLE RISK. YOU ACKNOWLEDGE AND AGREE THAT ITALKI PROVIDES THE PAYMENT SERVICES “AS IS”, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED. WITHOUT LIMITING THE FOREGOING, ITALKI EXPLICITLY DISCLAIMS ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT, AND ANY WARRANTIES ARISING OUT OF COURSE OF DEALING OR USAGE OF TRADE. ITALKI MAKES NO WARRANTY THAT THE PAYMENT SERVICES WILL MEET YOUR REQUIREMENTS OR BE AVAILABLE ON AN UNINTERRUPTED, SECURE, OR ERROR-FREE BASIS. ITALKI MAKES NO WARRANTY REGARDING THE QUALITY OF THE PAYMENT SERVICES.</p><p>NO ADVICE OR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED FROM ITALKI PAYMENTS OR THROUGH THE SITE, APPLICATION, SERVICES OR COLLECTIVE CONTENT, WILL CREATE ANY WARRANTY NOT EXPRESSLY MADE HEREIN.</p><p>NOTWITHSTANDING ITALKI’S APPOINTMENT AS THE LIMITED PAYMENT COLLECTION AGENT OF THE TEACHERS FOR THE PURPOSE OF ACCEPTING PAYMENTS FROM STUDENTS ON BEHALF OF THE TEACHERS, ITALKI EXPLICITLY DISCLAIMS ALL LIABILITY FOR ANY ACT OR OMISSION OF ANY GUEST OR OTHER THIRD PARTY.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">15. Limitation of Liability</h4><p>YOU ACKNOWLEDGE AND AGREE THAT, TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE ENTIRE RISK ARISING OUT OF THE PAYMENT SERVICES REMAINS WITH YOU. IF YOU PERMIT OR AUTHORIZE ANOTHER PERSON TO USE YOUR ITALKI ACCOUNT IN ANY WAY, YOU ARE RESPONSIBLE FOR THE ACTIONS TAKEN BY THAT PERSON. NEITHER ITALKI NOR ANY OTHER PARTY INVOLVED IN PROVIDING PAYMENT SERVICES WILL BE LIABLE FOR ANY INCIDENTAL, SPECIAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, LOSS OF DATA OR LOSS OF GOODWILL, SERVICE INTERRUPTION, COMPUTER DAMAGE OR SYSTEM FAILURE OR THE COST OF SUBSTITUTE PRODUCTS OR SERVICES, OR FOR ANY DAMAGES FOR PERSONAL OR BODILY INJURY OR EMOTIONAL DISTRESS ARISING OUT OF OR IN CONNECTION WITH THESE TERMS, FROM THE USE OF OR INABILITY TO USE THE PAYMENT SERVICES, FROM ANY COMMUNICATIONS, INTERACTIONS OR MEETINGS WITH OTHER PERSONS WITH WHOM YOU COMMUNICATE OR INTERACT AS A RESULT OF YOUR USE OF THE PAYMENT SERVICES, WHETHER BASED ON WARRANTY, CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR ANY OTHER LEGAL THEORY, AND WHETHER OR NOT ITALKI PAYMENTS HAS BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGE, EVEN IF A LIMITED REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE.</p><p>EXCEPT FOR OUR OBLIGATIONS TO PAY AMOUNTS TO APPLICABLE PURSUANT TO THESE TERMS OR AN APPROVED PAYMENT REQUEST UNDER THE ITALKI TEACHER GUARANTEE, IN NO EVENT WILL ITALKI’S AGGREGATE LIABILITY ARISING OUT OF OR IN CONNECTION WITH THESE TERMS AND YOUR USE OF THE PAYMENT SERVICES INCLUDING, BUT NOT LIMITED TO, FROM THE USE OF OR INABILITY TO USE PAYMENT SERVICES, EXCEED THE AMOUNTS YOU HAVE PAID OR OWE FOR TEACHING SERVICES VIA THE ITALKI PLATFORM AS A STUDENT IN THE TWELVE (12) MONTH PERIOD PRIOR TO THE EVENT GIVING RISE TO THE LIABILITY, OR IF YOU ARE A TEACHER, THE AMOUNTS PAID BY ITALKI TO YOU IN THE TWELVE (12) MONTH PERIOD PRIOR TO THE EVENT GIVING RISE TO THE LIABILITY, OR ONE HUNDRED U.S. DOLLARS (US$100), IF NO SUCH PAYMENTS HAVE BEEN MADE, AS APPLICABLE. THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN ITALKI AND YOU. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES, SO THE ABOVE LIMITATION MAY NOT APPLY TO YOU.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">16. Indemnification</h4><p>You agree to release, defend, indemnify, and hold italki and its affiliates and subsidiaries, and their officers, directors, employees and agents, harmless from and against any claims, liabilities, damages, losses, and expenses, including, without limitation, reasonable legal and accounting fees, arising out of or in any way connected with (a) your access to or use of the Payment Services, or your violation of these Payments Terms; or (b) your accrual or use of any italki Credits.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">17. Entire Agreement</h4><p class="no-margin-b">Except as they may be supplemented by additional italki policies, guidelines, standards, or terms for a specific product, feature, service or offering, these Terms (and the terms below) constitute the entire and exclusive understanding and agreement between italki and you regarding the Site, Application, Services, Content, and any Teaching Services Requests made via the Site, Application and Services, and these Terms supersede and replace any and all prior oral or written understandings or agreements between italki and you regarding bookings or listings of Accommodations, the Site, Application, Services, and Content.</p><ul class="no-margin-t"><li>Our new <a ui-sref="tos">Terms of Service</a></li><li>Our new <a ui-sref="paymentterms">Payment Terms of Service</a> (for users who use italki Credits)</li><li>Our new <a ui-sref="instructorterms">Teacher Terms of Service</a> (for teachers on italki)</li><li>Our new <a ui-sref="privacy">Privacy Policy</a> and <a target="_blank" ui-sref="copyrightpolicy">Copyright Policy</a></li><li>Our new <a ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">18. Assignment</h4><p>You may not assign or transfer these Payments Terms, by operation of law or otherwise, without italki’s prior written consent. Any attempt by you to assign or transfer these Payments Terms, without such consent, will be null and of no effect. italki may assign or transfer these Payments Terms, at its sole discretion, without restriction. Subject to the foregoing, these Payments Terms will bind and inure to the benefit of the parties, their successors and permitted assigns.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">19. Notices</h4><p>Any notices or other communications permitted or required hereunder, including those regarding modifications to these Payments Terms, will be in writing and given by italki (i) via email (in each case to the address that you provide) or (ii) by posting to the italki Site or via the Application. For notices made by e-mail, the date of receipt will be deemed the date on which such notice is transmitted.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">20. Controlling Law and Jurisdiction</h4><p>The Terms of Service are governed in all respects by the laws of Hong Kong without giving effect to any principle that may provide for the application of the law of another jurisdiction. You agree that any claim or dispute you may have against italki must be resolved by a court located in Hong Kong, or as described in the Arbitration Option paragraph below. You hereby submit to the personal jurisdiction of the courts located within Hong Kong for the purpose of litigating all such claims or disputes. Any cause of action you may have with respect to this Site or Application must be commenced within 30 days after it arises, or the cause of action is barred.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">21. Dispute Resolution</h4><p>If a dispute arises between you and italki, our goal is to resolve such dispute quickly and cost effectively. You agree to first contact us directly to seek dispute assistance by going to Customer Service. You and italki agree to resolve any claim or controversy at law or equity that arises between us out of this Agreement or the italki Services (a "<strong>Claim</strong>") with Dispute Resolution.</p><p><strong>Arbitration Option</strong><br>For any claim arising between you and italki (excluding claims for injunctive or other equitable relief) where the total amount of the award sought is less than HKD 50,000, the party requesting relief may elect to resolve the dispute in a cost-effective manner through binding non-appearance-based arbitration. A party electing arbitration must initiate such arbitration through an established alternative dispute resolution ("<strong>ADR</strong>") provider mutually agreed upon by the parties. The ADR provider and the parties must comply with the following rules: (a) the arbitration will be conducted by telephone, online and/or be solely based on written submissions, the specific manner will be chosen by the party initiating the arbitration; (b) the arbitration will not involve any personal appearance by the parties or witnesses unless otherwise mutually agreed by the parties; and (c) if an arbitrator renders an award the party receiving the award may enter any judgment on the award in any court of competent jurisdiction.</p><p><strong>Improperly Filed Claims</strong><br>Should you file a claim contrary to this section entitled "<strong>Disputes Resolution</strong>," italki will be entitled to recover attorneys\' fees and costs up to HKD 10,000, provided that italki has notified you in accordance with the Terms of Service of the improperly filed claim, and you have failed to promptly withdraw the claim.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">22. General</h4><p>The failure of italki to enforce any right or provision of these Payments Terms will not constitute a waiver of future enforcement of that right or provision. The waiver of any such right or provision will be effective only if in writing and signed by a duly authorized representative of italki. Except as expressly set forth in these Payments Terms, the exercise by either party of any of its remedies under these Payments Terms will be without prejudice to its other remedies under these Payments Terms or otherwise. If for any reason an arbitrator or a court of competent jurisdiction finds any provision of these Payments Terms invalid or unenforceable, that provision will be enforced to the maximum extent permissible and the other provisions of these Payments Terms will remain in full force and effect.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Contacting Customer Service</h4><p>If you wish to report a violation of Site, Application or Service Policies, have any questions or need assistance, please contact italki Customer Service as follows:</p>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></div></div></div></div>'),
a.put("/views/page/premium.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'"></div><div style="padding-top:80px;padding-bottom:120px; background: url(\'/static/images/static/premium.jpg\') no-repeat 0% 20%;background-size:cover; margin-bottom:-130px; color: #fff"><div class="container"><div class="grid-gutter-margin-b text-center"><h1 style="text-shadow: 0px 1px 2px #333">{{\'PU203\'|t}}</h1><div class="row"><div class="col-md-8 col-md-offset-2"><h4 style="text-shadow: 0px 1px 2px #333">{{\'PU204\'|t}}</h4></div></div></div></div></div><div class="container"><div class="grid-example"><div class="panel"><div class="panel-body"><div class="page-pricing grid-gutter-margin-b"><div class="plans-panel"><div class="plans-container"><div class="plan-col col-sm-6"><div class="plan-header bg-light-green">{{\'PU205\'|t}}</div><ul class="plan-features"><li>{{\'ML001\'|t}}</li><li>{{\'ML019\'|t}}</li><li>{{\'AS011\'|t}}</li><li>{{\'C0160\'|t}}</li><li>{{\'M0031\'|t}}</li><li>{{\'PU004\'|t}}</li><li>{{\'PU005\'|t}}</li><li>{{\'PU006\'|t}}</li><li>{{\'PU007\'|t}}</li></ul></div><div class="plan-col col-sm-3"><div class="plan-header bg-light-green">{{\'PU008\'|t}}</div><ul class="plan-features"><li>{{\'PU003\'|t}}</li><li>{{\'PU002\'|t|format:2}}</li><li>{{\'PU002\'|t|format:2}}</li><li>{{\'PU002\'|t|format:2}}</li><li>{{\'PU002\'|t|format:2}}</li></ul></div><div class="plan-col col-sm-3"><div class="plan-header bg-light-green darken">{{\'PU009\'|t}}</div><ul class="plan-features"><li>{{\'PU003\'|t}}</li><li>{{\'PU003\'|t}}</li><li>{{\'PU003\'|t}}</li><li>{{\'PU003\'|t}}</li><li>{{\'PU003\'|t}}</li><li><i class="fa fa-check text-success"></i></li><li><i class="fa fa-check text-success"></i></li><li><i class="fa fa-check text-success"></i></li><li><i class="fa fa-check text-success"></i></li></ul></div></div></div></div><div class="alert alert-success"><h4>{{\'PU206\'|t}}</h4><p ng-bind-html="\'PU207\'|t"></p><a ui-sref="recharge?internal_ref=premium-membership" class="btn btn-primary btn-lg mt20">{{\'MH402\'|t}}</a></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/press.html",'<h2>{{\'M0033\'|t}}</h2><div class="row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b text-center"><h4>italki has been Featured in the Following Press:</h4><p><img style="line-height: 1.5em" alt="business_insider_logo" src="http://blog.italki.com/wp-content/uploads/2014/03/business_insider_logo-300x187.png" width="192" height="120"> <img alt="" src="http://www.italki.com/static/images/static/logo_independent.gif"> <img alt="blogtim" src="http://blog.italki.com/wp-content/uploads/2014/03/blogtim-300x24.png" width="300" height="24"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_mashable.gif"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_ed.gif"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_guardian.gif"> <img style="line-height: 1.5em" src="http://blog.italki.com/wp-content/uploads/2014/03/Huffington-Post-Logo1-300x120.jpg" width="270" height="108"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_pando.gif"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_techinasia.gif"> <img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_techcrunch.gif"> <img alt="" src="http://www.italki.com/static/images/static/logo_yahoonews.gif" width="200" height="60"></p></div></div></div><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b"><h4>Recent Press</h4><p><a href="http://www.fourhourworkweek.com/blog/2014/03/12/how-to-learn-a-foreign-language/"><img class="alignnone wp-image-2368" alt="tim" src="http://blog.italki.com/wp-content/uploads/2014/03/tim-300x101.png" width="300" height="101"></a><br><a class="title_txt" href="http://www.fourhourworkweek.com/blog/2014/03/12/how-to-learn-a-foreign-language/" target="_blank">Tim Ferriss:&nbsp;12 Rules for Learning Foreign Languages in Record Time — The Only Post You’ll Ever Need</a></p><p><a href="http://www.businessinsider.com/how-to-learn-a-foreign-language-in-3-months-2014-3"><img class="alignnone wp-image-2366" alt="business_insider_logo" src="http://blog.italki.com/wp-content/uploads/2014/03/business_insider_logo-300x187.png" width="192" height="120"></a><br><a class="title_txt" href="http://www.businessinsider.com/how-to-learn-a-foreign-language-in-3-months-2014-3" target="_blank">How To Learn A Foreign Language In 3 Months</a></p><p><a href="http://www.huffingtonpost.com/bob-lotich/6-legit-ways-to-make-mone_b_4638907.html"><img class="alignnone wp-image-2373" alt="Huffington-Post-Logo1" src="http://blog.italki.com/wp-content/uploads/2014/03/Huffington-Post-Logo1-300x120.jpg" width="240" height="96"></a><br><a class="title_txt" href="http://www.huffingtonpost.com/bob-lotich/6-legit-ways-to-make-mone_b_4638907.html">6 Legit Ways to Make Money From Home That You’ve Never Heard Of&nbsp;</a></p><p><a href="http://www.theguardian.com/education/2014/feb/21/can-i-learn-a-language-online" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_guardian.gif"></a><br><a class="title_txt" href="http://www.theguardian.com/education/2014/feb/21/can-i-learn-a-language-online" target="_blank">Online language learning challenge: Can I successfully learn a language online?</a></p><p><a href="http://www.independent.co.uk/news/education/further/the-10-best-language-products-7729087.html?action=gallery&amp;ino=4" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_independent.gif" height="50"></a><br><a class="title_txt" href="http://www.independent.co.uk/news/education/further/the-10-best-language-products-7729087.html?action=gallery&amp;ino=4" target="_blank">The 10 Best Language Learning Products</a></p><p><a href="http://pandodaily.com/2012/08/09/six-years-in-language-learning-site-italki-finds-its-angels/" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_pando.gif" height="50"></a><br><a class="title_txt" href="http://pandodaily.com/2012/08/09/six-years-in-language-learning-site-italki-finds-its-angels/" target="_blank">Six Years in, Language Learning Site italki Finds Its Angels</a></p><p><a href="https://www.edsurge.com/n/language-learning-social-network-italki-closes-second-angel-round" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_ed.gif" height="50"></a><br><a class="title_txt" href="https://www.edsurge.com/n/language-learning-social-network-italki-closes-second-angel-round" target="_blank">Language Learning Social Network italki closes second angel round</a></p><p><a href="http://my.news.yahoo.com/language-learning-marketplace-italki-gets-143206301.html" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_yahoonews.gif"></a><br><a class="title_txt" href="http://my.news.yahoo.com/language-learning-marketplace-italki-gets-143206301.html" target="_blank">Language Learning Marketplace italki Gets Angel Funding</a></p><p><a class="title_txt" href="http://www.kirstenwinkler.com/last-man-standing-italki-raises-new-angel-round-focus-is-now-on-live-teaching/" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_kirsten.gif" height="50"></a><br><a class="title_txt" href="http://www.kirstenwinkler.com/last-man-standing-italki-raises-new-angel-round-focus-is-now-on-live-teaching/" target="_blank">italki Raises New Angel Round</a></p><p><a href="http://www.techinasia.com/italki-seed-funding/" target="_blank"><img alt="" src="http://www.italki.com/static/images/static/logo_techinasia.gif" height="50"></a><br><a class="title_txt" href="http://www.techinasia.com/italki-seed-funding/" target="_blank">Language Learning Marketplace italki Gets Angel Funding</a></p><p><a href="http://fairlanguages.com/language-learning-marketplace-italki-launches-new-version/" target="_blank"><img style="line-height: 1.5em" alt="" src="http://www.italki.com/static/images/static/logo_fair.gif" height="50"></a><br><a class="title_txt" href="http://fairlanguages.com/language-learning-marketplace-italki-launches-new-version/" target="_blank">Language Learning Marketplace italki Launches New Version</a></p></div></div></div></div><div class="col-md-3"><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">More about italki</h4><ul class="list-unstyled"><li><a ui-sref="about">{{\'M0017\'|t}}</a></li><li><a href="http://blog.italki.com" target="_blank">{{\'M0018\'|t}}</a></li><li class="active"><a ui-sref="press">{{\'M0033\'|t}}</a></li><li><a ui-sref="contactus">{{\'M0016\'|t}}</a></li></ul></div></div></div></div>'),a.put("/views/page/privacy.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link selected" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Privacy Policy</h3><ol><li>Information We Collect</li><li>IP Address</li><li>Cookies</li><li>Information Relating to Children</li><li>Information Use, Sharing and Disclosure</li><li>Third Party Advertising</li><li>Changes to this Privacy Policy</li><li>Confidentiality and Security</li><li>Changing your Preferences and Personal Information</li><li>International Users</li><li>Contacting italki</li></ol><hr><p>This policy covers how italki, ("italki," "we," "us," or "our") treats personal information that it collects and receives on <a href="www.italki.com" target="_blank">www.italki.com</a>, sites, and applications related to italki. This notice tells you what information we collect, steps we take to protect and secure it, how we use and share information, and finally, how you can contact us with questions or concerns.</p><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Information We Collect</h4><ul class="no-margin-t"><li>italki collects personal information when you register with us, use italki products or services, or post content on a italki site.</li><li>italki may also collect personal information when you enter into promotions or sweepstakes.</li><li>italki may also collect information about your transactions with us and with some of our business partners. This information might include necessary information to process your due payments to us, such as your credit card number.</li><li>italki may automatically receive and record information on our server logs from your browser, including your IP address, cookies, and the pages you request.</li><li>italki uses information for the following general purposes: products and services provision, billing, identification and authentication, services improvement, contact, research, and anonymous reporting.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">IP Address</h4><p class="no-margin-b">italki may occasionally obtain IP addresses from users depending upon how you access our web sites. IP addresses, browser and session information may be used for various purposes, including to:</p><ul class="no-margin-t"><li>Diagnose and prevent service or technology problems reported by our users or engineers that are associated with the IP addresses controlled by a specific web company or ISP.</li><li>Estimate the total number of users visiting italki web sites or applications from specific geographical regions.</li><li>Help determine which users have access privileges to certain content, services or resources that we offer.</li><li>Monitor and prevent fraud and abuse.</li><li>Provide more relevant advertisements to you.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Cookies</h4><ul class="no-margin-t"><li>A cookie is a small amount of data, which often includes an anonymous unique identifier that is sent to your browser from a web site\'s computers and stored on your computer\'s hard drive.</li><li>If you reject all cookies, you may not be able to use italki services or products that require you to "sign in" and you may not be able to take full advantage of all offerings.</li><li>You can configure your browser to accept all cookies, reject all cookies or notify you when a cookie is set.</li><li>italki uses its own cookies for a number of purposes, including to:<ul class="no-margin-t no-margin-b"><li>Require you to re-enter your password after a certain period of time has elapsed to protect you against others accidentally accessing your account contents.</li><li>Keep track of preferences you specify while you are using the italki Sites, Products and Services.</li><li>Estimate and report our total audience size and traffic.</li><li>Conduct research to improve the content and services provided on the italki Sites, Products and Services.</li><li>Ensure that visitors are not repeatedly offered the same advertisements and to customize advertising based on browser type and user profile information.</li></ul></li><li>italki lets other entities that show advertisements or provide services on some of our web pages set and access their cookies on your computer. Other entities\' use of their cookies is subject to their own privacy policies, and not this policy. Advertisers or other entities do not have access to italki cookies.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Information Relating to Children</h4><ul class="no-margin-t"><li>Protecting the privacy of young children is especially important. For that reason, italki does not knowingly collect personally identifiable information through the italki web site from persons under 13 years of age, and no part of italki service is directed to persons under 13.</li><li>If you are under 13 years of age, then please do not use or access the italki service or web site at any time or in any manner.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Information Use, Sharing and Disclosure</h4><ul class="no-margin-t"><li>italki does not share personal information we learn about you from your use of the italki web sites, products and services with others except as described in this policy.</li><li>When you provide personal information through using italki you are however sharing your personal information with italki and its affiliated entities. The use of your personal information by these organizations is subject to this policy.</li><li>We do not share your information with unrelated third parties for their direct marketing purposes. However, italki may display targeted advertisements based on personally non-identifiable information (such as browser type and IP address) and/or personal selection (See the Section entitled Third Party Advertising below for more information on how your information is shared with advertisers).</li><li>italki may use or share your personal information where it is necessary to complete a transaction, to operate or improve the italki products and services, to do something that you have asked us to do, or tell you of products and services that we think may be of interest.</li><li>From time to time, italki or a partner, may sponsor a promotion, sweepstake or contest on italki. You may be asked to provide personal information including name, email address or home address or to answer questions in order to participate. italki may transfer personal information to certain advertising partners that you have explicitly requested to receive information from. It will be clear at the point of collection who is collecting the personal information and whose privacy statement will apply.</li><li>Where you are contacted with an offer or service based on information you have shared with italki, we will do our best to provide you with an opportunity to opt-out of receiving such further communications at the time you are contacted, however, in connection with any of our paid products and services (i.e., products or services that you license or use for a fee), we reserve the right to send you certain communications relating to those products and services, such as service announcements, and administrative messages, that are considered part of your italki account, without offering you the opportunity to opt-out of receiving them.</li><li>When you register for italki, italki collects user-submitted account information such as name, email address and age to identify users and send notifications related to the use of the service. italki also collects user-submitted profile information, including additional contact information, location, biographical information and photos. This additional profile information will assist other users in finding and communicating with you.</li><li>italki will display your "Display Name" on your profile. italki will display your name and any other user-submitted profile information on your profile according to the preferences you set in your account.</li><li>Email addresses and full names may be used when a user invites a friend via email to join italki and when italki sends notifications to a user related to their use of italki.</li><li>When you post a message on a italki Site or Application, you have the ability to post a message which may include personally identifiable information about yourself.</li><li>If you post personal information online that is accessible to the public, you may receive unsolicited messages from other parties in return.</li><li>italki may share personally identifiable information about you under the following circumstances:</li><li>In the course of operating our business it may be necessary or appropriate for us to provide access to your personal information to others such as our service providers, contractors and select vendors so that we can operate italki and our business.</li><li>We may share your personal information to respond to subpoenas, court orders, or legal process, to establish or exercise our legal rights or, defend against legal claims and if in our judgment in such circumstances disclosure is required or appropriate.</li><li>We may share your personal information if we believe it is necessary in order to investigate, prevent, or take action regarding illegal activities, suspected fraud, situations involving potential threats to the physical safety of any person, violations of our various terms of use, or as otherwise required by law.</li><li>As we continue to develop our business, we may also buy or sell all or part of our business. In such transactions, personally identifiable information you have shared with us is generally one of the business assets that will be transferred. The transferred personally identifiable information will remain subject to the promises made in this privacy policy or subsequent policies to which you have consented.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Third Party Advertising</h4><p>Advertisements appearing on the italki Sites, Products or Services may be delivered to users by italki or one of our Web advertising partners. Our Web advertising partners may set cookies. These cookies allow the ad server to recognize your computer each time they send you an online advertisement. In this way, ad servers may compile information about where you, or others who are using your computer, saw their advertisements and determine which ads are clicked on. This information allows an ad network to deliver targeted advertisements that they believe will be of most interest to you. This privacy policy covers the use of cookies by italki and does not cover the use of cookies by any advertisers.</p><p>italki does not share any personally identifiable information with advertisers. italki may share general demographic information (such as aggregated statistics about members\' interests and occupations) and non-personally identifiable information (such as browser type and IP addresses) with advertisers and partners. italki does not give advertisers access to your individual personal account information. However, by selecting, interacting with or viewing an ad you are consenting to the possibility that the advertiser will make the assumption that you meet the targeting criteria used to display the ad.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Changes to this Privacy Policy</h4><p>italki may revise, modify or update this policy. We may notify you about significant changes in the way we treat personal information by sending a notice to the primary email address specified in your particular italki account or by placing a prominent notice on our site. You are encouraged to check this policy frequently for any changes as your continued use of the italki service indicates your consent to such changes.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Confidentiality and Security</h4><p>No data transmissions over the Internet can be guaranteed to be 100% secure. Consequently, we cannot ensure or warrant the security of any information you transmit to us and you do so at your own risk. Once we receive your information, we take reasonable measures to secure it on our systems.</p><p>If italki learns of a security breach we may attempt to notify you electronically so that you can take appropriate protective steps. By using italki or providing personal information to us you agree that we can communicate with you electronically regarding security, privacy and administrative issues relating to your use of those sites, products and services. We may post a notice on our applicable web sites if a security breach occurs. If this happens, you will need a web browser enabling you to view the applicable web sites. We may also send an email to you at the email address you have provided to us in these circumstances.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Changing your Preferences and Personal Information</h4><p>You can edit your account information with italki at any time. Most personal information you may provide is entirely optional. For example, to the extent that parents are considering whether to permit their children to use italki, we do not condition a child\'s participation based upon their provision of any more personal information than is necessary to operate those sites, products and services.</p><p>You can delete your applicable account by visiting the applicable account deletion page; however, please note that some personal information, primarily your contact information, may remain in our records to the extent necessary to protect our legal interests or document compliance with regulatory requirements.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">International Users</h4><p>The italki web site is hosted in the U.S. and is intended for and directed to users around the world. If you are accessing this web site from the European Union, Asia, or any other region with laws or regulations governing personal data collection, use, and disclosure, that differ from U.S. laws, please be advised that through your continued use of this web site, which is governed by U.S. law, this privacy policy, and our Terms of Service, you are transferring your personal information to the U.S. and you consent to that transfer.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Contacting italki</h4><p>If you have a privacy concern regarding italki, or this policy, have any questions or need assistance, please contact italki Customer Service as follows:</p>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></div><p>Effective Date: February 1, 2007<br>Update: January 6, 2017</p></div></div></div>'),a.put("/views/page/redeem.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><style>.header-small.navbar {\n  margin-bottom: 0;\n  }\n  .header-bg{\n    border-bottom:1px #ddd solid;background:#00bfbd; padding: 70px 0 120px;margin-bottom:-130px;\n  }\n  .redeem-content{\n    padding: 20px 50px\n  }\n  .redeem-co{\n    border:1px #ddd solid;\n    width:500px;\n    font-size:14px;\n    padding: 5px 100px\n  }\n  @media (max-width: 480px){\n    .header-bg{\n      padding: 30px 0 160px;\n    }\n    .header-bg .container{\n      padding-top: 10px;\n    }\n    .redeem-content{\n      padding: 20px;\n    }\n    .redeem-co{\n      width: 100%;\n      padding: 5px 10px;\n    }\n  }</style><div class="header-bg"><div class="container"><div><div class="row"><div class="col-md-7 text-center"><h1 style="color:#fff">{{\'VC215\'|t}}!</h1><h3 style="line-height:1.5;color:#fff">{{\'VC212\'|t}}</h3></div><div class="col-md-5 text-center" style="padding-top: 20px"><img style="border-radius:8px; box-shadow:0px 0px 10px #545454" src="https://dn-italkiqn.qbox.me/static/images/static/giftcard_redeem2.jpg"></div></div></div></div></div><div class="container"><div class="panel"><div class="panel-body redeem-content" style=""><div class="grid-gutter-margin-b3 text-center"><h3>1. {{\'VC216\'|t}}</h3><p><img src="/static/images/static/redeem-card.png" style="border-radius:8px; box-shadow:0px 0px 10px #545454"></p><p class="r"><span class="des_txt">{{\'VC213\'|t}}</span></p><p><span class="redeem-co">ABCD-EFGH-HJKL-MNSP</span></p></div><div class="grid-gutter-margin-b3 text-center"><h3>2. {{\'VC214\'|t}}</h3></div><div class="grid-gutter-margin-b3 text-center"><h3>3. {{\'VC215\'|t}}</h3><img src="/static/images/static/redeem-active.png" style="border-radius:8px; box-shadow:0px 0px 10px #545454"></div><hr><div class=""><h4>{{\'VC217\'|t}}</h4><span class="text-muted"><ul class="no-grid-gutter-h"><li><a href="http://support.italki.com/entries/21570743-What-are-italki-Credits-ITC">{{\'KP205\'|t}}</a></li><li><a href="http://support.italki.com/entries/21593567-How-do-I-schedule-a-lesson-with-an-italki-teacher">{{\'KP207\'|t}}</a></li><li><a href="http://support.italki.com/entries/21595206-What-is-the-difference-between-a-Professional-Teacher-and-Community-Tutor">{{\'VC218\'|t}}</a></li></ul></span><p class="r"><a href="http://support.italki.com/forums">{{\'VC219\'|t}}</a></p></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/page/refugee-outreach.html","<style>.theme-white {\n    background: #fff;\n  }\n\n  .logo_outreach {\n    position: absolute;\n    top: 30px;\n    left: 30px;\n    width:200px;\n  }\n\n  p {\n    font-size: 16px;\n    color: #333;\n  }\n\n  ul.social-share {\n    display: inline-block;\n    list-style-type: none;\n    padding: 0;\n  }\n\n  ul.social-share li {\n    float: left;\n    width: 60px;\n    height: 40px;\n  }\n\n  ul.social-share li a{\n    display: block;\n    width: 60px;\n    height: 40px;\n  }\n\n  li.social-email {\n    background: url('/static/images/static/icon_mail.png');\n    background-size: 60px 40px;\n  }\n\n  li.social-twitter {\n    background: url('/static/images/static/icon_twitter.png');\n    background-size: 60px 40px;\n  }\n\n  li.social-facebook {\n    background: url('/static/images/static/icon_facebook.png');\n    background-size: 60px 40px;\n  }\n\n  .bg-container {\n    height: 750px;\n    width: 100%;\n    background: url('/static/images/static/hero-image_vassar.png') 50% 50%;\n    background-size: cover;\n    padding-top: 400px;\n  }\n\n  .container {\n    max-width: 1000px;\n    padding-top: 0px;\n  }\n\n  .container h2 {\n    font-size: 40px;\n    font-weight: 300;\n    text-align: center;\n  }\n\n  .bg-container h1 {\n    font-size: 50px;\n    font-weight: 300;\n    margin-bottom: 40px;\n    line-height: 0.94;\n    text-align: center;\n    color: #ffffff;\n  }\n\n  .bg-container p {\n    font-size: 20px;\n    font-weight: 300;\n    text-align: center;\n    color: #ffffff;\n  }\n\n  .bg-container h2 {\n    font-size: 40px;\n    font-weight: 300;\n    line-height: 1.18;\n    text-align: center;\n    color: #333333;\n    margin-bottom: 38px;\n  }\n\n  .fa-angle-down {color:white; font-size:36px; margin-top:120px;}\n\n  .video-container {\n    position: relative;\n    width: 100%;\n    height: 0;\n    padding-bottom: 56.25%;\n    margin: 50px auto;\n  }\n\n  .video {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  .about-us img {\n    width: 100px;\n  }\n\n\n\n  /*slider CSS */\n\n  .testimonial-bg{\n    background: #F5F5F5;\n  }\n\n  .carousel-inner{\n    height: 338px;\n    max-width: 750px;\n    margin: 0 auto;\n  }\n\n  .carousel-control{\n    display: none;\n  }\n\n  .carousel-indicators .active {\n    margin-left: 10px;\n    background-color: #333;\n  }\n\n  .carousel-indicators li {\n    margin-left: 10px;\n    border: 1px solid #333;\n    background-color: none;\n  }\n\n  .testimonials-slide{\n    color: #333;\n  }\n\n  .slide-img{\n    float: left;\n    width: 145px;\n    margin: 60px 50px 0 0;\n  }\n\n  .slide-content{\n    float: left;\n    width: 550px;\n  }\n\n  .slide-name{\n    font-size: 30px;\n    line-height: 40px;\n    font-weight: 300;\n    margin-top: 60px;\n  }\n\n  .slide-date{\n    margin-bottom: 25px;\n  }\n\n  /*end slider css*/\n\n  .mid_page_banner {\n    background: url('/static/images/static/banner_meet-the-teachers.png');\n    background-size: 1000px 205px;\n    height: 205px;\n  }\n\n  .mid_page_banner h2 {\n    color: white;\n    padding: 20px;\n    margin: 20px 0;\n    font-size: 30px;\n  }\n\n  .mid_page_banner button {\n    border: 2px solid #fff;\n    height: 60px;\n    width: 222px;\n    background: none;\n    color: white;\n    text-transform: uppercase;\n    font-size: 18px;\n    display: block;\n    margin: 0 auto;\n  }\n\n  .divider_banner {\n    background-color: #ff4338;\n    height: 80px;\n  }\n\n  .divider_banner h2 {\n    background-color: #ff4338;\n    margin-top:12px;\n    font-size: 20px;\n    font-weight: 300;\n    width: 520px;\n    color: #ffffff;\n    float: right;\n  }\n\n  .divider_banner button {\n    border: 2px solid #fff;\n    height: 50px;\n    width: 184px;\n    background: none;\n    color: white;\n    text-transform: uppercase;\n    font-size: 18px;\n    float:left;\n    margin-top: 15px;\n  }\n\n  .activities_lc {\n    width: 470px;\n    height:300px;\n    overflow: auto;\n    background: url('/static/images/static/banner_saving-languges.png');\n    background-size: 470px 300px;\n    display: inline-block;\n  }\n\n\n\n  .activities_kids h3, .activities_lc h3 {\n    font-size: 40px;\n    font-weight: 300;\n    text-align: center;\n    color: #ffffff;\n    margin-top: 100px;\n  }\n\n  .activities_kids {\n    width: 470px;\n    height:300px;\n    overflow: auto;\n    background: url('/static/images/static/banner_kids-learn.png');\n    background-size: 470px 300px;\n    display: inline-block;\n  }\n\n  footer {\n    padding-top: 30px;\n    background: #000;\n    height: 100px;\n    text-align: center;\n    color: #fff;\n  }\n\n  footer span {\n    display: block;\n    color: #737373;\n    margin-bottom: 10px;\n  }\n\n  footer ul {\n    display: inline-block;\n    list-style-type: none;\n    padding: 0;\n  }\n\n  footer li {\n    display:inline-block;\n    margin-bottom: 10px;\n  }\n\n  footer li a {\n    margin:10px;\n    color: #737373;\n    text-decoration: none;\n  }\n\n  footer li a:hover {\n    color: #ccc;\n  }\n\n  @media (max-width: 991px) {\n    .divider_banner {\n      height: auto;\n      padding-bottom: 20px;\n    }\n    .divider_banner h2 {\n      float: none;\n      width: auto;\n    }\n    .divider_banner button {\n      float: none;\n    }\n    .carousel-inner {\n      height: 500px;\n    }\n    .slide-img {\n      float: none;\n      margin: 20px auto;\n    }\n    .slide-content {\n      float: none;\n      width: auto;\n      text-align: center;\n    }\n  }\n\n  @media (max-width: 767px) {\n    .divider_banner {\n      height: auto;\n      padding-bottom: 20px;\n    }\n    .divider_banner h2 {\n      float: none;\n      width: auto;\n    }\n    .divider_banner button {\n      float: none;\n    }\n  }\n\n  @media (max-width: 480px) {\n\n    .logo_outreach {\n      width: 35%;\n    }\n\n    .mid_page_banner h2 {\n      font-size: 20px;\n    }\n\n    .activities_lc, .activities_kids {\n      width: 320px;\n    }\n\n    .bg-container {\n      height: 350px;\n      padding-top: 150px;\n      padding-right: 40px;\n      padding-left: 40px;\n    }\n\n    .bg-container h1 {\n      font-size: 40px;\n      margin-bottom: 10px;\n    }\n\n    .bg-container i {\n      display: none;\n    }\n\n    .divider_banner h2 {\n      font-size: 14px;\n      margin-top: 20px;\n    }\n\n    .about-us img {\n      width: 80px;\n      margin-top: 30px;\n    }\n\n    .activities_lc h3  {\n           margin-top: 75px;\n         }\n    .activities_kids h3  {\n      padding: 0 20px;\n    }\n\n\n    footer { height: 100%; }\n\n    .fa-angle-down {margin-top:-15px;}\n\n\n  }\n\n  .at-icon-wrapper {\n    display: none;\n  }\n\n  h3 {\n    font-size: 16px;\n"+'  }</style><div class="bg-container text-center"><img src="static/images/static/logo-outreach_white.svg" class="logo_outreach"><h1>italki Refugee Outreach</h1><p class="text-center">Refugee teachers help university students learn languages</p><i class="fa fa-angle-down" aria-hidden="true"></i></div><div class="container"><ul class="social-share addthis_toolbox"><li class="social-email"><a class="addthis_button_email" href="#"></a></li><li class="social-twitter"><a class="addthis_button_twitter" href="#"></a></li><li class="social-facebook"><a class="addthis_button_facebook" href="#"></a></li></ul><p style="margin:25px auto">The number of refugees worldwide has reached historic levels as tens of millions of people seek asylum from conflicts in their home countries. Even for those able to reach countries willing to take them in, rebuilding their lives and careers in unfamiliar societies often proves challenging.</p><p>For one group of refugees living in Istanbul, teaching Arabic lessons on italki with students across the world has offered a way to overcome these obstacles and establish new hope. As well as earning income, they have been able to share their experiences with people from different cultures and backgrounds, cultivating meaningful relationships with their students.</p><div class="row"><div class="col-sm-12"><div class="video-container"><iframe src="https://www.youtube.com/embed/e7W9D9XBdfk" frameborder="0" allowfullscreen class="video"></iframe></div></div></div><p>This spring italki partnered with Small Projects Istanbul and Vassar College to help 12 refugee teachers connect with students at Vassar for a semester of online Arabic lessons.</p><p style="margin:25px auto">Now some 300 lessons later they are keeping busier than ever with students they have met through italki’s online marketplace, moving on from the program’s foundations toward stable careers in online teaching.</p><p>Their students have meanwhile been able to develop their language skills and cultural awareness with native speakers who have prevailed through some of life’s greatest adversities to mentor them, sharing experiences across cultures and distances.</p><div class="row about-us text-center" style="margin:50px auto"><div class="col-sm-4"><img src="static/images/static/icon_student.png"><h3>Experience for students</h3><p>92 students have taken hundreds of immersive Arabic lessons with refugee teachers on italki, developing their language skills and cultural awareness.</p></div><div class="col-sm-4"><img src="static/images/static/icons_teacher.png"><h3>Opportunity for teachers</h3><p>12 teachers are now regularly connecting for lessons with italki learners around the world following 150 lessons with students at Vassar College.</p></div><div class="col-sm-4"><img src="static/images/static/icon_organization.png"><h3>Reach for organizations</h3><p>Working together, italki, Small Projects Istanbul, and Vassar College have expanded their reach to help a group of refugees access opportunity and hope.</p></div></div></div><div class="testimonial-container"><div class="testimonial-bg"><div class="container no-padding-t"><div class="row text-center"><div class="col-sm-12 testimonials-slide no-margin-b"><carousel interval="myInterval"><slide ng-repeat="slide in slides" active="slide.active"><img class="slide-img" ng-src="{{slide.image}}"><div class="slide-content text-left"><div class="slide-name">{{slide.name}}</div><div class="slide-date">{{slide.year}}</div><div class="slide-text">"{{slide.text}}"</div></div></slide></carousel></div></div></div></div></div><div class="container" style="margin: 50px auto"><div class="mid_page_banner"><h2>Learn Arabic on italki</h2><a href="https://www.italki.com/teachers/arabic"><button>Meet the Teachers</button></a></div></div><div class="divider_banner text-center"><div class="container"><div class="row"><div class="col-md-8"><h2>italki is a language learning platform connecting students and teachers for immersive online lessons in any language</h2></div><div class="col-md-4"><a href="/"><button>discover more</button></a></div></div></div></div><div class="container" style="margin: 0px auto 50px"><h2 style="margin: 40px auto">Related activities</h2><div class="row"><div class="col-md-6 text-center"><a href="/languagechallenge"><div class="activities_lc"><h3>Diversity Language Challenge</h3></div></a></div><div class="col-md-6 text-center"><a href="/kids-learn"><div class="activities_kids"><h3>Helping kids learn languages</h3></div></a></div></div></div><footer><span>&copy; 2017 italki HK Limited</span><ul><li><a href="/about">About</a></li><li><a href="/press">Press</a></li><li><a href="/contactus">Contact</a></li><li><a href="http://blog.italki.com/">Blog</a></li><li><a href="http://stories.italki.com/">Stories</a></li><li><a href="/tos">Terms</a></li><li><a href="/privacy">Privacy</a></li></ul></footer>'),
a.put("/views/page/teachyourself.html",'<style>@font-face {\n    font-family: \'CheapPine\';\n    src: url(\'/static/images/static/cheappine.otf\');\n  }\n  .row_tys{\n    margin-top:30px\n  }\n  .row_tys h1,h2{\n    font-family: "CheapPine";\n  }\n  .row_tys h1{\n    font-size: 100px;\n    line-height: 80px;\n    margin: 0;\n  }\n  .row_tys h1 strong{\n    font-family:Roboto; color: #b2dde2; font-weight: bolder\n  }\n  .row_tys h2{\n    font-size: 40px;\n    margin: 0;\n  }\n  .row_tys a{\n    color:#00a6b1;\n    text-decoration: underline;\n  }\n  .row_tys .panel{\n    border-top:3px #00a6b1 solid!important;\n  }\n  .col-md-4 img{\n    max-width: 260px\n  }\n  .col-md-4 .green{\n    background: #00a6b1;\n    padding: 20px 50px;\n    text-align: center;\n    color:#fff;\n    font-size: 14px\n  }\n  .logo_tys{\n    width: 70%;\n  }\n  .tys_title{\n    border-top:3px #00a6b1 solid;\n    border-bottom:3px #00a6b1 solid;\n    padding: 50px 0\n  }\n  .tys_des .col-md-4 img{\n    width: 200px;\n  }</style><div class="row row_tys"><div class="col-md-12"><div class="panel tys_title"><div class="text-center"><img src="/static/images/static/languagehacking01.png" class="logo_tys"></div></div><div class="row"><div class="col-md-4"><div class="panel"><div class="text-center"><img src="/static/images/static/teach-yourself-logo.jpg"></div><div class="green">A new Teach Yourself series that promises to get you speaking a new language <strong>from day one!</strong></div></div></div><div class="col-md-4"><div class="panel"><div class="text-center"><img src="/static/images/static/teach-yourself-flag.jpg"></div><div class="green">Most language courses try to teach you a language; #LanguageHacking shows you <strong>how to learn a language.</strong></div></div></div><div class="col-md-4"><div class="panel"><div class="text-center"><img src="/static/images/static/benny_lewis.jpg"></div><div class="green">Master the shortcuts and strategies used by one of the world’s <strong>most successful language learners.</strong></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-md-4 text-center"><img src="/static/images/static/languagehacking02.png"></div><div class="col-md-8"><h2 class="no-margin-t">The Language Hacking Method</h2><p><strong>#LanguageHacking</strong> is a completely different approach to language learning. It’s not magic. It’s not something only ‘other people’ can do. It’s simply about being smart with how you learn: learning what’s indispensable and skipping what’s not. There’s no need to learn every word and grammar rule before you start using the language. Instead, #LanguageHacking gives you the most versatile phrases and most effective shortcuts to help you get fluent faster.<br><strong>#LanguageHacking</strong> isn’t just a course. It’s a new way of thinking about language learning and how people communicate today. With the bespoke online language hacking community you really can start speaking from day one!</p><h2 class="">Pre-order the books now!</h2><div class="row"><div class="col-md-3 text-center"><p><a href="http://a-fwd.com/asin=1473633095" target="_blank"><img src="/static/images/static/lh_french.jpg"></a></p></div><div class="col-md-3 text-center"><p><a href="http://a-fwd.com/asin=1473633125" target="_blank"><img src="/static/images/static/lh_italian.jpg"></a></p></div><div class="col-md-3 text-center"><p><a href="http://a-fwd.com/asin=147363315X" target="_blank"><img src="/static/images/static/lh_german.jpg"></a></p></div><div class="col-md-3 text-center"><p><a href="http://a-fwd.com/asin=1473633214" target="_blank"><img src="/static/images/static/lh_spanish.jpg"></a></p></div></div></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-md-4 text-center"><img src="/static/images/static/languagehacking03.png"></div><div class="col-md-8"><h2 class="no-margin-t">The Speak From Day One Promise with italki</h2><p>italki makes it possible to immerse yourself in a new language without ever having to buy a plane ticket. On italki, Benny Lewis was able to find language teachers and a community to help him learn many languages. His experiences reinforced the idea that the best way to learn is to Speak From Day One.</p><p>In his new #LanguageHacking series, published by Teach Yourself ™, Benny puts this approach into practice with speaking missions that you can share on italki. italki will host the #LanguageHacking community, and by sharing speaking missions with other likeminded learners and tutors, the #LanguageHacking community can make language learning social and fun.</p><a href="http://www.italki.com">Join the italki community</a></div></div></div></div><div class="panel tys_des"><div class="panel-body"><div class="row"><div class="col-md-4 text-center"><img src="/static/images/static/languagehacking04.png"></div><div class="col-md-8"><h2 class="no-margin-t">About Benny</h2><p>Benny Lewis used to be just like most of us—fluent in just one language, but with a nagging desire to learn more. After university, he moved to Spain to try and pick up Spanish but found himself no more fluent after six months than he’d been when arrived. Frustrated, he decided to put his background in electrical engineering to good use by developing a method that broke down language learning into universal milestones, focusing on acquisition through regular conversation. And this is where Language Hacking began!<br>Today, Benny is known throughout the language learning community as “the Irish Polyglot” and is famous for his many online videos that document his language learning adventures around the world. He runs the internet’s biggest language learning blog, <a href="http://www.fluentin3months.com" target="_blank">www.fluentin3months.com</a>, and is the author of the bestselling book by the same name.</p><a href="http://languagehacking.com" target="_blank">More information</a></div></div></div></div></div></div>'),a.put("/views/page/terms.html",""),a.put("/views/page/tos-update.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><p>Last Updated: June 14, 2017</p><p>Version: 2017.1.1</p><p>What has been updated?</p><h4>Update to Payment Terms of Service</h4><p>We’ve added a clause in the Payment Terms of Service explaining that credits redeemed from Gift Cards or Vouchers that were purchased through unofficial sources are subject to cancellation. The addition can be found under italki Credits Policies on section 10.</p><h4>Teacher Terms of Service</h4><p>To ensure that all italki users have access to Teacher Introduction videos regardless of their location in the world, we’ve added a clause to the Teacher Terms of Service that allows italki to upload Teacher Introduction videos to third-party video hosting and streaming services (i.e. Youtube, Vimeo, Youku, etc.). Only videos uploaded directly to italki under Teacher Settings are subject to this clause. The addition can be found under the License Grants section.</p></div></div></div>'),a.put("/views/page/tos.html",'<style>@media (min-width: 992px) {\n    .tab-vline{position:relative;}\n    .tab-vline::after{\n      content: "";\n      width: 3px;\n      height: 2.5rem;\n      position: absolute;\n      top: 1.1rem;\n      left: -1.1rem;\n      background: #e5e5e5;\n    }\n  }</style><h2>Terms & Privacy</h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b ng-scope"><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="tosupdate">Update Notes</a></li><li class="content-block-tab"><a class="content-block-tab-link selected" ui-sref="tos">Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="paymentterms">Payment Terms of Service</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="instructorterms">Teacher Terms of Service</a></li><li class="content-block-tab tab-vline"><a class="content-block-tab-link" ui-sref="privacy">Privacy Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="copyrightpolicy">Copyright Policy</a></li><li class="content-block-tab"><a class="content-block-tab-link" ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t text-up">Terms of Service</h3><ol class="grid-gutter-margin-b"><li>Key Terms</li><li>Terms of Service</li><li>Modification</li><li>Eligibility</li><li>How the Site, Application and Services Work</li><li>Account Registration</li><li>General Member Terms</li><li>Privacy</li><li>Intellectual Property</li><li>Site and Application License</li><li>italki Content and Member Content License</li><li>Member Content</li><li>Links</li><li>Enforcement of Terms of Service</li><li>Disclaimers</li><li>Limitation of Liability</li><li>Indemnification</li><li>Accessing and Downloading the Application from iTunes</li><li>Entire Agreement</li><li>Ability to Accept Terms of Service</li><li>Assignment</li><li>Notices</li><li>Controlling Law and Jurisdiction</li><li>Dispute Resolution</li><li>General</li><li>Contacting Customer Service</li></ol><hr><div class="grid-gutter-margin-b"><h4>Notes for users</h4><p>We have: (1) updated our Terms of Service; (2) moved our payments terms to a new Payments Terms of Service; (3) updated our Privacy Policy; (4) updated our Copyright Policy; (5) updated our Community Policy; and (6) Teacher Terms of Service (collectively “Terms”). Please read each document carefully.</p><ul><li>Our new <a ui-sref="tos">Terms of Service</a></li><li>Our new <a ui-sref="paymentterms">Payment Terms of Service</a> (for users who use italki Credits)</li><li>Our new <a ui-sref="instructorterms">Teacher Terms of Service</a> (for teachers on italki)</li><li>Our new <a ui-sref="privacy">Privacy Policy</a> and <a target="_blank" ui-sref="copyrightpolicy">Copyright Policy</a></li><li>Our new <a ui-sref="communitypolicy">Community Policy</a></li></ul><hr></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">1. Key Terms</h4><p>italki provides an online venue for language learning where Members, both Students and Teachers (terms defined below), can collaborate with each other and take advantage of the services (collectively, the "Services"). These Services are accessible at www.italki.com and any other websites where italki makes the Services available (collectively, the "Site"), and applications for mobile, tablet, and other smart devices and application program interfaces (collectively, the "Application").</p><p>If you are using the Site, Application or Services, these Terms of Service are between you and italki HK Limited (italki HK Limited is hereinafter referred to as "italki", "we", "us", or "our"). italki HK Limited will handle any and all payments and payouts conducted through or in connection with the Site, Application or Services ("<strong>Payment Services</strong>"). Payment Services provided by italki HK Limited are subject to the Payments Terms of Service ("<strong>Payments Terms</strong>").</p><p><strong>"Content"</strong> means all Content that italki makes available through the Site, Application, Services, or its related promotional campaigns and official social media channels, including any Content licensed from a third party, but excluding Member Content.</p><p><strong>"Member Account"</strong> means the italki Account you open when you register to become a Member and use the Services.</p><p><strong>"Member"</strong> means a person or legal entity that registers for an Account.</p><p><strong>"Member Content"</strong> means all Content that a Member posts, uploads, publishes, submits, transmits, or includes in their Member profile or italki promotional campaign to be made available through the Site, Application or Services.</p><p><strong>"Services"</strong> means any of the Connection or Payment Services that are delivered by italki.</p><p><strong>"Student"</strong> means a Member that purchases Teaching Services.</p><p><strong>"Teacher"</strong> means a Member that offers and delivers Teaching Services.</p><p><strong>"Teaching Services"</strong> means all Services delivered by Teachers. These include paid lessons, packages and other services rendered where italki Credits are exchanged.</p><p><strong>"User"</strong> means (1) a person who is a Member, using the Site or Application on his or her own behalf, or (2) a person who is using the Site or Application on behalf of a Member that is a company or organization.</p><p><strong>"Visitor"</strong> means a person who is only visiting the Site or Application, not a Member or User.</p><p><strong>"You"</strong> means a Visitor or Member accessing the Site or Application or using the Services on his or her own behalf; or, if the Services are used on behalf of a company or organization, "you" means the Member for which the Services are used and the User who accesses the Site or Application on behalf of such Member (and such User represents that he or she has the authority to do so on the Member\'s behalf).</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">2. Terms of Service</h4><p>By using the Site, Application or Services, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"), whether or not you become a registered user of the Services. These Terms govern your access to and use of the Site, Application and Services and all Content (defined below), and your participation in the Referral Program (defined below), and constitute a binding legal agreement between you and italki. In addition, certain areas of the Site and Application (and your access to or use of certain aspects of the Services or Content) may have different terms and conditions, standards, guidelines, or policies posted or may require you to agree with and accept additional terms and conditions. If there is a conflict between these Terms and terms and conditions posted for a specific area of the Site, Application, Services, or Content, the latter terms and conditions will take precedence with respect to your use of or access to that area of the Site, Application, Services, or Content.</p><p>If you do not agree to these Terms, you have no right to obtain information from or otherwise continue using the Site, Application or Services. Failure to use the Site, Application or Services in accordance with these Terms may subject you to civil and criminal penalties.</p><p>THE SITE, APPLICATION AND SERVICES COMPRISE AN ONLINE VENUE FOR LANGUAGE LEARNING WHERE MEMBERS, BOTH STUDENTS AND TEACHERS HOSTS MAY TAKE ADVANTAGE OF CONNECTION SERVICES AND PAYMENT SERVICES DIRECTLY WITH EACH OTHER. YOU UNDERSTAND AND AGREE THAT ITALKI IS NOT A PARTY TO ANY AGREEMENTS ENTERED INTO BETWEEN STUDENTS AND TEACHERS OR BETWEEN MEMBERS, NOR IS ITALKI A LANGUAGE SERVICES BROKER OR AGENT. ITALKI HAS NO CONTROL OVER THE CONDUCT OF STUDENTS, TEACHERS, MEMBERS AND OTHER USERS OF THE SITE, APPLICATION AND SERVICES OR ANY SERVICES RENDERED BETWEEN THEM, AND DISCLAIMS ALL LIABILITY IN THIS REGARD TO THE MAXIMUM EXTENT PERMITTED BY LAW.</p><p>IF YOU CHOOSE TO TEACH ON ITALKI, YOU UNDERSTAND AND AGREE THAT YOUR RELATIONSHIP WITH ITALKI IS LIMITED TO BEING A MEMBER AND AN INDEPENDENT, THIRD-PARTY CONTRACTOR, AND NOT AN EMPLOYEE, AGENT, JOINT VENTURER OR PARTNER OF ITALKI FOR ANY REASON, AND YOU ACT EXCLUSIVELY ON YOUR OWN BEHALF AND FOR YOUR OWN BENEFIT, AND NOT ON BEHALF OF OR FOR THE BENEFIT OF ITALKI. ITALKI DOES NOT CONTROL, AND HAS NO RIGHT TO CONTROL, YOUR LISTING, YOUR ACTIVITIES ASSOCIATED WITH YOUR PROFILE OR LISTED SERVICES, OR ANY OTHER MATTERS RELATED TO ANY SERVICES THAT YOU PROVIDE. AS A MEMBER YOU AGREE NOT TO DO ANYTHING TO CREATE A FALSE IMPRESSION THAT YOU ARE ENDORSED BY, PARTNERING WITH, OR ACTING ON BEHALF OF OR FOR THE BENEFIT OF ITALKI, INCLUDING BY INAPPROPRIATELY USING ANY ITALKI INTELLECTUAL PROPERTY.</p><p>YOU ACKNOWLEDGE AND AGREE THAT, BY ACCESSING OR USING THE SITE, APPLICATION OR SERVICES OR BY DOWNLOADING OR POSTING ANY CONTENT FROM OR ON THE SITE, VIA THE APPLICATION OR THROUGH THE SERVICES, YOU ARE INDICATING THAT YOU HAVE READ, AND THAT YOU UNDERSTAND AND AGREE TO BE BOUND BY THESE TERMS AND RECEIVE OUR SERVICES WHETHER OR NOT YOU HAVE REGISTERED WITH THE SITE AND APPLICATION. IF YOU DO NOT AGREE TO THESE TERMS, THEN YOU HAVE NO RIGHT TO ACCESS OR USE THE SITE, APPLICATION, SERVICES, OR CONTENT.</p><p>If you accept or agree to these Terms on behalf of a company or other legal entity, you represent and warrant that you have the authority to bind that company or other legal entity to these Terms and, in such event, "you" and "your" will refer and apply to that company or other legal entity.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">3. Modification</h4><p>italki reserves the right, at its sole discretion, to modify the Site, Application or Services or to modify these Terms, including the Service Fees, at any time and without prior notice. If we modify these Terms, we will either post the modification on the Site or the Application or otherwise provide you with notice of the modification. We will also update the "Last Updated" date at the top of these Terms. By continuing to access or use the Site, Application or Services after we have posted a modification on the Site or via the Application or have provided you with notice of a modification, you are indicating that you agree to be bound by the modified Terms. If the modified Terms are not acceptable to you, your only recourse is to cease using the Site, Application and Services.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">4. Eligibility</h4><p>The Site, Application and Services are intended solely for persons who are 18 or older. Any access to or use of the Site, Application or Services by anyone under 18 is expressly prohibited. By accessing or using the Site, Application or Services you represent and warrant that you are 18 or older.</p><p>For users in the United States, italki may, to the extent permitted by applicable laws and if we have sufficient information to identify a user, obtain reports from public records of criminal convictions or sex offender registrations of the user. For users outside the United States, we may, to the extent permitted by applicable laws and if we have sufficient information to identify a user, obtain the local version of background or registered sex offender checks in our sole discretion. You agree and authorize us to use your personal information, such as your full name and date of birth, to obtain such reports, including from italki\'s vendors.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">5. How the Site, Application and Services Work</h4><p>The Site, Application and Services can be used to provide an online venue where Members, Students and Teachers, can collaborate with each other and take advantage of Connection Services and Payment Services for language learning.</p><p><strong>Connection Services.</strong> The Site or Application is a venue where:</p><ol><li>Members may upload information related to language learning.</li><li>Members conduct searches, connect with, choose, and engage each other for the purposes of language learning.</li><li>Students conduct searches, connect with, choose, and engage Teachers directly for language instruction.</li><li>Teachers advertise their capabilities, respond to inquiries, connect with and engage to provide their Services directly to Students.</li></ol><p>In providing the Connection Services, italki only provides the venue for Students and Teachers to find and contract with each other.</p><p><strong>Payment Services.</strong> The Site or Application is a platform for Students seeking online languages lessons or other language learning services to connect with Teachers seeking to provide online language lessons and other language learning services.</p><p>Payment Services also provide to Students and Teachers certain collaboration, feedback, credit purchase and payment tools, dispute resolution process and dispute assistance, and other Services (collectively, "Payment Services"). Payment Services does not mean Connection Services.</p><p>You agree to italki\'s Payment Terms of Service at <a ui-sref="paymentterms">www.italki.com/paymentterms</a>.</p><p><strong>Teacher Services.</strong> Teacher services are described in more detail on the Teacher Terms of Service.</p><p>If you are accepted to be a Teacher, you agree to italki\'s Teacher Terms of Service at <a ui-sref="instructorterms">www.italki.com/instructorterms</a>.</p><p>Unless explicitly specified otherwise in the italki platform, italki\'s responsibilities are limited to facilitating the availability of the Site, Application and Services.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">6. Account Registration</h4><p>In order to access certain features of the Site and Application, and to participate in language learning Connection Services and Payment Services on italki, you must register to create an account ("italki Account") and become a Member. You may register to join directly via the Site or Application or as described in this section.</p><p>You can also register to join by logging into your account with certain third-party social networking sites ("SNS") (including, but not limited to, Facebook; each such account is a "Third-Party Account"), via our Site or Application, as described below. As part of the functionality of the Site, Application and Services, you may link your italki Account with Third-Party Accounts, by either: (i) providing your Third-Party Account login information to italki through the Site, Services or Application; or (ii) allowing italki to access your Third-Party Account, as permitted under the applicable terms and conditions that govern your use of each Third-Party Account. You represent that you are entitled to disclose your Third-Party Account login information to italki and/or grant italki access to your Third-Party Account (including, but not limited to, for use for the purposes described herein), without breach by you of any of the terms and conditions that govern your use of the applicable Third-Party Account and without obligating italki to pay any fees or making italki subject to any usage limitations imposed by such third-party service providers. By granting italki access to any Third-Party Accounts, you understand that italki will access, make available and store (if applicable) any Content that you have provided to and stored in your Third-Party Account ("SNS Content") so that it is available on and through the Site, Services and Application via your italki Account and italki Account profile page. Unless otherwise specified in these Terms, all SNS Content, if any, will be considered to be Member Content for all purposes of these Terms.</p><p>Depending on the Third-Party Accounts you choose and subject to the privacy settings that you have set in such Third-Party Accounts, personally identifiable information that you post to your Third-Party Accounts will be available on and through your italki Account on the Site, Services and Application. Please note that if a Third-Party Account or associated service becomes unavailable or italki\'s access to such Third-Party Account is terminated by the third-party service provider, then SNS Content will no longer be available on and through the Site, Services and Application. You have the ability to disable the connection between your italki Account and your Third-Party Accounts, at any time, by accessing the "Settings" section of the Site and Application.</p><p>PLEASE NOTE THAT YOUR RELATIONSHIP WITH THE THIRD-PARTY SERVICE PROVIDERS ASSOCIATED WITH YOUR THIRD-PARTY ACCOUNTS IS GOVERNED SOLELY BY YOUR AGREEMENT(S) WITH SUCH THIRD-PARTY SERVICE PROVIDERS. italki makes no effort to review any SNS Content for any purpose, including but not limited to for accuracy, legality or non-infringement and italki is not responsible for any SNS Content.</p><p>Your italki Account and your italki Account profile page will be created for your use of the Site and Application based upon the personal information you provide to us or that we obtain via an SNS as described above. You may not have more than one (1) active italki Account. You agree to provide accurate, current and complete information during the registration process and to update such information to keep it accurate, current and complete. italki reserves the right to suspend or terminate your italki Account and your access to the Site, Application and Services if you create more than one (1) italki Account, or if any information provided during the registration process or thereafter proves to be inaccurate, fraudulent, not current, incomplete, or otherwise in violation of these Terms of Service.</p><p>You are responsible for safeguarding your password. You agree that you will not disclose your password to any third party and that you will take sole responsibility for any activities or actions under your italki Account, whether or not you have authorized such activities or actions. You will immediately notify italki of any unauthorized use of your italki Account.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">7. General Member Terms</h4><p>Our Services are available only to legal entities and individuals in business who can form legally binding contracts. To register for an Account with italki and become a Member, you must accept all of the terms and conditions in, and linked to, the Terms of Service. italki reserves the right in its sole discretion to refuse, suspend, or terminate service to anyone.</p><p>It is the sole responsibility of each registered Member that all personal details, including contact email addresses are up to date and accurate at all times. By accepting these terms and conditions all Members hereby release italki from any claims, demands and damages (actual and consequential) of every kind and nature, known and unknown, suspected and unsuspected, disclosed and undisclosed, which arise due to inaccurate personal information being held on the site or application. All Members are solely responsible for the content and accuracy of any information published by them on italki.</p><p>italki reserve the right to suspend or terminate the membership of any registered Member for any reason. No refunds, payments or compensation of any kind will be paid to Members whose registration has been terminated due to breach of these terms and conditions.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">8. Privacy</h4><p>You agree to italki\'s Privacy Policy - <a ui-sref="privacy">www.italki.com/privacy</a>.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">9. Intellectual Property</h4><p>italki and its licensors retain all of its right, title and interest in and to all patent rights, inventions, copyrights, know-how and trade secrets relating to the Site or Application. The italki logo and name are trademarks of italki, and may be registered in certain jurisdictions. All other product names, company names, marks, logos and symbols on the Site or Application may be the trademarks of their respective owners.</p><p>You agree to italki\'s Copyright Policy - <a ui-sref="copyrightpolicy">www.italki.com/copyrightpolicy</a>.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">10. Site and Application License</h4><p>Subject to and conditioned on compliance with the Terms of Service, italki grants you a limited license to access and, if you are a Member, to use this Site or Application internally for the purpose of ordering and receiving the Services available and authorized from this Site or Application. You must not sell, reproduce, distribute, modify, display, publicly perform, prepare derivative works based on, repost or otherwise use any content of this Site or Application in any way for any public or commercial purpose without prior written consent of italki or the rights holder, unless such actions have previously been expressly permitted by italki or the rights holder for the content in question. You will not attempt to reverse engineer or attempt to interfere with the operation of any part of this Site or Application unless expressly permitted by law. This Site or Application or any portion of this Site or Application may not be reproduced, duplicated, copied, sold, resold or otherwise exploited for any commercial purpose that is not expressly permitted by italki.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">11. italki Content and Member Content License</h4><p>Subject to your compliance with these Terms italki grants you a limited, non-exclusive, non-transferable license, to (i) access and view any italki Content solely for your personal and non-commercial purposes and (ii) access and view any Member Content to which you are permitted access, solely for your personal and non-commercial purposes. You have no right to sublicense the license rights granted in this section.</p><p>You will not use, copy, adapt, modify, prepare derivative works based upon, distribute, license, sell, transfer, publicly display, publicly perform, transmit, broadcast or otherwise exploit the Site, Application, Services, or Content, except as expressly permitted in these Terms. No licenses or rights are granted to you by implication or otherwise under any intellectual property rights owned or controlled by italki or its licensors, except for the licenses and rights expressly granted in these Terms.</p><p>You agree to italki\'s Copyright Policy - <a ui-sref="copyrightpolicy">www.italki.com/copyrightpolicy</a>.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">12. Member Content</h4><p>We may, in our sole discretion, permit you to post, upload, publish, submit or transmit Member Content. By making available any Member Content on or through the Site, Application, Services, or through italki promotional campaigns, you hereby grant to italki a worldwide, irrevocable, perpetual (or for the term of the protection), non-exclusive, transferable, royalty-free license, with the right to sublicense, to use, view, copy, adapt, modify, distribute, license, sell, transfer, publicly display, publicly perform, transmit, stream, broadcast, access, view, and otherwise exploit such Member Content on, through, by means of or to promote or market the Site, Application and Services. italki does not claim any ownership rights in any such Member Content and nothing in these Terms will be deemed to restrict any rights that you may have to use and exploit any such Member Content.</p><p>You acknowledge and agree that you are solely responsible for all italki Content that you make available through the Site, Application, Services or through italki promotional campaigns. Accordingly, you represent and warrant that: (i) you either are the sole and exclusive owner of all Member Content that you make available through the Site, Application, Services or through italki promotional campaigns or you have all rights, licenses, consents and releases that are necessary to grant to italki the rights in such Member Content, as contemplated under these Terms; and (ii) neither the Member Content nor your posting, uploading, publication, submission or transmittal of the Member Content or italki’s use of the Member Content (or any portion thereof) on, through or by means of the Site, Application, the Services or italki promotional campaigns will infringe, misappropriate or violate a third party\'s patent, copyright, trademark, trade secret, moral rights or other proprietary or intellectual property rights, or rights of publicity or privacy, or result in the violation of any applicable law or regulation.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">13. Links</h4><p>The Site, Application and Services may contain links to third-party websites or resources. You acknowledge and agree that italki is not responsible or liable for: (i) the availability or accuracy of such websites or resources; or (ii) the content, products, or services on or available from such websites or resources. Links to such websites or resources do not imply any endorsement by italki of such websites or resources or the content, products, or services available from such websites or resources. You acknowledge sole responsibility for and assume all risk arising from your use of any such websites or resources or the Content, products or services on or available from such websites or resources.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">14. Enforcement of Terms of Service</h4><p>We may suspend or cancel your Member Account if we believe that you have violated or acted inconsistently with the letter or spirit of the Terms of Service, or violated our rights or those of another party. Without limiting italki\'s other remedies, we will suspend or terminate your Member Account and refuse to provide any Services to you if: (a) you breach any terms and conditions of the Terms of Service and the other written policies and procedures posted on the Site or Application; (b) we are unable to verify or authenticate any information you provide to us; or (c) we believe that your actions may cause legal liability for you, our Users or for italki.</p><p>Once suspended or terminated, you may not continue to use the italki service under a different Account or re-register under a new Account. This includes usage of any associated Payment Services. In addition, violations of the Terms of Service may be prosecuted to the fullest extent of the law and may result in additional penalties and sanctions. If a User or Member engages in actions or activities which circumvent the Site or Application or otherwise reduces service fees owed italki under the Terms of Service, that User or Member will be liable to italki for the service fees due, and may be subject to additional sanctions including, but not limited to, suspension or termination of italki membership. italki reserves the right to terminate any User or project for any reason, at its sole discretion and to refuse to provide registration and membership to you in the future. When your membership is canceled, you may no longer have access to data, messages, files and other material you keep on the Site or Application.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">15. Disclaimers</h4><p>THE SERVICES PROVIDED BY ITALKI OR ANY OF OUR LICENSORS OR TEACHERS ARE PROVIDED "AS IS," AS AVAILABLE, AND WITHOUT ANY WARRANTIES OR CONDITIONS (EXPRESS OR IMPLIED, INCLUDING THE IMPLIED WARRANTIES OF MERCHANTABILITY, ACCURACY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT, ARISING BY STATUTE OR OTHERWISE IN LAW OR FROM A COURSE OF DEALING OR USAGE OR TRADE). WE MAKE NO REPRESENTATIONS OR WARRANTIES, OF ANY KIND, EITHER EXPRESS OR IMPLIED, AS TO THE QUALITY, IDENTITY OR RELIABILITY OF ANY THIRD PARTY, OR AS TO THE ACCURACY OF THE POSTINGS MADE ON THE WEB SITE OR APPLICATION BY ANY THIRD PARTY. SOME JURISDICTIONS DO NOT ALLOW LIMITATIONS ON HOW LONG AN IMPLIED WARRANTY LASTS, SO SOME OF THE ABOVE LIMITATIONS MAY NOT APPLY TO YOU.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">16. Limitation of Liability</h4><p>IN NO EVENT SHALL WE OR OUR LICENSORS OR TEACHERS BE LIABLE TO YOU OR ANY OTHER MEMBER FOR ANY SPECIAL, INDIRECT, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES PURSUANT TO THIS AGREEMENT, INCLUDING BUT NOT LIMITED TO, LOSS OF PROFITS, LOSS OF BUSINESS OPPORTUNITIES OR LOSS OF GOODWILL, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p><p>NOTWITHSTANDING ANY OTHER PROVISION OF THIS AGREEMENT, IN NO EVENT WILL OUR LIABILITY TO YOU FOR ANY ACTION OR CLAIM RELATED TO THE SERVICES PROVIDED UNDER THIS AGREEMENT, WHETHER BASED ON CONTRACT, TORT, NEGLIGENCE OR ANY OTHER THEORY OF LIABILITY, EXCEED IN THE GREATER OF: (A) $100 OR (B) THE AGGREGATE AMOUNT OF SERVICE CHARGES ACTUALLY COLLECTED BY US FROM YOU FOR THE SERVICES TO WHICH THE LIABILITY RELATES DURING THE SIX (6) MONTH PERIOD IMMEDIATELY PRECEDING THE DETERMINATION OF SUCH LIABILITY. SOME JURISDICTIONS DO NOT ALLOW FOR THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT APPLY TO YOU.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">17. Indemnification</h4><p>You agree to defend, hold harmless and indemnify italki from and against any and all losses, costs, expenses, damages or other liabilities incurred by italki from and against any cost, liability, loss, damage, cause of action, claim, suit, proceeding, demand or action brought by a third party against italki: (a) in connection with your use of the Services including any payment obligations incurred through use of the Services; or (b) resulting from: (i) your use of the Site or Application(ii) your decision to supply credit information via the Site or Application, including personal financial information; (iii) your decision to submit postings and accept offers from other Members; (iv) any breach of contract or other claims made by Members with which you conducted business through the Site or Application; (v) your breach of any provision of this Agreement; (vi) any liability arising from the tax treatment of payments or any portion thereof; (vii) any negligent or intentional wrongdoing by any Member; (viii) any act or omission of yours with respect to the payment of fees to any Teacher; (ix) your dispute of or failure to pay any invoice or any other payment; and/or (x) your obligations as a Teacher or to a Teacher. Any such indemnification shall be conditioned on our: (a) notifying you in writing of any such claim, demand, action, cost, liability, loss or threat of any thereof; (b) cooperating with you in the defense or settlement thereof; and (c) allowing you to control such defense or settlement. We shall be entitled to participate in such defense through our own counsel at our own cost and expense. We reserve the right to report any wrongdoing of which we become aware to the applicable government agencies or otherwise.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">18. Accessing and Downloading the Application from iTunes</h4><p class="no-margin-b">The following applies to any Application accessed through or downloaded from the Apple App Store ("App Store Sourced Application"):</p><ul class="no-margin-t"><li>You acknowledge and agree that (i) these Terms are concluded between you and italki only, and not Apple, and (ii) italki, not Apple, is solely responsible for the App Store Sourced Application and content thereof. Your use of the App Store Sourced Application must comply with the App Store Terms of Services.</li><li>You acknowledge that Apple has no obligation whatsoever to furnish any maintenance and support services with respect to the App Store Sourced Application.</li><li>In the event of any failure of the App Store Sourced Application to conform to any applicable warranty, you may notify Apple, and Apple will refund the purchase price for the App Store Sourced Application to you and to the maximum extent permitted by applicable law, Apple will have no other warranty obligation whatsoever with respect to the App Store Sourced Application. As between italki and Apple, any other claims, losses, liabilities, damages, costs or expenses attributable to any failure to conform to any warranty will be the sole responsibility of italki.</li><li>You and italki acknowledge that, as between italki and Apple, Apple is not responsible for addressing any claims you have or any claims of any third party relating to the App Store Sourced Application or your possession and use of the App Store Sourced Application, including, but not limited to: (i) product liability claims; (ii) any claim that the App Store Sourced Application fails to conform to any applicable legal or regulatory requirement; and (iii) claims arising under consumer protection or similar legislation.</li><li>You and italki acknowledge that, in the event of any third-party claim that the App Store Sourced Application or your possession and use of that App Store Sourced Application infringes that third party\'s intellectual property rights, as between italki and Apple, italki, not Apple, will be solely responsible for the investigation, defense, settlement and discharge of any such intellectual property infringement claim to the extent required by these Terms.</li><li>You and italki acknowledge and agree that Apple, and Apple\'s subsidiaries, are third-party beneficiaries of these Terms as related to your license of the App Store Sourced Application, and that, upon your acceptance of the terms and conditions of these Terms, Apple will have the right (and will be deemed to have accepted the right) to enforce these Terms as related to your license of the App Store Sourced Application against you as a third-party beneficiary thereof.</li><li>Without limiting any other terms of these Terms, you must comply with all applicable third-party terms of agreement when using the App Store Sourced Application.</li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">19. Entire Agreement</h4><p class="no-margin-b">Except as they may be supplemented by additional italki policies, guidelines, standards, or terms for a specific product, feature, service or offering, these Terms (and the terms below) constitute the entire and exclusive understanding and agreement between italki and you regarding the Site, Application, Services, Content, and any Teaching Services Requests made via the Site, Application and Services, and these Terms supersede and replace any and all prior oral or written understandings or agreements between italki and you regarding bookings or listings of Accommodations, the Site, Application, Services, and Content.</p><ul class="no-margin-t"><li>Our new <a ui-sref="tos">Terms of Service</a></li><li>Our new <a ui-sref="paymentterms">Payment Terms of Service</a> (for users who use italki Credits)</li><li>Our new <a ui-sref="instructorterms">Teacher Terms of Service</a> (for teachers on italki)</li><li>Our new <a ui-sref="privacy">Privacy Policy</a> and <a target="_blank" ui-sref="copyrightpolicy">Copyright Policy</a></li><li>Our new <a ui-sref="communitypolicy">Community Policy</a></li></ul></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">20. Ability to Accept Terms of Service</h4><p>You affirm that you are either more than 18 years of age, or an emancipated minor, or possess legal parental or guardian consent, and are fully able and competent to enter into the terms, conditions, obligations, affirmations, representations, and warranties set forth in these Terms of Service, and to abide by and comply with these Terms of Service. In any case, you affirm that you are over the age of 13, as the Service is not intended for children under 13.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">21. Assignment</h4><p>You may not assign or transfer these Terms, by operation of law or otherwise, without italki\'s prior written consent. Any attempt by you to assign or transfer these Terms, without such consent, will be null and of no effect. italki may assign or transfer these Terms, at its sole discretion, without restriction. Subject to the foregoing, these Terms will bind and inure to the benefit of the parties, their successors and permitted assigns.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">22. Notices</h4><p>Unless you otherwise indicate in writing to Customer Service, italki will communicate with you by email or by posting communications on this Site or Application. You consent to receive communications from us electronically and you agree that these electronic communications satisfy any legal requirement that such communications be in writing. You will be considered to have received a communication when italki sends it to the email address you have provided to italki on this Site or Application, or when italki posts such communication on this Site or Application. You must keep your email address updated on this Site or Application, and you must regularly check this Site or Application for postings. If you fail to respond to an email message from italki regarding violation, dispute or complaint within two business days, italki will have the right to terminate or suspend your membership or your registration.</p><p>All notices to italki intended to have a legal effect concerning this Agreement must be in writing and delivered either in person or by a means evidenced by a delivery receipt, to the following address:</p><adress>italki HK Limited.<br>Units 903-906A, 9/F, Kowloon Centre<br>33 Ashley Road, Tsimshatsui<br>Kowloon, Hong Kong</adress><p>Such notices to italki are deemed effective upon receipt.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">23. Controlling Law and Jurisdiction</h4><p>The Terms of Service are governed in all respects by the laws of Hong Kong without giving effect to any principle that may provide for the application of the law of another jurisdiction. You agree that any claim or dispute you may have against italki must be resolved by a court located in Hong Kong, or as described in the Arbitration Option paragraph below. You hereby submit to the personal jurisdiction of the courts located within Hong Kong for the purpose of litigating all such claims or disputes. Any cause of action you may have with respect to this Site or Application must be commenced within 30 days after it arises, or the cause of action is barred.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">24. Dispute Resolution</h4><p>If a dispute arises between you and italki, our goal is to resolve such dispute quickly and cost effectively. Accordingly, you and italki agree that we will resolve any claim or controversy at law or equity that arises between us out of this Agreement or the italki Services (a "<strong>Claim</strong>") in accordance with this section entitled "Dispute Resolution." Before resorting to these alternatives, you agree to first contact us directly to seek dispute assistance by going to Customer Service.</p><p><strong>Arbitration Option</strong></p><p>For any claim arising between you and italki (excluding claims for injunctive or other equitable relief) where the total amount of the award sought is less than HKD 50,000, the party requesting relief may elect to resolve the dispute in a cost-effective manner through binding non-appearance-based arbitration. A party electing arbitration must initiate such arbitration through an established alternative dispute resolution ("<strong>ADR</strong>") provider mutually agreed upon by the parties. The ADR provider and the parties must comply with the following rules: (a) the arbitration will be conducted by telephone, online and/or be solely based on written submissions, the specific manner will be chosen by the party initiating the arbitration; (b) the arbitration will not involve any personal appearance by the parties or witnesses unless otherwise mutually agreed by the parties; and (c) if an arbitrator renders an award the party receiving the award may enter any judgment on the award in any court of competent jurisdiction.</p><p><strong>Improperly Filed Claims</strong></p><p>Should you file a claim contrary to this section entitled "<strong>Dispute Resolution</strong>," italki will be entitled to recover attorneys\' fees and costs up to HKD 10,000, provided that italki has notified you in accordance with the Terms of Service of the improperly filed claim, and you have failed to promptly withdraw the claim.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">25. General</h4><p>The failure of italki to enforce any right or provision of these Terms will not constitute a waiver of future enforcement of that right or provision. The waiver of any such right or provision will be effective only if in writing and signed by a duly authorized representative of italki. Except as expressly set forth in these Terms, the exercise by either party of any of its remedies under these Terms will be without prejudice to its other remedies under these Terms or otherwise. If for any reason an arbitrator or a court of competent jurisdiction finds any provision of these Terms invalid or unenforceable, that provision will be enforced to the maximum extent permissible and the other provisions of these Terms will remain in full force and effect.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">26. Contacting Customer Service</h4><p>If you wish to report a violation of Site, Application or Service Policies, have any questions or need assistance, please contact italki Customer Service as follows:<br>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></p></div></div></div></div>'),
a.put("/views/page/tos2.html",'<h3 class="no-margin-t text-up">Teacher Terms of Service</h3><p>Last Updated June 14, 2017 - Version 2017.1.1</p><ul><li>Teacher Registration and Service Listing<ul><li>Approval for Teaching Services</li><li>Teaching Services Description</li></ul></li><li>Providing Teaching Services<ul><li>Guidelines for providing your Teaching Services</li><li>Guidelines if you will be unable to provide your Teaching Service</li><li>Guidelines for after you have provided your Teaching Service</li><li>Student Complaints and Refunds</li><li>Additional Guidelines for Teaching Services</li></ul></li><li>Teacher Removal From the Site</li><li>License Grants<ul><li>License Grant for Teacher Content to Students</li><li>License Grant for Teacher Content to italki</li><li>License Grant for Teacher Introduction Video</li><li>License Grant for Teacher Logos</li></ul></li><li>Contacting Customer Service</li></ul><hr><p>If you want to offer Teaching Services on italki, you must read and agree to be bound by these Terms and Conditions for Teachers ("Teacher Terms") which are part of and incorporated into the italki Terms of Service and Payment Terms of Service ("Terms"). These Teacher Terms will apply to any Account that is approved to be a Teacher on the Site. If you do not accept these Teacher Terms in full, you are not authorized to teach on the Site and you are not eligible to receive any benefits from italki for any Teaching Services you provide.</p><div class="grid-gutter-margin-b"><h4>Teacher Registration and Service Listing</h4><h5 class="no-margin-b">Approval for Teaching Services</h5><p>In order to become a "Teacher", you must first submit a complete Teacher Application. Completed Teacher Applications are evaluated by italki for approval. If your Teacher Application is approved, your member status will be changed to a "Teacher." You will have the ability to create and manage a Teacher Profile on our Site. As a Teacher, you can begin providing "Teaching Services".</p><h5 class="no-margin-b">Teaching Services Description</h5><p class="no-margin-b">In order to provide lessons, Teachers must create a description of their Teaching Services on italki. When creating the description of your Teaching Services, you agree to the following guidelines:</p><ul><li>Write a specific, detailed service description with clear scope, deliverables and lessons.</li><li>Set expectations that you can meet or exceed.</li><li>Not create services that are made with the intent to commit fraud, or provide services other than the ones outlined in the description. This includes offering your Services in exchange for positive feedback or for no cost.</li></ul></div><div class="grid-gutter-margin-b"><h4>Providing Teaching Services</h4><h5 class="no-margin-b">Guidelines for providing your Teaching Services</h5><p class="no-margin-b">Once you have received a Teaching Services request, you agree to the following guidelines:</p><ul><li>Use the italki platform to manage Student requests.</li><li>Respond promptly, within one business day, to all lesson-related communication, whether from the Student or from italki.</li><li>Maintain a record of all communication between you and the Student. Communication methods can include outside emails, instant messages, telephone or in-person conversations. Important details includes information on the scope, deliverables, time frames, price, feedback, revisions, schedule changes, vacation, availability, delays, acceptance of deliverables, and completion of lessons.</li><li>Inform the Student of your availability and response time.</li><li>Inform the Student if you will be unavailable for more than one business day.</li></ul><h5 class="no-margin-b">Guidelines if you will be unable to provide your Teaching Service</h5><ul><li>Immediately inform the Student offering an explanation and proposing a revised date.</li><li>Immediately alert italki Customer Service so that italki is aware of the situation and can offer assistance to the Student.</li></ul><h5 class="no-margin-b">Guidelines for after you have provided your Teaching Service</h5><ul><li>Use the italki Payment Service to handle all financial matters related to your Teaching Service.</li><li>Provide helpful, objective, balanced feedback for the Student.</li></ul><h5 class="no-margin-b">Student Complaints and Refunds</h5><p>Any Student who is dissatisfied with your Teaching Service is required to contact you directly through the Site or Application regarding any issues or complaints. You should try to resolve any issue or complaint directly with the Student first.</p><p class="no-margin-b">If the issue or complaint cannot be resolved, between the Teacher and the Student, italki will use all records of communication as evidence to make a determination on how to adjudicate the dispute. italki shall have the right, in our sole discretion:</p><ul><li>To transfer credits, offer a refund, or reverse a transaction.</li><li>To designate who shall bear the expenses resulting from any such actions.</li></ul><h5 class="no-margin-b">Additional Guidelines for Teaching Services</h5><ul><li>Agree to maintain the privacy of italki Students. This includes not soliciting any personally identifiable information (such as birth date, age, government issued number, phone number, or home address).</li><li>Agree to maintain the privacy of your personal details. This includes personal financial information regarding your Teacher Wallet.</li><li>Agree to maintain personal records for all invoices and payments.</li><li>Agree to cooperate with italki in anti-fraud actions, and in Dispute Resolution.</li><li>Report any conduct violations, including misuse of ratings and feedback.</li><li>Not use Prohibited Content, or content that violates copyright.</li></ul></div><div class="grid-gutter-margin-b"><h4>Providing Teaching Services</h4><p class="no-margin-b">You are expected to perform in a manner that results in a consistently high level of Student satisfaction. You are in breach of these Teacher Terms if you:</p><ul><li>Fail to deliver any Teaching Service for which payment was accepted.</li><li>Fail to take reasonable efforts to resolve a dispute with a Student.</li><li>Create unacceptable levels of Student dissatisfaction</li><li>Violate the Terms of Service, Privacy Policy or other policies</li></ul><p class="no-margin-b">italki reserves the following rights to take any of the following actions at any time and at our sole discretion:</p><ul><li>Cancel your listed Teaching Service</li><li>Limit your Account privileges</li><li>Suspend or terminate your Account</li><li>Adjust your Teacher Wallet balance and withhold all payments</li><li>Contact law enforcement or seek legal remedies</li></ul></div><div class="grid-gutter-margin-b"><h4>License Grants</h4><h5 class="no-margin-b">License Grant for Teacher Content to Students</h5><p>You hereby agree that any user who purchases your Teaching Services will be granted a right to use the Content in your Teaching Services solely for personal and noncommercial educational purposes. You acknowledge that all of the Content you submit to the Site is subject to the representations, warranties, license grants and other provisions contained in the Terms.</p><h5 class="no-margin-b">License Grant for Teacher Content to italki</h5><p>You acknowledge that italki may use your Content and information about your Teaching Services in marketing, advertising and promotion of our Site or Application in any medium. You also give italki permission to use your name as part of marketing, advertising or promotion.</p><h5 class="no-margin-b">License Grant for Teacher Logos</h5><p>We encourage you to highlight your Teaching Services by using your trademarks, service marks or brands ("Logos") on our Site. You give us permission to display your Logos and to make modifications to the appearance of the Logos as may be reasonably necessary. You represent that you own all rights to your Logo. You retain ownership and all rights to any Logo that you submit. Logos may not contain any Prohibited Content. We reserve the right to remove your Logos from the Site at any time in our sole discretion.</p><h5 class="no-margin-b">License Grant for Teacher Introduction Video</h5><p>italki has the rights to use your Teacher Introduction video for marketing, advertising or promotional purposes. italki may publish teacher videos to our official channels in third-party video hosting and streaming services, such as Youtube, Vimeo, Youku, or others, as to ensure accessibility and visibility to italki students regardless of location.</p><p>italki will remove Teacher Introduction videos published to our official channels in third-party video hosting and streaming services upon written notice sent to <a target="_blank" href="http://support.italki.com">support.italki.com</a>.</p></div><div class="grid-gutter-margin-b"><h4 class="no-margin-b">Contacting Customer Service</h4><p>If you wish to report a violation of Site, Application or Service Policies, have any questions or need assistance, please contact italki Customer Service as follows:</p>Online Support: <a target="_blank" href="http://support.italki.com">http://support.italki.com</a><br>Email: <a>support@italki.com</a></div>'),a.put("/views/page/what-is-italki.html",'<div class="row"><div class="col-md-8"><h2>{{\'HPT92\'|t}}</h2><h4><small>{{\'HPT30\'|t}}</small></h4></div></div><div class="grid-example"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-6"><iframe width="534" height="330" src="//www.youtube.com/embed/8RnLis07Luo" frameborder="0" allowfullscreen></iframe></div><div class="col-md-6"><h4>{{\'HPT29\'|t}}</h4><span class="text-muted"><p class="r">{{\'HPT31\'|t}}</p><p class="r">{{\'HPT32\'|t}}</p><p class="r"><strong>{{\'HPT33\'|t}}</strong><ul><li>{{\'HPT34\'|t}}</li><li>{{\'HPT35\'|t}}</li><li>{{\'HPT36\'|t}}</li><li>{{\'HPT37\'|t}}</li><li>{{\'HPT38\'|t}}</li></ul></p><p class="r">{{\'HPT39\'|t}} {{\'HPT40\'|t}}</p></span></div></div></div></div><div class="grid-gutter-margin-b row"><div class="col-md-12"><div style="background: url(\'/static/images/static/headshot-bg.jpg\') no-repeat 0% 0%;background-size: cover;padding:50px 100px"><h4>{{\'HPT41\'|t}}</h4><span class="text-muted"><p class="r">{{\'HPT42\'|t}}</p><p class="r">{{\'HPT43\'|t}}</p></span><div class="grid-gutter-margin-b"><a class="btn btn-primary btn-lg" href="{{REGISTER_URL}}">{{\'HL937\'|t}}</a></div></div></div></div></div>'),a.put("/views/product/directives/nav.html",'<div class="title"><h1>{{\'MK008\'|t}}</h1></div><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first" ng-class="{\'current\':step==1}" style="width: 33%"><div>{{\'PM270\'|t}}</div></li><li ng-class="{\'current\':step==2}" style="width: 34%"><div>{{\'PM272\'|t}}</div></li><li class="last" ng-class="{\'current\':step==3}" style="width: 33%"><div>{{\'PM273\'|t}}</div></li></ul></div></div>'),a.put("/views/product/directives/p_default.html",'<div class="panel"><table class="visible-desktop table table-bordered" style="border: 1px solid #e4e4e4"><tbody><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><img ng-src="{{\'/static/images/\'+productInfo.pCode+\'.jpg\'}}"></td><td style="padding: 10px 20px"><span class="text-muted" ng-bind="\'PM024\'|t"></span><br><span class="text-lg" style="font-size: 19px" ng-bind-html="productInfo.product_title"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'MK002\'|t"></span><br><span class="text-lg" style="font-size: 19px" ng-bind="productInfo.product_name"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'TP008\'|t"></span><br><span class="text-lg" style="font-size: 19px"><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img ng-src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11" ng-if="currentUser.currency!=\'USD\'">≈ {{productInfo.u_price|number}} {{currentUser.currency}}</span></span></td></tr></tbody></table><div class="panel-body visible-phone"><p><strong ng-bind="\'PM024\'|t"></strong><br>{{productInfo.product_title}}</p><p><strong ng-bind="\'MK002\'|t"></strong><br>{{productInfo.product_name}}</p><p><strong ng-bind="\'TP008\'|t"></strong><br><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img ng-src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11">≈ {{productInfo.u_price}} {{currentUser.currency}}</span></p></div></div>'),a.put("/views/product/directives/p_insvs201601lc.html",'<div class="panel"><table class="visible-desktop table table-bordered" style="border: 1px solid #e4e4e4"><tbody><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><img ng-src="{{\'/static/images/\'+productInfo.pCode+\'.jpg\'}}"></td><td style="padding: 10px 20px"><span class="text-muted" ng-bind="\'PM024\'|t"></span><br><span class="text-lg" style="font-size: 19px" ng-bind-html="productInfo.product_title"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'MK002\'|t"></span><br><span class="text-lg" style="font-size: 19px" ng-bind="productInfo.product_name"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'TP008\'|t"></span><br><span class="text-lg" style="font-size: 19px"><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11" ng-if="currentUser.currency!=\'USD\'">≈ {{productInfo.u_price}} {{currentUser.currency}}</span></span></td></tr></tbody></table><div class="panel-body visible-phone"><p><strong ng-bind="\'PM024\'|t"></strong><br>{{productInfo.product_title}}</p><p><strong ng-bind="\'MK002\'|t"></strong><br>{{productInfo.product_name}}</p><p><strong ng-bind="\'TP008\'|t"></strong><br><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11">≈ {{productInfo.u_price}} {{currentUser.currency}}</span></p></div></div>'),a.put("/views/product/directives/p_insvs201610lc.html",'<div class="panel"><table class="visible-desktop table table-bordered" style="border: 1px solid #e4e4e4"><tbody><tr><td style="background: #f3f3f3; padding: 10px 20px;vertical-align: middle" nowrap="nowrap"><img ng-src="{{\'/static/images/\'+productInfo.pCode+\'.jpg\'}}"></td><td style="padding: 10px 20px"><br><span class="text-lg" style="font-size: 19px" ng-bind-html="productInfo.product_title"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'MK002\'|t"></span><br><span class="text-lg" style="font-size: 19px" ng-bind="productInfo.product_name"></span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted" ng-bind="\'TP008\'|t"></span><br><span class="text-lg" style="font-size: 19px"><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11">≈ {{productInfo.u_price}} {{currentUser.currency}}</span></span></td></tr></tbody></table><div class="panel-body visible-phone"><p>{{productInfo.product_title}}</p><p><strong ng-bind="\'MK002\'|t"></strong><br>{{productInfo.product_name}}</p><p><strong ng-bind="\'TP008\'|t"></strong><br><span class="or_price">${{productInfo.price_usd|kpToUsd|number:2}} USD</span> <img ng-src="/static/images/icon_help.gif" align="absmiddle" popover-trigger="mouseenter" popover="italki Credits is used to pay for tutoring sessions and language products on italki. It\'s U.S. dollar based."><br><span class="grey11">≈ {{productInfo.u_price}} {{currentUser.currency}}</span></p></div></div>'),a.put("/views/product/directives/purchase.info.html",'<div class="row"><div class="" ng-class="{\'col-md-9\':productInfo.pCode==\'INSVS201610LC\',\'col-md-12\':productInfo.pCode!=\'INSVS201610LC\'}" style="margin-bottom: 25px"><div class="panel loading-layout"><div class="panel-body"><div class="login_area"><div class="text-center session-request-icon"><span class="tl-icon">1</span></div><div class="session-request-content"><h3 ng-bind="\'PM002\'|t" style="margin-top: 0px"></h3><ul class="list-unstyled"><li id="tbl_price"><h4 class="no-margin-t" ng-bind="\'TS037\'|t"></h4><table class="table" style="border: 2px #ff4338 solid; width: 96%"><tbody><tr><td width="200" ng-bind="\'TS057\'|t"></td><td align="left">${{productInfo.available_itc_usd|kpToUsd|number:2}} USD</td></tr><tr><td bgcolor="#efefef"><strong><span style="font-size: 16px; color: #ff4338" ng-bind="\'TS059\'|t"></span></strong></td><td align="left" bgcolor="#efefef"><strong><span style="font-size: 16px; color: #804000">${{productInfo.price_usd|kpToUsd|number:2}} USD</span></strong></td></tr></tbody></table></li><li><label class="control-label" ng-bind="\'UR057\'|t"></label><div class="row"><div class="col-md-6"><ng-form name="Form1"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|translate}}" class="form-control" ng-model="pwd" ng-change="perror=1" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-if="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span> <span ng-if="!perror&&error&&error.type==\'incorrect_password\'" class="help-block" ng-bind="error.msg"></span></ng-form></div></div></li></ul><button class="btn btn-primary with-spinner" style="margin-bottom: 22px" italki-click-with-spinner="submit(Form1)" stext="LN116"></button></div></div></div><div class="clear"></div></div></div><div class="col-md-3" ng-if="productInfo.pCode==\'INSVS201610LC\'"><div class="panel"><div class="panel-body"><ul class="no-grid-gutter-h"><li>The italki Globetrotter Language Challenge begins on October 1st and ends on October 31st.</li><li>Only lessons purchased and taken on italki will count toward the Challenge.</li><li>Qualifying for each reward depends on successful completion of a different event in the Challenge.</li></ul></div></div></div></div>'),a.put("/views/product/directives/purchase.languagechallenge.html",'<div class="panel"><div class="panel-body"><h3 style="margin-top: 0px">Congratulations! You have successfully joined the 2016 italki Globetrotter Language Challenge.</h3><p>Follow <a ui-sref="challenge"><span>this link&nbsp;</span></a>to head back to the Language Challenge page. Once the Challenge starts, you can track your progress and see how you rank beside other participants on the Leaderboard.</p></div></div>'),a.put("/views/product/product.bs.html","<div ui-view></div>"),a.put("/views/product/purchase.html",'<div ng-if="!error"><div ng-include="\'/views/common/top.tpl.clean.html\'"></div><kp-loading indicator="productInfo"></kp-loading><div class="container no-padding-t" ng-if="productInfo&&!productInfo.data"><div class="container" style="padding-top: 0"><kp-product-purchase-nav-li step="2"></kp-product-purchase-nav-li><kp-product-info product-info="productInfo"></kp-product-info><kp-purchase-info product-info="productInfo" ng-if="productInfo.is_using&&productInfo.stocks&&productInfo.can_buy&&productInfo.available_itc >=productInfo.price"></kp-purchase-info><div class="panel" ng-if="(productInfo.available_itc_usd < productInfo.price_usd) || !productInfo.is_using || !productInfo.stocks || !productInfo.can_buy"><div class="panel-body"><h3 style="margin-top: 0px">{{\'TP063\'|t}}</h3><div ng-if="!productInfo.is_using " ng-bind="\'PM191\'|t"></div><div ng-if="!productInfo.stocks" ng-bind="\'PM192\'|t"></div><div ng-if="!productInfo.can_buy" ng-bind="\'PM195\'|t"></div><a ui-sref="dashboard" class="btn" ng-bind="\'C0076\'|t" ng-if="!productInfo.is_using || !productInfo.stocks || !productInfo.can_buy"></a><div ng-if="productInfo.available_itc_usd < productInfo.price_usd"><p>{{\'PM190\'|t}}</p><a ui-sref="purchase" class="btn" ng-bind="\'PM109\'|t"></a></div></div></div></div></div><div class="container no-padding-t" ng-if="productInfo&&productInfo.data"><kp-product-purchase-nav-li step="3"></kp-product-purchase-nav-li><div ng-if="productInfo.pCode==\'S0010001\'" ng-include="\'/views/product/purchase.oet.html\'"></div><div ng-if="productInfo.pCode==\'INSVS201610LC\'" ng-include="\'/views/product/directives/purchase.languagechallenge.html\'"></div><div ng-if="productInfo.pCode!=\'S0010001\'&& productInfo.pCode!=\'INSVS201610LC\'"><div class="panel"><div class="panel-body"><p>{{\'PM196\'|t}}</p></div></div></div></div><div ng-include="\'/views/common/bottom.simple.html\'"></div></div><div ng-if="error "><ng-include src="\'/views/common/top.tpl.bs.html\'" id="top"></ng-include><div ui-view class="container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n        \'notification\':isTopShow}" autoscroll="false"><div style="min-height: 475px" ng-if="error.type==\'no_code\'"><h2>{{\'PM193\'|t}}</h2></div><div style="min-height: 500px" ng-if="error.type==\'401\'"><h2>{{\'PM194\'|t}}</h2></div></div><ng-include src="\'/views/common/bottom.bs.html\'"></ng-include></div>'),a.put("/views/product/purchase.oet.html",'<div class="panel"><div class="panel-body"><h3 ng-bind-html="\'PM171\'|t"></h3><p ng-bind-html="\'PM172\'|t"></p><ul><li style="list-style: disc; margin-left: 20px" ng-bind-html="\'PM173\'|t"></li><li style="list-style: disc;margin-left: 20px" ng-bind-html="\'PM174\'|t"></li></ul><div class="row" style="padding-left: 54px"><div class="col-md-6 col-sm-12" style="text-align: center;width: auto; margin: 0 auto; background: #bdd082;\r\n            padding: 30px; border-radius: 10px"><h2 ng-bind-html="\'PM175\'|t"></h2><p>{{\'PM176\'|t|format:productInfo.user_name}}</p><p>{{\'PM177\'|t|format:productInfo.user_pwd}}</p><p>{{\'PM178\'|t}}012381</p><div style="width: auto"><p align="center"><a href="https://www.oxfordenglishtesting.com/oaslms/login.aspx?ref=italki%3d&LangType=2057" target="_blank"><img ng-src="/static/images/shareicon/btn_buy2.png" border="0"></a></p></div></div><div class="col-md-6"><img ng-src="/static/images/shareicon/oxford_logo2.png" border="0"></div></div><div><h3>{{\'PM179\'|t}}</h3><table><tr><td><span ng-bind-html="\'PM180\'|t"></span><ul><li style="list-style: disc; margin-left: 20px">{{\'PM181\'|t}}</li><li style="list-style: disc;margin-left: 20px">{{\'PM182\'|t}}</li></ul></td></tr></table><h3>{{\'PM183\'|t}}</h3><table><tr><td>{{\'PM184\'|t}}<br><br><a href="http://en.wikipedia.org/wiki/Common_European_Framework_of_Reference_for_Languages" target="_blank">{{\'PM185\'|t}}</a><br><br><span ng-bind-html="\'PM186\'|t"></span></td></tr></table><h3>{{\'PM187\'|t}}</h3><p><a href="https://www.oxfordenglishtesting.com/oaslms/login.aspx?ref=italki%3d&LangType=2057" target="_blank"><img ng-src="/static/images/shareicon/btn_buy2.png" border="0"></a></p><h3>{{\'PM188\'|t}}</h3><p ng-bind-html="\'PM189\'|t"></p></div></div></div>'),a.put("/views/referral/referral.html",'<style>h1{\n    text-shadow: 0px 1px 2px #333;\n  }\n\n  .hero_img{\n    padding-top:80px;\n    padding-bottom:80px;\n    background: url(\'/static/images/header1.jpg\') no-repeat 50% 0%;\n    background-size: cover;\n    margin-bottom:-130px;\n    color: #fff;\n  }\n\n  .referral-subtitle{\n    text-shadow: 0px 1px 2px #333;\n    max-width: 800px;\n    margin: 0 auto 50px;\n  }\n\n  .email-placeholder{\n    margin: 9px;\n    overflow-y: hidden !important;\n    color: #777;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n\n  .container-tag {\n    width: 100%;\n  }\n  .tag-input {\n    border: 1px solid grey;\n    min-height: 39px;\n    height: 50%;\n    cursor: text;\n    color: #555555;\n  }\n  div.tag {\n    display: inline-block;\n    background: white;\n    padding: 0px 2px;\n    line-height: 30px;\n    height: 30px;\n    border: 1px solid #ff2b1f;\n    margin: 4px;\n  }\n  .tag button {\n    border: none;\n    background: none;\n    color: grey;\n    height: 28px;\n    line-height: 28px;\n  }\n  .tag-container {\n    height: 100%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    background: white;\n    width: 100%;\n    min-height: 38px;\n  }\n\n  .new-tag input {\n    background: white;\n    resize: none;\n    overflow: hidden;\n    vertical-align: middle;\n    box-sizing: border-box;\n    margin: 0;\n    word-wrap: normal;\n    line-height: inherit;\n    border: 0;\n    outline: 0;\n    width: 320px;\n  }\n  .new-tag .fa-times-circle {\n    color: #bbb;\n  }\n  div.new-tag {\n    display: inline-block;\n    background: white;\n    padding: 2px 5px;\n    margin: 4px;\n  }\n  .glyphicon.referral_active:after {\n    content: "\\25cf";\n    font-size: 2em;\n    color: #EE575A;\n    line-height: 0.5em;\n  }\n\n  .glyphicon.referral_inactive:after {\n    content: "\\25cf";\n    font-size: 2em;\n    color: #F4A4A5;\n    line-height: 0.5em;\n  }\n\n  .email-box{\n    background: rgba(204, 204, 204, 0.8);\n    padding:20px 40px;\n    min-height:133px;\n  }\n\n  .send-btn{\n    width: 100px;\n    height: 40px;\n  }\n\n\n  @media (min-width: 992px) {\n    h1 {\n      font-size: 48px;\n    }\n  }\n\n  @media (max-width:767px) {\n    h1{\n      margin-left: auto;\n      margin-right: auto;\n    }\n\n    .glyphicon.referral_active:after {\n      content: "\\25cf";\n      font-size: 2em;\n      color: #EE575A;\n    }\n    .glyphicon.referral_inactive:after {\n      content: "\\25cf";\n      font-size: 2em;\n      color: #F4A4A5;\n    }\n\n    .hero_img{\n      background: url(\'/static/images/header1.jpg\') no-repeat 70% 0%;\n      padding-bottom: 120px;\n    }\n\n  }\n\n  @media (max-width: 546px){\n    .email-placeholder{\n      margin: 0px;\n    }\n\n    .email-placeholder {\n      margin: 7px;\n    }\n\n    .email-box .input-group-btn{\n      width: 100%;\n      display: block;\n    }\n\n    .email-box .input-group-btn .send-btn{\n      width: 100%;\n      margin-top: 10px;\n    }\n\n\n  }\n\n  @media (max-width: 480px) {\n    .hero_img{\n      padding-top: 30px;\n    }\n\n    h1 {\n      font-size: 30px;\n      max-width: 400px;\n      margin: 0 auto 10px;\n\n    }\n\n    .referral-subtitle{\n      font-size: 20px;\n      margin-bottom: 20px;\n    }\n\n    .email-box{\n      height: auto;\n      padding: 20px;\n    }\n\n    .send-btn{\n      position: static;\n      margin-top: 10px;\n      width: 100%;\n      height: auto;\n    }\n\n    .new-tag input{\n      width: 100%;\n    }\n\n    .ref-icon{\n      width: 100px;\n      height: 100px;\n    }\n\n\n  }\n\n  @media (max-width: 400px){\n    .email-placeholder{\n      margin: 0px 5px;\n    }\n  }</style><kp-notify></kp-notify><div ng-include="\'/views/common/top.tpl.bs.html\'"></div><div class="hero_img"><div class="container"><div class="text-center"><h1>{{\'RP765\'|t}}</h1><h2 class="referral-subtitle">{{\'RP706\'|t}}</h2></div><div class="row grid-gutter-margin-b"><div class="col-md-12"><div class="email-box"><label class="control-label"><span style="color:#fff; font-size: 15px">{{\'KP241\'|t}}</span></label><div class="container-tag input-group"><div tag-input ng-model="tags" class="tag-input" style="overflow-y: auto;overflow-x: visible;max-height: 100px;height: 40px"></div><div class="input-group-btn"><button class="btn btn-primary send-btn btn-lg" type="button" ng-click="ctrl.inviteFriendsViaEmails()"><span class="btn-txt">{{\'C0047\'|t}}</span></button></div></div></div></div></div><style>.invite-btn{\n        padding-left:60px;\n        height: 60px;\n        line-height: 60px;\n        font-size: 16px;\n        color: #fff;\n      }\n\n      .gmail-btn{\n        background: #db3030 url(/static/images/static/btn_gmail.png) no-repeat 15px 14px;\n      }\n\n      .copy-btn{\n        background: #fff url(/static/images/static/btn_link.png) no-repeat 20px 20px;\n        color:#000;\n      }\n\n      .message-btn{\n        background: #0078ff url(/static/images/static/btn_messenger.png) no-repeat 15px 14px;\n      }\n\n      .fb-btn{\n        background: #3b589c url(/static/images/static/btn_fb.png) no-repeat 15px 14px;\n      }\n\n      .gmail-btn label, .copy-btn label, .message-btn label, .fb-btn label{\n        display:inline-block;\n        line-height:normal;\n        vertical-align:middle;\n        margin-bottom: 0px;\n      }</style><div class="row grid-gutter-margin-b"><div class="col-lg-3 no-margin-b" style="cursor: pointer"><div ng-click="ctrl.fromGmail()" class="invite-btn gmail-btn"><label>{{\'RP760\'|t}}</label></div></div><div class="col-lg-3 no-margin-b" style="cursor: pointer"><div ngclipboard data-clipboard-text="{{copyObject.url}}" ng-disabled="copyObject.copyState!=1" ngclipboard-success="ctrl.onSuccess(e);" class="invite-btn copy-btn"><label ng-show="copyObject.copyState<2">{{\'RP761\'|t}}</label><label ng-show="copyObject.copyState==2">{{\'RP727\'|t}}</label></div></div><div class="col-lg-3 no-margin-b" style="cursor: pointer"><div ng-click="ctrl.fromFacebook()" class="invite-btn message-btn"><label>{{\'RP762\'|t}}</label></div></div><div class="col-lg-3 no-margin-b" style="cursor: pointer"><div ng-click="ctrl.facebookShare()" class="invite-btn fb-btn"><label>{{\'RP763\'|t}}</label></div></div></div></div></div><div class="container"><div class=""><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b3"><h3 class="no-margin-t">{{\'KP243\'|t}}</h3><div class="row"><div class="col-md-3 text-center"><p class="r"><img class="ref-icon" src="/static/images/static/icon_referral2.gif"></p><h4>{{\'RP011\'|t}}</h4></div><div class="col-md-3 text-center"><p class="r"><img class="ref-icon" src="/static/images/static/icon_referral1.gif"></p><h4>{{\'RP012\'|t}}</h4></div><div class="col-md-3 text-center"><p class="r"><img class="ref-icon" src="/static/images/static/icon_referral3.gif"></p><h4>{{\'RP022\'|t}}</h4></div><div class="col-md-3 text-center"><p class="r"><img class="ref-icon" height="150px" width="141px" src="/static/images/static/icon_referral4.gif"></p><h4 style="color:#ff4338">{{\'RP023\'|t}}</h4></div></div></div></div></div><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-8"><h3 class="no-margin-t">{{\'KP244\'|t}}</h3><h4><small>{{\'KP245\'|t}}<br>{{\'KP246\'|t}}</small></h4></div><div class="col-md-4 hidden"><div class="stat-panel"><div class="stat-row"><div class="stat-cell bg-warning darker"><i class="fa fa-trophy bg-icon" style="font-size:60px;line-height:80px;height:80px"></i> <span class="text-lg">$10 USD</span><br><h5 class="no-padding no-margin">{{\'KP431\'|t}}</h5></div><div class="stat-cell darker" style="background: #efefef"><span class="text-lg text-light-gray">$30 USD</span><br><h5 class="no-padding no-margin text-light-gray">{{\'KP430\'|t}}</h5></div></div></div></div></div><div class="panel loading-layout no-border no-margin-b"><div class="grid-gutter-margin-b"><table class="table table-striped"><thead><tr><th>{{\'KP557\'|t}}</th><th>{{\'KP427\'|t}}</th><th>{{\'RP031\'|t}}</th><th>{{\'C2005\'|t}}</th><th>Status</th></tr></thead><tbody><tr ng-repeat="item in items"><td><img ng-src="{{item.referree_obj|avatar:50 }}" class="rounded" kp-fallback-avatar width="50"> <a ui-sref="user({id:item.referree_obj.id})">{{item.referree_obj.nickname}}</a></td><td style="vertical-align:middle"><span class="text-light-gray" ng-switch="item.status"><label ng-switch-when="0">{{\'RP701\'|t}}</label><label ng-switch-when="1">{{\'RP702\'|t}}</label><label ng-switch-when="2">{{\'RP703\'|t}}</label><label ng-switch-when="3">{{\'RP704\'|t}}</label><label ng-switch-when="4">{{\'RP705\'|t}}</label></span></td><td style="vertical-align:middle">{{item.source}}</td><td style="vertical-align:middle">{{item.referree_obj.register_time|amDate:\'TF002\':true}}</td><td style="vertical-align:middle"><span class="glyphicon referral_active" tooltip="Invitation Sent"></span> <span class="glyphicon referral_active" tooltip="Registered"></span> <span ng-class="{\'referral_active\':getClass(item,1),\'referral_inactive\':!getClass(item,1)}" class="glyphicon" tooltip="Onboarding"></span> <span ng-class="{\'referral_active\':getClass(item,2),\'referral_inactive\':!getClass(item,2)}" class="glyphicon" tooltip="Purchased italki Credits"></span> <span ng-class="{\'referral_active\':getClass(item,3),\'referral_inactive\':!getClass(item,3)}" class="glyphicon" tooltip="Successful"></span></td></tr><tr></tr></tbody></table></div><aside class="text-center" ng-show="meta && meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside><kp-no-found items="items"></kp-no-found></div></div></div><div class="panel"><div class="panel-body"><h3 class="no-margin-t">{{\'RP220\'|t}}</h3><div class="row grid-gutter-margin-b"><div class="col-md-3"><span class="text-muted"><strong>{{\'RP221\'|t}}</strong><br>{{\'RP230\'|t}}</span></div><div class="col-md-3"><span class="text-muted"><strong>{{\'RP223\'|t}}</strong><br>{{\'RP224\'|t}}</span></div><div class="col-md-3"><span class="text-muted"><strong>{{\'RP225\'|t}}</strong><br>{{\'RP226\'|t}}</span></div><div class="col-md-3"><span class="text-muted"><strong>{{\'RP227\'|t}}</strong><br>{{\'RP228\'|t}}</span></div></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),
a.put("/views/referral/referral.page.html",'<kp-notify></kp-notify><kp-title title="RP025" params="[nickname]" ng-if="nickname"></kp-title><kp-facebook-open-graph></kp-facebook-open-graph><style>.btn.btn-login{\n    margin: 18px 0px 0px 20px;\n    color: rgba(255,255,255,1);\n    border-color: rgba(255,255,255,1);\n  }\n  .btn.btn-login:hover,.btn.btn-login:active,.btn.btn-login:focus{\n    background: none!important;\n    color: rgba(255,255,255,0.7);\n    border-color: rgba(255,255,255,0.5);\n  }\n\n\n  .static-content button{\n    /*margin-bottom: 50px; */\n    padding: 20px 20px;\n    font-size: 18px;\n    /*font-weight: bold;*/\n    text-transform: inherit;\n  }\n  .butt{\n      font-size: 18px;\n      padding: 20px 20px;\n      white-space:normal;\n  }\n  .static-content-bottom{\n    width:390px;\n    color:#fff;\n  }\n  .language-index{\n    background-size: cover!important;\n  }\n  .language-index:hover{\n  }\n  .language-index .info{\n    padding: 10px 15px;\n    padding-top: 40%;\n    background: -moz-linear-gradient(bottom,rgba(0,0,0,.65) 0,rgba(0,0,0,.35) 15%,rgba(0,0,0,0) 35%,rgba(0,0,0,0) 100%);\n    background: -webkit-gradient(linear,left bottom,left top,color-stop(0%,rgba(0,0,0,.65)),color-stop(15%,rgba(0,0,0,0.35)),color-stop(35%,rgba(0,0,0,0)),color-stop(100%,rgba(0,0,0,0)));\n    background: -webkit-linear-gradient(bottom,rgba(0,0,0,.65) 0,rgba(0,0,0,.35) 15%,rgba(0,0,0,0) 35%,rgba(0,0,0,0) 100%);\n    background: -o-linear-gradient(bottom,rgba(0,0,0,.65) 0,rgba(0,0,0,.35) 15%,rgba(0,0,0,0) 35%,rgba(0,0,0,0) 100%);\n    background: -ms-linear-gradient(bottom,rgba(0,0,0,.65) 0,rgba(0,0,0,.35) 15%,rgba(0,0,0,0) 35%,rgba(0,0,0,0) 100%);\n    background: linear-gradient(to top,rgba(0,0,0,.65) 0,rgba(0,0,0,.35) 15%,rgba(0,0,0,0) 35%,rgba(0,0,0,0) 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#a6000000\', endColorstr=\'#00000000\', GradientType=0);box-shadow: none;border: none;\n  }\n  .language-index span.language{\n    font-size: 30px;\n    color:#fff;\n    text-shadow: 0px 0px 5px rgba(0,0,0,0.5);\n  }\n  .language-index span.country{\n    font-size: 20px;\n    color:#fff;\n    text-shadow: 0px 0px 5px rgba(0,0,0,0.5);\n  }\n  .language-index div.number{\n    font-size: 1.5rem;\n    color:#fff;\n    text-shadow: 0px 0px 5px rgba(0,0,0,0.5);\n  }\n  .hp.party-size-picker{\n    width: auto!important;\n    margin: 22px 20px 0 0;\n  }\n  .hp .dtp-picker-selector-link{\n    color:#fff;\n    padding: 0;\n  }\n  .hp .dtp-picker-selector-link:after{\n    color:#fff;\n    top: 0;\n  }\n  .hp .dtp-picker-selector select{\n    color:#fff\n  }\n  .hp-language{\n    width:100%;border:none\n  }\n  .hp-language .dtp-picker-selector-link{\n    background:#424242;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    height: initial;\n  }\n  .hp-language .dtp-picker-selector-link:after{\n    color:#fff;\n    top: 1rem;\n    font-size: 30px;\n  }\n  .party-size-picker.lg  .form-control.ui-select-toggle {\n    outline: 0;\n    background: #424242!important;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n    padding: 8px 12px;\n  height: 50px;\n  }\n  .ui-select-toggle .ui-select-placeholder{\n    float: none;\n  }\n  .ui-select-toggle .fa.fa-angle-down{\n    font-size: 30px;\n  }\n  .ui-select-toggle, .ui-select-search{\n    height: 50px;\n  }\n  .lg input.ui-select-search {\n    padding-left: 40px;\n    background: #ddd url(/static/images/icon_search.png) 10px 10px no-repeat !important;\n  }\n  .centric{\n    background: #ff4338;\n    width: 100px;\n    height: 100px;\n    line-height: 130px;\n    border-radius: 999999px;\n    text-align: center;\n    overflow: hidden;\n    margin: 0 auto\n  }\n  .centric i{\n    color: #fff\n  }\n\n\n\n  .pt20{\n    padding-top: 20px; padding-bottom:20px\n  }\n  .pt70{\n    padding: 0 0 70px\n  }\n  .pt50{\n    padding: 50px 0\n  }\n  .plr30{\n    padding: 0 30px\n  }\n  .col-md-15{\n    width:20%\n     }\n  .first-row{\n    margin-bottom: 100px;\n  }\n  .class-content{\n    background: #ff7b73; padding-bottom: 70px\n  }\n  .student-content{\n    padding-bottom: 70px;\n  }\n  .market-content{\n    background: #424242; padding: 0 0 70px\n  }\n\n  .market-content .col-sm-4 .info{\n    background: #fff;\n    box-shadow: 0px 0px 3px 3px rgba(0,0,0,0.15);\n    padding: 30px;\n    height:180px\n  }\n  .second-row .col-md-4.col-sm-6.col-md-offset-1{\n    margin-left: auto;\n  }\n  .second-row .col-md-4.col-sm-6.col-md-offset-2{\n    margin-left: auto;\n  }\n  .second-row .col-md-4.col-sm-6.col-md-offset-4{\n    margin-left: auto;\n  }\n  .pt70 .row .col-sm-2 .language-index div.number{\n    font-size: 1.1rem;\n  }\n\n  @media (max-width:992px)and (min-width: 768px) {\n\n    .second-row .col-md-4.col-sm-6.col-md-offset-4 {\n      margin-left: 25%;\n    }\n  }\n\n\n  @media (max-width:1024px)and (min-width: 768px) {\n    .header-small {\n      display: block;\n      background: none;\n      box-shadow: none;\n    }\n    .market-content .col-sm-4 .info{\n      background: #fff;\n      box-shadow: 0px 0px 3px 3px rgba(0,0,0,0.15);\n      padding: 30px;\n      height:260px\n    }\n    .container.pt20 .text-lg{\n      font-size: 18px;\n    }\n    .language-index .info .language{\n      font-size: 20px;\n    }\n    .col-sm-3.second-row .number{\n      display: none;\n    }\n    .col-sm-2.col-md-15 .number{\n      display: none;\n    }\n    .first-row{\n      margin-bottom: 0;\n    }\n    .col-md-4.col-sm-6{\n      height: 250px;\n    }\n\n\n    .japanese-market-container-fix {\n      height: 330px !important;\n    }\n  }\n  @media (max-width:767px)and (min-width: 480px) {\n    .static-content{\n      width: 100%;\n      left: 0;\n      padding: 20px 0 0;\n      top: 0;\n      margin: 0;\n    }\n    .static-content h3 {\n      font-size: 22px;\n      padding: 0 20px;\n      line-height: 30px;\n    }\n    .static-content button{\n      margin-bottom: 0px;\n      width: 100%;\n    }\n    .static-content-bottom{\n      width: 100%;\n    }\n\n\n    .pt70 .row{\n      margin-left: 0;\n      margin-right: 0;\n    }\n    .pt70 .row .col-sm-4,.pt70 .row .col-sm-3,.pt70 .row .col-sm-2{\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n    .pt70 .row .col-sm-4 .panel,.pt70 .row .col-sm-3 .panel,.pt70 .row .col-sm-2 .panel{\n      background-position: 50% 40%!important;\n    }\n    .pt50 .text-slg{\n      font-size: 45px;\n    }\n    .header-small{\n      position: absolute;\n      background: #ff4338;\n      box-shadow: none;\n    }\n    .header-small i{\n      font-size: 24px;\n    }\n    .navbar-brand.logo{\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n    .col-md-2{\n      width: auto;\n    }\n    .col-md-15 {\n      width: auto;\n    }\n    .language-index{\n      margin-bottom: 0;\n    }\n    .language-index .info{\n      padding-top: 20px;\n      height: 90px;\n    }\n    .language-index div.number{\n      display: none;\n    }\n    .class-content{\n      padding-top:0px;\n    }\n    .student-content{\n      padding-top: 0px;\n      padding-bottom: 15px;\n    }\n    .student-content .col-md-4{\n      margin-bottom: 20px;\n    }\n    .student-content .container{\n      margin-left: 15px;\n      margin-right: 15px;\n    }\n    .student-content .container:first-child{\n      margin-left: 0;\n      margin-right: 0;\n    }\n    .first-row{\n      margin-bottom: 0;\n    }\n    .hp-language .dtp-picker-selector-link{\n      text-align: left;\n    }\n    .hp-language .dtp-picker-selector-link:after{\n      top: 50%;\n      content: "\\f105";\n      margin-top: -18px;\n    }\n    .visible-phone{\n      display: block!important;\n    }\n    }\n  @media (max-width: 480px) {\n    .language-index span.language{\n      font-size: 30px;\n      font-weight: bold\n    }\n    .language-index span.country{\n      font-size: 14px;\n      font-weight: bold\n\n    }\n    .static-content{\n      width: 100%;\n      left: 0;\n      padding: 20px 0 0;\n      top: 0;\n      margin: 0;\n    }\n    .static-content h1{\n      /*font-size:30px;*/\n      line-height:40px;\n      /*font-weight: bold;*/\n      margin-bottom: 50px;\n      letter-spacing: 1px;\n    }\n    .static-content h3 {\n      font-size: 16px;\n      padding: 0 20px;\n      line-height: 24px;\n      font-weight:400;\n    }\n    .static-content button{\n      margin-bottom: 0;\n      text-transform: inherit;\n      font-size: 15px;\n    }\n    .butt{\n        font-size: 15px;\n        padding: 20px 20px;\n        white-space:normal;\n    }\n    .static-content-bottom{\n      width: 100%;\n    }\n    .static-content-bottom .text-slg{\n      font-weight: 300;\n    }\n\n\n    .pt70 .row{\n      margin-left: 0;\n      margin-right: 0;\n    }\n    .pt70 .row .col-sm-4,.pt70 .row .col-sm-3,.pt70 .row .col-sm-2{\n      margin-bottom: 0;\n      padding-left: inherit;\n      padding-right: inherit;\n    }\n    .pt70 .row .col-sm-4 .panel,.pt70 .row .col-sm-3 .panel,.pt70 .row .col-sm-2 .panel{\n      background-position: 50% 40%!important;\n    }\n    .pt50 .text-slg{\n      font-size: 40px;\n    }\n    .class-content .text-slg{\n      font-size: 30px;\n    }\n    .class-content h3{\n      font-size: 22px;\n      font-weight: bold;\n    }\n    .class-content .text-lb{\n      font-size: 16px;\n    }\n    .student-content .text-slg{\n      font-size: 30px;\n    }\n    .student-content h3{\n      font-size: 20px;\n      font-weight: bold;\n    }\n    .student-content .text-lb{\n      font-size: 16px;\n    }\n    .student-content img{\n      width: 80px;\n    }\n    .static-content-bottom .text-slg{\n      font-size: 30px;\n      font-weight: bold;\n    }\n    .static-content-bottom button {\n      margin-bottom: 0;\n      text-transform: uppercase;\n      font-size: 18px;\n      padding: 20px 70px;\n      font-weight: bold;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n    }\n    .header-small{\n      position: absolute;\n      background: #ff4338;\n      box-shadow: none;\n    }\n    .header-small i{\n      font-size: 24px;\n    }\n    .navbar-brand.logo{\n      background: url(/static/svg/landing-logo.svg) no-repeat;\n      width: 73px;\n      height: 56px;\n      background-size: cover;\n      background-position: center;\n    }\n    .col-md-2{\n      width: auto;\n    }\n    .col-md-15 {\n    width: auto;\n    }\n    .language-index{\n      margin-bottom: 0;\n    }\n    .language-index .info{\n      padding-top: 20px;\n      height: 90px;\n    }\n    .language-index div.number{\n      display: none;\n    }\n    .class-content{\n      padding-top: 30px;\n    }\n    .text-slg{\n      font-size: 40px;\n    }\n    .student-content{\n      padding-top: 30px;\n      padding-bottom: 15px;\n    }\n    .student-content .col-md-4{\n      margin-bottom: 20px;\n    }\n    .student-content .container{\n      margin-left: 15px;\n    margin-right: 15px;\n    }\n    .student-content .container:first-child{\n      margin-left: 0;\n      margin-right: 0;\n    }\n    .user-bottom{\n      background-position-x: 60%;\n      padding: 200px 0 30px;\n      position: relative;\n    }\n    .first-row{\n      margin-bottom: 0;\n    }\n    .hp-language .dtp-picker-selector-link{\n      text-align: left;\n    }\n    .hp-language .dtp-picker-selector-link:after{\n      top:2.2rem;\n      content: "\\f105";\n    }\n  }\n\n  .landing-logo1{\n    display: block;\n    background: url(/static/svg/landing-logo.svg) no-repeat;\n    width: 73px;\n    height: 56px;\n    background-size: cover;\n    background-position: center;\n    }\n  .siteLang{\n    display: none;\n  }\n  @media (max-width: 767px)and (min-width: 480px) {\n    .siteLang{\n      display: initial;\n    }\n  }\n\n  /* background image */\n  .bg-shadow{\n    background: rgba(0,0,0,.5);;\n    position: absolute;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n\n  .hp-content.prime-bg {\n    width: 100%;\n    background: url(/static/images/static/referral_landing_bg11.jpg) no-repeat 0% 56px !important;\n    background-size: cover !important;\n    color: #fff;\n  }\n\n  .hp-content.normal-bg {\n    width: 100%;\n    background: url(/static/images/static/referral_landing_bg22.jpg) no-repeat 0% 56px !important;\n    background-size: cover !important;\n    color: #fff;\n  }\n\n  .hp-content.unregistered-bg{\n    width: 100%;\n    background: url(/static/images/static/referral_landing_bg3.jpg) no-repeat 50% 56px !important;\n    background-size: cover !important;\n    color: #fff;\n  }\n\n  .static-content h1{\n    font-size:42px;\n    line-height:50px;\n    font-weight: bold;\n    margin-bottom: 50px;\n    letter-spacing: 1px;\n  }\n\n  .prime-user .static-content{\n    max-width: 880px;\n  }\n\n  .normal-user .referral-text{\n    max-width: 700px;\n    margin: 0 auto;\n  }\n\n\n\n\n  .p70{\n    background: rgba(0,0,0,0.5);\n  }\n\n  .prime-bg .p70{\n    padding:320px 0 70px;\n  }\n\n  .normal-bg .p70 ,.unregistered-bg .p70{\n    padding: 200px 0 70px;\n  }\n\n  @media(min-width: 768px){\n    .normal-user .static-content{\n      min-height: 380px;\n    }\n\n    .unregistered-user .static-content{\n      min-height: 403px;\n    }\n  }\n\n\n  @media (max-width: 1024px) and (min-width: 768px){\n\n    .prime-bg .p70 ,.unregistered-bg .p70{\n      padding: 200px 0 70px;\n    }\n\n    .normal-bg .p70{\n      padding: 80px 0 70px;\n    }\n\n    .static-content{\n      width: 100%;\n      padding: 30px;\n    }\n\n\n\n  }\n\n  @media (max-width: 767px) and (min-width: 480px){\n\n\n    .prime-bg .p70 ,.unregistered-bg .p70{\n      padding:120px 0 0!important;\n    }\n\n    .normal-bg .p70{\n      padding:120px 0 0!important;\n    }\n  }\n\n  @media (max-width: 480px){\n\n    .static-content h1{\n      font-size: 26px;\n      line-height: 1.2;\n    }\n\n    .prime-bg .p70, .unregistered-bg .p70{\n      padding:90px 0 0!important;\n    }\n\n    .normal-bg .p70{\n      padding:90px 0 0!important;\n    }\n\n\n  }</style><div class="hp-content" ng-class="{&quot;normal-bg&quot;:userType==0&&currentUser,&quot;unregistered-bg&quot;:userType==0&&!currentUser,&quot;prime-bg&quot;:userType==1}"><nav class="navbar visible-desktop" role="navigation" style="z-index: 1;position: absolute;width: 100%;background: #ff4338;box-shadow: none;border: none;height: 56px" ng-controller="TopNavCtrl"><div style="padding-top: 0;padding-left: 16px;padding-right: 16px"><div class="navbar-header"><a class="landing-logo1" italki-go-home></a></div><style>.language-divider {\n          border-top: 1px solid #e5e5e5;\n          padding-top: 5px;\n          margin: 5px 0;\n          overflow: hidden;\n\n        }</style><span class="pull-right"><div class="pull-left is-relative" dropdown style="height:56px"><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link text-lb" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span class="visible-md-inline-block visible-lg-inline-block" style="font-weight: normal">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><a class="btn btn-outline btn-login text-up" ui-sref="signup" ng-show="userType==0&&!currentUser" style="height: 36px;font-size: 14px;margin: 10px 8px 10px 16px;font-weight: bold;\n                      color: #ff4338;background-color: white !important;padding: 10px 16px;border-radius: 2px">{{\'C0072\'|t}}</a></span></div></nav><nav class="navbar visible-phone header-small" role="navigation" ng-controller="TopNavCtrl" style="height: 56px;background-color: #FF4338"><div class="container" style="padding-top: 0;padding-left: 16px;padding-right: 0px"><div class="navbar-header" style="width: 100%"><div class="header-menu-small"><a class="navbar-brand logo" ui-sref="landing" style="margin-left: auto"></a> <span class="pull-right" style="height: 56px"><div class="pull-left is-relative" dropdown kp-toggle-slide-in><style>.dtp-picker-selector1-link:after{\n                              content: "";\n                            }</style><div class="party-size-picker dtp-picker-selector hp select-native dropdown-toggle dropdown" dropdown-toggle style="margin:0px;line-height: 56px"><a class="select-label dtp-picker-selector-link dtp-picker-selector1-link text-lb" tabindex="-1" style="background:none;font-weight: bold;height: 56px"><span style="font-weight: normal" class="visible-md-inline-block visible-lg-inline-block siteLang">{{\'KP461\'|t}}:&nbsp;</span> <span ng-bind="GlobalObject.lang.name"></span> <span class="fa fa-ii-expand-more" style="font-size: 24px;font-weight: bold;vertical-align: middle"></span></a></div><ul class="dropdown-menu top right" style="margin-bottom: 10px;-webkit-animation-duration: .2s;-moz-animation-duration: .2s;-o-animation-duration: .2s;animation-duration: .2s;-webkit-animation-fill-mode: both;-moz-animation-fill-mode: both;-o-animation-fill-mode: both;animation-fill-mode: both;-moz-animation-name: fadeInUp;-o-animation-name: fadeInUp;-webkit-animation-name: fadeInUp;animation-name: fadeInUp"><li ng-repeat="item in langArr" ng-class="{\'language-divider\':item.flag==\'cs\'}"><a href="" ng-bind="item.name" ng-click="useLang(item)"></a></li></ul></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" kp-toggle-slide-out style="padding: 0px;width: 56px;margin: 0px;height: 56px"><span class="sr-only">{{\'KP459\'|t}}</span> <i class="fa fa-bars"></i></button></span></div></div></div><nav class="nav-sm" role="navigation" ng-if="!currentUser"><div class="nav-bg" kp-toggle-slide-out></div><div class="nav-content panel text-white" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper"><div style="font-size: 14px;padding: 0px;color: #000000"><div class="row lab2" ui-sref="landing" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'M0001\'|t}}</span></div></div><div class="row lab2" ui-sref="signup" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0072\'|t}}</span></div></div><div class="row lab2" ui-sref="signin" kp-toggle-slide-out><div class="col-xs-12" style="margin: 0px;padding: 0px"><span>{{\'C0071\'|t}}</span></div></div><div class="row lab3" ui-sref="teachers" kp-toggle-slide-out><div class="col-xs-3" style="padding: 0px;margin:0px;width: 56px;height: 48px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;line-height: 48px"></span></div><div class="col-xs-9" style="padding: 0px;margin-bottom: 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div ng-class="{\'backgro\':isCommunity}"><div class="row" style="margin: 0px;height: 48px;padding: 12px 16px"><div class="col-xs-3" style="padding: 0px;width: 56px;margin: 0px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54"></span></div><div class="col-xs-9" style="padding: 0px;margin: 0px" ng-click="isCommunity = !isCommunity"><div><span>{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div></div></div><div class="row" collapse="!isCommunity" style="color:#777;width: 100%"><div class="col-xs-9" kp-toggle-slide-out style="float: right"><div style="line-height: 48px;height: 48px"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd;line-height: 48px;height: 48px"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white" ng-if="!currentUser" style="background: white;border-top: 2px solid rgba(0, 0, 0, 0.27)"><div class="nav-menu-wrapper" style="color: #000000;padding: 0px 16px"><style>ul > li > a {\n              color: #000000;\n            }</style><ul class="menu-group list-unstyled grid-gutter-margin-b" style="line-height: 48px;margin-bottom: 0px"><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="landing">{{\'M0001\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signup">{{\'C0072\'|t}}</a></li><li style="border-bottom: 1px solid #D9D9D9"><a ui-sref="signin">{{\'C0071\'|t}}</a></li></ul><div class="row" ui-sref="teachers" kp-toggle-slide-out style="height: 48px;border-bottom: 1px solid #d9d9d9"><div class="col-xs-3" style="width:56px;margin: 12px 0px 0px 0px"><span class="fa fa-ii-search" style="font-size: 24px;color: #FF4338;vertical-align: middle"></span></div><div class="col-xs-9" style="margin: 12px 0px 0px 0px"><span style="color: red">{{\'M0000\'|t}}</span></div></div><div class="row" ng-class="{\'backgro\':isCommunity}" style="height: 48px"><div class="col-xs-3" style="margin: 12px 0px 0px 0px;width: 56px"><span class="fa fa-ii-public" style="font-size: 24px;color: black;opacity: 0.54;vertical-align: middle"></span></div><div class="col-xs-9" ng-click="isCommunity = !isCommunity;" style="margin: 12px 0px 0px 0px"><span style="vertical-align: middle">{{\'M0114\'|t}}</span> <span ng-show="!isCommunity" class="fa fa-ii-expand-more" style="float: right;font-size: 24px"></span> <span ng-show="isCommunity" class="fa fa-ii-expand-less" style="float: right;font-size: 24px"></span></div></div><div class="row" collapse="!isCommunity"><div class="col-xs-3" style="width: 56px"></div><div class="col-xs-9" kp-toggle-slide-out style="padding-right: inherit"><div ng-class="{\'border-top\':!isCommunity}"><p ui-sref="article" translate="M0083" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="notebook.list" translate="M0078" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="question.list" translate="M0008" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="discussion.list" translate="M0031" style="margin:0px"></p></div><div style="border-top: 1px solid #dddddd"><p ui-sref="partner" translate="M0006" style="margin:0px"></p></div><div style="border-top: 1px solid #DDDDDD;line-height: 48px;height: 48px"><p ui-sref="languagehacking" translate="LH100"></p></div></div></div></div></div></nav><nav class="nav-sm" role="navigation" kp-toggle-slide-out style="display: none"><div class="nav-bg"></div><div class="nav-content panel text-white"><div class="nav-menu-wrapper"><div class=""><div class="nav-menu panel-body"><ul class="menu-group list-unstyled grid-gutter-margin-b"><li><a ui-sref="landing" class="link-mobile-menu">{{\'M0001\'|t}}</a></li><li><a ui-sref="signup" class="link-mobile-menu">{{\'C0072\'|t}}</a></li><li><a ui-sref="signin" class="link-mobile-menu">{{\'C0071\'|t}}</a></li></ul><a ui-sref="teachers" class="btn btn-warning btn-block grid-gutter-margin-b">{{\'M0000\'|t}}</a><h5 class="text-up" style="color: #888;font-size: 12px;border-bottom: 1px #888 solid;padding-bottom: 10px">{{\'M0114\'|t}}</h5><ul class="menu-group list-unstyled row-space-3"><li><a ui-sref="article" class="link-mobile-menu">{{\'M0083\'|t}}</a></li><li class=""><a ui-sref="notebook.list" class="link-mobile-menu">{{\'M0078\'|t}}</a></li><li class=""><a ui-sref="question.list" class="link-mobile-menu">{{\'M0008\'|t}}</a></li><li class=""><a ui-sref="discussion.list" class="link-mobile-menu">{{\'M0031\'|t}}</a></li><li class=""><a ui-sref="partner" class="link-mobile-menu">{{\'M0006\'|t}}</a></li><li><a ui-sref="languagehacking.list" translate="LH100"></a></li><li><a ui-sref="languagehacking" translate="LH100"></a></li></ul></div></div></div></div></nav></nav><div class="p70"><div ng-show="userType==0" class="normal-user"><div class="text-center static-content"><img ng-src="{{avatar_file_name|avatar:100}}" class="rounded" kp-fallback-avatar><div class="referral-text"><h1 class="text-up no-margin-b"><span ng-if="!currentUser">{{\'RP025\' |t | format:nickname}}</span> <span ng-if="currentUser">{{\'RP739\' |t | format:nickname}}</span></h1><h3 class="text-slim" style="margin-bottom: 40px"><span ng-if="!currentUser">{{\'KP463\'|t}}</span> <span ng-if="currentUser">{{\'RP740\'|t}}</span></h3></div><button class="btn btn-primary btn-lg" ng-click="clickGo(0)"><span ng-if="!currentUser">{{\'RP026\'|t}}</span> <span ng-if="currentUser">{{\'RP741\'|t}}</span></button></div></div><div ng-show="showModal&&userType==1" class="prime-user"><div class="text-center static-content" style="margin:0 auto"><h1 style="text-transform: capitalize;margin-bottom: 0px">{{\'RP742\'|t}}</h1><h1 style="margin-top: 0px">{{\'RP743\'|t}}</h1><button class="btn btn-primary btn-lg" ng-click="clickGo(1)">{{\'RP744\'|t}}</button></div></div></div></div><div style="background: #ffffff"><section class="pt70"><div ui-view class="container no-padding-t"><div class="text-center pt50"><p class="text-slg text-slim">{{\'KP467\'|t}} <span class="text-primary">{{\'C0027\'|t}}.</span></p></div><div class="row"><div class="col-sm-4 text-center"><p class="r"><img src="/static/images/static/icon_referral1.gif"></p><h4>{{\'RP027\'|t | format:nickname}}</h4></div><div class="col-sm-4 text-center"><p class="r"><img src="/static/images/static/icon_referral3.gif"></p><h4>{{\'RP028\'|t}}</h4></div><div class="col-sm-4 text-center"><p class="r"><img src="/static/images/static/icon_referral4.gif"></p><h4>{{\'RP029\'|t}}</h4></div></div></div><div ui-view class="container no-padding-t"><div class="row"><a ng-class="{\'col-sm-4\':item.c==4,\'col-sm-3\':item.c==3,\'col-sm-2\':item.c==2,\'second-row\':item.c==3,\'col-md-15\':item.c15}" ng-repeat="item in teachersBylan" style="cursor: default"><div class="panel no-border language-index trans_layout3" style="background-position: 50% 50%;background-repeat: no-repeat; width:100%" ng-style="{\'background-image\': \'url({{getimage(item)}})\'}"><div class="info"><span class="language" ng-bind="item.lan" style="text-transform: capitalize"></span> <span ng-if="item.ct" class="country">&nbsp;{{item.ctn}}</span><div class="number" ng-if="isLoaded" ng-hide="item.c==2&&!item.c15">{{item.p}} {{\'M0053\'|t}}<br>{{item.t}} {{\'KP468\'|t}}</div></div></div></a></div><div class="text-center" style="margin-top:35px"><h3>{{\'RP220\'|t}}</h3><div class="row" style="line-height: 25px"><div class="col-md-3 col-sm-6" style="margin-top: 27px"><span class="text-muted"><strong>{{\'RP221\'|t}}</strong><br>{{\'RP230\'|t}}</span></div><div class="col-md-3 col-sm-6" style="margin-top: 27px"><span class="text-muted"><strong>{{\'RP223\'|t}}</strong><br>{{\'RP224\'|t}}</span></div><div class="col-md-3 col-sm-6" style="margin-top: 27px"><span class="text-muted"><strong>{{\'RP225\'|t}}</strong><br>{{\'RP226\'|t}}</span></div><div class="col-md-3 col-sm-6" style="margin-top: 27px"><span class="text-muted"><strong>{{\'RP227\'|t}}</strong><br>{{\'RP228\'|t}}</span></div></div></div></div></section><div ng-include="\'/views/common/bottom.bs.html\'"></div></div>'),a.put("/views/search/search.html",'<div class="container-fluid"><div class="content"><div class="title"><h1>{{\'C3000\'|t}}</h1></div><div class="com_fliter"><input type="text" ng-model="q" class="text allwid" id="txt_search_key">&nbsp;<input type="button" id="btn_search" class="button" value="{{\'C0066\'|t}}" ng-click="search()"></div><div id="memberList"><div class="gridS margin30" ng-repeat="item in items track by item.id"><div class="col2"><div class="pic90"><a class="photo_90" href="TODO"><img ng-src="{{item.avatar_file_name|avatar:100}}" alt="{{item.nickname}}"></a></div></div><div class="col3"><span ng-class="{nn:item.is_online,nno:!item.is_online}" title="{{item.is_online?(\'C0038\'|t):(\'C0039\'|t)}}"><a class="nick_nn" href="TODO">{{item.nickname}}</a></span>&nbsp;<a href="{{PREMIUM_URL}}" class="aicon icon_pu" title="{{\'PU001\'|t}}" ng-show="item.is_premium&&!isTeacher(item)">&nbsp;</a><span ng-show="item.is_pro" class="aicon color-pro" title="{{\'TP003\'|t}}">&nbsp;</span><span ng-show="!item.is_pro&&item.is_tutor" class="aicon icon_tutor" title="{{\'TP004\'|t}}">&nbsp;</span><br><span class="text-muted">{{ item.gender == 2&&(\'C0012\'|t)||\'\' }} {{ item.gender == 1&&(\'C0013\'|t)||\'\' }} ,&nbsp; {{\'C0003\'|t}} {{item.origin_country_id}}</span><br><span ng-hide="!user_obj.living_country_id" class="author_txt">{{\'C0009\'|t}} {{item.living_country_id}}</span><p><a href="{{oet_x_url(user_obj.exam_result_shown_obj.url_id)}}" ng-show="item.exam_result_shown_obj&&[0,1].indexOf(item.exam_result_shown_obj.status)>-1"><span class="label oopt" title="{{\'HL401\'|t}}">OOPT</span></a> <span class="label oopt" title="{{\'HL401\'|t}}" ng-show="item.exam_result_shown_obj&&[0,1].indexOf(item.exam_result_shown_obj.status)==-1">OOPT</span></p></div><div class="col7"><span class="text-muted"><span ng-show="isTeacher(item)">{{\'C0118\'|t}}:{{ item|teachLanguage|t }}<br></span> <strong ng-bind-html="item|speakLanguage"></strong><br>{{\'C0007\'|t}}: <strong>{{ item|learnLanguage|t }}</strong></span><br><div class="status_area"><div class="thoughtbox" ng-hide="!item.intro"><div><div><div><div>{{item.intro}}</div></div></div></div></div></div></div></div></div><div id="peer_more" align="right" class="pagination" ng-show="meta.has_next"><ul><li><a id="a_peer_more" class="more_nn" href="javascript:void(0)">{{\'MH046\'|t}}</a></li></ul></div><kp-no-found items="items"></kp-no-found><div id="div-gpt-ad-1330062319383-0" class="ad_area"></div></div><div class="spacing"><div id="div-gpt-ad-1330062319383-1" class="ad_area"></div></div></div>'),a.put("/views/sessions/assert/messages.html",'<div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t" translate="TP038"></h4><kp-loading indicator="messages"></kp-loading><div class="grid-gutter-margin-b" ng-show="messages.length>0"><ul class="list-unstyled"><li ng-repeat="msg in messages"><span class="label" ng-class="isStudentSend(msg)?\'student\':\'teacher\'">{{ isStudentSend(msg)?(\'C0115\'|t):(\'C0122\'|t) }}</span>&nbsp;<span class="text-muted" am-time-ago="msg.create_time"></span><p style="word-wrap: break-word">{{ msg.content }}</p></li></ul></div><form name="session_message_form"><p><textarea class="form-control" placeholder="{{\'TP256\'|t}}" rows="5" ng-model="newMsg.content" required></textarea></p><span class="help-block" ng-show="newMsg.content.length>2000">{{\'ST024\'|t|format:2000}}</span><p><button type="submit" class="btn btn-primary with-spinner" italki-click-with-spinner="sendMessage()" stext="C0047" ng-disabled="false" ng-show="newMsg.content>0||newMsg.content.length<=2000"></button> <button type="submit" class="btn btn-primary with-spinner" italki-click-with-spinner="sendMessage()" stext="C0047" ng-disabled="true" ng-show="newMsg.content==null||newMsg.content.length>2000"></button></p></form></div></div>'),
a.put("/views/sessions/assert/operateHistory.html",'<div class="timeline"><kp-loading indicator="history"></kp-loading><div class="tl-entry" ng-repeat="item in history track by item.id"><div class="tl-time">{{ item.create_time_user|amDate:\'TF003\' }}</div><div class="panel tl-body">{{ history|sessionOperationDesc:$index:session }}</div></div></div>'),a.put("/views/sessions/assert/packageOperateHistory.html",'<div class="timeline"><kp-loading indicator="history"></kp-loading><div class="tl-entry" ng-repeat="item in history track by item.id"><div class="tl-time">{{ item.create_time_user|amDate:\'TF003\' }}</div><div class="panel tl-body">{{ history|packOperationDesc:$index:pack }}</div></div></div>'),a.put("/views/sessions/detail/session.has.problem.html",'<span class="text-muted">{{ \'C0136\'|t }}&nbsp;&raquo;&nbsp;<a ui-sref="session.explore">{{ \'M0047\'|t }}</a>&nbsp;&raquo;&nbsp;<a ui-sref="sessionDetail({sessionId:session.id})">{{ \'M0102\'|t }}&nbsp;({{ session.id }})</a>&nbsp;&raquo;&nbsp;<span class="current">{{ \'M0103\'|t }}&nbsp;({{ session.id }})</span></span><h3 translate="M0103"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first" style="width: 33%"><div>{{\'TS096\'|t}}</div></li><li class="{{session.navi.step==2?\'current\':\'\'}}" style="width: 34%"><div>{{\'TS097\'|t}}<div class="position" ng-if="session.navi.alert"><div class="alertbg" style="left: -160px"><span class="alert" ng-bind-html="session.navi.alert"></span></div></div></div></li><li class="last {{session.navi.step==3?\'current\':\'\'}}" style="width: 33%"><div>{{\'TS098\'|t}}</div></li></ul></div></div><div class="row" cg-busy="sessionActionPromise"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="session"></kp-loading><div class="panel-body no-padding-b" ng-hide="!session"><div class="grid-gutter-margin-b"><ul class="nav nav-pills"><li class="" ng-if="session.session_type==\'2\'"><a ui-sref="sessionPackageDetail({id:session.package_id})">{{\'M0101\'|t}}</a></li><li class=""><a ui-sref="sessionDetail({sessionId:session.id})">{{ \'M0102\'|t }}</a></li><li class="active"><a href=""><i class="fa fa-exclamation-circle"></i>&nbsp;{{\'M0103\'|t}}</a></li></ul></div><div class="note note-info no-border"><ul class="list-inline no-margin-b"><li><strong>{{\'TP026\'|t}}: <a ui-sref="sessionDetail({sessionId:session.id})">{{ session.id }}</a></strong></li><li><strong>{{\'TP091\'|t}}:</strong> <span class="label" ng-class="session.label.css" ng-bind="session.label.text"></span></li></ul></div></div><div class="panel-body widget-comments" ng-hide="!session"><div class="comment" ng-repeat="problem in problemList"><img ng-src="{{ problem.operater_obj|avatar:50 }}" kp-fallback-avatar alt="" class="comment-avatar"><div class="comment-body"><div class="comment-by"><a ng-click="navToUserOrTeacher(problem)">{{problem.operater_obj.nickname}}</a> {{problem.create_time_user|amDate:\'TF004\'}} <span class="label {{problem.labelCss}} pull-right">{{problem.labelName}}</span></div><div class="comment-text"><p ng-bind-html="problem.content"></p><ul ng-if="problem.hasDemand"><li><span>{{\'TP080\'|t}}: {{problem.demand}}</span></li><li><span>{{\'TP082\'|t}}: {{problem.reason}}</span></li><li ng-if="problem.explain"><span ng-bind-html="problem.explain"></span></li></ul></div></div></div><div ng-if="session.Desc" style="border:3px #ff4338 solid" class="panel-body"><p ng-bind-html="session.Desc"></p><div ng-if="session.next_status"><div class="grid-gutter-margin-b row"><div class="col-md-2"><input type="button" class="btn btn-primary btn-block" ng-value="\'C0057\'|t" ng-click="accept()"></div><div class="col-md-10">{{\'TP440\'|t}}:<ul><li ng-bind-html="desc" ng-repeat="desc in session.acceptDesc"></li></ul></div></div><div class="grid-gutter-margin-b row"><div class="col-md-2"><input type="button" class="btn btn-block" ng-value="\'C0058\'|t" ng-click="decline()"></div><div class="col-md-10">{{\'TP440\'|t}}:<ul><li ng-bind-html="desc" ng-repeat="desc in session.declineDesc"></li></ul></div></div></div></div></div></div></div><div class="col-md-3"><div kp-session-message session="session"></div></div></div>'),a.put("/views/sessions/detail/session.html",'<span class="text-muted">{{ \'C0136\'|t }}&nbsp;&raquo;&nbsp;<a ui-sref="session.explore">{{ \'M0047\'|t }}</a>&nbsp;&raquo;&nbsp; <span class="current">{{ \'M0102\'|t }}&nbsp;({{ session.id }})</span></span><h3 translate="M0102"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first" ng-class="{current:currentStatus[0]}"><div>{{\'TS092\'|t}}<div class="position" ng-if="currentStatus[0]"><div class="alertbg"><span class="alert" ng-bind-html="session.navi_alert" ng-if="session.navi_alert"></span></div></div></div></li><li ng-class="{current:currentStatus[1]}"><div>{{\'TS093\'|t}}<div class="position" ng-if="currentStatus[1]"><div class="alertbg"><span class="alert" ng-bind-html="session.navi_alert" ng-if="session.navi_alert"></span></div></div></div></li><li ng-class="{current:currentStatus[2]}"><div>{{\'TS094\'|t}}<div class="position" ng-if="currentStatus[2]"><div class="alertbg"><span class="alert" ng-bind-html="session.navi_alert" ng-if="session.navi_alert"></span></div></div></div></li><li class="last" ng-class="{current:currentStatus[3]}"><div>{{\'TS095\'|t}}</div></li></ul></div></div><div class="row" cg-busy="sessionActionPromise"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="session"></kp-loading><div class="panel-body" ng-hide="!session" style="border-bottom: 1px #eee solid"><div class="grid-gutter-margin-b" ng-if="session.problem_reason"><ul class="nav nav-pills"><li class="" ng-if="session.session_type==\'2\'"><a ui-sref="sessionPackageDetail({id:session.package_id})">{{\'M0101\'|t}}</a></li><li class="active" ng-if="session.problem_reason!=0"><a href="javascript:void(0);">{{ \'M0102\'|t }}</a></li><li class="" ng-if="session.problem_reason!=0"><a ui-sref="sessionProblemDetail({sessionId:session.id})"><i class="fa fa-exclamation-circle"></i>&nbsp;{{\'M0103\'|t}}</a></li></ul></div><div class="note note-info no-border no-margin-b"><div><ul class="list-inline"><li><strong>{{\'TP026\'|t}}: {{ session.id }}</strong></li><li ng-bind-html="session.label"></li></ul></div><p kp-dynamic="session.status_body"></p><div kp-dynamic="session.op_html"></div></div></div><div class="panel-body" ng-hide="!session" style="border-bottom: 1px #eee solid"><div class="visible-phone"><p><span>{{\'TS030\'|t}}</span><br><strong class="text-bg" ng-class="{delline:session.status!=\'3\'&&session.new_session_start_time}">{{ session.session_start_time_user|amDate:\'TF004\'}} {{ session.session_start_time_user_tz }}</strong><br><span class="text-danger" ng-if="session.status!=\'3\'&&session.new_session_start_time">({{ "TP365"|t }})</span></p><p><span>{{ session.user_type==\'1\'?(\'C0122\'|t):(\'C0115\'|t) }}</span><br><a ng-click="navToUserOrTeacher()"><strong>{{session.oppo_user_obj.nickname}}</strong></a></p><div class="grid-gutter-margin-b"><span>{{\'TP041\'|t}} / {{\'TP035\'|t}}</span><br><div ng-switch="session.session_type"><div ng-switch-when="3"><strong>{{\'TS026\'|t}}</strong>&nbsp;<span class="label free">{{\'TS040\'|t}}</span></div><div ng-switch-when="4"><strong>{{\'TS047\'|t}}:&nbsp;{{ session.learn_language|t }}</strong></div><div><strong>{{ session|sessionCourseTitle }}</strong></div></div><span class="label package" ng-if="session.session_type==\'2\'"><a>{{\'TS038\'|t}}</a></span></div><p ng-if="session.session_type!=\'3\'">{{\'TP046\'|t}}<br><strong>{{ session.learn_language|t }}</strong></p><p><span>{{\'TP081\'|t}}</span><br><strong>{{ (\'TS011\'|t)|format:(15*session.session_duration) }}</strong></p><p><span>{{ (session.session_type==\'2\'?\'TP037\':\'TP008\')|t }}</span><br><strong ng-if="session.session_type==\'2\'">{{ session.package_id }}</strong> <strong ng-if="session.session_type!=\'2\'" ng-class="{red12:session.new_itc_usd}">${{(session.session_price_usd|kpToUsd|number:2) +\'&nbsp;USD\' }}<br>{{ session.new_itc_usd?\'(\'+ (\'TP364\'|t) +\')\':\'\' }}<br></strong></p></div><div class="visible-desktop"><table class="table"><tbody><tr><td valign="top" class="no-border"><strong class="text-bg" ng-class="{delline:session.status!=\'3\'&&session.new_session_start_time}">{{ session.session_start_time_user|amDate:\'TF004\'}}</strong><br><span class="text-danger" ng-if="session.status!=\'3\'&&session.new_session_start_time">({{ "TP365"|t }})</span><p class="text-muted no-margin-b">{{\'TS030\'|t}} ({{ session.session_start_time_user_tz }})</p></td><td valign="top" class="no-border"><strong class="text-bg">{{ (\'TS044\'|t)|format:(15*session.session_duration) }}</strong><p class="text-muted no-margin-b">{{\'TP081\'|t}}</p></td><td valign="top" class="no-border" ng-if="session.session_type!=\'3\'"><strong class="text-bg">{{ session.learn_language|t }}</strong><p class="text-muted no-margin-b">{{\'TP046\'|t}}</p></td></tr><tr><td valign="top" class="no-border"><span ng-switch="session.session_type"><span class="text-bg" ng-switch-when="4">{{\'TS047\'|t}}:&nbsp;{{ session.learn_language|t }}</span> <span class="text-bg" ng-switch-default>{{ session|sessionCourseTitle }}&nbsp;</span></span> <a href="/lesson/package/{{session.package_id}}" ng-if="session.session_type==\'2\'"><span class="label package">{{\'TS038\'|t}}</span></a><p class="text-muted no-margin-b">{{\'TP041\'|t}} / {{\'TP035\'|t}}</p></td><td valign="top" class="no-border"><a class="text-bg" ng-click="navToUserOrTeacher()" href="javascript:void(0);">{{session.oppo_user_obj.nickname}}</a><p class="text-muted no-margin-b">{{ session.user_type==\'1\'?(\'C0122\'|t):(\'C0115\'|t) }}</p></td><td valign="top" class="no-border" nowrap="nowrap"><span ng-if="session.session_type!=\'2\'" class="text-bg" ng-class="{\'text-danger\':session.new_itc_usd}">${{(session.session_price_usd|kpToUsd|number:2) +\'&nbsp;USD\' }} {{ session.new_itc_usd?\'(\'+ (\'TP364\'|t) +\')\':\'\' }}</span> <span ng-if="session.session_type==\'2\'" class="text-bg"><a href="/lesson/package/{{session.package_id}}" ng-if="session.session_type==\'2\'">{{session.package_id}}</a></span><p class="text-muted no-margin-b">{{ (session.session_type==\'2\'?\'TP037\':\'TP008\')|t }}</p></td></tr></tbody></table></div><div id="AgreementID"><div class="row"><div class="col-md-12"><div class="panel panel-theme widget-profile" ng-show="session.im_type == \'Z\'"><div class="panel-heading"><strong class="no-margin">{{\'TP010\'|t}}</strong></div><div class="panel-body"><span><span class="italki-logo-square v-middle mr10"></span> <span class="text-bg theme-color v-middle border-right text-slim">italki Classroom</span> <span class="split-line"></span> <span class="label theme-label v-middle">{{\'RTC102\'|t}}</span></span><div kp-go-classroom session-obj="session" class="btn panel-right-btn text-up" ng-class="{\'btn-primary-new\':!(session.session_start_time|waitMinutes:(15*session.session_duration)),\'btn-outline-primary\':(session.session_start_time|waitMinutes:(15*session.session_duration))}">{{(session.session_start_time|waitMinutes:(15*session.session_duration))?\'RTC101\':\'RTC100\'|t}}</div></div></div><div class="panel panel-info widget-profile" ng-hide="session.im_type == \'Z\'"><div class="panel-heading padding-sm"><div class="widget-profile-header"><strong class="no-margin">{{\'TS028\'|t}} / {{\'ST750\'|t}}</strong></div></div><div class="widget-profile-counters hidden-phone"><div class="col-xs-2"><img ng-src="/static/images/imicons/ic_{{ getIMType()|lowercase }}.png"></div><div class="col-xs-5"><span><strong class="text-lb" ng-if="session.teacher_im_account!=\'***\'">{{ session.teacher_im_account }}</strong> <strong class="text-lb" title="{{\'TP177\'|t}}" ng-if="session.teacher_im_account==\'***\'">{{ session.teacher_im_account }}</strong></span><br>{{\'TP043\'|t}}</div><div class="col-xs-5"><span><strong class="text-lb" ng-if="session.student_im_account!=\'***\'">{{ session.student_im_account}}</strong> <strong class="text-lb" title="{{\'TP177\'|t}}" ng-if="session.student_im_account==\'***\'">{{ session.student_im_account }}</strong></span><br>{{\'TP067\'|t}}</div><div style="clear: both; padding: 0"></div></div><div class="widget-profile-counters1 visible-phone"><div class="col-xs-12" style="border-bottom: 1px solid #e4e4e4"><img ng-src="/static/images/imicons/ic_{{ getIMType()|lowercase }}.png"></div><div class="col-xs-12" style="border-bottom: 1px solid #e4e4e4"><span><strong class="text-lb">{{session.teacher_im_account }}</strong></span><br>{{\'TP043\'|t}}</div><div class="col-xs-12"><span><strong class="text-lb">{{ session.student_im_account }}</strong></span><br>{{\'TP067\'|t}}</div><div style="clear: both; padding: 0"></div></div></div></div></div></div></div><div class="panel-body" ng-hide="session.status!=\'F\'&&session.status!=\'G\'"><h4 translate="TP077"></h4><div class="grid-gutter-margin-b"><p><span class="label teacher" translate="C0122"></span>&nbsp;<span ng-bind="session.teacher_comment||\'No review yet\'"></span></p><p><span class="label student" translate="C0115"></span>&nbsp;<span ng-bind="session.student_comment||\'No review yet\'"></span></p></div></div><div class="panel-body" ng-hide="!session" style="border-bottom: 1px #eee solid"><h4>{{ \'TP052\'|t }}</h4><div class="grid-gutter-margin-b"><kp-session-history session="session"></kp-session-history></div></div></div></div><div class="col-md-3"><div kp-session-message session="session"></div><div class="panel no-border panel-dark" ng-show="isCN()"><div class="panel-body"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div>'),a.put("/views/sessions/detail/session.package.html",'<span class="text-muted">{{ \'C0136\'|t }}&nbsp;&raquo;&nbsp;<a ui-sref="session.package">{{ \'M0076\'|t }}</a>&nbsp;&raquo;&nbsp; <span class="current">{{ \'M0101\'|t }}&nbsp;({{ pack.id }})</span></span><h3 translate="M0101"></h3><div class="row" cg-busy="sessionActionPromise"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="pack"></kp-loading><div class="panel-body" ng-hide="!pack" style="border-bottom: 1px #eee solid"><div class="note note-info no-border no-margin-b"><p><strong><span translate="M0076"></span> ID:<span ng-bind="pack.id"></span> <span ng-bind-html="pack.label"></span></strong></p><p ng-bind-html="pack.status_body"></p><p kp-dynamic="pack.op_html"></p></div></div><div class="panel-body" ng-hide="!pack" style="border-bottom: 1px #eee solid"><div class="grid-gutter-margin-b"><div class="visible-phone"><p><strong>{{\'TP041\'|t}} / {{\'TP035\'|t}}</strong><br>{{ pack|sessionCourseTitle}}</p><p><strong>{{\'TP132\'|t}}</strong><br>{{ pack.sessions_total }}</p><p><strong>{{\'TP081\'|t}}</strong><br>{{ (\'TS011\'|t)|format:(15*pack.session_duration) }}</p><p><strong>{{\'TP087\'|t}}</strong><br>${{ pack.package_price_usd|kpToUsd|number:2}} USD</p></div><div class="visible-desktop"><table class="table"><tbody><tr><td valign="top" class="no-border"><a class="text-bg" ng-click="navToUserOrTeacher()"><strong>{{pack.oppo_user_obj.nickname}}</strong></a><br><p class="text-muted no-margin-b">{{ pack.user_type==\'1\'?(\'C0122\'|t):(\'C0115\'|t) }}</p></td><td valign="top" class="no-border"><span class="text-bg"><strong>{{ pack|sessionCourseTitle }}</strong></span><p class="text-muted no-margin-b">{{\'TP041\'|t}} / {{\'TP035\'|t}}</p></td><td valign="top" class="no-border"><span class="text-bg"><strong>{{ pack.sessions_total }}</strong></span><p class="text-muted no-margin-b">{{\'TP132\'|t}}</p></td><td valign="top" class="no-border"><span class="text-bg"><strong>{{ (\'TS011\'|t)|format:(15*pack.session_duration) }}</strong></span><p class="text-muted no-margin-b">{{\'TP081\'|t}}</p></td><td valign="top" class="no-border"><span class="text-bg"><strong>${{ pack.package_price_usd|kpToUsd|number:2}} USD</strong></span><p class="text-muted no-margin-b">{{\'TP087\'|t}}</p></td></tr></tbody></table></div></div><div class="row"><div class="col-md-12"><div class="panel panel-theme widget-profile" ng-show="pack.im_type == \'Z\'"><div class="panel-heading"><strong class="no-margin">{{\'TP010\'|t}}</strong></div><div class="panel-body"><span><span class="italki-logo-square v-middle mr10"></span> <span class="text-bg theme-color v-middle border-right">italki Classroom</span> <span class="split-line"></span> <span class="label theme-label v-middle">{{\'RTC102\'|t}}</span></span></div></div><div class="panel panel-info widget-profile" ng-hide="pack.im_type == \'Z\'"><div class="panel-heading padding-sm"><div class="widget-profile-header"><strong class="no-margin">{{\'TS028\'|t}} / {{\'ST750\'|t}}</strong></div></div><div class="widget-profile-counters"><div class="col-xs-2"><img ng-src="/static/images/imicons/ic_{{ pack.im_type|im|lowercase }}.png"></div><div class="col-xs-5"><strong class="text-lb"><span ng-if="pack.teacher_im_account!=\'***\'">{{ pack.teacher_im_account }}</span></strong> <strong class="text-lb"><span title="{{\'TP177\'|t}}" ng-if="pack.teacher_im_account==\'***\'">{{ pack.teacher_im_account }}</span></strong><br>{{\'TP043\'|t}}</div><div class="col-xs-5"><strong class="text-lb" ng-if="pack.student_im_account!=\'***\'"><span>{{ pack.student_im_account }}</span></strong> <strong class="text-lb" title="{{\'TP177\'|t}}" ng-if="pack.student_im_account==\'***\'"><span>{{ pack.student_im_account }}</span></strong><br>{{\'TP067\'|t}}</div><div style="clear: both; padding: 0"></div></div></div></div></div><div ng-if="\'124\'.indexOf(pack.status)==-1" class="grid-gutter-margin-b"><h4>{{\'TS027\'|t}}</h4><div class="note note-info no-border"><ul class="list-inline no-margin-b"><li><strong>{{ ("TS214"|t)|format:pack.sessions_total }}</strong></li><li><span>{{("TS227"|t)|format:scheduledCount }}</span></li><li>{{ (\'TS213\'|t)|format:newRequestCount }}</li><li><span>{{ (\'TS216\'|t)|format:notScheduledCount }}</span></li></ul></div><div class="panel-group"><div class="panel" ng-repeat="session in validList"><div class="panel-body"><div class="row"><span class="col-sm-1 text-xlg text-center">{{ $index+1 }}</span> <span class="col-sm-7"><span class="text-lb" ng-bind-html="session.time_html|unsafe"></span><br><span class="text-muted">{{\'TP026\'|t}}: {{session.session_id}}</span>&nbsp;<a ui-sref="sessionDetail({\'sessionId\':session.session_id})" ng-if="[\'5\',\'F\',\'C\',\'B\',\'7\'].indexOf(pack.status)>-1">{{\'C0060\'|t}}</a></span> <span class="col-md-4 text-right"><span ng-bind-html="session.status_html"></span><ul class="list-inline" style="margin-top: 10px"><li class="no-padding" ng-if="session.status==\'0\'&&pack.status==\'5\'&&pack.user_type==2"><button class="btn btn-primary btn-sm" ng-click="accept(session)">{{ \'C0057\'|t }}</button>&nbsp;&nbsp;</li><li class="no-padding" ng-if="session.status==\'0\'&&pack.status==\'5\'&&pack.user_type==2"><button type="button" href="javascript:void(0);" ng-click="decline(session)" class="btn btn-link btn-sm">{{ \'C0058\'|t }}</button></li></ul></span></div></div></div><div class="panel" ng-repeat="session in addList"><div class="panel-body"><div class="row"><span class="col-sm-1 text-xlg text-center">{{ scheduledCount+newRequestCount+ $index+1 }}</span> <span class="col-sm-11 text-lb">{{\'TS223\'|t}}<br><a class="btn btn-sm btn-primary" ng-click="schedule()">{{\'TS108\'|t}}</a></span></div></div></div><div class="panel bg-info2" ng-repeat="session in invalidList"><div class="panel-body"><div class="row"><span class="col-sm-1 text-xlg text-center">x</span><div class="col-sm-9"><span class="task-title text-lb">{{session.time_html|unsafe}}</span><br><span class="text-muted">{{\'TP026\'|t}}: {{session.session_id}}</span></div><span class="col-sm-2" ng-bind-html="session.status_html"></span></div></div></div></div><p class="text-right"><a href="http://support.italki.com/hc/en-us/articles/206352348" target="_blank"><i class="fa fa-question-circle" style="white-space: nowrap" tooltip="{{\'TP174\'|t}}"></i></a> &nbsp; <a href="" package-next-status="C" ng-hide="!canCancelPackage">{{\'TP125\'|t}}</a></p></div><div class=""><h4 translate="TP052"></h4><kp-session-package-history pack="pack"></kp-session-package-history></div></div></div></div><div class="col-md-3"><a name="messages"></a><div kp-session-message session="pack" type="package"></div><div class="panel no-border panel-dark" ng-show="isCN()"><div class="panel-body"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div>'),a.put("/views/sessions/directives/calendar.data.html",'<div class="fc-view fc-view-month fc-grid" style="position:relative"><table class="fc-border-separate" style="width:100%" cellspacing="0"><thead><tr class="fc-first fc-last"><th class="fc-day-header fc-widget-header" style="width: 14%" ng-repeat="d in week track by $index" ng-class="{\'fc-first fc-sun\':$index==0,\'fc-mon\':$index==1,\'fc-tue\':$index==2,\'fc-wed\':$index==3,\'fc-thu\':$index==4,\'fc-fri\':$index==5,\'fc-sat\':$index==6,\'fc-last\':$last}"><span ng-bind="d.day.clone().locale(momentLan).format(\'ddd\')"></span>&nbsp;&nbsp; <span ng-if="!isMonth()" class="text-normal">{{d.day.clone().locale(momentLan).format(\'MMM D\')}}</span></th></tr></thead><tbody><tr class="fc-week" ng-repeat="w in weeks track by $index" ng-class="{\'fc-first\':$index==0,\'fc-last\':$last}"><td class="fc-day fc-sun fc-widget-content fc-past" ng-repeat="d in w track by $index" ng-class="{\'fc-first fc-sun\':$index==0,\'fc-mon\':$index==1,\'fc-tue\':$index==2,\'fc-wed\':$index==3,\'fc-thu\':$index==4,\'fc-fri\':$index==5,\'fc-sat\':$index==6,\'fc-last\':$last,\'today\':d.t,\'pastsession\':d.lt,\'pastday\':showObject.show==0&&d.day.month()!=showObject.monthNumber}"><div style="min-height: 119px"><div class="fc-day-number" ng-if="isMonth()">{{d.day.date()}}</div><div class="fc-day-content"><div><div class="stat-panel yes-cursor" style="margin-bottom: 10px" ng-repeat="item in d.sessionData" ui-sref="sessionDetail({sessionId:item.sid})"><div class="stat-row"><div class="stat-cell no-padding text-center" ng-class="{\'bg-info\':item.c==1,\'bg-default\':item.c==2,\'bg-success\':item.c==3,\'bg-success\':item.c==4,\'bg-danger\':item.c==5}"><strong>{{changeAM(item.s)}}&nbsp;-&nbsp;{{changeAM(item.e)}}</strong> <small ng-bind="item.AP" ng-if="showObject.is_am==1"></small></div></div><div class="stat-row"><div class="bordered no-border-t text-center text-bg"><span ng-bind="item.oppo_user_obj.nickname" ng-if="!item.ist"></span> <span ng-bind="item.oppo_user_obj.nickname" ng-if="item.ist"></span></div></div></div></div></div></div></td></tr></tbody></table></div>'),a.put("/views/sessions/directives/classroom.html",'<div class="session-request-content"><div><span class="italki-logo-square v-middle"></span> <span class="classroom-name text-bg theme-color v-middle">italki Classroom</span> <span class="classroom-label label theme-label v-middle">{{\'RTC102\'|t}}</span></div><div class="classroom-des"><h5 class="classroom-des-title">{{\'RTC236\'|t}}</h5><p>{{\'RTC237\'|t}}{{\'RTC238\'|t}}</p><h5 class="classroom-des-title">{{\'RTC239\'|t}}</h5><p>{{\'RTC240\'|t}}</p><ul class="list-inline" style="margin-top: 24px"><li style="padding-right: 20px"><img src="/static/images/static/logo_chrome.png" width="48" height="49"><p class="text-muted text-center">{{\'RTC103\'|t}}</p></li><li style="padding-right: 20px"><img src="/static/images/static/logo_firefox.png" width="48" height="49"><p class="text-muted text-center">{{\'RTC104\'|t}}</p></li><li><img src="/static/images/static/logo_ie.png" width="48" height="49"><p class="text-muted text-center">{{\'RTC105\'|t}}</p></li></ul></div><hr></div>'),a.put("/views/sessions/directives/month.week.calendar.html",'<div class="session-list panel loading-layout no-border-t"><style>td > ul >li{\n          width: 100%;\n        }</style><div class="panel-body"><div id="calendar" class="vertical-box-column p-15 calendar fc fc-ltr table-responsive"><kp-loading indicator="showObject.getDataFlag"></kp-loading><table class="header" style="width:100%"><tbody><tr><td class="fc-header-left"><ul class="list-inline"><li><span class="btn btn-sm" ng-click="todayFn()">{{\'KP529\'|t}}</span></li><li><span class="btn btn-sm" ng-click="prevData()"><i class="fa fa-angle-left text-sm"></i></span> <span class="btn btn-sm" ng-click="nextData()"><i class="fa fa-angle-right text-sm"></i></span></li><li></li></ul></td><td class="fc-header-center"><span class="fc-header-title"><h4 class="no-margin-t">{{showObject.showTitle}}</h4></span></td><td class="fc-header-right"><ul class="list-inline"><li><button class="btn btn-sm" ng-class="{\'active\':!showObject.show}" ng-click="showWeekMonth(0)">{{\'AS404\'|t}}</button> <button class="btn btn-sm" ng-class="{\'active\':showObject.show}" ng-click="showWeekMonth(1)">{{\'AS405\'|t}}</button></li><li><span class="btn btn-sm" ng-click="getiCalendarFeed()">{{\'SM100\'|t}}</span></li></ul></td></tr></tbody></table><div class="fc-content" style="position: relative"><kp-calendar-data show-object="showObject" ng-if="showObject"></kp-calendar-data></div></div></div><p class="des_txt">{{\'PB017\'|t}} <span class="my-time"><span>{{mytime}}</span></span>? {{\'ST249\'|t}} <a ui-sref="setting.account">{{\'TP123\'|t}}</a></p></div>'),a.put("/views/sessions/directives/ngStep.html","<div><div ng-transclude></div></div>"),a.put("/views/sessions/directives/ngSteps.html","<div ng-transclude></div>"),a.put("/views/sessions/directives/schedule.details.html",'<div ng-show="model.selectedLanguage" class="slide"><div class="summary-detail-block row" id="summary-duration"><div class="col-md-12 summary-detail-title">{{\'AS401\'|t}}</div><div class="col-md-12 summary-detail-desc text-capital">{{model.selectedLanguage | t}}</div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title text-capital">{{\'PM444\'|t}}</div><div class="col-md-12 summary-detail-desc">{{ getLessonDuration() }} min / lesson</div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-show="model.selectedTimes.length > 0" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title text-capital">{{\'PM446\'|t}}</div><div ng-repeat="time in model.selectedTimes" class="col-md-12 summary-detail-desc margin-b5"><div class="summary-period-date">{{ time.date | amDate:\'TF016\' }}</div><div>{{ time.date | amDate:\'TF015\' }} - {{ time.date | amAdd: getLessonDuration() | amDate:\'TF015\'}}</div></div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-if="!model.classRoom"><div ng-show="model.student_im_account" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'TP010\'|t}}</div><div class="col-md-12 summary-detail-desc"><div ng-switch="model.im_type"><span ng-switch-when="1">Skype</span> <span ng-switch-when="6">Google Hangouts</span> <span ng-switch-when="7">QQ</span> <span ng-switch-when="8">FaceTime</span> <span ng-switch-when="9">Wechat</span></div><div id="summary-communication-id">{{ model.student_im_account }}</div></div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div></div><div ng-if="model.classRoom"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'TP010\'|t}}</div><div class="col-md-12 summary-detail-desc"><span class="text-bg v-middle mr10">italki Classroom</span> <span class="label theme-label v-middle">{{\'RTC102\'|t}}</span></div></div><div class="row summary-detail-divider-row"><div class="col-md-12 summary-detail-divider"></div></div></div><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row summary-price"><div class="col-md-12 summary-detail-title">{{\'TP009\'|t}}</div><div class="col-md-12 summary-detail-desc"><div class="row summary-price-row"><div class="col-md-7" class="summary-price-base-title" ng-if="getNumberLessons() == 1">1 {{\'TP042\'|t}}</div><div class="col-md-7" class="summary-price-base-title" ng-if="getNumberLessons() > 1">{{\'TP176\'|t|format:getNumberLessons()}}</div><div class="col-md-5 text-right" class="summary-price-base-cost text-right">$ {{ getNumberLessonsCost()|kpToUsd|number:2 }} USD</div></div><div ng-show="model.isPackage" class="row summary-price-row slide"><div class="col-md-7"></div><div class="col-md-5 text-right" id="summary-price-offer-cost"><span class="summary-price-offer-save" ng-show="model.save > 0">{{\'TS714\'|t|format:model.save}}</span></div></div></div></div><div class="row summary-detail-divider-row"><div class="col-md-12 summary-detail-divider"></div></div></div><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row summary-confirmation"><div class="col-md-6 summary-confirmation-balance"><div class="summary-detail-title">{{\'TS057\'|t}}</div><div class="summary-detail-desc">$ {{ model.available_itc_usd|kpToUsd|number:2 }} USD</div></div><div class="col-md-6 summary-confirmation-subtotal"><div class="summary-detail-title">{{\'VC420\'|t}}</div><div class="summary-confirmation-subtotal-price">$ {{ getNumberLessonsCost()|kpToUsd|number:2 }} USD</div><div class="summary-confirmation-subtotal-converted">≈ <span ng-bind="(getNumberLessonsCost()*model.currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{model.currentUser.currency}}</div></div></div></div>'),a.put("/views/sessions/directives/schedule.divider.html",'<div class="row summary-detail-divider-row"><div class="col-md-12 summary-detail-divider"></div></div>'),a.put("/views/sessions/directives/schedule.step.five.html",'<ng-form name="stepFive" novalidate><div class="schedule-dropdown-block row schedule-confirmation"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }"><span>{{number}}</span> . {{\'TS705\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content schedule-confirmation col-md-10 slide"><div class="schedule-dropdown-subheading margin-b10">{{\'C0079\'|t}} ({{\'C0043\'|t}})</div><div class="display-desktop"><div class="schedule-dropdown-small-desc schedule-confirmation-optional-text"><div>{{\'TS718\'|t}} {{\'TS719\'|t}} {{\'TS720\'|t}}</div></div><div><textarea ng-model="model.msg" class="form-control" rows="4"></textarea></div></div><div class="display-phone"><a ng-if="message.show == false" ng-click="message.show = true" class="dis-block">+ {{\'TS723\'|t}}</a><div ng-init="message.show = false" ng-show="message.show == true"><div class="schedule-dropdown-small-desc schedule-confirmation-optional-text"><div>{{\'TS718\'|t}} {{\'TS719\'|t}} {{\'TS720\'|t}}</div></div><div><textarea ng-model="model.msg" class="form-control" rows="4"></textarea></div></div></div><div class="schedule-confirmation-confirm-price"><div class="schedule-dropdown-subheading margin-b20">{{\'TS037\'|t}}</div><div class="clearfix schedule-confirmation-confirm-balance"><div class="pull-left"><div class="schedule-confirmation-confirm-balance-label">{{\'TS057\'|t}}</div></div><div class="pull-right"><div ng-class="notEnoughBalance()" class="schedule-confirmation-confirm-balance-price">${{ model.available_itc_usd|kpToUsd|number:2 }} USD</div></div></div><div class="clearfix schedule-confirmation-confirm-cost"><div class="pull-left"><div class="schedule-confirmation-confirm-cost-label">{{\'TS059\'|t}}</div></div><div class="pull-right"><div class="schedule-confirmation-confirm-cost-price">${{ model.total|kpToUsd|number:2 }} USD</div></div></div></div><div class="schedule-confirmation-confirm-password"><div class="schedule-confirmation-confirm-password-label">{{\'UR057\'|t}}*</div><div class="password-input"><input class="form-control" type="{{model.inputType}}" placeholder="{{\'ST229\'|translate}}" ng-maxlength="20" ng-model="model.pwd" name="pwd" ng-pattern="example.word" required ng-trim="false"> <i class="fa fa-lock form-control-feedback" style="float: right; top: -23px; right: 10px; position:relative"></i> <span ng-if="(submitFlag||stepFive.pwd.$dirty) && stepFive.pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span></div><div class="form-group w-icon" ng-hide="!error"><div ng-if="error.type!=\'PaymentAccountDisabled\'" class="alert alert-warning animated shake" ng-bind="error.msg"></div><div ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning animated shake">{{\'KP305\'|t}} {{\'KP306\'|t}}</div></div></div><div class="schedule-confirmation-confirm-tos schedule-dropdown-small-desc">*<span ng-bind-html="\'TS222\'|t"></span></div><div class="schedule-dropdown-next-row"><button ng-disabled="stepFive.$invalid" step-finish ng-click="goToNextSection()" class="schedule-dropdown-next btn btn-primary">{{\'VC103\'|t}}</button></div></div></div></ng-form>'),
a.put("/views/sessions/directives/schedule.step.four.html",'<ng-form name="stepFour" novalidate><div class="schedule-dropdown-block row schedule-offers"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }">{{number}}. {{\'TS704\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content col-md-10 slide"><div class="row schedule-offers-optional"><div class="col-md-12 schedule-dropdown-small-desc"><span class="text-capital">{{\'C0043\'|t}}.</span> {{\'TS712\'|t}}</div></div><div ng-show="model.selectedTimes.length !== model.selectedSession.package_length"><div class="schedule-offers-table"><div class="schedule-offers-offer-title"><label class="filters_checkbox no-margin-b"><input type="checkbox" class="filters_checkbox_input" ng-model="model.isPackage" ng-change="onChecked()"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label"><span class="schedule-offers-offer-add">{{\'TS713\'|t|format:model.lessonsToAdd}}</span><div class="schedule-offers-offer-price"><span class="mr5">+ ${{ model.moneyToAdd|kpToUsd|number:2 }} USD</span> <span ng-show="model.amountSaved > 0" class="summary-price-offer-save">{{\'TS714\'|t|format:model.amountSaved}}</span></div></span></label></div></div></div><div ng-show="model.selectedTimes.length !== model.selectedSession.package_length" class="row margin-b40"><div class="schedule-dropdown-small-desc col-md-12"><div>* {{\'TS220\'|t}}</div><div>* {{\'TS715\'|t}} {{\'TS716\'|t}}</div></div></div><div ng-show="model.selectedTimes.length === model.selectedSession.package_length" class="row schedule-offers-offerText-container"><div class="col-md-12"><span class="schedule-offers-offerText">{{\'TS717\'|t}}</span></div></div><div class="schedule-dropdown-next-row"><div step-next class="schedule-dropdown-next btn btn-primary">{{\'TP103\'|t}}</div></div></div></div></ng-form>'),a.put("/views/sessions/directives/schedule.step.one.html",'<ng-form name="stepOne" novalidate><div class="schedule-dropdown-block row schedule-duration"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="page-subtitle col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }">{{number}}. {{\'TS701\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content col-md-11 slide"><div class="schedule-duration-learning-language"><div class="schedule-dropdown-subheading"><span>{{(lanLength==1?\'AS000\':\'TS706\') |t}}</span></div><div class="schedule-duration-learning-one-language" ng-show="lanLength==1">{{model.languageObj | t}}</div><div class="row" ng-hide="lanLength==1"><div class="col-md-6 margin-b40 italki-drop-down schedule-duration-learning-language-options"><ui-select is-open="false" ng-required="true" ng-model="model.languageObj" search-enabled="false" on-select="onLanguageSelect($item, $model)"><ui-select-match placeholder="Select a language ..."><span ng-bind-html="$select.selected.language?\'<span>\'+($select.selected.language|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.language" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="lan.language as lan in teachLans track by $index"><div ng-bind-html="lan.language|t"></div></ui-select-choices></ui-select></div></div><div class="schedule-dropdown-subheading">{{(courseLength==1?\'TS725\':\'TS707\') |t}}</div><div class="schedule-duration-learning-one-language" ng-show="courseLength==1">{{model.selectedCourses | t}}</div><div class="row" ng-hide="courseLength==1"><div class="col-md-6 margin-b40 italki-drop-down schedule-duration-learning-language-options"><ui-select is-open="false" ng-required="true" ng-model="model.selectedCourses" on-select="onCourseSelect($item, $model)" search-enabled="false"><ui-select-match placeholder="Select a course ..."><span ng-bind-html="$select.selected.title?\'<span>\'+($select.selected.title|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.title" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="course.title as course in selectedCourses track by $index"><div ng-bind-html="course.title|t"></div></ui-select-choices></ui-select></div></div></div><div class="schedule-duration-lesson-length"><div class="schedule-dropdown-subheading">{{\'TS708\'|t}}</div><div class="schedule-duration-learning-language-options"><div ng-repeat="price in selectedCourse.price_obj_s" ng-if="price.session_length !=8" class="schedule-duration-button"><input ng-change="onDurationSelect()" class="schedule-duration-option" type="radio" ng-model="model.course_price_id" ng-value="price.course_price_id" id="{{ \'option-\' + price.session_length * 15 }}"><label class="is-relative text-center" for="{{ \'option-\' + price.session_length * 15 }}"><div class="{{\'schedule-\'+price.session_length * 15+\'mins-icon\'}} schedule-mins-icon"></div><div class="schedule-duration-time">{{\'LC045\'|t}}</div><hr><div class="schedule-duration-price">${{ price.session_itc_usd |kpToUsd|number:2 }} USD</div><div ng-show="price.package_length !=1"><img src="/static/images/icons/icon-add-lessons.svg" class="schedule-discount-icon is-absolute"></div></label></div></div><div class="schedule-dropdown-subheading">{{\'TS726\'|t}}</div><div class="schedule-duration-button schedule-package-button"><input ng-change="onCheckedLesson()" class="schedule-duration-option" type="radio" ng-model="model.packageLength" ng-value="1" id="option-1"><label class="is-relative text-center" for="option-1"><div class="pull-left package-length-box"><div class="package-length-number">1</div><div class="schedule-duration-time">{{\'TP042\'|t}}</div></div><div class="schedule-duration-price"><div>${{ selectedSession.session_itc_usd |kpToUsd|number:2 }} USD</div></div></label></div><div class="schedule-duration-button schedule-package-button" ng-if="selectedSession.package_length>1" ng-class="{true: \'has-discount\'}[model.save>0]"><input class="schedule-duration-option" type="radio" ng-change="onCheckedPackage()" ng-model="model.packageLength" ng-value="selectedSession.package_length" id="{{ \'option-\' + selectedSession.package_length }}"><label class="is-relative text-center" for="{{ \'option-\' + selectedSession.package_length }}"><div class="pull-left package-length-box"><div class="package-length-number">{{selectedSession.package_length}}</div><div class="schedule-duration-time">{{\'C0119\'|t}}</div></div><div class="schedule-duration-price"><div>${{ selectedSession.package_itc_usd |kpToUsd|number:2 }} USD</div><div class="package-price-offer-save" ng-show="model.save > 0">{{\'TS714\'|t|format:model.save}}</div></div></label></div></div><div class="margin-b40 margin-t15"><div class="v-middle sub-text schedule-discount-icon-text">{{\'TS220\'|t}}{{\'TS715\'|t}}{{\'TS716\'|t}}</div></div><div class="schedule-dropdown-next-row"><button step-next ng-disabled="stepOne.$invalid" class="schedule-dropdown-next btn btn-primary">{{\'TP103\'|t}}</button></div></div></div></ng-form>'),a.put("/views/sessions/directives/schedule.step.three.html",'<ng-form name="stepThree" novalidate><div class="schedule-dropdown-block row schedule-period"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }">{{number}}. {{\'TP010\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content col-md-10 slide"><div class="row schedule-period-options" ng-if="!model.classRoom"><div class="schedule-dropdown-small-desc">{{\'TS221\'|t}}</div><div class="col-md-6 schedule-period-teaching-tools"><div class="schedule-period-subheading">{{\'ST750\'|t}}</div><div class="italki-drop-down"><ui-select ng-required="true" ng-model="model.im_type" on-select="onSelected($item)" theme="bootstrap" on-select="uiSelected($item, $model)" search-enabled="false"><ui-select-match placeholder="Please select a teaching tool ..."><span ng-bind-html="$select.selected.name?\'<span>\'+($select.selected.name|t)+\'</span>\':\'\'"></span></ui-select-match><ui-select-choices repeat="tool.v as tool in tools | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="tool.name|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-6 schedule-period-teaching-id"><div class="schedule-period-subheading">ID</div><div><input type="text" class="form-control" ng-model="model.student_im_account" name="im_account" ng-required="!model.student_im_account" ng-minlength="3" ng-maxlength="50"> <span class="help-block" ng-if="(submitFlag||stepThree.im_account.$dirty) && stepThree.im_account.$invalid">{{\'TP320\'|translate}}</span><p ng-show="model.selectedTool.name === \'Skype\'" class="text-muted margin-t5" translate="TS236"></p></div></div></div><div ng-if="model.classRoom"><div class="col-md-12 schedule-period-options no-margin-t"><div><span class="italki-logo-square v-middle"></span> <span class="classroom-name text-bg theme-color v-middle">italki Classroom</span> <span class="classroom-label label theme-label v-middle">{{\'RTC102\'|t}}</span></div><div class="classroom-des"><h5 class="classroom-des-title">{{\'RTC236\'|t}}</h5><p>{{\'RTC237\'|t}}{{\'RTC238\'|t}}</p><h5 class="classroom-des-title">{{\'RTC239\'|t}}</h5><p>{{\'RTC240\'|t}}</p></div></div></div><div class="schedule-dropdown-next-row"><button ng-disabled="stepThree.$invalid" step-next class="schedule-dropdown-next btn btn-primary">{{\'TP103\'|t}}</button></div></div></div></ng-form>'),a.put("/views/sessions/directives/schedule.step.trial.html",'<ng-form name="stepOne" novalidate><div class="schedule-dropdown-block row schedule-duration schedule-period"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="page-subtitle col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }">{{number}}. {{\'TS701\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content col-md-11 slide"><div class="schedule-duration-learning-language"><div class="schedule-dropdown-subheading"><span>{{(lanLength==1?\'AS000\':\'TS706\') |t}}</span></div><div class="schedule-duration-learning-one-language" ng-show="lanLength==1">{{model.languageObj | t}}</div><div class="row" ng-hide="lanLength==1"><div class="col-md-6 margin-b40 italki-drop-down schedule-duration-learning-language-options"><ui-select is-open="false" ng-required="true" ng-model="model.languageObj" search-enabled="false" on-select="onLanguageSelect($item, $model)"><ui-select-match placeholder="Select a language ..."><span ng-bind-html="$select.selected.language?\'<span>\'+($select.selected.language|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.language" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="lan.language as lan in teachLans track by $index"><div ng-bind-html="lan.language|t"></div></ui-select-choices></ui-select></div></div></div><div class="schedule-duration-learning-language"><div class="schedule-dropdown-subheading"><span>{{\'TS702\'|t}}</span></div><div class="schedule-dropdown-small-desc" style="margin-top: 10px"><div>* {{\'TS220\'|t}}</div></div><div class="schedule-period-calendar-btn-container"><div class="btn btn-outline-primary schedule-period-calendar-btn" ng-if="showAddSchedulTimeBtn && model.selectedTimes.length<1" ng-click="openScheduleModal()">{{\'TS724\'|t}}</div></div><div ng-hide="model.selectedTimes.length<1" class="margin-b40"><table class="table schedule-period-table"><thead><tr class="schedule-period-table-header"><td>{{\'TS033\'|t}}</td><td>{{\'TS034\'|t}}</td><td>{{\'PM041\'|t}}</td><td>{{\'TP088\'|t}}</td></tr></thead><tbody><tr ng-repeat="item in model.selectedTimes"><td>{{ item.date | amDate:\'TF014\' }}</td><td>{{ item.date | amDate:\'TF015\' }} - {{ item.date | amAdd: model.selectedSession.session_length * 15 | amDate:\'TF015\'}}</td><td ng-switch="item.status"><i class="fa fa-check text-success" ng-switch-when="1"></i> <i class="fa fa-close text-error" style="color: #ff4338" ng-switch-when="0"></i> <i class="fa fa-spinner" ng-switch-when="-1"></i> <i ng-switch-default=""></i></td><td><a class="display-desktop" ng-click="removeTime(item)">{{\'TS672\'|t}}</a> <a class="display-phone" ng-click="removeTime(item)"><i class="fa fa-trash-o" aria-hidden="true"></i></a></td></tr></tbody></table></div><div class="schedule-dropdown-next-row"><p style="color:red" ng-show="model.TimesAvailable">{{\'PM655\'|t}}</p><button step-next ng-disabled="model.selectedTimes.length < 1 || model.TimesAvailable" class="schedule-dropdown-next btn btn-primary">{{\'TP103\'|t}}</button></div></div></div></div></ng-form>'),a.put("/views/sessions/directives/schedule.step.two.html",'<ng-form name="stepTwo" novalidate><div class="schedule-dropdown-block row schedule-period"><div ng-click="editSection()" class="schedule-dropdown-label row"><h2 class="col-md-11 col-xs-10" ng-class="{ disabled: currentStep != stepData.title }">{{number}}. {{\'TS702\'|t}}</h2><div ng-show="showEdit()" class="show-edit-btn"><a ng-click="editStep()">{{\'NB160\'|t}}</a></div></div><div ng-show="currentStep == stepData.title" class="schedule-dropdown-content col-md-10 slide"><div class="schedule-dropdown-small-desc"><div>* {{\'TS220\'|t}}</div><div>* {{\'TS224\'|t}}</div></div><div class="schedule-period-calendar-btn-container"><div class="btn btn-outline-primary schedule-period-calendar-btn" ng-if="showAddSchedulTimeBtn && model.selectedTimes.length<1" ng-click="openScheduleModal()">{{\'TS724\'|t}}</div></div><div ng-hide="model.selectedTimes.length<1"><table class="table schedule-period-table"><thead><tr class="schedule-period-table-header"><td>{{\'TS033\'|t}}</td><td>{{\'TS034\'|t}}</td><td>{{\'PM041\'|t}}</td><td>{{\'TP088\'|t}}</td></tr></thead><tbody><tr ng-repeat="item in model.selectedTimes"><td>{{ item.date | amDate:\'TF014\' }}</td><td>{{ item.date | amDate:\'TF015\' }} - {{ item.date | amAdd: model.selectedSession.session_length * 15 | amDate:\'TF015\'}}</td><td ng-switch="item.status"><i class="fa fa-check text-success" ng-switch-when="1"></i> <i class="fa fa-close text-error" style="color: #ff4338" ng-switch-when="0"></i> <i class="fa fa-spinner" ng-switch-when="-1"></i> <i ng-switch-default=""></i></td><td><a class="display-desktop" ng-click="removeTime(item)">{{\'TS672\'|t}}</a> <a class="display-phone" ng-click="removeTime(item)"><i class="fa fa-trash-o" aria-hidden="true"></i></a></td></tr></tbody></table><div ng-show="showAddSchedulTimeBtn" class="schedule-period-table-row margin-b40"><a href="#" ng-click="openScheduleModal()">+ {{\'TS721\'|t}}</a></div></div><div class="schedule-dropdown-next-row"><p style="color:red" ng-show="model.TimesAvailable">{{\'PM655\'|t}}</p><button step-next ng-disabled="model.selectedTimes.length < 1 || model.TimesAvailable" class="schedule-dropdown-next btn btn-primary">{{\'TP103\'|t}}</button></div></div></div></ng-form>'),a.put("/views/sessions/directives/schedule.summary.html",'<div class="row display-desktop-phone teacher-details"><div class="pull-left teacher-pic-container"><div class="teacher-pic"><img title="{{teacher.nickname}}" alt="{{teacher.nickname}}" ng-src="{{model.teacher_obj.avatar_file_name|avatar:\'50\'}}" class="bg-icon rounded" kp-fallback-avatar></div></div><div class="teacher-info-block"><div class="summary-detail-block no-margin-t"><div class="summary-detail-title">{{\'C0122\'|t}}</div><div class="summary-detail-desc">{{model.teacher_obj.nickname}}</div></div><div class="summary-detail-block no-margin-t no-margin-b"><div class="summary-detail-title">{{\'PM439\'|t}}</div><div class="summary-detail-desc"><span>{{model.selectedCourses | t}}</span> <span ng-if="model.selectedCourses == \'TS032\'">: {{model.languageObj |t}}</span></div></div></div></div><div class="teacher-details row display-tablet"><div class="teacher-pic-container pull-left"><div class="teacher-pic"><img title="{{teacher.nickname}}" alt="{{teacher.nickname}}" ng-src="{{model.teacher_obj.avatar_file_name|avatar:\'50\'}}" class="bg-icon rounded" style="display: block; margin: 0 auto; height:100%; bottom: inherit;right:20px" kp-fallback-avatar></div></div><div class="teacher-info-block"><div class="summary-detail-block no-margin-t"><span class="summary-detail-title">{{\'C0122\'|t}}</span> <span class="summary-detail-desc">{{model.teacher_obj.nickname}}</span></div><div class="summary-detail-block no-margin-t no-margin-b"><span class="summary-detail-title">{{\'PM439\'|t}}</span> <span class="summary-detail-desc"><span>{{model.selectedCourses |t }}</span> <span ng-if="model.selectedCourses == \'TS032\'">: {{model.languageObj |t}}</span></span></div></div></div>'),a.put("/views/sessions/directives/schedule.view.details.html",'<div class="summary-detail-view-lesson-request"><div class="slide" ng-show="model.fullLessonRequestSummaryShown"><div ng-show="model.selectedLanguage" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'MH225\'|t}}</div><div class="col-md-12 summary-detail-desc text-capital">{{model.selectedLanguage |t}}</div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title text-capital">{{\'PM444\'|t}}</div><div class="col-md-12 summary-detail-desc">{{ getLessonDuration() }} {{\'TS116\'|t}}</div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-show="model.selectedTimes.length > 0" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'PM446\'|t}}</div><div ng-repeat="time in model.selectedTimes" class="col-md-12 summary-detail-desc"><div id="summary-period-date">{{ time.date | amDate:\'TF016\' }}</div><div id="summary-period-time">{{ time.date | amDate:\'TF015\' }} - {{ time.date | amAdd: getLessonDuration() | amDate:\'TF015\'}}</div></div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div><div ng-if="!model.classRoom"><div ng-show="model.student_im_account" class="slide"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'TP010\'|t}}</div><div class="col-md-12 summary-detail-desc"><div ng-switch="model.im_type"><span ng-switch-when="1">Skype</span> <span ng-switch-when="6">Google Hangouts</span> <span ng-switch-when="7">QQ</span> <span ng-switch-when="8">FaceTime</span> <span ng-switch-when="9">Wechat</span></div><div id="summary-communication-id">{{ model.student_im_account }}</div></div></div><div class="row summary-detail-divider-row"><div class="col-md-9 summary-detail-divider"></div></div></div></div><div ng-if="model.classRoom"><div class="summary-detail-block row"><div class="col-md-12 summary-detail-title">{{\'TP010\'|t}}</div><div class="col-md-12 summary-detail-desc"><span class="text-bg v-middle mr10">italki Classroom</span> <span class="label theme-label v-middle">{{\'RTC102\'|t}}</span></div></div></div><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row" id="summary-price"><div class="col-md-12 summary-detail-title">{{\'TP009\'|t}}</div><div class="col-md-12 summary-detail-desc"><div class="row summary-price-row"><div class="col-xs-7 summary-price-base-title" ng-if="getNumberLessons() == 1">1 {{\'TP042\'|t}}</div><div class="col-xs-7 summary-price-base-title" ng-if="getNumberLessons() > 1">{{\'TP176\'|t|format:getNumberLessons()}}</div><div class="col-xs-5 summary-price-base-cost text-right no-margin-b">$ {{ getNumberLessonsCost()|kpToUsd|number:2 }} USD</div></div><div ng-show="model.isPackage" class="row summary-price-row slide"><div class="col-xs-7 no-margin-b"></div><div class="col-xs-5 text-right" id="summary-price-offer-cost"><span class="summary-price-offer-save" ng-show="model.save > 0">{{\'TS714\'|t|format:model.save}}</span></div></div></div></div><div class="row summary-detail-divider-row"><div class="col-md-12 summary-detail-divider"></div></div></div><div ng-show="model.selectedSession" class="slide summary-confirmation"><div class="summary-detail-block row" id="summary-confirmation"><div class="col-xs-6" id="summary-confirmation-balance"><div class="summary-detail-title">{{\'TS057\'|t}}</div><div class="summary-detail-desc">$ {{ model.available_itc_usd|kpToUsd|number:2 }} USD</div></div><div class="col-xs-6 summary-confirmation-subtotal text-right"><div class="summary-detail-title">{{\'VC420\'|t}}</div><div class="summary-confirmation-subtotal-price">$ {{getNumberLessonsCost()|kpToUsd|number:2}} USD</div><div class="summary-confirmation-subtotal-converted">≈ <span ng-bind="(getNumberLessonsCost()*model.currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{model.currentUser.currency}}</div></div></div></div><div class="schedule-dropdown-next-row text-center margin-b20"><button class="btn btn-outline-primary btn-block center-block text-up" style="max-width: 300px" ng-click="confirm()"><span ng-show="showConfirmBtn()">{{\'C0123\'|t}}</span> <span ng-hide="showConfirmBtn()">{{\'LN116\'|t}}</span></button></div><div class="row summary-detail-divider-row"><div class="col-md-12 summary-detail-divider"></div></div></div><div class="summary-view-detail-dropdown" ng-click="model.fullLessonRequestSummaryShown = !model.fullLessonRequestSummaryShown"><div><span ng-show="!model.fullLessonRequestSummaryShown">{{\'PM440\'|t}}</span> <span ng-show="model.fullLessonRequestSummaryShown">{{\'PM441\'|t}}</span></div><div><i ng-show="model.fullLessonRequestSummaryShown" class="fa fa-angle-up" aria-hidden="true"></i> <i ng-show="!model.fullLessonRequestSummaryShown" class="fa fa-angle-down" aria-hidden="true"></i></div></div></div>'),a.put("/views/sessions/directives/schedule.view.price.html",'<div class="summary-detail-view-lesson-request"><div ng-show="model.selectedSession" class="slide"><div class="summary-detail-block row" id="summary-confirmation"><div class="col-xs-7" id="summary-confirmation-balance"><div class="summary-detail-title">{{\'PM051\'|t}}</div><div class="summary-detail-desc">$ {{ model.available_itc_usd|kpToUsd|number:2 }} USD</div></div><div class="col-xs-5" id="summary-confirmation-subtotal"><div class="summary-detail-title">{{\'PM480\'|t}}</div><div class="summary-confirmation-subtotal-price">$ {{ model.total|kpToUsd|number:2 }} USD</div><div class="col-md-12 summary-confirmation-subtotal-converted">≈ <span ng-bind="(model.total*model.currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{model.currentUser.currency}}</div></div></div></div><div class="summary-view-detail-dropdown-price" ng-click="openFullSummary()"><div><i class="fa fa-angle-up" aria-hidden="true"></i></div><div>{{\'PM440\'|t}}</div></div></div>'),a.put("/views/sessions/directives/session.head.html",'<div class="panel no-margin-b no-border session-list-tab"><ul class="content-block-tabs js-tabs-tabs no-margin-b no-border"><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref="session.explore" ng-class="{\'selected\':show==\'1\'}">{{\'M0038\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref="session.package" ng-class="{\'selected\':show==\'2\'}">{{\'M0076\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref="session.problem" ng-class="{\'selected\':show==\'3\'}">{{\'M0081\'|t}}</a></li><li class="content-block-tab"><a class="content-block-tab-link js-tab-link" ui-sref="session.calendar" ng-class="{\'selected\':show==\'4\'}">{{\'M0075\'|t}}</a></li><li class="content-block-tab header-menu-small1"><a class="content-block-tab-link js-tab-link" ui-sref="challenge">Language Challenge</a></li></ul></div>'),a.put("/views/sessions/directives/step.html",'<div class="schedule-dropdown-block row"><div class="schedule-dropdown-label">{{ stepHeadingTitle }}</div><section ng-transclude></section></div>'),a.put("/views/sessions/directives/steps.html",'<div><div class="steps" ng-transclude></div></div>'),a.put("/views/sessions/get.icalendar.feed.html",'<form novalidate name="redeem_voucher_code_form" ng-submit="redeem_voucher_code_form.$valid&&confirm()"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">×</button><h4 class="modal-title">{{\'SM100\'|t}}</h4></div><div class="modal-body padding-bottom" ng-hide="!!success"><h5 ng-bind-html="\'KP270\'|t"></h5><h5><ul class="no-grid-gutter-h"><li>{{\'KP271\'|t}}</li><li>{{\'KP272\'|t}}</li></ul></h5><div class="form-group"><h5><span>{{\'KP273\'|t}}:</span></h5><input type="text" class="form-control" ng-model="keyID" readonly="readonly" italki-select-on-focus></div></div><div class="modal-body padding-bottom" ng-if="success"><div class="alert alert-success"><h4 class="no-margin">{{success.credited_itc}}&nbsp;ITC {{\'VC203\'|t}}</h4></div></div></form>'),a.put("/views/sessions/instant/alert.html",'<div class="single"><div class="row"><div class="col-xs-3"><p><img class="rounded" ng-src="{{ ::user|avatar }}" style="width: 100%"></p><kp-countdown end="{{ ::end }}"></kp-countdown></div><div class="col-xs-9"><p ng-if="!isStudent">You received an Instant Tutoring Requests from <mark ng-bind="::user.nickname"></mark> . You have 10 minutes to respond to the request.</p><p ng-if="isStudent" translate="TS900"></p><a ui-sref="sessionDetail({sessionId:session[\'session_id\']})"><button class="btn" ng-click="$dismiss();">View session detail</button></a></div></div></div>'),a.put("/views/sessions/instant/closed.html",'<div class="single bg-danger"><div class="row"><div class="col-md-12">Your Instant Tutoring privileges have been suspended. You must apply to reactivate your Instant Tutoring privileges. <a href="http://support.italki.com/entries/23395239-Why-are-my-Instant-Tutoring-privileges-suspended-andhow-can-I-get-my-Instant-Tutoring-privileges-ba" target="_blank" translate="C0171" ng-click="$dismiss()"></a></div></div></div>'),a.put("/views/sessions/instant/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" class="" uib-modal-animation-class="" style="outline: 0" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)"><div ng-class="size ? \'modal-\' + size : \'\'" style="outline: 0" uib-modal-transclude></div></div>'),a.put("/views/sessions/request/instant.html",'<div ng-hide="sessionRequestResult || disabledAccount"><h3 translate="TS108"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current"><div>{{\'TS092\'|translate}}</div></li><li><div>{{\'TS093\'|translate}}</div></li><li><div>{{\'TS094\'|translate}}</div></li><li class="last"><div>{{\'TS095\'|translate}}</div></li></ul></div></div><ng-form name="Form1"><div class="panel" ng-hide="!item"><table class="visible-desktop table table-bordered"><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><span class="pull-left"><img style="width:50px; border-radius: 9999px" ng-src="{{ item.teacher_obj|avatar:\'100\' }}" kp-fallback-avatar></span><div style="padding-left: 70px"><span class="text-muted">{{\'C0122\'|translate}}</span><br><span class="text-lg color-link">{{item.teacher_obj.nickname}}</span><br><span class="text-sm">{{ item.teacher_obj.textid }}</span></div></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</span><br><span class="text-lg">{{\'TS047\'|t}}:&nbsp;{{ $stateParams.language|translate }}</span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted">{{\'TP081\'|translate}}</span><br><span class="text-lg">30 {{\'TS116\'|t}}</span></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP008\'|translate}}</span><br><span class="text-lg">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle" tooltip="{{\'HL203\'|translate}}"></i><br><span class="text-muted">≈ <span ng-bind="(item.session_itc_usd*currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></td></tr></table><div class="panel-body visible-phone"><p><strong>{{\'C0122\'|translate}}</strong><br><strong class="color-link">{{item.teacher_obj.nickname}}</strong></p><p><strong>{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</strong><br>{{ \'TS026\'|translate }}:{{ $stateParams.language|translate }}</p><p><strong>{{\'TP081\'|translate}}</strong><br><span>30</span> {{\'TS116\'|t}}</p><p><strong>{{\'TP008\'|translate}}</strong><br><span class="or_price">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle"></i><br><span class="grey11">≈ <span ng-bind="item.session_itc_usd*currentUser.currency_rate|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></p></div></div><div class="row"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="item"></kp-loading><div class="panel-body" ng-hide="!item"><div class="login_area"><div id="Form1_im_account"><div class="text-center session-request-icon"><span class="tl-icon">1</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TS028\'|translate}}</h4><div><p ng-bind-html="\'TS221\'|translate"></p><div class="row"><div class="col-md-6"><div class="form-group no-margin-hr"><label>{{\'ST750\'|translate}}</label><select class="form-control" ng-model="newSession[\'im_type\']" ng-change="displayDefaultAccount()"><option value="1" ng-if="item.teacher_obj.user_detail_obj.skype_account">Skype</option><option value="6" ng-if="item.teacher_obj.user_detail_obj.google_talk_account">Google Hangouts</option><option value="7" ng-if="item.teacher_obj.user_detail_obj.qq_account">QQ</option><option value="8" ng-if="item.teacher_obj.user_detail_obj.face_time_account">FaceTime</option><option value="9" ng-if="item.teacher_obj.user_detail_obj.wechat_account">Wechat</option></select></div></div><div class="col-md-6"><div class="form-group no-margin-hr"><label>ID</label><input type="text" class="form-control" ng-model="newSession[\'student_im_account\']" name="im_account" required ng-minlength="3" ng-maxlength="50"> <span class="help-block" ng-if="(submitFlag||Form1.im_account.$dirty) && Form1.im_account.$invalid">{{\'TP320\'|translate}}</span><p class="text-muted" translate="TS236"></p></div></div></div></div><hr></div></div><div id="Form1_newSession_msg"><div class="text-center session-request-icon"><span class="tl-icon">2</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TP038\'|translate}}</h4><div><p class="text-muted">{{\'TP259\'|translate}}</p><p><textarea class="form-control" rows="8" ng-model="newSession.msg" name="newSession_msg" ng-model="newSession.msg" ng-maxlength="2000"></textarea><span class="help-block" ng-if="Form1.newSession_msg.$invalid">{{\'ST024\'|t|format:2000}}</span></p></div></div></div></div></div></div><div class="panel" ng-hide="!item"><div class="panel-body"><div class="grid-gutter-margin-b"><ul class="list-unstyled"><li id="tbl_price"><h4 class="no-margin-t" translate="TS037"></h4><table class="table" style="border:2px #ff4338 solid"><tbody><tr><td width="200" translate="TS057"></td><td align="left"><span ng-bind="item.available_itc_usd|kpToUsd|number:2"></span> USD</td></tr><tr><td bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338" translate="TS059"></span></strong></td><td align="left" bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338">$<span ng-bind="currentAmount()|kpToUsd|number:2"></span> USD</span></strong></td></tr></tbody></table></li><li><label class="control-label">{{\'UR057\'|translate}}</label><div class="row"><div class="col-md-6"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|translate}}" maxlength="20" class="form-control" ng-model="newSession[\'pwd\']" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-if="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span></div></div></li></ul></div><div class="form-group w-icon" ng-hide="!error"><div ng-if="error.type!=\'PaymentAccountDisabled\'" class="alert alert-warning animated shake" ng-bind="error.msg"></div><div ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning animated shake">{{\'KP305\'|t}}{{\'KP306\'|t}}</div></div><div class=""><p translate="TS222"></p><button class="btn btn-primary with-spinner" italki-click-with-spinner="submit(Form1)" stext="LN116"></button></div></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'TP210\'|t}}</h4><p>{{\'TS251\'|t}}</p><p><a>{{\'TP136\'|t}}</a></p></div></div></div></div></ng-form></div><div ng-include="\'/views/sessions/request/result.html\'" ng-if="sessionRequestResult && !disabledAccount"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),
a.put("/views/sessions/request/package.html",'<div ng-hide="sessionRequestResult || disabledAccount"><h3 translate="TS091"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current"><div>{{\'TS092\'|t}}</div></li><li><div>{{\'TS093\'|t}}</div></li><li><div>{{\'TS094\'|t}}</div></li><li class="last"><div>{{\'TS095\'|t}}</div></li></ul></div></div><ng-form name="Form1"><div class="panel" ng-hide="!item"><table class="visible-desktop table table-bordered"><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><span class="pull-left"><img style="width:50px; border-radius: 9999px" ng-src="{{ item.teacher_obj|avatar:\'100\' }}" kp-fallback-avatar></span><div style="padding-left: 70px"><span class="text-muted">{{\'C0122\'|t}}</span><br><span class="text-lg color-link">{{item.teacher_obj.nickname}}</span><br><span class="text-sm">{{ item.teacher_obj.textid }}</span></div></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP041\'|t}} / {{\'TP035\'|t}}</span><br><span class="text-lg">{{item.course_obj|sessionCourseTitle:true}}</span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted">{{\'TP081\'|t}}</span><br><span class="text-lg">{{ item.course_obj.course_price_obj.package_length }} x {{item.course_obj.course_price_obj.session_length*15}} {{\'TS116\'|t}}</span></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP008\'|t}}</span><br><span class="text-lg">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle" tooltip="{{\'HL203\'|t}}"></i><br><span class="text-muted" ng-hide="currentUser.currency==\'USD\'">≈<span ng-bind="item.session_itc_usd*currentUser.currency_rate|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></td></tr></table><div class="panel-body visible-phone"><p><strong>{{\'C0122\'|t}}</strong><br><strong class="color-link">{{item.teacher_obj.nickname}}</strong></p><p><strong>{{\'TP041\'|t}} / {{\'TP035\'|t}}</strong><br>{{item.course_obj|sessionCourseTitle:true}}</p><p><strong>{{\'TP081\'|t}}</strong><br>{{ item.course_obj.course_price_obj.package_length }} x <span ng-bind="item.course_obj.course_price_obj.session_length*15"></span> {{\'TS116\'|t}}</p><p><strong>{{\'TP008\'|t}}</strong><br><span class="or_price">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle"></i><br><span class="grey11">≈ <span ng-bind="item.session_itc_usd*currentUser.currency_rate|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></p></div></div><div class="row"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="item"></kp-loading><div class="panel-body" ng-hide="!item"><div class="login_area"><div id="Form1_forSelectedTimes"><div class="text-center session-request-icon"><span class="tl-icon">1</span></div><div class="session-request-content"><h4>{{\'TS027\'|t}}</h4><div class="intro_1"><ul class="session_re"><li>{{\'TS220\'|t}}</li><li>{{\'TS224\'|t}}</li></ul></div><div class="intro_2"><div id="Set_Time" class="intro_1_time"></div><div class="intro_1_number" id="intro_1_number" style="display:none"><span id="Set_Time_Count_span">0</span> Lesson Schedule Requests</div><div class="note note-info no-border" id="Set_Time_is3" ng-hide="selectedTimes.length>0 || (submitFlag && Form1.forSelectedTimes.$invalid)">{{\'TS223\'|t}}</div><div ng-if="submitFlag && Form1.forSelectedTimes.$invalid || selectedTimes.length<0" class="alert">{{\'TS303\'|t}}</div></div><div class="intro_3"></div><div><table class="table table-bordered" ng-hide="selectedTimes.length<1"><thead><tr><td translate="TS030"></td><td translate="TS031"></td><td translate="TS041"></td></tr></thead><tbody><tr ng-repeat="item in selectedTimes"><td>{{ item.date|amDate:\'TF001\'}}</td><td ng-switch="item.status"><i class="fa fa-check text-success" ng-switch-when="1"></i> <i class="fa fa-close text-error" style="color: #ff4338" ng-switch-when="0"></i> <i class="fa fa-spinner" ng-switch-when="-1"></i> <i ng-switch-default=""></i></td><td><a href="" ng-click="removeTime(item)">{{\'C0049\'|t}}</a></td></tr></tbody></table><div class="note no-border"><ul class="list-inline no-margin-b"><li>{{ \'TS214\'|t|format:item.course_obj.course_price_obj.package_length }}</li><li>{{ \'TS213\'|t|format:selectedTimes.length }}</li><li>{{ \'TS216\'|t|format:(item.course_obj.course_price_obj.package_length-selectedTimes.length) }}</li></ul></div><input type="hidden" name="forSelectedTimes" ng-model="forSelectedTimes" ensure-succ="checkSelectedTimes"><p style="color:red" ng-show="TimesAvailable">{{\'PM655\'|t}}</p><a class="btn btn-primary" ng-click="openScheduleModal()" ng-hide="selectedTimes.length==item.course_obj.course_price_obj.package_length"><span class="btn-txt">{{\'KP101\'|t}}</span></a><hr></div></div></div><div id="Form1_im_account"><div class="text-center session-request-icon"><span class="tl-icon">2</span></div><div class="session-request-content" ng-if="!have.classRoom"><h4>{{\'TS028\'|t}}</h4><div><p ng-bind-html="\'TS221\'|t"></p><div class="row"><div class="col-md-6"><div class="form-group no-margin-hr"><label>{{\'ST750\'|t}}</label><select class="form-control" ng-model="newSession[\'im_type\']" ng-change="displayDefaultAccount()"><option value="1" ng-if="item.teacher_obj.user_detail_obj.skype_account">Skype</option><option value="6" ng-if="item.teacher_obj.user_detail_obj.google_talk_account">Google Hangouts</option><option value="7" ng-if="item.teacher_obj.user_detail_obj.qq_account">QQ</option><option value="8" ng-if="item.teacher_obj.user_detail_obj.face_time_account">FaceTime</option><option value="9" ng-if="item.teacher_obj.user_detail_obj.wechat_account">Wechat</option></select></div></div><div class="col-md-6"><div class="form-group no-margin-hr"><label>ID</label><input type="text" class="form-control" ng-model="newSession[\'student_im_account\']" ng-init="newSession[\'student_im_account\']=currentUser.ims.skype_account" name="im_account" required ng-minlength="3" ng-maxlength="50"> <span class="help-block" ng-if="(submitFlag||Form1.im_account.$dirty) && Form1.im_account.$invalid">{{\'TP320\'|t}}</span><p class="text-muted" translate="TS236"></p></div></div><p style="color:red;margin-left: 12px" ng-show="CommunicationChanged">{{\'PM656\'|t}}</p></div></div><hr></div><div ng-if="have.classRoom"><italki-classroom></italki-classroom></div></div><div id="Form1_newSession_msg"><div class="text-center session-request-icon"><span class="tl-icon">3</span></div><div class="session-request-content"><h4>{{\'TP038\'|t}}</h4><div><p class="text-muted">{{\'TP259\'|t}}</p><p><textarea class="form-control" rows="8" ng-model="newSession.msg" name="newSession_msg" ng-model="newSession.msg" ng-maxlength="2000"></textarea><span class="help-block" ng-if="Form1.newSession_msg.$invalid">{{\'ST024\'|t|format:2000}}</span></p></div></div></div></div></div></div><div class="panel" ng-hide="!item"><div class="panel-body"><div class="grid-gutter-margin-b"><ul class="list-unstyled"><li id="tbl_price"><h4 class="no-margin-t" translate="TS037"></h4><table class="table" style="border:2px #ff4338 solid"><tbody><tr><td width="200" translate="TS057"></td><td align="left">$<span ng-bind="item.available_itc_usd|kpToUsd|number:2"></span> USD</td></tr><tr><td bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338" translate="TS059"></span></strong></td><td align="left" bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338">$<span id="tbl_price_td" ng-bind="currentAmount()|kpToUsd|number:2"></span> USD</span></strong></td></tr></tbody></table></li><li><label class="control-label">{{\'UR057\'|t}}</label><div class="row"><div class="col-md-6"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|t}}" maxlength="20" class="form-control" ng-model="newSession[\'pwd\']" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-show="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|t}}</span></div></div></li></ul></div><div class="form-group w-icon" ng-hide="!error"><div ng-if="error.type!=\'PaymentAccountDisabled\'" class="alert alert-warning animated shake" ng-bind="error.msg"></div><div ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning animated shake">{{\'KP305\'|t}}{{\'KP306\'|t}}</div></div><div class=""><p translate="TS222"></p><button class="btn btn-primary with-spinner" italki-click-with-spinner="submit(Form1)" stext="LN116"></button></div></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'TP210\'|t}}</h4><p>{{\'TS251\'|t}}</p><p><a>{{\'TP136\'|t}}</a></p></div></div><div class="panel no-border panel-dark" ng-show="isCN()"><div class="panel-body"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div></ng-form></div><div ng-include="\'/views/sessions/request/package.result.html\'" ng-if="sessionRequestResult &&!disabledAccount"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),a.put("/views/sessions/request/package.result.html",'<h3>{{\'TS600\'|translate}}</h3><div class="panel"><div class="panel-body"><div class="panel-body"><div class="row"><div class="col-md-9"><p ng-bind-html="\'TS632\'|t|format:\'48 hours\'"></p><p><button class="btn btn-primary" ng-click="goToDetail()"><span class="btn-txt">{{\'TP150\'|t}}</span></button></p><hr><ul class="list-inline"><li><a ui-sref="session.explore">{{\'TP158\'|t}}</a></li><li><a ui-sref="dashboard">{{\'TP159\'|t}}</a></li></ul></div><div class="col-md-3" ng-show="isCN()"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div></div>'),a.put("/views/sessions/request/request.html",'<style>.tooltip {\n    white-space: normal;\n  }</style><div ng-hide="sessionRequestResult||disabledAccount"><h3 translate="TS108"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current"><div>{{\'TS092\'|translate}}</div></li><li><div>{{\'TS093\'|translate}}</div></li><li><div>{{\'TS094\'|translate}}</div></li><li class="last"><div>{{\'TS095\'|translate}}</div></li></ul></div></div><ng-form name="Form1"><div class="panel" ng-hide="!item"><table class="visible-desktop table table-bordered"><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><span class="pull-left"><img style="width:50px; border-radius: 9999px" ng-src="{{ item.teacher_obj|avatar:\'100\' }}" kp-fallback-avatar></span><div style="padding-left: 70px"><span class="text-muted">{{\'C0122\'|translate}}</span><br><span class="text-lg color-link">{{item.teacher_obj.nickname}}</span><br><span class="text-sm">{{ item.teacher_obj.textid }}</span></div></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</span><br><span class="text-lg">{{item.course_obj.title||(item.course_obj|sessionCourseTitle)}}</span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted">{{\'TP081\'|translate}}</span><br><span class="text-lg">{{item.course_obj.course_price_obj.session_length*15}} {{\'TS116\'|t}}</span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted">{{\'TP008\'|translate}}</span><br><span class="text-lg">$<span ng-bind="item.course_obj.course_price_obj.session_price_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle" tooltip="{{\'HL203\'|translate}}"></i><br><span class="text-muted">≈ <span ng-bind="(item.course_obj.course_price_obj.session_price_usd*currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></td></tr></table><div class="panel-body visible-phone"><p><strong>{{\'C0122\'|translate}}</strong><br><strong class="color-link">{{item.teacher_obj.nickname}}</strong></p><p><strong>{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</strong><br>{{item.course_obj|sessionCourseTitle}}</p><p><strong>{{\'TP081\'|translate}}</strong><br><span ng-bind="item.course_obj.course_price_obj.session_length*15"></span> {{\'TS116\'|t}}</p><p><strong>{{\'TP008\'|translate}}</strong><br><span class="or_price">$<span ng-bind="item.course_obj.course_price_obj.session_price_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle"></i><br><span class="grey11">≈ <span ng-bind="(item.course_obj.course_price_obj.session_price_usd*currentUser.currency_rate)|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></p></div></div><div class="row"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="item"></kp-loading><div class="panel-body" ng-hide="!item"><div class="login_area"><div id="Form1_forSelectedTimes"><div class="text-center session-request-icon"><span class="tl-icon">1</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TS027\'|t}}</h4><div class="intro_1"><ul class="session_re"><li>{{\'TS220\'|t}}</li><li>{{\'TS224\'|t}}</li></ul></div><div class="intro_2"><div id="Set_Time" class="intro_1_time"></div><div class="intro_1_number" id="intro_1_number" style="display:none"><span id="Set_Time_Count_span">0</span> Lesson Schedule Requests</div><div class="alert alert-info" id="Set_Time_is3" ng-hide="selectedTimes.length>0||(submitFlag && Form1.forSelectedTimes.$invalid)">{{\'TS223\'|translate}}</div><div ng-if="submitFlag && Form1.forSelectedTimes.$invalid||selectedTimes.length<0" class="alert">{{\'TS303\'|translate}}</div></div><div class="intro_3"></div><div><table class="table table-bordered" ng-hide="selectedTimes.length<1"><thead><tr><td translate="TS030"></td><td translate="TS031"></td><td translate="TS041"></td></tr></thead><tbody><tr ng-repeat="item in selectedTimes"><td>{{ item.date|amDate:\'TF001\'}}</td><td ng-switch="item.status"><i class="fa fa-check text-success" ng-switch-when="1"></i> <i class="fa fa-close text-error" style="color: #ff4338" ng-switch-when="0"></i> <i class="fa fa-spinner" ng-switch-when="-1"></i> <i ng-switch-default=""></i></td><td><a href="" ng-click="removeTime(item)">{{\'C0049\'|translate}}</a></td></tr></tbody></table><input type="hidden" name="forSelectedTimes" ng-model="forSelectedTimes" ensure-succ="checkSelectedTimes"><p style="color:red" ng-show="TimesAvailable">{{\'PM655\'|t}}</p><a class="btn btn-primary" ng-click="openScheduleModal()"><span class="btn-txt">{{\'KP101\'|t}}</span></a><hr></div></div></div><div id="Form1_im_account"><div class="text-center session-request-icon"><span class="tl-icon">2</span></div><div class="session-request-content" ng-if="!have.classRoom"><h4 class="no-margin-t">{{\'TS028\'|translate}}</h4><div><p ng-bind-html="\'TS221\'|translate"></p><div class="row"><div class="col-md-6"><div class="form-group no-margin-hr"><label>{{\'ST750\'|translate}}</label><select class="form-control" ng-model="newSession[\'im_type\']" ng-change="displayDefaultAccount()"><option value="1" ng-if="item.teacher_obj.user_detail_obj.skype_account">Skype</option><option value="6" ng-if="item.teacher_obj.user_detail_obj.google_talk_account">Google Hangouts</option><option value="7" ng-if="item.teacher_obj.user_detail_obj.qq_account">QQ</option><option value="8" ng-if="item.teacher_obj.user_detail_obj.face_time_account">FaceTime</option><option value="9" ng-if="item.teacher_obj.user_detail_obj.wechat_account">Wechat</option></select></div></div><div class="col-md-6"><div class="form-group no-margin-hr"><label>ID</label><input type="text" class="form-control" ng-model="newSession[\'student_im_account\']" name="im_account" required ng-minlength="3" ng-maxlength="50"> <span class="help-block" ng-if="(submitFlag||Form1.im_account.$dirty) && Form1.im_account.$invalid">{{\'TP320\'|translate}}</span><p class="text-muted" translate="TS236"></p></div></div><p style="color:red;margin-left: 12px" ng-show="CommunicationChanged">{{\'PM656\'|t}}</p></div></div><hr></div><div ng-if="have.classRoom"><italki-classroom></italki-classroom></div></div><div id="Form1_newSession_msg"><div class="text-center session-request-icon"><span class="tl-icon">3</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TP038\'|translate}}</h4><div><p class="text-muted">{{\'TP259\'|translate}}</p><p><textarea class="form-control" rows="8" name="newSession_msg" ng-model="newSession.msg" ng-maxlength="2000"></textarea><span class="help-block" ng-if="Form1.newSession_msg.$invalid">{{\'ST024\'|t|format:2000}}</span></p></div></div></div></div></div></div><div class="panel" ng-hide="!item"><div class="panel-body"><div class="grid-gutter-margin-b"><ul class="list-unstyled"><li id="tbl_price"><h4 class="no-margin-t" translate="TS037"></h4><table class="table" style="border:2px #ff4338 solid"><tbody><tr><td width="200" translate="TS057"></td><td align="left">$<span ng-bind="item.available_itc_usd|kpToUsd|number:2"></span> USD</td></tr><tr><td bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338" translate="TS059"></span></strong></td><td align="left" bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338">$<span id="tbl_price_td" ng-bind="currentAmount()|kpToUsd|number:2"></span> USD</span></strong></td></tr></tbody></table></li><li><label class="control-label">{{\'UR057\'|translate}}</label><div class="row"><div class="col-md-6"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|translate}}" class="form-control" ng-model="newSession[\'pwd\']" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-if="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span></div></div></li></ul></div><div class="form-group w-icon" ng-hide="!error"><div ng-if="error.type!=\'PaymentAccountDisabled\'" class="alert alert-warning animated shake" ng-bind="error.msg"></div><div ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning animated shake">{{\'KP305\'|t}}{{\'KP306\'|t}}</div></div><div class=""><p translate="TS222"></p><button class="btn btn-primary with-spinner" italki-click-with-spinner="submit(Form1)" stext="LN116"></button></div></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'TP210\'|t}}</h4><p>{{\'TS251\'|t}}</p><p><a href="http://support.italki.com/" target="_blank">{{\'TP136\'|t}}</a></p></div></div><div class="panel no-border panel-dark" ng-show="isCN()"><div class="panel-body"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div></ng-form></div><div ng-include="\'/views/sessions/request/result.html\'" ng-if="sessionRequestResult&&!disabledAccount"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),a.put("/views/sessions/request/result.html",'<h3>{{\'TS600\'|translate}}</h3><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-9"><p ng-bind-html="\'TS631\'|t|format:\'48 hours\'"></p><p><button class="btn btn-primary" ng-click="goToDetail()"><span class="btn-txt">{{\'TP143\'|t}}</span></button></p><hr><ul class="list-inline"><li><a ui-sref="session.explore">{{\'TP158\'|t}}</a></li><li><a ui-sref="dashboard">{{\'TP159\'|t}}</a></li></ul></div><div class="col-md-3" ng-show="isCN()"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div></div></div>'),a.put("/views/sessions/request/schedule.html",'<div class="session-schedule" ng-if="!disabledAccount && !sessionRequestResult"><h2 translate="TS108" class="grid-gutter-margin-b page-title"></h2><div class="row"><div class="col-md-12 top-schedule-block"><div class="panel panel-shadow"><div class="panel-body" style="padding-bottom: 0px !important"><schedule-summary></schedule-summary><schedule-divider></schedule-divider><schedule-view-details model="model"></schedule-view-details></div></div></div><div class="col-md-8 left-schedule-block"><div class="panel panel-shadow"><div class="panel-body" style="padding-top: 0"><form name="schedule" ng-submit="submitForm()" novalidate><ng-steps name="name" current-step="currentStep" model="model" on-finish="onFinish()" on-cancel="onCancel() " on-number="model.selectedSession.package_length"><ng-step on-enter="steps.stepOne.onEnter" on-exit="steps.stepOne.onExit" can-exit="steps.stepOne.canExit" step-title="{{steps.stepOne.title}}" step-heading-title="{{steps.stepOne.headingTitle}}"><schedule-step-one step-data="steps.stepOne" step-number="1" model="model" current-step="currentStep"></schedule-step-one><schedule-divider></schedule-divider></ng-step><ng-step on-enter="steps.stepTwo.onEnter" on-exit="steps.stepTwo.onExit" can-enter="steps.stepTwo.canEnter" can-exit="steps.stepTwo.canExit" step-title="{{steps.stepTwo.title}}" step-heading-title="{{steps.stepTwo.headingTitle}}"><schedule-step-two step-data="steps.stepTwo" model="model" step-number="2" current-step="currentStep"></schedule-step-two><schedule-divider></schedule-divider></ng-step><ng-step on-enter="steps.stepThree.onEnter" on-exit="steps.stepThree.onExit" can-enter="steps.stepThree.canEnter" can-exit="steps.stepThree.canExit" step-title="{{steps.stepThree.title}}" step-heading-title="{{steps.stepThree.headingTitle}}"><schedule-step-three step-data="steps.stepThree" model="model" step-number="3" current-step="currentStep"></schedule-step-three><schedule-divider></schedule-divider></ng-step><ng-step on-enter="steps.stepFive.onEnter" on-exit="steps.stepFive.onExit" can-enter="steps.stepFive.canEnter" can-exit="steps.stepFive.canExit" step-title="{{steps.stepFive.title}}" step-heading-title="{{steps.stepFive.headingTitle}}"><schedule-step-five step-data="steps.stepFive" model="model" step-number="4" current-step="currentStep"></schedule-step-five></ng-step></ng-steps></form></div></div></div><div class="col-md-4 right-schedule-block"><div class="schedule-summary panel-shadow"><schedule-summary></schedule-summary></div><div class="panel panel-shadow"><div class="panel-body no-padding-t no-padding-b"><schedule-details model="model"></schedule-details></div></div></div></div></div><div ng-include="\'/views/sessions/request/package.result.html\'" ng-if="sessionRequestResult && model.isPackage"></div><div ng-include="\'/views/sessions/request/result.html\'" ng-if="sessionRequestResult && !model.isPackage"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),a.put("/views/sessions/request/schedule.trial.html",'<div class="session-schedule" ng-if="!disabledAccount && !sessionRequestResult"><h2 translate="TS108" class="grid-gutter-margin-b page-title"></h2><div class="row"><div class="col-md-12 top-schedule-block"><div class="panel panel-shadow"><div class="panel-body"><schedule-summary></schedule-summary><schedule-divider></schedule-divider><schedule-view-details model="model"></schedule-view-details></div></div></div><div class="col-md-8 left-schedule-block"><div class="panel panel-shadow"><div class="panel-body" style="padding-top: 0"><form name="schedule" ng-submit="submitForm()" novalidate><ng-steps name="name" current-step="currentStep" model="model" on-finish="onFinish()" on-cancel="onCancel() "><ng-step on-enter="steps.stepOne.onEnter" on-exit="steps.stepOne.onExit" can-exit="steps.stepOne.canExit" step-title="{{steps.stepOne.title}}" step-heading-title="{{steps.stepOne.headingTitle}}"><schedule-step-trial step-data="steps.stepOne" step-number="1" step-type="3" model="model" current-step="currentStep"></schedule-step-trial><schedule-divider></schedule-divider></ng-step><ng-step on-enter="steps.stepThree.onEnter" on-exit="steps.stepThree.onExit" can-enter="steps.stepThree.canEnter" can-exit="steps.stepThree.canExit" step-title="{{steps.stepThree.title}}" step-heading-title="{{steps.stepThree.headingTitle}}"><schedule-step-three step-data="steps.stepThree" step-number="2" model="model" current-step="currentStep"></schedule-step-three><schedule-divider></schedule-divider></ng-step><ng-step on-enter="steps.stepFive.onEnter" on-exit="steps.stepFive.onExit" can-enter="steps.stepFive.canEnter" can-exit="steps.stepFive.canExit" step-title="{{steps.stepFive.title}}" step-heading-title="{{steps.stepFive.headingTitle}}"><schedule-step-five step-data="steps.stepFive" model="model" step-number="3" current-step="currentStep"></schedule-step-five></ng-step></ng-steps></form></div></div></div><div class="col-md-4 right-schedule-block"><div class="schedule-summary panel-shadow"><schedule-summary></schedule-summary></div><div class="panel panel-shadow"><div class="panel-body no-padding-t no-padding-b"><schedule-details model="model"></schedule-details></div></div></div></div></div><div ng-include="\'/views/sessions/request/result.html\'" ng-if="sessionRequestResult"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),a.put("/views/sessions/request/trial.html",'<div ng-hide="sessionRequestResult || disabledAccount"><h3 translate="TS108"></h3><div class="grid-gutter-margin-b session_nav"><div class="layer"><ul><li class="first current"><div>{{\'TS092\'|translate}}</div></li><li><div>{{\'TS093\'|translate}}</div></li><li><div>{{\'TS094\'|translate}}</div></li><li class="last"><div>{{\'TS095\'|translate}}</div></li></ul></div></div><ng-form name="Form1"><div class="panel" ng-hide="!item"><table class="visible-desktop table table-bordered"><tr><td style="background: #f3f3f3; padding: 10px 20px" nowrap="nowrap"><span class="pull-left"><img style="width:50px; border-radius: 9999px" ng-src="{{ item.teacher_obj|avatar:\'100\' }}" kp-fallback-avatar></span><div style="padding-left: 70px"><span class="text-muted">{{\'C0122\'|translate}}</span><br><span class="text-lg color-link">{{item.teacher_obj.nickname}}</span><br><span class="text-sm">{{ item.teacher_obj.textid }}</span></div></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</span><br><span class="text-lg">{{ \'TS026\'|translate }}:&nbsp;{{ $stateParams.language|translate }}</span></td><td style="padding: 10px 20px" nowrap="nowrap"><span class="text-muted">{{\'TP081\'|translate}}</span><br><span class="text-lg">30 {{\'TS116\'|t}}</span></td><td style="padding: 10px 20px"><span class="text-muted">{{\'TP008\'|translate}}</span><br><span class="text-lg">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle" tooltip="{{\'HL203\'|translate}}"></i><br><span class="text-muted">≈ <span ng-bind="item.session_itc_usd*currentUser.currency_rate|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></td></tr></table><div class="panel-body visible-phone"><p><strong>{{\'C0122\'|translate}}</strong><br><strong class="color-link">{{item.teacher_obj.nickname}}</strong></p><p><strong>{{\'TP041\'|translate}} / {{\'TP035\'|translate}}</strong><br>{{ \'TS026\'|translate }}:{{ $stateParams.language|translate }}</p><p><strong>{{\'TP081\'|translate}}</strong><br><span>30</span> min / session</p><p><strong>{{\'TP008\'|translate}}</strong><br><span class="or_price">$<span ng-bind="item.session_itc_usd|kpToUsd|number:2"></span> USD</span> <i class="fa fa-question-circle"></i><br><span class="grey11">≈ <span ng-bind="item.session_itc_usd*currentUser.currency_rate|kpToItcToCurrency|number:2"></span> {{currentUser.currency}}</span></p></div></div><div class="row"><div class="col-md-9"><div class="panel loading-layout"><kp-loading indicator="item"></kp-loading><div class="panel-body" ng-hide="!item"><div class="login_area"><div id="Form1_forSelectedTimes"><div class="text-center session-request-icon"><span class="tl-icon">1</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TS027\'|t}}</h4><div class="intro_1"><ul class="session_re"><li>{{\'TS220\'|t}}</li></ul></div><div class="intro_2"><div id="Set_Time" class="intro_1_time"></div><div class="intro_1_number" id="intro_1_number" style="display:none"><span id="Set_Time_Count_span">0</span> Lesson Schedule Requests</div><div class="alert alert-info" id="Set_Time_is3" ng-hide="newSession.selectedTimes.length>0 || (submitFlag && Form1.forSelectedTimes.$invalid)">{{\'TS223\'|translate}}</div><div ng-if="submitFlag && Form1.forSelectedTimes.$invalid && newSession.selectedTimes.length!=1" class="alert">{{\'TS303\'|t}}</div></div><div class="intro_3"></div><div><table class="table table-bordered" ng-hide="newSession.selectedTimes.length<1"><thead><tr><td translate="TS030"></td><td translate="TS031"></td><td translate="TS041"></td></tr></thead><tbody><tr ng-repeat="item in newSession.selectedTimes"><td>{{ item.date|amDate:\'TF001\'}}</td><td ng-switch="item.status"><i class="fa fa-check text-success" ng-switch-when="1"></i> <i class="fa fa-close text-error" ng-switch-when="0"></i> <i class="fa fa-spinner" ng-switch-when="-1"></i> <i ng-switch-default=""></i></td><td><a href="" ng-click="removeTime(item)">{{\'C0049\'|translate}}</a></td></tr></tbody></table><input type="hidden" name="forSelectedTimes" ng-model="forSelectedTimes" ensure-succ="checkSelectedTimes"><p style="color:red" ng-show="TimesAvailable">{{\'PM655\'|t}}</p><a class="btn btn-primary" ng-click="openScheduleModal()" ng-hide="newSession.selectedTimes.length">{{\'TS108\'|translate}}</a><hr></div></div></div><div id="Form1_im_account"><div class="text-center session-request-icon"><span class="tl-icon">2</span></div><div class="session-request-content" ng-if="!have.classRoom"><h4 class="no-margin-t">{{\'TS028\'|translate}}</h4><div><p ng-bind-html="\'TS221\'|translate"></p><div class="row"><div class="col-md-6"><div class="form-group no-margin-hr"><label>{{\'ST750\'|translate}}</label><select class="form-control" ng-model="newSession[\'im_type\']" ng-change="displayDefaultAccount()"><option value="1" ng-if="item.teacher_obj.user_detail_obj.skype_account">Skype</option><option value="6" ng-if="item.teacher_obj.user_detail_obj.google_talk_account">Google Hangouts</option><option value="7" ng-if="item.teacher_obj.user_detail_obj.qq_account">QQ</option><option value="8" ng-if="item.teacher_obj.user_detail_obj.face_time_account">FaceTime</option><option value="9" ng-if="item.teacher_obj.user_detail_obj.wechat_account">Wechat</option></select></div></div><div class="col-md-6"><div class="form-group no-margin-hr"><label>ID</label><input type="text" class="form-control" ng-model="newSession[\'student_im_account\']" name="im_account" required ng-minlength="3" ng-maxlength="50"> <span class="help-block" ng-if="(submitFlag||Form1.im_account.$dirty) && Form1.im_account.$invalid">{{\'TP320\'|translate}}</span><p class="text-muted" translate="TS236"></p></div></div><p style="color:red;margin-left: 12px" ng-show="CommunicationChanged">{{\'PM656\'|t}}</p></div></div><hr></div><div ng-if="have.classRoom"><italki-classroom></italki-classroom></div></div><div id="Form1_newSession_msg"><div class="text-center session-request-icon"><span class="tl-icon">3</span></div><div class="session-request-content"><h4 class="no-margin-t">{{\'TP038\'|translate}}</h4><div><p class="text-muted">{{\'TP259\'|translate}}</p><p><textarea class="form-control" rows="8" ng-model="newSession.msg" name="newSession_msg" ng-model="newSession.msg" ng-maxlength="2000"></textarea><span class="help-block" ng-if="Form1.newSession_msg.$invalid">{{\'ST024\'|t|format:2000}}</span></p></div></div></div></div></div></div><div class="panel" ng-hide="!item"><div class="panel-body"><div class="grid-gutter-margin-b"><ul class="list-unstyled"><li id="tbl_price"><h4 class="no-margin-t" translate="TS037"></h4><table class="table" style="border:2px #ff4338 solid"><tbody><tr><td width="200" translate="TS057"></td><td align="left">$<span ng-bind="item.available_itc_usd|kpToUsd|number:2"></span> USD</td></tr><tr><td bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338" translate="TS059"></span></strong></td><td align="left" bgcolor="#efefef"><strong><span style="font-size:16px; color:#ff4338">$<span ng-bind="currentAmount()|kpToUsd|number:2"></span> USD</span></strong></td></tr></tbody></table></li><li><label class="control-label">{{\'UR057\'|translate}}</label><div class="row"><div class="col-md-6"><div class="has-feedback"><input type="password" placeholder="{{\'ST229\'|translate}}" maxlength="20" class="form-control" ng-model="newSession[\'pwd\']" name="newSession_pwd" required ng-maxlength="20"> <i class="fa fa-lock form-control-feedback" style="top: 8px"></i></div><span ng-if="(submitFlag||Form1.newSession_pwd.$dirty) && Form1.newSession_pwd.$invalid" class="help-block">{{\'UR015\'|translate}}</span></div></div></li></ul></div><div class="form-group w-icon" ng-hide="!error"><div ng-if="error.type!=\'PaymentAccountDisabled\'" class="alert alert-warning animated shake" ng-bind="error.msg"></div><div ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning animated shake">{{\'KP305\'|t}}{{\'KP306\'|t}}</div></div><div class=""><p translate="TS222"></p><button class="btn btn-primary with-spinner" italki-click-with-spinner="submit(Form1)" stext="LN116"></button></div></div></div></div><div class="col-md-3"><div class="panel no-border"><div class="panel-body"><h4 class="no-margin-t">{{\'TP210\'|t}}</h4><p>{{\'TS251\'|t}}</p><p><a>{{\'TP136\'|t}}</a></p></div></div></div></div></ng-form></div><div ng-include="\'/views/sessions/request/result.html\'" ng-if="sessionRequestResult && !disabledAccount"></div><div ng-if="disabledAccount" style="padding-top: 9px"><h2>{{\'TS060\'|t}}</h2><div class="panel"><div class="panel-body"><div class="grid-gutter-margin-b" style="margin-bottom: 200px"><h4>{{\'KP305\'|t}}{{\'KP306\'|t}}</h4></div></div></div></div>'),
a.put("/views/sessions/session.bs.html","<div ui-view></div>"),a.put("/views/sessions/session.calendar.html",'<div class="session-list-page"><h2 class="grid-gutter-margin-b">{{\'M0085\'|t}}</h2><div class="panel-shadow"><div class="session-list-head row no-margin"><div class="col-md-12 no-padding no-margin-b"><kp-session-head show="4"></kp-session-head></div></div><kp-month-week-calendar></kp-month-week-calendar></div></div>'),a.put("/views/sessions/session.explore.html",'<div class="session-list-page"><h2 class="grid-gutter-margin-b">{{\'M0085\'|t}}</h2><div class="panel-shadow"><div class="session-list-head row no-margin"><div class="col-md-6 no-padding no-margin-b"><kp-session-head show="1"></kp-session-head></div><div class="col-md-6 no-padding no-margin-b"><div class="session-search-head"><div class="row no-margin"><div class="col-sm-6 no-padding"><div class="italki-drop-down filter-icon" ng-if="isTeacher()"><ui-select is-open="false" ng-required="true" ng-model="filter.type" search-enabled="false" on-select="applyFilter($item)"><ui-select-match placeholder="Select"><span ng-bind-html="$select.selected.name?\'<span>\'+($select.selected.name|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.name" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="item.type as item in teacher_session_view_types track by $index"><div ng-bind-html="item.name|t"></div></ui-select-choices></ui-select></div><div class="italki-drop-down" ng-if="!isTeacher()"><ui-select is-open="false" ng-required="true" ng-model="filter.type" search-enabled="false" on-select="applyFilter($item)"><ui-select-match placeholder="Select"><span ng-bind-html="$select.selected.name?\'<span>\'+($select.selected.name|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.name" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="item.type as item in session_view_types track by $index"><div ng-bind-html="item.name|t"></div></ui-select-choices></ui-select></div></div><div class="col-sm-6 no-padding session-user-filter"><form class="italki-autocomplete-container"><input type="text" ng-model="selectedUser" placeholder="{{\'C3022\'|t}}" typeahead="user as user.nickname for user in users|filter:{nickname:$viewValue}|limitTo:7" typeahead-template-url="/views/kp/search.user.typeahead.html" class="form-control search" typeahead-on-select="filterByUser($item, $model, $label)"> <button type="reset" class="close" ng-click="showData()">&times;</button></form></div></div></div></div></div><div><div class="session-list panel loading-layout no-border-t"><kp-loading indicator="items"></kp-loading><kp-no-found items="items" tips="TP362"></kp-no-found><div ng-repeat="item in items track by item.session_id" ng-click="goToDetail(item)" class="session-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body"><div class="row"><div class="col-sm-7"><strong>{{item.session_start_time_user|amDate:\'TF004\'}} - {{item.session_end_time_user|amDate:\'HH:mm\' }}</strong> &nbsp; <span ng-show="item.message_unread>0" class="is-relative"><i class="fa fa-envelope text-muted" title="{{\'TS234\'|t|format:item.message_unread}}"></i> <i class="fa fa-circle text-danger" style="font-size: 9px;top: -5px;right: -5px;position: absolute !important"></i></span><ul class="list-inline no-margin-b"><li class="text-muted">{{item|sessionCourseTitle}}</li><li class="text-muted">{{item.learn_language|t}}</li><li class="text-muted">#{{item.session_id}}</li></ul><span class="label package" ng-if="item.session_type==\'2\'">{{\'TS038\'|t}}</span></div><div class="col-sm-3"><a ng-click="goToProfile(item)"><img class="rounded" style="margin-right: 15px; width:40px" align="left" width="50" title="{{item.oppo_user_obj.nickname}}" ng-src="{{item.oppo_user_obj|avatar}}" kp-fallback-avatar></a><strong>{{item.oppo_user_obj.nickname}}</strong><br><span class="text-light-gray">{{(item.focus_user_is_teacher ? \'C0115\':\'C0122\')|t}}</span></div><div class="col-sm-2 text-right"><span ng-bind-html="getTag(item)"></span></div></div></div></div></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div></div>'),a.put("/views/sessions/session.package.html",'<div class="session-list-page"><h2 class="grid-gutter-margin-b">{{\'M0085\'|t}}</h2><div class="panel-shadow"><div class="session-list-head row no-margin"><div class="col-md-6 no-padding no-margin-b"><kp-session-head show="2"></kp-session-head></div><div class="col-md-6 no-padding no-margin-b"><div class="session-search-head"><div class="row no-margin"><div class="col-sm-6 no-padding"><div class="italki-drop-down filter-icon"><ui-select is-open="false" ng-required="true" ng-model="filter.type" search-enabled="false" on-select="applyFilter($item)"><ui-select-match placeholder="Select"><span ng-bind-html="$select.selected.name?\'<span>\'+($select.selected.name|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.name" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="item.type as item in package_view_types track by $index"><div ng-bind-html="item.name|t"></div></ui-select-choices></ui-select></div></div><div class="col-sm-6 no-padding session-user-filter"><form class="italki-autocomplete-container"><input type="text" ng-model="selectedUser" placeholder="{{\'C3022\'|t}}" typeahead="user as user.nickname for user in users|filter:{nickname:$viewValue}|limitTo:7" typeahead-template-url="/views/kp/search.user.typeahead.html" class="form-control search" typeahead-on-select="filterByUser($item, $model, $label)"> <button type="reset" class="close" ng-click="showData()">&times;</button></form></div></div></div></div></div><div><div class="session-list panel loading-layout no-border-t"><kp-loading indicator="items"></kp-loading><kp-no-found items="items"></kp-no-found><div ng-repeat="package in items" ng-click="goToDetail(package.id)" class="session-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body"><div class="row"><div class="col-md-7"><ul class="list-inline no-margin-b"><li><strong>{{package|sessionCourseTitle}}</strong>&nbsp; <span ng-show="package.message_unread>0" class="is-relative"><i class="fa fa-envelope text-muted" title="{{\'TS234\'|t|format:package.message_unread}}"></i> <i class="fa fa-circle text-danger" style="font-size: 9px;top: -5px;right: -5px;position: absolute !important"></i></span></li><li class="text-muted">{{package.learn_language|lowercase|t}}</li><li><span class="text-muted">#{{package.id}}</span></li></ul><ul class="list-inline no-margin-b text-muted"><li>{{\'TP074\'|t}}: {{package.sessions_finished}}</li><li class="">{{\'TP075\'|t}}: {{package.sessions_unarranged}}</li><li class="">{{\'TP076\'|t}}: {{package.sessions_new}}</li><li class="">{{\'TP071\'|t}}: {{package.sessions_problem}}</li></ul><span class="text-danger" ng-if="package.expiration_time">{{"TP269"|t}}: {{package.expiration_time|clearTZ|date:"yyyy-MM-dd"}}</span></div><div class="col-md-3"><a ng-click="goToProfile(item)"><img class="rounded" style="margin-right: 15px; width:40px" align="left" width="50" title="{{package.oppo_user_obj.nickname}}" ng-src="{{package.oppo_user_obj|avatar}}" kp-fallback-avatar></a><strong>{{package.oppo_user_obj.nickname}}</strong><br><span class="text-light-gray">{{(package.focus_user_is_teacher ? \'C0115\':\'C0122\')|t}}</span></div><div class="col-md-2 text-right"><span ng-bind-html="getTag(package)"></span></div></div></div></div></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div></div>'),a.put("/views/sessions/session.problem.html",'<div class="session-list-page"><h2 class="grid-gutter-margin-b">{{\'M0085\'|t}}</h2><div class="panel-shadow"><div class="session-list-head row no-margin"><div class="col-md-6 no-padding no-margin-b"><kp-session-head show="3"></kp-session-head></div><div class="col-md-6 no-padding no-margin-b"><div class="session-search-head"><div class="row no-margin"><div class="col-sm-6 no-padding"><div class="italki-drop-down filter-icon"><ui-select is-open="false" ng-required="true" ng-model="filter.type" search-enabled="false" on-select="applyFilter($item)"><ui-select-match placeholder="Select"><span ng-bind-html="$select.selected.name?\'<span>\'+($select.selected.name|t)+\'</span>\':\'\'"></span> <span ng-if="uiItemsFilter&&!$select.selected.name" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="item.type as item in session_problem_view_types track by $index"><div ng-bind-html="item.name|t"></div></ui-select-choices></ui-select></div></div><div class="col-sm-6 no-padding session-user-filter"><form class="italki-autocomplete-container"><input type="text" ng-model="selectedUser" placeholder="{{\'C3022\'|t}}" typeahead="user as user.nickname for user in users|filter:{nickname:$viewValue}|limitTo:7" typeahead-template-url="/views/kp/search.user.typeahead.html" class="form-control search" typeahead-on-select="filterByUser($item, $model, $label)"> <button type="reset" class="close" ng-click="showData()">&times;</button></form></div></div></div></div></div><div><div class="session-list panel loading-layout no-border-t"><kp-loading indicator="items"></kp-loading><kp-no-found items="items"></kp-no-found><div ng-repeat="item in items" ng-click="goDetail(item.session_id)" class="session-item yes-cursor cursor-over" ng-class="{\'animation-list-item\':$index}"><div class="panel-body"><div class="row"><div class="col-md-7"><strong>{{item.session_start_time_user|amDate:\'TF004\'}} - {{item.session_end_time_user|amDate:\'HH:mm\' }}</strong> &nbsp; <i class="fa fa-circle text-danger" style="font-size: 9px" ng-show="item.message_unread>0" title="{{\'TS234\'|t|format:item.message_unread}}"></i><ul class="list-inline no-margin-b"><li class="text-muted">{{ item|sessionCourseTitle }}</li><li class="text-muted">#{{item.session_id}}</li></ul><span class="label package" ng-if="item.session_type==\'2\'">{{\'TS038\'|t}}</span></div><div class="col-md-3"><a ng-click="goToProfile(item)"><img class="rounded" style="margin-right: 15px; width:40px" align="left" width="50" title="{{item.oppo_user_obj.nickname}}" ng-src="{{item.oppo_user_obj|avatar}}" kp-fallback-avatar></a><strong>{{item.oppo_user_obj.nickname}}</strong><br><span class="text-light-gray">{{(item.focus_user_is_teacher ? \'C0115\':\'C0122\')|t}}</span></div><div class="col-md-2 text-right"><span ng-bind-html="getTag(item)"></span></div></div></div></div><button class="btn btn-labeled btn-block" ng-if="(meta && meta.has_next) || loadMoreFlag" stext="MH046" italki-click-with-spinner="loadMore()"></button></div></div></div></div>'),a.put("/views/setting/account.deactivation.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'M0028\'|t}}</h4></div><div class="modal-body padding-bottom"><div ng-hide="currentUser.is_tutor||currentUser.is_pro||deactiveSuccess"><div class="alert alert-warning">{{\'ST119\'|t}}</div><div class="form-group no-margin-hr"><p>{{\'ST109\'|t}}</p><ul><li><label><input type="radio" value="0" class="px" ng-model="deactiveData.reason_option"> <span class="lbl"><span>{{\'ST202\'|t}}</span></span></label></li><li><label><input type="radio" value="1" class="px" ng-model="deactiveData.reason_option"> <span class="lbl"><span>{{\'ST203\'|t}}</span></span></label><span ng-show="deactiveData.reason_option==\'1\'"><br>{{\'ST204\'|t}} <a ui-sref="setting.notification">{{\'ST201\'|t}}</a></span></li><li><label><input type="radio" value="2" class="px" ng-model="deactiveData.reason_option"> <span class="lbl"><span>{{\'ST114\'|t}}</span></span></label><span ng-show="deactiveData.reason_option==\'2\'"><br>{{\'ST206\'|t}} <a ui-sref="setting.privacy">{{\'ST201\'|t}}</a></span></li><li><label><input type="radio" value="3" class="px" ng-model="deactiveData.reason_option"> <span class="lbl"><span>{{\'ST112\'|t}}</span></span></label><br><span ng-show="deactiveData.reason_option==\'3\'" ng-bind-html="\'ST207\'|t"><br></span></li><li><label><input type="radio" value="4" class="px" ng-model="deactiveData.reason_option"> <span class="lbl"><span>{{\'C0087\'|t}}</span></span></label><span ng-show="deactiveData.reason_option==\'4\'"><br><textarea class="formal-control" rows="4" cols="100" ng-model="deactiveData.reason_other"></textarea></span></li></ul></div></div><div class="alert alert-warning" ng-show="deactiveSuccess">{{\'ST208\'|t}}</div><div class="alert alert-warning" ng-show="currentUser.is_tutor||currentUser.is_pro">{{\'ST302\'|t}}</div></div><div class="modal-footer" ng-hide="deactiveSuccess"><button class="btn" ng-click="$dismiss()"><span class="btn-txt">{{\'C0056\'|t}}</span></button> <button ng-hide="currentUser.is_tutor||currentUser.is_pro" class="btn btn-primary" ng-click="deactiveSubmit()" ng-disabled="!validDeactiveData()"><span class="btn-txt">{{\'C0045\'|t}}</span></button></div>'),a.put("/views/setting/account.html",'<div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3" translate="PU000"></label><div class="col-sm-9"><span ng-if="data.expire_time">{{\'PU001\'|t}} [{{\'PU011\'|t}}: {{data.expire_time|amDate:\'TF002\':0:currentUser.timezone_iana}}]</span> <span ng-if="!data.expire_time"><a ui-sref="premium">{{\'PU103\'|t}}</a></span></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="M0035"></label><div class="col-sm-9"><div ng-hide="emailDiv"><span ng-bind="currentUser.email"></span>&nbsp; <span ng-click="emailDiv=!emailDiv;emailSucc=null;emailObj.email=null" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-if="emailSucc" ng-bind="emailSucc"></div><div ng-show="emailDiv"><p>{{\'UR030\'|t}}</p><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t" style="margin-bottom: 5px"><label translate="ST221"></label><input type="text" class="form-control" ng-model="emailObj.email"></div><span ng-hide="(emailObj.email != currentUser.email) || emailObj.email == null" class="help-block">{{\'UR018\'|t}}</span> <span ng-hide="validateEmail(emailObj.email) || emailObj.email== null" class="help-block">{{\'C1014\'|t}}</span> <span ng-show="showEmailExist" class="help-block" style="margin-bottom: 15px">{{emailError}}</span><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t" style="margin-bottom: 5px"><label translate="UR014"></label><input type="password" class="form-control" ng-model="emailObj.password"></div><span ng-hide="validatePWD(emailObj.password) || (emailObj.password==\'\' && !btnEmail)" class="help-block" style="margin-bottom: 15px">{{\'ST155\'|t|format:6:20}}</span> <span ng-show="showGeneric || showPasswordNotMatch" class="help-block" style="margin-bottom: 15px">{{emailError}}</span><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" italki-click-with-spinner="saveEmail()" stext="C0055" ng-disabled="!validateEmail(emailObj.email) || !validatePWD(emailObj.password || doEmail)"></button> <button class="btn btn-sm" ng-click="emailDiv=!emailDiv;emailSucc=null;emailObj.password=\'\';">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="M0025"></label><div class="col-sm-9"><div ng-hide="pwdDiv"><span>******</span>&nbsp; <span ng-click="pwdDiv=!pwdDiv;pwdSucc=null;" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-if="pwdSucc" ng-bind="pwdSucc"></div><div ng-show="pwdDiv"><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><div><label translate="ST152"></label><input type="password" class="form-control" ng-model="pwdObj.old_password"></div><span ng-hide="validatePWD(pwdObj.old_password) || (pwdObj.old_password==\'\' && !btnPwd)" class="help-block text-danger" style="margin-top: 9px">{{\'ST231\'|t}}</span></div><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><div><label translate="ST153"></label><input type="password" class="form-control" ng-model="pwdObj.new_password"></div><span ng-hide="validatePWD(pwdObj.new_password) || (pwdObj.new_password==\'\' && !btnPwd)" class="help-block text-danger" style="margin-top: 9px">{{\'ST155\'|t|format:6:20}}</span></div><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><div><label translate="ST154"></label><input type="password" class="form-control" ng-model="pwdObj.new_password1"></div><span ng-show="(pwdObj.new_password1!=pwdObj.new_password)&&pwdObj.new_password1.length>0" style="margin-top: 9px" class="help-block text-danger">{{\'UR058\'|t}}</span></div><div ng-if="pwdError" ng-bind="pwdError" style="padding: 10px;margin-bottom: 10px" class="alert-warning col-md-6 input-group"></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" italki-click-with-spinner="savePwd()" stext="C0055" ng-disabled="!validatePWD(pwdObj.old_password) || !validatePWD(pwdObj.new_password) ||\n                    pwdObj.new_password!=pwdObj.new_password1 || doPwd "></button> <button class="btn btn-sm" ng-click="pwdDiv=!pwdDiv;pwdSucc=null;pwdObj.new_password=\'\';pwdObj.new_password1=\'\';pwdObj.old_password=\'\';">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="PU007"></label><div class="col-sm-9"><span ng-if="(currentUser.is_premium || currentUser.is_teacher) && purlObj.uname">{{baseUri}}{{purlObj.uname}}</span> <span ng-if="!currentUser.is_premium && !currentUser.is_teacher">{{\'PU208\'|t}}</span><div ng-if="purlSucc" ng-bind="purlSucc"></div><p ng-hide="(!currentUser.is_premium && !currentUser.is_teacher)||purlDiv||purlObj.uname" ng-click="purlDiv=!purlDiv;purlSucc=null;"><a href="javascript:void(0);" translate="PU102"></a></p><div ng-show="purlDiv&&!updateUname"><div class="form-group no-margin-hr no-padding-t no-border-t"><span class="" translate="PU209"></span><br><span class="" translate="C0127"></span>: {{baseUri}}john.smith</div><div class="input-group grid-gutter-margin-b col-md-6"><span class="input-group-addon">{{baseUri}}</span> <input type="text" class="form-control" ng-model="purlObj.uname"></div><span ng-hide="validatePURL(purlObj.uname) || (purlObj.uname==\'\' && !btnPURL)" style="margin: -7px 164px" class="help-block">{{\'C3020\'|t}}</span><div ng-if="purlError" ng-bind="purlError"></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" ng-click="savePURL()" ng-disabled="!validatePURL(purlObj.uname) || doPURL"><span class="btn-txt">{{(doPURL?\'C0141\':\'C0055\')|t}}</span></button> <button class="btn btn-sm" ng-click="purlDiv=!purlDiv;purlSucc=null;purlObj.uname=null;"><span class="btn-txt">{{\'C0056\'|t}}</span></button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="ST148"></label><div ng-if="lanSucc" ng-bind="lanSucc"></div><div class="col-sm-9"><div ng-hide="lanDiv"><span ng-bind="getLanguages(currentUser.locale)"></span>&nbsp; <span ng-click="lanDiv=!lanDiv;lanSucc=null;" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-show="lanDiv"><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><label translate="ST149"></label><select ng-model="lanObj.locale" class="form-control" ng-options="m.mo as m.name for m in langArr"><option value="">{{\'C0061\'|t}}</option></select><span ng-hide="!lanError" style="z-index:2" class="help-block">{{\'C3019\'|t}}</span></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" ng-click="saveLan()" ng-disabled="lanObj.locale==\'\' || doLan">{{(doLan?\'C0141\':\'C0055\')|t}}</button> <button class="btn btn-sm" ng-click="lanDiv=!lanDiv;lanSucc=null;">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="ST327"></label><div ng-if="emailLanSucc" ng-bind="emailLanSucc"></div><div class="col-sm-9"><div ng-hide="emailLanDiv"><span ng-bind="getLanguages(saved_email_language_config)"></span>&nbsp; <span ng-click="emailLanDiv=!emailLanDiv;emailLanSucc=null;" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-show="emailLanDiv"><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><label translate="ST326"></label><select ng-model="emailLanObj.email_language_config" class="form-control" ng-options="m.mo as m.name for m in langArr"><option value="">{{\'C0061\'|t}}</option></select><span ng-hide="!emailLanError" style="z-index:2" class="help-block">{{\'C3019\'|t}}</span></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" ng-click="saveEmailLan()" ng-disabled="emailLanObj.email_language_config==\'\' || doEmailLan">{{(doEmailLan?\'C0141\':\'C0055\')|t}}</button> <button class="btn btn-sm" ng-click="emailLanDiv=!emailLanDiv;emailLanSucc=null;">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="ST051"></label><div ng-if="tzSucc" ng-bind="tzSucc"></div><div class="col-sm-9"><div ng-hide="tzDiv"><span>{{getTZLable(currentUser.timezone)}}<br>{{\'PB017\'|t}} <span class="label label-warning">{{getUserTime(currentUser.timezone)}}</span></span>&nbsp; <span ng-click="tzDiv=!tzDiv;tzSucc=null;" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-show="tzDiv"><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><label translate="ST150"></label><select id="selTZ" ng-model="tzObj.timezone" class="form-control" ng-options="m.v as m.t for m in timezones"><option value="">{{\'C0061\'|t}}</option></select></div><div ng-if="tzError" ng-bind="tzError"></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" italki-click-with-spinner="saveTZ()" stext="C0055" ng-disabled="tzObj.timezone==\'\' || doTZ"></button> <button class="btn btn-sm" ng-click="tzDiv=!tzDiv;tzSucc=null;">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3" translate="ST009"></label><div ng-if="currSucc" ng-bind="currSucc"></div><div class="col-sm-9"><div ng-hide="currDiv"><span>{{currentUser.currency}}</span>&nbsp;<span ng-click="currDiv=!currDiv;currSucc=null;" class="fa fa-pencil yes-cursor pull-right"></span></div><div ng-show="currDiv"><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><select ng-model="currObj.currency" class="form-control"><option value="">Default select</option><option value="AED">AED</option><option value="ARS">ARS $</option><option value="AUD">AUD $</option><option value="BGN">BGN лв</option><option value="BHD">BHD BD</option><option value="BRL">BRL R$</option><option value="CAD">CAD $</option><option value="CHF">CHF CHF</option><option value="CLP">CLP $</option><option value="CNY">CNY ¥</option><option value="CZK">CZK Kč</option><option value="DKK">DKK kr</option><option value="EGP">EGP £</option><option value="EUR">EUR €</option><option value="GBP">GBP £</option><option value="HKD">HKD $</option><option value="HRK">HRK kn</option><option value="HUF">HUF Ft</option><option value="IDR">IDR Rp</option><option value="ILS">ILS ₪</option><option value="INR">INR ₨</option><option value="ISK">ISK kr</option><option value="JOD">JOD</option><option value="JPY">JPY ¥</option><option value="KRW">KRW ₩</option><option value="KWD">KWD</option><option value="LBP">LBP £</option><option value="MXN">MXN $</option><option value="MYR">MYR RM</option><option value="NOK">NOK kr</option><option value="NZD">NZD $</option><option value="PHP">PHP Php</option><option value="PLN">PLN zł</option><option value="QAR">QAR ﷼</option><option value="RUB">RUB руб</option><option value="SEK">SEK kr</option><option value="SGD">SGD $</option><option value="THB">THB ฿</option><option value="TRY">TRY ₤</option><option value="TWD">TWD NT$</option><option value="USD">USD $</option><option value="VND">VND ₫</option><option value="ZAR">ZAR R</option></select></div><div ng-if="currError" ng-bind="currError"></div><div class="form-group no-margin-hr no-padding-t no-border-t"><button class="btn btn-primary btn-sm" italki-click-with-spinner="saveCurr()" stext="C0055" ng-disabled="currObj.currency==\'\' || doCurr"></button> <button class="btn btn-sm" ng-click="currDiv=!currDiv;currSucc=null;">{{\'C0056\'|t}}</button></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3">{{\'ST256\'|t}}</label><div class="col-sm-9"><div class="form-group no-margin no-padding-t no-border-t btn-group"><label class="btn" ng-class="{\'btn-primary\':isAM}" ng-click="setAM(1)" ng-model="isAM" btn-radio="1" style="width: auto">12H</label><label class="btn" ng-class="{\'btn-primary\':!isAM}" ng-click="setAM(0)" ng-model="isAM" btn-radio="0" style="width: auto">24H</label></div></div></div></div><ng-include src="\'/views/setting/thirdpart.html\'"></ng-include><div class="form-group no-margin-hr panel-padding-h"><div class="row"><a class="col-sm-3" ng-click="deactivation()">{{\'M0028\'|t}}</a></div></div></div>'),a.put("/views/setting/index.html",'<div><h2 class="grid-gutter-margin-b" translate="M0086"></h2><div class=""><div class="panel no-margin-b no-border-b"><ul class="content-block-tabs js-tabs-tabs no-margin-b"><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.account">{{\'M0082\'|t}}</a></li><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.privacy">{{\'M0026\'|t}}</a></li><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.notification">{{\'M0027\'|t}}</a></li><li ng-if="isOneStepPayment" class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.payments">{{\'AF046\'|t}}</a></li></ul></div><div class="panel form-horizontal form-bordered no-border-t"><div ui-view></div></div></div></div>'),a.put("/views/setting/notification.html",'<div class="alert" ng-class="{\'alert-info\':desktop_noti,\'alert-warnning\':!desktop_noti}"><h4>{{\'KP237\'|t|format: desktop_noti?(\'KP425\'|t):(\'KP426\'|t) }}</h4><h5>{{\'ST277\'|t}} {{\'ST296\'|t}}</h5><italki-switcher ng-model="desktop_noti" class="switcher-theme-square switcher-lg"></italki-switcher></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-xs-5">{{\'ST293\'|t}}</label><label class="col-xs-3 text-center">{{\'ST111\'|t}}</label><label class="col-xs-4 text-center">{{\'ST110\'|t}}</label></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST290\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input disabled="disabled" checked="checked" type="checkbox" class="px"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input disabled="disabled" checked="checked" type="checkbox" class="px"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST292\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n12"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n12"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST278\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n0"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n0"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST287\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n1"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n1"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST280\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n7"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n7"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST281\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n6"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n6"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST288\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n8"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n8"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST289\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n4"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n4"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST284\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n3"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n3"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST285\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n5"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n5"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST286\'|t}}</span><div class="col-xs-3 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.noti_allow_n9"><span class="lbl">&nbsp;</span></label></div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_n9"><span class="lbl">&nbsp;</span></label></div></div></div><div class="form-group no-margin-hr no-margin-b panel-padding-h"><div class="row"><span class="col-xs-5">{{\'ST226\'|t}}</span><div class="col-xs-3 text-center">&nbsp;</div><div class="col-xs-4 text-center"><label class="margin30"><input checked="checked" type="checkbox" class="px" ng-model="data.allow_email"><span class="lbl">&nbsp;</span></label></div></div></div></div><div ng-if="divSucc" ng-bind="divSucc"></div><div ng-if="divError" ng-bind="divError"></div><div class="panel-footer"><button class="btn btn-primary" ng-click="save()" ng-disabled="doSave">{{(doSave?\'C0141\':\'C0055\')|t}}</button></div>'),
a.put("/views/setting/payments.html",'<div class="panel panel-shadow settings-payment"><div class="panel-body"><div class="payment-authorization"><h3 class="settings-payment-title">{{\'PM567\'|t}}</h3><div class="authorization-method animation-list-item" ng-repeat="s in paymentSettings.stripeList track by $index"><div class="authorization-saved-method"><img class="payment-icon" width="46" height="32" src="/static/images/icon_{{s.brand.toLowerCase()}}.png"> <span ng-if="s.funding !== \'unknown\'" class="authorization-card-info"><span class="capitalize">{{s.funding}}</span> {{\'PM557\'|t}}<br>{{s.last4}}</span> <span ng-if="s.funding === \'unknown\'" class="authorization-card-info">{{\'PM558\'|t}}<br>{{s.last4}}</span> <span class="authorization-card-info hidden-xs">{{\'PM559\'|t}}<br>{{s.name}}</span> <span class="authorization-card-info hidden-xs">{{\'PM560\'|t}}<br>{{s.exp_month}}.{{s.exp_year}}</span> <a href="" ng-click="paymentSettings.removeCard(s.stripe_id, $index, \'stripe\')" class="pull-right delete-payment-method">{{\'C0050\'|t}}</a></div></div><div class="authorization-method animation-list-item"><div class="authorization-saved-method" ng-repeat="p in paymentSettings.paypalList track by $index"><img class="payment-icon" width="46" height="32" src="/static/images/icons/icon_paypal.svg"> <span class="authorization-card-info">{{\'PM561\'|t}}<br>{{p.paypal_email}}</span> <a href="" ng-click="paymentSettings.removeCard(p.reference_id, $index, \'paypal\')" class="pull-right delete-payment-method">{{\'C0050\'|t}}</a></div></div></div></div></div>'),a.put("/views/setting/privacy.block.list.modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'KP278\'|t}}</h4></div><ng-include src="\'/views/contact/contact.block.html\'"></ng-include>'),a.put("/views/setting/privacy.html",'<div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3">{{\'ST013\'|t}}</label><div class="col-sm-9"><p>{{\'ST254\'|t}}</p><div class="input-group col-md-6 form-group no-margin-hr no-padding-t no-border-t"><label>{{\'ST185\'|t}}</label><select class="form-control" ng-model="data.message_permission "><option value="1">{{\'ST117\'|t}}</option><option value="3">{{\'ST170\'|t}}</option></select></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3">{{\'ST188\'|t}}</label><div class="col-sm-9"><p>{{\'ST255\'|t}}</p><div class="checkbox"><label><input type="checkbox" class="px" ng-model="data.friend_request_permission"> <span class="lbl">{{\'ST115\'|t}}</span></label></div><div class="checkbox"><label><input type="checkbox" class="px" ng-model="data.allow_listing"> <span class="lbl">{{\'ST116\'|t}}</span></label></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><label class="col-sm-3">{{\'ST142\'|t}}</label><div class="col-sm-9"><div class="checkbox"><label><input type="checkbox" class="px" ng-model="data.show_dob"> <span class="lbl">{{\'ST751\'|t}}</span></label></div><div class="checkbox"><label><input type="checkbox" class="px" ng-model="data.friend_list_is_public"> <span class="lbl">{{\'ST752\'|t}}</span></label></div><div class="checkbox"><label><input type="checkbox" class="px" ng-model="data.student_course_session_is_public"> <span class="lbl">{{\'ST753\'|t}}</span></label></div><div class="checkbox" ng-if="currentUser.is_teacher && currentUser.is_pro"><label><input type="checkbox" class="px" ng-model="data.teacher_resume_is_public"> <span class="lbl">{{\'ST754\'|t}}</span></label></div></div></div></div><div class="form-group no-margin-hr panel-padding-h"><div class="row"><a class="col-sm-3" ng-click="blocklist()">{{\'KP278\'|t}}</a></div></div></div>'),a.put("/views/setting/thirdpart.html",'<div class="form-group no-margin-hr no-margin-b panel-padding-h" ng-controller="ThirdPartAccountSettingCtrl"><div class="row"><label class="col-sm-3">{{\'PB040\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-md-9"><label ng-show="!chinaWechat">{{\'UR402\'|t}}</label><label ng-show="chinaWechat">{{\'OB235\'|t}}</label><a ng-href="{{ thirdPart.facebook.profile }}" target="_blank" ng-show="!chinaWechat">{{ thirdPart.facebook.name||thirdPart.facebook.account }}</a> <a ng-href="{{ thirdPart.wechat.profile }}" target="_blank" ng-show="chinaWechat">{{ thirdPart.wechat.name||thirdPart.wechat.account }}</a></div><div class="col-md-3 text-right" style="padding-bottom: 12px"><button class="btn btn-primary" ng-click="handler(1);" ng-show="!chinaWechat">{{ (thirdPart.facebook?\'ST107\':\'HPT53\').translate() }}</button> <button class="btn btn-primary" ng-click="handler(9);" ng-show="chinaWechat">{{ (thirdPart.wechat?\'ST107\':\'HPT53\').translate() }}</button></div><p style="color:red;padding-left: 10px">{{wechatError}}</p></div></div></div></div>'),a.put("/views/setting/withdraw.html",'<kp-full-screen-loading indicator="!loading"></kp-full-screen-loading><h2 class="grid-gutter-margin-b" translate="MH032"></h2><div class="panel no-margin-b no-border-b"><kp-teacher-nav-li></kp-teacher-nav-li></div><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-heading"><h4>{{\'PA256\'|t}}</h4></div><div ng-if="!showNewWithdraw"><div class="panel-body"><div class="alert" ng-if="showMsg">{{\'PA257\'|t}}...</div><div class="alert" ng-if="hasWebmoney" ng-bind-html="\'PM168\'|t"></div><div class="grid-gutter-margin-b3"><table class="table"><thead><tr><th>{{\'PM039\'|t}}</th><th>{{\'TP049\'|t}}</th><th>{{\'ST028\'|t}} <i class="fa fa-question-circle text-left" tooltip="{{\'PM217\'|t}}"></i></th><th>{{\'TS041\'|t}}</th></tr></thead><tbody><tr class="bg-lightten-warnning"><td style="vertical-align: middle"><a href="http://support.italki.com/hc/en-us/articles/231107248" target="_blank" translate="PM632"></a> <i class="fa fa-question-circle text-left" tooltip="{{\'PM640\'|t}}"></i></td><td style="vertical-align: middle"><span ng-if="withdrawMethods[\'V\']">{{withdrawMethods[\'V\'].account}}<span ng-if="withdrawMethods[\'V\'].status!=1">({{\'KP403\'|t}})</span></span></td><td><div class="checkbox-inline"><label><input ng-if="withdrawMethods[\'V\']" type="radio" name="r_method" value="V" class="px" ng-model="primaryMethod" ng-click="setPrimaryMethod(\'V\')"><span class="lbl">&nbsp;</span></label></div></td><td style="vertical-align: middle"><span ng-if="!withdrawMethods[\'V\']"><a href="javascript:;" ng-click="addPayoneerWithdraw(\'V\',0)">{{\'PM634\'|t}}</a> or <a href="javascript:;" ng-click="addPayoneerWithdraw(\'V\',1)">{{\'HPT53\'|t}}</a></span></td></tr><tr><td style="vertical-align: middle">{{\'PM034\'|t}}</td><td style="vertical-align: middle"><span ng-if="withdrawMethods[\'2\']">{{withdrawMethods[\'2\'].account}}</span></td><td><div class="checkbox-inline"><label><input ng-if="withdrawMethods[\'2\']" type="radio" name="r_method" value="2" class="px" ng-model="primaryMethod" ng-click="setPrimaryMethod(\'2\')"><span class="lbl">&nbsp;</span></label></div></td><td style="vertical-align: middle"><a href="javascript:;" ng-click="addOrEditWithdrawInfo(\'2\')">{{withdrawMethods[\'2\']?\'C0053\':\'C0044\'|t}}</a></td></tr><tr><td style="vertical-align: middle">{{\'PM035\'|t}}</td><td style="vertical-align: middle"><span ng-if="withdrawMethods[\'3\']">{{withdrawMethods[\'3\'].account}}</span></td><td><div class="checkbox-inline"><label><input ng-if="withdrawMethods[\'3\']" type="radio" name="r_method" value="3" class="px" ng-model="primaryMethod" ng-click="setPrimaryMethod(\'3\')"><span class="lbl">&nbsp;</span></label></div></td><td style="vertical-align: middle"><a href="javascript:;" ng-click="addOrEditWithdrawInfo(\'3\')">{{withdrawMethods[\'3\']?\'C0053\':\'C0044\'|t}}</a></td></tr><tr><td style="vertical-align: middle">{{\'PM526\'|t}}</td><td style="vertical-align: middle"><span ng-if="withdrawMethods[\'7\']">{{withdrawMethods[\'7\'].account}}</span></td><td><div class="checkbox-inline"><label><input ng-if="withdrawMethods[\'7\']" type="radio" name="r_method" value="7" class="px" ng-model="primaryMethod" ng-click="setPrimaryMethod(\'7\')"><span class="lbl">&nbsp;</span></label></div></td><td style="vertical-align: middle"><a href="javascript:;" ng-click="addOrEditWithdrawInfo(\'7\')">{{withdrawMethods[\'7\']?\'C0053\':\'C0044\'|t}}</a></td></tr><tr><td style="vertical-align: middle"><a href="http://support.italki.com/hc/en-us/articles/206351808" target="_blank" translate="PM633"></a> <i class="fa fa-question-circle text-left" tooltip="{{\'PM640\'|t}}"></i></td><td style="vertical-align: middle"><span ng-if="withdrawMethods[\'U\']">{{\'PM635\'|t}}<span ng-if="withdrawMethods[\'U\'].status!=1">({{\'KP403\'|t}})</span></span></td><td><div class="checkbox-inline"><label><input ng-if="withdrawMethods[\'U\']" type="radio" name="r_method" value="U" class="px" ng-model="primaryMethod" ng-click="setPrimaryMethod(\'U\')"><span class="lbl">&nbsp;</span></label></div></td><td style="vertical-align: middle"><span ng-if="!withdrawMethods[\'U\']"><a href="javascript:;" ng-click="addPayoneerWithdraw(\'U\',0)">{{\'PM634\'|t}}</a> or <a href="javascript:;" ng-click="addPayoneerWithdraw(\'U\',1)">{{\'HPT53\'|t}}</a></span></td></tr></tbody></table><div class="note note-info no-border"><button class="btn btn-primary" ng-click="openWithdrawModal()" ng-disabled="!primaryMethod">{{\'PM003\'|t}}</button></div></div><hr><div class=""><h4>{{\'PM716\'|t}}</h4><div><ul class="list-inline"><li><img src="/static/images/payment/icon_paypalb.png" align="absmiddle"></li><li><img src="/static/images/payment/icon_monerbb.png" align="absmiddle"></li><li><img src="/static/images/payment/icon_alipayb.png" align="absmiddle"></li><li><img src="/static/images/payment/icon_payoneer.png" align="absmiddle"></li></ul><p class="text-muted">{{\'PA270\'|t}}</p><p class="text-muted">{{\'PA271\'|t}}</p><p class="text-muted">{{\'PA272\'|t}} <a href="http://support.italki.com/hc/en-us/articles/210002367" target="_blank">http://support.italki.com/hc/en-us/articles/210002367</a></p></div></div></div></div><div ng-if="showNewWithdraw"><div class="panel-body text-center"><img src="/static/images/payment/payonerr.png"><h1>{{\'ST328\'|t}}</h1><p>{{\'ST329\'|t}}</p><button class="btn" ng-click="addPayoneerWithdraw(\'V\',0)">{{\'ST330\'|t}}</button> &nbsp; <button class="btn" ng-click="addPayoneerWithdraw(\'V\',1)">{{\'ST331\'|t}}</button></div></div></div>'),a.put("/views/teacher/apply/already.html",'<div ui-view="" class="container" autoscroll="" style="margin-top: 30px"><div class="grid-gutter-margin-b session_nav" style="margin-top: 16px"><div class="layer"><ul class="session_nav"><li class="first" style="cursor:pointer"><div>{{\'ST047\'|t}}</div></li><li><div>{{\'M0041\'|t}}</div></li><li><div>{{\'M0014\'|t}}</div></li><li class="last current"><div>{{\'TS008\'|t}}</div></li></ul></div></div><div ng-if="is_applying_pro==0" class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-3 text-center"><img src="/static/images/icon_big_info.png" style="margin-top: 100px"></div><div class="col-sm-9"><h2>{{\'TC200\'|t}}</h2><span>{{\'TC203\'|t}} &nbsp;<a href="http://teachers.italki.com" target="_blank">{{\'TC204\'|t}}&nbsp;</a>{{\'TC205\'|t}}</span><h3>{{\'TC201\'|t}}</h3><span>{{\'TC206\'|t}}</span><ul><li>{{\'TC207\'|t}}</li><li>{{\'TC208\'|t}}</li></ul><p><span>{{\'TC209\'|t}} <a href="http://support.italki.com/entries/22131060-What-types-of-teaching-credentials-are-acceptable-to-be-approved-as-a-Professional-Teacher-" target="_blank">{{\'TC210\'|t}}</a></span><ul><li><strong>{{\'TC211\'|t}}</strong><br>{{\'TC212\'|t}}</li><li><strong>{{\'TC213\'|t}}</strong><br>{{\'TC214\'|t}}</li><li><strong>{{\'TC215\'|t}}</strong><br>{{\'TC216\'|t}}</li></ul></p></div></div></div></div></div><div ng-if="is_applying_pro==1" class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-3 text-center"><img src="/static/images/icon_big_info.png"></div><div class="col-sm-9"><h2>{{\'TC202\'|t}}</h2><span>{{\'TC203\'|t}} &nbsp;<a href="https://support.italki.com/hc/en-us/categories/200405038-Teaching-on-italki" target="_blank">{{\'TC204\'|t}}</a>. {{\'TC205\'|t}}</span></div></div></div></div></div><div ng-if="is_applying_pro==0" class="forn_submit text-center"><a ui-sref="teacherApply.tutortopro" class="btn btn-primary btn-lg">{{\'TC100\'|t}}</a> &nbsp; <a ui-sref="dashboard">{{\'UR087\'|t}}</a></div><div ng-if="is_applying_pro==1" class="forn_submit text-center"><a class="btn btn-primary btn-lg" ui-sref="dashboard">{{\'UR087\'|t}}</a></div></div>'),a.put("/views/teacher/apply/apply.html","<style>.theme-white {\n    background: #fff;\n  }\n\n  .container {\n    padding-top: 0;\n  }\n\n  .hero_img {\n    padding-top: 190px;\n    height: 600px;\n    background: url('/static/images/hero_teacher-onboarding.jpg') no-repeat 0% 50%;\n    background-size:cover;\n    margin-bottom:-130px;\n    margin-top: 80px;\n    color: #fff;\n  }\n\n  .hero_img h1 {\n    font-family: Roboto;\n    font-weight: 300;\n    font-size: 45px;\n    line-height: 1.14;\n  }\n\n  .hero_img h4 {\n    margin-bottom: 40px;\n    font-weight: 300;\n    font-family: Roboto;\n    font-size: 20px;\n  }\n  @media (min-width: 992px) {\n    .hero_img h4 {\n      font-weight: 500;\n    }\n  }\n\n  .panel-body {\n    border: none;\n  }\n\n  .panel {\n    border: none;\n  }\n  .why_teach {\n    margin: 0 auto;\n  }\n  @media (min-width: 1200px) {\n    .why_teach {\n      width: 920px;\n    }\n  }\n\n  .why_teach img {\n    margin-top: 15px;\n    width: 100px;\n    height: 100px;\n  }\n  @media (max-width: 767px) {\n    .why_teach img {\n      margin-top: 0;\n    }\n  }\n\n  .why_teach h3 {\n    font-size: 45px;\n    font-weight: 300;\n    margin: 40px auto;\n  }\n\n  .why_teach h4 {\n    font-size: 23px;\n    font-weight: 300;\n  }\n\n  .text-muted {\n    font-size: 16px;\n  }\n\n  h2 {\n    font-family: Roboto;\n    font-size: 45px;\n    font-weight: 300;\n  }\n\n  .btn-action {\n    background-color: #ff4338;\n    border-color: #ff2b1f;\n    color: #fff;\n    min-width: 272px;\n    height: 60px;\n    font-size:20px;\n    font-weight: 400;\n    text-transform: uppercase;\n    display: block;\n    margin: 10px auto 0;\n    border-radius: 2px;\n  }\n  @media (max-width: 767px) {\n    .btn-action {\n      display: block;\n      margin: 15px auto 0;\n      min-width: 177px;\n      width: auto;\n      height: 40px;\n      font-size: 16px;\n    }\n  }\n\n  .btn-action:hover {\n    background-color: #ff2b1f;\n    color: #fff;\n    border-color: #ff2b1f;\n  }\n\n  .hello_box {\n    margin: 0 auto;\n    width: 920px;\n    height: 230px;\n    border-radius: 2px;\n    background: url('/static/images/bg_teacher-onboarding_hello.png') #0071b9;\"\n  position: absolute;\n  }\n\n  .hello_box h2 {\n    position: relative;\n    top: 33px;\n    left: 323px;\n    width: 490px;\n    height: 82px;\n    padding: 0 15px;\n    font-family: Roboto;\n    font-size: 32px;\n    font-weight: normal;\n    line-height: 1.17;\n    color: #ffffff;\n  }\n\n  .hello_box button {\n    position:relative; top:37px;\n  }\n\n  .gradient-bg {\n    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+16&0.04+0,0+16 */\n    background: -moz-linear-gradient(top,  rgba(0,0,0,0.04) 0%, rgba(0,0,0,0) 16%); /* FF3.6-15 */\n    background: -webkit-linear-gradient(top,  rgba(0,0,0,0.04) 0%,rgba(0,0,0,0) 16%); /* Chrome10-25,Safari5.1-6 */\n    background: linear-gradient(to bottom,  rgba(0,0,0,0.04) 0%,rgba(0,0,0,0) 16%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0a000000', endColorstr='#00000000',GradientType=0 ); /* IE6-9 */\n  }\n\n  .testimonials {\n    text-align: center;\n  }\n\n  .testimonials h2 {\n    margin-bottom : 40px;\n  }\n\n  .testimonials span {\n    font-weight: 500;\n    line-height: 19px;\n    display: block;\n    font: 18px;\n    margin-top: 19px;\n  }\n\n  .testimonials p {\n    line-height: 19px;\n    margin: 0 auto;\n    display: block;\n    width: 274px;\n    font-size: 16px;\n  }\n\n  .questions {\n    width: 920px;\n    margin: 0 auto;\n\n  }\n  @media (min-width: 768px) {\n    .questions {\n      margin-top: 30px\n    }\n  }\n\n  .questions h3 {\n    margin-bottom: 10px;\n    font-family: Roboto;\n    font-size: 23px;\n    font-weight: 300;\n    line-height: 1.17;\n    color: #333;\n  }\n\n  .questions p {\n    font-size: 14px;\n  }\n\n  .questions ul {\n    margin-left: -25px;\n  }\n\n  @media (min-width: 768px) {\n    .hero_img {\n      margin-top: 0px;\n    }\n\n  }\n\n  /** tablet screensize **/\n\n  @media (max-width: 991px) {\n\n    .hero_img {\n      margin-bottom: 0;\n      padding-top: 110px;\n      height: 380px;\n      background: url('/static/images/hero_teacher-onboarding.jpg') no-repeat center -190px / 140% auto;\n    }\n\n    .hero_img h1 {\n      line-height: 1.04;\n    }\n\n    .hero_img h4 {\n      margin-bottom: 25px;\n    }\n\n    .why_teach {\n      width: 100%;\n      margin: 0 auto;\n    }\n\n    .testimonials p {\n      width: auto;\n    }\n\n    .questions {\n      width: 100%;\n    }\n\n    .hello_box {\n      margin-bottom: -30px;\n      width: 100%;\n      height: 177px;\n      background: #0071b9;\n      bottom: 0;\n      padding-top: 30px;\n    }\n\n    .hello_box h2 {\n      font-family: Roboto;\n      font-size: 23px;\n      font-weight: normal;\n      line-height: 1.17;\n      color: #ffffff;\n      position: static;\n      margin: 0 0 30px 0;\n      text-align: center;\n      width: 100%;\n      height: 27px;\n    }\n\n    .hello_box button {\n      position:relative;\n      top:0px;\n    }\n  }\n\n  /** mobile screensize **/\n\n  @media (max-width: 767px) {\n    .why_teach h3 {\n      margin: 10px auto;\n      font-size: 36px;\n    }\n\n    .why_teach h4 {\n      text-align: center;\n      font-size: 16px;\n    }\n\n    .text-muted {\n      text-align: center;\n      display: block;\n    }\n\n    .testimonials h2 {\n      font-size: 36px;\n    }\n\n  }\n\n  @media (max-width: 480px) {\n\n    .hero_img {\n      padding-top: 95px;\n      height: 320px;\n      background: url('/static/images/hero_teacher-onboarding.jpg') no-repeat 33% 66% / auto 140%;\n    }\n\n    .hero_img h1 {\n      font-size: 35px;\n      font-weight: 300;\n    }\n\n    .hero_img h4 {\n      font-size: 16px;\n    }\n\n    .why_teach h3 {\n      font-size: 25px;\n    }\n\n    .why_teach img {\n      width: 70px;\n      height: 70px;\n    }\n\n\n    .testimonials img {\n      margin-top:20px;\n    }\n\n\n    .testimonials h3 {\n      margin-top: 30px;\n    }\n\n    h2 {\n      font-size: 27px;\n    }\n\n\n    .text-muted {\n      display: none;\n    }\n\n    .hello_box h2 {\n      margin: 0;\n      width: auto;\n      height: auto;\n      font-size: 16px;\n      font-weight: normal;\n    }\n\n    .mobile-mute {\n      display: none;\n    }\n  }\n\n  @media (max-width: 767px) {\n    .hello_box {\n      margin-bottom: -30px;\n      padding: 10px 0 20px 0;\n      height: auto;\n      border-radius: 0;\n    }\n  }\n\n  .hello_box_float {\n    position: fixed;\n    bottom: 0;\n    margin: 0;\n    visibility: hidden;\n  }\n  .question-title {\n    margin: 20px 0 5px;\n  }\n  @media (max-width: 767px) {\n    .question-title {\n      font-size: 16px !important;\n      font-weight: 500 !important;\n      line-height: 1.3 !important;\n    }\n  }\n  .questions_left > p, .questions_right > p {\n    padding-bottom: 10px;\n  }\n  .questions_left > p, .questions_left > h3 {\n    margin-right: 20px;\n  }\n  .questions_right > p, .questions_right > h3 {\n    margin-left: 20px;\n  }\n  .last-question {\n    padding-bottom: 0 !important;\n  }\n  @media (min-width: 768px) and (max-width: 991px) {\n    .teachers_say {\n      margin: 0 0 20px;\n    }\n    .why_teach_container, .teachers_container {\n      width: 100% !important;\n    }\n  }\n  @media (min-width: 992px) {\n    .teachers_say {\n      margin: 10px 0 30px;\n    }\n  }\n  @media (min-width: 1200px) {\n    .teachers_row {\n      width: 920px;\n      margin: 0 auto;\n    }\n"+'  }</style><div ng-include="\'/views/common/top.tpl.bs.html\'" ng-if="currentUser"></div><div ng-include="\'/views/common/top.tpl.logout.html\'" ng-if="!currentUser"></div><div class="hero_img" ng-style="{\'margin-top\': currentUser ? 0 : \'56px\'}"><div class="container"><div class="row grid-gutter-margin-b"><div class="col-md-12 text-center"><h1 translate="HL923"></h1><h4>{{\'OB254\'|t}}</h4></div><button class="btn btn-action text-center mobile-mute" ng-click="nextStep()">{{\'OB255\'|t}}</button></div></div></div><div class="why_teach_container container"><div class="panel"><div class="panel-body"><div class="row why_teach"><div class="col-xs-12"><h3 class="text-center">{{\'TA203\'|t}}</h3></div><div class="col-xs-12 grid-gutter-margin-b"><div class="row"><div class="col-xs-6"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-money.svg"></div><div class="col-sm-8"><h4>{{\'OB257\'|t}}</h4><span class="text-muted">{{\'TA206\'|t}}</span></div></div></div><div class="col-xs-6"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-brand.svg"></div><div class="col-sm-8"><h4>{{\'OB265\'|t}}</h4><span class="text-muted">{{\'OB266\'|t}}</span></div></div></div></div></div><div class="col-xs-12 grid-gutter-margin-b"><div class="row"><div class="col-xs-6"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-students.svg"></div><div class="col-sm-8"><h4>{{\'OB259\'|t}}</h4><span class="text-muted">{{\'OB260\'|t}}</span></div></div></div><div class="col-xs-6"><div class="row"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-payments.svg"></div><div class="col-sm-8"><h4>{{\'OB267\'|t}}</h4><span class="text-muted">{{\'OB268\'|t}}</span></div></div></div></div></div><div class="col-xs-12 grid-gutter-margin-b"><div class="row"><div class="col-xs-6"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-schedule.svg"></div><div class="col-sm-8"><h4>{{\'OB261\'|t}}</h4><span class="text-muted">{{\'OB262\'|t}}</span></div></div><div class="col-xs-6"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-manage.svg"></div><div class="col-sm-8"><h4>{{\'OB269\'|t}}</h4><span class="text-muted">{{\'TA216\'|t}}</span></div></div></div></div><div class="col-xs-12 grid-gutter-margin-b"><div class="row"><div class="col-xs-6"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-home.svg"></div><div class="col-sm-8"><h4>{{\'OB263\'|t}}</h4><span class="text-muted">{{\'OB264\'|t}}</span></div></div><div class="col-xs-6"><div class="col-sm-4 text-center"><img src="/static/images/icons/icon-safety.svg"></div><div class="col-sm-8"><h4>{{\'OB271\'|t}}</h4><span class="text-muted">{{\'OB272\'|t}}</span></div></div></div></div></div></div></div></div><div class="gradient-bg"><div class="teachers_container container"><div class="panel-body"><h2 class="teachers_say text-center">{{\'OB273\'|t}}</h2><div class="teachers_row row"><div class="col-sm-4 col-md-4 text-center testimonials"><img src="/static/images/to_brian.png"><br><span>Brian M.</span><p>{{\'OB294\'|t}}</p></div><div class="col-sm-4 col-md-4 text-center testimonials"><img src="/static/images/to_itay.png"><br><span>Itay</span><p>{{\'OB295\'|t}}</p></div><div class="col-sm-4 col-md-4 text-center testimonials"><img src="/static/images/to_giulia.png"><br><span>Giulia Z.</span><p>{{\'OB296\'|t}}</p></div></div><h2 class="text-center" style="margin: 40px auto 0">{{\'OB274\'|t}} <a ng-click="toggleQuestions()"><img style="width: 25px;height: 25px;margin-left: 6px" src="/static/images/icons/icon-plus.svg" ng-hide="!!show_questions"> <img style="width: 25px;height: 25px;margin-left: 6px" src="/static/images/icons/icon-minus.svg" ng-show="!!show_questions"></a></h2><div class="row questions visible-xs-block" ng-show="show_questions"><div class="col-sm-6 col-md-6"><h3 class="question-title">{{\'OB275\'|t}}</h3><p read-more text="{{\'OB276\'|t}}" limit="65"></p><h3 class="question-title">{{\'OB277\'|t}}</h3><p read-more text="{{\'OB278\'|t}}" limit="65"></p><h3 class="question-title">{{\'OB279\'|t}}</h3><p read-more text="{{\'OB280\'|t}}" limit="65"></p><h3 class="question-title">{{\'OB281\'|t}}</h3><p read-more text="{{\'OB282\'|t}}" limit="65"></p></div><div class="col-sm-6 col-md-6"><h3 class="question-title">{{\'OB283\'|t}}</h3><p read-more text="{{(\'OB284\'|t)+\'<br/>* \'+(\'PM034\'|t)+\'<br/>* \'+(\'PM632\'|t)+\'<br/>* \'+(\'PM526\'|t)+\'<br/>* \'+(\'PM035\'|t)+\'<br/>* \'+(\'OB285\'|t)}}" limit="62"></p><h3 class="question-title">{{\'OB286\'|t}}</h3><p read-more text="{{\'OB287\'|t}}" limit="65"></p><h3 class="question-title">{{\'OB288\'|t}}</h3><p read-more text="{{\'OB289\'|t}}" limit="65"></p><h3 class="question-title">{{\'OB290\'|t}}</h3><p read-more text="{{\'OB291\'|t}}" limit="65"></p></div></div><div class="row questions visible-sm-block visible-md-block visible-lg-block" ng-show="show_questions"><div class="col-sm-6 col-md-6 questions_left"><h3>{{\'OB275\'|t}}</h3><p ng-bind-html="\'OB276\'|t"></p><h3>{{\'OB277\'|t}}</h3><p>{{\'OB278\'|t}}</p><h3>{{\'OB279\'|t}}</h3><p>{{\'OB280\'|t}}</p><h3>{{\'OB281\'|t}}</h3><p class="last-question">{{\'OB282\'|t}}</p></div><div class="col-sm-6 col-md-6 questions_right"><h3>{{\'OB283\'|t}}</h3><p>{{(\'OB284\'|t)}}<br>* {{\'PM034\'|t}}<br>* {{\'PM632\'|t}}<br>* {{\'PM526\'|t}}<br>* {{\'PM035\'|t}}<br>* {{\'OB285\'|t}}</p><h3>{{\'OB286\'|t}}</h3><p>{{\'OB287\'|t}}</p><h3>{{\'OB288\'|t}}</h3><p>{{\'OB289\'|t}}</p><h3>{{\'OB290\'|t}}</h3><p class="last-question" ng-bind-html="\'OB291\'|t"></p></div></div></div></div></div><div class="hello_box hello_box_float visible-xs-block"><h2>{{\'OB292\'|t}}</h2><button class="btn btn-action text-center" ng-click="nextStep()">{{\'OB293\'|t}}</button></div><div class="hello_box hello_box_static"><h2>{{\'OB292\'|t}}</h2><button class="btn btn-action text-center" ng-click="nextStep()">{{\'OB293\'|t}}</button></div><div sticky-help ng-include="\'/views/common/bottom.bs.html\'"></div>'),a.put("/views/teacher/apply/index.html","<div ng-include=\"'/views/common/top.tpl.bs.html'\"></div><div ui-view autoscroll></div><div ng-include=\"'/views/common/bottom.bs.html'\"></div>"),a.put("/views/teacher/apply/policy.html",""),a.put("/views/teacher/apply/step.1.a.html",'<div class="container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow}"><div ng-if="userApplyObject[\'apply_type\']==1"><h2>{{\'TA102\'|t}}</h2><h4><small>{{\'TA267\'|t}}</small></h4></div><div ng-if="userApplyObject[\'apply_type\']==0"><h2>{{\'TA103\'|t}}</h2><h4><small>{{\'TA283\'|t}}</small></h4></div><div class=""><div class="panel"><div class="panel-heading"><h4>1. <span ng-bind="\'TA268\'|t" ng-if="userApplyObject[\'apply_type\']==1"></span> <span ng-bind="\'TA284\'|t" ng-if="userApplyObject[\'apply_type\']==0"></span> <a class="teacher-invite-a" target="_blank" href="http://support.italki.com/hc/en-us/articles/206352028-How-Do-I-Make-A-Teaching-Video-Introduction-">{{\'C0171\'|t}}</a></h4></div><div class="panel-body"><div class=""><p ng-if="userApplyObject[\'apply_type\']==1"><span style="color: #333">{{\'TA269\'|t}}</span></p><p ng-if="userApplyObject[\'apply_type\']==0"><span>{{\'TA285\'|t}}</span></p><div class="grid-gutter-margin-b text-center"><iframe ng-if="userApplyObject[\'apply_type\']==1" height="400" width="100%" src="//www.youtube.com/embed/Nyi4HtUuRbM?rel=0&modestbranding=1&autohide=1&showinfo=0&controls=0" frameborder="0"></iframe><iframe ng-if="userApplyObject[\'apply_type\']==0" height="400" width="100%" src="//www.youtube.com/embed/_ime-V9abmY?rel=0&modestbranding=1&autohide=1&showinfo=0&controls=0" frameborder="0"></iframe></div><div class="text-center"><span><span ng-bind="\'TA270\'|t" ng-if="userApplyObject[\'apply_type\']==1"></span> <span ng-bind="\'TA286\'|t" ng-if="userApplyObject[\'apply_type\']==0"></span> , <a href="http://support.italki.com/hc/en-us/articles/206352028-How-Do-I-Make-A-Teaching-Video-Introduction-" target="_blank"><span ng-bind="\'TA104\'|t" ng-if="userApplyObject[\'apply_type\']==1"></span> <span ng-bind="\'TA106\'|t" ng-if="userApplyObject[\'apply_type\']==0"></span></a></span></div></div></div></div><div class="panel"><div class="panel-heading" ng-if="userApplyObject[\'apply_type\']==1"><h4>2. {{\'TA271\'|t}} <a target="_blank" href="http://support.italki.com/entries/22131060-What-types-of-teaching-credentials-are-acceptable-to-be-approved-as-a-Professional-Teacher-">{{\'C0171\'|t}}</a></h4></div><div class="panel-body"><div class="" ng-if="userApplyObject[\'apply_type\']==1"><ul class="no-grid-gutter-h"><li><strong>{{\'TA272\'|t}}</strong><br>{{\'TA273\'|t}}</li><li><strong>{{\'TA274\'|t}}</strong><br>{{\'TA275\'|t}}</li><li><strong>{{\'TA276\'|t}}</strong><br>{{\'TA277\'|t}}</li></ul><div class="note note-info note-border"><span><strong>{{\'TA278\'|t}}</strong> {{\'TA279\'|t}}</span></div></div><div class="note note-info note-border"><p>{{\'OB329\'|t}}<br><a href="https://support.italki.com/hc/en-us/articles/115001499873">https://support.italki.com/hc/en-us/articles/115001499873</a></p><p>{{\'OB330\'|t}}</p></div><div class="text-center padding-sm-vr row" style="margin-top:30px"><div class="col-sm-6 col-sm-offset-2"><button class="btn btn-primary btn-lg" style="color: #fff;font-size: 13px" italki-click-with-spinner="applyStep1()" stext="TA105"></button></div><div class="col-sm-2"><a class="teacher-invite-a" ui-sref="teacherApply.step1">{{\'C0076\'|t}}</a></div></div></div></div></div></div>'),a.put("/views/teacher/apply/step.1.html",'<style>.theme-white {\n    background: #ffffff;\n  }\n\n  .container {\n    max-width: 940px;\n  }\n\n  h1, h2 {text-align: center;}\n\n  h1 {\n    font-size: 45px; #333333;\n    font-weight: 300;\n  }\n\n  h2 {\n    font-size: 20px;\n    color: #333333;\n    font-weight: 500;\n  }\n\n  h3 {\n    font-size: 23px;\n    text-align: center;\n    font-weight: 400;\n  }\n\n  .pro-teacher {\n    color: #cc8d00;\n  }\n\n  .com-tutor {\n    color: #0071b9;\n  }\n\n  div.pro-teacher img, div.com-tutor img {\n    margin: 0 auto;\n    display: block;\n  }\n\n  h4 {\n    font-size: 16px;\n    text-indent: -10px;\n    margin-bottom: 5px;\n    margin-top: 30px;\n  }\n\n  .learn-more {\n    font-size: 13px;\n    color: #0071b9;\n  }\n\n  p {\n    display: block;\n    font-size: 16px;\n    max-width: 320px;\n    margin: 8px auto 0;\n  }\n\n  .btn-action {\n    background-color: #ff4338;\n    border-color: #ff2b1f;\n    color: #fff;\n    width: 100%;\n    height: 60px;\n    font-size:18px;\n    font-weight: 500;\n    text-transform: uppercase;\n    display: block;\n    margin: 10px auto 0;\n  }\n\n  .btn-action:hover {\n    background-color: #ff2b1f;\n    color: #fff;\n  }\n\n  .btn-action-mobile {\n    display: none;\n  }\n\n  @media (max-width: 990px) {\n  .pro-teacher-col {margin: 8px 0px 0 -10px;}\n  }\n\n  @media (max-width: 767px) {\n    .row {\n      margin-left: 0px;\n      margin-right: 0px;\n    }\n\n    .btn-action-mobile {\n      display: initial;\n    }\n\n    .btn-action-desktop {\n      display: none;\n    }\n\n  }</style><div class="container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow}" autoscroll><h1>{{\'OB298\'|t}}</h1><p class="center" ng-bind-html="\'OB328\'|t"></p><h2>{{\'OB299\'|t}}</h2><div class="row"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5 pro-teacher"><h3>{{\'C0200\'|t}}</h3><img src="/static/images/icon_professional-teacher.png"></div><div class="col-xs-6 col-md-5 com-tutor"><h3>{{\'C0201\'|t}}</h3><img src="/static/images/icon_community-tutor.png"></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'OB300\'|t}}</h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><p class="pro-teacher-col">{{\'OB304\'|t}}</p></div><div class="col-xs-6 col-md-5"><p>{{\'OB310\'|t}}</p></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'OB301\'|t}} <span class="learn-more"><a target="_blank" href="http://support.italki.com/hc/en-us/articles/206352058-What-types-of-teaching-credentials-are-acceptable-to-be-approved-as-a-Professional-Teacher-">{{\'C0171\'|t}}</a></span></h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><p class="pro-teacher-col">{{\'OB305\'|t}}</p></div><div class="col-xs-6 col-md-5"><p>{{\'OB311\'|t}}</p></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'OB303\'|t}} <span class="learn-more"><a target="_blank" href="http://support.italki.com/hc/en-us/articles/206352028-How-Do-I-Make-A-Teaching-Video-Introduction-">{{\'C0171\'|t}}</a></span></h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><p class="pro-teacher-col">{{\'OB308\'|t}}</p></div><div class="col-xs-6 col-md-5"><p>{{\'OB308\'|t}}</p></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'OB302\'|t}} <span class="learn-more"><a target="_blank" href="http://support.italki.com/hc/en-us/articles/206352758-What-is-the-difference-between-a-Professional-Teacher-and-Community-Tutor-">{{\'C0171\'|t}}</a></span></h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><p class="pro-teacher-col">{{\'OB306\'|t}}</p><p class="pro-teacher-col">{{\'OB307\'|t}}</p></div><div class="col-xs-6 col-md-5"><p>{{\'OB307\'|t}}</p></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'TA264\'|t}}</h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><p class="pro-teacher-col">{{\'OB309\'|t}}</p></div><div class="col-xs-6 col-md-5"><p>{{\'OB309\'|t}}</p></div></div><div class="row"><div class="col-xs-12 col-md-12"><h4>{{\'ST124\'|t}}</h4></div></div><div class="row" style="border-top: solid 2px #b0b0b0"><div class="col-xs-12 col-md-2"></div><div class="col-xs-6 col-md-5"><button type="button" class="btn btn-action btn-action-desktop text-center" ng-click="nextProStep()">{{\'TP003\'|t}}</button> <button type="button" class="btn btn-action btn-action-mobile text-center" ng-click="nextProStep()">{{\'ST124\'|t}}</button></div><div class="col-xs-6 col-md-5"><button type="button" class="btn btn-action btn-action-desktop text-center" ng-click="nextTutorStep()">{{\'TP004\'|t}}</button> <button type="button" class="btn btn-action btn-action-mobile text-center" ng-click="nextTutorStep()">{{\'ST124\'|t}}</button></div></div></div>'),
a.put("/views/teacher/apply/step.2.html",'<style>.photo-check-box label{\n    display: block;\n  }\n\n  .text-sm{\n    font-size: 14px;\n  }\n\n  .bad-photo,.good-photo{\n    width: 80px;\n    height: 80px;\n  }\n\n  .question-icon{\n    vertical-align: -3px;\n    margin-left: 2px;\n  }\n\n\n\n  input.px + .lbl:before {\n    border: 1px solid #5bc0de;\n  }\n\n\n  .note-border{\n    border-left: 3px solid #5bc0de;\n  }\n\n\n\n  @media (min-width:992px){\n    .photo-row{\n      padding-left:20px;\n      padding-right:20px;\n    }\n  }\n\n  @media (max-width:991px){\n    .myPhoto{\n      width: 330px;\n      margin-left: auto;\n      margin-right: auto;\n      margin-top:22px;\n      margin-bottom: 20px;\n    }\n    .myPhoto h4{\n      margin-bottom: 10px;\n    }\n\n    .myPhoto p{\n      margin-bottom: 10px;\n    }\n  }</style><div ui-view="" class="container" autoscroll><div ng-if="userApplyObject[\'apply_type\']==1"><h2>{{\'TA102\'|t}}</h2><h4><small>{{\'TA267\'|t}}</small></h4></div><div ng-if="userApplyObject[\'apply_type\']==0"><h2>{{\'TA103\'|t}}</h2><h4><small>{{\'TA283\'|t}}</small></h4></div><ng-form name="Form1"><div class="grid-gutter-margin-b session_nav" style="margin-top: 16px"><div class="layer"><ul class="session_nav"><li class="first current"><div>{{\'ST047\'|t}}</div></li><li><div>{{\'M0041\'|t}}</div></li><li><div>{{\'KP006\'|t}}</div></li><li class="last"><div>{{\'TS008\'|t}}</div></li></ul></div></div><h3>{{\'ST223\'|t}}</h3><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-heading"><h4>{{\'ST048\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-12"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST049\'|t}}&nbsp;<i class="fa fa-question-circle ng-scope question-icon" tooltip="{{\'TC266\'|t}}"></i></label><div class="col-sm-8"><div class="form-group no-margin no-padding-t no-border-t"><input type="text" class="form-control" ng-model="SaveObj.nickname" name="nickname" required ng-minlength="3" ng-maxlength="20"> <span class="text-muted">{{\'TC265\'|t}}</span></div><p class="help-block" ng-if="(SaveObj.s||Form1.nickname.$dirty) && Form1.nickname.$invalid">{{\'TP316\'|t}}</p></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'TS017\'|t}}</label><div class="col-sm-3"><select ng-model="SaveObj.im_type" ng-change="changeImType()" class="form-control"><option value="1">{{\'IM101\'|t}}</option><option value="6">{{\'IM106\'|t}}</option><option value="7">QQ</option><option value="8">{{\'KP520\'|t}}</option></select></div><label class="col-sm-2 control-label ng-binding">{{\'TS025\'|t}}</label><div class="col-sm-3"><input ng-blur="setImTypeValue(SaveObj)" type="text" ng-model="SaveObj.im_account" class="form-control" name="im_account" required ng-minlength="3" ng-maxlength="50"><p class="help-block" ng-if="(SaveObj.s||Form1.im_account.$dirty) && Form1.im_account.$invalid" ng-bind="\'KP275\'|t|format:3:50"></p></div><div class="col-sm-9 col-sm-offset-3"><div class="checkbox no-padding-t"><p class="text-muted">{{\'TC267\'|t}}</p></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0003\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-4"><select ng-change="SaveObj.origin_city_id = \'\';changCity(0,SaveObj.origin_country_id)" data-ng-model="SaveObj.origin_country_id" class="form-control" ng-options="m.v as m.l for m in countries" name="origin_country_id" required><option value="">{{\'C0014\'|t}}</option></select><p class="help-block" ng-if="(SaveObj.s||Form1.origin_country_id.$dirty) && Form1.origin_country_id.$invalid">{{\'UR027\'|t}}</p></div><div class="col-sm-4"><select data-ng-model="SaveObj.origin_city_id" class="form-control" ng-options="m.id as m.native_name + \'(\'+m.english_name+\')\' for m in filter.fcitys" name="origin_city_id" required><option value="">{{\'ST274\'|t}}</option></select><p class="help-block" ng-if="SaveObj.s && Form1.origin_city_id.$invalid">{{\'ST274\'|t}}</p></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t" ng-if="SaveObj.origin_city_id==\'ZZ00000\'"><div class="row"><div class="col-sm-9 col-sm-offset-3"><div class="row"><div class="col-sm-4 col-sm-offset-4"><input type="text" class="form-control" ng-model="SaveObj.origin_city_name"></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0009\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-4"><select ng-change="SaveObj.living_city_id=\'\';changCity(1,SaveObj.living_country_id)" data-ng-model="SaveObj.living_country_id" class="form-control" ng-options="m.v as m.l for m in countries" name="living_country_id" required><option value="">{{\'C0014\'|t}}</option></select><p class="help-block" ng-if="(SaveObj.s||Form1.living_country_id.$dirty) && Form1.living_country_id.$invalid">{{\'ST199\'|t}}</p></div><div class="col-sm-4"><select data-ng-model="SaveObj.living_city_id" class="form-control" ng-options="m.id as m.native_name + \'(\'+m.english_name+\')\' for m in filter.lcitys" name="living_city_id" required><option value="">{{\'ST274\'|t}}</option></select><p class="help-block" ng-if="SaveObj.s && Form1.living_city_id.$invalid">{{\'ST274\'|t}}</p></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t" ng-if="SaveObj.living_city_id==\'ZZ00000\'"><div class="row"><div class="col-sm-9 col-sm-offset-3"><div class="row"><div class="col-sm-4 col-sm-offset-4"><input type="text" class="form-control" ng-model="SaveObj.living_city_name"></div></div></div></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t"><div class="row"><div class="col-sm-12"><div class="note note-info note-border text-left" style="margin-top: 10px"><span class="text-muted">{{\'ST422\'|t}}</span></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST054\'|t}}</label><div class="col-sm-3"><div class="form-group no-margin no-padding-t no-border-t"><input type="text" class="form-control" ng-model="SaveObj.first_name" name="first_name" required ng-maxlength="20"></div><p class="help-block" ng-if="(SaveObj.s||Form1.first_name.$dirty) && Form1.first_name.$invalid">{{\'ST155\'|t|format:1:20}}</p></div><label class="col-sm-2 control-label">{{\'ST055\'|t}}</label><div class="col-sm-3"><div class="form-group no-margin no-padding-t no-border-t"><input type="text" class="form-control" ng-model="SaveObj.last_name" name="last_name" required ng-maxlength="20"></div><p class="help-block" ng-if="(SaveObj.s||Form1.last_name.$dirty) && Form1.last_name.$invalid">{{\'ST155\'|t|format:1:20}}</p></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'PM059\'|t}}</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="SaveObj.pay_address" name="pay_address" required ng-maxlength="300"><p class="help-block" ng-if="(SaveObj.s||Form1.pay_address.$dirty) && Form1.pay_address.$invalid">{{\'PM300\'|t}}</p></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'PM063\'|t}}</label><div class="col-sm-8"><div class="dis-flex form-group no-margin no-padding-t no-border-t"><div class="input-add-box">+</div><input class="code-input-width form-control" placeholder="{{\'ST060\'|t}}" type="text" class="form-control" ng-keyup="clearNum(SaveObj,\'pay_country_code\')" ng-model="SaveObj.pay_country_code" required><hr class="separator-line"><input class="phone-input-width form-control" type="text" ng-model="SaveObj.pay_phone" ng-keyup="clearNum(SaveObj,\'pay_phone\')" required></div><p class="help-block" ng-if="SaveObj.s &&(!SaveObj.pay_phone || !SaveObj.pay_country_code)">{{\'ST429\'|t}}</p></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t"><div class="row"><div class="col-sm-12 text-center"><h4 class="text-left">{{\'C0000\'|t}}</h4><div class="note note-info note-border text-left"><span class="text-muted">{{\'TC268\'|t}}&nbsp;<a href="https://en.wikipedia.org/wiki/Common_European_Framework_of_Reference_for_Languages" target="_blank">{{\'C0171\'|t}}</a></span></div><table class="table"><thead><tr><th width="33%" class="text-center">{{\'ST003\'|t}}</th><th class="text-center">{{\'C0018\'|t}}</th><th class="text-center">{{\'C0006\'|t}}</th></tr></thead><tr ng-repeat="item in user.language_obj_s track by $index"><td>{{item.language|t}}</td><td><span class="l-level l-level{{item.level}}" title="{{item.level|kpLanguageLevel}}"></span></td><td>&nbsp;<span ng-if="item.is_learning"><i class="fa fa-check text-success"></i></span></td></tr></table><div class="text-center"><a href="javascript:void(0)" ng-click="editLangage()" class="btn" title="{{\'C0053\'|t}}"><i class="fa fa-pencil"></i> {{\'C0053\'|t}}</a></div></div></div></div></div></div><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-heading"><h4>{{\'TC604\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><div class="col-md-4 text-center"><p style="margin-top: 10px"><img ng-src="{{ user|avatar:\'150\' }}" id="user_avatar" width="150" class="rounded profile-img" kp-fallback-avatar></p><a href="javascript:void(0)" ng-click="editAvatar()" class="buttong btn" name="Form1_avatar"><i class="fa fa-pencil"></i>{{\'TC613\'|t}}</a> <input type="hidden" name="avatar" ng-model="user.avatar_file_name" required><br><p class="help-block ng-binding ng-scope" ng-if="Form1.avatar.$invalid">{{\'ST312\'|t}}</p><h5 class="text-warning" style="margin-top: 10px">{{\'TC614\'|t}}</h5><ul class="text-warning text-left list-unstyled"><li class="text-center text-sm">{{\'TC615\'|t}}</li><li class="text-center text-sm">{{\'TC616\'|t}}</li><li class="text-center text-sm">{{\'TC621\'|t}}</li></ul></div><div class="col-md-4 text-left myPhoto"><p class="text-center"><img class="good-icon" src="/static/images/static/good-icon.png"></p><h4 class="text-center" style="margin-top: 0">{{\'TC270\'|t}}</h4><p class="text-sm text-center grid-gutter-margin-b">{{\'TC271\'|t}}</p><div class="row grid-gutter-margin-b photo-row"><div class="col-xs-4 text-center"><img class="good-photo" style="border-radius: 80px" src="/static/images/static/good_photo4.png" tooltip="{{\'TC432\'|t}}"></div><div class="col-xs-4 text-center"><img class="good-photo" src="/static/images/static/good_photo2.png" tooltip="{{\'TC430\'|t}}"></div><div class="col-xs-4 text-center profile-photo"><img class="good-photo" src="/static/images/static/good_photo1.png" tooltip="{{\'TC431\'|t}}"></div></div><h4 style="margin-left:25px">{{\'TC269\'|t}}</h4><div class="form-group panel-padding-h no-padding-t no-border-t photo-check-box" style="margin-left:25px"><label><input type="checkbox" ng-model="SaveObj.photo_checkbox1" class="px" name="photo_checkbox1" required> <span class="lbl text-lb">{{\'TC605\'|t}}</span></label><label><input type="checkbox" ng-model="SaveObj.photo_checkbox2" class="px" name="photo_checkbox2" required> <span class="lbl text-lb">{{\'TC607\'|t}}</span></label><label><input type="checkbox" ng-model="SaveObj.photo_checkbox3" class="px" name="photo_checkbox3" required> <span class="lbl text-lb">{{\'TC608\'|t}}</span></label><label><input type="checkbox" ng-model="SaveObj.photo_checkbox4" class="px" name="photo_checkbox4" required> <span class="lbl text-lb">{{\'TC609\'|t}}</span></label><label><input type="checkbox" ng-model="SaveObj.photo_checkbox5" class="px" name="photo_checkbox5" required> <span class="lbl text-lb">{{\'TC610\'|t}}</span></label><div class="help-block" ng-if="SaveObj.s && (Form1.photo_checkbox1.$invalid || Form1.photo_checkbox2.$invalid || Form1.photo_checkbox3.$invalid || Form1.photo_checkbox4.$invalid || Form1.photo_checkbox5.$invalid )">{{\'TC624\'|t}}</div></div></div><div class="col-md-4 myPhoto"><p class="text-center"><img class="bad-icon" src="/static/images/static/bad-icon.png"></p><p class="text-sm text-center grid-gutter-margin-b" ng-bind-html="\'TC272\'|t"></p><ul><li>{{\'TC622\'|t}}</li><li>{{\'TC623\'|t}}</li><li>{{\'TC433\'|t}}</li><li>{{\'TC434\'|t}}</li><li>{{\'TC435\'|t}}</li><li>{{\'TC436\'|t}}</li></ul><div class="text-center" style="margin-top: 100px"><a href="http://support.italki.com/hc/en-us/articles/206351988-Profile-Picture-Guidelines-and-Requirements" target="_blank">{{\'TC628\'|t}}</a></div></div></div></div></div></div></div><div class="text-center form_submit"><button class="btn btn-primary" italki-click-with-spinner="save(Form1)" stext="TC101"></button></div></ng-form></div>'),a.put("/views/teacher/apply/step.3.html",'<style>.question-icon{\n    vertical-align: -2px;\n  }\n\n  .text-sm{\n    font-size: 14px;\n  }\n\n  input.px + .lbl:before {\n    border: 1px solid #5bc0de;\n  }\n\n  .note-border{\n    border-left: 3px solid #5bc0de;\n  }\n\n  @media (max-width:991px){\n     .intro-warning{\n       text-align:left;\n     }\n    .video-input{\n      margin-bottom: 22px;\n      margin-left: -20px;\n    }\n\n  }\n\n  @media (max-width: 767px) {\n    .video-input{\n      margin-top: 22px;\n      margin-left: -20px;\n    }\n\n    .text-count{\n      margin-bottom: 0px;\n    }\n\n    .intro-example1{\n      margin-bottom: 20px;\n    }\n\n    .intro-example2{\n      margin-bottom: 0px;\n    }\n\n    .introduction-describe{\n      margin-bottom: 0px;\n    }\n  }</style><div ui-view="" class="container" autoscroll><div ng-if="is_applying_pro==1"><h2>{{\'TA102\'|t}}</h2><h4><small>{{\'TA267\'|t}}</small></h4></div><div ng-if="is_applying_pro==0"><h2>{{\'TA103\'|t}}</h2><h4><small>{{\'TA283\'|t}}</small></h4></div><ng-form name="Form1"><div ng-if="!tutorToPro" class="grid-gutter-margin-b session_nav" style="margin-top: 16px"><div class="layer"><ul class="session_nav"><li class="first" ui-sref="teacherApply.step2" style="cursor:pointer"><div>{{\'ST047\'|t}}</div></li><li class="current"><div>{{\'M0041\'|t}}</div></li><li><div>{{\'KP006\'|t}}</div></li><li class="last"><div>{{\'TS008\'|t}}</div></li></ul></div></div><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'PB026\'|t}}</h4></div><div class="panel-body"><div class="note note-info note-border"><div class="row"><div class="col-sm-6 grid-gutter-margin-b"><h4>{{\'TC437\'|t|format:1}}</h4><div></div><div class="videowrapper" style="padding-left: 5%;padding-right: 5%"><iframe frameborder="0" src="https://www.youtube.com/embed/ACDN3-MS7TA" height="400" width="100%"></iframe></div><p class="text-muted text-center" style="margin-top: 5px">{{\'TC273\'|t}}</p></div><div class="col-sm-6 grid-gutter-margin-b"><div><h4>{{\'TC437\'|t|format:2}}</h4><div class="videowrapper" style="padding-left: 5%;padding-right: 5%"><iframe frameborder="0" src="https://www.youtube.com/embed/wx8y7cdQYRE" height="400" width="100%"></iframe></div><p class="text-muted text-center" style="margin-top: 5px">{{\'TC274\'|t}}</p></div></div><div class="col-sm-12 text-center"><a href="http://support.italki.com/hc/en-us/articles/206352028-How-Do-I-Make-A-Teaching-Video-Introduction-" target="_blank">{{\'TC275\'|t}}</a></div></div></div><ul class="text-muted" style="margin-bottom: 25px;padding-left: 17px"><li>{{\'ST603\'|t}} <a href="http://support.italki.com/hc/en-us/articles/115000101873" target="_blank">{{\'C0171\'|t}}</a></li><li>{{\'ST604\'|t|format:500}}</li><li ng-bind-html="\'ST428\'|t|trustAsHtml"></li></ul><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-md-7 video-input"><div class="grid-gutter-margin-b"><kp-upload-video page-name="pageName"></kp-upload-video><p ng-if="SaveObj.s && !nowUploadSuccess" class="help-block">{{\'PM420\'|t}}</p></div><div class="row"><div class="col-xs-11"><p class="long-form-title">{{\'ST600\'|t}}</p><input type="url" ng-model="SaveObj.video_url" name="videoUrl" placeholder="Example: http://www.youtube.com/v/235dz8DF?rel=0&modestbranding=1&autohide=1&showinfo=0&controls=0" class="form-control" ng-maxlength="400"><div style="margin-top: 10px"><a kp-video-display class="btn" video-url="SaveObj.video_url" video-title="KP102" ng-if="SaveObj.video_url&&Form1.videoUrl.$valid">{{\'KP102\'|t}}</a></div><span ng-if="SaveObj.s && Form1.videoUrl.$invalid" class="help-block">{{\'KP274\'|t}}</span></div></div></div><div class="col-md-5 text-left"><h4 style="margin-left: -20px; margin-top: 0px">{{\'TC618\'|t}}</h4><p><label><input type="checkbox" ng-model="SaveObj.video_checkbox1" name="video_checkbox1" class="px" required> <span class="lbl text-lb">{{\'TC276\'|t}} <em class="text-bold" ng-repeat="item in user.language_obj_s|filter:{\'level\':7}">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></em> <em class="text-bold" ng-repeat="item in user.language_obj_s|filter:{\'level\':6}"><span ng-show="$first">,&nbsp;</span>{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></em> &nbsp;<i class="fa fa-question-circle ng-scope question-icon" tooltip="{{\'TC626\'|t}}"></i></span></label></p><p><label><input type="checkbox" ng-model="SaveObj.video_checkbox2" name="video_checkbox2" class="px" required> <span class="lbl text-lb">{{\'TC606\'|t}}</span></label></p><p><label><input type="checkbox" ng-model="SaveObj.video_checkbox3" name="video_checkbox3" class="px" required> <span class="lbl text-lb">{{\'TC277\'|t}}</span></label></p><p><label><input type="checkbox" ng-model="SaveObj.video_checkbox4" name="video_checkbox4" class="px" required> <span class="lbl text-lb">{{\'TC278\'|t}}</span></label></p><p><label><input type="checkbox" ng-model="SaveObj.video_checkbox5" name="video_checkbox5" class="px" required> <span class="lbl text-lb">{{\'TC279\'|t}}</span></label></p><div class="help-block" ng-if="SaveObj.s && (Form1.video_checkbox1.$invalid || Form1.video_checkbox2.$invalid || Form1.video_checkbox3.$invalid || Form1.video_checkbox4.$invalid || Form1.video_checkbox5.$invalid )">{{\'TC624\'|t}}</div><br><p><label><input type="checkbox" class="px" ng-model="SaveObj.has_video_class" ng-true-value="1"> <span class="lbl text-lb">{{\'TC285\'|t}}</span></label></p></div></div></div></div></div><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST700\'|t}}</h4></div><div class="panel-body"><div class="note note-info note-border"><span class="text-muted">{{\'ST710\'|t }}</span></div><div class=""><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class=""><p ng-repeat="item in tags"><label><input type="checkbox" name="tagsCheck" ng-model="item.checked" class="px" ng-click="updateSelection($event,item.t)"> <span class="lbl"><span ng-bind="item.t|t "></span>: <span ng-bind="item.d|t" style="font-weight: 400"></span><br><em class="text-muted"></em></span></label></p></div><div ng-if="tags[4].checked" style="padding: 15px; display: block; background:#efefef"><p>{{\'ST721\'|t}}</p><div class="row grid-gutter-margin-b"><div class="col-sm-2" ng-repeat="item in childTags" style="padding-left: 30px"><label tooltip="{{item.full_name}}"><input type="checkbox" ng-model="item.checked" class="px"> <span class="lbl"><span ng-bind="item.abbr|t "></span></span></label></div></div><em class="text-muted">{{\'TC245\'|t}} <a href="http://support.italki.com/home" target="_blank">support@italki.com</a> {{\'TC247\'|t}}</em></div></div></div></div></div><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST400\'|t}}</h4></div><div class="panel-body"><div class="row"><div class="col-md-9"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST402\'|t}}</div><div class="ui-textarea-container"><textarea class="ui-textarea form-control" name="about_me" ng-model="SaveObj.about_me" rows="10" placeholder="{{\'ST403\'|t}}" maxlength="500" ng-focus>\n                </textarea><div class="ui-textarea-warn" ng-show="SaveObj.about_me.length<10 && Form1.about_me.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{SaveObj.about_me.length}}/500</span></div></div><p ng-if="SaveObj.s && SaveObj.about_me.length < 10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST404\'|t}}</div><div class="ui-textarea-container"><textarea class="ui-textarea form-control" name="about_teacher" ng-model="SaveObj.about_teacher" rows="10" placeholder="{{\'ST405\'|t}}" maxlength="500" ng-focus>\n                </textarea><div class="ui-textarea-warn" ng-show="SaveObj.about_teacher.length<10 && Form1.about_teacher.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{SaveObj.about_teacher.length}}/500</span></div></div><p ng-if="SaveObj.s && SaveObj.about_teacher.length < 10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST406\'|t}}</div><div class="ui-textarea-container"><textarea class="ui-textarea form-control" name="teaching_style" ng-model="SaveObj.teaching_style" rows="10" placeholder="{{\'ST407\'|t}}" maxlength="500" ng-focus>\n                </textarea><div class="ui-textarea-warn" ng-show="SaveObj.teaching_style.length<10 && Form1.teaching_style.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{SaveObj.teaching_style.length}}/500</span></div></div><p ng-if="SaveObj.s && SaveObj.teaching_style.length < 10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST408\'|t}}</div><p class="sub-text">{{\'ST409\'|t}}</p><div><div class="row no-margin-hr panel-padding-h"><div class="col-md-4 col-sm-6" ng-repeat="material in teachingSpecialities"><label><input type="checkbox" ng-model="material.check" class="px"> <span class="lbl lbl2" style="font-weight: initial">{{material.name | t}}</span></label></div></div><p ng-if="SaveObj.s && !checkMaterial()" class="help-block">{{\'ST307\'|t}}</p></div></div></div></div></div></div><div ng-if="is_applying_pro" class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'TC291\'|t}}</h4></div><div class="panel-body"><div class="note note-info note-border"><span class="text-muted">{{\'TC292\'|t}}&nbsp;<a href="http://support.italki.com/hc/articles/206352058" target="_blank">{{\'TC627\'|t}}</a>&nbsp;{{\'TC293\'|t}}</span></div><div class="row grid-gutter-margin-b"><label class="col-sm-3 text-right">{{\'PB012\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="education in eduExpCer.education_obj_s"><span class="pull-right" ng-switch="education.status"><span class="label label-warning" ng-switch-when="0">{{\'ST196\'|t}}</span> <span class="label label-success" ng-switch-when="1">{{\'ST127\'|t}}</span> <span class="label label-warning" ng-switch-when="2">{{\'ST039\'|t}}</span> <span class="label label-default" ng-switch-when="3">Deleted</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveEducation(education,$index)" style="margin-left: 10px"></i></span> <strong ng-switch="education.level"><span class="label label-warning" ng-switch-when="1">{{\'ST015\'|t}}</span> <span class="label label-info" ng-switch-when="2">{{\'ST016\'|t}}</span> <span class="label label-dark-gray" ng-switch-when="3">{{\'ST017\'|t}}</span> <span class="label label-success" ng-switch-when="4">{{\'ST018\'|t}}</span> <span class="label label-success" ng-switch-when="5">{{\'ST019\'|t}}</span></strong><br><strong ng-bind="education.major"></strong><br><span class="text-muted" ng-bind="education.institution|replaceLineToBr"></span><br><span class="text-light-gray">{{education.start_year}} - {{education.end_year}}</span></div><p><a ng-click="addEducation()" href="javascript:void(0);" name="Form1_education">+ {{\'C0044\'|t}}</a></p><input type="hidden" name="education" ng-model="education" ensure-succ="checkEducation"><p ng-if="SaveObj.s&&Form1.education.$error.kpOther" class="help-block">{{\'ST307\'|t}}</p></div></div><div class="row grid-gutter-margin-b"><label class="col-sm-3 text-right">{{\'PB011\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="experience in eduExpCer.experience_obj_s"><span class="pull-right" ng-switch="experience.status"><span class="label label-warning" ng-switch-when="0">{{\'ST196\'|t}}</span> <span class="label label-success" ng-switch-when="1">{{\'ST127\'|t}}</span> <span class="label label-warning" ng-switch-when="2">{{\'ST039\'|t}}</span> <span class="label label-default" ng-switch-when="3">Deleted</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveExperience(experience,$index)" style="margin-left: 10px"></i></span><ul class="list-inline text-bold"><li><strong>{{experience.job}}</strong></li><li><strong>{{experience.company}}</strong></li></ul><ul class="list-inline text-muted"><li>{{experience.start_year}} - {{(experience.end_year==2155||experience.end_year==2025)?(\'ST027\'|t):experience.end_year}}</li><li>{{experience.job}}</li><li>{{experience.city}}</li><li>{{experience.country|t}}</li></ul>{{experience.description|replaceLineToBr}}</div><p><a ng-click="addExperience()" href="javascript:void(0);" name="Form1_experience">+ {{\'C0044\'|t}}</a></p><input type="hidden" name="experience" ng-model="experience" ensure-succ="checkExperience"><p ng-if="SaveObj.s&&Form1.experience.$error.kpOther" class="help-block">{{\'ST307\'|t}}</p></div></div><div class="row grid-gutter-margin-b"><label class="col-sm-3 text-right">{{\'PB013\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="cert in eduExpCer.certificate_obj_s"><span class="pull-right" ng-switch="cert.status"><span class="label label-warning" ng-switch-when="0">{{\'ST196\'|t}}</span> <span class="label label-success" ng-switch-when="1">{{\'ST127\'|t}}</span> <span class="label label-warning" ng-switch-when="2">{{\'ST039\'|t}}</span> <span class="label label-default" ng-switch-when="3">Deleted</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveCertificate(cert,$index)" style="margin-left: 10px"></i></span> <strong><span ng-bind="cert.end_year"></span><br><span ng-bind="cert.certificate"></span></strong><br><span class="text-muted" ng-bind="cert.institution"></span><br><span ng-bind="cert.description|replaceLineToBr"></span></div><p><a ng-click="addCertificate()" href="javascript:void(0);" name="Form1_certificate">+ {{\'C0044\'|t}}</a></p><input type="hidden" name="certificate" ng-model="certificate" ensure-succ="checkCertificate"><p ng-if="SaveObj.s&&Form1.certificate.$error.kpOther" class="help-block">{{\'ST307\'|t}}</p></div></div><div class="row grid-gutter-margin-b"><label class="col-sm-3 text-right">Public</label><div class="col-sm-9"><label><input type="checkbox" class="px" ng-model="SaveObj.teacher_resume_is_public" ng-true-value="1" ng-false-value="0" ng-checked="true"> <span class="lbl" style="margin-left: 20px"><span>{{\'TC294\'|t}}</span></span></label><br><span class="text-muted">{{\'TC295\'|t}}</span></div></div></div></div><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST022\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="note note-info text-muted">{{\'TA310\'|t }}</div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label ng-binding">{{\'ST022\'|t }}</label><div class="col-sm-9"><textarea ng-model="SaveObj.interest" rows="4" class="form-control" name="interest" required></textarea><p ng-if="SaveObj.s&&Form1.interest.$error.required" class="help-block">{{\'C3019\'|t}}</p><p class="help-block" ng-if="SaveObj.interest.length>200||(SaveObj.interest.length<10&&SaveObj.interest.length!=0)">{{\'ST155\'|t|format:10:200}}</p><div class="row"><div class="col-md-1 text-count"><span ng-bind="200-SaveObj.interest.length"></span></div><div class="col-md-11 text-right intro-warning"><span class="text-warning">{{\'TC287\'|t}}</span></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="text-lb text-danger text-center"></div></div></div></div><div class="text-center form_submit"><button class="btn btn-primary" italki-click-with-spinner="save(Form1)" stext="TC101"></button> &nbsp; <button ng-if="!tutorToPro" class="btn" ui-sref="teacherApply.step2" ng-bind="\'C0076\'|t"></button></div></ng-form></div>'),a.put("/views/teacher/apply/step.4.html",'<div ui-view="" class="container" autoscroll><div ng-if="is_applying_pro==1"><h2>{{\'TA102\'|t}}</h2><h4><small>{{\'TA267\'|t}}</small></h4></div><div ng-if="is_applying_pro==0"><h2>{{\'TA103\'|t}}</h2><h4><small>{{\'TA283\'|t}}</small></h4></div><ng-form name="Form1"><div class="grid-gutter-margin-b session_nav" style="margin-top: 16px"><div class="layer"><ul class="session_nav"><li class="first" ui-sref="teacherApply.step2" style="cursor:pointer"><div>{{\'ST047\'|t}}</div></li><li ui-sref="teacherApply.step3" style="cursor:pointer"><div>{{\'M0041\'|t}}</div></li><li class="current"><div>{{\'KP006\'|t}}</div></li><li class="last"><div>{{\'TS008\'|t}}</div></li></ul></div></div><div class="panel loading-layout"><div class="panel-body" style="border-bottom-width: 1px; border-bottom-color: rgb(238, 238, 238); border-bottom-style: solid"><div class="note note-info no-border no-margin-b">{{\'TA342\'|t}}</div></div><div class="panel-body" ng-hide="!session" style="border-bottom-width: 1px; border-bottom-color: rgb(238, 238, 238); border-bottom-style: solid"><h4>{{\'TA343\'|t}}:</h4><ul class="list_disc"><li>{{\'TA344\'|t}}</li><li>{{\'TA345\'|t}}</li><li>{{\'TA346\'|t}}</li><li>{{\'TA347\'|t}}</li><li>{{\'TA348\'|t}}</li><li>{{\'TA349\'|t}}</li><li>{{\'TA350\'|t}}</li></ul></div><div class="panel-body" style="border-bottom-width: 1px; border-bottom-color: rgb(238, 238, 238); border-bottom-style: solid"><h4>{{\'TA351\'|t}}:</h4><div class="grid-gutter-margin-b"><div style="padding:10px;border:1px #ccc solid; box-shadow:1px 1px 1px #ccc inset; background:#fff; overflow-y:scroll; height:297px"><div ng-include="\'/views/page/tos2.html\'"></div><br><br></div></div><div class="row form-horizontal"><div class="col-sm-6 col-md-offset-2"><div class="form-group no-margin-hr"><div class="row"><div class="col-sm-8 col-sm-offset-4"><p>{{\'TA352\'|t}}</p><label class="control-label">{{\'ST054\'|t}}</label></div><div class="col-sm-4 text-right"><label class="control-label">{{checkObj.first_name}}</label></div><div class="col-sm-8"><input ng-model="SaveObj.first_name" type="text" class="form-control" name="first_name" required ensure-succ="checkFirstName"><p class="help-block" ng-if="(SaveObj.s||Form1.first_name.$dirty) && Form1.first_name.$invalid">{{\'TA353\'|t}}</p></div></div></div><div class="form-group no-margin-hr"><div class="row"><div class="col-sm-8 col-sm-offset-4"><label class="control-label">{{\'ST055\'|t}}</label></div><div class="col-sm-4 text-right"><label class="control-label">{{checkObj.last_name}}</label></div><div class="col-sm-8"><input ng-model="SaveObj.last_name" type="text" class="form-control" name="last_name" required ensure-succ="checkLastName"><p class="help-block" ng-if="(SaveObj.s||Form1.last_name.$dirty) && Form1.last_name.$invalid">{{\'TA353\'|t}}</p></div></div></div></div></div></div></div><div class="forn_submit text-center"><button class="btn btn-primary" italki-click-with-spinner="save(Form1)" stext="C0045"></button> &nbsp;<button class="btn" ui-sref="teacherApply.step3" ng-bind="\'C0076\'|t"></button></div></ng-form></div>'),
a.put("/views/teacher/apply/step.5.html",'<div ui-view="" class="container" autoscroll><h2>{{\'TC600\'|t}}</h2><div class="grid-gutter-margin-b session_nav" style="margin-top: 16px"><div class="layer"><ul class="session_nav"><li class="first"><div>{{\'ST047\'|t}}</div></li><li><div>{{\'M0041\'|t}}</div></li><li><div>{{\'KP006\'|t}}</div></li><li class="last current"><div>{{\'TS008\'|t}}</div></li></ul></div></div><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="sweet-alert" style="display: block; position: relative; width: auto; margin-left: auto; left: auto;z-index: 0"><div class="sa-icon sa-success"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2>{{\'TC601\'|t}}</h2><div><p style="color:#000000" ng-bind-html="\'TP207\'|t"></p></div></div></div></div></div></div><a href="{{MAIN_PAGE_URL}}" class="btn btn-lg btn-primary btn-block">{{\'UR087\'|t}}</a></div>'),a.put("/views/teacher/apply/tutor.apply.professional.html",'<div ng-if="!(tutorToPro&&isSucc)" ng-include="\'/views/teacher/apply/step.3.html\'"></div><div ng-if="tutorToPro&&isSucc" class="container" style=""><div ui-view="" class="container" autoscroll><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="sweet-alert" style="display: block; position: relative; width: auto; margin-left: auto; left: auto;z-index: 0"><div class="sa-icon sa-success"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2>{{\'TC404\'|t}}</h2><div><p>{{\'TC253\'|t}}{{\'TC254\'|t}}&nbsp;<a href="mailto:teacherhelp@italki.com">teacherhelp@italki.com</a>.</p></div></div></div></div></div></div><a ui-sref="dashboard" class="btn btn-lg btn-primary btn-block">{{\'TC255\'|t}}</a></div></div>'),a.put("/views/teacher/availability.time.div.html",'<div class="popover-content"><div class="row grid-gutter-margin-b"><div class="col-lg-12"><label class="checkbox-inline" style="width: 100%"><input type="checkbox" ng-model="manycheck.now" ng-true-value="\'N\'" ng-false-value="\'\'" class="px" ng-click="instantChange($event)"><div class="lbl"><span>{{\'KP264\'|t}}</span> <span class="badge" style="background:#5bc0de;border:none;padding:0px 6px;border-radius: 9999px;color: #fff"><i class="fa fa-flash" style="font-size: 10px"></i></span></div></label></div></div><strong>{{\'C0205\'|t}}</strong><style>.checkbox-inline .tooltip {\n      white-space: nowrap;\n    }</style><div class="row grid-gutter-margin-b"><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.within[0]" ng-true-value="\'N\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'C0183\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="00:00-05:59"></i></span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.within[1]" ng-true-value="\'M\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'C0184\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="06:00-11:59"></i></span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.within[2]" ng-true-value="\'A\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'C0185\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="12:00-17:59"></i></span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.within[3]" ng-true-value="\'E\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'C0186\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="18:00-23:59"></i></span></label></div></div><strong>{{\'KP209\'|t}}</strong><div class="row"><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[1]" ng-true-value="\'0\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP018\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[2]" ng-true-value="\'1\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP019\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[3]" ng-true-value="\'2\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP020\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[4]" ng-true-value="\'3\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP021\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[5]" ng-true-value="\'4\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP022\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[6]" ng-true-value="\'5\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP023\'|t}}</span></label></div><div class="col-lg-6"><label class="checkbox-inline"><input type="checkbox" ng-model="manycheck.weekday[0]" ng-true-value="\'6\'" ng-false-value="\'\'" class="px" ng-disabled="manycheck.now"> <span class="lbl">{{\'TP017\'|t}}</span></label></div></div></div>'),a.put("/views/teacher/bs.html",'<style>sup{\n    top:-0.21em !important;\n  }\n  .badge1 {\n    background: #fff;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.4);\n    border: none;\n    font-size: 14px;\n    font-weight: 400;\n    text-align: center;\n    color: #333333;\n    height: 31px;\n    line-height: 31px;\n    text-transform: uppercase;\n    padding: 0 12px;\n  }\n\n  .badge1 img {\n    margin: -3px 5px 0 0;\n  }\n\n\n\n  .noresult-text {\n    position: absolute;\n    top: 15%;\n    display: block;\n    width: 100%;\n  }\n\n  @media (max-width: 767px) {\n    .btn-instant-tutoring {\n      margin: 0 15px 0 0;\n    }\n  }\n  .teacher-name-autocomplete {\n    margin-bottom: 22px;\n  }\n  .btn-new-more {\n    display: block;\n    margin: 0 auto;\n    width: 220px;\n    height: 42px;\n    text-transform: uppercase;\n    border-radius: 2px;\n    background: transparent !important;\n    border: solid 1px #333333 !important;\n    box-shadow: none !important;\n  }\n  .btn-new-more:hover {\n    border: solid 1px #333333 !important;\n  }</style><div clear-navbar-position ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><filter-resize-listener><div ng-if="desktop" class="visible-md-block visible-lg-block"><div class="filters" close-all-filters callback="callbackFn()"><div class="container filters-container"><div class="filters_section_1"><div open-filter="language" class="filters_language filters_language_js italki-drop-down-search"><ui-select ng-model="uiItems.selected" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'C0906\'|t}}"><span ng-if="!uiItemsFilter || $select.selected.v">{{$select.selected.v ? ($select.selected.v|t) : \'C0906\'|t}}</span> <span ng-if="uiItemsFilter&&!$select.selected.v" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="lan in teachLans | propsFilter: {name: $select.search, v: $select.search}" class="filter_item"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><div open-filter="availability" class="filters_availability filters_availability_js"><div class="filters_availability_title"><span>{{manycheck.now ? (\'M0113\'|t) : \'\'}} <span ng-if="teacherAvailableTime && !weekdays">{{teacherAvailableTime}}</span> <span ng-if="teacherAvailableTime && weekdays">{{\'C0907\'|t|format:teacherAvailableTime:weekdays}}</span> <span ng-if="!teacherAvailableTime && weekdays">{{weekdays}}</span> {{!manycheck.now && !filter.weekday.length && !teacherTimes.length ? (\'PB078\' | t) : \'\'}}</span></div><div class="filter_item filters_availability_selection"><ul class="filters_availability_tabs"><li switch-availability-tab="time" index="0" class="filters_availability_tab availability_tab_time_title_js">{{\'C0908\'|t}}</li><li switch-availability-tab="now" index="1" class="filters_availability_tab availability_tab_now_title_js">{{\'C0909\'|t}}</li></ul><div class="availability_tab availability_tab_time_js"><div class="filters_availability_options"><p>{{\'C0205\' | t}}</p><ul class="availability_time"><li class="availability_time_morning" ng-class="{\'availability_time_selected\': manycheck.within[2]}"><label><input hidden type="checkbox" ng-model="manycheck.within[2]" ng-true-value="\'360-540\'" ng-false-value="\'\'"> 06 - 09</label></li><li class="availability_time_morning" ng-class="{\'availability_time_selected\': manycheck.within[3]}"><label><input hidden type="checkbox" ng-model="manycheck.within[3]" ng-true-value="\'540-720\'" ng-false-value="\'\'"> 09 - 12</label></li><li class="availability_time_afternoon" ng-class="{\'availability_time_selected\': manycheck.within[4]}"><label><input hidden type="checkbox" ng-model="manycheck.within[4]" ng-true-value="\'720-900\'" ng-false-value="\'\'"> 12 - 15</label></li><li class="availability_time_afternoon availability_time_item_last" ng-class="{\'availability_time_selected\': manycheck.within[5]}"><label><input hidden type="checkbox" ng-model="manycheck.within[5]" ng-true-value="\'900-1080\'" ng-false-value="\'\'"> 15 - 18</label></li><li class="availability_time_evening" ng-class="{\'availability_time_selected\': manycheck.within[6]}"><label><input hidden type="checkbox" ng-model="manycheck.within[6]" ng-true-value="\'1080-1260\'" ng-false-value="\'\'"> 18 - 21</label></li><li class="availability_time_evening" ng-class="{\'availability_time_selected\': manycheck.within[7]}"><label><input hidden type="checkbox" ng-model="manycheck.within[7]" ng-true-value="\'1260-1440\'" ng-false-value="\'\'"> 21 - 00</label></li><li class="availability_time_night" ng-class="{\'availability_time_selected\': manycheck.within[0]}"><label><input hidden type="checkbox" ng-model="manycheck.within[0]" ng-true-value="\'0-180\'" ng-false-value="\'\'"> 00 - 03</label></li><li class="availability_time_night availability_time_item_last" ng-class="{\'availability_time_selected\': manycheck.within[1]}"><label><input hidden type="checkbox" ng-model="manycheck.within[1]" ng-true-value="\'180-360\'" ng-false-value="\'\'"> 03 - 06</label></li></ul><p>{{\'KP209\'|t}}</p><ul class="availability_days"><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[1] === \'0\'}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[1]" ng-true-value="\'0\'" ng-false-value="\'\'"> {{\'C0910\'|t}}</label></li><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[2]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[2]" ng-true-value="\'1\'" ng-false-value="\'\'"> {{\'C0911\'|t}}</label></li><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[3]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[3]" ng-true-value="\'2\'" ng-false-value="\'\'"> {{\'C0912\'|t}}</label></li><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[4]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[4]" ng-true-value="\'3\'" ng-false-value="\'\'"> {{\'C0913\'|t}}</label></li><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[5]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[5]" ng-true-value="\'4\'" ng-false-value="\'\'"> {{\'C0914\'|t}}</label></li><li class="availability_week_day" ng-class="{\'availability_time_selected\': manycheck.weekday[6]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[6]" ng-true-value="\'5\'" ng-false-value="\'\'"> {{\'C0915\'|t}}</label></li><li class="availability_week_day availability_week_day_last" ng-class="{\'availability_time_selected\': manycheck.weekday[0]}"><label><input type="checkbox" hidden ng-model="manycheck.weekday[0]" ng-true-value="\'6\'" ng-false-value="\'\'"> {{\'C0916\'|t}}</label></li></ul></div></div><div class="availability_tab availability_tab_now_js availability_now"><label class="availability_switch availability_now_switch"><input type="checkbox" class="availability_input" ng-model="manycheck.now" ng-true-value="\'N\'" ng-false-value="\'\'"> <span class="availability_slider availability_round"><span class="availability_round_btn"><i class="fa fa-flash availability_round_icon"></i></span></span></label><h4>{{\'M0113\' | t}}</h4><p>{{\'C0917\' | t}}</p></div></div></div></div></div></div><div class="filters-section-2"><teacher-search-sticky min-width="992"><div ng-class="{\'filters-section-2-shadow\': manycheck.now !== \'N\' && !filter.country && !filter.is_instant && !filter.speak && (filter.teacher_type === \'0\' || !filter.teacher_type) && (!filter.price_usd || filter.price_usd === \'400-8000\') && !filter.weekday.length && !teacherTimes.length && !filter.child_tags.length && !filter.tags.length && !filter.is_native && !filter.is_advanced && !filter.q}"><div class="container filters-container filters-options-2"><div class="row"><div class="col-md-2 text-center filters_teacherType_js"><div class="filter_option" open-filter="teacherType"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-type.svg"><p class="filter_option_title">{{\'C0918\' | t}}</p></div><div class="filters_teacher_type text-left filter_item"><div class="filters_professional_teachers"><label class="filters_radio"><input name="teacherType" type="radio" class="filters_radio_input" ng-model="filter.teacher_type" ng-value="\'1\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'TP003\' | t}}</span></label><show-radio-more texts="{{\'C0931\'|t}}"></show-radio-more></div><div class="filters_community_tutors"><label class="filters_radio"><input name="teacherType" type="radio" class="filters_radio_input" ng-model="filter.teacher_type" ng-value="\'2\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'TP004\' | t}}</span></label><show-radio-more texts="{{\'C0932\'|t}}"></show-radio-more></div><div class="filters_all"><label class="filters_radio"><input name="teacherType" type="radio" class="filters_radio_input" ng-model="filter.teacher_type" ng-value="\'0\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0024\' | t}}</span></label></div></div></div><div class="col-md-2 text-center filters_from_js"><div class="filter_option" open-filter="from"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-from.svg"><p class="filter_option_title">{{\'C0003\' | t}}</p></div><div class="filters_from italki-drop-down-search filter_item"><ui-select italki-dropdown name="from" ng-model="uiItems2.selected" theme="italki" on-select="uiSelected2($item, $model)"><ui-select-match placeholder="{{\'C0919\'|t}}"><span ng-if="!uiItemsFilter || $select.selected.v">{{$select.selected.v ? ($select.selected.v|t) : \'C0919\'|t}}</span> <span ng-if="uiItemsFilter&&!$select.selected.v" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices group-by="recommendedCountries" group-filter="reverseOrderFilterFn" repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v?c.v:c.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-2 text-center filters_hourlyRate_js"><div class="filter_option" open-filter="hourlyRate"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-rate.svg"><p class="filter_option_title">{{\'C0920\'|t}}</p></div><div class="filters_hourly_rate filter_item"><h3 class="filters_range_price">${{teacherPrice.min}} - ${{teacherPrice.max}}</h3><p class="filters_range_currency">{{currentUser.currency ? currentUser.currency + \' \' + (teacherPriceCurrency.min|number:2) + \' - \' + currentUser.currency + \' \' + (teacherPriceCurrency.max|number:2) : \'\'}}</p><kp-range-slider model="teacherPrice" min="4" max="80" limitation="5"></kp-range-slider></div></div><div class="col-md-2 text-center filters_teacherSpeaks_js"><div class="filter_option" open-filter="teacherSpeaks"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-speaks.svg"><p class="filter_option_title">{{\'C0140\' | t}}</p></div><div class="filters_teacher_speaks italki-drop-down-search filter_item" ng-if="currentUser.language_obj_s"><ui-select italki-dropdown ng-model="uiItems1.selected" theme="italki" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'C0140\'|t}}"><span ng-class="{\'filterselected\':filter.speak}" ng-bind="\'C0140\'|t"></span></ui-select-match><ui-select-choices group-by="recommendedLanguages" group-filter="reverseLangOrderFilterFn" repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="filters_teacher_speaks italki-drop-down-search filter_item" ng-if="!currentUser.language_obj_s"><ui-select italki-dropdown ng-model="uiItems1.selected" theme="italki" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'C0140\'|t}}"><span ng-class="{\'filterselected\':filter.speak}" ng-bind="\'C0140\'|t"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-2 text-center filters_teacherLevel_js"><div class="filter_option" open-filter="teacherLevel"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-native-advanced.svg"><p class="filter_option_title">{{\'C0921\'|t}}</p></div><div class="filters_teacher_level text-left filter_item"><div class="filters_advanced_level"><label class="filters_radio" italki-label-click><input name="teacherLevel" type="radio" class="filters_radio_input" ng-model="filter.is_advanced" ng-change="changeTeacherLevel(\'advanced\')" value="1"> <span class="filters_radio_description filters_radio_description_special"><span class="filters_radio_btn filters_radio_btn_special"></span> {{\'C0922\'|t}}<show-radio-more texts="{{\'C0937\'|t}}"></show-radio-more></span></label></div><div class="filters_native"><label class="filters_radio"><input name="teacherLevel" type="radio" class="filters_radio_input" ng-model="filter.is_native" ng-change="changeTeacherLevel(\'native\')" value="1"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0923\'|t}}</span></label><show-radio-more texts="{{\'C0938\'|t}}"></show-radio-more></div><div class="filters_all"><label class="filters_radio" ng-click="changeTeacherLevel(\'all\')"><input name="teacherLevel" type="radio" class="filters_radio_input" ng-checked="!filter.is_native && !filter.is_advanced"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0024\' | t}}</span></label></div></div></div><div class="col-md-2 text-center filters_skills_js"><div class="filter_option" open-filter="skills"><img class="filter_options" width="30" height="30" src="static/images/teachers/icon-skills.svg"><p class="filter_option_title">{{\'C0924\'|t}}</p></div><div class="filters_skill text-left filter_item filters_skills_checkbox"><h5 class="filters_skill_needs">{{\'C0926\'|t}}</h5><div class="italki-skill-search"><italki-autocomplete search="teacherSkillSearch(text)" placeholder="{{\'C3024\'|t}}" value="teacherSearchSkill"></italki-autocomplete></div><h5 class="filters_skill_needs">{{\'C3023\'|t}}</h5><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="manycheck.tags[0]" ng-true-value="\'1\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST701\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="manycheck.tags[3]" ng-true-value="\'4\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST704\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="manycheck.tags[4]" ng-change="getTagChild()" ng-true-value="\'5\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST705\' | t}}</span></label></div><div ng-if="childTags.length>0"><div ng-repeat="item in childTags"><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="item.checked" ng-change="applyFilter()"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{item.abbr}}</span></label></div></div><h5 class="filters_skill_age">{{\'C0925\'|t}}</h5><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="manycheck.tags[1]" ng-true-value="\'2\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST702\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="manycheck.tags[2]" ng-true-value="\'3\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST703\' | t}}</span></label></div></div></div></div></div></div></teacher-search-sticky></div></div><div ng-if="mobile" class="visible-xs-block visible-sm-block filters_mobile_and_tablet" ng-class="{\'filters-section-2-shadow\': manycheck.now !== \'N\' && !filter.country && !filter.is_instant && !filter.speak && (filter.teacher_type === \'0\' || !filter.teacher_type) && (!filter.price_usd || filter.price_usd === \'400-8000\') && !filter.weekday.length && !teacherTimes.length && !filter.child_tags.length && !filter.tags.length && !filter.is_native && !filter.is_advanced && !filter.q}"><div class="panel filters_tablet_panel"><teacher-search-sticky max-width="991"><div class="panel-body"><div class="filters_section_1"><div class="filters_section_tablet"><div ng-click="toggleFilterOption($event, \'languageToLearn\')" class="filters_language italki-drop-down-search"><ui-select ng-model="uiItems.selected" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'C0906\'|t}}"><span ng-if="!uiItemsFilter || $select.selected.v">{{$select.selected.v ? ($select.selected.v|t) : \'C0906\'|t}}</span> <span ng-if="uiItemsFilter&&!$select.selected.v" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="lan in teachLans | propsFilter: {name: $select.search, v: $select.search}" ng-hide="!ui.languageToLearn.show"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><a open-mobile-filter set-mobile-filters="setMobileFilters()"><img width="25" height="25" src="static/images/teachers/icon-filters.svg" class="filters_tablet_icon"></a></div></div></div></teacher-search-sticky></div></div><div ng-if="mobile" class="filters-mobile filters-mobile-js" ng-include="\'/views/teacher/search.filters.mobile.html\'"></div></filter-resize-listener><div class="container-fluid filters_tags" ng-hide="manycheck.now !== \'N\' && !filter.country && !filter.is_instant && !filter.speak && (filter.teacher_type === \'0\' || !filter.teacher_type) && (!filter.price_usd || filter.price_usd === \'400-8000\') && !filter.weekday.length && !teacherTimes.length && !filter.child_tags.length && !filter.tags.length && !filter.is_native && !filter.is_advanced && !filter.q"><search-tags-sticky mobile="filters_mobile_and_tablet" desktop="filters-section-2" z-index="99"><span class="filters_tags_clear" ng-click="resetTags()">{{\'C0929\'|t}}</span><ul class="filters_tag_lists"><li class="filters_tag" ng-hide="manycheck.now !== \'N\'">{{\'M0113\'|t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="manycheck.now = \'\'"></li><li class="filters_tag" ng-repeat="item in teacherTimes" ng-hide="manycheck.now === \'N\'">{{item | teacherTime}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeTime(item)"></li><li class="filters_tag" ng-repeat="item in filter.weekday" ng-hide="manycheck.now === \'N\'">{{item | teacherWeekday | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeWeekday(item)"></li><li class="filters_tag" ng-hide="filter.teacher_type === \'0\' || !filter.teacher_type">{{filter.teacher_type | teacherType | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="filter.teacher_type = 0"></li><li class="filters_tag" ng-hide="!filter.country">{{filter.country ? (filter.country | t) : \'\'}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="resetTeacherCountry()"></li><li class="filters_tag" ng-hide="!filter.price_usd || filter.price_usd === \'400-8000\'">{{filter.price_usd ? \'$\' + filter.price_usd.split(\'-\')[0] / 100 + \' - $\' + filter.price_usd.split(\'-\')[1] / 100 : \'\'}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="filter.price_usd = \'\';teacherPrice.min = 4;teacherPrice.max = 80;"></li><li class="filters_tag" ng-hide="!filter.speak">{{filter.speak | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="resetTeacherSpeak()"></li><li class="filters_tag" ng-hide="!filter.is_advanced">{{\'C0905\' | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="filter.is_advanced = \'\'"></li><li class="filters_tag" ng-hide="!filter.is_native">{{\'C0023\' | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="filter.is_native = \'\'"></li><li class="filters_tag" ng-repeat="tag in filter.tags">{{tags[tag].t | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeTags(tag)"></li><li class="filters_tag" ng-repeat="tag in childTags" ng-hide="!tag.checked">{{tag.abbr}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeChildTags(tag)"></li><li class="filters_tag" ng-hide="!filter.q">{{filter.q}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeSkill()"></li></ul></search-tags-sticky></div><div class="container teachers-container" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n     \'notification\':isTopShow}" autoscroll><div class="tablet-autocomplete-mobile"><a italki-tablet-autocomplete class="search-teaher-name">+ {{\'C3026\'|t}}</a><italki-autocomplete search="teacherNameSearch(text)" placeholder="{{\'C3025\'|t}}" value="teacherSearchName"></italki-autocomplete></div><div class="teachers-search-title"><span ng-if="(!filter.teacher_type || filter.teacher_type == 0)">{{\'C0930\'|t|format: (statistics.pro_count + statistics.tutor_count)}}</span> <span ng-if="filter.teacher_type == 1">{{\'C0930\'|t|format: statistics.pro_count}}</span> <span ng-if="filter.teacher_type == 2">{{\'C0930\'|t|format: statistics.tutor_count}}</span><div class="tablet-autocomplete-tablet pull-right"><a italki-tablet-autocomplete class="search-teaher-name">+ {{\'C3026\'|t}}</a><italki-autocomplete search="teacherNameSearch(text)" placeholder="{{\'C3025\'|t}}" value="teacherSearchName"></italki-autocomplete></div></div><div class="row"><div class="col-md-9"><div class="teacher-list panel loading-layout" ng-style="{background: newTeacherPreview && items.length ? \'none\' : \'white\'}"><div ng-if="filter.page==1"><kp-loading indicator="loadedFlag()"></kp-loading></div><kp-no-found items="items" ng-if="statistics.pro_count==0&&statistics.tutor_count==0" tips="{{\'KP265\'|t}}"></kp-no-found><div class="noresult-text text-lg text-center text-muted" ng-show="items&&items.length==0"><span ng-if="statistics.tutor_count>0&&filter.teacher_type==1"><img class="rounded" src="/static/images/icon_norecord.png"><br>{{\'TP244\'|t}}<br><a href="javascript:void(0)" ng-click="noStatFlag=true;filter.teacher_type=2;applyFilter();">{{\'TP151\'|t}}</a></span> <span ng-if="statistics.pro_count>0&&filter.teacher_type==2"><img class="rounded" src="/static/images/icon_norecord.png"><br>{{\'TP245\'|t}}<br><a href="javascript:void(0)" ng-click="noStatFlag=true;filter.teacher_type=1;applyFilter();">{{\'TP152\'|t}}</a></span></div><section ng-if="staFlag && newTeacherPreview" style="margin: 0 0 20px" ng-repeat="teacher in items track by $index"><teacher-card teacher="teacher"></teacher-card></section><section ng-if="staFlag && !newTeacherPreview" class="teacher-item yes-cursor cursor-over" ng-repeat="teacher in items track by $index"><div class="panel-body is-relative" ng-click="openTeacherProfile($event,teacher)"><div class="row"><div class="col-xs-2 is-relative" onclick="event.stopPropagation()||(event.cancelBubble = true)"><div class="item-icon item-icon-relative"><div class="online-layout1"><div class="offline" ng-class="{online:teacher.is_online}" title="{{ teacher.is_online?\'Online\':\'Offline\' }}"></div></div><a ui-sref="teacher({id:teacher.id})" target="_blank"><img ng-src="{{teacher.avatar_file_name|avatar:\'100\'}}" alt="" kp-fallback-avatar width="50" class="rounded" width="50" border="0"></a></div></div><div class="col-xs-7"><ul class="media-heading list-inline"><li><a class="teacher-nickname text-lg" ui-sref="teacher({id:teacher.id})" ng-bind="teacher.nickname" class="text-lg" target="_blank"></a></li><li ng-hide="teacher.origin_country_id==\'ZZ\'"><i class="text-lg" ng-class="teacher.origin_country_id|userFlag:0" title="{{\'C0102\'|t|format:(teacher.origin_country_id|t)}}" style="width: 24px;height: 18px"></i></li></ul><ul class="media-heading list-inline"><li class="{{teacher.is_pro?\'color-pro\':\'color-tutor\'}}"><i class="fa fa-ii-tutor" ng-if="teacher.is_pro" title="{{\'C0200\'|t}}" style="vertical-align: middle"></i> <i class="fa fa-ii-tutor" ng-if="!teacher.is_pro" title="{{\'C0201\'|t}}" style="vertical-align: middle"></i>&nbsp; <span translate="{{teacher.is_pro?\'TP003\':\'TP004\'}}" style="vertical-align: middle"></span></li><br class="show-br"><li ng-if="teacher.exam_result_shown_obj != null && teacher.exam_result_shown_obj.level !=\'\' "><a class="fa fa-ii-oopt" style="color: #94B004;vertical-align: middle" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a>&nbsp;</li><li><span ng-repeat="item in teacher.language_obj_s|filter:{is_teaching:1}">{{item.language|t }}<span ng-hide="$last">,&nbsp;</span></span></li><li>{{\'C2021\'|t|format:teacher.teacher_info_obj.session_count}}</li></ul><p class="text-muted hidden-phone" ng-if="!teacher.teacher_info_obj.about_me" ng-bind="teacher.teacher_info_obj.intro"></p><p class="text-muted hidden-phone" ng-if="teacher.teacher_info_obj.about_me">{{teacher.teacher_info_obj.about_me| limitTo: 200}}{{teacher.teacher_info_obj.about_me.length > 200 ? \'...\' : \'\'}}</p><ul class="list-inline hidden-phone"><li ng-repeat="item in teacher.teacher_info_obj.teacher_tags.split(\',\')" ng-if="teacher.teacher_info_obj.teacher_tags"><a href="" tooltip="{{tags[item].d|t}}" tooltip-placement="bottom" class="label label-tags">{{tags[item].t|t}}</a></li><li ng-repeat="item in teacher.teacher_info_obj.teacher_child_tags.split(\',\')" ng-if="teacher.teacher_info_obj.teacher_child_tags"><a href="" tooltip="{{getChildTagItem(item).full_name|t}}" tooltip-placement="bottom" class="label label-tags">{{getChildTagItem(item).abbr|t}}</a></li><li ng-repeat="(id,tag) in teacher.personal_tag | limitTo:5" ng-if="teacher.personal_tag"><a href="" class="label label-tags profile-personal-tags">{{tag.tag_name}}</a></li></ul><ul class="list-inline hidden-phone" onclick="event.stopPropagation()||(event.cancelBubble = true)"><li><span class="badge1 badge yes-cursor" style="border-radius: 0px" title="{{\'PB121\'|t}}" kp-time-schedule teacher="teacher"><img src="/static/images/icons/icon_calendar.png" height="14"> {{\'PB078\'|t}}</span></li><li><span class="badge1 badge yes-cursor" style="border-radius: 0px" title="{{\'PB026\'|t}}" kp-video-play teacher="teacher" video-title="PB026"><img src="/static/images/icons/icon_video.png" height="14"> {{\'PB026\'|t}}</span></li></ul><div ng-if="filter[\'is_instant\'] || teacher.teacher_info_obj.is_available_instant_tutoring" class="btn-instant-tutoring"><button class="btn btn-info btn-block text-ellipsis" kp-instant-lesson-request-btn teacher="teacher" instant-filter="instantFilter" ng-disabled="currentUser.id==teacher.id"><i class="fa fa-flash"></i>&nbsp;&nbsp;Instant Tutoring Available<span class="hidden-xs">: <strong>$<span ng-bind-html="teacher.teacher_info_obj.instant_tutoring_price_usd|kpToUsd|number:2"></span> USD / 30 minutes</strong></span></button></div><div class="right-btn hidden-phone" style="top:0; right:0" onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="currentUser.id!=teacher.id"><button ng-class="{\'btn-warning\':teacher.is_favourite==1}" ng-click="addFavorites($event, teacher);" class="btn btn-xs" title="{{teacher.is_favourite==1?(\'C0177\'|t):(\'C0176\'|t)}}"><i class="fa fa-heart text-sm"></i>&nbsp;{{teacher.is_favourite==1?(\'C0177\'|t):(\'C0176\'|t)}}{{$rootScope.currentUser.has_teacher}}</button></div></div><div class="col-xs-3 text-center"><div class="hidden-phone" ng-if="teacher.teacher_info_obj.pro_rating>0"><rating class="rate" readonly="true" ng-model="teacher.teacher_info_obj.pro_rating" state-on="\'fa fa-star\'" state-off="\'fa fa-star-o\'" titles="[\'{{rateTitle(teacher.teacher_info_obj.pro_rating)}}\',\'{{rateTitle(teacher.teacher_info_obj.pro_rating)}}\',\'{{rateTitle(teacher.teacher_info_obj.pro_rating)}}\',\'{{rateTitle(teacher.teacher_info_obj.pro_rating)}}\',\'{{rateTitle(teacher.teacher_info_obj.pro_rating)}}\']"></rating></div><div class="teacher-info-price"><span translate="PB023" class="text-muted text-xs"></span><br><strong class="text-bg" ng-hide="isNaN(teacher.teacher_info_obj.min_price_usd)">$<span ng-bind-html="teacher.teacher_info_obj|teacherPriceSup"></span>&nbsp;<sup>USD</sup></strong><br><span class="label label-tags" ng-hide="isNaN(teacher.teacher_info_obj.min_price_usd)||(currentUser.currency==\'USD\')||!currentUser">{{teacher.teacher_info_obj.min_price_usd|currencytwo:teacher.teacher_info_obj.max_price_usd}}</span></div><div class="hidden-phone" ng-hide="teacher.teacher_info_obj.has_trial==0"><span translate="TS032" class="text-muted text-xs"></span><br><strong class="text-bg" ng-hide="isNaN(teacher.teacher_info_obj.trial_price_usd)">$<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2|kpSup"></span> &nbsp;<sup>USD</sup></strong><br><span class="label label-tags" ng-hide="isNaN(teacher.teacher_info_obj.trial_price_usd)||(currentUser.currency==\'USD\')||!currentUser">{{(teacher.teacher_info_obj.trial_price_usd*currentUser.currency_rate)|kpToItcToCurrency|number:2}} {{currentUser.currency}}</span></div></div><div class="is-absolute visible-phone fav-btn" onclick="event.stopPropagation()||(event.cancelBubble = true)" ng-if="currentUser.id!=teacher.id"><i class="fa fa-heart text-muted" ng-class="{\'text-warning\':teacher.is_favourite==1}" ng-click="addFavorites($event, teacher);"></i></div></div></div></section></div><aside class="grid-gutter-margin-b" ng-if="staFlag&&((meta && meta.has_next)||loadMoreFlag)&&!newTeacherPreview"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore();" stext="MH046"></button></aside><aside class="grid-gutter-margin-b" ng-if="staFlag&&((meta && meta.has_next)||loadMoreFlag)&&newTeacherPreview"><button class="btn btn-new-more" italki-click-with-spinner="loadMore();" stext="MH046"></button></aside></div><aside class="col-md-3"><div class="teacher-name-autocomplete visible-lg"><italki-autocomplete search="teacherNameSearch(text)" placeholder="{{\'C3025\'|t}}" value="teacherSearchName"></italki-autocomplete></div><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">{{\'TS290\'|t}}</h4><p>{{\'TS291\'|t}}</p><span><a href="http://support.italki.com/hc/en-us/articles/206352738-How-to-find-the-right-teacher-on-italki" target="_blank">{{\'TS292\'|t}}</a></span></div></div><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">{{\'KP204\'|t}}</h4><ul class="no-grid-gutter-h"><li><a href="http://support.italki.com/hc/en-us/articles/206352728" target="_blank">{{\'KP205\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/206352738" target="_blank">{{\'KP206\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/206352268" target="_blank">{{\'KP207\'|t}}</a></li><li><a href="http://support.italki.com/hc/en-us/articles/206352408" target="_blank">{{\'KP208\'|t}}</a></li></ul><div class="text-center"><a href="http://support.italki.com/hc/en-us/categories/200405048" target="_blank" class="btn btn-block">{{\'C0040\'|t}}</a></div></div></div><div class="panel no-border panel-dark"><div class="panel-body"><h4 class="no-margin-t">{{\'TS285\'|t}}</h4><div class="grid-gutter-margin-b"><p>{{\'TS286\'|t}}</p></div><div class="text-center"><button italki-click-with-spinner="teacherApply()" class="btn btn-block" stext="TP100"></button></div></div></div><div class="panel no-border panel-dark" ng-show="isCN()"><div class="panel-body"><h4 class="no-margin-t">扫码关注微信公众号</h4><div class="grid-gutter-margin-b"><p>全新推出 italki 官方服务号, 方便您随时随地通过微信搜索教师、预约课时、充值点数等。</p></div><div class="text-center"><img src="/static/images/qrcode_for_gh_258.jpg" width="150"></div></div></div><kp-ad-system loc="TEA_SEARCH_R"></kp-ad-system></aside></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div><div class="filters_overlay"></div>'),
a.put("/views/teacher/directives/add.pro.courses.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title"><span ng-if="isAdd">{{\'TP119\'|t}}</span> <span ng-if="!isAdd">{{\'TP073\'|t}}</span></h4></div><div class="modal-body padding-bottom"><div ng-if="isPro" class="form-group no-margin-hr"><label class="control-label">{{\'C0106\'|t}}</label><input type="text" class="form-control" ng-model="formObj.title.v"> <span class="help-block" ng-hide="vv(formObj.title,vSubFlag)">{{\'ST155\'|t|format:formObj.title.min:formObj.title.max}}</span></div><div class="form-group no-margin-hr"><label class="control-label">{{\'TP046\'|t}}</label><div class="text-lb text-capitalize" ng-if="formObj.language.v">{{formObj.language.v}}</div><div ng-if="!formObj.language.v"><select ng-model="formObj.language.v" class="form-control" ng-options="m as m|t for m in lans"><option value="">{{\'WK132\'|t}}</option></select></div><span class="help-block" ng-if="!formObj.language.v&&!vSubFlag">please select teaching language</span> <span ng-if="isPro" class="help-block" ng-hide="checkLanCoursers(vSubFlag)">{{\'ST324\'|t}}</span> <span ng-if="!isPro" class="help-block" ng-hide="checkLanCoursers(vSubFlag)">{{\'ST325\'|t}}</span></div><div ng-if="isPro" class="form-group no-margin-hr"><label class="control-label">{{\'RS050\'|t}}</label><textarea class="form-control" rows="4" data-ng-model="formObj.description.v"></textarea><span class="help-block" ng-hide="vv(formObj.description,vSubFlag)">{{\'ST155\'|t|format:formObj.description.min:formObj.description.max}}</span></div><div class="form-group no-margin"><label class="control-label">{{\'TP008\'|t}}&nbsp;<span class="text-danger">{{\'TS330\'|t|format:minItc:maxItc}}</span></label><table class="table table-bordered" width="100%"><thead><tr><th></th><th colspan="3"><strong>{{\'TP039\'|t}}</strong></th><th colspan="2"><strong>{{\'TS038\'|t}}</strong></th></tr></thead><tbody><tr ng-repeat="item in prices"><td nowrap="nowrap"><label class="checkbox-inline"><input type="checkbox" data-ng-model="item.checked" ng-disabled="item.disabled" class="px"> <span class="lbl">&nbsp;</span></label></td><td>{{\'TS011\'|t|format:item.session_length*15}}</td><td nowrap="nowrap" style="padding: 8px 4px"><div class="form-inline">$ <input class="form-control" type="text" style="width:45px" ng-model="item.session_price_usd" ng-disabled="!item.checked" ng-paste="input_paste()" ondragenter="return false" ng-keypress="input_keypress($event)"></div><span class="help-block" ng-show="!checkItcPric(item.session_price_usd,vSubFlag)&&item.checked">{{\'TP302\'|t}}</span></td><td><span>{{\'TS012\'|t}}</span></td><td><select class="form-control" data-ng-model="item.package_length" ng-disabled="!item.checked"><option value="1">N / A</option><option value="5">{{\'C2021\'|t|format:5}}</option><option value="10">{{\'C2021\'|t|format:10}}</option><option value="20">{{\'C2021\'|t|format:20}}</option><option value="30">{{\'C2021\'|t|format:30}}</option><option value="40">{{\'C2021\'|t|format:40}}</option><option value="50">{{\'C2021\'|t|format:50}}</option></select><span class="help-block" ng-show="!checkPackageLength(item.package_price_usd,item.package_length,vSubFlag)&&item.checked">{{\'TP301\'|t}}</span></td><td nowrap="nowrap" style="padding: 8px 4px"><div class="form-inline"><span>{{\'TS013\'|t}}</span> $ <input class="form-control" type="text" ng-model="item.package_price_usd" ng-disabled="!item.checked" style="width:45px;text-align: center" ng-paste="input_paste()" ondragenter="return false" ng-keypress="input_keypress($event)"> <span>USD</span></div><span class="help-block" ng-show="!checkItcTotalPrice(item.package_price_usd,item.package_length,vSubFlag)&&item.checked">{{\'TP302\'|t}}</span></td></tr></tbody></table></div><div class="form-group no-margin"><label class="control-label">{{\'TS031\'|t}}</label><div class="radio"><div class="row"><div class="col-md-4"><label><input type="radio" data-ng-model="formObj.status.v" value="0" class="px"> <span class="lbl">{{\'TP113\'|t}}</span></label></div><div class="col-md-4"><label><input type="radio" data-ng-model="formObj.status.v" value="1" class="px"> <span class="lbl">{{\'TP114\'|t}}</span></label></div></div></div></div></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055"></button>&nbsp;</div>'),a.put("/views/teacher/directives/add.time.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'ST136\'|t}}</h4></div><div class="modal-body"><p class="text-muted" ng-if="timeType==1">{{\'ST138\'|t}}</p><p class="text-muted" ng-if="timeType!=1"></p><div class="input-daterange input-group"><select class="form-control" data-ng-model="startTime" ng-options="m as m for m in selTimeStart" ng-change="getEndTimes()"></select><span class="input-group-addon">to</span><select class="form-control" data-ng-model="endTime" ng-options="m as m for m in selTimeEnd"></select></div></div><div class="modal-footer"><button class="btn" ng-click="$close()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="addTime()">{{\'C0045\'|t}}</button></div>'),a.put("/views/teacher/directives/courses.instant.list.html",'<div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 text-right ng-binding">{{\'M0113\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-10"><div ng-if="coursesInfo.instant_tutoring_status==1||coursesInfo.instant_tutoring_status==6" class="grid-gutter-margin-b"><strong>{{\'TP160\'|t}}</strong><br><div class="switcher switcher-theme-square" ng-class="{\'checked\':coursesInfo.instant_tutoring_status==1}" ng-click="switchState()"><input type="checkbox" data-class="switcher-sm"><div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on"><span class="fa fa-check" style="font-size:11px"></span></div><div class="switcher-state-off"><span class="fa fa-times" style="font-size:11px"></span></div></div></div></div><div ng-if="coursesInfo.instant_tutoring_status==1||coursesInfo.instant_tutoring_status==6" class="grid-gutter-margin-b"><p>{{\'ST266\'|t}}</p><ul><li><a href="http://support.italki.com/entries/23459154-Instant-Tutoring-Rules-and-Policies" target="_blank">{{\'TP277\'|t}}</a></li><li><a href="http://support.italki.com/entries/23391749-How-Instant-Tutoring-works-for-Teachers-" target="_blank">{{\'TP278\'|t}}</a></li></ul><p ng-hide="showHide.stateOne">{{\'TP008\'|t}}: ${{coursesInfo.instant_tutoring_price_usd|kpToUsd|number:2}} USD 30 minutes <span ng-click="showHide.stateOne=!showHide.stateOne;" class="fa fa-pencil yes-cursor"></span></p><div ng-show="showHide.stateOne"><p>{{\'TP008\'|t}}<br>$&nbsp;<input ng-model="instant_tutoring_price_usd" type="text" style="width: 60px; display: inline" class="form-control" ng-paste="input_paste()" ondragenter="return false" ng-keypress="input_keypress($event)"> USD 30 minutes</p><p class="help-block" ng-if="instant_tutoring_price_usd<4||instant_tutoring_price_usd>80"><span>{{\'C3019\'|t}}</span>&nbsp;<span>{{\'TS330\'|t|format:"4.00":"80.00"}}</span></p><div><button class="btn btn-primary" italki-click-with-spinner="save(instant_tutoring_price_usd)" stext="C0045"></button> <button class="btn" ng-click="instant_tutoring_price_usd=coursesInfo.instant_tutoring_price_usd/100;showHide.stateOne=!showHide.stateOne;">{{\'C0056\'|t}}</button></div></div></div><div ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num<5"><p>{{\'ST268\'|t}} <a href="http://support.italki.com/entries/23392399-I-m-a-new-teacher-on-italki-Why-can-t-I-offer-Instant-Tutoring-" target="_blank">{{\'C0171\'|t}}</a></p><p>{{\'ST269\'|t}}</p><button class="btn btn-primary" kp-instant-apply courses-info="coursesInfo">{{\'ST124\'|t}}</button></div><div ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num>4"><p>{{\'ST266\'|t}}</p><ul><li><a href="http://support.italki.com/entries/23459154-Instant-Tutoring-Rules-and-Policies" target="_blank">{{\'TP277\'|t}}</a></li><li><a href="http://support.italki.com/entries/23391749-How-Instant-Tutoring-works-for-Teachers-" target="_blank">{{\'TP278\'|t}}</a></li></ul><button class="btn btn-primary" kp-instant-apply courses-info="coursesInfo">{{\'ST132\'|t}}</button></div><div ng-if="coursesInfo.instant_tutoring_status==5"><p class="text-danger">{{\'ST265\'|t}}</p></div><div ng-if="coursesInfo.instant_tutoring_status>30">{{\'ST262\'|t}}<ul class=""><li ng-if="coursesInfo.instant_tutoring_status==31">{{\'ST263\'|t|format:2}} <a href="http://support.italki.com/entries/23459154-Instant-Tutoring-Rules-and-Policies" target="_blank">{{\'C0171\'|t}}</a></li><li ng-if="coursesInfo.instant_tutoring_status==32">{{\'ST315\'|t}} <a href="http://support.italki.com/entries/23459154-Instant-Tutoring-Rules-and-Policies" target="_blank">{{\'C0171\'|t}}</a></li><li ng-if="coursesInfo.instant_tutoring_status==33">{{\'ST316\'|t}} <a href="http://support.italki.com/entries/23459154-Instant-Tutoring-Rules-and-Policies" target="_blank">{{\'C0171\'|t}}</a></li></ul><p>{{\'ST264\'|t}}</p><button class="btn btn-primary" kp-instant-apply courses-info="coursesInfo">{{\'ST131\'|t}}</button></div><span ng-bind-html="\'TP273\'|t" ng-if="coursesInfo.instant_tutoring_status==2||coursesInfo.instant_tutoring_status==4"></span></div><div class="col-sm-2 text-center"><span class="text-bold">{{\'C0030\'|t}}</span><br><span class="label label-success" ng-if="coursesInfo.instant_tutoring_status==1||coursesInfo.instant_tutoring_status==6">{{\'ST127\'|t}}</span><p ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num<5"><span class="label">{{\'ST125\'|t}}</span></p><span class="label label-success" ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num>4">{{\'ST127\'|t}}</span> <span class="label" ng-if="coursesInfo.instant_tutoring_status==5">{{\'ST129\'|t}}</span><p ng-if="coursesInfo.instant_tutoring_status>30"><span class="label label-danger">{{\'ST128\'|t}}</span></p><p ng-if="coursesInfo.instant_tutoring_status==2||coursesInfo.instant_tutoring_status==4"><span class="label label-warning">{{\'ST126\'|t}}</span></p></div></div></div></div></div>'),a.put("/views/teacher/directives/courses.pro.list.html",'<div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'TP997\'|t}} <i class="fa fa-help"></i></label><div class="col-sm-9"><div class="row" ng-repeat="item in coursesInfo.pro_course_obj_s"><div class="col-sm-11"><ul class="list-inline"><li><i class="fa fa-circle online-status" ng-class="{\'online\':!item.status}" title="{{item.status?\'Unavailable\':\'Available\'}}"></i></li><li>{{item.title}} <span class="label package" ng-if="showPackage(item.price_obj_s)">{{\'TS038\'|t}}</span></li><li>{{item.language|t}}</li><li>${{item.session_price_usd|kpToUsd|number:2}} {{\'TP016\'|t}}</li></ul></div><div class="col-sm-1 text-right"><ul class="list-inline"><li><i class="fa fa-pencil yes-cursor" ng-click="addCoursesPro($index)"></i></li><li><i class="fa fa-trash-o yes-cursor" ng-if="canDel()" ng-click="moveCoursesPro($index)"></i></li></ul></div></div><div><a href="javascript:void(0);" ng-click="addCoursesPro(-1)">+ {{\'TP119\'|t}}</a></div></div></div></div>'),a.put("/views/teacher/directives/courses.trial.html",'<div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'TS026\'|t}} <i class="fa fa-help"></i></label><div class="col-sm-9"><div ng-click="setHaveTrial()"><div class="switcher switcher-theme-square" ng-class="{\'checked\':coursesInfo.has_trial}"><input type="checkbox" data-class="switcher-sm"><div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on"><span class="fa fa-check" style="font-size:11px"></span></div><div class="switcher-state-off"><span class="fa fa-times" style="font-size:11px"></span></div></div></div></div><div class="row" ng-show="coursesInfo.has_trial"><div class="col-sm-11"><div><ul class="list-inline" ng-hide="editModel"><li><i class="fa fa-circle online-status" ng-class="{\'online\':coursesInfo.has_trial}" title="{{coursesInfo.has_trial?\'Available\':\'Unavailable\'}}"></i></li><li>{{\'TS215\'|t}}</li><li>${{coursesInfo.trial_price_usd>0?coursesInfo.trial_price_usd:100|kpToUsd|number:2}} {{\'TS012\'|t}}</li></ul><div ng-show="editModel"><p class="form-inline">{{\'TP033\'|t}}: <input class="form-control" type="text" ng-keypress="input_keypress($event)" ng-model="trial_price_usd" style="width:60px"> {{\'TS012\'|t}}</p><span class="help-block" ng-if="!isValidPrice()&&!vSubFlag">{{\'TP302\'|t}}</span><p class="text-danger">{{\'TS330\'|t|format:"1.00":"80.00"}}</p><p><button class="btn btn-primary" italki-click-with-spinner="save()"><span class="btn-txt">{{\'C0055\'|t}}</span></button>&nbsp; <button class="btn" ng-click="editModel=false;">{{\'C0056\'|t}}</button></p></div></div></div><div class="col-sm-1 text-right"><i class="fa fa-pencil yes-cursor" ng-click="editModel=true"></i></div></div></div><div class="col-sm-2 text-right"></div></div></div>'),a.put("/views/teacher/directives/courses.tutor.list.html",'<div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'TP999\'|t}} <i class="fa fa-help"></i></label><div class="col-sm-9"><div class="" ng-click="setHaveTutor()"><div class="switcher switcher-theme-square" ng-class="{\'checked\':coursesInfo.is_tutor}"><input type="checkbox" data-class="switcher-sm"><div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on"><span class="fa fa-check" style="font-size:11px"></span></div><div class="switcher-state-off"><span class="fa fa-times" style="font-size:11px"></span></div></div></div></div><div ng-show="coursesInfo.is_tutor"><div class="row" ng-repeat="item in coursesInfo.tutor_course_obj_s"><div class="col-sm-11"><ul class="list-inline"><li><i class="fa fa-circle online-status" ng-class="{\'online\':!item.status}" title="{{(item.status?\'TP114\':\'TP113\')|t}}"></i></li><li>{{\'TP996\'|t}}: {{item.language|t}} <span class="label package" ng-if="showPackage(item.price_obj_s)">{{\'TS038\'|t}}</span></li><li>{{item.language|t}}</li><li>${{item.session_price_usd|kpToUsd|number:2}} {{\'TP016\'|t}}</li></ul></div><div class="col-sm-1 text-right"><ul class="list-inline"><li><i class="fa fa-pencil yes-cursor" ng-click="addCoursesPro($index)"></i></li><li ng-if="canDel()"><i class="fa fa-trash-o yes-cursor" ng-click="moveCoursesPro($index)"></i></li></ul></div></div><div></div></div><div><a href="javascript:void(0);" ng-show="canAdd()" ng-click="addCoursesPro(-1)">+ {{\'TP119\'|t}}</a></div></div></div></div>'),a.put("/views/teacher/directives/del.time.html",'<style>.dropdown-menu:before {\n    left: 50% !important;\n  }</style><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'ST137\'|t}}</h4></div><div class="modal-body"><div class="input-daterange input-group" id="bs-datepicker-range"><input type="text" class="input-sm form-control" name="start" placeholder="{{\'TS055\'|t}}" datepicker-popup ng-model="dt1" is-open="status.start_opened" min-date="minDate" max-date="\'2050-06-22\'" date-disabled="disabled1(date, mode)" close-text="Close"> <span class="input-group-btn"><button type="button" class="btn btn-default" style="box-shadow: none" ng-click="sopen($event)"><i class="fa fa-calendar" style="font-size: 14px"></i></button></span> <span class="input-group-addon">{{\'TP024\'|t}}</span> <input type="text" class="input-sm form-control" name="end" placeholder="{{\'TS056\'|t}}" datepicker-popup ng-model="dt2" is-open="status.end_opened" min-date="minDate" max-date="\'2050-06-22\'" date-disabled="disabled2(date, mode)" close-text="Close"> <span class="input-group-btn"><button type="button" class="btn btn-default" style="box-shadow: none" ng-click="eopen($event)"><i class="fa fa-calendar" style="font-size: 14px"></i></button></span></div><span class="help-block" ng-if="errorFlag">{{\'C3020\'|t}}</span></div><div class="modal-footer"><button class="btn" ng-click="cancel()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" ng-click="delTime()">{{\'C0045\'|t}}</button></div>'),a.put("/views/teacher/directives/extra.schedule.html",'<style>.tdBackground {\n    background-color: #efefef\n  }\n\n  .day_add {\n    position: absolute;\n    bottom: 0\n  }</style><div class="panel form-horizontal form-bordered teacher-extra-schedule"><div class="panel-heading"><h4>{{\'M0075\'|t}}</h4><span class="text-muted">{{\'KP231\'|t}}</span></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class=""><div class="row"><div class="col-md-3 col-xs-2"><a ng-click="preMonth()" class="more_nn" href="javascript:void(0)" ng-disabled="preMonthDisabled"><i class="fa fa-chevron-left"></i></a></div><div class="col-md-6 col-xs-8 text-center"><h4 class="no-margin">{{monthName}}</h4></div><div class="col-md-3 col-xs-2 text-right"><a ng-click="nextMonth()" class="more_nn" href="javascript:void(0)"><i class="fa fa-chevron-right"></i></a></div></div><br><div><kp-loading indicator="loaded"></kp-loading><table class="table table-bordered"><thead><tr><th width="14%"><strong class="hidden-phone">{{\'TP017\'|t}}</strong> <strong class="visible-phone">S</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP018\'|t}}</strong> <strong class="visible-phone">M</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP019\'|t}}</strong> <strong class="visible-phone">T</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP020\'|t}}</strong> <strong class="visible-phone">W</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP021\'|t}}</strong> <strong class="visible-phone">T</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP022\'|t}}</strong> <strong class="visible-phone">F</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP023\'|t}}</strong> <strong class="visible-phone">S</strong></th></tr></thead><tbody ng-if="loaded"><tr ng-repeat="tr in trs" ng-if="showTableRow(tr)"><td class="trans_layout2 is-relative cursor-over" style="padding-bottom: 30px" ng-class="{\'tdBackground\':!item.e}" ng-repeat="item in scheduleData|filter:{tr:tr}"><strong class="days" ng-if="item.e" ng-bind="item.i"></strong><div class="time_slot" ng-if="item.e"><div class="trans_layout yes-cursor" ng-click="delData(item,citem)" ng-repeat="citem in item.data">{{setDateFormat(citem.start_time)}}-{{setDateFormat(citem.end_time.replace(\'23:59\',\'24:00\'))}} &nbsp; <span class="trans transimage"><i class="fa fa-times"></i></span><br></div></div><div class="day_add" ng-if="item.e"><a kp-add-time-div time-type="2" time-value="{{$index}}" item="item" class="trans transimage2" href="javascript:void(0)">+ Add</a></div></td></tr></tbody></table></div><p style="position: relative" class="text-right"><span>{{\'ST135\'|t}}</span> <input type="button" class="btn" value="{{\'ST137\'|t}}" kp-del-time-div> &nbsp;&nbsp;</p></div></div></div></div>'),a.put("/views/teacher/directives/instant.apply.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title" ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num<5">{{\'PB085\'|t}}</h4><h4 class="modal-title" ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num>4">{{\'PB086\'|t}}</h4><h4 class="modal-title" ng-if="coursesInfo.instant_tutoring_status>30">{{\'PB087\'|t}}</h4></div><div class="modal-body"><div class="form-group no-margin-hr" ng-if="(coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num<5)||coursesInfo.instant_tutoring_status>30"><p ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num<5">{{\'ST267\'|t}}</p><p ng-if="coursesInfo.instant_tutoring_status>30">{{\'ST270\'|t}}</p><textarea ng-model="instant.apply_reason" class="form-control" rows="5"></textarea><div class="help-block" ng-if="((instant.commitFlag && instant.apply_reason.trim().length<5) || instant.apply_reason.trim().length>500)">{{\'ST155\'|t|format:5:500}}</div></div><div class="form-group no-margin-hr"><p ng-if="coursesInfo.instant_tutoring_status==0&&coursesInfo.session_completed_num>4">{{\'ST271\'|t}} <a href="http://support.italki.com/entries/23914490-How-do-I-offer-longer-Instant-Tutoring-sessions-" target="_blank">{{\'ST272\'|t}}</a></p><strong>{{\'TP008\'|t}}</strong>&nbsp;<span class="text-light-gray">{{\'TS330\'|t|format:"4.00":"80.00"}}</span><div class="form-inline"><div class="form-group">$&nbsp;<input ng-model="instant.instant_price" type="text" style="width: 50px" class="form-control" ng-paste="input_paste()" ondragenter="return false" ng-keypress="input_keypress($event)"></div><div class="form-group">USD 30 minutes</div></div><div class="help-block" ng-if="check()"><span>{{\'C3019\'|t}}&nbsp;</span><span>{{\'TS330\'|t|format:40:800}}</span></div></div><div><input ng-model="instant.allow_instant_tutoring_policies" type="checkbox"> <span class="title" ng-bind-html="\'ST261\'|t"></span></div><div class="help-block" ng-if="instant.commitFlag && !instant.allow_instant_tutoring_policies">{{\'C3019\'|t}}</div></div><div class="modal-footer"><button class="btn" ng-click="$close()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="applyInstant()" stext="C0045"></button></div>'),a.put("/views/teacher/directives/teacher.availability.html",""),a.put("/views/teacher/directives/teacher.card.html",'<div pulse-card-hover class="italki-teacher-card"><div class="teacher-card-container"><div class="teacher-card-left" ng-click="$parent.openTeacherProfile($event,teacher)"><img class="visible-lg-block visible-sm-block visible-md-block teacher-card-teacher-type" ng-src="{{teacher.is_pro ? \'/static/images/teachers/professional-teacher.svg\' : \'/static/images/teachers/community-tutor.svg\'}}"> <img class="visible-xs-block teacher-card-teacher-type" ng-src="{{teacher.is_pro ? \'/static/images/teachers/professional-teacher-mobile.svg\' : \'/static/images/teachers/community-tutor-mobile.svg\'}}"><div class="teacher-card-avatar"><img ng-src="{{teacher.avatar_file_name|avatar:\'100\'}}" kp-fallback-avatar><div class="teacher-card-rating"><div class="teacher-card-rating-stars" ng-if="!isNewTeacher && teacher.teacher_info_obj.pro_rating > 0.4"><i class="fa fa-star" aria-hidden="true" ng-repeat="i in [0.5, 1.5, 2.5, 3.5, 4.5]" ng-class="{\'star-gray\': teacher.teacher_info_obj.pro_rating < i}"></i></div><div class="teacher-card-rating-stars" ng-if="!isNewTeacher && teacher.teacher_info_obj.tutor_rating > 0.4 && teacher.teacher_info_obj.pro_rating === \'0.0\'"><i class="fa fa-star" aria-hidden="true" ng-repeat="i in [0.5, 1.5, 2.5, 3.5, 4.5]" ng-class="{\'star-gray\': teacher.teacher_info_obj.tutor_rating < i}"></i></div><p ng-if="!isNewTeacher && teacher.teacher_info_obj.session_count > 0" class="hidden-xs teacher-lessons">{{teacher.teacher_info_obj.session_count}} {{\'C0119\'|t}}</p><p ng-if="!isNewTeacher && teacher.teacher_info_obj.session_count > 0" class="visible-xs-block teacher-card-mobile-lessons"><span>{{teacher.teacher_info_obj.session_count}}</span><br>{{\'C0119\'|t}}</p><div ng-if="isNewTeacher" class="teacher-card-new"><span>{{\'RTC102\'|t}}</span></div></div></div><div class="teacher-card-content"><h1 class="teacher-card-name"><img ng-src="{{\'/static/images/teachers/flags/\' + teacher.origin_country_id.toLocaleLowerCase() + \'.svg\'}}">{{teacher.nickname}}</h1><div class="teacher-card-teaches"><h1 class="teacher-card-title" ng-if="teachLanguages.length">{{\'C0118\'|t}}</h1><div class="teacher-card-languages"><ul class="teacher-card-teaches-list"><li ng-repeat="language in teachLanguages"><span>{{language.language | t}}<span class="visible-xs-inline" ng-if="$index !== teachLanguages.length - 1">,</span></span><div class="teaher-card-language-level hidden-xs"><span class="teacher-card-gra-language-bar" ng-class="{\'teacher-card-language-bar\': language.level === 7, \'teacher-card-low-language-bar\': language.level !== 7 && language.level - 1 > i}" ng-repeat="i in [0, 1, 2, 3, 4]"></span></div></li></ul></div><h1 class="hidden-xs teacher-card-title" ng-if="speakLanguages.length">{{\'TP064\'|t}}</h1><div class="hidden-xs teacher-card-languages"><ul class="teacher-card-teaches-list"><li ng-repeat="language in speakLanguages" ng-if="$index < 3"><span>{{language.language | t}}</span><div class="teaher-card-language-level"><span class="teacher-card-gra-language-bar" ng-class="{\'teacher-card-language-bar\': language.level === 7, \'teacher-card-low-language-bar\': language.level !== 7 && language.level - 1 > i}" ng-repeat="i in [0, 1, 2, 3, 4]"></span></div></li><li ng-if="speakLanguages.length > 3"><span>+{{speakLanguages.length - 3}}</span></li></ul></div><div class="teacher-card-teacher-price"><div class="teacher-card-hourly-rate"><h1 class="teacher-card-title">{{\'TS334\'|t}}</h1><p>$&nbsp;<span ng-bind-html="teacher.teacher_info_obj.min_price_usd|kpToUsd|number:2"></span>&nbsp;<span class="teacher-card-currency">{{teacher.teacher_info_obj.min_price_usd|teacherPreviewCurrency}}</span></p></div><div class="teacher-card-minutes-rate" ng-if="teacher.teacher_info_obj.has_trial"><h1 class="teacher-card-title">{{\'TS335\'|t}}</h1><p>$&nbsp;<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2"></span>&nbsp;<span class="teacher-card-currency">{{teacher.teacher_info_obj.trial_price_usd|teacherPreviewCurrency}}</span></p></div></div></div><div class="teacher-card-favorite-teacher" ng-click="$parent.addFavorites($event, teacher);"><img ng-src="{{teacher.is_favourite == 1 ? \'/static/images/teachers/heart-full.svg\' : \'/static/images/teachers/heart-empty.svg\'}}"></div></div></div><div class="hidden-xs teacher-card-right"><italki-tabs><italki-tab><italki-tab-label>{{\'PB078\'|t}}</italki-tab-label><italki-tab-body><div class="teacher-card-calendar"><div class="teacher-card-calendar-header"><span class="teacher-card-time-header">/</span> <span class="teacher-card-day-header" ng-repeat="label in teachersAvailabilitiesLabel">{{label | t}}</span></div><div class="teacher-card-calendar-body"><div class="teacher-card-time-col" ng-repeat="availability in teachersAvailabilities"><span class="teacher-card-hours" ng-if="$index === 0">00 - 06</span> <span class="teacher-card-hours" ng-if="$index === 1">06 - 12</span> <span class="teacher-card-hours" ng-if="$index === 2">12 - 18</span> <span class="teacher-card-hours" ng-if="$index === 3">18 - 00</span> <span class="teacher-card-availabilities" ng-repeat="hours in availability track by $index"><span ng-if="hours !== 0" tooltip="{{hours + \' hours\'}}" ng-class="{\'teacher-card-low-availability\': hours < 4 && hours !== 0, \'teacher-card-high-availability\': hours > 3}"></span> <span ng-if="hours === 0" class="teacher-card-no-availability"></span></span></div></div></div><p class="teacher-card-calendar-hint">{{\'TS332\'|t}}</p></italki-tab-body></italki-tab><italki-tab><italki-tab-label>{{\'RTC400\'|t}}</italki-tab-label><italki-tab-body><div class="teacher-card-video"><div ng-if="playUrlObj.canplay && playUrlObj.vimeo"><iframe class="teacher-card-video-player" frameborder="0" ng-src="{{ playUrlObj.url | trustResource }}"></iframe></div><div ng-if="!playUrlObj.qiniu && playUrlObj.canplay && !playUrlObj.vimeo"><iframe class="teacher-card-video-player" ng-src="{{playUrlObj.url | trustResource}}" scrolling="no" frameborder="0"></iframe></div><div ng-if="!playUrlObj.canplay" class="teacher-card-no-video"><img src="/static/images/teachers/video.svg"><p>{{\'TS337\'|t}}</p></div><div ng-if="playUrlObj.qiniu"><video controls class="teacher-card-video-player" ng-src="{{playUrlObj.url | trustResource}}" id="videoPoster"></video></div></div></italki-tab-body></italki-tab><italki-tab><italki-tab-label>{{\'TS331\'|t}}</italki-tab-label><italki-tab-body><div class="teacher-card-intro"><p>{{teacherIntro}}</p></div></italki-tab-body></italki-tab></italki-tabs></div></div><div class="teacher-card-instant" ng-if="teacher.teacher_info_obj.is_available_instant_tutoring"><span><img src="/static/images/teachers/instant-tutoring-mobile.svg">{{\'TS339\'|t}}<span class="hidden-xs">:</span> <span class="hidden-xs">$&nbsp;<span ng-bind-html="teacher.teacher_info_obj.instant_tutoring_price_usd|kpToUsd|number:2"></span>&nbsp;&nbsp;<span class="teacher-card-currency">{{teacher.teacher_info_obj.instant_tutoring_price_usd|teacherPreviewCurrency:true}}</span></span></span></div></div>'),a.put("/views/teacher/directives/teacher.nav.li.html",'<ul class="content-block-tabs js-tabs-tabs no-margin-b" ng-if="currentUser.is_teacher||currentUser.apply_status==8"><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.editProfile">{{\'MH031\'|t}}</a></li><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.course">{{\'M0045\'|t}}</a></li><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.availability">{{\'PB078\'|t}}</a></li><li class="content-block-tab"><a ui-sref-active="selected" class="content-block-tab-link js-tab-link" ui-sref="setting.withdraw">{{\'PM402\'|t}}</a></li></ul>'),a.put("/views/teacher/directives/teacher.sessions.with.student.html",'<div><ul class="list-unstyled no-margin"><li ng-repeat="item in items" class="comment-body-container"><ul class="list-inline"><li><span class="text-medium">{{item.learn_language|t}}</span></li>|<li><span class="text-muted">{{item.session_start_time_user|amDate:\'TF002\'}}</span></li></ul><div class="row"><div class="col-xs-9 no-margin-b"><span ng-if="item.student_comment">{{item.student_comment||\'\'}}</span></div></div><div class="comment-function-panel clearfix"><button class="helpful-btn" ng-class="{\'btn-active\':item.had_like}" ng-click="helpful($event,item)" ng-disabled="isMe()"><i class="fa fa-thumbs-o-up text-sm v-middle"></i> <span class="v-middle">{{item.helpful_count}}</span></button><div class="comment-more-count" ng-if="data.more_count>0&&!meta"><a ng-click="loadMore()">+{{data.more_count}} {{\'C0040\'|t}}</a></div></div><p class="add-fav-comments-btn" ng-if="isMe()"><button ng-class="{\'btn-warning\':item.is_reviews_up==1}" ng-click="addFavoriteComments(item.session_id,item);" class="btn btn-xs"><i class="fa fa-heart text-sm"></i>&nbsp;<span ng-show="!item.is_reviews_up">{{\'TG100\'|t}}</span> <span ng-show="item.is_reviews_up">{{\'TG101\'|t}}</span></button></p></li></ul></div><aside ng-show="meta && meta.has_next"><a ng-click="loadMore()">{{\'MH046\'|t}}</a></aside>'),a.put("/views/teacher/directives/week.schedule.html",'<div class="panel form-horizontal form-bordered teacher-week-schedule"><div class="panel-heading"><h4>{{\'KP229\'|t}}</h4><span class="text-muted">{{\'KP230\'|t}}</span></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="alert alert-warning">{{\'KP301\'|t}}</div><div><table class="table table-bordered"><thead><tr><th width="14%"><strong class="hidden-phone">{{\'TP017\'|t}}</strong> <strong class="visible-phone">S</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP018\'|t}}</strong> <strong class="visible-phone">M</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP019\'|t}}</strong> <strong class="visible-phone">T</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP020\'|t}}</strong> <strong class="visible-phone">W</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP021\'|t}}</strong> <strong class="visible-phone">T</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP022\'|t}}</strong> <strong class="visible-phone">F</strong></th><th width="14%"><strong class="hidden-phone">{{\'TP023\'|t}}</strong> <strong class="visible-phone">S</strong></th></tr></thead><tbody><tr><td class="trans_layout2 is-relative cursor-over" style="padding-bottom: 30px" ng-repeat="item in wsData"><div class="time_slot"><div class="trans_layout yes-cursor" ng-click="delData(item.data,$index)" ng-repeat="citem in item.data"><span>{{citem.start_time}}-{{citem.end_time}}</span>&nbsp; <span class="trans transimage" ng-if="canDel()"><i class="fa fa-times"></i></span></div></div><div class="day_add"><a kp-add-time-div time-type="1" time-value="{{$index}}" item="item" class="trans transimage2" href="javascript:void(0)">+ {{\'C0044\'|t}}</a></div></td></tr></tbody></table></div></div></div></div>'),
a.put("/views/teacher/edit.profile.availability.html",'<style>@media (max-width: 1024px)  {\n    .teacher-availability .table > tbody > tr > td, .teacher-availability .table > tbody > tr > th, .teacher-availability .table > thead > tr > td, .teacher-availability .table > thead > tr > th {\n      padding: 2px;\n    }\n  }</style><div ng-if="currentUser.is_pro||currentUser.is_tutor||currentUser.apply_status==8"><h2 class="grid-gutter-margin-b" translate="MH032"></h2><div class="teacher-availability"><div class="panel no-margin-b no-border-b"><kp-teacher-nav-li></kp-teacher-nav-li></div><kp-teacher-week-schedule></kp-teacher-week-schedule><kp-teacher-extra-schedule></kp-teacher-extra-schedule></div></div>'),a.put("/views/teacher/edit.profile.courses.html",'<div><h2 class="grid-gutter-margin-b" translate="MH032"></h2><div class=""><div class="panel no-margin-b no-border-b"><kp-teacher-nav-li></kp-teacher-nav-li></div><div class="panel form-horizontal form-bordered loading-layout no-border-t"><div class="panel-heading"><h4>{{\'C0152\'|t}} / {{\'C0172\'|t}}</h4></div><div class="panel-body no-padding-hr"><kp-courses-pro-list courses-info="coursesInfo" ng-if="coursesInfo.is_add_pro"></kp-courses-pro-list><kp-courses-tutor-list courses-info="coursesInfo" ng-if="coursesInfo.tutor_course_obj_s"></kp-courses-tutor-list><kp-courses-trial-list courses-info="coursesInfo"></kp-courses-trial-list><kp-courses-instant-list courses-info="coursesInfo" ng-if="currentUser.apply_status>8"></kp-courses-instant-list></div></div></div></div>'),a.put("/views/teacher/instant.lesson.request.modal.html",'<form name="instant_lesson_request_form" ng-submit="instant_lesson_request_form.$valid&&confirm();" novalidate><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title" translate="TP154"></h4></div><div class="modal-body"><kp-loading indicator="checked"></kp-loading><div ng-if="checked"><p class="alert alert-info" ng-if="!error">{{ \'TP265\'|t }}</p><p class="alert alert-warning" ng-if="error&&error.type!=\'PaymentAccountDisabled\'">{{ error.msg }}</p><p ng-if="error.type==\'PaymentAccountDisabled\'" class="alert alert-warning">{{\'KP305\'|t}}{{\'KP306\'|t}}</p><div class="form-group"><label class="control-label" for="language">{{ \'TP235\'|translate }}</label><select ng-if="::languages" id="language" name="language" ng-options="item.language|t for item in languages" ng-model="result.selected" class="form-control" required><option value="">{{ \'TP235\'|t }}</option></select><div translate="{{ ::result.selected.language }}" ng-if="::!languages"></div><span class="help-block" ng-hide="!(instant_lesson_request_form.$submitted&&instant_lesson_request_form.language.$error.required)">{{ \'C3019\'|t }}</span></div><div class="form-group"><label class="control-label" translate="TP008"></label><div>$<span ng-bind="teacher.teacher_info_obj.instant_tutoring_price_usd|kpToUsd|number:2"></span> USD / {{\'TP090\'|t}}</div></div></div></div><div class="modal-footer" ng-if="checked"><button type="submit" class="btn btn-primary" ng-disabled="error"><span class="btn-txt">{{\'C0077\'|t}}</span></button></div></form>'),a.put("/views/teacher/profile.html",'<div class="teacher-profile-page"><kp-notify></kp-notify><kp-title ng-if="teacher" title="TP575" params="[teacher.nickname,teaches,fromCT]"></kp-title><kp-teacher-meta teacher="teacher"></kp-teacher-meta><div ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><div ng-class="{marginResize:currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1}"><div class="profile-container" style="height: 300px"></div><div class="container" style="margin-top:-285px" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n        \'notification\':isTopShow}"><div class="grid-gutter-margin-b"><button type="button" class="btn btn-outline btn-xs btn-labeled switch" ng-if="canBackToSearch" ng-click="backToSearch()">{{\'PB107\'|t}}</button> <button type="button" class="btn btn-outline btn-xs btn-labeled switch" ui-sref="user({id:teacher.id})">{{\'KP276\'|t}}</button></div><div class="row" id="divBody"><div style="height: 280px" ng-if="!teacher"><kp-loading indicator="teacher"></kp-loading></div><div class="col-md-8" ng-hide="!teacher"><div class="panel no-border loading-layout"><kp-loading indicator="teacher"></kp-loading><a name="about"></a><div class="video-wrapper text-center" style="padding: 15px 20px 0"><div class="alert alert-danger text-left is-relative" ng-if="isMe()&&!teacher.oms_apply_video_url&&videoAlertShow"><strong>{{\'ST451\'|t}}</strong> {{\'ST452\'|t}} <a href="/settings/profile#videoupload" target="_blank">{{\'C0171\'|t}}</a> <a class="alert-close" ng-click="closeVideoAlert()"><i class="fa fa-times" aria-hidden="true"></i></a></div><div ng-if="playUrlObj.canplay && playUrlObj.youtube"><div youtube-video youtube="playUrlObj.youtubeID" sibling-container=".video-wrapper" id="teachervideo"></div></div><div ng-if="playUrlObj.canplay && playUrlObj.vimeo"><iframe resize-video sibling-container=".video-wrapper" width="100%" height="422" frameborder="0" ng-src="{{ playUrlObj.url | trustResource }}" allowfullscreen></iframe></div><div ng-if="playUrlObj.canplay && playUrlObj.qiniu" class="video-box" kp-landing-intro-video thumbnail="playUrlObj.oms_apply_video_info_http"><video ng-src="{{playUrlObj.url | trustResource}}" id="videoPoster"></video></div></div><div class="panel-body"><div class="row"><div class="col-md-3 is-relative text-center teacher-profile-photo"><div class="is-relative"><p><img ng-src="{{ teacher|avatar:\'150\' }}" width="150" class="rounded user-avatar" alt="" kp-fallback-avatar></p></div><p class="text-muted"><i class="fa fa-map-marker"></i> <span ng-show="teacher.living_city_text_">{{teacher.living_city_text_}},</span> {{teacher.living_country_id|t}}<br><span tooltip="({{teacher.teacher_timezone_utc}}) {{teacher.teacher_timezone_location}}">{{teacher.teacher_local_time|amDate:\'HH:mm\'}}&nbsp;{{teacher.teacher_timezone_utc}}</span></p><ul class="list-inline visible-phone" style="position: absolute; right: 10px; top: 0"><li><i ng-if="!isMe()" class="icon fa fa-heart text-lg text-muted" ng-class="{\'text-warning\':teacher.favourite_flag==1}" ng-click="addFavorites(teacher);"></i></li><li><i class="fa fa-share-alt text-lg text-muted" ng-click="openShareModal()"></i></li></ul></div><div class="col-md-9"><span class="pull-right hidden-phone"><button ng-if="!isMe()" class="btn btn-xs" ng-class="{\'btn-warning\':teacher.favourite_flag==1}" ng-click="addFavorites(teacher);"><span class="icon fa fa-heart" style="vertical-align: text-bottom"></span> {{(teacher.favourite_flag==1?"KP404":"KP528")|t}}</button>&nbsp;<div class="btn-group" dropdown><button type="button" class="btn btn-xs" dropdown-toggle><i class="fa fa-share-alt" ng-click="openShareModal()"></i></button></div>&nbsp;<div class="btn-group" ng-if="!isMe()" dropdown><button type="button" class="btn btn-xs" dropdown-toggle><i class="fa fa-ellipsis-h"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li kp-block-user block-data="{\'args\':1,\'blockee_id\':teacher.id,\'callBack\':blockUserCallback}" ng-hide="teacher.is_blocker"><a class="ng-binding">{{"C0083"|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-TCR\',reportId:teacher.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></span><h1 class="no-margin">{{teacher.nickname}}</h1><p class="text-light-gray"><i class="fa fa-circle online-status" ng-class="{online:teacher.is_online}"></i> <span ng-class="{\'text-success\':teacher.is_online}">{{teacher.is_online?(\'C0038\'|t):(\'KP266\'|t|format:teacher.last_login_time_from_now) }}</span></p><div class="grid-gutter-margin-b"><ul class="list-inline"><li class="{{teacher.is_pro?\'color-pro\':\'color-tutor\'}}"><i class="fa fa-ii-tutor" ng-if="teacher.is_pro" title="{{\'C0200\'|t}}" style="vertical-align: middle"></i> <i class="fa fa-ii-tutor" ng-if="!teacher.is_pro" title="{{\'C0201\'|t}}" style="vertical-align: middle"></i>&nbsp; <span translate="{{teacher.is_pro?\'TP003\':\'TP004\'}}" style="vertical-align: middle"></span></li><li ng-if="badgeDisplay != false  && teacher.exam_result_shown_obj != null && teacher.exam_result_shown_obj.status!=2" style="vertical-align: middle"><a class="fa fa-ii-oopt" style="color: #94B004" style="color: #94B004" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></li><li>{{\'C0003\'|t}} <span ng-show="teacher.origin_city_text_">{{teacher.origin_city_text_}},</span> {{teacher.origin_country_id|t}}</li></ul><h4><span translate="C0118"></span>&nbsp; <span ng-repeat="item in teacher.language_obj_s|filter:{is_teaching:1}|orderBy:\'-level\'">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></h4></div><ul class="profile_card list-inline"><li><div class="info"><span class="text-muted">{{\'TP014\'|t}}</span><br><strong class="pull-right text-lg teacher-rate">{{teacher.teacher_info_obj.pro_rating}}</strong><div class="" style="padding: 7px 0 8px"><rating style="color:#ffc237" class="rate text-xs" readonly="true" ng-model="teacher.teacher_info_obj.pro_rating" state-on="\'fa fa-star text-xs\'" state-off="\'fa fa-star-o  text-xs\'" title="{{teacher.teacher_info_obj.pro_rating }}"></rating></div></div></li><li><div class="info"><span class="text-muted">{{\'C0151\'|t}}</span><br><strong class="text-lg">{{teacher.teacher_info_obj.student_count}}</strong></div></li><li><div class="info"><span class="text-muted">{{\'C0119\'|t}}</span><br><strong class="text-lg">{{teacher.teacher_info_obj.session_count}}</strong></div></li><li><div class="info"><div style="padding:4px 0px 5px 0px"><img ng-src="/static/images/icon_webcam_{{teacher.teacher_info_obj.has_video_class?\'\':\'n\'}}available.png" tooltip="{{teacher.teacher_info_obj.has_video_class?\'Video available\':\'No video\'}} "></div><span ng-if="teacher.has_skype"><img title="Skype" src="/static/images/imicons/icon_skype.png">&nbsp;</span> <span ng-if="teacher.has_google_talk"><img title="Hangouts" src="/static/images/imicons/icon_hangouts.png">&nbsp;</span> <span ng-if="teacher.has_qq"><img title="QQ" src="/static/images/imicons/icon_qq.png">&nbsp;</span> <span ng-if="teacher.has_face_time"><img title="Facetime" src="/static/images/imicons/icon_facetime.png">&nbsp;</span> <span ng-if="teacher.has_wechat"><img title="Wechat" style="width: 16px;border-radius: 16px" src="/static/images/imicons/icon_wechat.png">&nbsp;</span></div></li></ul></div></div><div class=""><hr style="opacity: 0.1;border-color: #000"><div class="grid-gutter-margin-b"><ul class="list-inline m-r-3" ng-if="teacher.language_obj_s"><li><strong>{{\'PB004\'|t}}</strong>:</li><li ng-repeat="item in teacher.language_obj_s|orderBy:\'level\':true">{{item.language|t}}<span class="l-level l-level{{item.level}}" title="{{item.level|kpLanguageLevel}}"></span> <span ng-hide="$last">,</span></li></ul><ul class="list-inline m-r-3" ng-if="teacher.teacher_info_obj.teacher_tags"><li><strong>{{\'ST700\'|t}}</strong>:</li><li ng-repeat="item in teacher.teacher_info_obj.teacher_tags.split(\',\')"><a href="" tooltip="{{tags[item].d|t}}" tooltip-placement="bottom" class="label label-tags">{{tags[item].t|t}}</a></li><li ng-repeat="item in teacher.teacher_info_obj.teacher_child_tags.split(\',\')" ng-if="teacher.teacher_info_obj.teacher_child_tags"><a href="" tooltip="{{getChildTagItem(item).full_name|t}}" tooltip-placement="bottom" class="label label-tags">{{getChildTagItem(item).abbr|t}}</a></li></ul><ul class="list-inline m-r-3" ng-if="teacher_personal_tags.length>0"><li><strong>{{\'TG202\'|t}}</strong>:</li><li ng-repeat="(id,tag) in  teacher_personal_tags"><a href="" class="label label-tags profile-personal-tags">{{tag.tag_name}}</a></li></ul><p><strong>{{\'PB019\'|t}}</strong>: {{teacher.teacher_info_obj.first_valid_time|amDate:\'TF002\'}}</p></div><div><p ng-hide="teacher.teacher_info_obj.about_me && teacher.teacher_info_obj.about_teacher && teacher.teacher_info_obj.teaching_style" ng-bind-html="teacher.teacher_info_obj.introduction"></p><div ng-if="!playUrlObj.canplay&&teacher.video_view_url"><i class="fa fa-play-circle"></i> <a href="{{teacher.video_view_url}}" target="_blank">{{teacher.video_view_url}}</a></div></div></div></div></div><a name="availabilityStatus"></a><div class="panel no-border"><div class="panel-body"><div class="no-padding-t" style="margin-bottom: 10px"><h4 class="no-margin">{{\'TP411\'|t}}</h4><a name="availabilityStatus-panel"></a></div><div ng-show="!editTeacherStatus"><div class="alert no-margin-b" ng-class="teacher.teacher_info_obj.is_student_full>0?\'alert-danger\':\'alert-success\'"><i class="fa fa-pencil" ng-click="editTeacherStatus=true" style="float:right;cursor: pointer;margin-left: 6px" ng-show="isMe()&&teacher.can_set_student_full"></i> <span ng-if="teacher.teacher_info_obj.is_student_full<2">{{teacher.teacher_info_obj.interest}}</span> <span ng-if="teacher.teacher_info_obj.is_student_full>1">{{\'PB076\'|t}}</span></div></div><div ng-show="editTeacherStatus"><div class="form-group"><div class="row"><label class="col-sm-4 control-label" style="text-align: right">{{\'PB074\'|t}}</label><div class="col-sm-6"><select class="form-control" data-ng-model="teacherInfo.is_student_full"><option value="0">{{\'PB075\'|t}}</option><option value="1" ng-if="teacher.teacher_info_obj.is_student_full<2">{{\'PB076\'|t}}</option></select></div></div></div><div class="form-group"><div class="row"><label class="col-sm-4 text-right">{{\'ST022\'|t}}</label><div class="col-sm-6"><div class="form-group no-margin-hr no-padding-t no-border-t" ng-class="{\'has-error\':!vSubFlag&&(teacherInfo.interest.length<10||teacherInfo.interest.length>200)}"><input class="form-control" ng-model="teacherInfo.interest"> <span class="help-block" ng-show="!vSubFlag&&(teacherInfo.interest.length<10||teacherInfo.interest.length>200)">{{\'ST155\'|t|format:10:200}}</span></div></div></div></div></div></div><div ng-show="editTeacherStatus" class="panel-footer text-right"><button class="btn btn-primary" italki-click-with-spinner="saveAvailabilityStatus()" stext="C0055"></button></div></div><div class="teacher-introduction-panel-container" ng-class="{\'show-more\':introduction.showMore}" ng-if="teacher.teacher_info_obj.about_me && teacher.teacher_info_obj.about_teacher && teacher.teacher_info_obj.teaching_style"><div class="teacher-introduction-panel panel no-border" ng-class="{\'show-more\':introduction.showMore}" style="padding-bottom: 20px"><div class="panel-body"><div class="no-padding-t" style="margin-bottom: 10px"><h4 class="no-margin">{{\'ST401\'|t}}</h4><h5>{{\'ST402\'|t}}</h5><p ng-bind-html="teacher.teacher_info_obj.about_me"></p><h5>{{\'ST404\'|t}}</h5><p ng-bind-html="teacher.teacher_info_obj.about_teacher"></p><h5>{{\'ST406\'|t}}</h5><p ng-bind-html="teacher.teacher_info_obj.teaching_style"></p><h5>{{\'ST408\'|t}}</h5><ul ng-repeat="material in teacher_material_list"><li>{{material.name|t}}</li></ul></div></div></div><div class="teacher-introduction-panel-btn"><a class="show-more-btn" ng-init="introduction.showMore = false" ng-click="introduction.showMore=!introduction.showMore"><span ng-if="!introduction.showMore">+ {{\'ST446\'|t}}</span> <span ng-if="introduction.showMore">- {{\'ST448\'|t}}</span></a></div></div><a name="offers"></a><div class="panel no-border"><div class="panel-body"><div ng-if="teacher.proCourseList&&teacher.proCourseList.length>0" class="grid-gutter-margin-b"><div class="no-padding-t no-padding-b"><h4 class="no-margin">{{\'TP998\'|t}}</h4><a name="offers-panel"></a></div><div class="no-padding-t"><div class="tab-pane fade widget-followers active in"><div class="follower" ng-repeat="course in teacher.proCourseList"><div class="row"><div class="col-sm-8"><strong><a ui-sref="teacherCourse({id:teacher.id,cid:course.id})">{{course.title}}</a></strong><ul class="list-inline text-muted no-margin-b"><li>{{course.language|t}}</li><li>{{\'C2024\'|t|format:course.session_count}}</li><li ng-if="course.has_package"><label class="label package text-up">{{\'TS038\'|t}}</label></li></ul></div><div class="col-sm-4 text-right"><div class="text-center" dropdown=""><span class="text-bold">$<span ng-bind-html="course.session_price_usd|kpToUsd|number:2"></span></span>&nbsp;{{\'TP016\'|t}}<br><button type="button" class="btn btn-sm" italki-click-test cid="course.id" pt="1" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule&&currentUser)">{{\'KP236\'|t}}</button></div></div></div></div></div></div><hr></div><div ng-if="teacher.tutorCourseList&&teacher.tutorCourseList.length>0" class="grid-gutter-margin-b"><div class="no-padding-t no-padding-b"><h4 class="no-margin">{{\'TP999\'|t}}</h4><a name="offers-panel" ng-if="teacher.proCourseList&&teacher.proCourseList.length==0"></a></div><div class="no-padding-t"><div class="tab-pane fade widget-followers active in"><div class="follower" ng-repeat="course in teacher.tutorCourseList"><div class="row"><div class="col-sm-8"><strong>{{\'TP999\'|t}}: {{course.language|t}}</strong><ul class="list-inline text-muted no-margin-b"><li>{{\'C2024\'|t|format:course.session_count}}</li><li ng-if="course.has_package"><label class="label package text-up">{{\'TS038\'|t}}</label></li></ul></div><div class="col-sm-4 text-right"><div class="text-center" dropdown><span class="text-bold">$<span ng-bind-html="course.session_price_usd|kpToUsd|number:2"></span></span>&nbsp;{{\'TP016\'|t}}<br><button type="button" class="btn btn-sm" italki-click-test cid="course.id" pt="1" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule&&currentUser)">{{\'KP236\'|t}}</button></div></div></div></div></div></div><hr></div><div ng-if="teacher.teacher_info_obj.has_trial&&teacher.trial_left_count"><div class="no-padding-t no-padding-b"><h4 class="no-margin">{{\'TS026\'|t}}</h4><a name="offers-panel" ng-if="teacher.proCourseList&&teacher.proCourseList.length==0 && teacher.tutorCourseList&&teacher.tutorCourseList.length==0"></a></div><div class="no-padding-t"><div class="tab-pane fade widget-followers active in"><div class="follower"><div class="row"><div class="col-sm-8"><strong>{{\'TS215\'|t}}</strong><br><span class="text-muted">{{\'C2024\'|t|format:teacher.trial_count}}</span></div><div class="col-sm-4 text-center"><span class="text-bold">$<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2"></span></span>&nbsp;{{\'TS012\'|t}}<br><button type="button" class="btn btn-sm" italki-click-test pt="3" cid="0" pid="0" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule|| teacher.has_had_trial||!teacher.trial_left_count)&&currentUser">{{\'TS108\'|t}}</button></div></div></div></div></div></div></div></div><a name="resume"></a><div class="panel no-border" ng-if="teacher.is_show_exp>0||teacher.is_show_edu>0||teacher.is_show_cert>0"><div class="panel-body"><div class=""><div class="grid-gutter-margin-b" ng-if="teacher.is_show_exp>0&&teacher.teacher_experience_obj_s.length>0"><h4>{{\'PB011\'|t}}</h4><a name="resume-panel" class="resume-panel-anchor"></a><ul class="list-unstyled"><li style="margin-bottom: 10px" ng-repeat="experience in teacher.teacher_experience_obj_s"><ul class="list-inline"><li><strong>{{experience.job}}</strong></li><li><strong>{{experience.company}}</strong></li></ul><span class="text-muted"><ul class="list-inline"><li>{{experience.start_year}} - {{(experience.end_year==2155||experience.end_year==2025)?(\'ST027\'|t):experience.end_year}}</li><li>{{experience.city}} {{experience.country|t}}</li></ul><span ng-bind-html="experience.description|replaceLineToBr"></span></span></li></ul><hr></div><div class="grid-gutter-margin-b" ng-if="teacher.is_show_edu>0&&teacher.teacher_education_obj_s.length>0"><h4>{{\'PB012\'|t}}</h4><a name="resume-panel" class="resume-panel-anchor" ng-if="teacher.is_show_exp==0"></a><ul class="list-unstyled"><li style="margin-bottom: 10px" ng-repeat="education in teacher.teacher_education_obj_s"><ul class="list-inline"><li><strong ng-bind-html="education.institution|replaceLineToBr"></strong></li><li>{{education.start_year}} - {{education.end_year}}</li></ul><span class="text-muted" ng-switch="education.level"><span ng-switch-when="1">{{\'ST015\'|t}}</span> <span ng-switch-when="2">{{\'ST016\'|t}}</span> <span ng-switch-when="3">{{\'ST017\'|t}}</span> <span ng-switch-when="4">{{\'ST018\'|t}}</span> <span ng-switch-when="5">{{\'ST019\'|t}}</span></span> <span class="text-muted">- {{education.major}}</span> <em class="text-success" ng-if="education.file_ext"><br><i class="fa fa-check-circle"></i> {{\'PB052\'|t}}</em></li></ul><em class="text-success" ng-show="teacher.teacher_info_obj.resume_url==\'*\'"><i class="fa fa-check-circle"></i> {{\'PB052\'|t}}</em><hr></div><div class="" ng-if="teacher.is_show_cert>0&&teacher.teacher_certificate_obj_s.length>0"><h4>{{\'PB013\'|t}}</h4><a name="resume-panel" class="resume-panel-anchor" ng-if="teacher.is_show_exp == 0 && teacher.is_show_edu == 0"></a><ul class="list-unstyled"><li style="margin-bottom: 10px" ng-repeat="cert in teacher.teacher_certificate_obj_s"><ul class="list-inline"><li><strong>{{cert.certificate}}</strong></li><li><strong ng-bind-html="cert.institution|replaceLineToBr"></strong></li><li><strong>{{cert.end_year}}</strong></li></ul><span class="text-muted" ng-if="cert.description!=\'\'"><span ng-bind-html="cert.description|replaceLineToBr"></span><br></span><em class="text-success"><i class="fa fa-check-circle"></i> {{\'PB053\'|t}}</em></li></ul></div></div></div></div><a name="reviews"></a><div class="panel no-border lesson-history-panel"><div class="panel-body"><h4 class="no-margin-t">{{\'ST433\'|t}}</h4><div ng-if="history.finished_session==0" class="no-history-text">{{\'ST440\'|t}}</div><div ng-if="history.finished_session!=0"><div class="col-sm-4 text-center bar-chart-responsive-container clearfix"><div class="responsive-left-panel history-vt-des"><div class="history-count">{{history.finished_session}}</div><div class="history-title">{{\'ST441\'|t}}</div></div><div class="responsive-right-panel"><div class="history-bar-chart-vt" ng-repeat="item in history.finished_session_list"><div class="bar-number-black">{{item.data}}</div><div class="bar-height" ng-if="max_data == 0" style="height:1px"><div class="bar-item" ng-class="{\'last-bar-height\':$last}"><div class="bar-number-white">{{item.data}}</div></div></div><div class="bar-height" ng-if="max_data<=10 && max_data!=0" style="height:{{(item.data/10) *75}}px"><div class="bar-item" ng-class="{\'last-bar-height\':$last}"><div class="bar-number-white">{{item.data}}</div></div></div><div class="bar-height" ng-if="max_data>10 && max_data<=50" style="height:{{(item.data/50) *75}}px"><div class="bar-item" ng-class="{\'last-bar-height\':$last}"><div class="bar-number-white">{{item.data}}</div></div></div><div class="bar-height" ng-if="max_data>50 && max_data<=150" style="height:{{(item.data/150) *75}}px"><div class="bar-item" ng-class="{\'last-bar-height\':$last}"><div class="bar-number-white">{{item.data}}</div></div></div><div class="bar-height" ng-if="max_data>150" style="height:{{(item.data/250) *75}}px"><div class="bar-item" ng-class="{\'last-bar-height\':$last}"><div class="bar-number-white">{{item.data}}</div></div></div><div class="bar-number-black">{{item.data}}</div><div class="bar-month">{{item.month|MonthName}}</div></div></div></div><div class="col-sm-4 text-center bar-chart-responsive-container clearfix"><div class="responsive-left-panel history-hr-des"><div class="history-count">{{history.response_rate*100|number:0}}%</div><div class="history-title">{{\'ST442\'|t}}</div></div><div class="responsive-right-panel"><div class="history-bar-chart-hr" ng-repeat="item in history.response_rate_list.slice().reverse()"><div class="bar-month"><span>{{item.month|MonthName}}</span></div><div class="bar-width-container"><div class="bar-width" ng-class="{\'last-bar-width\':$first}" style="width:{{item.data*100|number:0}}%"><div class="bar-number-white">{{item.data*100|number:0}}%</div></div></div><div class="bar-number-black">{{item.data*100|number:0}}%</div></div></div></div><div class="col-sm-4 no-margin-b text-center bar-chart-responsive-container clearfix"><div class="responsive-left-panel history-hr-des"><div class="history-count">{{history.attendance_rate*100|number:0}}%</div><div class="history-title">{{\'ST443\'|t}}</div></div><div class="responsive-right-panel"><div class="history-bar-chart-hr" ng-repeat="item in history.attendance_rate_list.slice().reverse()"><div class="bar-month">{{item.month|MonthName}}</div><div class="bar-width-container"><div class="bar-width" ng-class="{\'last-bar-width\':$first}" style="width:{{item.data*100|number:0}}%"><div class="bar-number-white">{{item.data*100|number:0}}%</div></div></div><div class="bar-number-black">{{item.data*100|number:0}}%</div></div></div></div></div></div></div><div class="panel no-border reviews-panel" ng-if="comment_total_count!=0"><div class="panel-body"><h4 class="no-margin-t" style="margin-bottom: 40px">{{\'C0153\'|t}}</h4><a name="reviews-panel" class="reviews-panel-anchor"></a><div class=""><div ng-if="isMe()"><div class="dropzone grid-gutter-margin-b" ng-if="comment_obj_s.length == 0||!comment_obj_s"><div class="dropzone-message text-center"><p class="text-lg">{{\'TG200\'|t}}</p><hr><div class="text-left"><ul class="list-inline text-center"></ul></div></div></div></div><div class="grid-gutter-margin-b4"><div ng-repeat="item1 in comment_obj_s" class="text-center"><div class="clearfix selected-review-container" style="margin-bottom: 20px"><div class="clearfix selected-review-info-img-container dis-flex"><img class="rounded pull-left selected-review-teacher-img-phone" width="45" height="45px" title="{{item1.nickname}}" ng-src="{{item1.oppo_user_obj.avatar_file_name|avatar}}" kp-fallback-avatar><div class="text-right pull-left selected-review-info-container"><div class="text-m text-medium">{{item1.oppo_user_obj.nickname}}</div><div>{{\'TP176\'|t|format:item1.session_total_count}}</div><div class="selected-review-sub-info"><div class="text-capitalize">{{item1.learn_language}}</div><div class="text-muted">{{item1.session_start_time_user|amDate:\'TF002\'}}</div></div><button ng-if="isMe()" class="btn btn-primary-new remove-btn" style="margin-top: 10px" ng-click="removeFavoriteComments(item1.session_id,item1)">{{\'TS672\'|t}}</button></div><img class="rounded pull-left selected-review-teacher-img" width="45" height="45px" title="{{item1.nickname}}" ng-src="{{item1.oppo_user_obj.avatar_file_name|avatar}}" kp-fallback-avatar></div><div class="selected-review-sub-info-phone text-center"><span class="text-capitalize text-medium">{{item1.learn_language}}&nbsp;|</span> <span class="text-muted">{{item1.session_start_time_user|amDate:\'TF002\'}}</span></div><div class="selected-review-content pull-left dis-flex text-left"><div class="quotation-marks">“</div><p ng-show="show" style="overflow:hidden">{{item1.student_comment| limitTo: 200}}{{item1.student_comment.length > 200 ? \'...\' : \'\'}}<br><a ng-show="item1.student_comment.length > 200 " ng-click="show = false">Read more +</a></p><p ng-show="!show" style="overflow:hidden">\'{{item1.student_comment}}\'<br><a ng-click="show = true">Show less -</a></p></div><button ng-if="isMe()" class="btn btn-primary-new remove-btn-phone" ng-click="removeFavoriteComments(item1.session_id,item1)">{{\'TS672\'|t}}</button></div></div></div><div ng-if="teacherCommentObj"><hr class="filter-container-hr"><div ng-show="hideOrShowFilter"><div class="filter-label-container"><div class="filter-label-title">{{\'ST435\'|t}}</div><ul class="list-inline no-margin top filter-label-group"><li><button class="filter-label" ng-class="{\'checked\':commentFilter.lesson_language==\'\'}" ng-disabled="lanObj.length==1" ng-click="filterCommentLanguage($event,\'\')"><span>{{\'C0024\'|t}}</span></button></li><li ng-repeat="lan in lessonLanguageObj"><button class="filter-label" ng-disabled="lanObj.indexOf(lan) == -1" ng-click="filterCommentLanguage($event,lan)" ng-class="{\'checked\':commentFilter.lesson_language==lan}"><span ng-bind="lan|t"></span></button></li></ul></div><div class="filter-label-container"><div class="filter-label-title">{{\'ST436\'|t}}</div><ul class="list-inline no-margin top filter-label-group"><li><button class="filter-label" ng-class="{\'checked\':commentFilter.lesson_type==\'0\'}" ng-click="filterCommentType($event,\'0\')" ng-disabled="typeObj.length==1"><span ng-bind="getLessonType(\'0\')|t"></span></button></li><li ng-repeat="type in lessonTypeObj"><button class="filter-label" ng-disabled="typeObj.indexOf(type) == -1" ng-click="filterCommentType($event,type)" ng-class="{\'checked\':commentFilter.lesson_type==type}"><span ng-bind="getLessonType(type)|t"></span></button></li></ul></div><div class="filter-control-container clearfix"><span class="sort-by-title">{{\'ST437\'|t}}</span><label class="filters_radio"><input name="teacherLevel" type="radio" class="filters_radio_input" ng-model="commentFilter.sort" ng-change="onSortbySelect(\'0\')" value="0"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'ST438\'|t}}</span></label><label class="filters_radio"><input name="teacherLevel" type="radio" class="filters_radio_input" ng-model="commentFilter.sort" ng-change="onSortbySelect(\'1\')" value="1"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'ST439\'|t}}</span></label></div></div><div class="hide-filter-btn" ng-click=" hideOrShowFilter =! hideOrShowFilter"><span ng-if="hideOrShowFilter">{{\'ST444\'|t}}</span> <span ng-if="!hideOrShowFilter">{{\'ST445\'|t}}</span> <i class="fa v-middle" ng-class="{\'fa-angle-up\':hideOrShowFilter,\'fa-angle-down\':!hideOrShowFilter}" aria-hidden="true"></i></div><hr class="filter-container-hr"><div class="widget-comments tab-pane no-padding fade active in"><div class="no-padding-vr"><div class="comment no-padding-b" ng-repeat="comment in teacherCommentObj"><div class="row"><div class="col-md-12 no-margin-b"><a ui-sref="user({id:comment.student_id})" title="{{comment.nickname}}"><img ng-src="{{comment.avatar_file_name|avatar:75}}" class="comment-avatar no-margin-t" kp-fallback-avatar alt="{{comment.nickname}}"></a><div class="comment-body"><div class="comment-by"><a class="text-m text-medium" ui-sref="user({id:comment.student_id})" title="{{comment.nickname}}"><strong>{{comment.nickname}}</strong></a> <span class="text-muted" ng-if="!hasFilter">({{\'TP176\'|t|format:comment.lessons_count}})</span></div><div class="comment-text"><div class="comment-text" kp-teacher-sessions-with-student data="comment" comment="comment_obj_s"></div></div></div></div></div></div><aside ng-show="(teacherCommentMeta && teacherCommentMeta.has_next) || loadMoreCommentFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMoreComment()" stext="MH046"></button></aside></div></div></div></div></div></div></div><div class="col-md-4" ng-hide="!teacher"><div id="should"><div class="panel no-border visible-screen"><div class="panel-body"><div ng-if="(teacher.teacher_info_obj.is_available_instant_tutoring&&teacher.teacher_info_obj.instant_tutoring_status==1)"><p>{{\'M0113\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.instant_tutoring_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'">{{teacher.teacher_info_obj.instant_tutoring_price_usd|kpToItcToCurrency|currency}}</span></p><p><a href="javascript:void(0);" class="btn btn-lg btn-info btn-block" kp-instant-lesson-request-btn teacher="teacher" instant-filter="instantFilter" ng-disabled="!currentUser||(currentUser.id == teacher.id)">{{\'TP154\'|t}}</a></p><hr></div><div ng-if="teacher.teacher_info_obj.has_trial&&teacher.trial_left_count"><p>{{\'TS032\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.trial_price_usd|kpToItcToCurrency|currency}}</span></p><p><a href="javascript:void(0);" class="btn btn-lg btn-success btn-block" italki-click-test pt="3" cid="0" pid="0" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule||teacher.has_had_trial)&&currentUser">{{\'KP113\'|t}}</a></p><div class="trial-lesson-count text-center" ng-if="!isMe()&&currentUser"><span ng-if="teacher.trial_left_count>1">{{\'KP011\'|t|format:teacher.trial_left_count}}</span> <span ng-if="teacher.trial_left_count<2">{{\'KP012\'|t|format:teacher.trial_left_count}}</span></div><hr></div><div ng-if="!isMe()"><p>{{\'KP556\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.min_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.min_price_usd|kpToItcToCurrency|currency}}</span></p><p><button type="button" href="javascript:void(0);" class="btn btn-lg btn-primary btn-block" italki-click-test is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule&&currentUser)">{{\'TS108\'|t}}</button></p><p ng-if="!teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="contactWith()"><span class="fa fa-ii-message contact-envelope"></span> {{\'TP126\'|t}}</a></p><p ng-if="teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="chatWithMe(teacher.id)"><span class="fa fa-ii-message contact-envelope"></span> {{\'ML100\'|t}}</a></p><div class="text-center text-bold">{{\'KP202\'|t}} <i class="fa fa-question-circle ng-scope" tooltip="{{\'KP203\'|t}}"></i></div></div><div ng-if="isMe()"><p><a ui-sref="setting.editProfile" class="btn btn-lg btn-block">{{\'MH032\'|t}}</a></p><p class="text-center">{{\'C0086\'|t}}</p><p><a ui-sref="setting.availability" class="btn btn-lg btn-block">{{\'ST257\'|t}}</a></p></div></div></div><div class="panel no-border visible-tablet" ng-if="(teacher.teacher_info_obj.is_available_instant_tutoring&&teacher.teacher_info_obj.instant_tutoring_status==1)"><div class="panel-body"><p>{{\'M0113\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.instant_tutoring_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'">{{teacher.teacher_info_obj.instant_tutoring_price_usd|kpToItcToCurrency|currency}}</span></p><p><a href="javascript:void(0);" class="btn btn-lg btn-info btn-block" kp-instant-lesson-request-btn teacher="teacher" instant-filter="instantFilter" ng-disabled="!currentUser||(currentUser.id == teacher.id)">{{\'TP154\'|t}}</a></p></div></div><div class="panel no-border visible-tablet" ng-if="hideTrial || showTrial"><div class="panel-body"><div ng-if="!showTrial"><div class="visible-tablet"><p>{{\'TS032\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.trial_price_usd|kpToItcToCurrency|currency}}</span></p><p><a href="javascript:void(0);" class="btn btn-lg btn-success btn-block" italki-click-test pt="3" cid="0" pid="0" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule||teacher.has_had_trial)&&currentUser">{{\'KP113\'|t}}</a></p><div class="trial-lesson-count text-center" ng-if="!isMe()&&currentUser"><span ng-if="teacher.trial_left_count>1">{{\'KP011\'|t|format:teacher.trial_left_count}}</span> <span ng-if="teacher.trial_left_count<2">{{\'KP012\'|t|format:teacher.trial_left_count}}</span></div></div></div><div ng-if="!isMe() && showTrial"><p>{{\'KP556\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.min_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <i class="fa fa-question-circle ng-scope" style="vertical-align: 8px" tooltip="{{\'HL203\'|translate}}"></i> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.min_price_usd|kpToItcToCurrency|currency}}</span></p><p><button type="button" href="javascript:void(0);" class="btn btn-lg btn-primary btn-block" italki-click-test is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule&&currentUser)">{{\'TS108\'|t}}</button></p><div class="text-center text-bold">{{\'KP202\'|t}} <i class="fa fa-question-circle ng-scope" tooltip="{{\'KP203\'|t}}"></i></div></div><div ng-if="isMe() && !showSetting"><p><a ui-sref="setting.editProfile" class="btn btn-lg btn-block">{{\'MH032\'|t}}</a></p><p class="text-center">{{\'C0086\'|t}}</p><p><a ui-sref="setting.availability" class="btn btn-lg btn-block">{{\'ST257\'|t}}</a></p></div></div></div><div class="panel no-border contact-panel" ng-if="!isMe()"><div class="panel-body"><div ng-if="!teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="contactWith()"><span class="fa fa-ii-message contact-envelope"></span> {{\'TP126\'|t}}</a></div><div ng-if="teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="chatWithMe(teacher.id)"><span class="fa fa-ii-message contact-envelope"></span> {{\'ML100\'|t}}</a></div></div></div><div class="panel no-border visible-tablet profile-setting" ng-if="isMe() && showSetting"><div class="panel-body"><div><p><a ui-sref="setting.editProfile" class="btn btn-lg btn-block">{{\'MH032\'|t}}</a></p><p class="text-center">{{\'C0086\'|t}}</p><p><a ui-sref="setting.availability" class="btn btn-lg btn-block">{{\'ST257\'|t}}</a></p></div></div></div><div class="panel no-border schedule-panel" ng-class="{\'isme\':isMe()}"><div class="panel-body"><p><a href="" class="btn btn-lg btn-block" kp-time-schedule teacher="teacher">{{\'PB121\'|t}}</a></p><div class="text-center text-bold" ng-if="teacher.teacher_info_obj.cancel_policy"><span class="v-middle">{{\'ST425\'|t}}</span> <i class="fa fa-question-circle v-middle" tooltip="{{teacher.teacher_info_obj.cancel_policy}}"></i></div></div></div><div class="panel no-border"><div class="panel-body"><p>{{\'KP307\'|t}}</p><button class="btn btn-block btn-lg" ng-click="openShareModal()">{{\'SR016\'|t}}</button></div></div></div></div></div></div><div id="addthis_div_page" style="display:none"><kp-add-this></kp-add-this></div></div><div ng-if="!isMe()" style="height: 150px" class="visible-tablet" kp-scroll-div update-div-flag="updateDivFlag"><div style="position:relative;bottom: 0;left: 0;width: 100%;z-index: 999"><div style="background: url(/static/images/bg_gallery2.png);\n    text-align: center;\n    box-shadow: 0px 0px 3px 3px rgba(0,0,0,0.15)" ng-hide="!teacher"><div class="panel no-border no-margin-b"><div class="panel-body" style="padding: 10px"><div ng-if="showTrial" class="text-left"><div class="row"><div class="col-ms-6"><p>{{\'TS032\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.trial_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.trial_price_usd|kpToItcToCurrency|currency}}</span></p></div><div class="col-ms-6 invisible-phone"><p><a href="" class="btn btn-lg btn-block" kp-time-schedule teacher="teacher">{{\'PB121\'|t}}</a></p></div></div><div class="row"><div class="col-ms-6"><p><a href="javascript:void(0);" class="btn btn-lg btn-success btn-block" italki-click-test pt="3" cid="0" pid="0" is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="(!teacher.is_schedule||teacher.has_had_trial)&&currentUser">{{\'KP113\'|t}}</a></p><div class="trial-lesson-count text-center" ng-if="!isMe()&&currentUser"><span ng-if="teacher.trial_left_count>1">{{\'KP011\'|t|format:teacher.trial_left_count}}</span> <span ng-if="teacher.trial_left_count<2">{{\'KP012\'|t|format:teacher.trial_left_count}}</span></div></div><div class="col-ms-6 invisible-phone"><p ng-if="!teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="contactWith()"><span class="fa fa-ii-message contact-envelope"></span> {{\'TP126\'|t}}</a></p><p ng-if="teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="chatWithMe(teacher.id)"><span class="fa fa-ii-message contact-envelope"></span> {{\'ML100\'|t}}</a></p></div></div></div><div ng-if="!showTrial" class="text-left"><div class="row"><div class="col-ms-6"><p>{{\'KP556\'|t}}<br><span class="text-xlg" style="line-height:1">$<span ng-bind-html="teacher.teacher_info_obj.min_price_usd|kpToUsd|number:2|kpSup"></span>&nbsp;<sup>USD</sup></span> <span class="label label-tags pull-right" ng-hide="currentUser.currency==\'USD\'||!currentUser">{{teacher.teacher_info_obj.min_price_usd|kpToItcToCurrency|currency}}</span></p></div><div class="col-ms-6 invisible-phone"><p><a href="" class="btn btn-lg btn-block" kp-time-schedule teacher="teacher">{{\'PB121\'|t}}</a></p></div></div><div class="row"><div class="col-ms-6"><p><a href="javascript:void(0);" class="btn btn-lg btn-primary btn-block" italki-click-test is-me="isMe()" teacher="teacher" pag-state="profile" ng-disabled="!teacher.is_schedule&&currentUser">{{\'TS108\'|t}}</a></p></div><div class="col-ms-6 invisible-phone"><p ng-if="!teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="contactWith()"><span class="fa fa-ii-message contact-envelope"></span> {{\'TP126\'|t}}</a></p><p ng-if="teacher.has_contacted"><a href="javascript:void(0);" class="btn btn-lg btn-block" ng-click="chatWithMe(teacher.id)"><span class="fa fa-ii-message contact-envelope"></span> {{\'ML100\'|t}}</a></p></div></div></div></div></div></div></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div><div italki-scroll-and-fixed="56" selector="#teacherProfileNav" id="teacherProfileNav" class="profile-fixedbar" style="height: 56px"><div class="container no-padding-t"><div class="row"><div style="float: left;padding-left: 5px" class="col-md-8"><ul class="list-inline no-margin nav nav-tabs nav-tabs-simple no-border"><li><img ng-src="{{ teacher|avatar:\'150\' }}" width="40" class="rounded" alt="" kp-fallback-avatar></li><li class="text-bg" style="height: 40px;line-height: 40px;font-size: 18px;color: black">{{teacher.nickname}}</li><li class="header-hide" id="aboutTabNav" highlight-tab style="margin-left: 16px"><a href="#about" data-toggle="tab" class="text-bg no-border menu-text">{{\'M0062\'|t}}</a></li><li class="header-hide" id="offersTabNav" highlight-tab><a href="#offers-panel" data-toggle="tab" class="text-bg no-border menu-text">{{\'C0172\'|t}}</a></li><li class="header-hide" id="resumeTabNav" highlight-tab><a href="#resume-panel" data-toggle="tab" class="text-bg no-border menu-text" ng-show="teacher.is_show_exp>0||teacher.is_show_edu>0||teacher.is_show_cert>0">{{\'PB014\'|t}}</a></li><li class="header-hide" id="reviewsTabNav" highlight-tab><a href="#reviews-panel" data-toggle="tab" class="text-bg no-border menu-text">{{\'C0153\'|t}}</a></li></ul></div><div style="float:right" class="col-md-4"><div id="booking-options" class="btn-block text-center">{{\'PB041\'|t}}</div></div></div></div></div></div>'),
a.put("/views/teacher/profile.sticky.html","sticky"),a.put("/views/teacher/search.filters.mobile.html",'<style>/*.modal-dialog {*/\n  /*width: 100%;*/\n  /*height: 100%;*/\n  /*margin: 0;*/\n  /*padding: 0;*/\n  /*}*/\n\n  /*.modal-content {*/\n  /*height: auto;*/\n  /*min-height: 100%;*/\n  /*border-radius: 0;*/\n  /*}*/\n  .accordion-toggle {\n    padding: 20px 30px;\n  }\n  .accordion-toggle:focus {\n    outline: none !important;\n  }\n  .accordion-panel {\n    border-top: 0;\n    border-left: 0;\n    border-right: 0;\n    border-bottom: solid 1px #eeeeee !important;\n  }\n  .accordion-panel .panel-heading {\n    background: #fff;\n  }\n  .accordion-panel .panel-body {\n    padding: 0 30px;\n    border-top: 0 !important;\n  }\n  .filters-accordion .panel-group .panel + .panel {\n    margin-top: 0;\n  }\n  .accordion-icon {\n    display: inline-block;\n    margin-right: 10px;\n  }\n  .showAvailability{\n    height: auto;\n  }\n  .hideAvailability{\n\n  }\n  .time-table{\n    width: 100%;\n  }\n  .time-table th{\n    height: 30px;\n    text-align: center;\n  }\n\n  .time-table img{\n    margin-left: 7px;\n    margin-bottom: 1px;\n  }\n  .time-table tbody{\n    display: table;\n  }\n  /*.modal-dialog{*/\n  /*width: 100%;*/\n  /*height: 100%;*/\n  /*margin: 0;*/\n  /*}*/\n  .filters_range_price{\n    margin-bottom: 0;\n    font-size: 16px;\n  }\n  .filters_radio-content{\n    margin: 0 10px 0 30px;\n  }\n\n  .filters_radio{\n    margin-top: 10px;\n  }\n  @media (min-width: 768px) and (max-width: 991px){\n    /*.modal-dialog{*/\n    /*width: 100%;*/\n    /*height: 100%;*/\n    /*margin: 0;*/\n    /*}*/\n    .line-style{\n      padding:0px 30px\n    }\n    .visible-phone{\n      display: none !important;\n    }\n    .visible-pad{\n      display: inherit !important;\n    }\n    .time-table{\n      border: solid 1px #cccccc;\n    }\n    .time-table th{\n      border-right: solid 1px #cccccc;\n    }\n    .pad-margin{\n      margin-right: 50px;\n    }\n    .filters_range_price{\n      margin-top: 10px;\n    }\n    .rate-margin{\n      margin-bottom: 50px;\n    }\n  }\n  @media (max-width: 767px){\n    .label-tags{\n      display: none;\n    }\n    .line-style{\n      padding:0px 20px\n    }\n    .visible-phone{\n      display: inherit !important;\n    }\n    .visible-pad{\n      display: none !important;\n    }\n    .time-table th{\n      border: solid 1px #cccccc;\n    }\n    .time-table tbody{\n      width: 100%;\n    }\n    .filters_range_price{\n      margin-top: 0;\n    }\n    .rate-margin{\n      margin: 10px 0 40px;\n    }\n  }\n  .day-table tbody{\n    display: table;\n    width: 100%\n  }\n  .day-table th{\n    border: solid 1px #cccccc;\n    height: 30px;\n    text-align: center;\n  }\n  .checkbox-inline{\n    padding-left: 0;\n  }\n  .manycheck-select-color{\n    background-color: rgba(255, 67, 56, 0.4);\n    border-right: solid 1px #feb3ae !important;\n  }\n  table tbody{\n    table-layout:fixed\n  }\n  .line-style{\n    border-bottom: solid 1px #eeeeee;\n  }\n  .line-fold-style{\n    height: 69px;\n    line-height: 69px;\n  }\n  .input-label-line label{\n    height: 30px;\n    line-height: 30px;\n  }\n  .lbl{\n    font-size: 16px;\n    font-weight: 400;\n  }\n  .filters-mobile-open .btn-search-section {\n    top: 100%;\n    margin-top: -80px;\n  }\n  .btn-search-section {\n    position: fixed;\n    top: -150%;\n    height: 80px;\n    box-shadow: 0 -2px 10px 0 rgba(0, 0, 0, 0.1);\n    width: 100%;\n    background-color: #ffffff;\n    line-height: 80px;\n    padding: 0 20px;\n    transition: all 0.4s;\n    z-index: 9999;\n  }\n  .btn-search {\n    width: 100%\n  }\n  @media (max-width: 767px) {\n    .filters-mobile-open .btn-search-section {\n      margin-top: -60px;\n    }\n    .btn-search-section {\n      padding: 0 10px;\n      height: 60px;\n      line-height: 60px;\n    }\n    .btn-search {\n      height: 40px;\n    }\n  }</style><div style="height: 54px;line-height: 54px;padding: 0 30px 0;border-bottom: solid 1px #eeeeee"><a close-mobile-filter ng-click="resetParams()" style="font-size: 30px;color: #ff4338;font-weight: 300">&times;</a><h4 class="modal-title" style="font-size: 14px;text-align: right;color: #ff4338;float: right;line-height: 54px;font-weight: 400;cursor: pointer" ng-click="clearFilters()">{{\'C0933\'|t}}</h4></div><div style="height: 85px;line-height: 85px;border-bottom: solid 1px #eeeeee" class="text-center panel-body"><div class="filters_section_1"><div class="filters_section_tablet"><div ng-click="toggleFilterOption($event, \'languageToLearn\')" class="filters_language italki-drop-down-search"><ui-select ng-model="mobileUiItems.selected" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'C0906\'|t}}"><span>{{$select.selected.v ? ($select.selected.v|t) : \'C0906\'|t}}</span> <span ng-if="uiItemsFilter&&!$select.selected.v" ng-bind-html="uiItemsFilter"></span></ui-select-match><ui-select-choices repeat="lan in teachLans | propsFilter: {name: $select.search, v: $select.search}" ng-hide="!ui.languageToLearn.show"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div></div></div></div><div class="filters-accordion"><accordion close-others="true"><accordion-group panel-class="accordion-panel" is-open="availability.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-availability.svg">{{\'PB078\' | t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': availability.open, \'fa-angle-up\': !availability.open}"></i><div style="float: right"><span class="filters_tag visible-pad" ng-hide="mobileFilters.manyCheck.now !== \'N\'" style="float: left;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{\'TS047\' | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.manyCheck.now = \'\'"></span> <span class="filters_tag visible-pad" ng-repeat="time in mobileTimeTags track by $index" ng-hide="(mobileTimeTags.length + mobileDaysTags.length) > 4 && $index > 2" style="float: left;margin: 6px 5px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{time | teacherTime}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.manyCheck.within[$index - 1] = \'\'"></span> <span class="filters_tag visible-pad" ng-repeat="day in mobileDaysTags track by $index" ng-hide="(mobileTimeTags.length + mobileDaysTags.length) > 4 && $index > (2 - mobileTimeTags.length)" style="float: left;margin: 6px 5px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{day | teacherWeekday | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.manyCheck.weekday[$index - 1] = \'\'"></span> <span class="visible-sm-inline-block"><span ng-style="{\'display\': mobileTimeTags.length + mobileDaysTags.length > 4 ? \'inline-block\': \'none\'}" style="float: left;margin: 0 10px;height: 38px;line-height: 38px">+{{mobileTimeTags.length + mobileDaysTags.length - 3}}</span></span></div></accordion-heading><label class="filters_radio"><input name="selectTimes" type="radio" ng-model="selectAvailability" class="filters_radio_input" value="time"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0934\'|t}}</span></label><div ng-show="selectAvailability === \'time\'" class="filters_radio-content"><p style="margin-top: 20px">{{\'C0205\' | t}}</p><table class="time-table visible-phone"><tbody><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[2]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[2]" ng-change="resetInstantTutoring()" ng-true-value="\'360-540\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-morning.svg" ng-click=""> <span>06 - 09</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[3]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[3]" ng-change="resetInstantTutoring()" ng-true-value="\'540-720\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-morning.svg"> <span>09 - 12</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[4]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[4]" ng-change="resetInstantTutoring()" ng-true-value="\'720-900\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-afternoon.svg"> <span>12 - 15</span></label></th></tr><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[5]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[5]" ng-change="resetInstantTutoring()" ng-true-value="\'900-1080\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-afternoon.svg"> <span>15 - 18</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[6]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[6]" ng-change="resetInstantTutoring()" ng-true-value="\'1080-1260\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-evening.svg"> <span>18 - 21</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[7]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[7]" ng-change="resetInstantTutoring()" ng-true-value="\'1260-1440\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-evening.svg"> <span>21 - 00</span></label></th></tr><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[0]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[0]" ng-change="resetInstantTutoring()" ng-true-value="\'0-180\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-night.svg"> <span>00 - 03</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[1]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[1]" ng-change="resetInstantTutoring()" ng-true-value="\'180-360\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-night.svg"> <span>03 - 06</span></label></th></tr></tbody></table><table class="time-table visible-pad"><tbody style="width: 100%"><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[2]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[2]" ng-change="resetInstantTutoring()" ng-true-value="\'360-540\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-morning.svg" ng-click=""> <span>06 - 09</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[3]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[3]" ng-change="resetInstantTutoring()" ng-true-value="\'540-720\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-morning.svg"> <span>09 - 12</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[4]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[4]" ng-change="resetInstantTutoring()" ng-true-value="\'720-900\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-afternoon.svg"> <span>12 - 15</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[5]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[5]" ng-change="resetInstantTutoring()" ng-true-value="\'900-1080\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-afternoon.svg"> <span>15 - 18</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[6]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[6]" ng-change="resetInstantTutoring()" ng-true-value="\'1080-1260\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-evening.svg"> <span>18 - 21</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[7]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[7]" ng-change="resetInstantTutoring()" ng-true-value="\'1260-1440\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-evening.svg"> <span>21 - 00</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[0]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[0]" ng-change="resetInstantTutoring()" ng-true-value="\'0-180\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-night.svg"> <span>00 - 03</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.within[1]}" style="border-right: none"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.within[1]" ng-change="resetInstantTutoring()" ng-true-value="\'180-360\'" ng-false-value="\'\'" class="px"> <img width="16" height="16" src="static/images/teachers/icon-night.svg"> <span>03 - 06</span></label></th></tr></tbody></table><p style="margin-top: 20px">{{\'KP209\' | t}}</p><div class="row"><div class="col-xs-12 col-sm-6"><table class="day-table visible-phone"><tbody><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[1]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[1]" ng-change="resetInstantTutoring()" ng-true-value="\'0\'" ng-false-value="\'\'" class="px"> <span>{{\'C0910\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[2]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[2]" ng-change="resetInstantTutoring()" ng-true-value="\'1\'" ng-false-value="\'\'" class="px"> <span>{{\'C0911\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[3]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[3]" ng-change="resetInstantTutoring()" ng-true-value="\'2\'" ng-false-value="\'\'" class="px"> <span>{{\'C0912\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[4]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[4]" ng-change="resetInstantTutoring()" ng-true-value="\'3\'" ng-false-value="\'\'" class="px"> <span>{{\'C0913\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[5]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[5]" ng-change="resetInstantTutoring()" ng-true-value="\'4\'" ng-false-value="\'\'" class="px"> <span>{{\'C0914\'|t}}</span></label></th></tr><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[6]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[6]" ng-change="resetInstantTutoring()" ng-true-value="\'5\'" ng-false-value="\'\'" class="px"> <span>{{\'C0915\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[7]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[7]" ng-change="resetInstantTutoring()" ng-true-value="\'6\'" ng-false-value="\'\'" class="px"> <span>{{\'C0916\'|t}}</span></label></th></tr></tbody></table><table class="day-table visible-pad"><tbody><tr><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[1]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[1]" ng-change="resetInstantTutoring()" ng-true-value="\'0\'" ng-false-value="\'\'" class="px"> <span>{{\'C0910\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[2]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[2]" ng-change="resetInstantTutoring()" ng-true-value="\'1\'" ng-false-value="\'\'" class="px"> <span>{{\'C0911\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[3]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[3]" ng-change="resetInstantTutoring()" ng-true-value="\'2\'" ng-false-value="\'\'" class="px"> <span>{{\'C0912\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[4]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[4]" ng-change="resetInstantTutoring()" ng-true-value="\'3\'" ng-false-value="\'\'" class="px"> <span>{{\'C0913\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[5]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[5]" ng-change="resetInstantTutoring()" ng-true-value="\'4\'" ng-false-value="\'\'" class="px"> <span>{{\'C0914\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[6]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[6]" ng-change="resetInstantTutoring()" ng-true-value="\'5\'" ng-false-value="\'\'" class="px"> <span>{{\'C0915\'|t}}</span></label></th><th ng-class="{\'manycheck-select-color\': mobileFilters.manyCheck.weekday[7]}"><label class="checkbox-inline"><input type="checkbox" ng-model="mobileFilters.manyCheck.weekday[7]" ng-change="resetInstantTutoring()" ng-true-value="\'6\'" ng-false-value="\'\'" class="px"> <span>{{\'C0916\'|t}}</span></label></th></tr></tbody></table></div></div></div><div style="margin: 30px 0"><label class="filters_radio" style="display: inherit"><input name="selectNow" type="radio" ng-model="selectAvailability" class="filters_radio_input" value="now"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0935\'|t}}</span></label><div ng-show="selectAvailability === \'now\'" class="filters_radio-content"><span>{{\'C0936\'|t}}</span><div style="margin-top: 25px"><label class="availability_switch availability_now_switch" style="margin: 5px 10px 0 0"><input type="checkbox" class="availability_input" ng-model="mobileFilters.manyCheck.now" ng-change="resetDaysAndTime()" ng-true-value="\'N\'" ng-false-value="\'\'"> <span class="availability_slider availability_round"><span class="availability_round_btn"><i class="fa fa-flash availability_round_icon"></i></span></span></label><span style="font-size: 14px;height: 30px;line-height: 30px">{{\'M0113\' | t}}</span></div></div></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="teacherType.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-type.svg">{{\'C0918\'|t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': teacherType.open, \'fa-angle-up\': !teacherType.open}"></i> <span class="filters_tag visible-pad" ng-hide="mobileFilters.teacherType === \'0\' || !mobileFilters.teacherType" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{mobileFilters.teacherType | teacherType | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.teacherType = 0"></span></accordion-heading><div class="input-label-line"><div class="filters_professional_teachers"><label class="filters_radio"><input name="mobileTeacherType" type="radio" class="filters_radio_input" ng-model="mobileFilters.teacherType" ng-value="\'1\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0200\' | t}}</span></label><show-radio-more texts="{{\'C0931\'|t}}"></show-radio-more></div><div><label class="filters_radio"><input name="mobileTeacherType" type="radio" class="filters_radio_input" ng-model="mobileFilters.teacherType" ng-value="\'2\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0201\' | t}}</span></label><show-radio-more texts="{{\'C0932\'|t}}"></show-radio-more></div><div class="filters_all" style="margin-bottom: 20px"><label class="filters_radio"><input name="mobileTeacherType" type="radio" class="filters_radio_input" ng-model="mobileFilters.teacherType" ng-value="\'0\'"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0024\' | t}}</span></label></div></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="teacherFrom.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-from.svg">{{\'C0919\'|t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': teacherFrom.open, \'fa-angle-up\': !teacherFrom.open}"></i> <span class="filters_tag visible-pad" ng-hide="!mobileUiItems2.selected.v" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{mobileUiItems2.selected.v ? (mobileUiItems2.selected.v | t) : \'\'}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="resetTeacherCountry()"></span></accordion-heading><div class="italki-drop-down-search tablet_teacher_from"><italki-search-mobile-dropdown count="popularCountryCount"><ui-select italki-dropdown name="from" ng-model="mobileUiItems2.selected" theme="italki" search-enabled="false"><ui-select-match placeholder="{{\'C0919\'|t}}"><span>{{$select.selected.v ? ($select.selected.v|t) : \'C0919\'|t}}</span></ui-select-match><ui-select-choices group-by="recommendedMobileCountries" group-filter="reverseOrderFilterFn" repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v?c.v:c.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></italki-search-mobile-dropdown><a italki-mobile-dropdown-show-more class="teacher-from-show-more"><span>{{\'C0927\'|t}}</span> <img class="plus-icon" width="16" height="16" src="static/images/icons/icon-plus.svg"></a></div><div class="italki-drop-down-search tablet_teacher_from" ng-if="!currentUser"><italki-search-mobile-dropdown count="popularCountryCount"><ui-select italki-dropdown ng-model="mobileUiItems2.selected" theme="italki" search-enabled="false"><ui-select-match placeholder="{{\'C0919\'|t}}"><span>{{$select.selected.v ? ($select.selected.v|t) : \'C0919\'|t}}</span></ui-select-match><ui-select-choices repeat="c in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(c.v?c.v:c.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></italki-search-mobile-dropdown><a italki-mobile-dropdown-show-more class="teacher-from-show-more"><span>{{\'C0927\'|t}}</span> <img class="plus-icon" width="16" height="16" src="static/images/icons/icon-plus.svg"></a></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="hourlyRate.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-rate.svg">{{\'C0920\'|t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': hourlyRate.open, \'fa-angle-up\': !hourlyRate.open}"></i> <span class="filters_tag visible-pad" ng-hide="teacherPrice.min === 4 && teacherPrice.max === 80" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">${{teacherPrice.min}} - ${{teacherPrice.max}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="teacherPrice.min = 4;teacherPrice.max = 80;"></span></accordion-heading><div class="rate-margin"><h3 class="filters_range_price">${{teacherPrice.min}} - ${{teacherPrice.max}}</h3><p class="filters_range_currency" style="font-size: 10px;height: 21px;line-height: 2.1;padding-bottom: 30px">{{currentUser.currency ? currentUser.currency + \' \' + (teacherPriceCurrency.min|number:2) + \' - \' + currentUser.currency + \' \' + (teacherPriceCurrency.max|number:2) : \'\'}}</p><kp-range-slider model="teacherPrice" min="4" max="80" limitation="5"></kp-range-slider></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="teacherSpeak.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-speaks.svg">{{\'C0939\'|t}}... <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': teacherSpeak.open, \'fa-angle-up\': !teacherSpeak.open}"></i> <span class="filters_tag visible-pad" ng-hide="!mobileUiItems1.selected.v" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{mobileUiItems1.selected.v | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileUiItems1.selected = lans[0]"></span></accordion-heading><div class="italki-drop-down-search tablet_teacher_speak" ng-if="currentUser.language_obj_s"><italki-search-mobile-dropdown count="yourLanguages"><ui-select italki-dropdown ng-model="mobileUiItems1.selected" theme="italki" search-enabled="false"><ui-select-match placeholder="{{\'C0140\'|t}}"><span ng-class="{\'filterselected\':filter.speak}" ng-bind="\'C0140\'|t"></span></ui-select-match><ui-select-choices group-by="recommendedMobileLanguages" group-filter="reverseLangOrderFilterFn" repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></italki-search-mobile-dropdown><a italki-mobile-dropdown-show-more class="teacher-speak-show-more"><span>{{\'C0927\'|t}}</span> <img class="plus-icon" width="16" height="16" src="static/images/icons/icon-plus.svg"></a></div><div class="italki-drop-down-search tablet_teacher_speak" ng-if="!currentUser.language_obj_s"><italki-search-mobile-dropdown count="yourLanguages"><ui-select italki-dropdown ng-model="mobileUiItems1.selected" theme="italki" search-enabled="false"><ui-select-match placeholder="{{\'C0140\'|t}}"><span ng-class="{\'filterselected\':filter.speak}" ng-bind="\'C0140\'|t"></span></ui-select-match><ui-select-choices repeat="lan in lans | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t|highlight: $select.search"></div></ui-select-choices></ui-select></italki-search-mobile-dropdown><a italki-mobile-dropdown-show-more class="teacher-speak-show-more"><span>{{\'C0927\'|t}}</span> <img class="plus-icon" width="16" height="16" src="static/images/icons/icon-plus.svg"></a></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="teacherLevel.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-native-advanced.svg">{{\'C0921\'|t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': teacherLevel.open, \'fa-angle-up\': !teacherLevel.open}"></i> <span class="filters_tag visible-pad" ng-hide="!mobileFilters.is_native" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{\'C0023\' | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.is_native = \'\'"></span> <span class="filters_tag visible-pad" ng-hide="!mobileFilters.is_advanced" style="float: right;margin: 6px 20px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{\'C0905\' | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="mobileFilters.is_advanced = \'\'"></span></accordion-heading><div class="teacher-level-margin"><div class="input-label-line"><div class="filters_professional_teachers"><label class="filters_radio" ng-click="changeMobileTeacherLevel($event, \'advanced\')"><input name="mobileTeacherLevel" type="radio" class="filters_radio_input" ng-checked="!mobileFilters.is_native && mobileFilters.is_advanced"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0922\'|t}}</span></label><show-radio-more texts="{{\'C0937\'|t}}"></show-radio-more></div><div><label class="filters_radio" ng-click="changeMobileTeacherLevel($event, \'native\')"><input name="mobileTeacherLevel" type="radio" class="filters_radio_input" ng-checked="mobileFilters.is_native && !mobileFilters.is_advanced"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0923\'|t}}</span></label><show-radio-more texts="{{\'C0938\'|t}}"></show-radio-more></div><div class="filters_all" style="margin-bottom: 20px"><label class="filters_radio" ng-click="changeMobileTeacherLevel($event, \'all\')"><input name="mobileTeacherLevel" type="radio" class="filters_radio_input" ng-checked="!mobileFilters.is_native && !mobileFilters.is_advanced"> <span class="filters_radio_btn"></span> <span class="filters_radio_description">{{\'C0024\' | t}}</span></label></div></div></div></accordion-group><accordion-group panel-class="accordion-panel" is-open="skills.open"><accordion-heading><img class="accordion-icon" width="30" height="30" src="static/images/teachers/icon-skills.svg">{{\'C0924\'|t}} <i class="fa pull-right" style="line-height: 30px" ng-class="{\'fa-angle-down\': skills.open, \'fa-angle-up\': !skills.open}"></i><div style="float: right"><span class="filters_tag visible-pad" ng-repeat="tag in mobileSkillsTags track by $index" style="float: left;margin: 6px 5px 8px 10px" ng-hide="(mobileSkillsTags.length + childTagsChecked) > 4 && $index > 2" ng-click="$event.stopPropagation();$event.preventDefault();">{{tags[tag].t | t}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeTags(tag)"></span> <span class="filters_tag visible-pad" ng-repeat="tag in childTags track by $index" ng-hide="!tag.checked || ((mobileSkillsTags.length + childTagsChecked) > 4 && $index > (2 - mobileSkillsTags.length))" style="float: left;margin: 6px 5px 8px 10px" ng-click="$event.stopPropagation();$event.preventDefault();">{{tag.abbr}} <img width="10" height="10" src="/static/images/teachers/cross.svg" ng-click="removeChildTags(tag)"></span> <span class="visible-sm-inline-block"><span ng-style="{\'display\': mobileSkillsTags.length + childTagsChecked > 4 ? \'inline-block\': \'none\'}" style="float: left;margin: 0 10px;height: 38px;line-height: 38px">+{{mobileSkillsTags.length + childTagsChecked - 3}}</span></span></div></accordion-heading><h5 class="filters_skill_needs">{{\'C0926\'|t}}</h5><div class="italki-skill-search"><div class="italki-autocomplete-container"><form><div class="form-group no-margin"><input name="auto" type="text" class="form-control" placeholder="{{\'C3024\'|t}}" ng-model="mobileFilters.q"></div></form></div></div><div class="popular-skills"><h5 class="filters_skill_needs">{{\'C3023\'|t}}</h5><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="mobileFilters.manyCheck.tags[0]" ng-true-value="\'1\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST701\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="mobileFilters.manyCheck.tags[3]" ng-true-value="\'4\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST704\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="mobileFilters.manyCheck.tags[4]" ng-true-value="\'5\'" ng-false-value="\'\'" ng-change="checkChildTags()"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST705\' | t}}</span></label></div><div ng-if="childTags.length>0"><div ng-repeat="item in childTags"><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="item.checked"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{item.abbr}}</span></label></div></div></div><div class="age-checkboxes-tablet"><h5 class="filters_skill_age">{{\'C0925\'|t}}</h5><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="mobileFilters.manyCheck.tags[1]" ng-true-value="\'2\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST702\' | t}}</span></label></div><div><label class="filters_checkbox"><input type="checkbox" class="filters_checkbox_input" ng-model="mobileFilters.manyCheck.tags[2]" ng-true-value="\'3\'" ng-false-value="\'\'"> <span class="filters_checkbox_btn"></span> <span class="filters_checkbox_label">{{\'ST703\' | t}}</span></label></div></div></accordion-group></accordion></div><div class="btn-search-section"><button close-mobile-filter class="btn btn-primary btn-search" ng-click="applyMobileFilter();">{{\'C0928\'|t}}</button></div>'),
a.put("/views/teacher/seg_teacher_sidebar.html",'<div class="spacing"><div class="subtitle"><h3>{{\'TS284\'|t}}?</h3></div><a onclick="ITALKI.util.bootstrap.ShowMsgBoxIF(\'What is italki?\',\'http://www.youtube.com/embed/8RnLis07Luo\',600,338)" href="javascript:;"><img width="190" src="{{image_x_url(\'default_title4.jpg\')}}"></a></div><div class="spacing"><div class="subtitle"><h3>{{\'KP517\'|t}}!</h3></div><div class="gridS"><div class="col1_50"><img src="http://d42b23ca8b98c4c48218-e011ef914a29f21f9a22bf73f79926ab.r51.cf1.rackcdn.com/T009514339_Avatar_3.jpg"></div><div class="col2"><span class="text-muted"><em>“{{\'KP518\'|t}}” {{\'KP519\'|t}}, Bionca</em></span></div></div></div><div class="spacing"><div class="subtitle"><h3>{{\'TS285\'|t}}</h3></div><div class="text-muted">{{\'TS286\'|t}}<p><a class="buttong" href="{{TEACHER_APPLY_URL}}">{{\'TP100\'|t}}</a></p></div></div>'),a.put("/views/teacher/teacher.label.div.html",'<div style="margin-top:10px"><span ng-if="filter.teach" class="visible-phone"><span class="label label-tags">{{\'C0118\'|t}} {{filter.teach|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.teach=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.within[0]">{{\'C0183\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="00:00-05:59"></i> <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.within[0]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.within[1]">{{\'C0184\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="06:00-11:59"></i> <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.within[1]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.within[2]">{{\'C0185\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="12:00-17:59"></i> <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.within[2]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.within[3]">{{\'C0186\'|t}} <i class="fa fa-question-circle" style="white-space: nowrap" tooltip="18:00-23:59"></i> <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.within[3]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[1]!=\'\'">{{\'TP018\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[1]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[2]!=\'\'">{{\'TP019\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[2]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[3]!=\'\'">{{\'TP020\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[3]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[4]!=\'\'">{{\'TP021\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[4]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[5]!=\'\'">{{\'TP022\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[5]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[6]!=\'\'">{{\'TP023\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[6]=\'\';applyFilter();">×</button></span></span> <span class="visible-phone"><span class="label label-tags" ng-if="manycheck.weekday[0]">{{\'TP017\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.weekday[0]=\'\';applyFilter();">×</button></span></span> <span ng-if="filter.speak" class="label label-tags">{{\'C0140\'|t}} {{filter.speak|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.speak=\'\';applyFilter();">×</button></span> <span ng-if="filter.country" class="label label-tags">{{\'C0003\'|t}} {{filter.country|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.country=\'\';applyFilter();">×</button></span> <span ng-if="filter.price_usd" class="label label-tags">{{\'TP065\'|t}} {{(filter.price_usd==\'min-1000\'?\'$1-10 USD\':(filter.price_usd==\'1000-2000\'?\'$10-20 USD\':\'$20 USD +\'))}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.price_usd=\'\';applyFilter();">×</button></span> <span class="label label-tags" ng-if="manycheck.tags[0]">{{tags[1].t|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.tags[0]=\'\';applyFilter();">×</button></span> <span class="label label-tags" ng-if="manycheck.tags[1]">{{tags[2].t|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.tags[1]=\'\';applyFilter();">×</button></span> <span class="label label-tags" ng-if="manycheck.tags[2]">{{tags[3].t|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.tags[2]=\'\';applyFilter();">×</button></span> <span class="label label-tags" ng-if="manycheck.tags[3]">{{tags[4].t|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.tags[3]=\'\';applyFilter();">×</button></span> <span class="label label-tags" ng-if="manycheck.tags[4]">{{tags[5].t|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="manycheck.tags[4]=\'\';cancelChildTags();applyFilter();">×</button></span> <span class="label label-tags" ng-repeat="item in childTags" ng-show="item.checked">{{item.abbr}} <button type="button" class="close small" data-dismiss="alert" ng-click="item.checked=false;applyFilter();">×</button></span> <span ng-if="filter.is_native==\'1\'" class="label label-tags">{{\'C0023\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.is_native=\'0\';applyFilter();">×</button></span> <span ng-if="filter.is_trial==\'1\'" class="label label-tags">{{\'TP060\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.is_trial=\'0\';applyFilter();">×</button></span> <span ng-if="filter.is_video==\'1\'" class="label label-tags">{{\'ST708\'|t}} <button type="button" class="close small" data-dismiss="alert" ng-click="filter.is_video=\'0\';applyFilter();">×</button></span></div>'),a.put("/views/teacher/teacher.tags.div.html",'<div class="popover-content"><p class="" tooltip="{{tags[1].d|t}}" tooltip-placement="bottom"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilter();" ng-model="manycheck.tags[0]" ng-true-value="\'1\'" ng-false-value="\'\'" class="px"><span class="lbl">{{tags[1].t|t}}</span></label></p><p class="" tooltip="{{tags[2].d|t}}" tooltip-placement="bottom"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilter()" ng-model="manycheck.tags[1]" ng-true-value="\'2\'" ng-false-value="\'\'" class="px"><span class="lbl">{{tags[2].t|t}}</span></label></p><p class="" tooltip="{{tags[3].d|t}}" tooltip-placement="bottom"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilter()" ng-model="manycheck.tags[2]" ng-true-value="\'3\'" ng-false-value="\'\'" class="px"><span class="lbl">{{tags[3].t|t}}</span></label></p><p class="" tooltip="{{tags[4].d|t}}" tooltip-placement="bottom"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilter()" ng-model="manycheck.tags[3]" ng-true-value="\'4\'" ng-false-value="\'\'" class="px"><span class="lbl">{{tags[4].t|t}}</span></label></p><p class="" tooltip="{{tags[5].d|t}}" tooltip-placement="bottom"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilterTag4();getTagChild();applyFilter();" ng-model="manycheck.tags[4]" ng-true-value="\'5\'" ng-false-value="\'\'" class="px"><span class="lbl">{{tags[5].t|t}}</span></label></p><div ng-if="childTags.length>0"><p class="" ng-repeat="item in childTags" tooltip-placement="bottom" tooltip="{{item.full_name}}"><label class="checkbox-inline"><input type="checkbox" ng-change="applyFilter()" ng-model="item.checked" class="px"> <span ng-bind="item.abbr" class="lbl"></span></label></p></div></div>'),a.put("/views/ui/alert/alert.modal.html",'<div class="sweet-alert showSweetAlert visible" data-custom-class="" data-has-cancel-button="true" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="true" data-animation="pop" data-timer="null" style="display: block"><div class="sa-icon sa-error" style="display: none"><span class="sa-x-mark"><span class="sa-line sa-left"></span> <span class="sa-line sa-right"></span></span></div><div class="sa-icon sa-warning pulseWarning" style="display: block"><span class="sa-body pulseWarningIns"></span> <span class="sa-dot pulseWarningIns"></span></div><div class="sa-icon sa-info" style="display: none"></div><div class="sa-icon sa-success" style="display: none"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2 ng-bind-html="content"></h2><p style="display: block">{{title}}</p><div class="sa-button-container" ng-if="!warnMode"><button class="btn btn-lg" tabindex="2" ng-click="$close()" style="display: inline-block; box-shadow: none">{{\'C0070\'|t}}</button> <button class="btn btn-lg btn-primary" ng-click="doFlag=true;fnOK();" ng-disabled="doFlag" tabindex="1" style="display: inline-block; box-shadow: rgba(221, 107, 85, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset; background-color: rgb(221, 107, 85)">{{(doFlag?\'C0141\':\'C0069\')|t}}</button></div></div>'),a.put("/views/ui/alert/alert.modal1.html",'<div class="sweet-alert showSweetAlert visible" style="display: block"><div class="sa-icon sa-error" style="display: none"><span class="sa-x-mark"><span class="sa-line sa-left"></span> <span class="sa-line sa-right"></span></span></div><div class="sa-icon sa-warning pulseWarning" style="display: block"><span class="sa-body pulseWarningIns"></span> <span class="sa-dot pulseWarningIns"></span></div><div class="sa-icon sa-info" style="display: none"></div><div class="sa-icon sa-success" style="display: none"><span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span><div class="sa-placeholder"></div><div class="sa-fix"></div></div><h2 ng-bind-html="content"></h2><p style="display: block" ng-bind-html="\'KP010\'|t"></p><div class="sa-button-container"><button class="btn btn-lg" tabindex="2" ng-click="$close()" style="display: inline-block; box-shadow: none">{{\'C0070\'|t}}</button> <button class="btn btn-lg btn-primary" ng-click="doFlag=true;fnOK1();" ng-disabled="doFlag" tabindex="1" style="display: inline-block; box-shadow: rgba(221, 107, 85, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset; background-color: rgb(221, 107, 85)">{{(doFlag?\'C0141\':\'C0069\')|t}}</button></div></div>'),a.put("/views/ui/alert/alert.tpl.html",'<div class="alert alert-dismissable" tabindex="-1" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>'),a.put("/views/ui/modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><a href="javascript:void(0);" class="close" ng-click="$hide()">&times;</a><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer padding-bottom"><button type="button" class="btn btn-default" ng-click="$hide()">{{\'C0064\'|t}}</button></div></div></div></div>'),a.put("/views/ui/tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>'),a.put("/views/user/directives/basic.information.html",'<style>.origin-city-id .ui-select-toggle{\n    padding: 0px;\n    height: 20px;\n  }\n  .origin-city-id .fa-angle-down{\n    padding-top: 2px;\n  }\n  .origin-city-id .ui-select-search{\n    padding-left: 4px;\n    margin-top: -5px;\n    height: 31px;\n    transform: scale(0.96,0.94);\n  }\n  @media(min-width:1200px){\n    .origin-city-id .ui-select-choices{\n      transform: scale(1.1,1) !important;\n    }\n  }\n  @media(max-width:1199px) and (min-width:768px){\n    .origin-city-id .ui-select-choices{\n      transform: scale(1.13,1) !important;\n  }\n  }\n  @media(max-width:991px) and (min-width:768px){\n    .origin-city-id  .ui-select-choices{\n      left: -3px !important;\n      min-width: 156px !important;\n    }\n  }\n  @media(max-width:320px){\n    .origin-city-id .ui-select-choices{\n      transform: scale(1.13,1) !important;\n    }\n  }\n  .origin-city-id .ui-select-toggle{\n    overflow: hidden;\n    padding-right: 10px;\n  }\n  .origin-city-id .fa-angle-down{\n    position: absolute;\n    right: 0;\n  }\n  .origin-city-id .ui-select-match{\n  width: 95%;\n  z-index: 0;\n}</style><div class="panel-heading"><h4>{{\'ST048\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-3 text-center"><p><img ng-src="{{ user|avatar:\'150\' }}" id="user_avatar" width="150" class="rounded" kp-fallback-avatar></p><p><span ng-if="isChangeImg()"><label class="label label-warning">{{\'ST196\'|t}}</label></span> <a ng-if="!isChangeImg()" href="javascript:void(0)" ng-click="editAvatar()"><i class="fa fa-pencil"></i> {{\'ST034\'|t}}</a></p><a ng-if="isTeacher()" href="https://support.italki.com/hc/en-us/articles/206351988-Profile-Photo-Guidelines-and-Requirements" id="teacher-profile-photo-requirements" target="_blank">{{\'ST427\'|t}}</a></div><div class="col-sm-9"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0199\'|t}}</label><div class="col-sm-9" ng-if="!isChangeName()"><div class="form-group no-margin no-padding-t no-border-t"><input type="text" class="form-control" ng-model="user.nickname" maxlength="20"><p class="help-block" ng-if="!user.nickname">{{\'UR042\'|t}}</p><p class="help-block" ng-if="user.nickname&&(user.nickname.length<3||user.nickname.length>20)">{{\'ST155\'|t|format:3:20}}</p></div></div><div class="col-sm-9" ng-if="isChangeName()" style="margin-top: 6px">{{user_clone_nickname}}&nbsp;<label class="label label-warning">{{\'ST196\'|t}}</label></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0003\'|t}}</label><div class="col-sm-9" ng-if="!isChange()"><div class="form-group no-margin no-padding-t no-border-t"><div class="row"><div class="col-sm-6"><div class="form-control origin-city-id"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices class="kp-adjust-select-scale" repeat="m in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(m.v?m.v:m.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><p class="help-block" ng-if="!user.origin_country_id">{{\'UR027\'|t}}</p></div><div class="col-sm-6"><select data-ng-model="user.origin_city_id" class="form-control" ng-options="m.id as m.native_name + \'(\'+m.english_name+\')\' for m in filter.fcitys"><option value="">{{\'ST274\'|t}}</option></select></div></div></div></div><div class="col-sm-9" ng-if="isChange()" style="margin-top: 6px">{{getContryText(user.origin_country_id)|t}}&nbsp;<label class="label label-warning">{{\'ST196\'|t}}</label></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t" ng-if="!isChange() && user.origin_city_id==\'ZZ00000\'&&user.origin_city_id"><div class="row"><div class="col-sm-9 col-md-offset-3"><div><div class="form-group no-margin no-padding-t no-border-t"><div class="row"><div class="col-sm-6 col-sm-offset-6"><input type="text" class="form-control" ng-model="user.origin_city_name" maxlength="100"></div></div></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0009\'|t}}</label><div class="col-sm-9"><div><div class="form-group no-margin no-padding-t no-border-t"><div class="row"><div class="col-sm-6"><div class="form-control origin-city-id"><ui-select ng-model="uiItems1" theme="bootstrap" on-select="uiSelected1($item, $model)"><ui-select-match placeholder="{{\'C0014\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0014\'|t)"></span></ui-select-match><ui-select-choices repeat="m in countries | propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(m.v?m.v:m.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select><p class="help-block" ng-if="!user.living_country_id">{{\'ST199\'|t}}</p></div></div><div class="col-sm-6"><select data-ng-model="user.living_city_id" class="form-control" ng-options="m.id as m.native_name + \'(\'+m.english_name+\')\' for m in filter.lcitys"><option value="">{{\'ST274\'|t}}</option></select></div></div></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t" ng-if="user.living_city_id==\'ZZ00000\'&&user.living_country_id"><div class="row"><div class="col-sm-9 col-md-offset-3"><div><div class="form-group no-margin no-padding-t no-border-t"><div class="row"><div class="col-sm-6 col-sm-offset-6"><input type="text" class="form-control" ng-model="user.living_city_name" maxlength="100"></div></div></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST051\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-6"><select data-ng-model="user.timezone" class="form-control" ng-options="m.v as m.t for m in timezones"><option value="">{{\'C0061\'|t}}</option></select><p class="help-block" ng-if="!user.timezone">{{\'ST198\'|t}}</p></div><div class="col-sm-6 text-lb text-warning" ng-bind="getUserTime(user.timezone_iana)"></div></div><span class="text-muted">{{\'ST150\'|t}}</span></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0098\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-xs-6"><select ng-change="changDOB()" data-ng-model="selYear" class="form-control col-sm-1" ng-options="m as m for m in selYears"><option value="">{{\'Year\'|t}}</option></select><p class="help-block" ng-if="(selYear||selMonth||selDay) && !selYear">Please select year</p></div><div class="col-xs-3"><select ng-change="changDOB()" data-ng-model="selMonth" class="form-control" ng-options="m as m for m in selMonths"><option value="">{{\'Month\'|t}}</option></select><p class="help-block" ng-if="(selYear||selMonth||selDay) && !selMonth">Please select month</p></div><div class="col-xs-3"><select ng-change="changDOB()" data-ng-model="selDay" class="form-control" ng-options="m as m for m in selDays"><option value="">{{\'Day\'|t}}</option></select><p class="help-block" ng-if="(selYear||selMonth||selDay) && !selDay">Please select day</p></div></div></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'C0011\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-xs-6"><select class="form-control" data-ng-model="user.gender"><option value="0">{{\'UR029\'|t}}</option><option value="2">{{\'C0012\'|t}}</option><option value="1">{{\'C0013\'|t}}</option></select></div></div></div></div></div><div ng-if="isTeacher()"><hr style="margin-left: 96px"><div class="row"><p class="col-sm-9 col-sm-offset-3"><i class="fa fa-lock v-middle" aria-hidden="true"></i>&nbsp;&nbsp; <span class="text-bold v-middle">{{\'ST422\'|t}}</span></p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST054\'|t}}</label><div class="col-sm-3" style="margin-top: 6px"><span>{{user.pay_info_obj.pay_firstname}}</span></div><label class="col-sm-3 control-label">{{\'ST055\'|t}}</label><div class="col-sm-3" style="margin-top: 6px"><span>{{user.pay_info_obj.pay_lastname}}</span></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST059\'|t}}</label><div class="col-sm-9" style="margin-top: 6px"><span>{{user.pay_info_obj.pay_address}}</span></div></div></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'PM063\'|t}}</label><div class="col-sm-9"><div class="dis-flex form-group no-margin no-padding-t no-border-t"><div class="input-add-box">+</div><input class="code-input-width form-control" placeholder="{{\'ST060\'|t}}" type="text" class="form-control" ng-keyup="clearNum(user.pay_info_obj,\'pay_country_code\')" ng-model="user.pay_info_obj.pay_country_code" ng-disabled="isChangePhoneOrCountryCode()" required><hr class="separator-line"><input class="phone-input-width form-control" type="text" ng-model="user.pay_info_obj.pay_phone" ng-keyup="clearNum(user.pay_info_obj,\'pay_phone\')" ng-disabled="isChangePhoneOrCountryCode()" required></div><p class="help-block" ng-if="(!user.pay_info_obj.pay_phone || !user.pay_info_obj.pay_country_code) && !isChangePhoneOrCountryCode()">{{\'ST429\'|t}}</p></div><label class="label label-warning pull-right" style="margin-top: 10px" ng-if="isChangePhoneOrCountryCode()">{{\'ST196\'|t}}</label></div></div></div></div></div></div></div><div class="panel-footer text-right"><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055"></button></div>'),a.put("/views/user/directives/certificate.model.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'TC409\'|t}}</h4></div><div class="modal-body padding-bottom"><form><div class=""><div class="row"><label class="control-label col-md-4">{{\'TC411\'|t}}</label><div class="col-md-8"><div class="form-group"><div style="white-space:nowrap"><select class="form-control" data-ng-model="formObj.end_year.v" ng-options="m.v as m.l for m in startYears"></select></div></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC412\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.certificate,vSubFlag)}"><input type="text" ng-model="formObj.certificate.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.certificate,vSubFlag)">{{\'ST155\'|t|format:formObj.certificate.min:formObj.certificate.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC413\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.institution,vSubFlag)}"><input type="text" ng-model="formObj.institution.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.institution,vSubFlag)">{{\'ST155\'|t|format:formObj.institution.min:formObj.institution.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'RS050\'|t}}<span style="font-weight: normal">&nbsp;({{\'C0043\'|t}})</span></label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\': formObj.description.v.length>500}"><div><textarea rows="4" cols="80" name="content" ng-model="formObj.description.v" class="form-control"></textarea></div><span class="help-block" ng-show="formObj.description.v.length>500">{{\'ST155\'|t|format:formObj.description.min:formObj.description.max}}</span> <span class="text-muted">{{\'TC299\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'ST032\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!(files && files.length && checkFileType(files[0])) && !vSubFlag}"><input type="file" class="button" ng-file-select ng-model="files"> <span class="help-block" ng-show="!(files && files.length && checkFileType(files[0])) && !vSubFlag">{{\'KP304\'|t}}</span><p>{{\'TC297\'|t}}</p></div></div></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" italki-click-with-spinner="save()"></button> <button class="btn" ng-click="$dismiss()">{{\'C0056\'|t}}</button></div>'),a.put("/views/user/directives/communication.tools.html",'<div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST033\'|t}}</h4></div><div class="panel-body no-padding-hr"><div ng-if="teacher" class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST709\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="radio"><label><input type="radio" name="optionsRadios" data-ng-model="objParams.has_video_class.v" ng-value="1" class="px"> <span class="lbl">{{\'ST706\'|t}}</span></label></div><div class="radio"><label><input type="radio" name="optionsRadios" data-ng-model="objParams.has_video_class.v" ng-value="0" class="px"> <span class="lbl">{{\'ST707\'|t}}</span></label></div></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'IM101\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input type="text" ng-model="objParams.skype_account.v" ng-disabled="objParams.skype_account.f&&objParams.skype_account.p" class="form-control" rows="5"><p class="help-block" ng-if="objParams.skype_account.v&&(objParams.skype_account.v.length<4||objParams.skype_account.v.length>50)">{{\'ST155\'|t|format:3:50}}</p><p class="help-block" ng-if="allBlank">{{\'ST100\'|t}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'KP520\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input type="text" ng-model="objParams.face_time_account.v" ng-disabled="objParams.face_time_account.f&&objParams.face_time_account.p" class="form-control" rows="5"><p class="help-block" ng-if="objParams.face_time_account.v&&(objParams.face_time_account.v.length<4||objParams.face_time_account.v.length>50)">{{\'ST155\'|t|format:3:50}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'IM106\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input type="text" ng-model="objParams.google_talk_account.v" ng-disabled="objParams.google_talk_account.f&&objParams.google_talk_account.p" class="form-control" rows="5"><p class="help-block" ng-if="objParams.google_talk_account.v&&(objParams.google_talk_account.v.length<4||objParams.google_talk_account.v.length>50)">{{\'ST155\'|t|format:3:50}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">QQ</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input type="text" ng-model="objParams.qq_account.v" ng-disabled="objParams.qq_account.f&&objParams.qq_account.p" class="form-control" rows="5"><p class="help-block" ng-if="objParams.qq_account.v&&(objParams.qq_account.v.length<4||objParams.qq_account.v.length>50)">{{\'ST155\'|t|format:3:50}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">Wechat</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input type="text" ng-model="objParams.wechat_account.v" ng-disabled="objParams.wechat_account.f&&objParams.wechat_account.p" class="form-control" rows="5"><p class="help-block" ng-if="objParams.wechat_account.v&&(objParams.wechat_account.v.length<4||objParams.wechat_account.v.length>50)">{{\'ST155\'|t|format:3:50}}</p></div></div></div></div></div></div><div class="panel-footer text-right"><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="(objParams.skype_account.v&&(objParams.skype_account.v.length<4||objParams.skype_account.v.length>50))||(objParams.face_time_account.v&&(objParams.face_time_account.v.length<4||objParams.face_time_account.v.length>50))||(objParams.google_talk_account.v&&(objParams.google_talk_account.v.length<4||objParams.google_talk_account.v.length>50))||(objParams.qq_account.v&&(objParams.qq_account.v.length<4||objParams.qq_account.v.length>50))||(objParams.wechat_account.v&&(objParams.wechat_account.v.length<4||objParams.wechat_account.v.length>50))"></button></div></div>'),a.put("/views/user/directives/education.model.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'TC408\'|t}}</h4></div><div class="modal-body padding-bottom"><form><div class=""><div class="row"><label class="control-label col-md-4">{{\'TC405\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':formObj.start_year.v>formObj.end_year.v}"><div class="input-daterange input-group" id="bs-datepicker-range"><select class="form-control" ng-change="makeToYears()" data-ng-model="formObj.start_year.v" ng-options="m.v as m.l for m in startYears"></select><span class="input-group-addon">to</span><select class="form-control" data-ng-model="formObj.end_year.v" ng-options="m.v as m.l for m in endYears"></select></div><span class="help-block" ng-show="formObj.start_year.v>formObj.end_year.v">{{\'TC301\'|t}}</span> <span>{{\'TC256\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC406\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.institution,vSubFlag)}"><input type="text" ng-model="formObj.institution.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.institution,vSubFlag)">{{\'ST155\'|t|format:formObj.institution.min:formObj.institution.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC407\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.major,vSubFlag)}"><input type="text" ng-model="formObj.major.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.major,vSubFlag)">{{\'ST155\'|t|format:formObj.major.min:formObj.major.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'ST095\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!formObj.level.v && !vSubFlag}"><select data-ng-model="formObj.level.v" class="form-control"><option value="">{{\'C0061\'|t}}</option><option value="1">{{\'ST015\'|t}}</option><option value="2">{{\'ST016\'|t}}</option><option value="3">{{\'ST017\'|t}}</option><option value="4">{{\'ST018\'|t}}</option><option value="5">{{\'ST019\'|t}}</option></select><span class="help-block" ng-show="!formObj.level.v && !vSubFlag">{{\'TC300\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'RS050\'|t}}&nbsp<span style="font-weight: normal">({{\'C0043\'|t}})</span></label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\': formObj.description.v.length>500}"><div><textarea rows="4" cols="80" name="content" ng-model="formObj.description.v" class="form-control"></textarea></div><span class="help-block" ng-show="formObj.description.v.length>500">{{\'ST155\'|t|format:formObj.description.min:formObj.description.max}}</span> <span class="text-muted">{{\'TC296\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'ST032\'|t}}&nbsp;<span style="font-weight: normal">({{\'C0043\'|t}})</span></label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!(files && files.length && checkFileType(files[0])) && !vSubFlag}"><input type="file" class="button" ng-file-select ng-model="files"> <span class="help-block" ng-show="(files && files.length && !checkFileType(files[0])) && !vSubFlag">{{\'KP304\'|t}}</span><p>{{\'TC297\'|t}}</p></div></div></div></div></form></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="save()"></button></div>'),
a.put("/views/user/directives/experience.model.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'TC410\'|t}}</h4></div><div class="modal-body padding-bottom"><form><div class=""><div class="row"><label class="control-label col-md-4">{{\'TC414\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':formObj.start_year.v>formObj.end_year.v}"><div class="input-daterange input-group" id="bs-datepicker-range"><select class="form-control" ng-change="makeToYears()" data-ng-model="formObj.start_year.v" ng-options="m.v as m.l for m in startYears"></select><span class="input-group-addon">to</span><select class="form-control" data-ng-model="formObj.end_year.v" ng-options="m.v as m.l for m in endYears"></select></div><span class="help-block" ng-show="formObj.start_year.v>formObj.end_year.v">{{\'TC301\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC415\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.company,vSubFlag)}"><input type="text" ng-model="formObj.company.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.company,vSubFlag)">{{\'ST155\'|t|format:formObj.company.min:formObj.company.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'TC416\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.job,vSubFlag)}"><input type="text" ng-model="formObj.job.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.job,vSubFlag)">{{\'ST155\'|t|format:formObj.job.min:formObj.job.max}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'C0014\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!formObj.country_id.v && !vSubFlag}"><select data-ng-model="formObj.country_id.v" class="form-control" ng-options="m.v as m.l for m in countries"><option value="">{{\'C0061\'|t}}</option></select><span class="help-block" ng-show="!formObj.country_id.v && !vSubFlag">{{\'C3020\'|t}}</span></div></div></div><div class="row"><label class="control-label col-md-4">{{\'C0015\'|t}}</label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\':!vv(formObj.city,vSubFlag)}"><input type="text" ng-model="formObj.city.v" class="form-control"> <span class="help-block" ng-show="!vv(formObj.city,vSubFlag)">{{\'ST155\'|t|format:formObj.city.min:formObj.city.max}}</span><p class="">{{\'TC257\'|t}}</p></div></div></div><div class="row"><label class="control-label col-md-4">{{\'RS050\'|t}}<span style="font-weight: normal">&nbsp;({{\'C0043\'|t}})</span></label><div class="col-md-8"><div class="form-group" ng-class="{\'has-error\': formObj.description.v.length>500}"><div><textarea rows="4" cols="80" name="content" ng-model="formObj.description.v" class="form-control"></textarea></div><span class="help-block" ng-show="formObj.description.v.length>500">{{\'ST155\'|t|format:formObj.description.min:formObj.description.max}}</span> <span class="text-muted">{{\'TC298\'|t}}</span></div></div></div></div></form></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="save()"></button></div>'),a.put("/views/user/directives/language.html",'<style>.ui-select-toggle{\n    padding: 0px;\n    height: 20px;\n  }\n  .fa-angle-down{\n    padding-top: 2px;\n  }\n  .ui-select-search{\n    padding-left: 4px;\n    margin-top: -5px;\n    height: 31px;\n    transform: scale(0.96,0.94);\n  }\n  .select-native-language .ui-select-dropdown{\n    box-shadow: none !important;\n  }\n  .select-language .ui-select-dropdown{\n    box-shadow: none !important;\n  }\n  @media(min-width:1200px){\n    .select-native-language .ui-select-choices{\n      transform: scale(1.16,1) !important;\n    }\n    .select-language .ui-select-choices{\n      transform: scale(1.16,1) !important;\n    }\n  }\n  @media(max-width:1199px) and (min-width:768px){\n    .select-native-language .ui-select-choices{\n      transform: scale(1.15,1) !important;\n    }\n  }\n  @media(max-width:991px) and (min-width:768px){\n    .select-native-language .dropdown-menu{\n      min-width: 156px !important;\n    }\n    .select-native-language .ui-select-choices{\n       left: 0 !important;\n    }\n\n  }\n  @media(max-width:991px) {\n    .select-native-language  .ui-select-choices{\n      transform: scale(1.16,1) !important;\n    }\n  }\n  @media(max-width:1199px) and (min-width:993px){\n    .select-language  .ui-select-choices{\n      transform: scale(0.93, 1) !important;\n      left: -18px;\n    }\n  }\n  @media(max-width:992px) and (min-width:767px){\n    .select-language  .ui-select-choices{\n      transform: scale(0.7, 1) !important;\n      left: -38px !important;\n    }\n  }\n  @media(max-width:320px){\n    .select-language .ui-select-choices{\n      transform: scale(1.13,1) !important;\n    }\n  }\n  .ui-select-match{\n    width: 100%;\n  }\n  .select-native-language .ui-select-toggle{\n    overflow: hidden;\n    padding-right: 10px;\n  }\n  .select-native-language .fa-angle-down{\n    position: absolute;\n    right: 0;\n  }\n  .select-language .ui-select-toggle{\n    overflow: hidden;\n    padding-right: 10px;\n  }\n  .select-language .fa-angle-down{\n    position: absolute;\n    right: 0;\n  }</style><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'C0000\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST187\'|t}}</label><div class="col-sm-9"><ul class="list-inline no-margin top"><li ng-repeat="item in user.speaks track by $index"><span class="label label-languages"><span ng-bind="item|t"></span> <button ng-if="!isChange()" type="button" class="close small" data-dismiss="alert" ng-click="removeNative(item)">×</button></span></li><li ng-if="add_native_flag"><div class="form-control select-native-language"><ui-select ng-model="uiItems" theme="bootstrap" on-select="uiSelected($item, $model)"><ui-select-match placeholder="{{\'UR022\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'UR022\'|t)"></span></ui-select-match><ui-select-choices repeat="lan in lans|filter: {status:1}|propsFilter: {name: $select.search, v: $select.search}"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><span ng-if="native_error" class="help-block">{{\'C3020\'|t}}</span></li></ul><a href="javascript:void(0)" ng-click="addNativeFn()" ng-if="lansLenCheck()&&!isChange()&&!add_native_flag">+ {{\'ST192\'|t}}</a> <a href="javascript:void(0)" ng-click="removeCancel()" ng-if="lansLenCheck()&&!isChange()&&add_native_flag">- {{\'C0056\'|t}}</a></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border"><div class="row hidden-phone"><div class="col-sm-3">&nbsp;</div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="row"><div class="col-sm-4">&nbsp;</div><div class="col-sm-4">&nbsp;</div><div class="col-sm-2 text-center"><strong>{{\'C0007\'|t}}</strong></div><div class="col-sm-2 text-center"><strong>{{\'ST028\'|t}}</strong></div></div></div><div class="col-sm-3">&nbsp;</div></div></div></div><div class="row"><label class="col-sm-3 control-label">{{\'ST194\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="row" style="margin-bottom: 10px" ng-repeat="item in user.learns track by $index"><div class="col-sm-4"><div class="form-control select-language"><ui-select ng-model="item.selLan" theme="bootstrap" on-select="uiSelected1($item, $model, item, $index)"><ui-select-match placeholder="{{\'C0061\'|t}}"><span ng-bind-html="$select.selected.v?($select.selected.v|t):(\'C0061\'|t)"></span></ui-select-match><ui-select-choices class="kp-adjust-select-scale" repeat="lan in lans| filter: {status:1}|propsFilter: {name: $select.search, v: $select.search }"><div ng-bind-html="(lan.v?lan.v:lan.name)|t| highlight: $select.search"></div></ui-select-choices></ui-select></div><span ng-if="addMoreErrorFlag&&!item.language" class="help-block">{{\'C3020\'|t}}</span></div><div class="col-sm-4"><select class="form-control" data-ng-model="item.level"><option value="0">{{\'C0018\'|t}}</option><option value="1">A1:{{\'C0019\'|t}}</option><option value="2">A2:{{\'C0020\'|t}}</option><option value="3">B1:{{\'C0903\'|t}}</option><option value="4">B2:{{\'C0021\'|t}}</option><option value="5">C1:{{\'C0905\'|t}}</option><option value="6">C2:{{\'C0022\'|t}}</option></select><p class="help-block" ng-if="addMoreErrorFlag&&(!item.level||item.level==0)">{{\'KP100\'|t}}</p></div><div class="col-sm-2 text-center"><label class="margin30"><input type="checkbox" data-ng-model="item.is_learning" ng-false-value="0" ng-true-value="1" class="px"> <span class="lbl">&nbsp;</span><span class="lbl visible-phone"><strong>{{\'C0007\'|t}}</strong></span></label></div><div class="col-sm-2 text-center"><label class="margin30"><input type="radio" name="rdoPrimary" data-ng-model="item.is_primary" ng-checked="item.is_primary" ng-false-value="0" ng-true-value="1" ng-click="setPrimary(user.learns,item)" class="px"> <span class="lbl">&nbsp;</span><span class="lbl visible-phone"><strong>{{\'ST028\'|t}}</strong></span></label></div><div class="col-sm-2 text-center"><a ng-if="user.learns&&user.learns.length>1&&!isChange()" href="javascript:void(0)" ng-click="removeLans($index)">{{\'C0049\'|t}}</a></div></div></div><div class="col-sm-3 text-right" ng-if="isTeacher()"><label class="label label-warning" ng-if="isChange()">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!isChange()">{{\'ST127\'|t}}</label></div></div></div></div><div class="row"><div class="col-sm-3">&nbsp;</div><div class="col-sm-9"><a href="javascript:void(0)" ng-click="addMoreLan()" ng-if="lansLenCheck()&&!isChange()">+ {{\'ST190\'|t}}</a></div></div></div></div><div class="panel-footer text-right" ng-if="!isChange()"><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055"></button></div></div>'),a.put("/views/user/directives/profile.oxford.html",'<div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'KP284\'|t}}</h4></div><div class="panel-body" ng-show="!displayOET"><a ui-sref="oet">{{\'KP285\'|t}}</a></div><div class="panel-body" ng-show="displayOET"><div class="panel-body"><table class="table"><thead><tr><th>{{\'ST058\'|t}}&nbsp; <i class="fa fa-question-circle ng-scope" tooltip="The Public checkbox controls whether you\'d like to display expanded test scores on your profile. Please note that this is different from selecting a Profile - for example, if you select a Profile but uncheck a checkbox, your Oxford Placement Test badge will still appear to other users, but detailed test scores will not be."></i></th><th>{{\'M0041\'|t}}&nbsp; <i class="fa fa-question-circle ng-scope" tooltip="You can select a badge to display on your profile. Alternatively, you can also choose to not display your badge by selecting the last option - \'Do not display any tests on my italki profile\'."></i></th><th>{{\'ML213\'|t}}</th><th>{{\'KP534\'|t}}</th><th>{{\'C0018\'|t}}</th></tr></thead><tbody><tr ng-repeat="item in oet.exam_result_obj_s track by $index"><td><label class="margin30"><input type="checkbox" ng-disabled="currentUrlId != item.url_id || disableCheckbox" ng-model="item.is_shown" ng-false-value="\'0\'" ng-true-value="\'1\'" class="px" ng-click="registerCheckbox(item.url_id, $index)"><span class="lbl">&nbsp;</span></label></td><td><label class="margin30"><input type="radio" name="optionsRadios" ng-false-value="0" ng-true-value="1" class="px" ng-model="displayValue" ng-value="item.url_id" ng-click="registerClick(item.url_id)"><span class="lbl">&nbsp;</span></label></td><td>{{\'KP284\'|t}} <a ui-sref="oet">{{\'KP531\'|t}}</a></td><td>{{item.exam_date|amDate:\'TF002\'}}</td><td>{{item.level}}</td></tr><tr><td></td><td><label class="margin30"><input type="radio" name="optionsRadios" ng-model="displayValue" ng-value="\'false\'" class="px" ng-click="registerClick(\'noDisplay\')"><span class="lbl">&nbsp;</span></label></td><td>{{\'KP286\'|t}}</td><td></td><td></td></tr></tbody></table></div><div class="panel-footer text-right"><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled=""></button></div></div></div>'),a.put("/views/user/directives/resume.cv.html",'<div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'PB014\'|t}} & CV</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'PB011\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="experience in eduExpCer.experience_obj_s"><span class="pull-right"><p class="label label-success" ng-if="experience.status==1">{{\'ST127\'|t}}</p><p class="label label-warning" ng-if="experience.status==0">{{\'ST196\'|t}}</p><span class="label label-danger" ng-if="experience.status==2">{{\'ST039\'|t}}</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveExperience(experience,$index)"></i></span><ul class="list-inline text-bold"><li><strong>{{experience.job}}</strong></li><li><strong>{{experience.company}}</strong></li></ul><ul class="list-inline text-muted"><li>{{experience.start_year}} - {{(experience.end_year==2155||experience.end_year==2025)?(\'ST027\'|t):experience.end_year}}</li><li>{{experience.job}}</li>{{experience.city}}<li>{{experience.country|t}}</li></ul>{{experience.description|replaceLineToBr}}</div><a href="javascript:void(0)" ng-click="addExperience()">+ {{\'C0044\'|t}}</a></div></div></div><div class="form-group no-margin-hr panel-padding-h no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'PB012\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="education in eduExpCer.education_obj_s"><span class="pull-right"><span class="label label-success" ng-if="education.status==1">{{\'ST127\'|t}}</span> <span class="label label-warning" ng-if="education.status==0">{{\'ST196\'|t}}</span> <span class="label label-danger" ng-if="education.status==2">{{\'ST039\'|t}}</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveEducation(education,$index)"></i></span> <strong ng-switch="education.level"><span class="label label-warning" ng-switch-when="1">{{\'ST015\'|t}}</span> <span class="label label-info" ng-switch-when="2">{{\'ST016\'|t}}</span> <span class="label label-dark-gray" ng-switch-when="3">{{\'ST017\'|t}}</span> <span class="label label-success" ng-switch-when="4">{{\'ST018\'|t}}</span> <span class="label label-success" ng-switch-when="5">{{\'ST019\'|t}}</span></strong><br><strong ng-bind="education.major"></strong><br><span class="text-muted" ng-bind="education.institution|replaceLineToBr"></span><br><span class="text-light-gray">{{education.start_year}} - {{education.end_year}}</span></div><a href="javascript:void(0)" ng-click="addEducation()">+ {{\'C0044\'|t}}</a></div></div></div><div class="form-group no-margin-hr panel-padding-h no-border-t"><div class="row"><label class="col-sm-3 text-right">{{\'PB013\'|t}}</label><div class="col-sm-9"><div class="grid-gutter-margin-b" ng-repeat="cert in eduExpCer.certificate_obj_s"><span class="pull-right"><span class="label label-success" ng-if="cert.status==1">{{\'ST127\'|t}}</span> <span class="label label-warning" ng-if="cert.status==0">{{\'ST196\'|t}}</span> <span class="label label-danger" ng-if="cert.status==2">{{\'ST039\'|t}}</span> <i class="fa fa-trash-o yes-cursor" ng-click="moveCertificate(cert,$index)"></i></span> <strong><span ng-bind="cert.end_year"></span><br><span ng-bind="cert.certificate"></span></strong><br><span class="text-muted" ng-bind="cert.institution"></span><br><span ng-bind="cert.description|replaceLineToBr"></span></div><a href="javascript:void(0)" ng-click="addCertificate()">+ {{\'C0044\'|t}}</a></div></div></div></div></div>'),a.put("/views/user/directives/student.profile.information.html",'<div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST730\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST731\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input ng-model="objParams.interest.v" ng-disabled="objParams.interest.f&&objParams.interest.p" type="text" class="form-control" placeholder="{{\'\'|t}}"><p class="help-block" ng-if="objParams.interest.v&&(objParams.interest.v.length<10||objParams.interest.v.length>250)">{{\'ST155\'|t|format:10:250}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST732\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><textarea ng-model="objParams.intro.v" ng-disabled="objParams.intro.f&&objParams.intro.p" class="form-control" rows="5"></textarea><p class="help-block" ng-if="objParams.intro.v&&(objParams.intro.v.length<10||objParams.intro.v.length>250)">{{\'ST155\'|t|format:10:250}}</p></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST733\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><textarea ng-model="objParams.introduction.v" ng-disabled="objParams.introduction.f&&objParams.introduction.p" class="form-control" rows="10"></textarea><p class="help-block" ng-if="objParams.introduction.v&&(objParams.introduction.v.length<10||objParams.introduction.v.length>2000)">{{\'ST155\'|t|format:10:2000}}</p></div></div></div></div></div></div><div class="panel-footer text-right"><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="(objParams.interest.v&&(objParams.interest.v.length<10||objParams.interest.v.length>250))||(objParams.intro.v&&(objParams.intro.v.length<10||objParams.intro.v.length>250))||(objParams.introduction.v&&(objParams.introduction.v.length<10||objParams.introduction.v.length>2000))"></button></div></div>'),a.put("/views/user/directives/student.session.with.teacher.html",'<ul class="list-unstyled no-margin"><li ng-repeat="item in items" style="padding-bottom: 10px"><ul class="list-inline"><li><span class="text-muted">{{item.learn_language|t}}</span></li><li><span class="text-muted">{{item.session_start_time_user|amDate:\'TF002\'}}</span></li></ul><span ng-if="item.teacher_comment">{{item.teacher_comment||\'\'}}</span></li></ul><div ng-if="data.session_count>1&&!meta"><a ng-click="loadMore()">+{{data.session_count-1}} {{\'C0040\'|t}}</a></div><div ng-if="meta && meta.has_next"><a ng-click="loadMore()" ng-bind="\'MH046\'|t"></a></div>'),a.put("/views/user/directives/teacher.cancellation.policy.html",'<div class="panel form-horizontal form-bordered teacher-upload-panel"><form name="policyForm" novaildate><div class="panel-heading"><h4>{{\'ST423\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><p>{{\'ST424\'|t}}</p><div class="row"><div class="col-sm-9"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="ui-textarea-container" ng-style="{\'background-color\':isChangePolicy()?\'#eeeeee\':\'\'}"><textarea class="ui-textarea form-control" name="cancel_policy" ng-model="teacher.teacher_info_obj.cancel_policy" rows="5" ng-disabled="isChangePolicy()" placeholder="{{\'ST426\'|t}}" maxlength="700" ng-focus>\n             </textarea><div class="ui-textarea-warn" ng-show="teacher.teacher_info_obj.cancel_policy.length<10 && policyForm.cancel_policy.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{teacher.teacher_info_obj.cancel_policy.length}}/700</span></div><div></div></div></div></div><div class="col-md-3"><label class="label label-warning pull-right" style="margin-top: 10px" ng-if="isChangePolicy()">{{\'ST196\'|t}}</label></div></div></div></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="!checkPolicy()"></button></li></ul></div></form></div>'),a.put("/views/user/directives/teacher.profile.Introduction.html",'<div class="panel form-horizontal form-bordered teacher-upload-panel"><form name="introForm" novaildate><div class="panel-heading"><h4>{{\'ST400\'|t}}</h4></div><div class="panel-body"><div class="row"><div class="col-sm-9"><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST402\'|t}}</div><div class="ui-textarea-container" ng-style="{\'background-color\':isChangeTeacherObj()?\'#eeeeee\':\'\'}"><textarea class="ui-textarea form-control" name="about_me" ng-model="teacherIntroduction.about_me" rows="10" ng-disabled="isChangeTeacherObj()" placeholder="{{\'ST403\'|t}}" maxlength="700" ng-focus>\n             </textarea><div class="ui-textarea-warn" ng-show="teacherIntroduction.about_me.length<10 && introForm.about_me.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{teacherIntroduction.about_me.length}}/700</span></div></div><p ng-if="submitFlag && teacherIntroduction.about_me.length<10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST404\'|t}}</div><div class="ui-textarea-container" ng-style="{\'background-color\':isChangeTeacherObj()?\'#eeeeee\':\'\'}"><textarea class="ui-textarea form-control" name="about_teacher" ng-model="teacherIntroduction.about_teacher" rows="10" ng-disabled="isChangeTeacherObj()" placeholder="{{\'ST405\'|t}}" maxlength="500" ng-focus>\n             </textarea><div class="ui-textarea-warn" ng-show="teacherIntroduction.about_teacher.length<10 && introForm.about_teacher.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{teacherIntroduction.about_teacher.length}}/500</span></div></div><p ng-if="submitFlag && teacherIntroduction.about_teacher.length<10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST406\'|t}}</div><div class="ui-textarea-container" ng-style="{\'background-color\':isChangeTeacherObj()?\'#eeeeee\':\'\'}"><textarea class="ui-textarea form-control" name="teaching_style" ng-model="teacherIntroduction.teaching_style" rows="10" ng-disabled="isChangeTeacherObj()" placeholder="{{\'ST407\'|t}}" maxlength="500" ng-focus>\n             </textarea><div class="ui-textarea-warn" ng-show="teacherIntroduction.teaching_style.length<10 && introForm.teaching_style.$focused">{{\'ST025\'|t|format:10}}</div><div class="ui-textarea-counter"><span>{{teacherIntroduction.teaching_style.length}}/500</span></div></div><p ng-if="submitFlag && teacherIntroduction.teaching_style.length<10" class="help-block">{{\'C1033\'|t | format:10}}</p></div><div class="form-group no-margin-hr no-padding-t no-border-t"><div class="long-form-title">{{\'ST408\'|t}} <span ng-if="submitFlag && !checkMaterial()" class="text-danger">{{\'PM420\'|t}}</span></div><p class="sub-text">{{\'ST409\'|t}}</p><div><div class="row no-margin-hr panel-padding-h"><div class="col-md-4 col-sm-6" ng-repeat="material in teacher_material_json"><label><input type="checkbox" ng-model="material.check" class="px" ng-disabled="isChangeTeacherObj()"> <span class="lbl lbl2" style="font-weight: initial">{{material.name | t}}</span></label></div></div></div></div></div><div class="col-sm-3 text-right"><label class="label label-warning" ng-if="isChangeTeacherObj()">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!teacherObjIsNull()&&!isChangeTeacherObj()">{{\'ST127\'|t}}</label></div></div></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="isChangeTeacherObj()"></button></li></ul></div></form></div>'),a.put("/views/user/directives/teacher.profile.information.html",'<div class="panel form-horizontal form-bordered teacher-upload-panel"><div class="panel-heading"><h4>{{\'KP225\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'PB074\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input ng-model="objParams.interest.v" ng-disabled="objParams.interest.f&&objParams.interest.p" type="text" class="form-control" placeholder="{{\'\'|t}}"><p class="help-block" ng-if="objParams.interest.v&&(objParams.interest.v.length<10||objParams.interest.v.length>250)">{{\'ST155\'|t|format:10:250}}</p></div><div class="col-sm-3 text-right"><label class="label label-warning" ng-if="objParams.interest.f&&objParams.interest.p">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!objParams.interest.f&&objParams.interest.r&&objParams.interest.p">{{\'ST127\'|t}}</label></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'KP226\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><textarea ng-model="objParams.intro.v" ng-disabled="objParams.intro.f&&objParams.intro.p" class="form-control" rows="5"></textarea><p class="help-block" ng-if="objParams.intro.v&&(objParams.intro.v.length<10||objParams.intro.v.length>250)">{{\'ST155\'|t|format:10:250}}</p></div><div class="col-sm-3 text-right"><label class="label label-warning" ng-if="objParams.intro.f&&objParams.intro.p">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!objParams.intro.f&&objParams.intro.r&&objParams.intro.p">{{\'ST127\'|t}}</label></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'KP227\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><textarea ng-model="objParams.introduction.v" ng-disabled="objParams.introduction.f&&objParams.introduction.p" class="form-control" rows="10"></textarea><p class="help-block" ng-if="objParams.introduction.v&&(objParams.introduction.v.length<20||objParams.introduction.v.length>2000)">{{\'ST155\'|t|format:10:2000}}</p></div><div class="col-sm-3 text-right"><label class="label label-warning" ng-if="objParams.introduction.f&&objParams.introduction.p">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!objParams.introduction.f&&objParams.introduction.r&&objParams.introduction.p">{{\'ST127\'|t}}</label></div></div></div></div></div></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="(objParams.video_url.v&&(!isURL(objParams.video_url.v)||objParams.video_url.v.length>200))||(objParams.interest.v&&(objParams.interest.v.length<10||objParams.interest.v.length>250))||(objParams.intro.v&&(objParams.intro.v.length<10||objParams.intro.v.length>250))||(objParams.introduction.v&&(objParams.introduction.v.length<20||objParams.introduction.v.length>2000))"></button></li></ul></div></div>'),a.put("/views/user/directives/teacher.selftagging.html",'<style>.tagarea {\n    display: none;\n  }\n\n  .tag-box {\n    list-style: none;\n    padding: 3px;\n    margin: 0;\n    display: inline-block;\n    font-family: arial;\n    width: 100%;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n  .tag-box * {\n    -webkit-transition-property: all;\n    transition-property: all;\n    -webkit-transition-duration: 0.3s;\n    transition-duration: 0.3s;\n  }\n  .tag-box li {\n    padding: 0px 6px;\n    float: left;\n    display: inline-block;\n  }\n  .tag-box li.tags {\n    background: #F1C617;\n    background-color: #428bca;\n    color: #fff;\n    border-radius: 4px;\n    margin: 4px 3px;\n    position: relative;\n  }\n  .tag-box li.tags .close {\n    display: inline-block;\n    position: absolute;\n    color: #E7832B;\n    overflow: hidden;\n    width: 0;\n    right: 0;\n    height: 18px;\n    cursor: pointer;\n    top: 4px;\n  }\n  .tag-box li.tags:after {\n    content: \' x\';\n  }\n  .tag-box li.tags.edit {\n    background: none;\n    border: 1px solid #F1C617;\n    color: #F1C617;\n  }\n  .tag-box li.tags.edit .input-tag {\n    height: auto;\n  }\n  .tag-box li.tags.edit:hover {\n    padding: 4px 6px;\n  }\n\n  .tag-box li.tags:hover .close {\n    width: 14px;\n  }\n  .tag-box li .input-tag {\n    color: #000;\n    height: 24px;\n    vertical-align: middle;\n    border: none;\n    outline: none;\n    background: none;\n  }\n  .tag-box li .input-tag:hover, .tag-box li .input-tag:focus {\n    outline: none;\n    border: none;\n  }\n  .drag-handle {\n    margin-right: 10px;\n    /*font: bold 20px Sans-Serif;*/\n    /*color: #5F9EDF;*/\n    display: inline-block;\n    cursor: move;\n    cursor: -webkit-grabbing;\n  }\n\n\n  /* angularJs tagbox*/{}\n  .tag-badge{\n    background-color: #328DC8;\n    color: #fff;\n    border-radius: 4px;\n    margin: 4px 3px;\n    position: relative;\n    border: 0px;\n    padding: 0px 6px;\n    display: inline-block;\n    font-size: 13px;\n  }\n\n\n  .tag-remove{\n    color: #ffffff;\n  }</style><div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'TG202\'|t}}</h4></div><div class="panel-body"><p>{{\'TG203\'|t}}</p><p>{{\'TG204\'|t}}</p><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><label class="control-label col-sm-3">{{\'TG205\'|t}}</label><div class="col-sm-9"><div class=""><div class="row"><div class="col-md-9"><div class="card" ng-cloak><input placeholder="{{\'TG102\'|t}}" maxlength="20" class="form-control" data-tag-input="" ng-model="tagText" ng-style="{width: inputWidth}" new-tag="addTag(tagText)" remove-tag="removeTag()" type="text" ng-disabled="tags.length>=10"><div id="tag-box" ng-sortable=""><div class="tag tag-badge" ng-repeat="(id,tag) in tags"><span class="drag-handle">☰</span> {{ tag.tag_name }} <a class="tag-remove" ng-click="removeTag(id)">&times;</a></div></div></div></div></div></div><div class="note note-info" style="margin-top: 10px">{{\'TG206\'|t}}&nbsp;<a target="_blank" href="http://support.italki.com/hc/en-us/articles/115000173007-What-are-Endorsements">{{\'C0171\'|t}}</a></div></div></div><hr><h4>{{\'TG103\'|t}}</h4><p class="grid-gutter-margin-b">{{\'TG104\'|t}}&nbsp;<a target="_blank" href="http://support.italki.com/hc/en-us/articles/115000173007-What-are-Endorsements">{{\'C0171\'|t}}</a></p><ul class="endorsement-container" style="list-style-type:none;padding-left:0"><li class="endorsement-item" ng-repeat="tag in tags | orderBy:\'-vote_count\'"><span class="label endorsement-count">{{tag.vote_count}}</span> <span class="tag-badge endorsement-name">{{tag.tag_name}}</span></li></ul></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055"></button></li></ul></div></div>'),a.put("/views/user/directives/teacher.tags.html",'<div class="panel form-horizontal form-bordered"><div class="panel-heading"><h4>{{\'ST700\'|t}}</h4></div><div class="panel-body"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class=""><p ng-repeat="item in tags"><label><input type="checkbox" ng-model="item.checked" class="px"> <span class="lbl"><span ng-bind="item.t|t "></span>: <span ng-bind="item.d|t"></span><br><em class="text-muted"></em></span></label></p></div><div ng-if="tags[4].checked" style="padding: 15px; display: block; background:#efefef"><p>{{\'ST721\'|t}}</p><div class="row grid-gutter-margin-b"><div class="col-sm-2" ng-repeat="item in childTags" style="padding-left: 30px"><label tooltip="{{item.full_name}}"><input type="checkbox" ng-model="item.checked" class="px"> <span class="lbl"><span ng-bind="item.abbr|t "></span></span></label></div></div><em class="text-muted">{{\'TC245\'|t}} <a href="http://support.italki.com/home" target="_blank">support@italki.com</a> {{\'TC247\'|t}}</em></div></div><div ng-if="teacher&&teacher.teacher_change_obj&&(teacher.teacher_change_obj.teacher_tags||teacher.teacher_change_obj.teacher_child_tags)"><ul class="list-inline no-margin"><li><label class="label label-warning">{{\'ST196\'|t}}</label></li><li ng-repeat="item in teacher.teacher_change_obj.teacher_tags.split(\',\') track by $index" ng-if="teacher.teacher_change_obj.teacher_tags"><span class="label label-tags"><span ng-bind="getTagsLabel(item)"></span></span></li><li ng-repeat="item in teacher.teacher_change_obj.teacher_child_tags.split(\',\') track by $index" ng-if="teacher.teacher_change_obj.teacher_child_tags"><span class="label label-tags"><span ng-bind="getChildTagsLabel(item)"></span></span></li></ul></div></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055"></button></li></ul></div></div>'),
a.put("/views/user/directives/teacher.upload.video.html",'<div class="panel form-horizontal form-bordered teacher-upload-panel"><a name="videoupload"></a><div class="panel-heading"><h4 style="text-transform:Capitalize">{{\'ST450\'|t}}</h4></div><div class="panel-body no-padding-hr"><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-12"><div ng-if="!teacher.oms_apply_video_url" class="alert alert-danger text-left is-relative">{{\' ST617\'|t}}&nbsp; <a href="http://support.italki.com/hc/en-us/articles/115000101873" target="_blank">{{\'C0171\'|t}}</a></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div role="tabpanel" class="tab-pane fade in active" id="demo" aria-labelledby="demo-tab"><div class="row"><div class="col-sm-9 col-sm-offset-3" style="margin-bottom: 25px"><kp-upload-video page-name="pageName" have-upload-video="haveUploadVideo"></kp-upload-video></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><label class="col-sm-3 control-label">{{\'ST600\'|t}}</label><div class="col-sm-9"><div class="row"><div class="col-sm-9"><input ng-model="video_url.v" ng-disabled="(video_url.f && video_url.p)" type="text" class="form-control" placeholder="{{\'TP204\'|t}}"><p class="help-block" ng-if="video_url.v&&(!isURL(video_url.v)||video_url.v.length>200)">{{\'ST317\'|t}}</p><span class="text-muted">{{\'TA327\'|t}}</span></div><div class="col-sm-3 text-right"><label class="label label-warning" ng-if="video_url.f && video_url.p">{{\'ST196\'|t}}</label><label class="label label-success" ng-if="!video_url.f && video_url.r && video_url.p">{{\'ST127\'|t}}</label></div></div></div></div></div><div class="form-group no-margin-hr panel-padding-h no-padding-t no-border-t"><div class="row"><div class="col-sm-12 clearfix"><img class="share-icon" src="/static/images/icons/video_share_icon.png"><div class="share-text"><label class="control-label no-padding-t">{{\'ST601\'|t}}</label><ul class="text-muted" style="padding-left: 20px"><li>{{\'ST603\'|t}}</li><li>{{\'ST604\'|t|format:500}}</li><li ng-bind-html="\'ST428\'|t|trustAsHtml"></li></ul></div></div></div></div></div><div class="panel-footer text-right"><ul class="list-inline no-margin-b"><li class="text-muted">{{\'KP228\'|t}}</li><li><button class="btn btn-primary" italki-click-with-spinner="save()" stext="C0055" ng-disabled="video_url.v&&(!isURL(video_url.v)||video_url.v.length>200)"></button></li></ul></div></div>'),a.put("/views/user/directives/user.avatar.edit.html",'<div class="modal-header"><button type="button" class="close" aria-hidden="true" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{\'ST034\'|t}}</h4></div><div class="modal-body padding-bottom"><form><div class="panel-body"><div class="row"><div class="form-group" ng-class="{\'has-error\':!(files && files.length && checkFileType(files[0])) && !vSubFlag}"><input type="file" class="form-control" ng-file-select accept="image/*" ng-model="files" ng-change="setImage(files)"> <span class="help-block" ng-show="!(files && files.length && checkFileType(files[0])) && !vSubFlag">{{\'ST311\'|t}}</span></div></div><p><strong>{{\'ST041\'|t}}</strong></p><div class="row"><div class="col-md-8" style="background: #eee; overflow: hidden;width:300px;height:300px"><img-crop image="myImage" result-image="myCroppedImage"></img-crop></div><div class="col-md-4" style="width: 200px;height: 200px"><img class="rounded" ng-src="{{myCroppedImage}}"></div></div></div></form></div><div class="modal-footer"><button class="btn" ng-click="$dismiss()">{{\'C0056\'|t}}</button> <button class="btn btn-primary" italki-click-with-spinner="save()" fmsg="{{\'C1015\'|t}}" stext="ST044"></button></div>'),a.put("/views/user/editprofile.html",'<div ng-if="isSelf()"><h2 class="grid-gutter-margin-b" ng-if="currentUser.is_teacher">{{\'MH032\'|t}}</h2><h2 class="grid-gutter-margin-b" ng-if="!currentUser.is_teacher">{{\'MH031\'|t}}</h2><div class=""><div class="panel no-margin-b no-border-b"><kp-teacher-nav-li></kp-teacher-nav-li></div><div class="panel form-horizontal form-bordered loading-layout no-border-t"><kp-user-basic-information user="user" ng-if="user"></kp-user-basic-information><kp-loading indicator="user"></kp-loading></div><kp-user-language user="user" ng-if="user"></kp-user-language><kp-user-profile-oxford user="user" ng-if="user"></kp-user-profile-oxford><kp-user-teacher-tags teacher="teacher" user="user" ng-if="teacher"></kp-user-teacher-tags><kp-user-teacher-selftagging teacher="teacher" user="user" ng-if="teacher"></kp-user-teacher-selftagging><kp-teacher-video teacher="teacher" ng-if="teacher"></kp-teacher-video><kp-user-teacher-profile-introduction teacher="teacher" ng-if="teacher"></kp-user-teacher-profile-introduction><kp-user-teacher-profile-information teacher="teacher" ng-if="teacher&&!teacher.teacher_info_obj.about_me"></kp-user-teacher-profile-information><kp-user-student-profile-information user="user" ng-if="user"></kp-user-student-profile-information><kp-user-communication-tools user="user" teacher="teacher" ng-if="user||teacher"></kp-user-communication-tools><kp-user-resume-cv teacher="teacher" ng-if="user.is_pro==1"></kp-user-resume-cv><kp-teacher-cancellation-policy teacher="teacher" ng-if="teacher"></kp-teacher-cancellation-policy></div></div>'),a.put("/views/user/modal/profile.badges.html",'<div class="modal-header"><style>@media (max-width: 480px){\n       .badge-item{\n         padding-left:5px;\n         padding-right:5px;\n       }\n    }</style><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'BD404\'|t}}</h4></div><div class="modal-body modal-list"><div class="panel-body loading-layout"><kp-loading indicator="badgeItems"></kp-loading><div class="row"><div class="col-sm-4 col-xs-6 grid-gutter-margin-b badge-item" ng-repeat="badge in badgeItems"><div class="badge-box text-center" style="padding:10px; border: 1px solid #333"><p><img ng-src="{{\'/static/images/badges/\'+ badge.img +\'_badge.svg\'}}" width="100"></p><p><strong>{{badge.title|t}}</strong></p><span>{{badge.subtitle|t|format:badge.hours}}</span></div></div></div></div></div>'),a.put("/views/user/modal/profile.discussions.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'GP020\'|t}}</h4></div><div class="modal-body modal-list"><div class="loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="article-item yes-cursor cursor-over" ui-sref="discussionAlias.entity({id:item.id})" ng-click="$close()" ng-repeat="item in data.items track by item.id"><div class="panel-body"><strong>{{item.title}}</strong><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="discussion.language({language:item.language})" ng-bind="item.language|t" ng-click="$close()"></a></li><li><span>{{item.update_time|prettyDate}}</span></li><li><span>{{\'C2025\'|t|format:item.comment_count}}</span></li><li><span>{{\'AS148\'|t|format:item.view_count}}</span></li></ul></div></div><aside class="text-center" ng-show="(data.meta && data.meta.has_next) || loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div></div>'),a.put("/views/user/modal/profile.friends.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'C0158\'|t}}</h4></div><div class="modal-body modal-list"><div class="panel-body loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="row"><div class="col-xs-2 grid-gutter-margin-b" ng-repeat="item in data.items"><a class="deactive" ui-sref="user({id:item.id})" title="{{item.nickname}}" ng-click="$close()"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" width="100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="modal-footer" ng-show="data.meta && data.meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></div>'),a.put("/views/user/modal/profile.hide.video.link.html",'<div class="sweet-alert showSweetAlert visible" style="display: block"><a ng-click="$close()"><span style="background-image: url(/static/images/icons/close_icon.svg);\n    width: 20px;\n    height:20px;\n    display: inline-block;\n    position: absolute;\n    right: 10px;\n    top: 10px"></span></a><h2 ng-bind-html="content"></h2><p style="display: block">{{\'ST449\'|t}}</p><div class="sa-button-container"><button class="btn btn-lg btn-primary" ng-click="$close()" style="display: inline-block; box-shadow: rgba(221, 107, 85, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset; background-color: rgb(221, 107, 85)">{{\'ST430\'|t}}</button></div></div>'),a.put("/views/user/modal/profile.introduction.confirm.html",'<div class="sweet-alert showSweetAlert visible" style="display: block"><a ng-click="$close()"><span style="background-image: url(/static/images/icons/close_icon.svg);\n    width: 20px;\n    height:20px;\n    display: inline-block;\n    position: absolute;\n    right: 10px;\n    top: 10px"></span></a><h2 ng-bind-html="content"></h2><p style="display: block">{{\'ST431\'|t}}{{\'ST432\'|t}}</p><div class="sa-button-container"><button class="btn btn-lg btn-primary" ng-click="submitIntroduction()" style="display: inline-block; box-shadow: rgba(221, 107, 85, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset; background-color: rgb(221, 107, 85)">{{\'ST430\'|t}}</button></div></div>'),a.put("/views/user/modal/profile.notebooks.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'C0160\'|t}}</h4></div><div class="modal-body modal-list"><div class="loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="article-item yes-cursor cursor-over" ui-sref="notebookAlias.entity({userId:item.author_obj.id,id:item.id})" ng-repeat="item in data.items track by item.id" ng-click="$close()"><div class="panel-body"><strong>{{item.title}}</strong><p class="text-muted">{{item.content}}</p><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="notebook.language({language:item.language})" ng-bind="item.language|t" ng-click="$close()"></a></li><li><span>{{item.create_time|prettyDate}}</span></li><li><span>{{\'NB020\'|t|format:item.correction_count}}</span></li><li><span>{{\'NB022\'|t|format:item.comment_count}}</span></li></ul></div></div><aside class="text-center" ng-show="data.meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div></div>'),a.put("/views/user/modal/profile.questions.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'C0155\'|t}}</h4></div><div class="modal-body modal-list"><div class="loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="article-item yes-cursor cursor-over" ui-sref="questionAlias.entity({id:item.id})" ng-repeat="item in data.items track by item.id" ng-click="$close()"><div class="panel-body"><strong>{{item.title}}</strong><ul class="list-inline no-margin-b text-light-gray"><li><a onclick="event.stopPropagation()||(event.cancelBubble = true)" ui-sref="questionsAlias.language({language:item.language})" ng-bind="item.language|t" ng-click="$close()"></a></li><li><span>{{item.create_time|prettyDate}}</span></li><li><span>{{\'AS142\'|t|format:item.answer_count}}</span></li></ul></div></div><aside class="text-center" ng-show="data.meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></aside></div></div>'),a.put("/views/user/modal/profile.teachers.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button><h4 class="modal-title">{{\'C0154\'|t}}</h4></div><div class="modal-body modal-list"><div class="panel-body loading-layout"><kp-loading indicator="data.items"></kp-loading><div class="row"><div class="col-xs-2 grid-gutter-margin-b" ng-repeat="item in data.items"><a class="deactive" ui-sref="teacher({id:item.id})" ng-click="$close()" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" width="100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="modal-footer" ng-show="data.meta.has_next"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMore()" stext="MH046"></button></div>'),a.put("/views/user/oxford.html","<style>.modal-body {\r\n    min-height: 100px;\r\n}\r\ntable.oxford-table {\r\n    width: 100%;\r\n    margin: 10px auto;\r\n}\r\n\r\ntable.oxford-table td {\r\n    padding: 10px;\r\n    border: 1px solid #ddd;\r\n}\r\ntd.oxford-column-header {\r\n    font-weight: bold;\r\n}\r\ntd.oxford-header-main {\r\n    font-size: 120%;\r\n    font-weight: bold;\r\n}\r\ntd.oxford-row-header {\r\n    font-style: italic;\r\n}\r\n.more-information {\r\n    margin: 10px auto 0px auto;\r\n}\r\n.language-bars {\r\n    margin-bottom: 10px;\r\n}</style><div class=\"modal-header\"><button type=\"button\" class=\"close\" aria-hidden=\"true\" ng-click=\"$close()\">&times;</button><h4 class=\"modal-title\">{{'KP284'|t}}</h4></div><div class=\"modal-body\"><kp-loading indicator=\"user\"></kp-loading><div ng-show=\"loadReady\"><div class=\"text-center\"><img ng-src=\"{{'/static/images/shareicon/oxford_logo2.png'}}\" border=\"0\"><h2>{{'KP284'|t}}</h2><h1>{{level}}</h1><p ng-if=\"level=='A1'\">{{'C0019'|t}}</p><p ng-if=\"level=='A2'\">{{'C0020'|t}}</p><p ng-if=\"level=='B1'\">{{'C0903'|t}}</p><p ng-if=\"level=='B2'\">{{'C0021'|t}}</p><p ng-if=\"level=='C1'\">{{'C0905'|t}}</p><p ng-if=\"level=='C2'\">{{'C0022'|t}}</p><p ng-if=\"level=='C2+'\">{{'C0022'|t}}({{'C0023'|t}})</p><p>{{'KP534'|t}}: {{exam_date|amDate:'TF002'}}</p></div><h5>{{level}}: <span ng-if=\"level=='A1'\">{{'C0019'|t}}</span> <span ng-if=\"level=='A2'\">{{'C0020'|t}}</span> <span ng-if=\"level=='B1'\">{{'C0903'|t}}</span> <span ng-if=\"level=='B2'\">{{'C0021'|t}}</span> <span ng-if=\"level=='C1'\">{{'C0905'|t}}</span> <span ng-if=\"level=='C2'\">{{'C0022'|t}}</span> <span ng-if=\"level=='C2+'\">{{'C0022'|t}}({{'C0023'|t}})</span></h5><img class=\"language-bars\" ng-src=\"{{'/static/images/shareicon/badges_level_'+ (level|lowercase) +'.png'}}\"><div ng-if=\"level=='A1'\"><p>{{'KP287'|t}}</p><p>{{'KP288'|t}}</p><p>{{'KP289'|t}}</p></div><div ng-if=\"level=='A2'\"><p>{{'KP290'|t}}</p><p>{{'KP291'|t}}</p><p>{{'KP292'|t}}</p></div><div ng-if=\"level=='B1'\"><p>{{'KP293'|t}}</p><p>{{'KP294'|t}}</p><p>{{'KP295'|t}}</p></div><div ng-if=\"level=='B2'|| level=='C1'\"><p>{{'KP296'|t}}</p><p>{{'KP297'|t}}</p><p>{{'KP298'|t}}</p></div><div ng-if=\"level=='C2'|| level=='C2+'\"><p>{{'KP299'|t}}</p><p>{{'KP330'|t}}</p><p>{{'KP331'|t}}</p></div><div ng-show=\"showDetailedResults\"><table class=\"oxford-table\"><tr><td></td><td class=\"oxford-column-header\">{{'KP533'|t}}</td><td class=\"oxford-column-header\">{{'TP013'|t}}</td><td class=\"oxford-column-header\">{{'TP014'|t}}</td></tr><tr><td class=\"oxford-header-main\">{{'KP532'|t}}</td><td>{{examObj.score}}</td><td>{{examObj.period}}</td><td>{{examObj.level}}</td></tr><tr><td class=\"oxford-row-header\">{{'KP536'|t}}</td><td>{{examObj.score1}}</td><td>{{examObj.period1}}</td><td>{{examObj.level1}}</td></tr><tr><td class=\"oxford-row-header\">{{'KP530'|t}}</td><td>{{examObj.score2}}</td><td>{{examObj.period2}}</td><td>{{examObj.level2}}</td></tr></table></div><p class=\"more-information\"><a ui-sref=\"oet\" ng-click=\"$close()\">{{'KP535'|t}}</a></p></div></div>"),a.put("/views/user/profile.bs.html",'<div ng-include="\'/views/common/top.tpl.bs.html\'" id="top"></div><style>.btn.switch, .btn.switch:active, .btn.switch:focus {\n    color: rgba(255, 255, 255, 0.7);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  .visible-desktop {\n    display: grid !important\n  }\n\n  .visible-tablet{\n    display: none;\n  }\n\n  @media (max-width: 992px){\n    .visible-screen{\n      display: none;\n    }\n\n    .visible-tablet{\n      display: block;\n    }\n\n\n  }</style><div ng-hide="error"><kp-title title="TP514" params="[user.nickname,speaks,learns,fromCT]" ng-if="user"></kp-title><div class="profile-container" style="height: 300px"></div><div class="container" style="margin-top:-285px" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n       \'notification\':isTopShow}"><div class="grid-gutter-margin-b"><button ng-if="canBackToSearch" type="button" class="btn btn-outline btn-xs btn-labeled switch" ng-click="backToSearch()">{{\'PB107\'|t}}</button> <button ng-if="user.is_pro||user.is_tutor" type="button" class="btn btn-outline btn-xs btn-labeled switch" ui-sref="teacher({id:user.id})">{{\'PB108\'|t}}</button></div><div class="row"><div class="col-md-8"><div class="panel no-border loading-layout"><kp-loading indicator="user"></kp-loading><div class="panel-body" ng-if="user"><div class="row grid-gutter-margin-b"><div class="col-md-3 is-relative text-center"><p><img ng-src="{{ user|avatar:\'150\' }}" width="150" class="rounded user-avatar" alt="" kp-fallback-avatar></p><p class="text-muted"><i class="fa fa-map-marker"></i> <span ng-show="user.living_city_text_">{{user.living_city_text_}},</span> {{user.living_country_id|t}}<br><span tooltip="({{user.user_timezone_utc}}) {{user.user_timezone_location}}">{{user.local_time_user|amDate:\'HH:mm\'}}&nbsp;{{user.user_timezone_utc}}</span></p><div class="visible-screen"><p class="text-left"><strong>{{\'PB073\'|t}}</strong>:<br>{{user.register_time|amDate:\'TF002\'}}</p><div class="text-left badge-wrapper" ng-if="badgeItems.length>0"><p><strong>{{\'BD401\'|t}}</strong> <span class="pull-right" ng-click="openBadges()" style="cursor: pointer">{{\'BD101\'|t}} ></span></p><div><span ng-repeat="badge in badgeItems|limitTo:3|reverse"><img ng-src="{{\'/static/images/badges/\'+ badge.img +\'_badge.svg\'}}" width="40" style="margin-right: 10px;vertical-align: bottom"></span></div></div></div></div><div class="col-md-9"><span class="pull-right" ng-if="!isSelf()"><div class="btn-group" dropdown><button type="button" class="btn btn-xs" dropdown-toggle><i class="fa fa-ellipsis-h"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li kp-block-user block-data="{\'args\':1,\'blockee_id\':user.id,\'callBack\':blockUserCallback}" ng-hide="user.is_blocker"><a class="ng-binding">{{"C0083"|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:user.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></span><h1 class="no-margin">{{user.nickname}} <i ng-if="user.is_premium && !user.is_pro && !user.is_tutor" class="fa fa-ii-premium color-premuim" title="{{\'PU009\'|t}}" style="font-size: 36px"></i></h1><p class="text-light-gray"><i class="fa fa-circle online-status" ng-class="{online:user.is_online}"></i> <span ng-class="{\'text-success\':user.is_online}">{{user.is_online?(\'C0038\'|t):(\'KP266\'|t|format:user.last_login_time_from_now) }}</span></p><div class="text-lb grid-gutter-margin-b"><p><span class="no-margin"><ul class="list-inline"><li><span ng-if="user.age>0">{{user.age}}</span><span ng-if="user.age>0&&(user.gender==1||user.gender==2)">,&nbsp;</span> <span ng-if="user.gender==1">{{\'C0013\'|t}},&nbsp;</span> <span ng-if="user.gender==2">{{\'C0012\'|t}},&nbsp;</span></li><li ng-if="user.is_pro || user.is_tutor" class="{{user.is_pro?\'color-pro\':\'color-tutor\'}}"><i class="fa fa-ii-tutor" ng-if="user.is_pro" title="{{\'C0200\'|t}}" style="vertical-align: middle"></i> <i class="fa fa-ii-tutor" ng-if="!user.is_pro" title="{{\'C0201\'|t}}" style="vertical-align: middle"></i>&nbsp; <span translate="{{user.is_pro?\'TP003\':\'TP004\'}}" style="vertical-align: middle"></span></li><li>{{\'C0003\'|t}} <span ng-show="user.origin_city_text_">{{user.origin_city_text_}},</span> {{user.origin_country_id|t}}</li></ul></span></p><ul class="list-inline m-r-3"><li><strong>{{\'PB004\'|t}}</strong>:</li><li ng-repeat="item in user.language_obj_s|orderBy:\'level\':true">{{item.language|t}}<span class="l-level l-level{{item.level}}" title="{{item.level|kpLanguageLevel}}"></span> <span ng-hide="$last">,</span></li></ul><ul class="list-inline m-r-3" ng-if="(user.is_pro||user.is_tutor)&&(user.language_obj_s|filter:{is_teaching:1}).length<1"><li><strong>{{\'C0118\'|t}}</strong>:</li><li ng-repeat="item in user.language_obj_s|filter:{is_teaching:1}|orderBy:\'level\':true">{{item.language|t}}<span ng-hide="$last">,</span></li></ul><ul class="list-inline m-r-3" ng-hide="(user.language_obj_s|filter:{is_learning:1}).length<1"><li><strong>{{\'C0007\'|t}}</strong>:</li><li ng-repeat="item in user.language_obj_s|filter:{is_learning:1}|orderBy:\'level\':true">{{item.language|t}}<span ng-hide="$last">,</span></li></ul><p ng-if="badgeDisplay != false  && user.exam_result_shown_obj != null && user.exam_result_shown_obj.status!=2" style="vertical-align: middle"><a class="fa fa-ii-oopt text-lg" style="color: #94B004" ui-sref="oet" href="/p/oet" title="{{\'M0204\'|t}}"></a></p></div><div><p ng-bind-html="user.user_detail_obj.introduction|angularBracketsToEscape|replaceLineToBr"></p><div ng-if="user.exam_result_shown_obj != null && badgeDisplay != false"><img ng-src="{{\'/static/images/shareicon/badges5_\'+ (user.exam_result_shown_obj.level | lowercase) +\'.png\'}}" style="cursor:pointer;width:209px" ng-click="openOxford()"></div></div><div class="visible-tablet"><p class="text-left"><strong>{{\'PB073\'|t}}</strong>:<br>{{user.register_time|amDate:\'TF002\'}}</p><div class="text-left badge-wrapper" ng-if="badgeItems.length>0" style="width: 200px"><p><strong>{{\'BD401\'|t}}</strong> <span class="pull-right" ng-click="openBadges()" style="cursor: pointer">{{\'BD101\'|t}} ></span></p><div><span ng-repeat="badge in badgeItems | limitTo:3"><img ng-src="{{\'/static/images/badges/\'+ badge.img +\'_badge_sm.png\'}}" width="40" style="margin-right: 10px"></span></div></div></div></div></div></div></div><div class="panel no-border" ng-if="user.student_z_course_session_is_public"><kp-loading indicator="sessRatings"></kp-loading><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'PB055\'|t}}&nbsp;({{\'PB056\'|t}})</h4><div id="statistics" class="grid-gutter-margin-b" ng-if="sessRatings"><table class="table table-bordered"><thead><tr><th style="border-bottom-width:0px"></th><th class="text-center" style="border-bottom-width:0px"><strong>{{\'TP056\'|t}}</strong></th><th class="text-center" style="border-bottom-width:0px"><strong>{{\'TP057\'|t}}</strong></th><th class="text-center" style="border-bottom-width:0px"><strong>{{\'TP078\'|t}}</strong></th></tr></thead><tbody><tr><td><strong>{{\'PB036\'|t}}</strong><br><em class="grey11">{{\'M0105\'|t}}</em><br><em class="grey11">{{\'M0106\'|t}}</em><br><em class="grey11">{{\'M0113\'|t}}</em><br><em class="grey11">{{\'PB038\'|t}}</em></td><td class="text-center">{{sessRatings.completed_num_1month||0}}<br>{{sessRatings.pro_num_1month||0}}<br>{{sessRatings.tutor_num_1month||0}}<br>{{sessRatings.instant_num_1month||0}}<br>{{sessRatings.trial_num_1month||0}}</td><td class="text-center">{{sessRatings.completed_num_3month||0}}<br>{{sessRatings.pro_num_3month||0}}<br>{{sessRatings.tutor_num_3month||0}}<br>{{sessRatings.instant_num_3month||0}}<br>{{sessRatings.trial_num_3month||0}}</td><td class="text-center">{{sessRatings.completed_num||0}}<br>{{sessRatings.pro_num||0}}<br>{{sessRatings.tutor_num||0}}<br>{{sessRatings.instant_num||0}}<br>{{sessRatings.trial_num||0}}</td></tr><tr><td><strong>{{\'PB069\'|t}}</strong></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate_1month"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate_1month*100}}%</span></span></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate_3month"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate_3month*100}}%</span></span></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate*100}}%</span></span></td></tr><tr><td><strong>{{\'PB071\'|t}}</strong></td><td class="text-center">{{sessRatings.terminated_packages_1month||0}}</td><td class="text-center">{{sessRatings.terminated_packages_3month||0}}</td><td class="text-center">{{sessRatings.terminated_packages||0}}</td></tr></tbody></table></div><div class=""><div class="widget-comments tab-pane no-padding fade active in"><div class="no-padding-vr"><div class="comment" ng-repeat="item in LatestSession.items"><a class="{{ !item.oppo_user_obj.allow_profile&&\'deactive\'||\'\'}}" ui-sref="teacher({id:item.oppo_user_obj.id})" title="{{item.oppo_user_obj.nickname}}"><img ng-src="{{item.oppo_user_obj.avatar_file_name|avatar:75}}" class="comment-avatar" kp-fallback-avatar alt="{{item.oppo_user_obj.nickname}}"></a><div class="comment-body"><div class="comment-by"><a ui-sref="teacher({id:item.oppo_user_obj.id})" title="{{item.oppo_user_obj.nickname}}"><strong>{{item.oppo_user_obj.nickname}}</strong></a></div><div class="comment-text" kp-user-sessions-with-teacher data="item"></div></div></div><aside ng-show="(LatestSession.meta && LatestSession.meta.has_next)||loadMoreFlag"><button class="btn btn-labeled btn-block" italki-click-with-spinner="loadMoreLatestSession()" stext="MH046"></button></aside></div></div></div></div></div></div><div class="panel no-border" ng-if="user"><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'PB006\'|t}}</h4><div class="grid-gutter-margin-b"><ul class="profile_card list-inline"><li ng-click="openDatas(\'NOTEBOOK\')" style="width: 20%"><div class="info cursor-over" ng-class="{\' yes-cursor\':user.notebook_count!=0}"><span class="text-muted">{{\'C0160\'|t}}</span><br><strong class="text-lg">{{user.notebook_count}}</strong></div></li><li ng-click="openDatas(\'QUESTION\')" style="width: 20%"><div class="info cursor-over" ng-class="{\' yes-cursor\':user.question_count!=0}"><span class="text-muted">{{\'C0155\'|t}}</span><br><strong class="text-lg">{{user.question_count}}</strong></div></li><li ng-click="openDatas(\'DISCUSSION\')" style="width: 20%"><div class="info cursor-over" ng-class="{\' yes-cursor\':user.discussion_count!=0}"><span class="text-muted">{{\'GP020\'|t}}</span><br><strong class="text-lg">{{user.discussion_count}}</strong></div></li><li ng-click="openDatas(\'FRIEND\')" style="width: 20%"><div class="info cursor-over" ng-class="{\' yes-cursor\':friends&&friends.meta.has_next}"><span class="text-muted">{{\'C0158\'|t}}</span><br><strong class="text-lg">{{user.friends_count}}</strong></div></li><li style="width: 20%"><div class="info"><span class="text-muted">{{\'C0091\'|t}}</span><br><strong class="text-lg">{{user.activity_points}}</strong></div></li></ul><div class="clearfix"></div></div><div class="widget-comments widget-comments2 no-padding"><div class="no-padding-vr"><div ng-repeat="active in activities.items" class="comment cursor-over no-border"><a ui-sref="user({\'id\':active.poster_obj.id})"><img ng-src="{{ active.poster_obj|avatar:50 }}" alt="" class="comment-avatar"></a><div class="comment-body"><div class="comment-text"><strong><a ui-sref="user({\'id\':user.id})">{{user.nickname}}</a></strong> <strong ng-switch="active.activity_type"><span ng-switch-when="1">{{\'PB207\'|t}}: <a ui-sref="questionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="2"><span ng-bind-html="\'PB206\'|t|format:\'<a href=\\\'/user/\'+active.poster_obj.id+\'\\\'>\'+active.poster_obj.nickname+\'</a>\'"></span> : <a ui-sref="questionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="3">{{\'PB205\'|t}}: <a ui-sref="discussionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="4"><span ng-bind-html="\'PB208\'|t|format:\'<a href=\\\'/user/\'+active.poster_obj.id+\'\\\'>\'+active.poster_obj.nickname+\'</a>\'"></span> : <a ui-sref="discussionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="5">{{\'PB204\'|t}}: <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="6"><span ng-bind-html="\'PB203\'|t|format:\'<a href=\\\'/user/\'+active.poster_obj.id+\'\\\'>\'+active.poster_obj.nickname+\'</a>\'"></span> : <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="7"><span ng-bind-html="\'PB209\'|t|format:\'<a href=\\\'/user/\'+active.poster_obj.id+\'\\\'>\'+active.poster_obj.nickname+\'</a>\'"></span> : <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span></strong> <span class="text-muted" ng-if="active.post_obj.content|delHtmlTag"><br><span ng-bind-html="active.post_obj.content|delHtmlTag|subStrLen:100:\'...\'"></span></span></div><div class="comment-by"><ul class="list-inline"><li>{{active.create_time|prettyDate}}</li><li ng-if="active.post_obj.correction_count || active.post_obj.correction_count==0">{{\'NB020\'|t|format:active.post_obj.correction_count}}</li><li ng-if="active.post_obj.answer_count || active.post_obj.answer_count==0">{{\'C2030\'|t|format:active.post_obj.answer_count}}</li><li ng-if="active.post_obj.comment_count || active.post_obj.comment_count==0">{{\'GP035\'|t|format:active.post_obj.comment_count}}</li></ul></div></div></div></div><aside class="text-center" ng-show="activities.meta.has_next "><button class="btn btn-labeled btn-block" italki-click-with-spinner="activities.loadMore()" stext="MH046"></button></aside></div></div></div></div></div><div class="col-md-4"><div class="panel no-border"><div class="panel-body"><span ng-if="!isSelf()"><style>.dis:hover{background-color:#eee !important;border-color:#eee !important;}</style><div ng-if="!currentUser"><button class="btn btn-lg btn-success btn-block" style="pointer-events:auto" kp-add-friend-request receiver-id="user.id"><i class="fa fa-user-plus"></i>&nbsp;{{\'C0078\'|t}}</button> <button class="btn btn-lg btn-block" style="pointer-events:auto" ng-click="chatWithMe(user.id)"><i class="fa fa-comment"></i>&nbsp;{{\'ML100\'|t}}</button></div><div ng-if="currentUser&&currentUser.register_status==255"><button class="btn btn-lg btn-success btn-block" kp-add-friend-request receiver-id="user.id" style="pointer-events:auto" title="{{(!user.is_send_friend_request?\'ML325\':\'\')|t|format:user.nickname}}" ng-disabled="!user.is_send_friend_request" ng-class="{\'dis\':!user.is_send_friend_request}"><i class="fa fa-user-plus"></i>&nbsp;{{\'C0078\'|t}}</button> <button class="btn btn-lg btn-block" style="pointer-events:auto" ng-disabled="!user.allow_message" title="{{(!user.allow_message?\'ML324\':\'\')|t|format:user.nickname}}" ng-click="chatWithMe(user.id)"><i class="fa fa-comment"></i>&nbsp;{{\'ML100\'|t}}</button></div><div ng-if="currentUser&&currentUser.register_status!=255"><button class="btn btn-lg btn-success btn-block" style="pointer-events:auto" ng-click="openModalInstance()"><i class="fa fa-user-plus"></i>&nbsp;{{\'C0078\'|t}}</button> <button class="btn btn-lg btn-block" style="pointer-events:auto" ng-click="openModalInstance()"><i class="fa fa-comment"></i>&nbsp;{{\'ML100\'|t}}</button></div></span><p ng-if="isSelf()"><a ui-sref="setting.editProfile" class="btn btn-lg btn-primary btn-block"><i class="fa fa-pencil"></i>&nbsp;{{\'MH031\'|t}}</a></p></div></div><div class="panel no-border" ng-if="teachers&&teachers.data.length>0"><div class="panel-body"><span class="pull-right" ng-if="teachers.meta.has_next"><a href="javascript:void(0);" ng-click="openDatas(\'TEACHER\')">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t">{{\'C0154\'|t}}</h5><div class="row"><div class="col-xs-3 profile-card" kp-user-card user-id="item.id" ng-repeat="item in teachers.data"><a class="deactive" ui-sref="teacher({id:item.id})" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:100}}" class="rounded" style="width: 100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="panel no-border" ng-if="friends&&friends.data.length>0"><div class="panel-body"><span class="pull-right" ng-if="friends.meta.has_next"><a href="javascript:void(0);" ng-click="openDatas(\'FRIEND\')">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t">{{\'C0158\'|t}}</h5><div class="row"><div class="col-xs-3 profile-card" kp-user-card user-id="item.id" ng-repeat="item in friends.data"><a class="deactive" ui-sref="user({id:item.id})" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:100}}" class="rounded" style="width: 100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div></div></div></div></div><div ng-if="error"><div class="container unconfirm" style="min-height: 500px"><h2>{{\'PB002\'|t}}</h2></div></div><div ng-include="\'/views/common/bottom.bs.html\'"></div>'),
a.put("/views/user/user.info.html",'<div ng-controller="UserInfoCtrl"><div ng-hide="error"><kp-title title="TP514" params="[user.nickname,speaks,learns,fromCT]" ng-if="user"></kp-title><div class="profile-container" style="height: 300px"></div><div class="container" style="margin-top:-285px" ng-class="{\'unconfirm\':currentUser&&currentUser.register_status!=255||currentUser.instant_tutoring_status==1||currentUser[\'no_password\'],\n             \'notification\':isTopShow}"><div class="grid-gutter-margin-b"><button ng-if="canBackToSearch" type="button" class="btn btn-outline btn-xs btn-labeled switch" ng-click="backToSearch()">{{\'PB107\'|t}}</button> <button ng-if="user.is_pro||user.is_tutor" type="button" class="btn btn-outline btn-xs btn-labeled switch" ui-sref="teacher({id:user.id})">{{\'PB108\'|t}}</button></div><div class="row"><div class="col-md-8"><div class="panel no-border loading-layout"><kp-loading indicator="user"></kp-loading><div class="panel-body" ng-if="user"><div class="row grid-gutter-margin-b"><div class="col-md-3 is-relative text-center"><p><img ng-src="{{ user|avatar:\'150\' }}" width="150" class="rounded user-avatar" alt="" kp-fallback-avatar></p><p class="text-muted"><i class="fa fa-map-marker"></i> <span ng-show="user.living_city_text_">{{user.living_city_text_}},</span> {{user.living_country_id|t}}<br><span tooltip="({{user.user_timezone_utc}}) {{user.user_timezone_location}}">{{user.local_time_user|amDate:\'HH:mm\'}}&nbsp;{{user.user_timezone_utc}}</span></p></div><div class="col-md-9"><span class="pull-right" ng-if="!isSelf()"><div class="btn-group" dropdown><button type="button" class="btn btn-xs" dropdown-toggle><i class="fa fa-ellipsis-h"></i></button><ul class="dropdown-menu right list" style="margin-top: 12px"><li kp-block-user block-data="{\'args\':1,\'blockee_id\':user.id,\'callBack\':blockUserCallback}" ng-hide="user.is_blocker"><a class="ng-binding">{{"C0083"|t}}</a></li><li kp-report-concerna report-item="{reportType:\'USR-MBR\',reportId:user.id}"><a href="javascript:void(0);">{{\'CT103\'|t}}</a></li></ul></div></span><h1 class="no-margin">{{user.nickname}}</h1><div class="text-lb grid-gutter-margin-b"><p><span class="no-margin"><span ng-if="user.age>0">{{user.age}}</span><span ng-if="user.age>0&&(user.gender==1||user.gender==2)">,&nbsp;</span><span ng-if="user.gender==1">{{\'C0013\'|t}},&nbsp;</span><span ng-if="user.gender==2">{{\'C0012\'|t}},&nbsp;</span>{{\'C0003\'|t}} {{user.origin_city_text_}} {{user.origin_country_id|t}}</span></p><p class=""><strong>{{\'C0000\'|t}}</strong>:&nbsp; <span ng-repeat="item in user.language_obj_s|orderBy:\'level\':true">{{item.language|t}}<em class="lv lv{{item.level}}" title="{{item.level|kpLanguageLevel}}"></em><span ng-hide="$last">,&nbsp;</span></span></p><p class="" ng-if="user.is_pro||user.is_tutor"><span ng-hide="(user.language_obj_s|filter:{is_teaching:1}).length<1|orderBy:\'level\':true"><strong>{{\'C0118\'|t}}</strong>:&nbsp; <span ng-repeat="item in user.language_obj_s|filter:{is_teaching:1}">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></span></p><p class=""><span ng-hide="(user.language_obj_s|filter:{is_learning:1}).length<1|orderBy:\'level\':true"><strong>{{\'C0007\'|t}}</strong>:&nbsp; <span ng-repeat="item in user.language_obj_s|filter:{is_learning:1}">{{item.language|t}}<span ng-hide="$last">,&nbsp;</span></span></span></p></div></div></div><div><span ng-bind="user.user_detail_obj.introduction"></span></div></div></div><div class="panel no-border" ng-if="user.student_z_course_session_is_public"><kp-loading indicator="sessRatings"></kp-loading><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'M0085\'|t}}</h4><div id="statistics" class="grid-gutter-margin-b" ng-if="sessRatings"><table class="table"><thead><tr><th></th><th class="text-center"><strong>{{\'TP056\'|t}}</strong></th><th class="text-center"><strong>{{\'TP057\'|t}}</strong></th><th class="text-center"><strong>{{\'TP078\'|t}}</strong></th></tr></thead><tbody><tr><td><strong>{{\'PB036\'|t}}</strong><br><em class="grey11">{{\'M0105\'|t}}</em><br><em class="grey11">{{\'M0106\'|t}}</em><br><em class="grey11">{{\'M0113\'|t}}</em><br><em class="grey11">{{\'PB038\'|t}}</em></td><td class="text-center">{{sessRatings.completed_num_1month||0}}<br>{{sessRatings.pro_num_1month||0}}<br>{{sessRatings.tutor_num_1month||0}}<br>{{sessRatings.instant_num_1month||0}}<br>{{sessRatings.trial_num_1month||0}}</td><td class="text-center">{{sessRatings.completed_num_3month||0}}<br>{{sessRatings.pro_num_3month||0}}<br>{{sessRatings.tutor_num_3month||0}}<br>{{sessRatings.instant_num_3month||0}}<br>{{sessRatings.trial_num_3month||0}}</td><td class="text-center">{{sessRatings.completed_num||0}}<br>{{sessRatings.pro_num||0}}<br>{{sessRatings.tutor_num||0}}<br>{{sessRatings.instant_num||0}}<br>{{sessRatings.trial_num||0}}</td></tr><tr><td><strong>{{\'PB069\'|t}}</strong></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate_1month"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate_1month*100}}%</span></span></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate_3month"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate_3month*100}}%</span></span></td><td class="text-center"><span ng-switch="sessRatings.attendance_rate"><span ng-switch-when="-1">N/A</span> <span ng-switch-default>{{sessRatings.attendance_rate*100}}%</span></span></td></tr><tr><td><strong>{{\'PB070\'|t}}</strong></td><td class="text-center">{{sessRatings.disputed_num_1month||0}}</td><td class="text-center">{{sessRatings.disputed_num_3month||0}}</td><td class="text-center">{{sessRatings.disputed_num||0}}</td></tr><tr><td><strong>{{\'PB071\'|t}}</strong></td><td class="text-center">{{sessRatings.terminated_packages_1month||0}}</td><td class="text-center">{{sessRatings.terminated_packages_3month||0}}</td><td class="text-center">{{sessRatings.terminated_packages||0}}</td></tr></tbody></table></div><div class="widget-comments tab-pane no-padding fade active in" ng-if="sessFeedbacks&&sessFeedbacks.length>0"><h5>{{\'KP232\'|t}}</h5><div class="no-padding-vr"><div class="comment" ng-repeat="item in sessFeedbacks"><a class="{{ !item.allow_profile&&\'deactive\'||\'\'}}" ui-sref="user({id:item.id})" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="comment-avatar" alt="{{item.nickname}}"></a><div class="comment-body"><div class="comment-text" ng-bind-html="item.session_comment"></div><div class="comment-by"><ul class="list-inline"><li>{{item.learn_language|t}}</li><li><a ui-sref="user({id:item.id})" title="{{item.nickname}}">{{item.nickname}}</a></li><li>{{item.comment_time|prettyDate}}</li></ul></div></div></div></div></div></div></div></div><div class="panel no-border" ng-if="user"><div class="panel-body"><div class=""><h4 class="no-margin-t">{{\'PB006\'|t}}</h4><div class="grid-gutter-margin-b"><ul class="profile_card list-inline"><li ng-click="openDatas(\'NOTEBOOK\')"><div class="info yes-cursor cursor-over"><span class="text-muted">{{\'C0160\'|t}}</span><br><strong class="text-lg">{{user.notebook_count}}</strong></div></li><li ng-click="openDatas(\'QUESTION\')"><div class="info yes-cursor cursor-over"><span class="text-muted">{{\'C0155\'|t}}</span><br><strong class="text-lg">{{user.question_count}}</strong></div></li><li ng-click="openDatas(\'DISCUSSION\')"><div class="info yes-cursor cursor-over"><span class="text-muted">{{\'GP020\'|t}}</span><br><strong class="text-lg">{{user.discussion_count}}</strong></div></li><li ng-click="openDatas(\'FRIEND\')"><div class="info cursor-over" ng-class="{\' yes-cursor\':friends&&friends.meta.has_next}"><span class="text-muted">{{\'C0158\'|t}}</span><br><strong class="text-lg">{{user.friends_count}}</strong></div></li></ul><div class="clearfix"></div></div><div class="widget-comments widget-comments2 no-padding"><div class="no-padding-vr"><div ng-repeat="active in activities.items" class="comment yes-cursor cursor-over no-border"><a ui-sref="user({\'id\':active.poster_obj.id})"><img ng-src="{{ active.poster_obj|avatar:50 }}" alt="" class="comment-avatar"></a><div class="comment-body"><div class="comment-text"><strong><a ui-sref="user({\'id\':active.poster_obj.id})">{{active.poster_obj.nickname}}</a></strong> <strong ng-switch="active.activity_type"><span ng-switch-when="1">{{\'PB207\'|t}}: <a ui-sref="questionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="2"><span ng-bind-html="\'PB206\'|t|format:\'<a href=\\\'/user/\'+active.master_obj.id+\'\\\'>\'+active.master_obj.nickname+\'</a>\'"></span> : <a ui-sref="questionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="3">{{\'PB205\'|t}}: <a ui-sref="discussionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="4"><span ng-bind-html="\'PB208\'|t|format:\'<a href=\\\'/user/\'+active.master_obj.id+\'\\\'>\'+active.master_obj.nickname+\'</a>\'"></span> : <a ui-sref="discussionAlias.entity({id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="5">{{\'PB204\'|t}}: <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="6"><span ng-bind-html="\'PB203\'|t|format:\'<a href=\\\'/user/\'+active.master_obj.id+\'\\\'>\'+active.master_obj.nickname+\'</a>\'"></span> : <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span> <span ng-switch-when="7"><span ng-bind-html="\'PB209\'|t|format:\'<a href=\\\'/user/\'+active.master_obj.id+\'\\\'>\'+active.master_obj.nickname+\'</a>\'"></span> : <a ui-sref="notebookAlias.entity({userId:active.poster_obj.id,id:active.post_id})">{{active.post_obj.title}}</a></span></strong> <span class="text-muted" ng-if="active.post_obj.content|delHtmlTag"><br><span ng-bind-html="active.post_obj.content|delHtmlTag|subStrLen:100:\'...\'"></span></span></div><div class="comment-by"><ul class="list-inline"><li>{{active.create_time|prettyDate}}</li><li ng-if="active.post_obj.correction_count || active.post_obj.correction_count==0">{{\'NB020\'|t|format:active.post_obj.correction_count}}</li><li ng-if="active.post_obj.answer_count || active.post_obj.answer_count==0">{{\'C2030\'|t|format:active.post_obj.answer_count}}</li><li ng-if="active.post_obj.comment_count || active.post_obj.comment_count==0">{{\'GP035\'|t|format:active.post_obj.comment_count}}</li></ul></div></div></div></div><aside class="text-center" ng-show="activities.meta.has_next "><button class="btn btn-labeled btn-block" italki-click-with-spinner="activities.loadMore()" stext="MH046"></button></aside></div></div></div></div></div><div class="col-md-4"><div class="panel no-border" ng-if="user&&((!isSelf()&&user.is_send_friend_request)||isSelf()||user.allow_message)"><div class="panel-body"><p ng-if="!isSelf()&&user.is_send_friend_request"><button class="btn btn-lg btn-success btn-block" kp-add-friend-request receiver-id="user.id"><i class="fa fa-user-plus"></i>&nbsp;{{\'C0078\'|t}}</button></p><p ng-if="isSelf()"><a ui-sref="setting.editProfile" class="btn btn-lg btn-primary btn-block"><i class="fa fa-pencil"></i>&nbsp;{{\'MH031\'|t}}</a></p><span ng-if="user.allow_message"><button class="btn btn-lg btn-block" ng-disabled="!currentUser" ng-click="chatWithMe(user.id)"><i class="fa fa-comment"></i> {{\'ML100\'|t}}</button></span></div></div><div class="panel no-border" ng-if="teachers&&teachers.data.length>0"><div class="panel-body"><span class="pull-right"><a href="javascript:void(0);" ng-click="openDatas(\'TEACHER\')" ng-if="teachers.meta.has_next">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t">{{\'C0154\'|t}}</h5><div class="row"><div class="col-xs-3 profile-card" kp-user-card user-id="item.id" ng-repeat="item in teachers.data"><a class="deactive" ui-sref="teacher({id:item.id})" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:50}}" class="rounded" style="width: 100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div><div class="panel no-border" ng-if="friends&&friends.data.length>0"><div class="panel-body"><span class="pull-right" ng-if="friends.meta.has_next"><a ng-click="openDatas(\'FRIEND\')">{{\'TP167\'|t}}</a></span><h5 class="no-margin-t">{{\'C0158\'|t}}</h5><div class="row"><div class="col-xs-3 profile-card" kp-user-card user-id="item.id" ng-repeat="item in friends.data"><a class="deactive" ui-sref="teacher({id:item.id})" title="{{item.nickname}}"><img ng-src="{{item.avatar_file_name|avatar:75}}" class="rounded" style="width: 100%" kp-fallback-avatar="" alt="{{item.nickname}}"></a></div></div></div></div></div></div></div></div><div ng-if="error"><div class="container unconfirm" style="min-height: 500px"><h2>{{\'PB002\'|t}}</h2></div></div></div>')}]);